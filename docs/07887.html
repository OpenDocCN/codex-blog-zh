<html>
<head>
<title>Phone Number Verification with React Native and Twilio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Native和Twilio验证电话号码</h1>
<blockquote>原文：<a href="https://medium.com/codex/phone-number-verification-with-react-native-and-twilio-afb09e5486aa?source=collection_archive---------2-----------------------#2022-07-03">https://medium.com/codex/phone-number-verification-with-react-native-and-twilio-afb09e5486aa?source=collection_archive---------2-----------------------#2022-07-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="b914" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你以前肯定和短信验证有过互动。您甚至可以使用Twilio API编写一个。那是一周前的我。为什么我要写一篇文章解释如何针对你使用Twilio？您可能已经注意到，Twilio是一家快速发展的公司，他们的API和文档都在不断改进。我以前用过Twilio，但是没有一样看起来很熟悉。此外，在线视频和教程已经过时。这是我在2022年7月2日记录的过程。</p><p id="c5d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们首先了解一下我们的架构是如何建立的。下图用编号的步骤解释了这一点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/acbeec5b5ff95156e66a142d2e7cf3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1aNLguwqkMk10UYYMfDqIQ.png"/></div></div></figure><p id="73b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了可访问性，我将在下面写下不同部分之间的遭遇，但是如果你对这个图满意的话，你可以跳到下一节。</p><p id="8f5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ReactNativeAPP: Hey backend我的号码是+1857****，可以验证一下吗？</p><p id="a359" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Backedend:嗨Twilio，+1857***想被验证，能不能给我发个验证码。</p><p id="09f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Twilio:嘿，电话号码，这是一条短信，带有ReactNativeAPP要求的验证码。</p><p id="1a25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ReactNativeApp:嘿后端，我提交的手机得到了验证码546。那是你送的吗？</p><p id="059c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">后端:嘿Twilio，546是你发给+1857***的验证号吗？</p><p id="c055" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是的，先生，就是它。</p><p id="67b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意</strong>:需要注意的重要一点是，我们的Twilio API调用必须通过我们的后端，而不是直接来自前端。这提供了几个安全特性。首先，我们不必向客户提供的代码公开我们的Twilio授权令牌。如果有人能接触到这些信息，他们完全可以接管我们的Twilio账户。</p><p id="b42c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，我们的设置不会自动使我们的安全防弹。例如，它不能阻止有人伪装成我们的react本机应用程序，并向我们的后端发送多个请求，从而导致可能的DDoS攻击或花费我们很多钱。这可以通过在节点后端放置一个过滤器来避免。我们还可以采取其他多种保护措施，但我不会在本文中探讨这些措施。</p><h1 id="af3b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">设置Twilio账户</strong></h1><p id="947b" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">现在让我们设置我们的Twilio apis。你可以去twilio.com。一旦你完成了注册过程，你应该被引导到你的控制台，看起来应该像下面这样。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/de3018e21d64da5fac2ac66c4df1dd9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvJ4qw9JL9Nz5LQkYYAXig.png"/></div></div></figure><p id="3f8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一页中，请注意帐户信息部分下的信息，我们稍后会回来。现在，继续创建一个虚拟电话号码。完成后，转到探索产品部分并选择验证。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/05191d5eb25262491b473b113a3ce570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRurL8yPEuH36qof3vKWnQ.png"/></div></div></figure><p id="d59c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后会提示您创建服务。继续创建一个新服务。你可以随便叫它什么，但是一旦你注意到服务的SID。你可以把它复制到某个地方，但是你也可以以后再回来。这种服务的创造总结了事物的Twilio方面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/6d6c12625ce21fc00dde25b969968421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdZGBHEKyj0eNyYBuNWmvA.png"/></div></div></figure><h1 id="5427" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">设置后端</strong></h1><p id="a0f3" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">这里，我假设您已经设置了节点和npm。也就是说，你需要创建一个新的文件夹。在这个文件夹中，安装twilio和express。你可以这样做，首先用<code class="du ku kv kw kx b">npm init</code>初始化npm，然后用<code class="du ku kv kw kx b">npm install express</code>和<code class="du ku kv kw kx b">npm install twilio</code>初始化。完成安装后，您的文件夹结构应该如下所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/5ea2ddff8d662508b6d549481982aa21.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*i7BBWVfm-XDzyZF1eSlUGw.png"/></div></figure><p id="5be8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在创建一个server.js文件，其中包含以下代码的变体。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="02c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在编写本代码时使用了<a class="ae lb" href="https://www.twilio.com/docs/verify/api" rel="noopener ugc nofollow" target="_blank">https://www.twilio.com/docs/verify/api</a>文档。</p><p id="5a01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">代码是不言自明的，但是为了澄清一点，我们有三个可到达的URL。</p><p id="6bae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ku kv kw kx b">/</code>:主页面，完全没必要。它仅用于测试目的。</p><p id="618d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么我们有</p><p id="369a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ku kv kw kx b">/verify/:to</code></p><p id="47f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是向数字<code class="du ku kv kw kx b">:to</code>发送验证的代码，或者例如<code class="du ku kv kw kx b">/verify/+1857****</code>将向<code class="du ku kv kw kx b">+1857****</code>发送验证</p><p id="2348" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后我们有了</p><p id="d388" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ku kv kw kx b">/check/:to/:code</code></p><p id="6645" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将检查<code class="du ku kv kw kx b">:code</code>是否是发送给<code class="du ku kv kw kx b">:to</code>的验证码。因此，如果代码<code class="du ku kv kw kx b">5678</code>被发送到<code class="du ku kv kw kx b">+1857***</code>，那么<code class="du ku kv kw kx b">/check/+1857****/5678</code>将返回一个json响应来确认或拒绝。</p><p id="0b89" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后一个难题是你可以在哪里找到前三个常数。我们已经讨论过在哪里可以找到服务ID(它是您创建的服务页面)。至于accountId和authToken，您可以在前面提到的主控制台中找到它们。</p><p id="f01b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以通过运行<code class="du ku kv kw kx b">npm start</code>来测试我们的后端了。一旦你运行了这个命令，进入你的浏览器，输入<code class="du ku kv kw kx b">lcoalhost:3000</code>就会显示欢迎文本。</p><h1 id="34d8" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">设置React本机前端</strong></h1><p id="fbd2" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">最后一块是面向用户的react原生应用。我再次假设您已经有了react本机和导航设置，如果没有，您可能想看看react本机文档中关于设置您的编码和测试环境的内容。</p><p id="a502" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将首先提供一个电话验证页面作为组件。为这个项目安装的唯一包是react-native-phone-number-input。你可以在这里找到安装的详细信息(<a class="ae lb" href="https://www.npmjs.com/package/react-native-phone-number-input" rel="noopener ugc nofollow" target="_blank">https://www . npmjs . com/package/react-native-phone-number-input</a>)。这个包似乎有一些已知的漏洞:它是由你来使用它(或者你可以创建自己的)。不管怎样，让我们进入代码。</p><p id="7df1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我已经评论了重要的部分，其他的</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="4d48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能需要一些操作来为您的用例配置代码，但是我希望这能让您对如何使用Twilio API有一个大致的了解。如果它留下了评论，如果它没有留下改进。</p></div></div>    
</body>
</html>