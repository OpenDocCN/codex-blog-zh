# 技术领导者如何破坏软件开发者，他们应该怎么做

> 原文：<https://medium.com/codex/how-tech-leaders-sabotage-software-developers-and-what-they-should-do-instead-898855293235?source=collection_archive---------1----------------------->

## 知道在哪里削减和在哪里投资是成功项目的关键区别

![](img/52efc3c4c8a32c5353a8429a9ad85af3.png)

图片由 [Niap3d](https://pixabay.com/users/niap3d-529886/) 在 [Pixabay](https://pixabay.com/) 上拍摄

我给你讲个故事吧。也许你以前听过这个。

一家婚庆行业的初创公司希望在短短六个月的时间内为春季婚礼季建立一个新的在线登记处。

他们带来了一些经验丰富的程序员，他们带来了所有最新最棒的技术:TypeScript、React、Redux、TypeORM、MongoDB、GraphQL、微服务等等。他们花了前几个月的时间来设置一切，讨论整体架构，并尽快构建服务。

最初几个月一切顺利。然而，进行到一半时，他们意识到他们不能在最后期限前完成。发展已经大大放缓，有太多的事情要做。他们继续疯狂招聘，迅速壮大自己的团队。工程师花时间面试和讨论候选人。一旦被雇佣，这些新人就很难加入并占用人们的时间，从而进一步减缓发展。人们开始在深夜和周末工作。走的捷径更多。

离最后期限还有一周。虽然已经编写了大量代码，并且大部分功能都在，但是它缺少一些关键特性，可靠性和性能都很差。

这个团队有足够的资源、时间和专业知识来在截止日期前构建一个可靠、成功的产品。发生了什么事？

# 知道从哪里下手

> “我们是一家时间紧迫的初创公司。”—匿名

你可能听过这个寓言，“老工程师[和锤子](/@oceanbcreative/the-ship-repair-man-story-dd959a4469d8)知道在哪里投资——以及在哪里削减——是至关重要的。不幸的是，许多经理和首席软件工程师都在追逐潮流，而不是执行明智的策略。

在基于真实故事的婚礼创业案例中，他们缺少几个关键领域。

他们对流行的复杂工具进行了大量投资，但缺乏对基本面的投资。日志记录、错误处理和配置等简单的事情缺乏结构、工具或标准化。没有[单元测试](https://lawrey.medium.com/unit-tests-ui-tests-integration-tests-end-to-end-tests-c0d98e0218a6)(只有一些伪装成单元测试的集成测试)。他们的文档已经过时，令人困惑。最糟糕的是，代码库对于一个 MVP 来说过于复杂和难以理解。

这些“小”的日常事物可能没有 *Framework X* 那么吸引人，也更难向管理层推销，但是它们更重要。我在没有 GraphQL 的情况下构建了成功的应用程序，但没有一个没有全面的错误处理策略。

当被问到这些不足之处时，CTO 的回答是“是的，我也注意到了…但是我们不是微软。我们是一家时间紧迫的初创公司。”

当然，在你小的时候，有些事情是可以被忽略的。也许你不需要那么严格的安全规则。您可能不需要复杂的缩放工具，如 GraphQL 或 Terraform。您可能不需要担心数据库查询优化或复制。也许你不需要那么多的缓存图层。当你期望用 1，000 个用户发布软件时，构建支持 100 万个用户的软件是浪费时间。

然而，软件变得非常复杂。它只是一堆逻辑和指令的陈述，而不是物理的东西。这是一个集体思考练习。

随着代码变得越来越复杂，阅读、理解、观察、调试和更改变得越来越困难。当这种情况发生时，速度就会跌落悬崖。计划外工作的风险会成倍增加。在某种程度上，反馈循环将代码库推到了[软件事件视界](https://betterprogramming.pub/when-to-throw-in-the-towel-on-your-technical-debt-b1f6bbb3aa0c)的边缘。现在改变非常困难，而且完全不可预测。可靠性是不可能的。除了重新开始，你无法从中恢复。

作为领导，在这里偷工减料是你能做出的最糟糕的决定。然而，我看到许多领导者做出了完全相同的决定，将他们的开发人员置于一个艰难、不值得羡慕的境地。即使事情从来没有变得那么糟糕，他们也留下了大量的金钱(效率)和可靠性。

# 质量与速度的谬论

> “如果调试是去除 bug 的过程，那么编程一定是把 bug 放进去的过程。”—埃德格·迪克斯特拉

我看到人们犯的另一个非常相似的错误是试图用质量换取速度，或者是不重视代码质量。

有很多关于代码质量的讨论。但这是什么呢？一个定义:

*高质量的软件按预期工作，在合理的时间框架内开发，并且相当容易维护或修改。*

事实上，编程早期的“[软件危机](https://en.wikipedia.org/wiki/Software_crisis)”也是用类似的术语描述的。当时，越来越强大的计算机产生了越来越大、功能越来越丰富的程序。用于较小程序的相同工具和技术不能很好地扩展到这些更大、更复杂的程序。

明确地说，这并不意味着旧技术没有所需的性能或功能。相反，早期的计算机非常有限，以至于程序员不得不尽可能地想出最高效的程序——在许多情况下，比今天编写的软件更高效。然而，为了实现这一点，他们已经做出了权衡:可读性的性能。公平地说，程序员也受到当时语言和工具的限制，这些语言和工具做出了相同的设计选择。

软件危机不是由于缺乏技术人才，而是缺乏大规模编写正确、可读、可理解和“安全”代码的能力。这意味着项目是出了名的迟交、超预算和不可靠。有些甚至导致[人丧生](https://en.wikipedia.org/wiki/Therac-25)。

这是一件大事，它威胁到了整个蓬勃发展的软件业。1972 年，在他的图灵奖[获奖感言](https://www.cs.utexas.edu/users/EWD/ewd03xx/EWD340.PDF)中，Edsger Dijkstra 描述了他对这个问题的看法:

> “社会对程序员及其产品的表现越来越不满意。… **软件似乎与许多其他产品不同，通常来说，质量越高，价格越高。那些想要真正可靠的软件的人会发现，他们必须找到避免大多数错误的方法，这样编程过程就会变得更便宜。如果你想要更高效的程序员，你会发现他们不应该浪费时间去调试。”**

答案令人惊讶地简单，但就其本身而言具有挑战性:让编程更容易，更难出错。这可能是一个古老的概念，但是它仍然和今天的软件一样相关。

这种对大规模编程安全性的渴望正是软件工程学科发明要解决的问题。“软件工程”是玛格丽特·哈米尔顿在开发美国宇航局阿波罗制导计算机软件期间创造的，它受到了工程其他领域的启发，在这些领域，某些权衡和防御技术可以应用于问题。

静态类型语言、编译时错误检查和单元测试只是减少出错几率的几个例子。然而，最重要的策略是简单性和人类可理解性。

非常有趣，也是最令人印象深刻的是，这个问题是由艾伦·图灵在 20 世纪 40 年代预测的:

> “将会看到，一个人可以做的可能性是巨大的。我们的困难之一将是保持一个适当的纪律，这样我们就不会忘记我们在做什么。我们需要一些高效的图书管理员来维持秩序。”艾伦·图灵，1947 年

当我们谈论代码质量时，在高层次上，我们谈论的是防御性的、正确的、高性能的、简单的、可理解的、结构良好的、可测试的和具有良好覆盖率的代码。它是利用软件工程和防御性编程的策略编写的。

当软件经理问质量和速度的问题时，他们问的是一个有根本缺陷的问题。

代码质量越好，开发人员的效率、可靠性和可变更性就越好。最重要的是，在开发期间，它将继续拥有所有这些属性。没有代码质量，你就是在和自己作对。

# 成功的陷阱

> "计算科学家的主要挑战是不要被自己创造的复杂性所迷惑."—埃德格·迪克斯特拉

成功的软件项目基于人类的理解。作为领导者，这应该是你最顶层的技术策略。你所做的一切都应该服务于这个目标。谢天谢地，由于程序员的辛勤工作，我们比过去几年拥有更多的可支配资源。

然而，在我们开始之前，我需要提到文化的重要性。虽然重要，但是仅仅将最佳实践和工具放在适当的位置是不够的。作为一名领导者，你还必须培养一种质量文化。许多软件开发人员被以前的经理训练过，质量对他们来说相对不重要。编写高质量的代码需要一定程度的双向信任。以下是一些必须通过导师、指导、自学和实践来学习的技能。这需要投资。如果您的文化不重视这些，那么您的工程师可能不会自己进行这些投资。

下面是一些工具、技术或领域，它们是我服务于人类可理解性和代码质量的工程策略的关键部分。

## 简单

> 构建一个软件设计有两种方法:一种是让它简单到明显没有缺陷，另一种是让它复杂到明显没有缺陷 C. A. R .霍尔

简单是你工具箱中最强大的工具，也是最具挑战性的工具之一。另一方面，构建复杂的东西很容易。这是软件工程师的工作。

事情越简单，就越容易理解，出错的可能性就越小。正如 Dijkstra 所观察到的，一些东西越容易理解，人们就越快，他们必须做的调试就越少浪费。

即使是写得最差的函数，如果它非常小并且只做一件事，也是相对容易理解的。对于高性能系统或者可读性很差或者其他策略不可行的情况，这实际上是一个很好的策略。

> "组合性是控制复杂性的方法."
> —布莱恩·贝克曼

## 可读性和叙事性

这可能是最困难的技术，也是最主观的。正如一个好的作家应该能够清晰地描绘出故事的画面一样，一个好的程序员也必须如此。

> “最好的程序是这样编写的，计算机可以快速执行它们，人类可以清楚地理解它们。理想情况下，程序员是一名散文家，他用传统的美学和文学形式以及数学概念来交流算法的工作方式，并让读者相信结果是正确的。”唐纳德·克纳特

其中最重要也是最困难的一个方面是命名函数、变量、类型等等。良好的命名约定还可以通过"[使错误的代码看起来错误，从而帮助尽早识别错误。](/@NoLongerSet/naming-conventions-matter-making-wrong-code-look-wrong-a7e95397a26c)

软件工程给了我们两种伟大的技术来帮助我们使代码更容易被人阅读:[声明式编程](https://en.wikipedia.org/wiki/Declarative_programming)和[函数式编程](https://en.wikipedia.org/wiki/Functional_programming)。总的来说，它们允许读者理解代码，而不需要做关于状态的心理训练，也不需要成为一个人类编译器。它们还有助于更好地识别数据转换中的错误，并使代码更易于测试。关于这个话题，我最喜欢的演讲之一是 Kevlin Henney 的[重构到不变性](https://www.youtube.com/watch?v=APUCMSPiNh4&t=1126s)。

## 工具作业

如果使用得当，工具对于高效的软件团队来说是不可或缺的。最好的工具可以防止错误，强制执行最佳实践，并自动执行容易出错的耗时、重复的任务。这里有太多需要提及的，所以我只列出几个:静态类型语言(比如 TypeScript 和 Go)、代码林挺工具和 CI/CD 发布工具(比如 GitHub Actions 和[语义发布](http://github.com/semantic-release/semantic-release))。Rust 是一种相对较新的编程语言，它不仅拥有强大的静态类型系统，还试图最小化竞争条件和内存问题。

应该使用林挺工具来限制函数行数、行长度和深度。这降低了复杂性，将程序员推向了组合和声明性技术，并极大地提高了代码的可读性。

## 单元测试

软件工程中最未被充分利用和误解的技术之一是单元测试。

> 测试的真正价值不在于它们检测到代码中的错误，而在于它们检测到设计和生产代码的人在方法、注意力和技能上的不足 C. A. R .霍尔

单元测试的好处之一是，当有回归时，它允许你更快地找到根本原因，因为测试更加本地化。另一个原因是，当与分支覆盖工具结合使用时，可以更容易地探索代码的所有分支。

然而，到目前为止，最大的好处是它迫使程序员更仔细地考虑代码应该做什么。这也增加了将大块代码分解成更小、定义更好、更易测试的程序的压力。最好的单元测试易于阅读，并作为单元行为的规范。

Kevlin Henny 有一个很棒的关于这个的演讲，[当我们谈论单元测试的时候我们谈论什么](https://www.youtube.com/watch?v=-WWIeXmm4ec)。

## 配置和错误处理

把这两件事放在一起看起来可能会很奇怪，或者这两件事和我刚才提到的其他事不一样。然而，[和](https://www.usenix.org/system/files/conference/osdi14/osdi14-paper-yuan.pdf)都要为不成比例的 bug 数量负责。它们通常是系统中测试最少的部分，很难用自动化测试来覆盖。他们也往往是最容易被忽视的，就像之前婚礼创业的例子一样。您的配置应该是结构化和类型化的，并且尽可能没有逻辑。我在[报道错误处理，做这 10 件事来提高你的应用程序的可靠性](https://mhweiner.medium.com/do-these-10-things-to-improve-your-apps-reliability-fc114b16c2d1)。

# 包裹

不要混淆质量和操作功能。无论你有多少用户或者你的团队有多小，质量都是很重要的。你也买不到质量，它必须是你所做的一切的核心。

如果你为了“速度”而牺牲质量，你不仅是在破坏你的开发人员，也是在破坏整个项目。抛开任何外部问题，如果你不能在截止日期前交付高质量的软件，那么要么你没有真正生产出高质量的代码，要么你就是不现实！

想象一下，作为一名开发人员，你被劝阻不要做最好的工作。现在想象一下，因为你的代码——不是你最好的代码——没有按照它应该的方式工作，或者花了太长时间工作而被斥责。那会令人沮丧，不是吗？想象一下，不得不花很长时间来纠正它，结果却又遇到了同样的问题。你是想留下来，还是去一个更有效率、压力更小的地方？

领导者应该通过成为高质量代码的倡导者来建立他们的团队，这是生产出如预期那样工作、在合理的时间框架内开发并且相当容易维护或修改的软件的唯一方法。去问问编程的发明者吧。

想了解更多以最大开发效率大规模编写可靠软件的技术吗？阅读下面的文章:

[](https://mhweiner.medium.com/do-these-10-things-to-improve-your-apps-reliability-fc114b16c2d1) [## 做这 10 件事来提高你的应用程序的可靠性

### 这也不会损害你的长期生产力或理智。

mhweiner.medium.com](https://mhweiner.medium.com/do-these-10-things-to-improve-your-apps-reliability-fc114b16c2d1) 

Marc H. Weiner 是一位对安全关键系统特别感兴趣的创业老手。他共同创立了 NextEMR，这是最早的基于网络的电子病历应用程序之一。他还是临床试验软件、[、Marvel.com](https://marvel.com/)和 Shutterstock 基础设施的首席工程师。