<html>
<head>
<title>Users, Groups and Permissions in Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Linux中的用户、组和权限</h1>
<blockquote>原文：<a href="https://medium.com/codex/users-groups-and-permissions-in-linux-93895ae57d93?source=collection_archive---------2-----------------------#2021-08-23">https://medium.com/codex/users-groups-and-permissions-in-linux-93895ae57d93?source=collection_archive---------2-----------------------#2021-08-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d4d1b7468614b60fba047d873b5e7d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7TykzAXWD-J58QyrSThLQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Linux中的用户、组和权限</figcaption></figure><p id="c38f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">用理查德·费曼的话说，“如果你想掌握什么，就去教它。你教得越多，学得越好……”</p><p id="a7b6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">所以我在这里，在我的掌握之旅中，以迷你教程的形式记录了我如何学会在Linux中创建用户、组和权限。</p><blockquote class="js jt ju"><p id="267a" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated">我们将使用安装在本地虚拟服务器上的Ubuntu但是使用的大多数命令将适用于任何其他Linux发行版。本文还假设读者对Linux命令有基本的了解。</p></blockquote><p id="bc8f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Linux操作系统允许多用户功能。这意味着多个用户可以在共享系统资源的同时并发且独立地使用操作系统。</p><p id="b92d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这个小教程中，我们将创建3个组和15个用户，并将这些用户分配到3个组中。我们还将确保一个组中的用户无法访问另一个组中的文件，除非他们被添加到该组中。</p><p id="2595" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">但是首先，让我们来看看Linux中不同类型的用户帐户。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="665e" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">用户帐户的类型</h2><p id="c9fc" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">Linux用户帐户有三种基本类型:</p><ol class=""><li id="c3b6" class="lg lh hi iw b ix iy jb jc jf li jj lj jn lk jr ll lm ln lo bi translated"><strong class="iw hj"> Root用户(管理)</strong>:此用户帐户除了拥有创建、修改和删除用户和组的权限之外，还拥有对系统范围资源的完全访问权限。</li><li id="558e" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr ll lm ln lo bi translated"><strong class="iw hj">常规用户帐户</strong>:这些是具有登录shell和主目录的用户帐户，执行个人使用的任务，通常是独立于用户主目录的常见应用程序任务。</li><li id="f8cd" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr ll lm ln lo bi translated"><strong class="iw hj">服务帐户</strong>:这些是分配给应用程序的帐户，但是具有有限的访问权限，以保护应用程序免受潜在的攻击，同时仍然执行基本功能。他们通常没有主目录。</li></ol></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="c7ba" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">创建用户</h2><p id="3ccd" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">我们将需要<em class="jv"> admin </em>权限来创建用户——然而，出于安全原因，通常避免使用<em class="jv"> root </em> user <em class="jv"> </em>上下文。</p><p id="0c14" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，按照以下语法使用<code class="du lu lv lw lx b">useradd</code>命令创建一个普通用户:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="f326" class="kg kh hi lx b fi mg mh l mi mj">$ useradd -m &lt;name-of-user&gt;</span></pre><blockquote class="js jt ju"><p id="550f" class="iu iv jv iw b ix iy iz ja jb jc jd je jw jg jh ji jx jk jl jm jy jo jp jq jr hb bi translated"><strong class="iw hj">提示</strong>:要了解关于一个Linux命令的更多信息，运行<code class="du lu lv lw lx b">man &lt;command&gt;</code>，例如，<code class="du lu lv lw lx b">man useradd</code>来显示该命令的完整描述。</p></blockquote><p id="444f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后，为该用户分配管理员权限，如下所示:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="6e78" class="kg kh hi lx b fi mg mh l mi mj">$usermod -aG sudo &lt;username&gt;</span></pre><p id="cfdc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，这个<em class="jv">管理员</em>用户拥有超级用户权限，不需要用<code class="du lu lv lw lx b">sudo</code>命令输入密码。</p><p id="a6cd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们使用以下命令切换到<em class="jv"> admin </em>超级用户:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="c70c" class="kg kh hi lx b fi mg mh l mi mj">$ sudo su &lt;adminuser&gt;</span></pre><p id="c0c1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后用<code class="du lu lv lw lx b">useradd</code>命令创建更多的用户:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="5de8" class="kg kh hi lx b fi mg mh l mi mj">$ sudo useradd -m &lt;name of user&gt;</span></pre><p id="dce0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">根据您需要创建的用户数量执行此操作—在本例中是15个用户。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="eba5" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">查看用户</h2><p id="2b2f" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">系统中的所有用户都存储在<code class="du lu lv lw lx b">/etc/passwd</code>目录中。要查看所有用户，请运行以下命令:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="f6b2" class="kg kh hi lx b fi mg mh l mi mj">$ getent passwd</span></pre><p id="9fa0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这应该会输出类似如下的内容:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="25ac" class="kg kh hi lx b fi mg mh l mi mj">root:x:0:0:root:/root:/bin/bash<br/>...<br/>user1:x:1002:1002::/home/user1:/bin/sh<br/>user2:x:1003:1002::/home/user2:/bin/sh<br/>user3:x:1004:1002::/home/user3:/bin/sh<br/>user4:x:1006:1003::/home/user4:/bin/sh<br/>user5:x:1007:1003::/home/user5:/bin/sh<br/>...</span></pre><p id="614b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每个条目具有以下特征:</p><ul class=""><li id="46b3" class="lg lh hi iw b ix iy jb jc jf li jj lj jn lk jr mk lm ln lo bi translated">用户名:<code class="du lu lv lw lx b">user1</code></li><li id="881b" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">加密密码:<code class="du lu lv lw lx b">x</code></li><li id="94d2" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">用户的唯一标识符(UID):<code class="du lu lv lw lx b">100x</code></li><li id="5325" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">用户组ID (GID): <code class="du lu lv lw lx b">100x</code></li><li id="2a6b" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">通用电气综合运营主管(GECOS)字段—在本例中为空。(<em class="jv">该字段包含以逗号分隔的属性字符串形式的一般信息，例如，全名；电话号码；etc) </em></li><li id="4ec2" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">用户主目录:<code class="du lu lv lw lx b">/home/user1</code></li><li id="7cd8" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">用户的默认登录shell:<code class="du lu lv lw lx b">/bin/sh</code></li></ul></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="9881" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated"><strong class="ak">删除用户</strong></h2><p id="aecb" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">要删除用户，请运行命令:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="2c2d" class="kg kh hi lx b fi mg mh l mi mj">$ sudo userdel -f &lt;user&gt;</span></pre><p id="749a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将删除所有相关的用户数据，以及用户主目录<code class="du lu lv lw lx b">-f, --force</code>中的所有文件。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="f12e" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">向组中添加用户</h2><p id="ba89" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">为了将15个用户添加到组中，让我们创建三个不同的组——一个组为团队领导<code class="du lu lv lw lx b">leads</code>，一个组为开发人员<code class="du lu lv lw lx b">developers</code>，另一个组为站点可靠性工程团队<code class="du lu lv lw lx b">sre</code>——然后将用户添加到组中。</p><p id="c111" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用以下语法使用<code class="du lu lv lw lx b">groupadd</code>命令创建一个组:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="0781" class="kg kh hi lx b fi mg mh l mi mj">$ sudo groupadd &lt;groupname&gt;</span></pre><p id="2df8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于我们的例子，我们将创建三个不同的组，如下所示:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="e239" class="kg kh hi lx b fi mg mh l mi mj">$ <!-- -->sudo <!-- -->groupadd leads<br/>$ <!-- -->sudo <!-- -->groupadd developers<br/>$ <!-- -->sudo <!-- -->groupadd sre</span></pre><p id="3c93" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，使用带有以下语法的<code class="du lu lv lw lx b">gpasswd</code>命令，将已经创建的用户添加到每个组中，假设每个用户都符合组角色:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="f94f" class="kg kh hi lx b fi mg mh l mi mj">$ <!-- -->sudo <!-- -->gpasswd -A &lt;user&gt; -M &lt;user,user,user&gt; &lt;groupname&gt;</span></pre><p id="30ec" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du lu lv lw lx b">gpasswd</code>命令允许您管理组和组成员的创建——<code class="du lu lv lw lx b">-A</code>标志定义组管理员，而<code class="du lu lv lw lx b">-M</code>标志以逗号分隔列表的形式定义组成员(有关更多详细信息，请参见<code class="du lu lv lw lx b">man </code>页)。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="4083" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">查看组</h2><p id="ed0d" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">系统中的所有组都存储在<code class="du lu lv lw lx b">/etc/groups</code>目录中。要查看所有组，请运行以下命令:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="b633" class="kg kh hi lx b fi mg mh l mi mj">$ getent group</span></pre><p id="94e6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这将产生类似于以下内容的输出:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="684d" class="kg kh hi lx b fi mg mh l mi mj">leads:x:1002:user1,user2,user15<br/>developers:x:1003:user3,user4,user5,user6,user7,user8,user9<br/>sre:x:1004:user10,user11,user12,user13,user14</span></pre><p id="f5e3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们定义每个组允许的访问级别。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="6976" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">权限和所有权</h2><p id="096d" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">Linux如此优雅地支持多用户系统的原因是由于<em class="jv">权限。</em>权限授予用户访问系统内文件和目录的权利。在Linux中，基本权限是:</p><ul class=""><li id="7026" class="lg lh hi iw b ix iy jb jc jf li jj lj jn lk jr mk lm ln lo bi translated"><strong class="iw hj"> <em class="jv">读</em> </strong>:打开和查看文件和目录内容的权限。由<code class="du lu lv lw lx b">r</code>代表</li><li id="5471" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated"><strong class="iw hj"> <em class="jv">写:</em> </strong>修改文件内容以及在一个目录内添加、删除和重命名文件的权限。由<code class="du lu lv lw lx b">w</code>代表</li><li id="fdbf" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated"><strong class="iw hj"> <em class="jv">执行</em> </strong>:运行脚本或应用程序的权限。由<code class="du lu lv lw lx b">x</code>代表</li></ul><p id="71b0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们来演示一下文件权限的意义；使用以下命令创建3个单独的文件:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="6732" class="kg kh hi lx b fi mg mh l mi mj">$ touch leads.txt developers.txt sre.txt</span></pre><p id="87c2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行以下命令查看文件以及每个文件的当前权限:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="8f2a" class="kg kh hi lx b fi mg mh l mi mj">$ ls -l</span></pre><p id="5345" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该命令的输出应该类似于以下内容:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="dc2e" class="kg kh hi lx b fi mg mh l mi mj">-rw-r--r-- 1 adminuser adminuser    0 Aug 15 19:41 leads.txt<br/>-rw-r--r-- 1 adminuser adminuser    0 Aug 15 19:41 developers.txt<br/>-rw-r--r-- 1 adminuser adminuser    0 Aug 15 19:41 sre.txt</span></pre><p id="cc25" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">上述输出中与访问级别相关的部分如下:</p><ul class=""><li id="1de3" class="lg lh hi iw b ix iy jb jc jf li jj lj jn lk jr mk lm ln lo bi translated"><strong class="iw hj">前十个字符</strong> <code class="du lu lv lw lx b">-rw-r--r--</code>象征文件访问权限:</li><li id="8cdf" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">第一个字符表示文件类型，其中<code class="du lu lv lw lx b">-</code>表示常规文件。其他的符号有<code class="du lu lv lw lx b">d</code>表示目录，<code class="du lu lv lw lx b">l</code>表示符号链接，等等。</li><li id="df27" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated">其他九个字符定义了对文件类型的访问权限——前三个字符<code class="du lu lv lw lx b">rw-</code>是<em class="jv">用户权限</em>，接下来的三个<code class="du lu lv lw lx b">r-- </code>是<em class="jv">组权限</em>，而最后三个<code class="du lu lv lw lx b">r--</code>是<em class="jv">所有其他用户的权限</em>。</li><li id="feb2" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated"><code class="du lu lv lw lx b"><strong class="iw hj">root</strong></code> <strong class="iw hj">:拥有(创建)文件</strong>的用户</li><li id="6ad4" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated"><code class="du lu lv lw lx b"><strong class="iw hj">root</strong></code> : <strong class="iw hj">拥有文件</strong>的组</li></ul><p id="3ade" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">记住上面的信息，我们将把一个特定的组分配给它的相关文件。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="541c" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">分配组所有权</h2><p id="8d54" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">我们希望每个文件都属于自己的组。为此，让我们使用<code class="du lu lv lw lx b">chgrp</code>(<em class="jv">change group</em>的简称)命令来分配组所有权。该命令的语法是:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="989f" class="kg kh hi lx b fi mg mh l mi mj">$ <!-- -->sudo <!-- -->chgrp &lt;group&gt; &lt;file&gt;</span></pre><p id="cf4e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，对于我们的示例，我们将运行以下命令:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="8446" class="kg kh hi lx b fi mg mh l mi mj">$ <!-- -->sudo <!-- -->chgrp leads leads.txt<br/>$ <!-- -->sudo <!-- -->chgrp developers developers.txt<br/>$ <!-- -->sudo <!-- -->chgrp sre sre.txt</span></pre><p id="f053" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，当我们运行<code class="du lu lv lw lx b">ls -l</code>命令时，我们应该得到以下输出:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="12af" class="kg kh hi lx b fi mg mh l mi mj">-rw-r--r-- 1 adminuser leads    0 Aug 15 19:41 leads.txt<br/>-rw-r--r-- 1 adminuser developers    0 Aug 15 19:41 developers.txt<br/>-rw-r--r-- 1 adminuser sre    0 Aug 15 19:41 sre.txt</span></pre><p id="47ce" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">每个文件现在属于各自的组。这意味着只有拥有该文件的组成员才能拥有指定的权限；即读取权限(中间三个字符<code class="du lu lv lw lx b">r--</code>所示)。然而，该组之外的所有其他用户也具有读取权限(如最后三个字符<code class="du lu lv lw lx b">r--</code>所示)。</p><p id="3fd0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，考虑到我们希望将文件访问权限仅限于属于文件组的成员，我们来更改一下。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="e4cd" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">修改权限</h2><p id="bbfb" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">要设置或更改权限，请使用<code class="du lu lv lw lx b">chmod</code>(<em class="jv">更改模式</em>的简称)命令(详见<code class="du lu lv lw lx b">man</code>页)。</p><p id="af0d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用此命令时，我们指定以下内容:</p><ul class=""><li id="3e90" class="lg lh hi iw b ix iy jb jc jf li jj lj jn lk jr mk lm ln lo bi translated"><strong class="iw hj">修改谁的权限:</strong> <code class="du lu lv lw lx b">u</code>为<em class="jv">用户(所有者)</em><code class="du lu lv lw lx b">g</code>为<em class="jv"/><em class="jv">组</em><code class="du lu lv lw lx b">o</code>为<em class="jv">所有其他用户</em>。</li><li id="aed2" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated"><strong class="iw hj">如何更改权限:</strong> <code class="du lu lv lw lx b">+</code>(加号)到<em class="jv">添加</em>权限，<code class="du lu lv lw lx b">—</code>(减号)到<em class="jv">删除</em>权限或<code class="du lu lv lw lx b">=</code>(等号)到<em class="jv">保持不变</em>。</li><li id="2429" class="lg lh hi iw b ix lp jb lq jf lr jj ls jn lt jr mk lm ln lo bi translated"><strong class="iw hj">改变什么权限:</strong> <code class="du lu lv lw lx b">r</code>为读，<code class="du lu lv lw lx b">w</code>为写，<code class="du lu lv lw lx b">x</code>为执行。</li></ul><p id="7ab0" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用上面的信息，让我们取消组外用户的读取权限，并为组添加写入和执行权限，如下所示:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="b542" class="kg kh hi lx b fi mg mh l mi mj">$ <!-- -->sudo <!-- -->chmod g+wx,o-r leads.txt<br/>$ <!-- -->sudo <!-- -->chmod g+wx,o-r developers.txt<br/>$ <!-- -->sudo <!-- -->chmod g+wx,o-r sre.txt</span></pre><p id="b0a9" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行<code class="du lu lv lw lx b">ls -l</code>命令查看修改后的权限。输出应该是:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="2896" class="kg kh hi lx b fi mg mh l mi mj">-rw-rwx--- 1 adminuser leads    0 Aug 15 19:42 leads.txt<br/>-rw-rwx--- 1 adminuser developers    0 Aug 15 19:42 developers.txt<br/>-rw-rwx--- 1 adminuser sre    0 Aug 15 19:42 sre.txt</span></pre><p id="d3ab" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要证明属于一个组的文件不能被另一个组访问，请以不同的用户身份登录；例如，<code class="du lu lv lw lx b">user5</code>(属于<code class="du lu lv lw lx b">developers</code>组)，使用以下命令:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="dfbf" class="kg kh hi lx b fi mg mh l mi mj">$ <!-- -->sudo <!-- -->su user5</span></pre><p id="0c2a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们尝试读取一个不属于<code class="du lu lv lw lx b">developers</code>组的文件。运行以下命令查看<code class="du lu lv lw lx b">leads.txt</code>文件:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="1f8e" class="kg kh hi lx b fi mg mh l mi mj">$ cat leads.txt</span></pre><p id="a1de" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您应该会收到一条警告，上面写着:</p><pre class="ly lz ma mb fd mc lx md me aw mf bi"><span id="14c8" class="kg kh hi lx b fi mg mh l mi mj">cat: leads.txt: Permission denied</span></pre><p id="fb5a" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是意料之中的，因为<code class="du lu lv lw lx b">user5</code>没有权限读取<code class="du lu lv lw lx b">leads.txt</code>文件的内容，因为该文件属于<code class="du lu lv lw lx b">leads</code>组，而不是<code class="du lu lv lw lx b">developers</code>组。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><h2 id="6949" class="kg kh hi bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">结论</h2><p id="0ec1" class="pw-post-body-paragraph iu iv hi iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr hb bi translated">这篇小教程中分享的信息并没有穷尽Linux中管理用户、组和权限的主题。但是这应该让任何初学者，比如我自己，开始使用Linux。</p><p id="28e2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> PS:我决定在学习bash脚本的同时找点乐子，写了脚本</strong> <code class="du lu lv lw lx b"><strong class="iw hj">create_users.sh</strong></code> <strong class="iw hj">和</strong> <code class="du lu lv lw lx b"><strong class="iw hj">delete_users.sh</strong></code> <strong class="iw hj">来自动创建和删除上面描述的用户。见此处</strong><a class="ae ml" href="https://github.com/Z11mm/bash-scripts" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj"/></a><strong class="iw hj">。</strong></p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="a3f6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj">————————————感谢阅读！—————</strong></p></div></div>    
</body>
</html>