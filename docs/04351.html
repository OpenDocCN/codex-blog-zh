<html>
<head>
<title>I left the Web Form and switched to Razor Pages.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我离开了网络表单，转而使用剃刀页面。</h1>
<blockquote>原文：<a href="https://medium.com/codex/i-left-the-web-form-and-switched-to-razor-pages-c520a96c1cd2?source=collection_archive---------3-----------------------#2021-11-23">https://medium.com/codex/i-left-the-web-form-and-switched-to-razor-pages-c520a96c1cd2?source=collection_archive---------3-----------------------#2021-11-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/313ee93c16405505fb0107a997b9732f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceVcT-dNYf9K4WxaY4vyxQ.png"/></div></div></figure><p id="426b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨，在这篇文章中，我将谈谈我的想法。NET核心剃刀页，它的优点，缺点和它给我增加了什么，我祝你阅读愉快。</p><p id="2113" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你和我一样处在改变的过程中，或者想知道我的改变，那将是一篇很长的文章。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="c535" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果非要说我自己，我从2015年就开始用web Forms技术开发Web应用。一次又一次，我看着MVC，发现它对我开发的项目来说太复杂了，所以我在一两个项目中被使用，然后走开了。如果你没有一个旧的但难以置信的大项目作为ORM，我会用LINQ 2数据上下文建立我的数据库关系，这不会引起问题，甚至节省了很多时间，我会开发基于过程的数据库架构，并尽可能将SQL与C#分开。</p><p id="871b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将使用Linq2DC 作为ORM。如果你没有一个旧的但是不可思议的大项目，它是一个不会引起问题的ORM，甚至可以节省很多时间。我曾经用这个ORM建立我的数据库关系，开发基于过程的数据库架构。</p><p id="a539" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我之所以讲这一切，是因为我习惯了安逸，我能在自己的安全地带快速发展。</p><p id="aa4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你用过<strong class="is hj"> Linq2DC </strong>，就能明白我的意思。拖动表格、程序等。就足以让它变成一个类。你说是什么问题，我直接解释。你不能在Net Core中使用<strong class="is hj"> Linq2DataContext </strong>，即使你努力尝试使用一个与web form相比的实体。<br/>正是因为这些原因，我继续用Web Form进行开发。</p><h2 id="857f" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">那么我是怎么逃出安全区的呢？</h2><p id="ac00" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">我现在工作的公司有很多老项目，有些工作需要处理老项目中的mdb(access)数据库。在这些情况下，最讨厌的历史工件oledb代码开始发挥作用，如你所知，这使我发疯，所以我花了2-3天为自己编写了一个微ORM。</p><p id="d757" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我喜欢这个微型ORM的想法，我准备了一个版本的微型ORM，它可以与Sql客户端一起工作，并可以在可以读取和Lamda表达式的地方使用。<br/>我以采购员的身份进入微ORM世界，说如果我写这些，别人做的更好。我发现了一个运转良好的微型生物的世界。我决定使用OrmLite，并开始使用它。就在这时，我想到了一个主意，我可以在Core中使用这个微表单吗？</p><p id="57b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在开发Core时，我在旧版本中尝试了2-3次，所以我在兼容版本的<strong class="is hj"> Nuget包</strong>尚未开发时测试了它们，并说它需要更多的开发，然后离开了它。请记住，我已经开发了一个世界Nuget包没有任何问题的项目。现在OrmLite已经解决了我的ORM问题，即使它不像拖放那样简单，我也不打算让SQL查询既硬编码又能迁移，我觉得自己一石二鸟。现在我可以真正地将Core引入我的开发过程了。</p><p id="b343" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我离Core的后端部分不远，由于我之前一直从事Web API开发，可以说Core给我的感觉就像是写纯C#一样。</p><h2 id="c919" class="jv jw hi bd jx jy jz ka kb kc kd ke kf jb kg kh ki jf kj kk kl jj km kn ko kp bi translated">核心剃刀页的利弊？</h2><p id="b226" class="pw-post-body-paragraph iq ir hi is b it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn hb bi translated">当我在一个小项目中测试它时，我看到了当与核心结合时Razor Pages变得多么强大，我可以说我很惊讶。<em class="kv">现在网络表单项目真的感觉像是浪费时间。</em></p><p id="cab4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有的公共变量都被传递到前端。如果您将一个作为属性从后端绑定到表单元素的变量作为name属性，那么在表单请求过程中，您的变量将自动从表单元素中解析和填充。</p><p id="6330" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个事件极大地缩短了开发时间。而不是说t_name。值并达到文本框的值，进行全局检查，然后填充您的类，想象您的类直接达到满。Web表单脚本引擎已经快把我们逼疯了。由于Razor在这方面的灵活性，处理前端和后端都变得非常简单。您可以根据模型的字段为html输入提供控件。您也可以忘记使用ASP.NET验证组件或Jquery验证。</p><p id="4d7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">范例属性绑定；</strong></p><p id="e287" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kv">。cshtml</em></p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="560c" class="jv jw hi lb b fi lf lg l lh li">&lt;<strong class="lb hj">form</strong> <!-- -->class="form-horizontal"<!-- --> <!-- -->method="post"&gt;</span><span id="69ce" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">div</strong> <!-- -->class="form-group"&gt;</span><span id="9c08" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">label</strong> <!-- -->for="Name"<!-- --> <!-- -->class="col-sm-2 control-label"&gt;Name&lt;/<strong class="lb hj">label</strong>&gt;</span><span id="306d" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">div</strong> <!-- -->class="col-sm-10"&gt;</span><span id="7e5d" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">input</strong> <!-- -->type="text"<!-- --> <!-- -->class="form-control"<!-- --> <!-- -->name="Name"&gt;</span><span id="0ae8" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">div</strong>&gt;</span><span id="02cd" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">div</strong>&gt;</span><span id="d6b3" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">div</strong> <!-- -->class="form-group"&gt;</span><span id="c8b6" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">label</strong> <!-- -->for="Email"<!-- --> <!-- -->class="col-sm-2 control-label"&gt;Email&lt;/<strong class="lb hj">label</strong>&gt;</span><span id="90fa" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">div</strong> <!-- -->class="col-sm-10"&gt;</span><span id="ce35" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">input</strong> <!-- -->type="text"<!-- --> <!-- -->class="form-control"<!-- --> <!-- -->name="Email"&gt;</span><span id="d629" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">div</strong>&gt;</span><span id="d943" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">div</strong>&gt;</span><span id="dbe0" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">div</strong> <!-- -->class="form-group"&gt;</span><span id="58d8" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">div</strong> <!-- -->class="col-sm-offset-2 col-sm-10"&gt;</span><span id="cb4a" class="jv jw hi lb b fi lj lg l lh li">&lt;<strong class="lb hj">button</strong> <!-- -->type="submit"<!-- --> <!-- -->class="btn btn-default"&gt;Register&lt;/<strong class="lb hj">button</strong>&gt;</span><span id="6322" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">div</strong>&gt;</span><span id="dda5" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">div</strong>&gt;</span><span id="0674" class="jv jw hi lb b fi lj lg l lh li">&lt;/<strong class="lb hj">form</strong>&gt;</span></pre><p id="aaa3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kv">cshtml . cs；</em></p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="54b9" class="jv jw hi lb b fi lf lg l lh li">[BindProperty]</span><span id="19fc" class="jv jw hi lb b fi lj lg l lh li"><strong class="lb hj">public</strong> <strong class="lb hj">string</strong> <!-- -->Name { <strong class="lb hj">get</strong>; <strong class="lb hj">set</strong>; }</span><span id="cd16" class="jv jw hi lb b fi lj lg l lh li">[BindProperty]</span><span id="1340" class="jv jw hi lb b fi lj lg l lh li"><strong class="lb hj">public</strong> <strong class="lb hj">string</strong> <!-- -->Email { <strong class="lb hj">get</strong>; <strong class="lb hj">set</strong>; }</span><span id="087d" class="jv jw hi lb b fi lj lg l lh li"><strong class="lb hj">public</strong> <strong class="lb hj">void</strong> <!-- -->OnPost()</span><span id="e0f0" class="jv jw hi lb b fi lj lg l lh li">{</span><span id="2b81" class="jv jw hi lb b fi lj lg l lh li">ViewData["confirmation"] = $"{Name}, information will be sent to {Email}";</span><span id="1936" class="jv jw hi lb b fi lj lg l lh li">}</span></pre><p id="f11f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最大的好处之一是，当你添加一个WebMethod来请求Web表单中的页面时，你必须使之成为静态的，当然，由于静态和动态会话中的会话是不同的，你必须以某种方式将额外的用户发送到后端。Core完全走在了前面。它将RequestVerificationToken输入添加到页面中，当您使用此输入发出请求时，会显示客户端的所有会话值等。像他们一样工作。</p><p id="0ba2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于Razor页面的页面结构类似于Web表单，所以你不会感到惊讶。</p><p id="7708" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">基本上，如果需要讲它的结构。</strong></p><figure class="kw kx ky kz fd ij er es paragraph-image"><div class="er es lk"><img src="../Images/ed2bcbe78248b5d47ff728e5297f6dfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:526/format:webp/1*k4OUA7eh_6wufz3q_1Biig.png"/></div></figure><p id="d995" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在wwwroot文件夹中有静态文件(CSS、img等)。</p><p id="2a91" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">页面的内部是路由，每个文件夹实际上可以被认为是一个页面。</p><p id="af56" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上面的示例中，如果您向/Dashboard发送请求，Index.cshtml将会打开。cshtml前端，cshtml.cs是我们后端代码所在的区域。显然，它更适合于固体结构。例如，您创建了Workers文件夹，您将执行worker进程。你在里面打开必要的页面。</p><p id="4cbd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Workers &gt; Index.cshtml、AddUpdate.cshtml、Detail.cshtml等。</p><p id="78ac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您有交通工具，那么可以使用诸如/Workers/Detail？id=54，您的查询也可以直接访问，就像propertybinding一样。</p><p id="2d24" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">在性能上有着令人难以置信的差异，有着明显的提高。</strong></p><p id="a829" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由于其一般结构，它作为非管理代码工作。您应该为每个项目创建一个单独的资源库。如果你看看输出，它得到的输出是exe和dll。【ProjectViews.dll】像project.dll一样把前端和后端分开。唯一恼人的部分是，你已经发布了你的项目，你会上传到ftp。在这种情况下，你要从iis停止项目，不需要连接服务器就可以做到这一点，当然如果你从ftp传输一个名为app_offline.htm的文件到项目的目录下，项目会自动停止。这样，您可以执行更新过程。看来我们别无选择，只能马上停止这个项目，我真的希望如此。</p><p id="f703" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基本上，我过渡到核心，我想告诉你，有一个主题，我可以进入一个完整的世界的细节，但我不想延长这篇文章。</p><p id="da41" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">优点</strong> <br/> *性能<br/> *它极大地缩短了开发时间。<br/> *他极其倾向于甚至推动以坚实的原则发展。<br/> *多平台<br/> *剃刀引擎</p><p id="4ff6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">缺点</strong> <br/> *你可能会在发布项目时遇到麻烦，每次你创建一个新项目，你都要做一些发布设置。<br/> *更新项目时，不能覆盖文件。由于它以动态链接库的形式给出视图，即使是最轻微的html修改，你也应该重新发布。</p><p id="bde8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae ll" href="https://docs.microsoft.com/en-us/aspnet/core/razor-pages/?view=aspnetcore-3.1" rel="noopener ugc nofollow" target="_blank">详细回顾，建议你看一下微软准备的页面。</a></p><p id="a932" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">非常感谢你读到这里。</p></div></div>    
</body>
</html>