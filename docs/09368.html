<html>
<head>
<title>How I track API response times in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在TypeScript中跟踪API响应时间</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-i-track-api-response-times-in-typescript-73174cd69fca?source=collection_archive---------4-----------------------#2022-10-16">https://medium.com/codex/how-i-track-api-response-times-in-typescript-73174cd69fca?source=collection_archive---------4-----------------------#2022-10-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="adf2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用程序加载所需的时间会显著影响用户体验，从而影响转化率。然而，你可以通过压缩图像、删除动画或者仅仅减少内容来加速你的web应用程序的进程，API请求可能也会变慢；在本文中，我将描述我测量API响应时间的方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e88402489d5476b62b0fc9e0766bfee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DDEHQH2OHzOBUxN-6-ehOg.png"/></div></div></figure><p id="69e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在TypeScript中有一个非常简单的时间跟踪方法，当然，它在<code class="du jp jq jr js b">console</code>对象上是可用的。</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="3b33" class="jx jy hi js b fi jz ka l kb kc">💡 <em class="kd">console = An object that makes available the debug console of the browser running the application</em></span></pre><p id="0cab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有许多<code class="du jp jq jr js b">console</code>相关的方法可用于各种目的；正如我们使用<code class="du jp jq jr js b">console.log()</code>在控制台简单记录一些东西一样，有三种方法可以用来跟踪时间:<code class="du jp jq jr js b">time()</code>、<code class="du jp jq jr js b">timeLog()</code>和<code class="du jp jq jr js b">timeEnd()</code>。</p><p id="b2b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用它们很简单:用<code class="du jp jq jr js b">time()</code>你可以启动一个定时器，用<code class="du jp jq jr js b">timeEnd()</code>你可以停止它并记录从<code class="du jp jq jr js b">time()</code>执行到控制台所花费的时间(以毫秒为单位);所以基本上我们可以在它们之间包装我们的API请求</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="8707" class="jx jy hi js b fi jz ka l kb kc">⏱ <strong class="js hj">MEASURING TIME</strong></span><span id="516f" class="jx jy hi js b fi ke ka l kb kc"><strong class="js hj">console.time()</strong><br/>const response = await fetch('...')<br/><strong class="js hj">console.timeEnd()</strong></span><span id="dedd" class="jx jy hi js b fi ke ka l kb kc"><em class="kd">result in the console: <br/>default: xxx ms</em></span></pre><p id="ad5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，如果我们需要确定应用程序中几个API调用中哪个处理得更慢，会发生什么呢？我们必须以某种方式给它们命名。</p><p id="9af6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是<code class="du jp jq jr js b">time()</code>和<code class="du jp jq jr js b">timeEnd()</code>方法可以带一个参数:<code class="du jp jq jr js b">label</code>。这是一个<code class="du jp jq jr js b">string</code>值，我们可以用它将所有的<code class="du jp jq jr js b">time()</code>和<code class="du jp jq jr js b">timeEnd()</code>配对。例如</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="c4ef" class="jx jy hi js b fi jz ka l kb kc">🏷 <strong class="js hj">LABELING TIMERS</strong></span><span id="52d5" class="jx jy hi js b fi ke ka l kb kc">console.time(<strong class="js hj">'Data fetch time'</strong>)<br/>const data = await fetch('...')<br/>console.timeEnd(<strong class="js hj">'Data fetch time'</strong>)</span><span id="a757" class="jx jy hi js b fi ke ka l kb kc">console.time(<strong class="js hj">'Content fetch time'</strong>)<br/>const content = await fetch('...')<br/>console.timeEnd(<strong class="js hj">'Content fetch time'</strong>)</span><span id="6cd1" class="jx jy hi js b fi ke ka l kb kc"><em class="kd">result in the console:<br/>Data fetch time: xxx ms<br/>Content fetch time: xxx ms</em></span></pre><p id="2b5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于更复杂的测量，我们可以使用<code class="du jp jq jr js b">timeLog()</code>。它在一个<code class="du jp jq jr js b">time()</code>和一个<code class="du jp jq jr js b">timeEnd()</code>中记录部分结果，并且它可以接收带有附加信息的第二个参数</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="c63f" class="jx jy hi js b fi jz ka l kb kc">🏟 <strong class="js hj">COMPLEX MEASUREMENT</strong></span><span id="a051" class="jx jy hi js b fi ke ka l kb kc">console.time('Loading time')<br/>const data = await fetch('...')<br/><strong class="js hj">console.timeLog('Loading time', 'Data fetch time result')</strong><br/>const content = await fetch('...')<br/><strong class="js hj">console.timeLog('Loading time', 'Content fetch time result')</strong><br/>const pageData = { data, content, pages: content.pages.length }<br/>console.timeEnd('Loading time')</span><span id="0675" class="jx jy hi js b fi ke ka l kb kc"><em class="kd">result in the console:<br/>Loading time: xxx ms Data fetch time result<br/>Loading time: xxx ms Content fetch time result<br/>Loading time: xxx ms</em></span></pre></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="6416" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">👋我希望这在你寻找新的学习材料时对你有用。感谢您花时间阅读这篇文章！<a class="ae km" rel="noopener" href="/@daanworks/subscribe">订阅我的邮件列表</a>如果你想在以后读到更多这样的故事！</p></div></div>    
</body>
</html>