<html>
<head>
<title>Developing REST Microservices Simply</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单开发REST微服务</h1>
<blockquote>原文：<a href="https://medium.com/codex/developing-rest-microservices-simply-ed934f846ff3?source=collection_archive---------18-----------------------#2021-08-09">https://medium.com/codex/developing-rest-microservices-simply-ed934f846ff3?source=collection_archive---------18-----------------------#2021-08-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/></div><div class="ab cl if ig gp ih" role="separator"><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik il"/><span class="ii bw bk ij ik"/></div><div class="hb hc hd he hf"><figure class="in io ip iq fd ir er es paragraph-image"><div role="button" tabindex="0" class="is it di iu bf iv"><div class="er es im"><img src="../Images/6a1cf1eaccc9993f2e9f8361d6f056c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bF-rqAmULNhP9KsbNB28tQ.png"/></div></div></figure><h1 id="b4f9" class="iy iz hi bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">简介</strong></h1><p id="d0c1" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">我是在kissweb.org<a class="ae ku" href="https://kissweb.org" rel="noopener ugc nofollow" target="_blank">描述的开源KISS Web开发框架的作者</a>它基于后端的Java和前端的标准HTML/JavaScript。由于对不必要的复杂性和为了创建一个web应用程序而必须组合在一起的所有部分感到沮丧，我创建了KISS。KISS为所有需要的东西提供了一个一站式商店，已经完全集成并开箱即用。</p><p id="ec40" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">KISS包括前端、后端、REST通信、微服务、SQL API、自定义HTML标签、身份验证、浏览器缓存控制等等。KISS代表保持简单……为此，KISS被设计成易于启动和运行、易于学习和使用。事实上，KISS可以在大约四个命令行中下载、构建和运行！</p><p id="2b3c" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">KISS可以在Linux、Mac和Windows上运行，目前正在一些商业应用程序中使用，因此它是一个经过充分测试的可靠框架。</p><h1 id="80fe" class="iy iz hi bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">微服务</h1><p id="3f01" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">每个KISS REST微服务web方法都是在单个Java方法中实现的。所以，如果你有四个微服务，你只需要四个Java方法。一个“Hello World”微服务可以用一个包含单行代码的方法完全实现！没有布线或配置。因为它们是微服务，所以简单地保存源文件就可以将微服务添加到系统中。KISS可以识别新的或更改的文件，并在调用它们时即时编译它们。所有KISS微服务都是全编译全速运行。</p><p id="9b28" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">除了<a class="ae ku" href="https://en.wikipedia.org/wiki/Java_(programming_language)" rel="noopener ugc nofollow" target="_blank"> Java </a>，KISS也支持用<a class="ae ku" href="http://www.groovy-lang.org/" rel="noopener ugc nofollow" target="_blank"> Groovy </a>或者Lisp编写的微服务。Groovy基本上是一个简化和增强的Java。标准Java可以作为Groovy代码运行，Groovy的简化和增强可以根据需要使用。Groovy代码也在运行时被编译成常规的JVM字节码，所以它也可以全速运行。</p><p id="d2f2" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">Lisp支持由<a class="ae ku" href="https://abcl.org/" rel="noopener ugc nofollow" target="_blank"> ABCL项目</a>提供。它支持完整的Common Lisp并动态编译成JVM字节码。</p><p id="d26b" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">在KISS中，每个微服务都自动作为REST web服务提供。不需要额外编码！KISS REST web服务是异步的，在一个定义的线程池中运行，因此可以高效地处理大量负载。</p><p id="b447" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">我现在将展示定义和使用KISS REST微服务所需的全部后端和前端代码。</p><h1 id="2301" class="iy iz hi bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">示例-后端零件</h1><p id="e6fe" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">这里有一个后端REST微服务，它从前端接受两个数字，并返回它们的总和。</p><pre class="in io ip iq fd la lb lc ld aw le bi"><span id="098c" class="lf iz hi lb b fi lg lh l li lj"><strong class="lb hj">package </strong>services;<br/><br/><strong class="lb hj">import </strong>org.json.JSONObject;<br/><strong class="lb hj">import </strong>org.kissweb.database.Connection;<br/><strong class="lb hj">import </strong>org.kissweb.restServer.ProcessServlet;<br/><br/><strong class="lb hj">public class </strong>MyJavaService {<br/><br/>    <strong class="lb hj">public void </strong>addNumbers(JSONObject injson, JSONObject outjson, Connection db, ProcessServlet servlet) {<br/>        <strong class="lb hj">int </strong>num1 = injson.getInt(<strong class="lb hj">"num1"</strong>);<br/>        <strong class="lb hj">int </strong>num2 = injson.getInt(<strong class="lb hj">"num2"</strong>);<br/>        outjson.put(<strong class="lb hj">"num3"</strong>, num1 + num2);<br/>    }<br/>}</span></pre><p id="3d07" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">就是这样。这就是全部。不需要其他配置。除了方法中的三行代码，其余的都是样板代码。这对于每一个休息微服务是完全相同的。</p><p id="4155" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">“MyJavaService”是web服务的名称。“addNumbers”是web服务中web方法的名称。该方法获取从前端发送的JSON对象，并将JSON对象返回给前端。</p><p id="f5fc" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">这个方法需要一个JSON对象，它有两个名为“num1”和“num2”的对象。它获取它们的整数值，将它们相加，然后将总和返回给前端JSON对象中名为“num3”的元素。这就是我们所需要的！</p><p id="5a10" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">输入和输出JSON可以是任意复杂或嵌套的。每个web服务可以包含任意数量的web方法。此外，不需要错误检查。框架会自动处理错误。</p><h1 id="5d2c" class="iy iz hi bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">示例—前端部分</h1><p id="3c67" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">从前端调用后端web服务同样容易。此外，虽然可以使用KISS前端，但是KISS前端不是必需的。这也可以用于其他前端框架(比如React)。</p><p id="8a6c" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">下面是从普通JavaScript调用上述web服务所需的所有代码:</p><pre class="in io ip iq fd la lb lc ld aw le bi"><span id="264b" class="lf iz hi lb b fi lg lh l li lj"><strong class="lb hj">const </strong>data = {<br/>    <strong class="lb hj">num1</strong>: <em class="lk">62</em>,<br/>    <strong class="lb hj">num2</strong>: <em class="lk">38</em><br/>};<br/><strong class="lb hj">let </strong>res = <strong class="lb hj">await </strong>Server.<em class="lk">call</em>(<strong class="lb hj">'services/MyJavaService'</strong>, <strong class="lb hj">'addNumbers'</strong>, data);<br/><strong class="lb hj">if </strong>(res.<strong class="lb hj">_Success</strong>) {<br/>    <em class="lk">whatever</em>(res.num3);<br/>}</span></pre><p id="9fa9" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">调用相同服务的另一种方法如下:</p><pre class="in io ip iq fd la lb lc ld aw le bi"><span id="dda6" class="lf iz hi lb b fi lg lh l li lj"><strong class="lb hj">const </strong>data = {<br/>    <strong class="lb hj">num1</strong>: <em class="lk">62</em>,<br/>    <strong class="lb hj">num2</strong>: <em class="lk">38</em><br/>};<br/>Server.<em class="lk">call</em>(<strong class="lb hj">'services/MyJavaService'</strong>, <strong class="lb hj">'addNumbers'</strong>, data).then(res =&gt; {<br/>    <strong class="lb hj">if </strong>(res.<strong class="lb hj">_Success</strong>) {<br/>        <em class="lk">whatever</em>(res.num3);<br/>    }<br/>}</span></pre><p id="5f22" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">对后端的调用会自动处理错误。KISS还支持同时调用多个服务的能力，在服务到达时处理每个服务，并在它们都被处理后继续。</p><h1 id="ec10" class="iy iz hi bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">结束语</h1><p id="2ba1" class="pw-post-body-paragraph jw jx hi jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt hb bi translated">由于KISS web服务是微服务，所以可以在运行的系统上添加、更改或删除这些服务。不需要关闭服务器、重建、重新部署和重新启动服务器。KISS系统会注意到变化，并根据需要重新编译这些变化。想象一下开发是多么容易！想象一下，能够纠正生产系统中的一个bug，而不必使系统停机并扰乱整个组织！</p><p id="d0b6" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">KISS的另一个方面是认证。这些web服务调用中的每一个都是由框架完全认证的。您总是可以确定是谁在打电话，以及他们是否被授权。此外，如果你使用HTTPS，这些电话是完全加密的！</p><p id="8a29" class="pw-post-body-paragraph jw jx hi jy b jz kv kb kc kd kw kf kg kh kx kj kk kl ky kn ko kp kz kr ks kt hb bi translated">KISS旨在使构建web应用程序尽可能简单。上面显示了该系统的一部分。KISS包含的东西还多着呢！KISS还配有三本手册，甚至在YouTube上还有一个视频教程系列。看看吧！</p></div></div>    
</body>
</html>