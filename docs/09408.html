<html>
<head>
<title>Python Pandas Tutorial — 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python熊猫教程— 8</h1>
<blockquote>原文：<a href="https://medium.com/codex/python-pandas-tutorial-8-7ecc1bc2355a?source=collection_archive---------17-----------------------#2022-10-18">https://medium.com/codex/python-pandas-tutorial-8-7ecc1bc2355a?source=collection_archive---------17-----------------------#2022-10-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="eadb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程将涵盖分组和聚合，以分析和探索数据。</p><p id="b9f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在开始分组之前，首先，了解一些我们将进一步使用的基本概念，然后我们将开始对数据进行分组，并开始我们的分析。</p><p id="fd0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在数学中听到的均值、中值和众数，我们将在这里使用，因此为了修正概念，算术平均值<strong class="ih hj">是通过将数字相加并将总和除以列表中的数字数得到的。这就是通常所说的平均值。<strong class="ih hj">中值</strong>是从最小到最大排序的列表中的中间值。<strong class="ih hj">模式</strong>是列表中出现频率最高的值。</strong></p><p id="b08a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，切换到我们的StackOverflow数据，找到平均工资、中位数工资和众数工资。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/b05b491b47ba9d681a15806039d728ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*nU1CMMQRa5AyTrM_felWTg.png"/></div></figure><p id="5bf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们将median()函数传递给数据框，而不是一个系列，那么它将找到数据框中的所有数字列，并显示中间值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jl"><img src="../Images/d465f34176b9891cc4885b39a12f93a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DrBNk94guf4MVlx0Po6I_A.png"/></div></div></figure><p id="f757" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到这个警告是因为它已经贬值，在未来的版本中不可用。</p><p id="e5b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将检查count()和values_count()之间的差异，当您想要查找与指定列相关的列中出现的有效值的频率时，应该使用count()，而value_counts()应该用于查找一个系列的频率。</p><p id="65c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们要检查性别数据，从调查中，我们可以找到相同的value_counts()。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jq"><img src="../Images/2d56478d1e83b2a0b81a75c14b95a567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3L5yqwi_pJiIPEbswnq0Hw.png"/></div></div></figure><p id="6be5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，回到使用groupby()对pandas进行分组，所以如果您检查pandas中groupby()的定义，它会说——group by操作涉及拆分对象、应用函数和组合结果的某种组合。这可用于对大量数据进行分组，并对这些组进行计算操作。</p><p id="da64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，为了清楚地理解它，首先从拆分数据开始，然后我们将理解应用函数和组合数据。</p><p id="accb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们按照国家来划分数据，并检查参与调查的人所在的国家。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jr"><img src="../Images/4d7bc1a12c74274df90cb3a3a4174c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HtCGSvNUog_aAoATTW-J2g.png"/></div></div></figure><p id="624b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以，它返回给我们一个groupby()的对象，用同样的方法把它赋给变量，用get_group()方法访问值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es js"><img src="../Images/7040ddb500268a73080db4f8cca97a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NCVK08QaIcNlat8RYllmgg.png"/></div></div></figure><p id="9ba5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们得到的输出在这里没有什么特别的，我们得到的数据类似于我们为国家创建过滤器并访问数据框时得到的数据。</p><p id="8cef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，为了理解这种差异，让我们应用一个函数，这里的函数是我们想要来自所有参与调查的国家的开发人员的体验。需要注意的一点是，在前面的例子中，我们已经使用groupby()创建了country_grp变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jt"><img src="../Images/1453dd9a756ed055a703e0535ab84dfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*ZWMvk-DCx6pSMQenfibRVQ.png"/></div></figure><p id="8061" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们不是针对一个国家，而是针对所有国家的开发者的体验。</p><p id="27bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们想要检查印度的数据，那么我们可以使用loc将印度作为参数传递并获取数据，而不是创建一个新的过滤器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ju"><img src="../Images/938166be197c25649ee0281a179cdb2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wau5HLbKM6u4P4RDT67Xnw.png"/></div></div></figure><p id="4d3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想要百分比而不是数字，我们可以传递normalize = True作为参数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jv"><img src="../Images/15399c98d0b044658b2fb8a073a3a702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01nIQ9jjhp7fKmIBQ--YJg.png"/></div></div></figure><p id="6250" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，如果我们想计算印度的工资中位数，我们可以使用这个对象。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jw"><img src="../Images/f9db91b45ddde4088d199a6f8db0201c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*suFadxzuc2IseXCyq81Veg.png"/></div></figure><p id="7fc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们需要找到平均工资和中位数，要运行多个聚合函数，我们可以使用groupby和<strong class="ih hj"> agg </strong>方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jx"><img src="../Images/ff6b45562e82c76bf0b2cbb09aa3693c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pMv1ZOo2fgndxOhtl5fzkQ.png"/></div></div></figure><p id="c11c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以对groupby对象使用apply()函数，因此，如果我们想检查调查数据中有多少人知道python，我们可以使用apply函数，并传递一个lambda函数来找出值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jy"><img src="../Images/e2eb3e067d889a92e76cfd7c6d02fcf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rbGYwZy9yESodIn7xJWRCw.png"/></div></div></figure><p id="79f1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们应用了一个函数，并使用contains方法找到Python语言，sum()函数将提供总计数，这里需要注意的一点是sum()函数也适用于布尔值，并提供了解Python的总人数。</p><p id="7752" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但这只是信息的一半，要得到这个国家知道Python的人的百分比，首先，我们需要找到回答者的数量，然后我们将找到知道Python的人的百分比。</p><p id="872a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们先来看看回答者的数量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jz"><img src="../Images/11c0bff51ea7b8f50f48a375834ff5af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wOxmMYzHyaRymewgJQMaJQ.png"/></div></div></figure><p id="b62c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将找到了解Python的人数，这是我们在前面的示例中能够找到的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ka"><img src="../Images/fa3a64cf463b976b668cc3cac0af0028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vV5asPAtCx0yrnJ8ZVPWvQ.png"/></div></div></figure><p id="6f07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用contact方法连接两个数据框，并创建一个新的数据框。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kb"><img src="../Images/208fccdca7ead57e5518ef0445fdad44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhcCYv6zXKb-Qd81MFUk3w.png"/></div></div></figure><p id="d0a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们得到了更合适的结果，参与调查的人数以及了解Python的人数。</p><p id="6135" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们想计算知道Python的人的百分比，我们可以创建一个新列并获取值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kc"><img src="../Images/f91230a3aec94f12380ac998278014a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zyd0tvMMYJuvU_-QQtQWoQ.png"/></div></div></figure><p id="0e18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一个教程中，我们将讨论清理数据——转换数据类型和处理缺失值。</p></div></div>    
</body>
</html>