<html>
<head>
<title>Rails &amp; Hotwire — Maybe the old ways aren’t that bad after all</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rails和hot wire——也许旧的方式并没有那么糟糕</h1>
<blockquote>原文：<a href="https://medium.com/codex/rails-hotwire-maybe-the-old-ways-arent-that-bad-after-all-a08d41cfa308?source=collection_archive---------3-----------------------#2021-04-03">https://medium.com/codex/rails-hotwire-maybe-the-old-ways-arent-that-bad-after-all-a08d41cfa308?source=collection_archive---------3-----------------------#2021-04-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在过去的几个月里，我一直在和一个朋友谈论开发一个web应用程序，这将有助于使舞蹈比赛组织者的生活变得更容易一些。舞蹈比赛可能是一件复杂的事情。你必须:</p><ol class=""><li id="eec8" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">处理付款，</li><li id="5b45" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">给舞蹈演员分配一个号码，</li><li id="9de9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">将舞者的名字和号码写在提供给评委的评估表上，</li><li id="f403" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">用选择的评价体系对舞者进行评价(没错，有多种方法)，</li><li id="f189" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">拿回表格，尽快手动计算每个参与者的位置，</li><li id="1aba" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">将结果写在要展示的分数表上。</li></ol><p id="eeeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这整个程序，已经够复杂了，是我们的幸福之路。当然，复杂性是随着舞者有时可以随机地与一个或多个舞伴跳舞而演变的。有人可以在最后时刻加入比赛。但最令人紧张的是，一项舞蹈比赛通常有许多比赛，而且很可能有些比赛同时进行。如果我们有一个应用程序来简化这个过程会怎么样？但最重要的是，<strong class="ih hj">你会用什么技术来开发这样一个应用程序？</strong></p><h1 id="76f5" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">最适合您项目的堆栈是您能够负担的</h1><p id="076d" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">让我们面对现实吧。<strong class="ih hj">你遇到的大多数应用创意永远不会成为数百万美元的公司</strong>。也不一定非要这样。世界上许多尚待解决的问题被忽略了。这意味着你可能会有一个小预算，因此，一个小团队。但是有一个小团队并不意味着有小野心，你已经准备好选择一个技术栈来开发一个闪亮的单页应用程序。好吧，事实是这样的:</p><h1 id="ae2e" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">ReactJS和Angular不是为你设计的。</h1><p id="450a" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">单页应用程序(SPA)的想法很吸引人。您将服务器的部分逻辑转移到客户机上运行，并在需要时从服务器请求数据。这意味着您可以更新显示给用户的内容，而无需刷新页面。如今开发单页面应用程序最流行的框架是React和Angular。但是事情是这样的:</p><blockquote class="ku kv kw"><p id="9140" class="if ig kx ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi translated">“任何设计系统(广义定义)的组织都将产生一个设计，其结构是该组织通信结构的副本。”</p><p id="8d9c" class="if ig kx ih b ii ij ik il im in io ip ky ir is it kz iv iw ix la iz ja jb jc hb bi translated">——梅尔文·康威</p></blockquote><p id="7d6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两家公司分别由脸书和谷歌这两个拥有数千名程序员的大型组织创建。尽管单页应用程序模型给web应用程序带来了活力，但它也带来了一些挑战。一家价值数十亿美元的公司有能力应对这些挑战。尽管如此，也许它会减缓一个更温和的冒险。例如:</p><ul class=""><li id="150f" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc lb jj jk jl bi translated">SPAs对于搜索引擎的优化是具有挑战性的，因为他们的爬虫倾向于不执行JavaScript代码。</li><li id="7bb1" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">它们起初需要时间来加载，并且倾向于依赖于许多必须在客户端下载的依赖关系。</li><li id="c768" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">他们<strong class="ih hj">将逻辑一分为二</strong>，迫使你在客户端和服务器端都处理模型-视图-控制器模式。</li></ul><p id="8bbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这导致您最终需要维护一个复杂请求/响应循环，可能如下所示:</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es lc"><img src="../Images/2f718904855ccd6861a8add00ceba156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dnvrVlZmKrMMOM2Gc_NAow.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">图片由Sam Stephenson (Basecamp)在RailsConf 2016上展示</figcaption></figure><h1 id="6fa0" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">Rails是为您设计的…</h1><p id="6502" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">好吧，我已经听到你们中的一些人在屏幕后面大喊，准备停止阅读这篇文章。但如果没有一点争议，这就不是一篇好的评论。</p><p id="364f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Rails是一个用Ruby编写的服务器端web应用程序框架，它是为中等规模的团队设计的。它是由大卫·海涅梅尔·汉森在16年前创建的。当时，他在一家名为37signals(今天称为Basecamp)的小公司工作，开发基于web的项目管理应用程序。</p><p id="6a3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Rails是一个固执己见的框架，这可能是它最好的特性之一。您告诉Rails您想做什么，它会负责“如何”去做。由于一切都是在服务器上呈现的，因此最终的请求/响应周期如下所示:</p><figure class="ld le lf lg fd lh er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es ls"><img src="../Images/e26c031e3468ebb0aa5504dd269b9691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GWgbNQ7R3a3yVwrYjgGl4Q.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">图片由Sam Stephenson (Basecamp)在RailsConf 2016上展示</figcaption></figure><p id="cb74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这意味着，就目前而言，Rails属于多页面应用程序范例。但是让我们停下来欣赏一下这个范例。<strong class="ih hj">很简单，像真的很简单</strong>。浏览器向服务器发送请求。这一个被路由到适当的控制器，请求适当的数据从几个模板组装成一个HTML文件。然后，最终结果被发送回浏览器。</p><p id="a2dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了形象化这种简单性，让我们以2015年发布的Basecamp 3的开发为例。他们为此工作了<strong class="ih hj"> 18个月</strong>，创造了超过<strong class="ih hj"> 200个屏幕</strong>，并在<strong class="ih hj">五个平台</strong>上发布了服务:网络、macOS <strong class="ih hj">、</strong> Windows、Android和iOS。在一家尊重工作/生活平衡的公司里，这个团队只有十个人。</p><h1 id="5ffe" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">Hotwire也是！</h1><p id="7941" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">但是你想要那个闪亮的单页应用程序，老实说，我不怪你。好吧，Rails在某种程度上可以用新的Hotwire框架家族做到这一点。你猜怎么着？它是由Basecamp的团队(再次)为你设计的。前提很简单:你保持与Rails相同的逻辑，但是你的应用感觉像一个单页应用。为什么“感觉像”？因为所有的逻辑仍然在服务器端。Hotwire最重要的框架:Turbo使之成为可能。</p><p id="4e5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最大的多页面范式问题是，每次点击链接浏览网站时，都必须刷新整个页面。<strong class="ih hj"> Turbo允许您仅刷新页面中需要刷新的部分</strong>。当你的用户点击一个链接时，Turbo将停止它，并向服务器发出一个类似AJAX的请求，请求一个新的HMTL页面。一旦接收到这个新页面，它就被合并到DOM中。您可以通过使用Turbo帧来定制这种行为，从而只请求您需要刷新的部分。</p><p id="cff0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个有趣的功能，<em class="kx"> Turbo Streams，</em>允许通过WebSocket进行更改。但我认为最重要的一个是<em class="kx"> Turbo Native </em>，它<strong class="ih hj">允许你开发一个iOS或Android应用程序，感觉像是native </strong>。因为所有的事情都是在服务器端处理的，如果你的web应用已经可以响应了，你唯一要做的就是把应用的本地部分连接到你的web应用上。</p><p id="f4ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，到目前为止，我们不需要任何定制的JavaScript，但是假设我们需要编写一些。这就是刺激的来源，热线的第二个框架。<strong class="ih hj"> Stimulus允许你在HTML中加入控制器、目标和动作属性，并编写一个单独的JS文件来控制它</strong>。这有点像做jQuery，但是是CSS样式的，JS和HTML是分离的。就像样式表一样，它将始终应用于具有适当属性的HTML元素，即使Turbo对页面进行了更改。不需要像jQuery一样初始化你的控制器。</p><h1 id="86c8" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">简单是伟大的</h1><p id="13e2" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">让我们回到我们的舞蹈应用程序项目。我们问自己这样一个问题:<strong class="ih hj">在我们的社区中，我们可以用来解决问题的最有效的框架是什么？</strong>是哪一个让我们的项目变得现实，即使它永远是一个副业。我们相信Rails和Hotwire是我们的最佳选择。</p><p id="b3dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我并不是说Angular或React这样的框架没有价值，因为它们确实有价值。它们极其强大和灵活，对于许多公司来说，使用它们是有意义的。</p><p id="1bc3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可能希望我说我们选择使用Rails和Hotwire来开发我们的web应用程序。嗯，是也不是。几个月前，我们加入了Lighthouse Labs的Web开发训练营，开始编程。我们将使用PERN堆栈(PostgreSQL，Express，React &amp; Node.js)为我们的最终项目开发应用程序。作为个人，我们确实相信使用那些流行的框架是很重要的，至少要理解它们。这将是我们的概念证明。但从长远来看，我们很可能会继续使用为我们设计的东西。</p></div><div class="ab cl lt lu gp lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hb hc hd he hf"><h1 id="76c0" class="jr js hi bd jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko bi translated">参考</h1><ul class=""><li id="5875" class="jd je hi ih b ii kp im kq iq mf iu mg iy mh jc lb jj jk jl bi translated">编码技术。(2017年11月14日)。<em class="kx"> Turbolinks:真不敢相信不是本土的</em>。https://www.youtube.com/watch?v=Xkjo7iKkQlY<a class="ae mi" href="https://www.youtube.com/watch?v=Xkjo7iKkQlY" rel="noopener ugc nofollow" target="_blank"/></li><li id="ef98" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">康威，医学工程(1968)。委员会是如何发明的？<em class="kx">数据化</em>，<em class="kx"> 14 </em> (4)，28–31。</li><li id="86b9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated"><em class="kx">网络上的HTML | hot Wire</em>。(未注明)。检索于2021年4月2日，来自<a class="ae mi" href="https://hotwire.dev/" rel="noopener ugc nofollow" target="_blank">https://hotwire.dev/</a></li><li id="cbc6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">米塔，西(未标明)。<em class="kx">2019年谁给个关于Rails的F***啊？</em>2021年4月2日检索，来自<a class="ae mi" href="https://naturaily.com/blog/who-gives-f-about-rails" rel="noopener ugc nofollow" target="_blank">https://naturaily.com/blog/who-gives-f-about-rails</a></li><li id="5d36" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">刺激:为你已经拥有的HTML提供一个适度的JavaScript框架。(未标明)。检索于2021年4月2日，来自<a class="ae mi" href="https://stimulus.hotwire.dev/" rel="noopener ugc nofollow" target="_blank">https://stimulus.hotwire.dev/</a></li><li id="019c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">Turbo:单页web应用程序的速度，无需编写任何JavaScript。(未标明)。检索于2021年4月2日，来自<a class="ae mi" href="https://turbo.hotwire.dev/" rel="noopener ugc nofollow" target="_blank">https://turbo.hotwire.dev/</a></li><li id="f8ff" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc lb jj jk jl bi translated">Vandgrift，B. (2021)。<em class="kx">反应轨:热线</em>。<a class="ae mi" href="https://www.beflagrant.com/blog/reactive-rails-hotwire" rel="noopener ugc nofollow" target="_blank">https://www.beflagrant.com/blog/reactive-rails-hotwire</a></li></ul></div></div>    
</body>
</html>