<html>
<head>
<title>Is Trading Using Exponential Moving Averages (EMAs) Profitable?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用指数移动平均线(EMAs)交易有利可图吗？</h1>
<blockquote>原文：<a href="https://medium.com/codex/is-trading-using-exponential-moving-averages-emas-profitable-2482c4e8ba6e?source=collection_archive---------1-----------------------#2021-07-18">https://medium.com/codex/is-trading-using-exponential-moving-averages-emas-profitable-2482c4e8ba6e?source=collection_archive---------1-----------------------#2021-07-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4314" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Python回溯测试过去10年的EMA算法</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/7035d74ef4b311e48f5700e75b836898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uBDKXxeRhHV3aOtYw78k0g.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图片由<a class="ae jn" href="https://unsplash.com/@techdailyca" rel="noopener ugc nofollow" target="_blank">科技日报</a>在<a class="ae jn" href="https://unsplash.com/photos/ztYmIQecyH4" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d300" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">技术指标是普通算法交易者的面包和黄油。任何简单的谷歌搜索，或者技术分析课程(如果你是boujee)，都会告诉你某些指标:移动平均线，相对强弱指标，布林线等等。因此，我将分析移动平均线指标在描述股票趋势方面的效用——并进一步获利。</p><p id="e8a5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个项目的整个过程中，我将解释移动平均线的使用，移动平均线背后的一些数学知识，用于回溯测试的算法，回溯测试的结果，以及之后获得的见解:</p><h2 id="dea5" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">目录</h2><p id="c7ec" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">–<a class="ae jn" href="#5bd8" rel="noopener ugc nofollow">移动平均线解释</a><br/>–<a class="ae jn" href="#adcc" rel="noopener ugc nofollow">后验</a><br/>–<a class="ae jn" href="#dbd5" rel="noopener ugc nofollow">结论</a><br/>–<a class="ae jn" href="#13a1" rel="noopener ugc nofollow">代码</a></p><p id="fc0f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个项目的GitHub repo可以在这里<a class="ae jn" href="https://github.com/jai-agrawal/ema-backtests/" rel="noopener ugc nofollow" target="_blank">找到。我还将主要代码放在了文章的末尾。</a></p><p id="5835" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">免责声明:本项目及其结果的任何部分都不应被视为股票市场建议。我只是一个业余程序员，希望分享我个人项目的发现。</p><h1 id="5bd8" class="lk kl hi bd km ll lm ln kq lo lp lq ku io lr ip kx ir ls is la iu lt iv ld lu bi translated">移动平均线解释</h1><p id="a695" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">如果你还不知道移动平均线(MA)意味着什么(在这种情况下，大胆地跳到本文)，下面是它的简单含义:</p><blockquote class="lv lw lx"><p id="9f57" class="jo jp ly jq b jr js ij jt ju jv im jw lz jy jz ka ma kc kd ke mb kg kh ki kj hb bi translated">“在统计学中，<strong class="jq hj">移动平均值</strong>是一种计算方法，用于通过创建完整数据集的不同子集的一系列平均值来分析数据点”<a class="ae jn" href="https://www.investopedia.com/terms/m/movingaverage.asp" rel="noopener ugc nofollow" target="_blank"> 1 </a></p></blockquote><p id="9030" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为什么这在金融环境中是有用的，是因为MA能够消除股票价格的微小波动，并使交易者能够查看特定股票的趋势。总的来说，交易中有两种均线:简单均线和指数均线。</p><h2 id="99a1" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">简单移动平均线</h2><p id="97df" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated"><em class="ly"> n </em>日SMA取最后<em class="ly"> n </em>个交易日的算术平均值。例如，如果我想找出一种商品的50天均线，我必须找出该商品的最后50个收盘价，并找出该价格的平均值。够简单吗？(哈哈)</p><h2 id="441e" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">指数移动平均线</h2><p id="2ccd" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">SMA的一个限制是它给旧数据和新数据同等的权重。这就是均线发挥作用的地方。你可以在这里查看它背后的数学原理，但我不认为这有什么关系。相关的是，它给了最近的数据更多的权重，因此能够更动态地描绘趋势。</p><p id="035a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我现在将回测均线——因为我发现它更有用——以了解它过去的盈利情况。</p><h1 id="adcc" class="lk kl hi bd km ll lm ln kq lo lp lq ku io lr ip kx ir ls is la iu lt iv ld lu bi translated">回溯测试</h1><h2 id="08d9" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">使用的算法</h2><p id="cd1a" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">有一些算法可以用来合并EMA:</p><ol class=""><li id="bc7c" class="mc md hi jq b jr js ju jv jx me kb mf kf mg kj mh mi mj mk bi translated">交叉:当收盘价低于/高于均线时，分别买入/卖出。这意味着当一只股票的价格低于均线时，你应该买入，因为这意味着它的交易价格低于趋势价格。</li><li id="63f3" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj mh mi mj mk bi translated">移动平均收敛发散(MACD):</li></ol><pre class="iy iz ja jb fd mq mr ms mt aw mu bi"><span id="506b" class="kk kl hi mr b fi mv mw l mx my">MACD = 12-day EMA - 26-day EMA</span></pre><p id="859f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">很简单，这是股票动力的另一个指标。</p><p id="c94c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">3.多个EMA组合的交叉交易:类似于交叉交易，人们可以根据多个EMA何时相交来买入/卖出。例如，我过去尝试过的一个策略是，当5日均线低于20日均线，20日均线低于60日均线时买入(卖出功能正好相反)。</p><p id="46ae" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我将使用100，000卢比的任意预算，以及算法2和3进行回溯测试。</p><p id="ad7a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意:我还将反复灌输这样一种逻辑，即用户可能不想以低于其平均购买价格的价格出售。因此，我把它放在回溯测试算法中。</p><h2 id="b854" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">使用的数据</h2><p id="d472" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">这个项目中使用的所有数据都是使用NSEpy [LINK]库提取的。你可以看看Github repo，看看它是怎么做的。它使您能够从预定义的时间段中提取某一股票的股票数据。</p><p id="716c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就时间段而言，我观察了2011年至2021年间的投资势头:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/b5705c8e8bd8364d26cfca51ea9b0607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVDem82ldb7o9ZG3FqBetQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">极低的价格</figcaption></figure><p id="b17f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我可能不得不排除2020年以后的数据，因为由于疫情，市场运转异常。因此，2009-2019年是一个很好的十年。</p><p id="eb3e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">至于股票，我将从大、中、小盘股中各选三家公司。这个决定将被武断地做出。我将使用BHARTIARTL价格来说明下面的项目。</p><h2 id="4ce5" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">分析</h2><p id="ed60" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">MACD和跨界车的10年盈亏曲线如下:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mz"><img src="../Images/3563732a99d345b63438482978bbd1da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EhDUcrbfgzzfdTm3vGiqxw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">*2009年因股票分割而删除</figcaption></figure><p id="5803" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">外卖:</p><ol class=""><li id="5c98" class="mc md hi jq b jr js ju jv jx me kb mf kf mg kj mh mi mj mk bi translated">由于反应更灵敏，MACD更加活跃，能够利用价格波动产生更高的利润，同时几乎不会遭受更多的损失</li><li id="4e56" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj mh mi mj mk bi translated">交叉速度较慢，也更稳定</li><li id="280c" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj mh mi mj mk bi translated">持有(在回溯测试的第一天投入全部预算，完全不卖出)是利润最低的策略，尤其是考虑到第五点。虽然，股票价格的上涨也会导致持有利润比其他利润增加更多</li><li id="b5aa" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj mh mi mj mk bi translated">对这只股票来说，两种算法都有利可图</li><li id="1ae6" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj mh mi mj mk bi translated">利润的最高点是₹50000，考虑到时间跨度很大，这是不可行的。我还考虑到，大部分产生的利润可能会变现，并重新投入股票，这将使结果倍增。因此，在接下来的回溯测试中，我将只获取2016年至2019年的数据</li></ol></div><div class="ab cl na nb gp nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="hb hc hd he hf"><p id="dee8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">结果如下:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nh ni l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">所有符号的回溯测试</figcaption></figure><ul class=""><li id="9f9b" class="mc md hi jq b jr js ju jv jx me kb mf kf mg kj nj mi mj mk bi translated">IDEA (Crossover)和LUXIND没有盈利，尽管我认为这在很大程度上是由于接近数据结束时(2018年底)的价格下降</li><li id="383f" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj nj mi mj mk bi translated">其他银行显然是盈利的，ICICI，TATA和JINDALSTEL的年回报率约为20%</li><li id="fa45" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj nj mi mj mk bi translated">交叉利润和MACD利润之间真的没有关联，尽管深入研究数据可能会发现一个关联</li></ul><h2 id="3ba5" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">限制</h2><p id="38d3" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">虽然回溯测试可能是一个人在他的算法交易之旅中应该反复灌输的第一步，但它不应该是最后一步。回溯测试有许多限制。例如:</p><ul class=""><li id="c36d" class="mc md hi jq b jr js ju jv jx me kb mf kf mg kj nj mi mj mk bi translated"><strong class="jq hj">过去的表现并不能保证未来的结果</strong>。这一点非常重要。回溯测试就是这样——回溯测试。这仅仅意味着它的结果将符合未来的结果，因为市场的运行<em class="ly">与回溯测试数据中的完全一样。这一点永远无法保证。未来的违规行为可能是由各种原因造成的，这里的列表太长，无法一一列举</em></li><li id="90fd" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj nj mi mj mk bi translated">虽然回溯测试算法能够在完全流动的情况下进行买卖，但将资金转入你的账户并实际购买股票确实需要时间，并可能导致股价的涨跌。据我所知，印度经纪人还没有提供免费的API使用，允许你直接从你的代码下订单</li><li id="a506" class="mc md hi jq b jr ml ju mm jx mn kb mo kf mp kj nj mi mj mk bi translated">如前所述，我还没有用赚来的钱做任何事情。在现实世界中，赚到的钱会被投资回去，导致指数级的结果</li></ul><h1 id="dbd5" class="lk kl hi bd km ll lm ln kq lo lp lq ku io lr ip kx ir ls is la iu lt iv ld lu bi translated">结论</h1><p id="4729" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">使用EMAs交易有利可图吗？很难说。回溯测试只能在一定程度上证明结果。基于过去的趋势，如果股票投资遵循给定的EMA算法，排除外部市场变化的情况(破产、丑闻、疫情),那么在很长一段时间内，这些投资很可能是盈利的。这是否比在整个时期都持有这项投资要好？完全取决于市场。这个策略有逻辑和实际意义吗？是的，只要股票价格不会永远下跌，你应该<em class="ly">在技术上</em>能够利用股票价格的涨跌赚取一些利润。</p><h2 id="ea4d" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">未来的工作</h2><p id="ddaa" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">我想回测更多的交易算法，看看它们的预期利润。或许，加密货币也是如此。我还想找到更好的方法来显示生成的结果，而不是简单的表格。</p><h1 id="13a1" class="lk kl hi bd km ll lm ln kq lo lp lq ku io lr ip kx ir ls is la iu lt iv ld lu bi translated">密码</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nh ni l"/></div></figure><p id="c316" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">查看我的<a class="ae jn" href="https://github.com/jai-agrawal/ema-backtests" rel="noopener ugc nofollow" target="_blank"> GitHub Repo </a>获取更多关于如何在<a class="ae jn" href="https://github.com/jai-agrawal/ema-backtests/blob/master/utils.py" rel="noopener ugc nofollow" target="_blank"> utils.py </a>中创建数据帧的信息。</p></div></div>    
</body>
</html>