# 什么比较好？模块化整体服务与微服务

> 原文：<https://medium.com/codex/what-is-better-modular-monolith-vs-microservices-994e1ec70994?source=collection_archive---------1----------------------->

什么比较好？这个问题很难回答，因为我可以对大多数开发者说:“看情况”。我会试着根据自己的经历来回答。

# 介绍

![](img/aa103589260b3bdb037239b1db049da5.png)

**在 IT 行业内部的谈话中，大家至少听说过微服务。微服务长期以来一直是一个时髦词，即使是现在。每个人都谈论它们，每个人都热爱它们，每个人都试图实施它们。**

**甚至有一种观点认为，如果你没有微服务，通常意味着这个项目没有意思，已经过时了……**

**看来 IT 行业已经被微服务的想法迷住了，对吗？**

你有没有想过为什么？这种突然对微服务的兴趣和实现微服务的执念是从哪里来的？

几件事在很大程度上促成了微服务的流行:云解决方案，容器化主要归功于 Docker / Kubernetes。大量赞扬微服务架构的讲座。

我们需要记住，与任何解决方案一样，一方的微服务解决了一些问题，但也带来了其他一些问题。通常比我们对付的更难驯服。

微服务带来的一些最大挑战包括:

*   服务之间的通信复杂且难以维护(服务的暂时不可用、API 契约维护、最终的一致性如果处理不当也会很棘手)
*   更多的服务等于更多的资源
*   调试可能非常棘手(由于整个体系结构的复杂性，有时您需要通过一些独立的服务进行调试，以获得关于什么工作不正常的信息)
*   微服务可能非常昂贵
*   如果你不知道微服务应该如何构建，你可以创建分布式的 monolith，这是最糟糕的事情

现在让我们考虑一下，我们是否真的都需要微服务？来自 IT 行业的绝大多数公司并不需要微服务，他们只是没有达到微服务可以展示其全部荣耀的规模。如果我们不是像网飞、Shopify 等那样的公司，这主要是关于我们拥有的系统的规模。我们可能看不到使用微服务的任何好处，我认为我们只会伤害自己，在许多方面，包括经济上，因为正如我前面提到的，微服务会消耗大量资源，这会导致大量资金。

# 有哪些替代方案？

自然，第一种选择变成了我们都已经知道的**巨石**。使用了很久，被大多数人讨厌，但传统的独石并没有人们想象的那么糟糕。这又是一个规模问题。对于小型开发团队开发的小项目，它几乎是完美的架构。

![](img/9a75e93f78687fb6e09b49ae3861a106.png)

**独石**建筑

对于简单的 CRUD 系统，MVP 等。，不需要花哨的架构。但是，如果我们知道我们的应用程序将会增长，我们知道我们正在处理的领域要求很高，那该怎么办呢？

模块化的整体建筑来帮助手。它与传统的独石有何不同？为什么会更好？首先，模块化整体结构是由模块组成的。每个模块必须完成一些要求。：

*   独立且可互换
*   拥有提供所需功能所需的一切
*   已定义 api

当然，每个模块不可能完全独立于系统的其他部分，但是我们必须尽可能地保持它的独立性。每个模块只链接到它特别需要的代码。

模块化是一个根本性的变化，因为它允许我们将每个模块提取为一个微服务。当我们的规模足够大时，没有理由不将每个模块提取为微服务，以获得其所有的扩展优势。

与传统整体式相比，模块化整体式给我们带来了:

*   降低复杂性
*   重构更容易
*   这对团队来说更好

在一个模块化的整体中，我们对待每个模块更多的是一个业务模块而不是一个技术模块，这就是为什么它与领域驱动设计的思想很好地结合在一起。

# 模块化整体结构中的领域驱动设计

马丁·福勒在下面的引用中对此做了很好的描述:

> 领域驱动设计是一种软件开发方法，它将开发集中在对领域模型编程上，该模型对领域的过程和规则有丰富的理解。

这个名字来自 Eric Evans 2003 年的一本书，该书通过模式目录描述了这种方法。我不会深入 DDD，因为这是一个很大的话题。我想再谈一件事。

在 DDD，我们有一个术语叫做有界环境。这一切都是为了将应用程序与彼此相关的业务部分分离开来。按照这种方式，模块化整体中的每个模块都可以根据 DDD 被视为一个有界上下文。由于这种方法，我们获得了良好的业务结构模块，我们将在未来提取这些模块。

DDD 向我们描述了业务应该如何划分到有限的上下文中，模块化的整体和它的模块化告诉我们如何将它构造成一个代码。

你可以在 Kamil Grzybek 撰写的精彩系列文章中找到更多关于模块化独石的详细信息:【http://www.kamilgrzybek.com/design/modular-monolith-primer/

# 与微服务相比，模块化整体式服务器何时是更好的选择，为什么？

根据我的经验，对于大多数中小型项目来说，模块化整体结构是一种优秀的架构。以我的理解来说，大型项目包括网飞、Shopify 等。

*   我们保持模块化，类似于微服务所代表的水平。
*   通信通常发生在整体内部，因此比微服务中的通信简单得多
*   节省资源。我们仍然有一个整体，但模块化，所以成本将大大低于微服务。在大多数情况下，添加一个新模块不会花费你很多。
*   调试要容易得多，主要是因为模块之间的通信更容易。
*   部署过程要简单得多

总而言之，对于大多数公司来说，一个更好的选择将是实施模块化整体，直到规模更大，微服务有意义。

以上帖子当然只是我对这个话题的看法。由我在这里讨论的所有架构的经验支持。

这只是更大系列的开始。接下来的帖子将描述我自己关于用 PHP 构建这种模块化整体的想法，以及我是如何做的。

在评论中讨论。我很乐意了解别人的观点。

继续看我的[简讯](https://mlenczewski.com/newsletter/)！