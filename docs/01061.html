<html>
<head>
<title>Properly pickle out to a path in Python when using Google Colab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当使用Google Colab时，正确地挑选出Python中的路径</h1>
<blockquote>原文：<a href="https://medium.com/codex/properly-pickle-out-to-a-path-in-python-when-using-google-colab-741f0905e68b?source=collection_archive---------4-----------------------#2021-04-02">https://medium.com/codex/properly-pickle-out-to-a-path-in-python-when-using-google-colab-741f0905e68b?source=collection_archive---------4-----------------------#2021-04-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/49c62ce88a147c3913bf56d28df14929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1lc7AlQSraq4FOOZNfgww.jpeg"/></div></div></figure><p id="589c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在你使用Google Colab学习机器/深度学习的旅程中，在某些时候，你需要保存你的训练模型，以便在以后使用。在Python的世界里，这被称为“酸洗”(查看官方Python文档的详细描述:<a class="ae jo" href="https://docs.python.org/3/library/pickle.html)" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/pickle.html</a>)。</p><p id="ed51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您正在使用Google Colab，并且您想要将腌制的对象保存在您的Google Drive中，您需要指定您想要保存模型的确切路径。</p><p id="bf9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请允许我演示…</p><p id="984f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们来看一个YouTuber sentdex的示例代码:加载自己的数据—深度学习基础用Python、TensorFlow和Keras(<a class="ae jo" href="https://pythonprogramming.net/loading-custom-data-deep-learning-python-tensorflow-keras/?completed=/introduction-deep-learning-python-tensorflow-keras/" rel="noopener ugc nofollow" target="_blank">https://Python programming . net/Loading-custom-data-Deep-Learning-Python-tensor flow-Keras/？已完成=/简介-深度学习-python-tensorflow-keras/ </a>)</p><p id="346e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在教程的最底部，显示了以下代码:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/da7ad6fe3f5820647322237509b3e3a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpvmAC4WuFnk4sREGYQ2Cw.png"/></div></div></figure><p id="a3d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们照这样做，Python会创建两个pickle对象:X.pickle和y.pickle，但是它会保存在Colab的什么地方呢？</p><p id="8ebc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，点击最左边的底部图标，然后点击右边的图标，安装Google Drive:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ju"><img src="../Images/352c9a1fa4f0576ec929a673dc383805.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/1*j112egEpFIPsseueCXh3XA.png"/></div></figure><p id="ece7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击“连接到GOOGLE DRIVE”:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jv"><img src="../Images/079c9dedb4a94d2d5406749115e2c8dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FQxQWA2KxxGO38knndHzwQ.png"/></div></div></figure><p id="9a26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">边注:</strong></p><p id="e41a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我在我的Google Drive中创建了一个名为“丑陋图片”的新文件夹，它与狗和猫的文件夹在同一个位置:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jw"><img src="../Images/fa30c727051f297dd8a9bde3721b8e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nvZV-jQgkjphSnceruF9tw.png"/></div></div></figure><p id="ff0d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后我创建了这个小函数来移动任何被异常子句捕获的图像；任何出现在猫狗文件夹中的丑陋图片。这有助于清理狗和猫文件夹中的图像。</p><p id="f6b4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我还创建了一个计数器变量，看看这个循环对Dog和Cat文件夹执行了多少次:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jx"><img src="../Images/4b2b838c1b086a403ff046afa5173083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CkPF4_gf4GP4M_-PRIh9Fg.png"/></div></div></figure><p id="e331" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不要忘记在import语句的顶部包含import shutil:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es jy"><img src="../Images/2969d2edb8ed43e51b88a6050e207494.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*1T7ZL2havN5Mqk64uHSPHw.png"/></div></figure><p id="13be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意:这个脚本最初执行了1个多小时，所以请耐心等待。随后的处决只进行了不到2分钟。</p><p id="d744" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">回到主文:</strong></p><p id="3c7e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们运行代码，看看它将腌制文件放在哪里:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jz"><img src="../Images/51784568080e7d27154cc66982322b76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WXZGFgkMQPoMUXk517RVow.png"/></div></div></figure><p id="64bf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">执行这个“单元代码”会导致X.pickle和y.pickle出现在根目录中。注意:它并没有放在你已经挂载的Google Drive里面。</p><p id="b30a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那么我们能做什么呢？</p><p id="9dca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选项1:通过拖放将pickle文件手动移动到Google Drive的数据集目录中:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ka"><img src="../Images/4aa3cd87993b243d288eb6d7a405c03e.png" data-original-src="https://miro.medium.com/v2/resize:fit:702/format:webp/1*dr1mYXsjWZUUsHcA1DFLZQ.png"/></div></figure><p id="cdde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种方法确实有效:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kb"><img src="../Images/b1a4ea2287d3190ddbacd1fc201ab51f.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*zQEQW2st_iPLxQZm7Th5Uw.png"/></div></figure><p id="37cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">选项2:最佳方法:在pickle时，在代码中指定目录的路径:</p><p id="0c29" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">右键单击您想要放置pickle文件的文件夹，然后单击“复制路径”:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kc"><img src="../Images/57e383dd0c5cad1f63475c99aaf57458.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*4kjMd4luoy2N-oKx4IDzLA.png"/></div></figure><p id="99e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">向下滚动到Python脚本的底部，在那里显示import pickle。创建一个名为“path”的新变量，并将复制的值粘贴到剪贴板。确保路径末尾有一个正斜杠(非常重要，否则不起作用！).在两个pickle_out语句中包含了“path +”</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kd"><img src="../Images/3eb60cb82cc4c0053360904f1207e490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7KPmt-pcdZR9wlQIru3IYQ.png"/></div></div></figure><p id="d00e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">运行时-&gt;全部运行:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/6e7c6aedeab0c98dfa4690d419cc0555.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*lUy1uwQeoVxk4USYmqi3Jg.png"/></div></figure><p id="58c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">瞧，腌制的文件正好出现在我想要的地方:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es kf"><img src="../Images/01066cd8bbc4d3a92b593dbb0033a2db.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*GOg5yEyvjrIlchKsOu2l4Q.png"/></div></figure><p id="92fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在最后一个“代码单元”中，声明path变量并将其分配给数据集位置，如下所示。在两个pickle_in语句中包含“path +”(如上)。当这个“代码单元”独立运行时，它不会显示任何错误消息，这意味着它可以无缝运行:</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/5d3474b292b75d8081366a882b1f324c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3xcNc_gfjWbIhqgSpHui6g.png"/></div></div></figure><p id="7956" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">快乐可乐泡你训练过的对象…</p><p id="ccbc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如有任何问题或意见，欢迎在回复区留言…</p></div></div>    
</body>
</html>