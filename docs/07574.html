<html>
<head>
<title>The BLoC Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阻挡图案</h1>
<blockquote>原文：<a href="https://medium.com/codex/bloc-pattern-9eb979bea4c4?source=collection_archive---------24-----------------------#2022-06-18">https://medium.com/codex/bloc-pattern-9eb979bea4c4?source=collection_archive---------24-----------------------#2022-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6119d85b898993cc6a8673e18bcc3c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j0tuyiwgInNHdJTWVEfrug.jpeg"/></div></div></figure><p id="2fb6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Flutter有强大的社区和文档，读起来很长。然而，阅读文档是开发人员最重要的事情。众所周知，文档阅读起来很长，软件工程的新手不喜欢阅读。我想直入主题，不要再让你厌烦了。今天，我将解释一下对于颤振来说最受欢迎的设计模式——块状模式。在你开始之前，我建议你阅读我的《MVVM建筑》,因为这篇文章中提到了MVVM建筑。</p><div class="jo jp ez fb jq jr"><a rel="noopener follow" target="_blank" href="/@dogukangundogan5/customized-implementation-of-mvvm-architecture-aeccd57efcfe"><div class="js ab dw"><div class="jt ab ju cl cj jv"><h2 class="bd hj fi z dy jw ea eb jx ed ef hh bi translated">MVVM架构的定制实施</h2><div class="jy l"><h3 class="bd b fi z dy jw ea eb jx ed ef dx translated">大家好，今天我想谈谈MVVM建筑，这是最著名的建筑模式。这个…</h3></div><div class="jz l"><p class="bd b fp z dy jw ea eb jx ed ef dx translated">medium.com</p></div></div><div class="ka l"><div class="kb l kc kd ke ka kf io jr"/></div></div></a></div><p id="2be0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们从样板设计开始。阻塞模式的头以UI开始。用户通过按下向其声明功能的UI组件的任何部分来触发动作。然后UI将该事件发送给bloc。Bloc是这个模式的核心，因为它可以通过模式名和bloc的相似性来理解。集团可以比作MVVM的观点模式。该架构组件从UI获取事件，并将其发送到存储库。存储库负责向web服务或本地数据库发送请求。当数据源返回响应时，它会被发送到存储库。因为存储库监听先前发送给数据源的请求的结果。在响应被解析为特定模型之后，它被发送到bloc。知识库上的监听响应在后台线程上工作，因此用户可以同时使用UI。接下来，bloc得到响应。现在响应可以被状态修改或直接发送到UI。因此，向用户显示响应。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kg"><img src="../Images/44259390b8f08eb9a36171d180adfcd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBow5jqwCBT-t-HsSxugMw.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx translated">图1</figcaption></figure><p id="b4fd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">稍后我将展示这种模式的一个例子。由于谷歌支持这两种架构，MVVM和Bloc架构有相似的部分。Bloc和View模型可以被认为是一样的，因为它们从UI获取事件并向业务逻辑发送请求。我认为唯一的区别是国家。在集团模式中需要州，但在MVVM不需要。如果你想看看它是如何使用的，你应该看看上面的文章。</p><h1 id="e24f" class="kp kq hi bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">阻塞示例</strong></h1><p id="c7b3" class="pw-post-body-paragraph iq ir hi is b it ln iv iw ix lo iz ja jb lp jd je jf lq jh ji jj lr jl jm jn hb bi translated">让我们从文件夹层次结构开始。我的文件夹层次结构如图2所示。从文件夹的名称可以理解，网络文件夹包括关于网络请求的类。实体是保存数据模型的文件夹。最后，UI文件夹包括关于UI的类。在开始编码之前，您必须在pubspec.yaml中添加如图3所示的依赖项。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/6b960966bd3a5bd49629e84fb571fd9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:552/format:webp/1*NJXtx8t2c4Y8yWi9WysjxA.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated">图2</figcaption></figure><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/cf8d53159da96949cce70ff51b902149.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*CKCO2hfDaMZstzENmd7SSg.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated">图3</figcaption></figure><p id="33c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">数据模型类是根据您的数据存储创建的。我给你看一个食品公司的例子。假设您有一个web服务，一个获取所有可用食物的请求被发送到web服务。响应以JSON格式到达移动设备，因此这个响应应该被解析为一个类。显然，JSON格式是可以使用的，但是很难用它做些什么，而且不常用。图2显示了食品类。</p><figure class="kh ki kj kk fd ij"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="5ecd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Cubit类具有状态特性。Kotlin开发人员使用emit关键字和flow向监听器发送值。如果你不用Kotlin，也不用担心。下面的代码展示了一个Cubit类的例子。Cubit的泛型参数是状态的类型。当响应来自数据库或网络时，它被发送到UI。多亏了Future关键字，当结果来自数据所在的位置时，该数据将被发送到UI，并立即显示在该UI上。</p><p id="04db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">多亏了Future关键字，当结果来自数据所在的位置时，该数据将被发送到UI，并立即显示在该UI上。</p><figure class="kh ki kj kk fd ij"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="f15d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">UI类可以通过使用context或使用BlocBuilder来访问cubit。这两种用法如下所示。</p><figure class="kh ki kj kk fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/6a70f15fe71d6dc9ec0854197ea8019d.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*y6hNsZdD6ZqhbbrLSlr1mQ.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx translated">图4</figcaption></figure><figure class="kh ki kj kk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lx"><img src="../Images/0fa57f488da2ed53482a541b63e9a1c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GkawGhwD_aixoPhr5HZd2Q.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx translated">图5</figcaption></figure><p id="c69c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们来看看Cubit和UI类之间的连接是如何创建的。将在main.dart文件中创建连接。下面的图3解释了Cubit类的引入。</p><figure class="kh ki kj kk fd ij"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="5443" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，架构是应用程序开发中最重要的东西。开发人员应该了解架构。我希望你喜欢它。</p></div></div>    
</body>
</html>