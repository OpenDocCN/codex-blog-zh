# 云中的机器学习开发—第 4 部分:数据

> 原文：<https://medium.com/codex/machine-learning-development-in-the-cloud-part-4-data-2437cadb5e38?source=collection_archive---------18----------------------->

![](img/804967fcc41d241d166e246515b10151.png)

简·安东宁·科拉尔在 [Unsplash](https://unsplash.com/s/photos/drawers?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

> 如果你错过了，[请访问这个系列的第一部分](/@s.kirmer/machine-learning-development-in-the-cloud-part-1-e60920725af0)来了解我的项目概况。

**在某些方面，在云中存储大量数据比以往任何时候都更容易。**然而，随着这成为企业的标准，很明显基础架构并不总能满足最终用户的需求，这可能会导致问题。**在这篇文章中，我们将讨论云中数据存储的想法和机器学习和数据科学从业者的现实，以及这些如何不总是很好地混合。**

数据科学专业的学生和新手通常最熟悉的是用 R 或 Python 将数据的平面文件从磁盘加载到工作区，然后使用内存中的数据对象作为数据源进行分析。这是一种模式，根据具体情况，这种模式可以很容易地适应来自云的文件，但当数据存储在云位置时，数据科学家也需要准备好不同的方法。

**出于讨论的目的，我们将考虑以下三种数据访问策略。**

*   从云中加载文件(对象存储或文件系统)
*   发送 API 请求，获取数据(向 API 发送请求)
*   发送 SQL 查询，获取数据(从云中的数据库或查询引擎查询)

在一些工具中，这些实际上有很多重叠。您可以将查询发送给 API，或者可以选择挂载文件系统或使用客户端库。大多数服务将提供至少两种(如果不是全部三种)从云中访问数据的方法。(将数据放入工作空间后，如何处理数据是另一个话题。)

# 云中的数据—为什么？

但是，让我们退后一步。我们可能会假设数据应该存储在云上，但是让我们重温一下这个假设并进行检查。这样做的原因是什么？

首先，**您的合规官非常希望您将数据存储在云**上，因为这使得监控访问、使用和潜在风险变得更加容易。与本系列中的许多主题一样，如果您的笔记本电脑掉进浴缸，可能会立即发生灾难。您的数据会无法挽回地丢失吗？如果您将数据存储在一台笔记本电脑上，您将面临丢失、被盗或勒索软件的威胁。而且这还没有考虑到这些数据是否高度敏感，如果这些数据落入他人之手，将会有很大的风险！丢失数据是一种风险，不良行为者访问数据也是一种风险。

# 数据仓库/目录

另一方面，如果你做得好，你的**数据组织和存储可以在云解决方案**中变得更加整洁和容易。在您的笔记本电脑上运行数据库当然是可能的，但不是特别令人愉快，并且不适合在您的团队中共享或协作。另一方面，使用数据目录或数据仓库可以允许对数据进行迭代，并且能够在需要时更容易地找到您需要的东西。

# 非结构化文件存储

现在，数据仓库选项可能不适合您—如果您存储大量非结构化文件、视频或图像，您可能需要更灵活的东西。这就是非结构化文件存储选项的用武之地。您仍然可以通过 API 或文件存储来访问它们，但它们在接收端不会那么整洁有序，这意味着最终用户可能需要做更多的工作来为机器学习准备数据。

# 可用性，或者说用户与合规性

然而，我们需要解决可用性问题。这也是在关于基于云的工具的对话中经常出现的，对于数据来说，这非常重要。**任何有经验的数据科学家都会告诉你，如果你实施了一个基于云的数据存储系统，这个系统速度慢、难以访问、笨重或者非常困难，人们会提取一次数据，然后偷偷保存到他们的本地笔记本电脑上。我已经看过很多次了，可能我自己也做过一两次，这让我很尴尬。但是人们会做他们必须做的事情，以便能够完成他们的工作！从法规遵从性的角度来看，这是最糟糕的情况，因为他们期望一定程度的风险缓解，但实际情况却并非如此。**

# 解决方法

那么，当你试图在云上存储数据时，你会怎么做呢？当在您的 IDE 中工作时，理想的情况是当您需要数据时，您从云中加载—无论是通过 API、SQL 查询还是将文件加载到内存中，然后如果您保存数据，您将数据保存到云空间，而不是容易丢失或被盗的本地笔记本电脑。

为了做到这一点，**你不能只是让你的用户屈服**——你需要有一个云数据存储解决方案，他们可以用它来完成他们的实际工作。无论您选择哪种解决方案，都需要以可用的格式快速返回数据，并尽可能减少实现连接的麻烦。

有大量可能的工具，所以我们将涵盖一个小的选择，包括大玩家和小众玩家。请记住，我们当然希望有安全性，但可用性问题可能会成就或破坏它，所以我们也必须关心这一点。一般来说，对于 Python 数据科学家来说，所有这些工具至少具有可接受的功能(在其权限范围内),尽管对于 R 数据科学家来说，这不太确定。

# 房间里的大猩猩:奥斯·S3

AWS 当然是数据存储领域的一个主要参与者，它提供了几十种不同的难以理解的产品，这些产品可能对数据科学家有用。(在我的非正式调查中，至少有 2/3 的数据科学家在工作场所使用 S3 进行数据存储。)

当使用 S3 时，您可以使用 Python 库`s3fs`将存储桶挂载为模拟文件存储，或者您可以对您的 S3 存储进行 API 调用。在 S3 之上的是 Athena 服务，它为您的 S3 文件提供了基本的 SQL 查询能力。

> ***$ $ $:****S3 的主要成本中心是数据接收/输出，这可能会让不期望它的用户大吃一惊。对于一些企业来说，这是整个 AWS 产品套件中最昂贵的部分。*

# 崭露头角:雪花

雪花是一种越来越流行的数据湖和数据仓库解决方案，它强调访问的方便性和查询结果返回的速度。用户可以通过 CLI、Python、Spark 或 Kafka 连接器访问数据，或者作为接受 SQL 查询的 API 访问数据。与这里的一些其他服务不同，通过将所有注意力集中在数据存储解决方案上，雪花服务可以为特定的数据相关用例提供更全面的功能。

一个缺点是:安装`snowflake-connector-python`库以便在 Python 中使用是[费力的](https://docs.snowflake.com/en/user-guide/python-connector-install.html)。

# 荣誉奖:

*   **AWS 红移**:AWS 的主要数据仓库工具之一，允许与 SQL 查询交互。它的语法类似于 PostgreSQL。

## **谷歌**

*   **云存储**:谷歌的非结构化文件存储选项。类似于 S3，不太受欢迎。
*   Google 的数据仓库解决方案，运行在云存储之上。

## **微软**

*   **Azure Storage Blob** :微软的非结构化文件存储选项。类似于 S3，不太受欢迎。我希望有一些更有趣的东西可以说。
*   **Azure 数据湖** : Azure 的数据仓库解决方案，运行在存储 Blob 之上。

## **数据块**

*   **DBFS (Databricks 文件系统)**:Databricks 用户的一个非结构化文件存储选项——与大多数 data bricks 工具一样，如果您不是在所有事情上都使用它们，这将对您没有多大用处。例如，这一项和下一项在 Databricks IDE 上工作得最好，而在该上下文之外的连接是困难的。
*   **Delta Lake** :数据湖解决方案，覆盖 Databricks DBFS 产品。Delta Lake 是基于 Spark 的独立开源解决方案，数据以 Parquet 格式存储。

**Wasabi** :三巨头之外的另一个非结构化文件存储选项。不是专门为 DS/ML 设计的，但是通用用户似乎很喜欢它。亮点:没有出口费用，它可以与现有的 AWS S3 Python 工具一起工作，特别是`boto3`。

**数据。World** :数据编目解决方案，主要关注组织和记录数据。亮点:对 R 和 Python 的一流支持，以及支持 DS/ML 和分析用例的非常有意的设计。