# Java ä¸­çš„ volatile å…³é”®å­—

> åŸæ–‡ï¼š<https://medium.com/codex/volatile-keyword-in-java-9e8792b4e6ba?source=collection_archive---------6----------------------->

## ä¸ºä»€ä¹ˆã€ä½•æ—¶ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒ

![](img/5a99574ed7b95acce5448435b2a4890d.png)

ä¿®é¥°ç¬¦æ˜¯ Java ä¸­çš„ç‰¹å®šå…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æ”¹å˜å˜é‡ã€æ–¹æ³•æˆ–ç±»çš„ç‰¹å¾ï¼Œå¹¶é™åˆ¶å…¶èŒƒå›´ã€‚Java ç¼–ç¨‹è¯­è¨€æœ‰ä¸°å¯Œçš„ä¿®é¥°è¯­ã€‚

Java ä¸­çš„ä¿®é¥°è¯­åˆ†ä¸ºä¸¤ç§ **â€”** [**è®¿é—®ä¿®é¥°è¯­**](https://www.geeksforgeeks.org/access-modifiers-java/?ref=lbp) å’Œ**éè®¿é—®ä¿®é¥°è¯­**ã€‚

# éè®¿é—®ä¿®é¥°ç¬¦

éè®¿é—®ä¿®é¥°ç¬¦å‘ JVM æä¾›å…³äºç±»ã€æ–¹æ³•æˆ–å˜é‡çš„ç‰¹å¾çš„ä¿¡æ¯ã€‚Java ä¸­æœ‰ä¸ƒç§ç±»å‹çš„éè®¿é—®ä¿®é¥°ç¬¦ã€‚ä»–ä»¬æ˜¯

1.  **å†³èµ›**
2.  **é™æ€**
3.  **æ‘˜è¦**
4.  **åŒæ­¥**
5.  **æ˜“å˜**
6.  **ç¬å‘**
7.  **åŸç”Ÿ**

æœ¬æ–‡å°†æ·±å…¥è®¨è®º **volatile** å…³é”®å­—çš„ç»†èŠ‚ã€‚æˆ‘ä»¬å…ˆæ¥æ¢è®¨ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Œå¦‚æœå†³å®šè¦ç”¨çš„è¯åº”è¯¥ä»€ä¹ˆæ—¶å€™ç”¨ï¼Œæœ€åä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œæ€ä¹ˆç”¨ã€‚

## ä¸ºä»€ä¹ˆ:

Java ä¸­çš„ volatile å…³é”®å­—ç”¨äºå°†ä¸€ä¸ª Java å˜é‡æ ‡è®°ä¸ºâ€œå­˜å‚¨åœ¨ä¸»å­˜ä¸­â€ã€‚

æ¯ä¸ªè®¿é—® volatile å˜é‡çš„çº¿ç¨‹éƒ½å°†ä»ä¸»å†…å­˜ä¸­è¯»å–å®ƒï¼Œè€Œä¸æ˜¯ä» CPU ç¼“å­˜ä¸­è¯»å–ã€‚è¿™æ ·ï¼Œæ‰€æœ‰çº¿ç¨‹çœ‹åˆ°çš„ volatile å˜é‡çš„å€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚

volatile å…³é”®å­—å¯ä»¥ç”¨äºä»»ä½•ç±»å‹çš„å˜é‡ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ã€‚å½“ä¸å¯¹è±¡ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å°†çœ‹åˆ°å¯¹è±¡ä¸­æ‰€æœ‰å­—æ®µçš„æœ€æ–°å€¼ã€‚

volatile å…³é”®å­—é€šå¸¸ä¸æŒ‡ç¤ºçº¿ç¨‹éœ€è¦åœæ­¢è¿è¡Œçš„æ ‡å¿—ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹å¯èƒ½æœ‰ä¸€ä¸ªåä¸ºâ€œdoneâ€çš„å¸ƒå°”æ ‡å¿—ï¼Œå½“å¦ä¸€ä¸ªçº¿ç¨‹å°†è¯¥æ ‡å¿—è®¾ç½®ä¸ºâ€œtrueâ€æ—¶ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹å°†çŸ¥é“åœæ­¢è¿è¡Œã€‚å¦‚æœæ²¡æœ‰ volatile å…³é”®å­—ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šæ— é™æœŸåœ°è¿è¡Œï¼Œå› ä¸ºå®ƒæ°¸è¿œä¸ä¼šçœ‹åˆ°â€œdoneâ€æ ‡å¿—çš„æ›´æ–°å€¼ã€‚

volatile å…³é”®å­—è¿˜æœ‰å…¶ä»–ç”¨æ³•ï¼Œä½†è¿™æ˜¯æœ€å¸¸è§çš„ç”¨æ³•ä¹‹ä¸€ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ‚¨éœ€è¦ç¡®ä¿æ‰€æœ‰çº¿ç¨‹éƒ½çœ‹åˆ°æŸä¸ªå˜é‡çš„ç›¸åŒå€¼ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥å°†è¯¥å˜é‡æ ‡è®°ä¸º volatileã€‚

![](img/623485c01fb734040ace8fbf4b1cc9d7.png)

## æ—¶é—´å’Œæ–¹å¼:

## 1.æ˜“å˜åœº

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚åˆ°æ¥æ—¶åˆ›å»ºå®ä¾‹ã€‚

å¦‚æœæˆ‘ä»¬ä¸æŠŠ`_instance`å˜æˆå˜é‡`volatile`ï¼Œé‚£ä¹ˆåˆ›å»º`Singleton`å®ä¾‹çš„çº¿ç¨‹å°±ä¸èƒ½ä¸å¦ä¸€ä¸ªçº¿ç¨‹é€šä¿¡ã€‚å› æ­¤ï¼Œå¦‚æœçº¿ç¨‹ A æ­£åœ¨åˆ›å»ºå•ä¾‹å®ä¾‹ï¼Œå¹¶ä¸”åœ¨åˆ›å»ºä¹‹åï¼ŒCPU æŸåäº†ç­‰ç­‰ï¼Œæ‰€æœ‰å…¶ä»–çº¿ç¨‹å°†ä¸èƒ½çœ‹åˆ°`_instance`çš„å€¼ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å®ƒä»¬å°†è®¤ä¸ºå®ƒä»ç„¶è¢«èµ‹å€¼ä¸ºç©ºã€‚

ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿå› ä¸ºè¯»çº¿ç¨‹ä¸åšä»»ä½•é”å®šï¼Œç›´åˆ°å†™çº¿ç¨‹ä»åŒæ­¥å—ä¸­å‡ºæ¥ï¼Œå†…å­˜å°†ä¸ä¼šåŒæ­¥ï¼Œ`_instance`çš„å€¼ä¹Ÿä¸ä¼šåœ¨ä¸»å†…å­˜ä¸­æ›´æ–°ã€‚å¯¹äº Java ä¸­çš„ Volatile å…³é”®å­—ï¼Œè¿™æ˜¯ç”± Java æœ¬èº«å¤„ç†çš„ï¼Œæ‰€æœ‰çš„é˜…è¯»å™¨çº¿ç¨‹éƒ½å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ›´æ–°ã€‚

æœ€æ¸…æ¥šä¸ºä»€ä¹ˆã€å¦‚ä½•ä»¥åŠä½•æ—¶ä½¿ç”¨ **volatile** ä»¥åŠå…¶ä»–ä¿®é¥°è¯­ï¼Œæ¥è‡ªäºç»éªŒï¼Œè€Œç»éªŒæ¥è‡ªäºæ—¶é—´ã€‚

äº«å—æ—…ç¨‹ï¼Œå¿«ä¹ç¼–ç ï¼

> äº²çˆ±çš„è¯»è€…ï¼Œæ„Ÿè°¢æ‚¨çš„å®è´µæ—¶é—´ï¼

> *æˆ‘çš„ä¸€äº›æ–‡ç« :*

[Java ä¸­çš„ 10 ä¸ªæœ€ä½³å®è·µ](/@alexthedev/10-best-practices-in-java-dc0b06dda858)
[Java ä¸­çš„å“ˆå¸Œ](/@alexthedev/hashing-in-java-f0436cd4284b)
[Java ä¸­çš„æœ€ç»ˆå…³é”®è¯](/@alexthedev/final-keyword-in-java-dd0281080643)
[æˆ‘çš„ç¬¬ä¸€ä»½è½¯ä»¶å¼€å‘å·¥ä½œçš„å¥‹æ–—](/@alexthedev/the-struggle-of-getting-my-first-job-as-a-software-developer-d48a198f57f4)
[2023 å¹´çš„ Java è¿˜å€¼å—ï¼Ÿâ˜•](/@alexthedev/will-java-still-be-worth-in-2023-849921b21080)
[the blub paradox](/@alexthedev/the-blub-paradox-d43c5cb9e3e0)
[ä½œä¸ºä¸€ä¸ªåˆå­¦ç¨‹åºå‘˜æˆ‘å¸Œæœ›çŸ¥é“çš„äº‹æƒ…](/@alexthedev/things-i-wish-i-knew-as-a-beginner-programmer-96b9cbe264de)
[æ˜¥è®­:å¥½ä¸å](/@alexthedev/spring-boot-the-good-and-the-bad-20be1b409f2)
[æˆ‘ä»¬ä¸ºä»€ä¹ˆçƒ­çˆ±ç¼–ç ï¼ŸğŸ’»](/@alexthedev/why-do-we-love-coding-43d0b3cfe0b)
[ä¿æŒç§¯ææ€§](/@alexthedev/stay-motivated-e6102f86c4b3)
[è‰¾æ˜¯æ‰¯æ·¡](/@alexthedev/ai-is-bullshit-fa21e28898d0)
[100 è¿½éšè€…æå®šã€‚ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ](/@alexthedev/100-followers-done-whats-next-d3c054c2d544)
[åœ¨å®¶å·¥ä½œå°±è¦ç»“æŸäº†å—ï¼Ÿ](/@alexthedev/is-work-from-home-going-to-end-7f0bd202a329)