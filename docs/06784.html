<html>
<head>
<title>What is __name__ == “__main__” in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中__name__ == "__main__ "是什么？</h1>
<blockquote>原文：<a href="https://medium.com/codex/what-is-name-main-in-python-c0c14b588c63?source=collection_archive---------0-----------------------#2022-05-13">https://medium.com/codex/what-is-name-main-in-python-c0c14b588c63?source=collection_archive---------0-----------------------#2022-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4a2c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">Python中main方法什么时候执行，怎么执行，什么意思？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d7a7f32705a73daa8fe8c7305604bfcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*3mZDk7pNHkKfipCI6z-DMw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://www.freepik.com/premium-photo/young-brunette-woman-looking-sideways-with-doubtful-skeptical-expression_5362123.htm#query=thinking&amp;position=11&amp;from_view=search" rel="noopener ugc nofollow" target="_blank">图片</a>由<a class="ae jn" href="https://www.freepik.com/asier-relampagoestudio" rel="noopener ugc nofollow" target="_blank"> asier_relampagoestudio </a>在<a class="ae jn" href="https://www.freepik.com" rel="noopener ugc nofollow" target="_blank"> freepik </a>上拍摄</figcaption></figure><p id="9214" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您是Python的新手，您可能已经注意到，可以使用或不使用main方法来运行Python脚本。但是现在你会想为什么我们需要它。</p><p id="965f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这个故事中，我将解释main方法的用途，以及当您定义它时会发生什么。</p><h1 id="d17b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">if __name__ == "__main__ ":是做什么的？</h1><p id="82db" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在执行代码之前，Python解释器读取源文件并定义一些特殊变量/全局变量。如果python解释器将该模块(源文件)作为主程序运行，它会将特殊的<code class="du lh li lj lk b">__name__</code>变量设置为值<code class="du lh li lj lk b"><strong class="jq hj">“__main__”</strong></code>。如果该文件是从另一个模块导入的，<code class="du lh li lj lk b"> __name__ </code>将被设置为<strong class="jq hj">模块的名称。</strong>模块名可作为<code class="du lh li lj lk b">__name__</code>全局变量的值。</p><p id="311d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">模块是包含Python定义和语句的文件。文件名是带后缀的模块名。py已附加。</p><p id="9b74" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当我们执行一个文件作为python解释器的命令时，</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="fbc7" class="lp kl hi lk b fi lq lr l ls lt">python follow.py</span><span id="f044" class="lp kl hi lk b fi lu lr l ls lt">print ("Executed")</span><span id="b126" class="lp kl hi lk b fi lu lr l ls lt">if __name__ == "__main__":<br/> print ("Executed when invoked directly")<br/>else:<br/> print ("Executed when imported")</span></pre><ul class=""><li id="3df9" class="lv lw hi jq b jr js ju jv jx lx kb ly kf lz kj ma mb mc md bi translated">缩进级别为0 [Block 1]的所有代码都会被执行。定义的函数和类是定义好了的，但是它们的代码都没有运行。</li><li id="f940" class="lv lw hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">在这里，如同我们直接执行script.py一样<code class="du lh li lj lk b">__name__</code>变量将会是<strong class="jq hj"> </strong> <code class="du lh li lj lk b"><strong class="jq hj">__main__</strong></code>。因此，只有当该模块是程序的入口点时，if块[Block 2]中的代码才会运行。</li><li id="be2f" class="lv lw hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">因此，您可以通过测试<code class="du lh li lj lk b">__name__</code>变量来测试您的脚本是直接运行还是由其他东西导入。</li><li id="fa80" class="lv lw hi jq b jr me ju mf jx mg kb mh kf mi kj ma mb mc md bi translated">如果脚本被其他模块导入，那么<code class="du lh li lj lk b"><strong class="jq hj">__name__</strong></code> <strong class="jq hj"> </strong>将成为模块名。</li></ul><h1 id="e1d2" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">我们为什么需要它？</h1><p id="e79d" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">例如，我们正在开发一个旨在用作模块的脚本:</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="0040" class="lp kl hi lk b fi lq lr l ls lt"># Python program to execute function directly</span><span id="94c6" class="lp kl hi lk b fi lu lr l ls lt">def my_function():<br/> print ("I am inside function")</span><span id="b39d" class="lp kl hi lk b fi lu lr l ls lt"># We can test function by calling it.<br/>my_function()</span></pre><p id="c28c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，如果我们想通过导入来使用那个模块，我们必须注释掉我们的调用。最好的方法是使用下面的代码:</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="60ba" class="lp kl hi lk b fi lq lr l ls lt"># Python program to use main for function call.</span><span id="8cbf" class="lp kl hi lk b fi lu lr l ls lt">if __name__ == "__main__":<br/> my_function()</span><span id="231a" class="lp kl hi lk b fi lu lr l ls lt">import myscript</span><span id="7ec9" class="lp kl hi lk b fi lu lr l ls lt">myscript.my_function()</span></pre><h1 id="6850" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated"><strong class="ak">优点:</strong></h1><ol class=""><li id="4909" class="lv lw hi jq b jr lc ju ld jx mj kb mk kf ml kj mm mb mc md bi translated">每个Python模块都定义了它的<code class="du lh li lj lk b">__name__</code>,如果这个是<code class="du lh li lj lk b">‘__main__’</code>,这意味着用户正在独立运行该模块，我们可以做相应的适当动作。</li><li id="c4ad" class="lv lw hi jq b jr me ju mf jx mg kb mh kf mi kj mm mb mc md bi translated">如果您将该脚本作为一个模块导入到另一个脚本中，那么<code class="du lh li lj lk b">__name__</code>将被设置为该脚本/模块的名称。</li><li id="69a0" class="lv lw hi jq b jr me ju mf jx mg kb mh kf mi kj mm mb mc md bi translated">Python文件既可以作为可重用模块，也可以作为独立程序。</li><li id="4c17" class="lv lw hi jq b jr me ju mf jx mg kb mh kf mi kj mm mb mc md bi translated"><code class="du lh li lj lk b">if __name__ == “main”:</code>用于执行一些代码<strong class="jq hj">只有</strong>文件是直接运行的，而不是导入的。</li></ol></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><h1 id="38ce" class="kk kl hi bd km kn mu kp kq kr mv kt ku io mw ip kw ir mx is ky iu my iv la lb bi translated">最后的想法</h1><p id="184e" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">好吧，希望现在你知道了<code class="du lh li lj lk b">__name__ == “__main__”</code>在Python中的用法。我希望这篇文章对你有所帮助，并让你学到一些新东西。把这篇文章分享给你的Pythoneer朋友吧。</p><h2 id="2de6" class="lp kl hi bd km mz na nb kq nc nd ne ku jx nf ng kw kb nh ni ky kf nj nk la nl bi translated"><strong class="ak">快乐编码！</strong></h2></div></div>    
</body>
</html>