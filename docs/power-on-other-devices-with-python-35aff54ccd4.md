# 使用 Python 启动其他设备

> 原文：<https://medium.com/codex/power-on-other-devices-with-python-35aff54ccd4?source=collection_archive---------5----------------------->

![](img/d1bcab78ddf46386ffb51f59ea1cd594.png)

这是一个非常简洁的小功能，没有多少人知道，叫做 Wake-On-Lan (WoL)。它内置于许多台式机和笔记本电脑中，据我所知，还有一些更现代的智能电视。但它究竟是什么呢？

WoL 是一种保持设备网卡开启的功能，具有一些备用电源，允许我们向它发送消息。这种特定的消息被称为“魔术包”，当设备收到魔术包时，它将通电。

在开始为此编写非常(我是说非常)短的 python 代码之前，有几件事情需要检查。首先，确保你想玩的设备有 WoL 功能，我建议先用 PC/笔记本电脑试试。为此，您需要在启动时进入设备 BIOS。在 BIOS 中，您需要导航到电源管理部分，查找 Lan 唤醒设置并启用它。它也可以被称为 PCIe/PCI，所以也要注意，有时会出现在网络或 CPU 电源管理设置下，这完全取决于您使用的主板品牌。如果你很难找到它，在网上搜索你的主板，可能会更容易找到去哪里。

接下来，有几件事要在设备上检查。

→需要禁用快速引导/启动

→在设备管理器中，导航到您的网卡，双击它并进入电源管理，确保启用“允许此设备唤醒计算机”和“仅允许魔术包唤醒计算机”

→然后在高级下启用“魔术包唤醒”和“模式匹配唤醒”

当您的另一个设备打开时，您可能还想记下 mac 地址和本地 IP 地址。最简单的方法是打开一个命令提示符终端，键入' ipconfig/all' + enter。您将查找与您刚才查看的网卡名称相匹配的部分。从这里记下物理地址和 IPv4 地址，接下来会用到它们。物理地址将由几个“-”符号分隔，当您写下它时，您应该用“:”替换它们。

一旦这些都完成了，你就可以关闭设备，回到你想要运行 python 脚本的机器上。

好了，现在是代码的时间了！您将需要 pip 安装一个名为“wakeonlan”的库。

```
pip install wakeonlan
```

由此我们只对一种叫做“发送魔术包”的方法感兴趣:

```
from wakeonlan import send_magic_packet
```

接下来，我们想要为我们想要控制的设备创建一个字典。这实际上还将包含另一个字典来存储之前记下的 mac 地址和 IP 地址。

```
devices = {
   'my_pc':{'mac':'YOUR MAC ADDRESS','ip_address':'YOUR IP'}
}
```

您可以在这个字典中添加任意多的设备，只要遵循相同的格式。

现在我们将编写一个小函数来发送我们的魔法包！

```
def wake_device(device_name):
   if device_name in devices:
      mac,ip = devices[device_name].values()
      send_magic_packet(mac,ip_address=ip)
      print('Magic Packet Sent')
   else:
      print('Device Not Found')
```

就这么简单！就像这样调用你的函数:

```
wake_device('my_pc')
```

您的设备应该会打开！

这就是唤醒设备的背景。有趣的部分是真正把它投入使用，并使它成为你一天中有用或方便的一部分。例如，您可能想要添加一个很酷的方式来激活该功能，也许可以查看我关于 fire tv 手势控制的文章，您可以调整输出来打开不同的设备！也许你在家里有服务器，当你离开家的时候你想打开它，或者当你回家的时候你想打开它。要做到这一点，请查看我的文章，当你离开房间时自动锁定电脑，这可以很容易地改变为在你离开或返回时打开一个设备！

我希望你觉得这是有帮助的和有趣的！我认为这是一个非常酷的功能！