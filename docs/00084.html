<html>
<head>
<title>Invoking a lambda from a lambda</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从lambda调用lambda</h1>
<blockquote>原文：<a href="https://medium.com/codex/invoke-a-second-lambda-from-an-existing-aws-lambda-using-python-2de8ee4b8cc9?source=collection_archive---------0-----------------------#2020-07-13">https://medium.com/codex/invoke-a-second-lambda-from-an-existing-aws-lambda-using-python-2de8ee4b8cc9?source=collection_archive---------0-----------------------#2020-07-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d084" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用python进行AWS lambda同步和异步调用</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a6d79bba612bef9c0f74cce753782770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vNwFjdu1ckII4X20"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">伊恩·巴塔格利亚在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b7fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注:非会员也可在</strong><a class="ae jn" href="https://dineshkumarkb.com/tech/invoking-a-lambda-from-a-lambda/" rel="noopener ugc nofollow" target="_blank"><strong class="jq hj">https://dineshkumarkb . com/tech/invoking-a-lambda-from-a-lambda/</strong></a><strong class="jq hj">获取本文。</strong></p><p id="db8c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将在这里讨论如何使用python从一个lambda函数调用第二个lambda函数，并将数据传递给同一个函数。</p><p id="2f5c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面是从现有lambda函数调用第二个lambda函数的boto3方法签名。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="196b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/lambda.html#Lambda.Client.invoke" rel="noopener ugc nofollow" target="_blank">https://boto 3 . Amazon AWS . com/v1/documentation/API/latest/reference/services/Lambda . html # Lambda。Client.invoke </a></p><p id="e879" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以调用aws lambda函数</p><ol class=""><li id="572d" class="km kn hi jq b jr js ju jv jx ko kb kp kf kq kj kr ks kt ku bi translated"><strong class="jq hj">同步</strong>(并等待响应)或</li><li id="de65" class="km kn hi jq b jr kv ju kw jx kx kb ky kf kz kj kr ks kt ku bi translated"><strong class="jq hj">异步</strong>。</li></ol><p id="2343" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要异步调用函数<strong class="jq hj"/>，将<code class="du la lb lc ld b"><em class="le">InvocationType</em></code>设置为<code class="du la lb lc ld b">Event.</code></p><blockquote class="lf lg lh"><p id="da60" class="jo jp le jq b jr js ij jt ju jv im jw li jy jz ka lj kc kd ke lk kg kh ki kj hb bi translated">事件—异步调用函数。API响应只包含一个状态代码。</p></blockquote><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="71f2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当调用类型被设置为Event时，调用lambda不期望来自被调用lambda的响应。它只是触发并继续处理代码的其他部分。这可以在第二个lambda执行一些耗时的操作时使用，比如创建一个aws sagemaker notebook实例，并等待它的状态变为InService，这大约需要2分钟。</p><p id="cfac" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要同步调用功能<strong class="jq hj"/>，将<em class="le">请求响应</em>设置为<code class="du la lb lc ld b">Event.</code></p><blockquote class="lf lg lh"><p id="6c18" class="jo jp le jq b jr js ij jt ju jv im jw li jy jz ka lj kc kd ke lk kg kh ki kj hb bi translated">RequestResponse(默认)—同步调用函数。保持连接打开，直到函数返回响应或超时。API响应包括函数响应和附加数据。</p></blockquote><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="9025" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当调用lambda需要来自被调用lambda的确认时，lambda调用可以是同步的。如果操作成功，服务将发回以下HTTP响应。</p><p id="1eb3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于<code class="du la lb lc ld b">RequestResponse</code>调用类型，这个状态代码是200。对于<code class="du la lb lc ld b">Event</code>调用类型，这个状态代码是202。对于<code class="du la lb lc ld b">DryRun</code>调用类型，状态码是204。</p><p id="1009" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有效载荷包含从lambda 1到lambda 2共享的数据。有效负载应该是json对象类型，可以从lambda 2中检索，如下所示。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="5f7f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://docs.aws.amazon.com/lambda/latest/dg/API_Invoke.html" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/lambda/latest/DG/API _ invoke . html</a></p></div></div>    
</body>
</html>