<html>
<head>
<title>Getting started with Pydantic, a Python data validation library.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python数据验证库Pydantic入门。</h1>
<blockquote>原文：<a href="https://medium.com/codex/getting-started-with-pydantic-as-a-data-validation-tool-in-api-development-2155deef37c4?source=collection_archive---------3-----------------------#2022-01-13">https://medium.com/codex/getting-started-with-pydantic-as-a-data-validation-tool-in-api-development-2155deef37c4?source=collection_archive---------3-----------------------#2022-01-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5eae519a150d9b04a53cbd2106e69cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*20rcBdcpk87QxRj0dtPdOg.jpeg"/></div></div></figure><p id="4f44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为一名web/移动开发者，你在开发全栈应用程序时会遇到API，因为它们无处不在。每次你在rideshare应用程序上检查你的位置时，发生的事情是rideshare服务(客户端)从第三方应用程序(如谷歌地图API)请求你的当前位置。因此，我们的位置是实时的，因为谷歌地图有一些rideshare应用程序可能没有的位置数据，因为它会占用大量资源，所以他们以API的形式外包。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/346d9ff6209062894bf1abf580ac635e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JwdSf5HMOiEsfRxMh1yqg.png"/></div></div></figure><p id="c4af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当你想通过你的社交媒体(Twitter、脸书、谷歌、Github)登录不同的应用时，你也可以与API交互。此选项比手动使用您的凭据登录更安全，也更方便。API在电子商务应用中也很突出，在处理服务支付时，它们经常使用stripe、Paypal、Paystack等支付解决方案</p><h1 id="2b85" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">什么是API？</h1><p id="95eb" class="pw-post-body-paragraph iq ir hi is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn hb bi translated">API充当两台机器(通常是一台客户机和一台服务器)之间的中间人，允许它们相互通信。正如你所看到的，API在任何地方都被使用，作为一名开发人员，掌握它是一项非常重要的技能。</p><p id="be8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本文中，我们将介绍如何使用python数据验证库pydantic处理客户端请求的数据。</p><p id="c33d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当创建API时，您需要控制发送的信息，以避免错误的数据输入(例如，客户端可以发送一个空字段作为名称字段，或者一个字符串格式作为数字字段)，方法是将它强制放入一个模式中。模式设计数据应该是什么样子，这样客户端就可以给它需要的信息，除非它抛出一个错误。Python有一个名为pydantic的数据验证库来解决这个问题。</p><p id="9113" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">“Pydantic是一个使用python类型注释的数据验证和设置管理”——<a class="ae kx" href="https://pydantic-docs.helpmanual.io" rel="noopener ugc nofollow" target="_blank">Pydantic官方文档</a>。Pydantic确保发送或接收的数据是预期的，除非它返回一个非常友好的错误消息(我们都很感激😂❤️).</p><p id="56a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> Pydantic vs Python数据类</strong></p><p id="ab0f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Python数据类是将python类编写为数据容器的一种方式。它们以一种更高效、更优雅的方式保存数据，而不必编写如此多的模板代码，也不必初始化python类中的每个参数。让我们通过为电子商务应用程序创建一个产品类，来看看如何根据python数据类构造一个常规python类:</p><p id="0951" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个常规的Python类:</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="ky kz l"/></div></figure><p id="4807" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">python数据类:</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="ky kz l"/></div></figure><p id="7b2b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从这个例子中，你可以看到有更少的样板文件和更严格的DRY(不要重复自己)概念的应用。然而，与Pydantic不同，Python数据类不支持类型或数据验证。换句话说，要开始使用pydantic，您需要将它安装到您的虚拟机中。</p><pre class="jp jq jr js fd la lb lc ld aw le bi"><span id="b614" class="lf ju hi lb b fi lg lh l li lj">pip install pydantic </span></pre><p id="5a3b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要使用pydantic，您必须导入BaseModel，然后在您的类中将其作为参数传递。</p><figure class="jp jq jr js fd ij"><div class="bz dy l di"><div class="ky kz l"/></div></figure><p id="635c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pydantic检查给定的数据是否与描述的模式匹配，如果匹配。它返回数据，否则会引发一个错误。如果字典中的price字段被注释掉，就会出现这种错误。</p><pre class="jp jq jr js fd la lb lc ld aw le bi"><span id="edbc" class="lf ju hi lb b fi lg lh l li lj">raise validation_error<br/>pydantic.error_wrappers.ValidationError: 1 validation error for Product<br/>price<br/>  field required (type=value_error.missing)</span></pre><p id="ec6a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Pydantic是一个非常强大的数据解析和验证库。这只是一个如何开始使用Pydantic的演练，要更深入地了解pydnatic如何工作，您可以查看他们的官方文档。如果你喜欢这篇文章，请给它一堆掌声，并分享它谢谢:)❤️.</p></div></div>    
</body>
</html>