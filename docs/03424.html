<html>
<head>
<title>Rust — A Beginner Cheat Sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rust —初学者备忘单</h1>
<blockquote>原文：<a href="https://medium.com/codex/rust-a-beginner-cheat-sheet-8fd7b0ce49de?source=collection_archive---------4-----------------------#2021-09-02">https://medium.com/codex/rust-a-beginner-cheat-sheet-8fd7b0ce49de?source=collection_archive---------4-----------------------#2021-09-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="bfa9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">rustup和cargo入门</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6e0a3a82caefff58bd6226c0249b7372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*swrKPfqVMkm7a4Ui"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jn" href="https://unsplash.com/@zmachacek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">zdenk macha ek</a>拍摄的照片</figcaption></figure><h1 id="9c4e" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">为什么生锈？</h1><p id="1b8b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated"><a class="ae jn" href="http://rust-lang.org" rel="noopener ugc nofollow" target="_blank"> Rust </a>通常被称为<em class="lc">系统级编程语言</em>，但是<a class="ae jn" href="http://rust-lang.org" rel="noopener ugc nofollow" target="_blank">rust-lang.org</a>上的标语以更好的方式抓住了Rust的美——</p><blockquote class="ld le lf"><p id="d48a" class="kg kh lc ki b kj lg ij kl km lh im ko li lj kr ks lk ll kv kw lm ln kz la lb hb bi translated">一种让每个人都能构建可靠而高效的软件的语言。</p></blockquote><p id="e076" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">我喜欢rust，它是强大和安全的结合，所有权模式消除了许多常见的错误，这一事实非常有吸引力。但是这种所有权模式带来了一些精神上的负担，对于那些来自C#、Java和JavaScript等语言的人来说，这可能是一座有点陡峭的山。</p><p id="1066" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">这一系列文章旨在以简单的备忘单风格介绍Rust及其工具链。为了更深入地了解—</p><ul class=""><li id="0884" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">Rust网站的<a class="ae jn" href="https://www.rust-lang.org/learn" rel="noopener ugc nofollow" target="_blank">学习部分</a>——这里有Rust书籍、课程、<em class="lc"> Rust by Example </em>以及更多帮助你前进的资源。</li><li id="2962" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">赫伯特·沃尔弗森(Herbert Wolverson)的《生锈的手》(Hands on Rust)是真正帮助我度过学习难关的书(你可以开发2D游戏，有什么不喜欢的呢？)</li></ul><p id="db1f" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">如果你还在阅读，那么你会变得迟钝，所以让我们开始吧！</p><p id="f97f" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">[更新— <a class="ae jn" href="https://gian-lorenzetto.medium.com/rust-package-management-ad4fd85026fc" rel="noopener">第二部分，包管理</a>上线！]</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="5a5c" class="jo jp hi bd jq jr mj jt ju jv mk jx jy io ml ip ka ir mm is kc iu mn iv ke kf bi translated">安装铁锈</h1><p id="bff2" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">有几种方法可以让Rust安装在你的系统上(你甚至可以不安装来尝试一下)。有两个关键部分需要了解—</p><ul class=""><li id="7c62" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">rustup是一个cli工具，您将使用它来与编译器工具链交互并管理它(您不需要经常使用它)。</li><li id="db2c" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">cargo 是管理项目、板条箱(rust packages)的cli，也是处理rust项目时最常使用的工具。</li></ul><p id="4979" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">你可以从<a class="ae jn" href="https://www.rust-lang.org/learn/get-started" rel="noopener ugc nofollow" target="_blank">入门</a>部分的<a class="ae jn" href="https://www.rust-lang.org" rel="noopener ugc nofollow" target="_blank"><em class="lc">rust-lang.org</em></a>上获得Rust，但是殊途同归都是相同的命令行脚本和最简单(也最容易记住！)方法是访问<a class="ae jn" href="http://rustup.rs" rel="noopener ugc nofollow" target="_blank"> RustUp.rs </a>并遵循安装说明。一旦你运行了安装程序，你应该已经安装了<em class="lc"> rustup </em>。尝试以下命令—</p><ul class=""><li id="36c9" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">测试您的安装<br/> <code class="du mo mp mq mr b">$ rustup -v</code></li><li id="9b33" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">检查更新<br/> <code class="du mo mp mq mr b">$ rustup check</code></li><li id="98fe" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">更新你的安装<br/>T2】</li></ul><p id="af52" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">既然你已经带着铁锈上路了，让我们继续前进到<em class="lc">货物</em>上。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="80de" class="jo jp hi bd jq jr mj jt ju jv mk jx jy io ml ip ka ir mm is kc iu mn iv ke kf bi translated">cargo——Rust构建工具和包管理器</h1><p id="5d82" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">货物cli工具是你最常用的工具。它负责运行构建、运行测试和准备您的项目发布。你也可以在与Rust包装系统交互时使用它——在Rust中，包装被称为<em class="lc">板条箱</em>，你可以在<a class="ae jn" href="https://crates.io" rel="noopener ugc nofollow" target="_blank">板条箱. io </a>中看到完整的板条箱注册表。</p><p id="0045" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">首先，让我们创建一个项目，探索一些常见的<em class="lc">货物</em>选项。</p><h2 id="3694" class="ms jp hi bd jq mt mu mv ju mw mx my jy kp mz na ka kt nb nc kc kx nd ne ke nf bi translated"><strong class="ak">脚手架新项目</strong></h2><p id="01b0" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo new {project_name}</code></p><ul class=""><li id="1e5a" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">使用默认项目结构、<em class="lc"> main.rs </em>文件和<em class="lc"> Cargo.toml </em>项目文件创建一个新的<em class="lc"> Hello World </em>应用程序。</li><li id="e652" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">默认情况下，这是一个<em class="lc">二进制应用程序(</em>如果你正在开发一个库/箱，有一个<code class="du mo mp mq mr b">--lib</code>选项)。</li><li id="f0e4" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">默认情况下，Git储存库被初始化(这可以通过<em class="lc">cargo</em>的其他开关定制/禁用)</li><li id="9b36" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">最好<strong class="ki hj">坚持用_snake_case_来命名</strong>，因为这是Rust所期望的。</li></ul><h2 id="9e68" class="ms jp hi bd jq mt mu mv ju mw mx my jy kp mz na ka kt nb nc kc kx nd ne ke nf bi translated"><strong class="ak">货物基础知识</strong></h2><p id="9bdc" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo check</code></p><ul class=""><li id="03b8" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">验证程序结构——这不会编译你的程序，但会确保你的项目文件结构是正确的</li></ul><p id="21ab" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo build</code></p><ul class=""><li id="3da3" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">在<strong class="ki hj">调试</strong>模式下构建应用程序</li><li id="b33c" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">如果它不存在，这将在项目的根目录下创建一个<em class="lc">目标</em>文件夹</li><li id="a406" class="lo lp hi ki b kj lx km ly kp lz kt ma kx mb lb lt lu lv lw bi translated">将<code class="du mo mp mq mr b">--release </code>开关添加到发布版本的货物中(见下文)</li></ul><p id="e36a" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo clean</code></p><ul class=""><li id="fab3" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">清理(即删除)构建工件，就像构建过程中产生的任何二进制文件一样</li></ul><p id="0276" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo run</code></p><ul class=""><li id="3315" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">运行程序—如果尚未构建应用程序，这也将构建应用程序</li></ul><p id="4b35" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo test</code></p><ul class=""><li id="003d" class="lo lp hi ki b kj lg km lh kp lq kt lr kx ls lb lt lu lv lw bi translated">运行项目中存在的任何测试(默认支架中没有任何测试)</li></ul><h2 id="a50f" class="ms jp hi bd jq mt mu mv ju mw mx my jy kp mz na ka kt nb nc kc kx nd ne ke nf bi translated"><strong class="ak">货物<em class="ng">目标</em> —发布vs调试</strong></h2><p id="d042" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">默认情况下，<code class="du mo mp mq mr b">cargo build</code>和<code class="du mo mp mq mr b">cargo run</code>将以调试模式构建项目。要构建发布到生产(或类似生产)环境的项目，将<code class="du mo mp mq mr b">--release</code>开关添加到<em class="lc"> cargo — </em></p><p id="b13e" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo [build|run] --release</code></p><p id="9f5b" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">当您构建一个Rust项目时，不管结果如何，都会创建一个目标文件夹，其下是相关的构建配置。在调试中构建时，文件夹结构看起来像这样—</p><p id="f1ff" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><em class="lc">…/project _ root/</em><strong class="ki hj"><em class="lc">目标/调试</em></strong><em class="lc">/{构建工件} </em></p><p id="f505" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">Rust是一种编译语言，这意味着默认情况下构建工件将为您的机器架构进行编译。Rust还支持交叉编译，允许您构建在其他架构上执行的二进制文件。</p><p id="3dff" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">比如<a class="ae jn" href="https://www.rust-lang.org/what/wasm" rel="noopener ugc nofollow" target="_blank"> Rust编译成WebAssembly </a>！这超出了本备忘单的范围，但是您可以向货物构建命令添加一个目标，如下所示</p><p id="0b6c" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo build --release --target=wasm32-unknown-unknown</code></p><p id="1e03" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">这将创建以下文件夹结构(注意<code class="du mo mp mq mr b">--release</code>开关和产生的子文件夹)—</p><p id="f65c" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><em class="lc">…/project _ root/</em><strong class="ki hj"><em class="lc">target/was m32-unknown-unknown/release</em></strong><em class="lc">/{ build artifacts }</em></p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="5c87" class="jo jp hi bd jq jr mj jt ju jv mk jx jy io ml ip ka ir mm is kc iu mn iv ke kf bi translated">代码格式</h1><p id="f5f2" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Rust有一个内置的格式化程序，你可以<a class="ae jn" href="https://github.com/rust-lang/rustfmt" rel="noopener ugc nofollow" target="_blank">在这里</a>读到。一旦安装好，你就可以运行—</p><p id="7f35" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo fmt</code></p><p id="5775" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">这将把你的代码格式化为<a class="ae jn" href="https://github.com/rust-dev-tools/fmt-rfcs/blob/master/guide/guide.md" rel="noopener ugc nofollow" target="_blank"> Rust编码标准</a>。如果您想通过在项目的根目录下添加一个<em class="lc"> rustfmt.toml </em> 文件来定制样式，可以对其进行配置。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="e919" class="jo jp hi bd jq jr mj jt ju jv mk jx jy io ml ip ka ir mm is kc iu mn iv ke kf bi translated">Clippy —代码提示和建议</h1><p id="d473" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Rust有一个名为<em class="lc"> Clippy </em>的内置代码提示和指导工具。你可以在<a class="ae jn" href="https://github.com/rust-lang/rust-clippy" rel="noopener ugc nofollow" target="_blank"> Clippy的GitHub页面</a>上了解更多，但是运行<em class="lc"> clippy </em>将会分析你的代码并为你提供建议和改进</p><p id="1a37" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><code class="du mo mp mq mr b">$ cargo clippy</code></p><p id="8dd0" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">你可以用几种方式来配置Clippy<a class="ae jn" href="https://github.com/rust-lang/rust-clippy#configuration" rel="noopener ugc nofollow" target="_blank">，但是作为一个初学者，我发现增加Clippy建议的严格程度真的很有帮助。您可以通过在您的<em class="lc"> main.rs — </em>中添加以下代码作为第一行来实现这一点</a></p><pre class="iy iz ja jb fd nh mr ni nj aw nk bi"><span id="8e18" class="ms jp hi mr b fi nl nm l nn no">#![warn(clippy::all, clippy::pedantic)]</span></pre><p id="ce11" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated"><em class="lc"> Clippy的</em>建议有许多级别，但默认和<em class="lc">学究式</em>级别已经过正确性审查，通常是足够的。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><h1 id="6eb4" class="jo jp hi bd jq jr mj jt ju jv mk jx jy io ml ip ka ir mm is kc iu mn iv ke kf bi translated">摘要</h1><p id="657d" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">你现在应该能够创建一个新的Rust项目，并且对Rust工具链、linter和建议有了一个很好的想法(嗨，Clippy！).</p><p id="04ec" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">虽然Rust标准库很棒，但是您会想要利用Rust社区贡献的许多第三方库。</p><p id="fa72" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">那么接下来，我们来看看<a class="ae jn" href="https://gian-lorenzetto.medium.com/rust-package-management-ad4fd85026fc" rel="noopener"> Rust的包管理</a>。</p><p id="01fd" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp lj kr ks kt ll kv kw kx ln kz la lb hb bi translated">保持生锈！</p></div></div>    
</body>
</html>