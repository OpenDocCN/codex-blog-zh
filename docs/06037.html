<html>
<head>
<title>Complete guide on how to use AWS Lambda &amp; DynamoDB for web scraping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于如何使用AWS Lambda &amp; DynamoDB进行网页抓取的完整指南</h1>
<blockquote>原文：<a href="https://medium.com/codex/complete-guide-on-how-to-use-aws-lambda-dynamodb-for-web-scraping-bb95f9f038b?source=collection_archive---------2-----------------------#2022-04-07">https://medium.com/codex/complete-guide-on-how-to-use-aws-lambda-dynamodb-for-web-scraping-bb95f9f038b?source=collection_archive---------2-----------------------#2022-04-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8b80" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据收集是数据科学中的一个必要步骤。你既可以下载预先收集的数据，也可以自己收集。收集数据的方式之一是<a class="ae jd" rel="noopener" href="/codex/whats-and-how-s-about-web-scraping-baaf9b619ec2">网络抓取</a>。通常，这需要您定期运行代码。为此，您有两个选择。首先，你可以每小时坐下来运行你的代码。第二，你可以在云平台上上传并运行你的代码。第一种选择会更快更容易实现，但第二种选择更可靠。所以我建议你试试云服务之一的亚马逊网络服务(<a class="ae jd" href="https://aws.amazon.com" rel="noopener ugc nofollow" target="_blank"> AWS </a>)。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/de11eafb40df7a629b146ac3455eb941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cjy02IB8YkaKTl82"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">照片由<a class="ae jd" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·威迪格</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="2fbc" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">什么是AWS？</h1><p id="33e9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">AWS是亚马逊支持的云计算平台，包括基础设施即服务(IaaS)、平台即服务(Paas)和打包软件即服务(SaaS)产品<a class="ae jd" href="https://www.guru99.com/what-is-aws.html" rel="noopener ugc nofollow" target="_blank">【5】</a>。简单地说，AWS让你在他们的服务器上运行复杂的程序或服务，这样你就不需要一台尖端的计算机。有许多服务可供你选择。其中，今天我们需要Lambda、EventBridge、Dynamodb和Identity&amp;Access Management(IAM)来进行web抓取和保存数据。</p><h1 id="b6e7" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">什么是AWS Lambda，EventBridge，DynamoDB，IAM</h1><h2 id="17ed" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">希腊字母的第11个</h2><p id="3705" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">简而言之，AWS Lambda允许你编写或上传代码和依赖项，这样你就可以使用亚马逊的基础设施来运行代码，而不是用你的计算机。这样做的好处是，您可以运行任何代码，而不管您的计算机具体情况如何，并且不需要打开计算机来运行您的代码。此外，您可以将它与其他AWS服务集成，以完成更高级的工作。</p><p id="b777" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，它设置60秒的运行时间，但这通常不足以进行网络抓取。幸运的是，它允许您将时间延长到最长15分钟，因此当您稍后编写代码时，您需要小心不要让您的代码超过这个限制。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ll"><img src="../Images/850ad42e169d51b52e57ba3d7cab0a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MnpKIxthlugQCbp1j-mL4A.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">AWS Lambda主页</figcaption></figure><h2 id="a90b" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">事件桥</h2><p id="57da" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在官方文档上，它说AWS EventBridge允许您将应用程序与来自各种来源的数据连接起来。这意味着它实时检测来自其他服务的事件，并在检测到事件时激活操作。因此，使用这个服务，您可以轻松地在服务之间建立连接或监控您的流程。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lm"><img src="../Images/9272c5515211adeb9f9886f1f77bc4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cH_6gpZRzniAks2yJZyIYQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">AWS EventBridge主页</figcaption></figure><h2 id="3ec3" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">DynamoDB</h2><p id="b9fc" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Dynamodb是一个NoSQL数据库服务，您可以从AWS使用它。因为AWS负责数据库的配置过程，所以您可以轻松地创建表、存储数据和查询行。使用它的好处之一是可伸缩性，因为它使用云来存储数据。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ln"><img src="../Images/d56969c7d9661e2998e88bddfd98cc89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I0MwhJNuN0_mOpjm-bgdcQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">AWS DynamoDB主页</figcaption></figure><h2 id="93c3" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">InternationalAssociationofMachinists国际机械师协会</h2><p id="68c2" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">但是，出于安全原因，默认情况下不能从其他服务访问这些服务。您需要首先从IAM创建角色，并将这些角色分配给每个服务，以便与其他服务进行连接。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lo"><img src="../Images/e0ad6bd762f3cbc04296f95f51404886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-jv4BWPW2rp37CsxZb--5g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">AWS IAM主页</figcaption></figure><h1 id="082b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">如何使用这些来抓取网页</h1><p id="4566" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在我们进入步骤之前，这篇文章写于2022年4月，AWS网站可以随时更改。因此，你应该知道，如果你在遥远的将来读到这篇文章，下面的过程可能是不准确的。此外，在下面的步骤中，我将使用Python 3.9进行网络抓取。</p><h2 id="7b22" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">1.构建web抓取代码</h2><p id="4bef" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">在您开始使用AWS之前，在别处构建一个有效的web抓取代码是一个好主意。这可以是Google Colab或本地IDE，具体取决于您的情况。</p><p id="3b5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面的代码是我从一个卖旧货的网站收集数据的版本。它使用sqlite3来存储数据，但稍后会更改为DynamoDB。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lp lq l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><a class="ae jd" href="https://www.daangn.com/" rel="noopener ugc nofollow" target="_blank"> Daangn </a>网站的网页抓取代码</figcaption></figure><h2 id="f5ca" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">2.在Lambda中创建函数</h2><p id="9815" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">要将代码上传到AWS服务器，首先需要在AWS Lambda中创建一个函数。</p><ol class=""><li id="fdf3" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">点击Lambda Dashboard中的“创建函数”</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/09d06a2499ba6c4c79073320a84404b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nocAr_GNnvRxWOh01KRnUg.png"/></div></div></figure><p id="8dad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.写下你的函数名并选择你的网络抓取代码的运行时间。然后，点击“创建函数”。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/d029317676cf6dc0fd740534466e9056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZmBH5Gs7ApvvY62BUnVMw.png"/></div></div></figure><h2 id="335f" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">3.修改您的代码</h2><p id="5208" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">根据您的编码方式，代码的结构可能会有所不同。但是AWS lambda要求您遵循某些规定，因此您应该相应地更改您的代码。你需要遵循的一条规则是Lambda运行单个函数。默认情况下，它被命名为lambda_handler()。所以你要么调用lambda_handler()中所有必要的函数</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mb"><img src="../Images/2a1716940210053d1140a3f3c857c99f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vf0WhSAw1xlFOfp4JceQrg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">在lambda_handler()中添加scrape()后的屏幕截图</figcaption></figure><p id="c233" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者通过在运行时设置中编辑处理程序来更改其名称。函数名前面的“lambda_function”表示python文件名。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mc"><img src="../Images/498053948151e05ef8d08ca561d70fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3M3ZCZHUbL2x_da2pSqVGQ.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es md"><img src="../Images/554d7a392a3989015c2767926b96d4d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gpi2pn-empkhSUjEU8HAbA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">更改处理程序后的样子。</figcaption></figure><h2 id="294b" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">4.添加依赖关系</h2><p id="e5d6" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">另一件需要注意的事情是，不能在AWS默认不支持的包中使用import语句。因此，您应该上传包文件和代码，以便使用导入语句。在我的例子中，要使用bs4包，</p><ol class=""><li id="5cd8" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从<a class="ae jd" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> Python包索引</a>网站下载bs4 zip文件</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es me"><img src="../Images/03a46d534a3d85bf98ecc208a90e1b81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*3q5jhuZLbzGpHYWvN06cHQ.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated"><a class="ae jd" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPI网站</a></figcaption></figure><p id="1b6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.解压文件夹&amp;找到一个包含__init__的文件夹。py文件。通常，带有包名的文件夹就是。</p><div class="jf jg jh ji fd ab cb"><figure class="mf jj mg mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><img src="../Images/5aa05e5a543b5e3014d4558252bb902d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*ovdd5V3DgR2RIT_IZCozAg.png"/></div></figure><figure class="mf jj ml mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><img src="../Images/0ad58a9fe48abd71693c5611c90736d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*eNdEYfjSFI81wlAUypH97A.png"/></div></figure></div><p id="3d7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.将依赖文件夹和代码文件一起压缩</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mm"><img src="../Images/d6cc6104187c8151cb170d0b103fe030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*JZuH4xgmk3aEnXbpRmDy-g.png"/></div></figure><p id="da73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.通过“上传自”→”上传到Lambda。zip文件"</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/7d2f0838aaaa67bc476a275bcef7b13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hoi_i2_sZdQkM3yAnhEAVw.png"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mn"><img src="../Images/57dd81e86e87cd8e7a058b191b950ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ub6vtnxOQy2YUNwHaAn05Q.png"/></div></div></figure><p id="0fe2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当一切都完成后，您可以在代码的左侧找到依赖文件。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mo"><img src="../Images/9359e53b885cc98db173b94720f1be91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wsqmHz7BcgfBuI_8NbZLbw.png"/></div></div></figure><p id="5d90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，我删除了sqlite3 import语句和相关代码，因为我打算使用DynamoDB。</p><h2 id="89d4" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">5.测试您的功能</h2><p id="49ca" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">即使您在步骤1中确认了您的代码可以工作，但是在您上次检查之后，事情发生了很大的变化。所以最好再检查一遍，你可以按照下面的步骤来做。</p><ol class=""><li id="bc57" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">选择您的功能</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/d4c51b8bc47f44b49d3665e3eb9647c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ya3fq_pliz-fJRXsxYXPkA.png"/></div></div></figure><p id="e5d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.单击测试选项卡</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/dd494cd2b63b3e903778987aed27e5b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_kzlHi99iRCSlypbGrH2g.png"/></div></div></figure><p id="a2c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.写下活动名称并选择hello-world模板。然后，省省吧。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/2539032ea56744d44d42186cb32f3606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbVL56XXotA91XytalMr-g.png"/></div></div></figure><p id="b5e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.通过单击“测试”选项卡中的“测试”来测试您的活动</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/9ac95aeaaab8576883c1c23fc179d021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GLjfIJ08XAXOysteg2ZvNA.png"/></div></div></figure><p id="cafd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.下图显示了您的活动进展情况</p><div class="jf jg jh ji fd ab cb"><figure class="mf jj mp mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><img src="../Images/3ce250ed274cdeabf8545794b6cfd45f.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*5pZmKAuuqzxE3QFVZAZ45Q.png"/></div></figure><figure class="mf jj mq mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><img src="../Images/9e832aa1a1954917b8a0e1af81371e18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*3WlaQWM4JSLVLbEqzj_6eQ.png"/></div></figure></div><p id="786c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.您也可以从“代码”选项卡→测试按钮测试您的代码</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/ea3abbaddfec6d6d3f76c8fc9f48a0c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AygPh4NicZHC3FHgnQLhfQ.png"/></div></div></figure><h2 id="fdd4" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">6.在DynamoDB中创建表</h2><p id="a600" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">既然我已经删除了存储收集到的数据的行，我需要继续工作。首先要做的是在DynamoDB中创建一个表。</p><ol class=""><li id="282a" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从DynamoDB仪表板中，单击创建表</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/23430ef8655b1bae10e7513e67c0909d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LWjHtuB3QwuQsQchQrHAkg.png"/></div></div></figure><p id="4430" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.写表名、分区键、排序键&amp;为分区和排序键选择数据类型</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mr"><img src="../Images/4f70ff1deb03e937f74b4c476932927d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5tvz5gk0hvefp0LGDE7Qkw.png"/></div></div></figure><p id="2c47" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您是DynamoDB的新手，您会想知道分区和排序键是什么。简单地解释一下，哈希函数中使用分区键来确定使用哪个分区来存储数据。相比之下，排序键用于对每个分区内的值进行排序。你可以在两种情况下使用这两个。</p><p id="c871" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，您只能使用分区键。在这种情况下，分区键在表中应该是唯一的，这样每个条目都是可区分的。因此，它在SQL表中充当主键，用于访问行。</p><p id="1c8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二，两者都可以用。在这种情况下，分区和排序键值的组合应该是唯一的。因此，有可能有相同的分区键值，除非通过不同的排序键值使组合是唯一的。</p><p id="2e43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，当您在DynamoDB中存储一个以作者和书名为关键字的图书列表时，您可以将每个作者和书名设置为分区和排序关键字。这允许你有相同的作者名，但是在同一作者下的标题应该是唯一的。所以最后，作者-标题组合对于每一行都是唯一的。</p><p id="eaa4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的例子中，我的代码从Time列中包含1的行中找到最近的ArticleNum值。因此，我将Time设置为分区键，将ArticleNum设置为排序键。</p><p id="94d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.在“设置和创建表格”下选择默认设置</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ms"><img src="../Images/04861c3d77e5dc63e152dadafcdc764c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Htpuf_j2JDWUD1ZbYp61WQ.png"/></div></div></figure><h2 id="bd9c" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">6-1.向表中添加项目</h2><p id="b875" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">这不是一个必要的步骤，但是我需要这样做，因为我的代码是这样工作的。如上所述，我的代码通过从包含“1”的行中查找最高的ArticleNum来查找最近的文章。所以我的代码不会开始，除非至少有一行给出了起点。所以我需要添加一个虚拟行。</p><ol class=""><li id="be46" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从您创建的表中单击浏览表项目</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/4b67802fa17a32c266977e0be37148bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwQeMhIiXhWCOYYGeAYi9g.png"/></div></div></figure><p id="fec4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.单击创建项目</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mt"><img src="../Images/ea3d78611990da204b4d903834ae9e7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g1rvh9BupedzIrW3oRO3Nw.png"/></div></div></figure><p id="47ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.通过单击添加新属性，输入属性名称、值和类型</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mu"><img src="../Images/e966d661944a6da6b6ba9a144d0f2097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MGQSLYANQPJJCAfa5l_kQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">381392502表示我写这个帖子时最近的一个帖子</figcaption></figure><p id="8949" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，您可以看到该项目被添加到表中。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mv"><img src="../Images/a6f61ffa74dafa5c3fc7b2a92bc7b4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_63KPyG8AS7MHVi4FJZ7lA.png"/></div></div></figure><h2 id="f50d" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">7.用Lambda函数连接DynamoDB表</h2><p id="eaf3" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">目前，您有一个web抓取功能和一个准备存储数据的表。你还没有的是两者之间的联系，你可以用boto3来实现，它允许你用Python来管理AWS服务。如果你想深入了解它的文档，请点击<a class="ae jd" href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html" rel="noopener ugc nofollow" target="_blank">链接</a>。但是如果你只是想知道如何用Lambda连接表，请看下面的代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mw"><img src="../Images/b3169ce403fa60262965171d67039d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKVUrj07ooLPqny7DEEb5g.png"/></div></div></figure><p id="4c51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从上面的代码来看，第一行意味着它将调用位于“ap-northeast-2”地区的DynamoDB服务。然后，第二行从第一行建立的连接中调用“table_name”表。</p><p id="f6ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的例子中，我在Seoul服务器上创建了我的表。这就是我将“ap-northeast-2”传递给region_name参数的原因。因此，当您在代码中应用它时，应该从表的一般信息中找到您所在的地区，并相应地进行更改。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mx"><img src="../Images/8d0355074d097d18de8deeea6b900c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*T5y9uMYhaBl8qz48n7yy4w.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">在哪里找到表格的区域</figcaption></figure><h2 id="273d" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">7-1.从Lambda函数对DynamoDB表使用查询</h2><p id="3b69" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">可以在DynamoDB表上执行的两个操作是查询和扫描。虽然它们似乎执行类似的任务，但它们之间的差异是至关重要的。</p><p id="e6b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Query直接从用作条件的分区中查找值，而Scan则从表中的每一行中查找符合条件的行。因此，查询可以保证比扫描更快的速度。所以通常建议使用查询而不是扫描，除非您不知道表的分区和排序键。你可以在Rafal Wilinski写的Dynobase <a class="ae jd" href="https://dynobase.dev/dynamodb-scan-vs-query/" rel="noopener ugc nofollow" target="_blank">文章</a>中找到更详细的解释。要简要了解如何使用python进行查询，请参见下面的代码。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es my"><img src="../Images/87893a0c6d3e47373ed7e6098ccfe026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*7rhBqPUz269Vp4_8Kl8E1g.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">需要从boto3.dynamodb.conditions导入密钥进行查询</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mz"><img src="../Images/fd250158152ce3e6f328268c229ab5ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yh4GrVLWk0DUGCWWuNLlDQ.png"/></div></div></figure><p id="7bf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如您所见，代码非常简单。第一行代码返回Time列中值为1的每一行，Time列是分区键。所以我在我的例子中使用了eq，但是如果你希望一个条件是一个取值范围，你可以用le，lt，ge，gt，begins_with，between代替eq。每个le、lt、ge、gt代表小于或等于、小于、大于或等于、大于。然后，我将ScanIndexForward设置为False，以降序对返回的行进行排序。默认值为True，按升序排列。</p><p id="280c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第二行中，["Items"]允许您访问查询返回的行列表。然后，从每一行中，您可以使用列名来访问它的值。在我的例子中，我只从第一项中检索值，因为我只需要最高的ArticleNum。</p><p id="4fbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于您可以使用的功能的更详细的解释，请查看Boto3 <a class="ae jd" href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/dynamodb.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="a5ee" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">7-2.授予访问权限</h2><p id="942c" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">即使您正确地编写了每一行代码，它也不会工作，除非您提供对lambda函数的访问权来处理该表。</p><ol class=""><li id="18fd" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从IAM的策略选项卡中，单击创建策略</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/b43c6f44c0923283da08009e62e23760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4KuqF9D2Z5jvZ8o01AoAQ.png"/></div></div></figure><p id="bac3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.在第一页中，选择JSON，复制并粘贴以下代码，并根据表中的常规信息修改资源参数</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="lp lq l"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">要粘贴到策略中的代码。123456789012代表账户ID。您应该用自己的名称替换那个和REGION _NAME。</figcaption></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es na"><img src="../Images/d17f6b77520b20a251ab4613a5e2a210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U70M40vWf4ESSD1ZdW58mg.png"/></div></div></figure><p id="3b8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.跳过添加标签</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nb"><img src="../Images/123ef6de04248581203275ab9a73a994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*urfSEeqr_zpfUAeBjm7eOg.png"/></div></div></figure><p id="8428" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.写下策略名称和描述，然后单击创建策略</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nc"><img src="../Images/2abf25080cfc5e007eea2d6784c9f17a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*PMfdP9jXtUZDgorv9bV9WQ.png"/></div></figure><p id="3a54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.从IAM下的角色选项卡中，单击创建角色</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nd"><img src="../Images/975f53a4a0d757a05977befb964f0c18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y7RqbGiqAcLr6O-cq9iEmg.png"/></div></div></figure><p id="21c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.选择AWS服务和Lambda</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ne"><img src="../Images/f301d24002aec131d9b70d1a3259c2d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2l_JWTE5ygJVqPDTZ8Oahg.png"/></div></div></figure><p id="352f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.搜索并单击您在步骤4中创建的策略的复选框</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/19045e9fe3fd257d304c8abf4be8ce2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-NwRZV9hNZ0G1dtxrnLCA.png"/></div></div></figure><p id="f8d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.键入角色名称并创建角色</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nf"><img src="../Images/dd47aaea127300c7b80e25ed70d0f00a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1QCd716Lc2MyNpTVNpkMA.png"/></div></div></figure><p id="24bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.从您为网页抓取创建的功能中，单击配置→权限→编辑</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ng"><img src="../Images/ac2afbb15e5de5b1674d7c65ec5a8c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ObxmEMIMroqq9Sxal3V5lg.png"/></div></div></figure><p id="a350" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.将超时延长到15分钟&amp;选择您在步骤8中创建的角色</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nh"><img src="../Images/e01a1955287dce96b9b0e12a4efa37f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*7n45PYjilI6WMxpnRcNL3A.png"/></div></figure><p id="de5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">11.然后，当您运行代码时，您可以通过检查从表中检索的值来确认连接已建立</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/d1ae61e6ea70b572862760d55baf2c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3jgtDGftzfMjxJWl7MrGrg.png"/></div></div></figure><h2 id="eca2" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">7-3.确认你的网页抓取工作</h2><p id="8834" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">最后，现在是检查整个过程的时候了:从抓取网页数据到将数据存储到DynamoDB。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ni"><img src="../Images/af8fba69436e87f432e5ec0f8fdf5dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dbCP-Ad1DEwiZEXxZD-qDw.png"/></div></div></figure><p id="33aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当它按预期工作时，您可以看到行被添加到表中。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nj"><img src="../Images/7da55e43eb51360f4ac91e72b2287c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMgrYyO5aVgZAwBulYPd5w.png"/></div></div></figure><h2 id="7343" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">8.从EventBridge调度Lambda函数</h2><p id="17e3" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">最后，你需要安排你的函数自动运行。</p><ol class=""><li id="c4de" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从EventBridge中，单击创建规则</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/0fb1fa16520acd10df78be349719f498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W7CceIuhp6o1d1kjNP0HUQ.png"/></div></div></figure><p id="b133" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.键入规则名称和描述，并在规则类型下选择时间表</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/585b908c394df237182f0f245933bb9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VLMepbX7XXYxb30I06z7dQ.png"/></div></div></figure><p id="174f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.在计划模式下定义您的计划</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nk"><img src="../Images/0cb22af3524303c2e944860760032e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*_FtZSba7z3FJJYvD67fChg.png"/></div></figure><p id="f727" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.在目标类型下选择AWS服务&amp;在选择目标下选择Lambda函数和您的web抓取函数</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nl"><img src="../Images/32ec40ed018806713230ad69e670ed98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3QdusBVj4N25BKMDBVJeeA.png"/></div></div></figure><p id="3a16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.跳过第4步，创建您的规则</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nm"><img src="../Images/fd1eb9c53c1b949a5504ab045de82ff4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*UGlvJVsmd0p-kivI5UfNaQ.png"/></div></figure><h2 id="267d" class="kx jv hi bd jw ky kz la ka lb lc ld ke iq le lf ki iu lg lh km iy li lj kq lk bi translated">9.检查调度是否有效</h2><p id="6bdf" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">当然，在你添加一个特性后，你需要检查它是否工作。你可以从CloudWatch查看这个。</p><ol class=""><li id="653b" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从CloudWatch转到日志组</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/ce907fbba082386b82ca0531b56c6248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Z4pdF-cdCLspLEv1yaY6A.png"/></div></div></figure><p id="e0c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.选择您在Lambda中创建的函数</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/966a48d1c4b1ccab9f942dacf1b63931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VuR7yIX46KJxNnYIFtN0WA.png"/></div></div></figure><p id="6da0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.查找与EventBridge连接相关的日志流。如果你按照步骤，它会是最新的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nn"><img src="../Images/40a528a164a3e9bd438d2c00df884d8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NLVfqJCUzdIckJbSIuz61Q.png"/></div></div></figure><p id="3fa0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.查看日志事件中的时间戳和消息，以确认EventBridge是否成功工作</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es no"><img src="../Images/c36fea1042ee099973f6c59d465d4391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lgIPuHK5Z88vfUi_e3WLNg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">为了检查EventBridge是否工作，我每分钟运行一次代码</figcaption></figure><h1 id="2fa0" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">从DynamoDB导出数据</h1><p id="2cd9" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">一旦你收集了大量的数据，现在是时候下载它们进行检查了。其中一个方法是通过S3。</p><ol class=""><li id="b2f2" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">从S3存储桶中，单击创建存储桶</li></ol><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/9b901dff91e5aa462b335784c5d34440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgRapUDHpxrfvzmHJYiXHQ.png"/></div></div></figure><p id="08a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.写下您的桶名并选择您所在的地区</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es np"><img src="../Images/ef09bfd472350ed6185395320c47af94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q8UJcl-r8jpRbV5H41RItw.png"/></div></div></figure><p id="8db5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.选择禁用ACL并阻止所有公共访问，以防其他人试图使用它。然后，单击底部的“创建”按钮。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nq"><img src="../Images/5e096b79a9b1cebd7668b3b134b5b708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z3yEmTcnqMhBxrXOBCF4VQ.png"/></div></div></figure><p id="fffe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.从数据管道服务中，单击创建新管道</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/00257f71c3de0dbf5074390e706fe97c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONsfljfLro8rErM0DUgWTw.png"/></div></div></figure><p id="2361" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5.键入管道的名称，选择“将DynamoDB表从源导出到S3 ”,并记下参数。对于输出文件夹，您应该选择您在步骤3中创建的bucket，并在最后键入'/exports '来创建一个文件夹。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nr"><img src="../Images/bc272ebcd14b23b4203d7b8e446b9f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_dbpCHAUoty2hoY2M2qYPQ.png"/></div></div></figure><p id="2953" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">6.在“管道配置”下，为日志选择相同的存储桶，并在末尾键入“/logs”。然后，在标签下，在Key下键入“dynamodbdatapipeline ”,在Value下键入“true”。完成设置后，单击激活。这需要一段时间。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ns"><img src="../Images/31b9e53a86a74b4be2463ea79422d2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*naVd7wkJ9q1CIsJJrXKVNg.png"/></div></div></figure><p id="64ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">7.现在，你需要做的就是导出。所以转到您想要提取的表。然后，转到导出和流选项卡，并单击导出到S3。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/0447068f19bb1b7f3a7ef66c1b255e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nP8pvdTzEe4MBoux8FP8HA.png"/></div></div></figure><p id="5b0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">8.对于目的地S3时段，选择您创建的时段</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mr"><img src="../Images/7522173625b3be44561145b554a77585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QHyKYWgkQ9DhRQzPsRoE9A.png"/></div></div></figure><p id="01b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">9.状态变为“已完成”后，单击目标S3时段下的链接</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/93acb946eca48d93aa29759e82bfc4b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvYW5gge0-TYt-nSfERDGQ.png"/></div></div></figure><p id="d59d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10.单击AWSDynamoDB/ →最近的文件夹→数据/文件夹</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es nt"><img src="../Images/bbf409f863dedc13724d4bc13df4eb37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*K2NNb5MN2KzgEQlqyL9UIg.png"/></div></figure><p id="0883" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">11.选择文件，然后单击下载</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/434defddb88cc3b5911d7975947a19e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aL0A3hYqDBCPxfA8X7UUJg.png"/></div></div></figure><p id="3cac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">12.解压缩文件时，可以检查数据是否为JSON格式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es nu"><img src="../Images/6b938e406b24ecb19bf8832c504696aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PqamOqljAKql4Xze"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">数据的输出可能是什么样子</figcaption></figure><p id="6853" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦你完成了所有的步骤，现在你知道如何使用云服务进行网络抓取并下载收集到的数据。但你应该记住，你是在向亚马逊支付使用这些服务的费用。因此，你从AWS使用的资源越多，你在月底支付的费用就越多。因此，如果你的预算有限，我强烈建议你定期查看AWS账单页面。</p></div><div class="ab cl nv nw gp nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="hb hc hd he hf"><h1 id="ec72" class="ju jv hi bd jw jx oc jz ka kb od kd ke kf oe kh ki kj of kl km kn og kp kq kr bi translated">参考</h1><p id="bb06" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">[1] Boto3。“Boto3文档。”<em class="oh"> Boto3文档— Boto3文档1.21.32文档</em>，<a class="ae jd" href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html." rel="noopener ugc nofollow" target="_blank">https://boto 3 . Amazon AWS . com/v1/Documentation/API/latest/index . html</a></p><p id="ba9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[2]克罗塞特，莱克斯。“Ko。”<em class="oh"> AWS </em>，AWS数据库博客，2019年1月23日，<a class="ae jd" href="https://aws.amazon.com/ko/blogs/database/how-to-determine-if-amazon-dynamodb-is-appropriate-for-your-needs-and-then-plan-your-migration/." rel="noopener ugc nofollow" target="_blank">https://AWS . Amazon . com/ko/blogs/Database/how-to-determine-if-Amazon-dynamo db-is-just-for-your-needs and then-plan-your-migration/。</a></p><p id="07f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[3] MongoDB。“Nosql的优点。”<em class="oh"> MongoDB </em>，<a class="ae jd" href="https://www.mongodb.com/nosql-explained/advantages." rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/nosql-explained/advantages.</a></p><p id="e446" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[4]安德鲁·鲁滨逊。“Ko。”<em class="oh">亚马逊</em>，quintenz-Verl。，2018年1月23日，<a class="ae jd" href="https://aws.amazon.com/ko/blogs/security/how-to-create-an-aws-iam-policy-to-grant-aws-lambda-access-to-an-amazon-dynamodb-table/." rel="noopener ugc nofollow" target="_blank">https://AWS . Amazon . com/ko/blogs/security/how-to-create-an-AWS-iam-policy-to-grant-AWS-lambda-access-to-an-Amazon-dynamo db-table/。</a></p><p id="fd28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">5戴维·泰勒。“什么是AWS？亚马逊云(Web)服务教程。”<em class="oh"> Guru99 </em>，2022年2月12日，【https://www.guru99.com/what-is-aws.html. T2】</p><p id="e5a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[6]拉斐尔·威林斯基。" DynamoDB扫描与查询—您需要知道的一切."2020年5月15日，https://dynobase.dev/dynamodb-scan-vs-query/.<a class="ae jd" href="https://dynobase.dev/dynamodb-scan-vs-query/." rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>