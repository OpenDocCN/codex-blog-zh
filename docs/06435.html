<html>
<head>
<title>Building an Oilfield Production Surveillance Dashboard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建油田生产监控仪表板</h1>
<blockquote>原文：<a href="https://medium.com/codex/building-an-oilfield-production-surveillance-dashboard-1629865e2ec9?source=collection_archive---------9-----------------------#2022-04-24">https://medium.com/codex/building-an-oilfield-production-surveillance-dashboard-1629865e2ec9?source=collection_archive---------9-----------------------#2022-04-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9c36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">….从零开始到部署</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/40dddfee0917d9d50451e2fefea84821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GO08eSKaJOczJw_F-aTY5w.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">安德烈·德·森蒂斯峰在<a class="ae jt" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="f32e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke iq kf kg kh iu ki kj kk iy kl km kn ko bi translated"><strong class="ak">简介</strong></h2><p id="a138" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">简而言之，生产监控(油田环境)意味着监控生产油田中每口井的井参数变化。油井参数包括速率、压力、节流器尺寸、基本沉积物和水、气油比、正常运行时间等。</p><p id="eb93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做是为了:</p><ol class=""><li id="a985" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated">识别可能的异常数据。</li><li id="127c" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">解释一个或多个参数的变化如何影响最感兴趣的参数(采油速度)，以及如何更好地优化这些参数以实现生产目标。</li></ol><p id="f471" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了有效的生产监督，我决定建立一个仪表板。</p><p id="470a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">要求</strong></p><p id="f6d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在构建仪表板时，我提出了一些要求；</p><ol class=""><li id="45f2" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated">仪表板上的数据需要动态更新。</li><li id="a9ac" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">仪表板可以回答一些经常被问到的常见问题，例如某段时间内的平均产量是多少等等。</li><li id="f516" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">需要部署仪表板的web框架，以便团队中的任何人都可以访问它。</li></ol><p id="ed07" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">建造过程</strong></p><p id="97d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">构建过程中的第一次迭代如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/bca2d85ac471a2b72f8ddd6088f01256.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWPCez_RAXNJ0NbJ53KuwQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片:第一次迭代</figcaption></figure><p id="7157" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第一次迭代中，我有一个保存92份每日报告的文件夹(大约3个月)。每日报告是一个excel文件，其中包含每天从油田生产设施发送的大量数据。</p><p id="83d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">python脚本可以说是两部分；</p><ol class=""><li id="1999" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated">数据争论脚本:这部分脚本从保存在文件夹中的每日报告中访问感兴趣的数据，清理数据并将数据组织成结构化格式(数据帧)。</li><li id="b2aa" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">仪表板脚本:该部分创建带有可视化和web框架的仪表板。</li></ol><p id="7897" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一次迭代的仪表板输出(短视频)可以在这里看到:</p><div class="lj lk ez fb ll lm"><a href="https://drive.google.com/file/d/1jDJi6jHXlOOWtFPu6buKF_YuNoKBNK7x/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hj fi z dy lr ea eb ls ed ef hh bi translated">17-39-38.mp4 2022-04-22</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">编辑描述</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">drive.google.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma jn lm"/></div></div></a></div><p id="68c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一次迭代的仪表板输出的限制是它没有满足我提出的需求；</p><ol class=""><li id="9320" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc kz la lb lc bi translated">每次在文件夹中添加新的每日报告时，我都必须手动运行脚本。</li><li id="c0cc" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">仪表板输出仅在我的计算机上本地运行。</li><li id="4cfe" class="ku kv hi ih b ii ld im le iq lf iu lg iy lh jc kz la lb lc bi translated">在布局和呈现数据方面，我肯定可以更好地处理仪表板输出。</li></ol><p id="2e8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了解决上面的前两个限制，我必须学习谷歌云平台工具，对于第三个限制，我必须学习dash bootstrap组件库。</p><p id="c424" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些经验导致了第二次迭代，如下所示；</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/e6f60618ce48457e6fa9955c8f7e7939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pIZqxAz0TYUcSefI3FC5kQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片:第二次迭代</figcaption></figure><p id="d08a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第二次迭代中，</p><p id="359e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在第一次迭代中，我将文件夹中的每日报告移动到google云存储(gcs)桶中。</p><p id="bb2f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一次迭代中python脚本的数据争论脚本部分被审查以从gcs桶中的报告中访问数据，然后被部署为google cloud function (gcf)中的一个函数。</p><p id="2c90" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">gcf的美妙之处在于它是事件驱动的，这意味着该函数仅在有触发器时运行(在我的例子中，仅当我向gcs bucket添加新的每日报告时)。</p><p id="c568" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据争论脚本的输出是一个数据帧，然后作为excel文件存储在一个新的gcs存储桶(第二个存储桶)中。无论何时，只要触发了函数，新的输出就会覆盖gcs存储桶中的现有输出。</p><p id="e86d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对第一次迭代中python脚本的仪表板脚本部分进行了审查，以访问第二个(新的)gcs存储桶中的数据，web框架在使用dash bootstrap组件的基础上进行了改进，并部署在google app engine中。</p><p id="d8ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">dash bootstrap组件的美妙之处在于，它允许您以行和列的形式组织布局。这使得人们很容易控制布局的设计。</p><p id="6aac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">google app engine允许以无服务器的方式部署web应用程序，这意味着仪表板输出可以与任何其他人共享。</p><p id="fe5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了验证第二次迭代，我上传了30个额外的每日报告到第一个gcs桶中(一次开始一个报告，在第三次上传之后，我一次上传了剩余的27个每日报告)。</p><p id="d019" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">谷歌云功能和应用引擎的指标可以在这里看到:</p><div class="lj lk ez fb ll lm"><a href="https://drive.google.com/file/d/1xzreHg1T9163flybGGJW9yTAE4wovrmu/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hj fi z dy lr ea eb ls ed ef hh bi translated">云函数metric.jpg</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">编辑描述</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">drive.google.com</p></div></div><div class="lv l"><div class="mb l lx ly lz lv ma jn lm"/></div></div></a></div><div class="lj lk ez fb ll lm"><a href="https://drive.google.com/file/d/1hO8MIw6QWJK056bze5FEHR5DdFkFF42m/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hj fi z dy lr ea eb ls ed ef hh bi translated">云函数度量II.jpg</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">编辑描述</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">drive.google.com</p></div></div><div class="lv l"><div class="mc l lx ly lz lv ma jn lm"/></div></div></a></div><div class="lj lk ez fb ll lm"><a href="https://drive.google.com/file/d/1BL-hVD99ndCP1mvq6D637FtZvgelGWfW/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hj fi z dy lr ea eb ls ed ef hh bi translated">应用引擎metric.jpg</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">编辑描述</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">drive.google.com</p></div></div><div class="lv l"><div class="md l lx ly lz lv ma jn lm"/></div></div></a></div><p id="79c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">指标显示，云功能和应用引擎都运行得非常好，没有任何错误。</p><p id="1f63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二次迭代的仪表板输出可以在这里看到:<a class="ae jt" href="https://dummy-surveillance-project.nw.r.appspot.com/" rel="noopener ugc nofollow" target="_blank">https://dummy-surveillance-project.nw.r.appspot.com/</a></p><ul class=""><li id="24c0" class="ku kv hi ih b ii ij im in iq kw iu kx iy ky jc me la lb lc bi translated"><strong class="ih hj">*注</strong>:由于数据隐私政策，实际的油井数据已被随机生成的数据所取代。</li></ul><h1 id="c823" class="mf jv hi bd jw mg mh mi ka mj mk ml ke mm mn mo kh mp mq mr kk ms mt mu kn mv bi translated"><strong class="ak">结论</strong></h1><p id="5c35" class="pw-post-body-paragraph if ig hi ih b ii kp ik il im kq io ip iq kr is it iu ks iw ix iy kt ja jb jc hb bi translated">第二次迭代的仪表板输出满足了我最初提出的需求。做这个项目让我意识到<strong class="ih hj">尺度</strong>可以是多维的，而不是一维的。</p><p id="7b68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然仪表板输出对于来自后续每日报告的额外(同一口井)数据工作得非常好，但它肯定不会从全新的井捕获数据(在新井上线且数据被添加到每日报告的情况下)。</p><p id="035a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另外，因为我使用了基于整数位置的索引(。iloc)来访问每日报告中的数据，围绕每日报告中感兴趣的单元格所做的任何更改(插入新行或新列)都会影响仪表板的输出。</p><p id="304f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在未来的迭代中，我将努力解决这些问题。</p><p id="5c37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢您的阅读。</p><p id="1bc5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">知识库可以在这里找到:<a class="ae jt" href="https://github.com/0ladayo/production_surveillance_project" rel="noopener ugc nofollow" target="_blank">https://github.com/0ladayo/production_surveillance_project</a></p></div></div>    
</body>
</html>