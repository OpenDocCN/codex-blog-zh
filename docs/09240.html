<html>
<head>
<title>How to Build a classification model with SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用SQL建立分类模型</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-build-a-classification-model-with-sql-84d4c8a928c5?source=collection_archive---------5-----------------------#2022-10-06">https://medium.com/codex/how-to-build-a-classification-model-with-sql-84d4c8a928c5?source=collection_archive---------5-----------------------#2022-10-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="7159" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">PostgresML介绍，PostgreSQL的开源扩展，仅使用SQL构建、微调和部署ML模型；循序渐进的指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e5649c8c218130a9a4532f1394292658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HRd4i3g9YNCwctBOa_1Wg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Wolfgang Hasselmann 在<a class="ae jn" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="5be0" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">介绍</h1><p id="1ff1" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">SQL是一种强大的编程语言，用于存储、操作和检索数据库中的数据。然而，当涉及到开发机器学习(ML)模型时，Python将是最合适的，原因有几个，例如伟大的ML库和框架、灵活性、平台独立性和广泛的活跃社区。</p><p id="2dd2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">SQL呢？如果我们在数据仓库的中心构建和运行ML模型，数据就保存在那里，而不必离开数据库，会怎么样？这种方法使我们能够有效地运行算法，而无需将数据传输到外部目的地，这可能会导致运行和维护模型的运营费用更高，尤其是在处理大型数据集时。</p><p id="7423" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这是我的问题，它让我选择了多个基于云的解决方案，如<a class="ae jn" href="https://www.oracle.com/ca-en/autonomous-database/what-is-autonomous-database/" rel="noopener ugc nofollow" target="_blank"> Oracle Autonomous DB </a>、<a class="ae jn" href="https://cloud.google.com/bigquery-ml/docs/introduction#:~:text=BigQuery%20ML%20lets%20you%20create,the%20need%20to%20move%20data." rel="noopener ugc nofollow" target="_blank"> Google BigQueryML </a>和<a class="ae jn" href="https://aws.amazon.com/redshift/features/redshift-ml/" rel="noopener ugc nofollow" target="_blank"> AWS RedshiftML </a>，它们都支持ML系统。除了这些云服务，还有一个PostgreSQL的开源扩展，称为<a class="ae jn" href="https://postgresml.org/" rel="noopener ugc nofollow" target="_blank"> PostgresML </a>，它目前使用来自<a class="ae jn" href="https://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> Scikit-Learn </a>、<a class="ae jn" href="https://xgboost.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> XGBoost </a>和<a class="ae jn" href="https://lightgbm.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> LightGBM </a>库的算法支持分类和回归模型的ML开发工作流。它最初是作为一个分布式生产就绪解决方案出现的，以消除从数据库中提取数据并将其转换为ML模型的有用格式的延迟和复杂性。</p><p id="c86b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在这篇介绍性的笔记中，我将使用我们友好的<a class="ae jn" href="https://archive.ics.uci.edu/ml/datasets/iris" rel="noopener ugc nofollow" target="_blank"> iris </a>数据集带您浏览PostgresML的不同组件，同时构建一个简单的多分类模型。这样，我们将提高机器学习和SQL的知识，这是数据世界中的两项基本技能。</p><p id="baf6" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">本说明的其余部分将涵盖以下主题:</p><ul class=""><li id="abbb" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated">PostgresML安装</li><li id="6b74" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">PostgresML中的数据摄取</li><li id="146a" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">PostgresML中的模型训练</li><li id="8084" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">PostgresML中的模型预测和性能评估</li></ul><h1 id="dcb0" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">装置</h1><h2 id="d5ce" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">步骤1:安装必备组件</h2><p id="8869" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">多亏了容器化服务，我们从PostgresML开始所需要的只是设置以下先决条件:</p><ul class=""><li id="81da" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated"><a class="ae jn" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ki hj"/></a>(运行PostgresMl-extension、model performance monitoring dashboard和documentation的服务)</li><li id="4fdf" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated"><a class="ae jn" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki hj"> Docker编写</strong> </a>(管理多个容器)</li></ul><p id="5380" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在我之前的博客中，我简要描述了这两个系统，以防你需要快速复习。</p><div class="mj mk ez fb ml mm"><a href="https://blog.devgenius.io/how-to-build-an-ecommerce-sales-dashboard-with-apache-superset-and-docker-100c19eee603" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">如何用Apache-superset和Docker构建电子商务销售仪表板</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">构建电子商务仪表板的灵活开源平台。</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">blog.devgenius.io</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jh mm"/></div></div></a></div><h2 id="1cf0" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">步骤2:克隆PostgresML存储库</h2><p id="3a35" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">让我们从克隆源代码开始:</p><pre class="iy iz ja jb fd nb nc nd ne aw nf bi"><span id="acae" class="lv jp hi nc b fi ng nh l ni nj">$ git clone <a class="ae jn" href="https://github.com/postgresml/postgresml.git" rel="noopener ugc nofollow" target="_blank">https://github.com/postgresml/postgresml.git</a></span></pre><h2 id="c2dd" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">步骤3:启动dockerized服务</h2><p id="c39b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">接下来，我们将使用docker-compose文件来为我们构建和运行docker化的服务:</p><pre class="iy iz ja jb fd nb nc nd ne aw nf bi"><span id="6dd9" class="lv jp hi nc b fi ng nh l ni nj">$ cd postgresml &amp;&amp; docker-compose up</span></pre><p id="ceec" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在后台，docker-compose运行三个容器:</p><ul class=""><li id="ee28" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated"><em class="nk"> PostgresML-extension </em> —这是为PostgreSQL系统安装基于Python的ML扩展并将ML工作流的各种元素(如数据摄取和模型训练)定义为PostgreSQL函数的主容器。本质上，PostgresML使用<a class="ae jn" href="https://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> Scikit Learn </a>和<a class="ae jn" href="https://xgboost.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> XGBoost </a>来加载数据集、训练回归/分类模型、微调超参数并进行预测。</li><li id="38e8" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated"><em class="nk">PostgresML-Dashboard</em>—Dashboard提供了一个有用的UI工具，可以在数据库内的不同项目和数据集之间导航。它还使用户能够通过内置的SQL IDE与模型进行交互。这很方便，特别是在将ML工作流视为PostgreSQL表时。在这篇笔记中，我将使用仪表板工具来构建我的模型并获得一些预测。</li><li id="46d8" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">最后，这个容器提供PostgresML文档。</li></ul><h2 id="9cb5" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">步骤4:验证您的安装</h2><p id="1ca8" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">太好了！让我们在进入开发阶段之前验证一下安装。一旦容器达到它们的运行状态，打开一个新的浏览器并通过端口8000登录到本地仪表板:</p><pre class="iy iz ja jb fd nb nc nd ne aw nf bi"><span id="24be" class="lv jp hi nc b fi ng nh l ni nj"><a class="ae jn" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/</a></span></pre><p id="fffc" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">您应该能够看到如下所示的主窗口。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nl"><img src="../Images/018d763437cccce2ad293dc3249b2749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBOCekCfdl09oLL6Ii7J_g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">PostgresML主仪表板的视图。“作者提供的图像”</figcaption></figure><h2 id="5bdc" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">使用IRIS数据集快速解决多分类问题</h2><p id="fd34" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">由于这篇介绍性笔记的重点将是描述PostgresML的组件，而不是构建一个复杂的ML模型，所以我决定使用我们有用的IRIS数据集来构建一个简单的多分类问题。</p><p id="65f3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">Fisher的Iris数据集，也称为Iris flower数据集，是一个多变量数据集，包括三种鸢尾(<a class="ae jn" href="https://en.wikipedia.org/wiki/Iris_setosa" rel="noopener ugc nofollow" target="_blank">鸢尾</a>、<a class="ae jn" href="https://en.wikipedia.org/wiki/Iris_virginica" rel="noopener ugc nofollow" target="_blank">海滨鸢尾</a>和<a class="ae jn" href="https://en.wikipedia.org/wiki/Iris_versicolor" rel="noopener ugc nofollow" target="_blank">杂色鸢尾</a>)中每一种的50个样本。从每个样本中，萼片和花瓣的长度和宽度以厘米为单位进行测量。目标是创建一个区分模型，根据这些属性的组合来区分物种。下面是来自维基百科的一个简单的图形EDA，代表了这四个特性之间的关系:</p><div class="mj mk ez fb ml mm"><a href="https://commons.wikimedia.org/wiki/File:Iris_dataset_scatterplot.svg" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">文件:Iris数据集散点图</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">来自维基共享，自由媒体仓库</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">commons.wikimedia.org</p></div></div><div class="mv l"><div class="nm l mx my mz mv na jh mm"/></div></div></a></div><h2 id="9cbb" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">输入数据</h2><p id="83a6" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">ML工作流程的第一步是获取和准备数据集。这通常是数据科学项目中最困难和最耗时的部分，但由于预处理的虹膜数据集，我们可以跳过这一步。样本数据集的完整列表可以在<code class="du nn no np nc b">posgresml-extension/example</code>文件夹下找到。</p><p id="3d82" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">要在仪表板中加载iris数据集，请导航到内置的SQL IDE并运行以下查询:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><p id="8dc0" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">您应该会看到类似这样的内容:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ns"><img src="../Images/20334c73b11ff28612f9f657f17e943f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Bi_lQa1sE13oHkTy_xGfQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="4c72" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这意味着<code class="du nn no np nc b">iris </code>数据集被成功加载，现在可以在<code class="du nn no np nc b">pgml </code>方案中使用了。在后台，PostgresML调用Scikit-learn库为我们加载数据集。要浏览数据，请在我们用来加载数据的同一个SQL IDE中运行以下查询:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><p id="9fa3" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这导致:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nt"><img src="../Images/1a0331616829db6ed155a34df1822c09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QuWhF1EloZ8rPVUq8wZ_Rw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="631a" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这是一种探索我们的数据集并更好地了解其结构的简单方法。数据集包含四个对应于萼片或花瓣结构信息的预测列和一个响应(或标签)列，该列引用属于特定类型鸢尾属植物(Setosa、Versicolour和Virginica)的类:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><h2 id="3763" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">模特培训</h2><p id="597b" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在PostgresML中，训练回归或分类模型相当简单，只需要运行一次训练调用。以下是可接受参数的完整列表:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><p id="d238" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在这一步中，我们:</p><ul class=""><li id="e472" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated">给我们的项目起个名字。</li><li id="2e10" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">确定问题的类型，即分类或回归。PostgresML也使用这个参数调用相关的度量来评估模型性能。</li><li id="03ef" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">提供已经加载的pgml方案中的表或视图的名称。</li><li id="0c36" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">标识目标列。这个自变量相当于类标签、因变量和输出变量。</li><li id="ade0" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">指定特定的算法，例如XGBoost、SVM和线性。</li><li id="99c6" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">可选地提供关于如何实现超参数调整的细节。例如，<code class="du nn no np nc b">search_param</code>允许我们以字典格式列出想要调优的超参数的名称和范围，使用<code class="du nn no np nc b">search</code>可以设置超参数调优策略(即网格或随机搜索)。</li><li id="c5e2" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">选择性地确定测试规模和测试抽样策略。默认情况下，将随机抽取25%的数据(由<code class="du nn no np nc b">test_size</code>指定)来衡量模型的性能。</li></ul><p id="d82b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">从这里开始，PostgresML在PostgreSQL数据库中注册一个新项目，并使用Python ML库来训练和验证针对pgml方案中的目标表的模型。然后，将使用与特定任务相关的预定义指标，根据测试数据集对结果进行评估。例如，混淆矩阵用于衡量分类模型的性能，而RMSE用于回归模型。</p><p id="f28b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">太好了！让我们导航到SQL IDE，使用以下命令在iris数据集上训练一个简单的线性模型:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><p id="711c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">模型训练过程完成后，您应该会在笔记本上看到以下结果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nu"><img src="../Images/7a35909796c55344d879b62671c6ad7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FtpQDPlAnsoHvktgYo-pBg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="4127" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">通过运行训练功能，我们可以:</p><ul class=""><li id="2775" class="lh li hi ki b kj lc km ld kp lj kt lk kx ll lb lm ln lo lp bi translated">创建了一个名为“我的虹膜分类”的新项目</li><li id="7584" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">拍摄了pgml.iris表的快照，以使该过程可重现。这是一个有用的特性，因为真实世界中的数据往往会频繁更改，因此拥有快照将使及时返回变得简单。</li><li id="ab8a" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">使用功能和目标列对pgml.iris表中包含的数据训练线性分类器。</li><li id="bb2b" class="lh li hi ki b kj lq km lr kp ls kt lt kx lu lb lm ln lo lp bi translated">将模型部署到生产中。有时，部署状态会更改为未部署，这意味着模型性能评估不满足部署标准。</li></ul><p id="622f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">太好了！现在，我们已经准备好向线性分类器模型提供看不见的数据点，并进行预测。</p><h2 id="9403" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">模型预测法</h2><p id="c4f2" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">PostgresML使用最近部署的模型为给定的新数据点提供在线预测。通过对预测函数的一次调用，我们将能够向模型传递一组新的输入，并接收一个预测。</p><p id="577e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">让我们测试我们的分类器算法，看看它是否正确地识别了一个新的输入数组的鸢尾花类型，我们知道它属于Setosa花(或类0)。导航到IDE并运行以下查询:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><p id="872b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">您应该会在笔记本上看到以下结果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nv"><img src="../Images/c2e68229e2cd867d8e823476080cc3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MxYtPaWNabrjouu7xf4weQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="2af6" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">给定我们刚刚传递给函数的新特性数组，预测列表示目标列的可能结果。注意<code class="du nn no np nc b">ARRAY[...]</code>必须与训练中使用的特征顺序相同。</p><p id="69a2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我们可以简单地预测多个随机点，并将它们与数据集中的实际标签进行比较:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="nq nr l"/></div></figure><p id="e359" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">下面是我得到的结果:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nw"><img src="../Images/136b46cd0d3580f0e6262603e12d6e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r_xvFCmx3q8X9j6dqlHujQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><h2 id="6e2e" class="lv jp hi bd jq lw lx ly ju lz ma mb jy kp mc md ka kt me mf kc kx mg mh ke mi bi translated">模型性能评估</h2><p id="fee9" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">太好了！到目前为止，我们已经训练了我们的模型，并生成了一些随机预测，但在将我们的模型部署到实际生产中之前，我们需要通过根据几个指标对模型进行评估来验证模型的可信度。</p><p id="1b85" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在控制面板中，如果您导航到“项目”选项卡并选择我们新创建的项目“my_iris_project”，您会发现我们的线性分类器根据常用的分类评估指标“混淆矩阵”进行了测试。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es nx"><img src="../Images/035cf82d000a6067d3a6fe16a37be1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2fmLP7nNcNKUTDP94msKyQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><h1 id="4ed6" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="f026" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">感谢阅读！这是对PostgresML的介绍，它是对PostgreSQL的扩展，具有在SQL中构建、评估和部署回归或分类模型的能力。在这份介绍性说明中，我们回顾了如何使用docker安装PostgresML、导入预定义数据、训练和验证简单的分类器模型，以及使用看不见的数据点评估模型的性能，所有这些都在PostgresML dashboard应用程序的SQL IDE中完成。</p><p id="3c79" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">请继续关注下一篇博客，通过一些案例研究，这篇博客将更多地关注PostgresML在解决现实世界问题中的应用。</p><p id="8444" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">此外，如果您是数据科学家、分析师或工程师，并且希望使用PostgresML在SQL中实现您的回归/分类模型，请联系我。我就差一个ping了:)</p></div></div>    
</body>
</html>