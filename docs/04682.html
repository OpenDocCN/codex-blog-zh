<html>
<head>
<title>Building Better Playlists: Spotify Integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建更好的播放列表:Spotify集成</h1>
<blockquote>原文：<a href="https://medium.com/codex/building-better-playlists-spotify-integration-2f86565a5888?source=collection_archive---------5-----------------------#2021-12-26">https://medium.com/codex/building-better-playlists-spotify-integration-2f86565a5888?source=collection_archive---------5-----------------------#2021-12-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e9ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于那些对自己的播放列表引以为豪的人来说，我的播放列表很一般。当然，我可能喜欢这些歌曲，但是播放的顺序还有很多需要改进的地方——皮特保罗和维罗妮卡当然属于同一个播放列表，但是你可能不希望他们的热门歌曲连续播放！这是我对这个小问题的过度设计的解决方案。</p><h2 id="a3cc" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">动机</h2><p id="57ef" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">Spotify是一项出色的服务，它彻底改变了我们寻找、聆听和分享音乐的方式。他们的技术前沿方法还允许发布新功能，进一步提升用户与他们的音乐互动的能力，例如<em class="kd"> discover weekly </em>播放列表或最近发布的<a class="ae ke" href="https://newsroom.spotify.com/2021-08-31/how-spotifys-newest-personalized-experience-blend-creates-a-playlist-for-you-and-your-bestie/" rel="noopener ugc nofollow" target="_blank"> blend </a>工具，将两个人的音乐品味合并到一个播放列表中。</p><p id="9d35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Spotify用户体验的核心是播放列表，它允许用户以一种让人想起20世纪80年代盒式混音带的方式对歌曲进行分类和组织。如果没有播放列表，Spotify上的收听体验将是短暂的，用户需要在无尽的曲目库中搜索，以找到“他们的”音乐。因为这样的播放列表向用户提供了某种程度的所有权和对系统中什么是“他们的”音乐的控制，该系统没有所有权和音乐和流派的宇宙。</p><p id="d3d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">鉴于播放列表的重要性以及将新歌曲添加到播放列表中的机制(只需将它们放在最后)，个人播放列表很快变得不连贯就不足为奇了，这是口味不断变化以及重新排序和组织歌曲所需努力水平的结果。</p><p id="046c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了避免我自己的播放列表遭遇这种命运，我已经开始通过使用Spotify的开发工具来创建我自己的方法，以与Spotify音乐世界进行互动，从而为这个问题构建解决方案。</p><p id="a92c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是系列文章的第一部分，在本文的底部有其他部分的链接。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kf"><img src="../Images/8ce61e5390f7c44f2c5e7a45fefc018b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ob2a-NINs8Cy1ZhC1iZUcA.png"/></div></div></figure><h2 id="3172" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">Spotify web API</h2><p id="7f48" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">Spotify提供了一个免费的Web API，允许你以编程方式访问Spotify的各个方面，并修改用户帐户的部分内容——至少在得到用户许可的情况下！</p><p id="ab8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望能够访问用户的播放列表和曲目，并且能够修改这些播放列表或创建新的播放列表。这需要4种关键能力:</p><ul class=""><li id="f01d" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">能够列出所有用户的播放列表</li><li id="414f" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">能够在播放列表中列出曲目</li><li id="37c6" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">能够获得关于一个轨道的数据</li><li id="6c27" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">能够创建或修改用户的播放列表</li></ul><p id="1f8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，web API提供了所有这些功能(以及更多功能)，以及将许多请求捆绑到单个HTTPS调用中的能力，这减少了加载播放列表中所有曲目的曲目数据时所需的请求数量。</p><p id="0726" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为参考，所需的播放列表级交互包含在<a class="ae ke" href="https://developer.spotify.com/documentation/web-api/reference/#category-playlists" rel="noopener ugc nofollow" target="_blank">播放列表API </a>中，而曲目级交互包含在<a class="ae ke" href="https://developer.spotify.com/documentation/web-api/reference/#category-tracks" rel="noopener ugc nofollow" target="_blank">曲目API </a>中。</p><p id="3cea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本流程可总结如下:</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es lf"><img src="../Images/41b5f05bf74ff7db0b1dff9a3c8a8a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/0*jZ7HArY-_Aw4cM5_"/></div></figure><h2 id="bf68" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">授权</h2><p id="680a" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">要使用任何API功能，用户必须以有效的Spotify用户身份登录。Spotify为用户提供了多种登录方式，并向应用程序提供访问他们的数据和进行更改所需的授权。</p><p id="9c18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我的申请，我选择了使用<em class="kd">隐式授权</em>方法，因为我不需要长期持续授权，并且隐式授权仅允许申请成为前端。这个流为应用程序提供了一个令牌，然后在所有后续的API调用中使用这个令牌。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es lg"><img src="../Images/23894976080d79dfa9a211fe34584341.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*kEapr24DebC-B7cU"/></div></figure><h2 id="d549" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">页码</h2><p id="a715" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">由于用户可能有大量的播放列表和歌曲，所有使用的API调用都有一个最大返回长度以及分页，以便获取下一个数据块(如果存在的话)。这使得每个api调用的大小易于管理，特别是当数据包含在URL参数而不是头中时，因此受到浏览器严格的字符限制。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es lh"><img src="../Images/1ad61b803a50819be416300489556684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*ihx4IbWBVXh3VvgHLRG_4A.gif"/></div></figure><h2 id="c87a" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">该工具</h2><p id="e6b8" class="pw-post-body-paragraph if ig hi ih b ii jy ik il im jz io ip iq ka is it iu kb iw ix iy kc ja jb jc hb bi translated">对于那些感兴趣的人来说，播放列表优化工具可以在<a class="ae ke" href="https://www.grantholtes.com/smartshuffle" rel="noopener ugc nofollow" target="_blank">https://www.grantholtes.com/smartshuffle</a>获得</p><h2 id="5d2d" class="jd je hi bd jf jg jh ji jj jk jl jm jn iq jo jp jq iu jr js jt iy ju jv jw jx bi translated">其他故事</h2><ul class=""><li id="b2c2" class="kr ks hi ih b ii jy im jz iq li iu lj iy lk jc kw kx ky kz bi translated">第2部分:<a class="ae ke" href="https://grantholtes.medium.com/playlist-optimisation-as-a-traveling-salesperson-problem-f31f73c417fa" rel="noopener">播放列表优化作为一个旅行推销员问题</a></li></ul></div></div>    
</body>
</html>