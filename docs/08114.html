<html>
<head>
<title>Run a Python code on AWS Batch Part — 2: Uploading Data to ECR and Creation of Computing Environment.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS批处理上运行Python代码第2部分:将数据上传到ECR并创建计算环境。</h1>
<blockquote>原文：<a href="https://medium.com/codex/run-a-python-code-on-aws-batch-part-2-uploading-data-to-ecr-and-creation-of-computing-c5dab12cd3eb?source=collection_archive---------0-----------------------#2022-07-18">https://medium.com/codex/run-a-python-code-on-aws-batch-part-2-uploading-data-to-ecr-and-creation-of-computing-c5dab12cd3eb?source=collection_archive---------0-----------------------#2022-07-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="53ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上一篇文章中，我发布了如何创建和运行一个简单的python脚本。以及如何创建一个运行在本地系统上的简单Docker文件和Docker容器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7bec925ef48c06dd7af057c4b12347b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tQdtKoTCpuPQ41V3N7AFew.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">AWS批处理+ Python</figcaption></figure><p id="ec45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将讨论AWS批处理方面。为了运行AWS批处理，我们需要一个图像文件(Docker容器)和计算环境。</p><ol class=""><li id="9b84" class="jt ju hi ih b ii ij im in iq jv iu jw iy jx jc jy jz ka kb bi translated">在"<strong class="ih hj">Amazon Elastic Container Registry</strong>中创建一个存储库</li><li id="7d0d" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">将Docker容器推入存储库。</li><li id="b91e" class="jt ju hi ih b ii kc im kd iq ke iu kf iy kg jc jy jz ka kb bi translated">在AWS批处理中创建“计算环境”。</li></ol><p id="e8e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了在AWS Batch上运行Docker容器，我们需要将它存储在AWS平台上，我们将使用<strong class="ih hj">“亚马逊弹性容器注册表”，</strong>来存储我们的Docker容器。搜索<strong class="ih hj">亚马逊弹性容器注册表</strong>，我们看到了ECR的仪表盘。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/e89e606d1128585efc5b7aff4d724d78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kGscCbkHwW9b1PQ3xgtIDw.jpeg"/></div></div></figure><p id="21e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击<strong class="ih hj">“入门”</strong>。之后，我们将访问创建存储库页面。</p><p id="899d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将使用public，因为我们正处于学习阶段。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ki"><img src="../Images/d49dfa0e8cca5c6c3da5a20ed1f05bf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4W-dPlUIQ2ObwenCfklaSA.jpeg"/></div></div></figure><p id="e7ec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并给出存储库的名称，这是一个必填字段。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/fd905a99f52c8f3e71d610a03d21037a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-hnlnKHz5CoApJByKjAhA.jpeg"/></div></div></figure><p id="5d01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我正在选择所有的<strong class="ih hj">“内容类型”</strong>，您可以选择您的内容类型。</p><p id="6341" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我将单击<strong class="ih hj">“创建存储库”。</strong>之后，我们的页面将重定向到存储库列表，我们可以看到新的存储库列表。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kk"><img src="../Images/cf0133dc04c189a1be001d7fa503add4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKhS6I-TE5yMmPJTGZHWZQ.jpeg"/></div></div></figure><p id="c904" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们单击我们的存储库名称，之后，我们将单击<strong class="ih hj">“查看推送命令”</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/696325adbb4bf6a9e8eb79c5a70a6e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Q_v0AgPIpK4yPGjNyDppQ.jpeg"/></div></div></figure><p id="53dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击该按钮后，我们将看到一个推送命令列表，我们需要执行所有命令。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es km"><img src="../Images/17a8550391cb1123291dbd20e578dcac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YtQvWFJwJm7mVULtwhU2xw.jpeg"/></div></div></figure><p id="78be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我将在命令提示符下逐行执行该命令。</p><p id="e187" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">确保您当前的工作目录应该是您保存python脚本和Docker文件的地方。</p><p id="0bba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们首先要复制第一个命令。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/99b1aa1064197e5ee86105f76e4f5f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rA0kZ7HMQMcqmKiGcbVsgg.jpeg"/></div></div></figure><p id="43ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到了“登录成功”。如果您没有成功登录，请再次尝试配置AWS CLI。</p><p id="03bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我要去听第二个命令。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/644a4996d5dd7ee00ee7673066d39a00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1g0Sabnvm6DouEqSv-GoTg.jpeg"/></div></div></figure><p id="2082" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三命令。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/c0cc358c7762ba6794549265d9779c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0u2Al20a2cAWcgt_dVm57A.png"/></div></div></figure><p id="6186" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，最后一个命令将把您的映像推入存储库。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/7fc499495a12ccc69a9c783016cf0641.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KTDST6ZxsFK3acU1no57SQ.jpeg"/></div></div></figure><p id="ee7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们会在上面的截图中看到，有一张图片的名字叫‘最新’。</p><p id="c9b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们将进入AWS批处理，首先，我们将创建“计算环境”。</p><p id="286a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击AWS批处理控制面板左侧的计算环境。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kq"><img src="../Images/4a47e5481eae3f1ba107b0884c7f8aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*6QfffS3OUk_7BunSIrBJFw.jpeg"/></div></figure><p id="fa43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击计算环境右侧的“创建”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/49dec006368b3da726aada006e0f8d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eh3efZ-kl3GteWbPijZA0Q.png"/></div></div></figure><p id="0906" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">填写下面给出的详细信息:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/3f4536db77c3c270bfcbf8ba31f06ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJscVAHrw_z-2LT3EuVfFg.png"/></div></div></figure><p id="9dee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在实例配置中，我使用的是Spot。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/23225b17331a1e8eb5d0c24641f5469a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nQK0yKYQKZ_xQ24Gug9VDw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">实例配置— 1</figcaption></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/fe3533fc7c37525e533bffd285809f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3sEkjxIR8jlIr1qCVbz-w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">实例配置— 2</figcaption></figure><p id="8065" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于<strong class="ih hj">联网，</strong>我使用的是我在AWS Redshift中使用过的同一个VPC Id，链接如下:<a class="ae kv" rel="noopener" href="/codex/aws-redshift-connects-with-python-part-1-setup-a-redshift-connection-with-python-b9f6a1fa49f0">https://medium . com/codex/AWS-Redshift-connects-with-python-part-1-setup-a-Redshift-connection-with-python-b 9 F6 a 1 fa 49 f 0</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/57fc34403fd05127fcabab8e9ab03786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YEtJxt3RthKWQYdXsNf15w.png"/></div></div></figure><p id="3275" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，点击创建计算环境。我们将看到计算环境的状态，如有效图像所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kx"><img src="../Images/bfb224fa360ceca769bfbbc8c7b9c68c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9bHAB9cZW1oaTiL_8abckg.png"/></div></div></figure><p id="461a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将在下一篇文章(第3部分)中看到作业队列和作业定义的创建。</p></div></div>    
</body>
</html>