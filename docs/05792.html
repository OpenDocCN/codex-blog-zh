<html>
<head>
<title>Protocol Oriented Programming in Swift — Keeping it simple.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中面向协议的编程——保持简单。</h1>
<blockquote>原文：<a href="https://medium.com/codex/protocol-oriented-programming-in-swift-keeping-it-simple-c485cf550918?source=collection_archive---------7-----------------------#2022-03-29">https://medium.com/codex/protocol-oriented-programming-in-swift-keeping-it-simple-c485cf550918?source=collection_archive---------7-----------------------#2022-03-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b77a979ffd51901836e6aba3406976bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hmjvi2V-EweNA6g7mtfneA.png"/></div></div></figure><p id="e1aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi jo translated">在模块化代码中，抽象一直扮演着重要的角色。一段代码，它抽象了所有的复杂性，只显示了需要的内容。Swift称之为<em class="jx">协议</em>，其他流行语言称之为<em class="jx">接口</em>。</p><p id="9105" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Swift中面向协议的编程是由苹果在2015年<a class="ae jy" href="https://developer.apple.com/videos/play/wwdc2015/408/" rel="noopener ugc nofollow" target="_blank">WWDC</a>推出的，他们说—</p><blockquote class="jz ka kb"><p id="9828" class="iq ir jx is b it iu iv iw ix iy iz ja kc jc jd je kd jg jh ji ke jk jl jm jn hb bi translated"><strong class="is hj">不要从一个类开始，从一个协议开始</strong>。</p></blockquote><p id="2ab6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它基本上定义了面向协议编程的方法。— <em class="jx">首先，定义功能，然后，创建采用这些功能的类型。</em></p><p id="4ee4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">苹果还定义了协议的命名惯例——协议应该以大写字母开头，要么用名词描述它是什么，要么用名词后跟后缀描述它做什么。前者的一个例子是<em class="jx"> UITableViewDelegate </em>，后者的一个例子是<em class="jx"> Codable </em>。</p><p id="35dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是我们在这个阶段需要的足够的背景。让我们跳到编码。</p><h1 id="f5d7" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">定义协议—定义协议的行为。</h1><p id="7c23" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">在下面的代码中，我们首先定义了一个名为Flyable的协议。它基本上定义了在我们的应用中任何类型都可以采用的飞行行为。</p><p id="338e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可飞行协议将速度和最大速度定义为<em class="jx">属性</em>(属性)，将fly、flyWithSpeed和land定义为任何飞行物体都可以采用的<em class="jx">能力</em>(功能)。</p><p id="9a73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以设置和读取下面代码中定义的speed属性，但是只能读取maxSpeed属性。它基本上是一个只读属性。这解释了属性名旁边的<strong class="is hj">获取集</strong>和<strong class="is hj">获取</strong>的定义。</p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="928f" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">符合协议—采用协议的行为。</h1><p id="d13f" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">在下面的代码中，Bird采用符合协议的飞行行为。任何符合可飞行协议的鸟都必须定义协议所定义的属性和功能。</p><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="b48a" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">扩展协议—定义协议的默认行为。</h1><p id="8e0f" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">在下面的代码中，我们扩展了协议，Flyable定义了它的默认实现。我们提供了默认的maxSpeed为20，还提供了flyWithSpeed和land函数的默认实现。</p><blockquote class="jz ka kb"><p id="a7b2" class="iq ir jx is b it iu iv iw ix iy iz ja kc jc jd je kd jg jh ji ke jk jl jm jn hb bi translated">这里要注意的一点是，如果我们以后创建另一个符合协议的类型，Flyable，它可以修改默认行为，以具有更好的速度和着陆能力。</p></blockquote><figure class="li lj lk ll fd ij"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="a684" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated"><strong class="ak">为什么是协议，为什么不是继承</strong>。</h1><p id="5e85" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">当我们讨论定义任何类型都可以遵循的标准行为时，我们首先想到的是继承。</p><blockquote class="jz ka kb"><p id="859c" class="iq ir jx is b it iu iv iw ix iy iz ja kc jc jd je kd jg jh ji ke jk jl jm jn hb bi translated">难道就不能创建一个基类，给它添加一个结构，子类可以继承并添加它们的实现吗？</p></blockquote><p id="3f90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的，我们可以。继承是伟大的，但它肯定有自己的局限性。</p><ol class=""><li id="65ce" class="lo lp hi is b it iu ix iy jb lq jf lr jj ls jn lt lu lv lw bi translated"><strong class="is hj"> <em class="jx">像在许多编程语言中一样，Swift </em> </strong>不支持多重继承——如果我们采用继承方法，然后我们想在我们的基类中添加我们认为对所有子类都有用的行为，那么基类将最终拥有太多它应该拥有的代码。使用协议的方法，我们可以为每组行为定义多个协议，并且<em class="jx">该类型可以同时符合多个协议</em>。</li><li id="0fee" class="lo lp hi is b it lx ix ly jb lz jf ma jj mb jn lt lu lv lw bi translated"><strong class="is hj"> <em class="jx">继承只支持类类型，不支持值类型</em> </strong> —使用继承是为了让子类可以继承其基类的行为，并拥有自己的行为/实现。但是如果我们想对结构做同样的事情呢？如何才能实现？<strong class="is hj">协议在这里起了作用，它支持类和值类型</strong>。</li></ol><h1 id="7470" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">这就是本文的全部内容。</h1><p id="a215" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">这就是我们在本文范围内的全部内容。协议比我们在这里讨论的有更多的功能。本文旨在概述Swift中面向协议的编程。如果你想了解更多，我强烈建议你参加<a class="ae jy" href="https://developer.apple.com/videos/play/wwdc2015/408/" rel="noopener ugc nofollow" target="_blank"> WWDC 2015 </a>会议，在会上苹果介绍了面向协议的编程并解释了其在Swift中的实施。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="4c69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">希望你觉得这篇文章有用，请在评论中发表你的问题/反馈，我将很乐意回应。如果你喜欢这篇文章，你可以考虑在<a class="ae jy" rel="noopener ugc nofollow" target="_blank" href="/@dwivedi.2512_6282">媒体</a>上关注我，并在<a class="ae jy" href="https://www.linkedin.com/in/abhishek-dwivedi-25a45b225/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。</p></div></div>    
</body>
</html>