<html>
<head>
<title>Musings about Database Indexes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于数据库索引的思考</h1>
<blockquote>原文：<a href="https://medium.com/codex/musings-about-database-indexes-8d8a9a354a79?source=collection_archive---------22-----------------------#2021-08-02">https://medium.com/codex/musings-about-database-indexes-8d8a9a354a79?source=collection_archive---------22-----------------------#2021-08-02</a></blockquote><div><div class="dt gx gy gz ha hb"/><div class="hc hd he hf hg"><div class=""/><p id="696d" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">而不是“标记”；我昨晚刚刚参加了三字节后端开发测试，这是在评估中。</p><figure class="jf jg jh ji fe jj es et paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="es et je"><img src="../Images/4973223319fabc772c2f557d5d5914b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bjBglCjMkpFBYP-3UQe1SA.jpeg"/></div></div><figcaption class="jq jr eu es et js jt bd b be z dy translated">封面图片由<em class="ju">@ zozulinsky via</em><a class="ae jv" href="https://www.twenty20.com/photos/19f9cccb-0cf3-45c5-af4b-977e22bc4c4f/?utm_t20_channel=bl" rel="noopener ugc nofollow" target="_blank"><em class="ju">第20期</em> </a></figcaption></figure><p id="3cea" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">永远不要在深夜进行三字节评估。如果你不在耳机里放大声的音乐，你的注意力就会下降，长时间的困倦会让你的理解力变得迟钝，就像一支没有削尖的2号铅笔一样光滑。</p><p id="a550" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">尽管如此，我做得并不差。事实上，我还不到后端开发人员的第50个百分点。但是我的数据库索引技能需要一些反思。</p><p id="163c" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">警告:我承认我不擅长处理数据库，虽然我已经掌握了关系数据库理论和基本类型、行/列/键以及SQL命名法，但索引对我来说有点高级，所以我们将在这篇文章中尝试浏览它，希望到那时我们都能掌握它们的要点。</p><p id="27a9" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">另外，在我们开始之前，我想解释一下为什么它们被称为数据库索引而不是索引。这个话题显然非常令人困惑，甚至纳斯达克也写了一篇关于它的文章。从技术上来说，两者都是正确的，因为它们都是单词“index”的复数形式，但是我看到很多页面都在说indexes，所以在本文中我们将坚持使用它。</p><p id="3366" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">TL；DR:“索引”这个词和任何一个词配对在搜索引擎上都排名靠前。一般来说，它在网络上更普遍，但是我们美国人已经习惯于经常说“索引”这个词，以至于我们在所有的技术文档中都写了它们。叹气。</p><h1 id="edb0" class="jw jx hj bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">那么……DB索引到底是什么？</h1><p id="b4c6" class="pw-post-body-paragraph ig ih hj ii b ij ku il im in kv ip iq ir kw it iu iv kx ix iy iz ky jb jc jd hc bi translated">既然命名呼哈已经不存在了，让我们把注意力转向关于这个主题的<a class="ae jv" href="https://en.wikipedia.org/wiki/Database_index" rel="noopener ugc nofollow" target="_blank">维基百科</a>文章:</p><blockquote class="kz"><p id="01ec" class="la lb hj bd lc ld le lf lg lh li jd dy translated">“一个<strong class="ak">数据库索引</strong>是一个<a class="ae jv" href="https://en.wikipedia.org/wiki/Data_structure" rel="noopener ugc nofollow" target="_blank">数据结构</a>，它提高了对一个<a class="ae jv" href="https://en.wikipedia.org/wiki/Table_(database)" rel="noopener ugc nofollow" target="_blank">数据库表</a>的数据检索操作的速度，代价是额外的写入和存储空间来维护索引数据结构。索引用于快速定位数据，而不必在每次访问数据库表时搜索数据库表中的每一行。可以使用数据库表的一个或多个<a class="ae jv" href="https://en.wikipedia.org/wiki/Column_(database)" rel="noopener ugc nofollow" target="_blank">列创建索引，为快速随机</a><a class="ae jv" href="https://en.wikipedia.org/wiki/Lookup" rel="noopener ugc nofollow" target="_blank">查找</a>和高效访问有序记录提供基础。”</p></blockquote><p id="992f" class="pw-post-body-paragraph ig ih hj ii b ij lj il im in lk ip iq ir ll it iu iv lm ix iy iz ln jb jc jd hc bi translated">哇哦。让我们把这分解成细节。我们有<em class="lo">“提高数据检索操作的速度”，</em>，这意味着<strong class="ii hk">索引加速了查询</strong>。但是怎么做呢？为什么不直接提高查表速度呢？</p><h1 id="d6f6" class="jw jx hj bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">数据库索引是如何工作的？</h1><p id="ceea" class="pw-post-body-paragraph ig ih hj ii b ij ku il im in kv ip iq ir kw it iu iv kx ix iy iz ky jb jc jd hc bi translated">据我所知，索引将整个列存储在内部结构中，读取速度比数据库表本身更快。您可以使用以下SQL语句在索引中存储任何需要的列:</p><pre class="jf jg jh ji fe lp lq lr ls aw lt bi"><span id="f5bf" class="lu jx hj lq b fj lv lw l lx ly">CREATE INDEX &lt;index_name&gt;<br/>ON &lt;table_name&gt; (column1, column2, ...)</span></pre><p id="ced3" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">这不是通用的语法，确切的命令可能会因所使用的数据库管理系统而异。</p><p id="8b04" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">它还允许同时索引多个列，从而有可能加快这些列中的值的读取时间。它就像一个迷你表，只包含那些列，但在第一列<code class="dv lz ma mb lq b">column1</code>上排序。这种排序特性是使整个索引系统工作的关键部分。DB已经知道某个特定的主键在哪里，因此能够通过另一个“键”找到其余的被过滤的列就可以快速获取整个(被过滤的)行。</p><p id="ea1a" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">您可能不知道这一点，但是主键<a class="ae jv" href="https://www.codecademy.com/articles/sql-indexes" rel="noopener ugc nofollow" target="_blank">已经存储在索引</a>中，您没有任何额外的编码。</p><p id="36b4" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">然而，值得注意的是，虽然索引读起来比表快，但是写起来比表慢。因此，不要在经常用新行或新列值更新的表上创建索引。</p></div><div class="ab cl mc md gq me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hc hd he hf hg"><p id="d658" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">现在我们知道了什么时候<strong class="ii hk">不</strong>使用索引，让我们看一个演示其实际用途的类比。</p><h1 id="6d0f" class="jw jx hj bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">书籍索引</h1><p id="a017" class="pw-post-body-paragraph ig ih hj ii b ij ku il im in kv ip iq ir kw it iu iv kx ix iy iz ky jb jc jd hc bi translated">栈溢出用户<a class="ae jv" href="https://stackoverflow.com/users/2629588/sankarganesh-eswaran" rel="noopener ugc nofollow" target="_blank"> Sankarganesh Eswaran </a>给出了一个索引的绝妙例子:</p><blockquote class="mj mk ml"><p id="fbdf" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">经典例子<strong class="ii hk">“书籍中的索引”</strong></p><p id="bcf6" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">假设一本书有1000页，分为10个章节，每个章节有100页。</p><p id="58e9" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">很简单，是吧？</p><p id="4a6c" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">现在，假设您想要查找包含单词“<strong class="ii hk">炼金术士</strong>”的特定章节。如果没有索引页，除了浏览整本书/每一章，你别无选择。即:1000页。</p><p id="18f9" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">这个类比在数据库界被称为<strong class="ii hk">【全表扫描】</strong>。</p></blockquote><figure class="jf jg jh ji fe jj es et paragraph-image"><div class="es et mp"><img src="../Images/d0c85bcb4c774ae54e6cb1e647c3f0d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*dcx_otVoMDojpXLj.jpg"/></div><figcaption class="jq jr eu es et js jt bd b be z dy translated">来源:<a class="ae jv" href="https://stackoverflow.com/questions/1108/how-does-database-indexing-work" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/1108/how-do-how-do-database-indexing-work</a></figcaption></figure><blockquote class="mj mk ml"><p id="33ca" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">但是有了索引页，你就知道去哪里了！此外，要查找任何重要的特定章节，你只需要一次又一次地查看索引页。找到匹配的索引后，你可以跳过其余部分，有效地跳到那一章。</p><p id="6c49" class="ig ih lo ii b ij ik il im in io ip iq mm is it iu mn iw ix iy mo ja jb jc jd hc bi translated">但是，除了实际的1000页，你还需要另外10页来显示索引，所以总共1010页。</p></blockquote><p id="031b" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">在数据库的情况下，图书索引可以是一个表，其中条目和页码作为列，其他一些元数据列(例如，它是否是另一个条目的子条目)和ID主键。但是条目和页码可以单独存储在索引中。由于图书索引中只有一个唯一的条目，所以它也可以用作索引的排序列。</p></div><div class="ab cl mc md gq me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hc hd he hf hg"><p id="c13a" class="pw-post-body-paragraph ig ih hj ii b ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd hc bi translated">大多数时候，当人们阅读一个主题时，其中一些往往会停留在他们的脑海中，所以在四个月后的下一次三字节测试中(希望你不是在晚上进行！)，您至少会对什么是数据库索引有一个粗略的概念。</p></div></div>    
</body>
</html>