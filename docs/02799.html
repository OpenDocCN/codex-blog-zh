<html>
<head>
<title>Using THC Hydra To Brute Force Login Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用THC Hydra暴力破解登录表单</h1>
<blockquote>原文：<a href="https://medium.com/codex/using-thc-hydra-to-brute-force-login-forms-7ee9c28a863c?source=collection_archive---------0-----------------------#2021-08-06">https://medium.com/codex/using-thc-hydra-to-brute-force-login-forms-7ee9c28a863c?source=collection_archive---------0-----------------------#2021-08-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="09bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">THC Hydra 是一个用于登录表单的强大工具。它可以对不同类型的应用程序和服务执行暴力和字典攻击。</p><p id="7e97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当web应用程序依赖用户名和密码作为其唯一的防线时，pentester或恶意用户可以使用Hydra对其进行字典攻击。这将允许他们检索现有用户的凭据，然后利用这些凭据对受限页面进行未经授权的访问。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/d01f61bf2d9758cc2a4f0a5410edb88d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/0*wAqNJNPETylruXL6.jpg"/></div></figure><p id="ad8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Hydra不仅可以攻击web表单，还可以攻击许多其他协议，包括SSH、SMB、FTP等等。然而，在本文中，我们将只关注攻击web应用程序登录表单。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="3733" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">正在下载THC Hydra</h1><p id="f767" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">Hydra与Windows、macOS和Linux兼容。</p><p id="9e0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您使用的是Kali Linux，那么您应该已经安装了Hydra。</p><p id="a39e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果没有，那么你可以通过访问该产品的<a class="ae kv" href="https://github.com/vanhauser-thc/thc-hydra" rel="noopener ugc nofollow" target="_blank">官方Github库</a>并查看最新版本来下载。</p><p id="95a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下载完成后，您可以通过依次运行以下命令来编译和安装Hydra:</p><pre class="je jf jg jh fd kw kx ky kz aw la bi"><span id="2842" class="lb jt hi kx b fi lc ld l le lf">./configure<br/>make<br/>make install</span></pre><p id="379a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能还需要安装一些依赖项，以便Hydra正常工作。</p><p id="ead9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是为基于Debian的发行版运行的命令。如果这些不适合您，您应该为您的发行版寻找等效的库。</p><pre class="je jf jg jh fd kw kx ky kz aw la bi"><span id="76a2" class="lb jt hi kx b fi lc ld l le lf">apt-get install libssl-dev libssh-dev libidn11-dev libpcre3-dev libgtk2.0-dev libmysqlclient-dev libpq-dev libsvn-dev firebird-dev libmemcached-dev libgpg-error-dev libgcrypt11-dev libgcrypt20-dev</span></pre><p id="e93a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了有一个我们可以测试Hydra的web应用程序，我将使用<strong class="ih hj"> DVWA </strong>。这是一个易受攻击的web应用程序，您可以使用它来针对真实的目标合法地测试您的黑客技术。如果您想在您自己的环境中重现我将在这里介绍的步骤，您可以继续并下载它。否则，你可以跟着走。</p><p id="dc15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们已经准备好了一切，让我们开始吧。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="fcb6" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">识别表单参数</h1><p id="6cad" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">好了，现在我们要攻击下面的登录表单:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/7b457fef876684cb3189fff8fa1606f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UWRo77OhQKT1hEnn.png"/></div></div></figure><p id="7da3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它位于我的本地机器的以下URL中:<a class="ae kv" href="http://localhost/DVWA/vulnerabilities/brute/" rel="noopener ugc nofollow" target="_blank">http://localhost/DVWA/vulnerabilities/brute/</a></p><p id="ce0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要做的第一件事是确定表单参数，以及使用的方法。有许多方法可以做到这一点。</p><p id="526d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我们的例子，我们将检查页面的源代码，然后尝试定位与我们的登录表单相关联的代码块。</p><p id="0f01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我们得到的信息:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ll"><img src="../Images/0588c6e37081bbdbf48fa7325b709930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/0*6Ytz0cpFtY8S1svY.png"/></div></div></figure><p id="c8f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么，我们能从中推断出什么呢？</p><p id="9d5b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们可以看出表单使用了GET方法。</p><p id="d5a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还知道当提交时，表单重定向到同一个页面(我们可以从分配给“action”的值“#”中推断出这一点)。</p><p id="62b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们知道我们有三个参数:</p><ul class=""><li id="86a4" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc lr ls lt lu bi translated"><strong class="ih hj">用户名:</strong>这将具有用户名值。</li><li id="54bc" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated"><strong class="ih hj">密码:</strong>这个会有密码值。</li><li id="aa54" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated"><strong class="ih hj">登录:</strong>这与提交按钮相关联，并且将具有固定值“<strong class="ih hj">登录</strong></li></ul></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="1b78" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">获取单词表</h1><p id="3529" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">每当您打算使用THC Hydra执行字典攻击时，您将有两种选择。</p><p id="9fdb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据您可能从目标那里获得或没有获得的信息，您可以:</p><ol class=""><li id="2da4" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc ma ls lt lu bi translated">为Hydra提供两个文件，(也称为单词列表):一个包含候选用户名列表，另一个包含候选密码；</li><li id="f8a1" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc ma ls lt lu bi translated">或者，如果您足够幸运地知道一个用户名，您可以只为它提供一个密码单词列表和一个用户名。注意，您也可以反过来做，这意味着您可以为可能的用户提供单个密码和一个单词列表(这在密码喷射攻击中非常有用)。</li></ol><p id="6c1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我们的例子，我们不知道用户名，所以我们将使用选项1，因此我们将提供2个单词列表。</p><p id="f912" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们启动hydra时，它将尝试这两个单词列表中存在的所有用户名和密码组合。</p><p id="5359" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您没有用户名和密码的词汇表，您可以从<a class="ae kv" href="https://github.com/danielmiessler/SecLists" rel="noopener ugc nofollow" target="_blank"> SecLists </a>下载您需要的内容。这是各种字典攻击的单词表集合。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="2cca" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">编写THC Hydra命令</h1><p id="e896" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">现在我们已经拥有了所有需要的元素，让我们创建我们的九头蛇指挥部。</p><p id="b138" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">运行hydra来强制登录表单的语法如下:</p><pre class="je jf jg jh fd kw kx ky kz aw la bi"><span id="b1f3" class="lb jt hi kx b fi lc ld l le lf">hydra -L USERFILE -P PASSWORDFILE DOMAIN/IP METHOD "REDIRECTIONURL:PARAMETERS:FAILMESSAGE:H=COOKIES"</span></pre><p id="ade8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是每个元素的含义:</p><ul class=""><li id="a661" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc lr ls lt lu bi translated">USERFILE:候选用户名的单词列表。</li><li id="bf82" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">PASSWORDFILE:候选密码的单词列表。</li><li id="290b" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">DOMAIN/IP:目标web应用程序的域名或IP地址。对于我们的例子，这是“本地主机”。</li><li id="0144" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">方法:因为我们有一个GET方法，我们将在这里使用http-get-form。如果我们有POST，我们会使用http-post-form。</li><li id="3d25" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">REDIRECTIONURL:这是在按下submit后表单将我们重定向到的完整URL。因此，对于我们的例子，我们将使用“/DVWA/vulnerabilities/brute/”。</li><li id="c7f8" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">参数:这是我们将要输入参数的地方。这将等同于以下内容:“username=^USER^&amp;password=^PASS^&amp;login=login”，其中^user^和^pass^分别是用户名和密码单词列表中值的占位符。</li><li id="3a6d" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">FAILMESSAGE:这是当我们输入不正确的凭据时，web应用程序显示的错误消息。这就是Hydra如何知道它得到了正确的用户名和密码。要获得此消息，我们只需用不正确的凭据填写表单。当我们试图在我们的目标上这样做时，我们得到以下消息:</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mb"><img src="../Images/e2814e879b1783c56a5fcd67c08114aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/0*Hw25yuZvPd6YAr4M.png"/></div></figure><ul class=""><li id="f786" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc lr ls lt lu bi translated">COOKIES:这个值并不总是必需的，但有时可能是必需的。例如，如果您需要通过身份验证才能访问您的目标页面，那么您需要向Hydra提供与您的身份验证会话相关的cookies。否则，它将无法访问该页面。因此，要检索用于cookie的值，您应该右键单击web页面并选择Inspect。在出现的开发工具上，选择存储选项，然后单击cookies(此方法可能因您的web浏览器而异)。按照这个过程，我得到了以下结果:</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/fa1997b2f4e1324ab205936110d7178e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HAswpaKhBPDLUSdx.png"/></div></div></figure><h1 id="19dd" class="js jt hi bd ju jv mc jx jy jz md kb kc kd me kf kg kh mf kj kk kl mg kn ko kp bi translated">发起攻击</h1><p id="57f9" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">现在，我们的命令应该是这样的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/29600861c782d3d8a2f805147bf6870b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aM5B6UW_rX6cBFoY.png"/></div></div></figure><p id="5243" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在命令末尾添加了-V标志，用于详细输出。这告诉Hydra不仅要在屏幕上显示找到的凭证，还要显示所有失败的尝试。</p><p id="c513" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们启动命令时，我们应该看到Hydra尝试用户名和密码的组合。</p><p id="ff7e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几次尝试后，Hydra找到了正确的用户名和密码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/0ded9f23c7097b816f788fbe4eda1364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ukTmeOsPgbbmNg4O.png"/></div></div></figure><p id="77cb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如这篇文章所展示的，我们之所以成功，是因为用户名和密码简单得可笑。如果有足够的复杂性，我们将花费更多的时间来找到正确的凭证。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="772e" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结论</h1><p id="15c1" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">开发THC Hydra是为了证明破解密码是多么容易。它支持许多功能，包括许多具有有趣特性的模块。在这篇文章中，我们仅仅触及了皮毛。</p><p id="a3c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想更全面地了解九头蛇的能力，我邀请你阅读帮助:</p><pre class="je jf jg jh fd kw kx ky kz aw la bi"><span id="60b0" class="lb jt hi kx b fi lc ld l le lf">hydra -h</span></pre></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><p id="5b5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="mh">原载于2021年8月6日</em><a class="ae kv" href="https://patchthenet.com/articles/using-thc-hydra-to-brute-force-login-forms/" rel="noopener ugc nofollow" target="_blank"><em class="mh">【https://patchthenet.com】</em></a><em class="mh">。</em></p></div></div>    
</body>
</html>