<html>
<head>
<title>Building a modal with Lit Element</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用发光元素建立模型</h1>
<blockquote>原文：<a href="https://medium.com/codex/building-a-modal-with-lit-element-3bab786a5efa?source=collection_archive---------4-----------------------#2021-08-11">https://medium.com/codex/building-a-modal-with-lit-element-3bab786a5efa?source=collection_archive---------4-----------------------#2021-08-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3d21" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">让我们构建一个简单的具有漂亮外观和交互式按钮的模态对话框</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/5129cd3774c57fcb975109f9cc65b608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SElpgb2JMSnoct4F"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">由<a class="ae jn" href="https://unsplash.com/@halacious?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Halacious </a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="81c6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意:尽管本教程将扩展一个现有的项目，但它将为构建一个独立的模型奠定基础，该模型可以集成到基于web组件的应用程序中的任何地方。</p><p id="bb6e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在<a class="ae jn" rel="noopener" href="/codex/building-a-tic-tac-toe-game-with-litelement-73e479f5a66d">之前的教程</a>中，我们用轻量级Javascript库<a class="ae jn" href="https://lit-element.polymer-project.org/guide" rel="noopener ugc nofollow" target="_blank"> Lit元素</a>构建了一个井字游戏。现在，屏幕上的游戏有点乏味，而且对组件的美感有一点破坏。在本教程中，我们将添加一个漂亮的模型来显示游戏消息，并可以集成到其他组件和支持web组件的页面中。好吧，我们开始吧。</p><h2 id="a09d" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">组件基础结构和属性</h2><p id="d01f" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">首先，让我们记住一点项目结构。正如您所记得的，有一个包含主<code class="du lk ll lm ln b">TicTacToe.js</code>组件源代码的<code class="du lk ll lm ln b">src</code>文件夹。组件。在里面，我们还为每个单独的单元定义了另一个组件。现在，在这个文件夹中，我们将生成模态组件。</p><pre class="iy iz ja jb fd lo ln lp lq aw lr bi"><span id="4161" class="kk kl hi ln b fi ls lt l lu lv">./<br/>├── tic-tac-toe/<br/>│   ├── ...<br/>│   ├── src/<br/>│   │   ├── TicTacToe.js<br/>│   │   ├── TicTacToeCell.js<br/>│   │   └── ModalDialog.js<br/>│   ├── ...</span></pre><p id="63c1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这里，我把我的名字命名为<code class="du lk ll lm ln b">Modaldialog</code>，但是你可以随意命名。现在让我们用下面的代码填充这个文件:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="ba9a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可能会注意到，这个文件的结构与其他组件相似。我们导入了<code class="du lk ll lm ln b">LitElement</code>库，以及<code class="du lk ll lm ln b">html</code>和<code class="du lk ll lm ln b">css</code>函数来定义模板和样式。我们还导入了一个名为<code class="du lk ll lm ln b">classMap</code>的函数，它是litElement包的一部分。这个函数允许我们将组件的属性映射到css类中。</p><p id="2058" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">说到属性，这里我们也定义了一些，用来定义我们的模态。首先，<code class="du lk ll lm ln b">open</code>属性是一个布尔值，它告诉组件要么显示，要么保持隐藏。然后，<code class="du lk ll lm ln b">title</code>和<code class="du lk ll lm ln b">text</code>属性将设置在模态中显示的内容。<code class="du lk ll lm ln b">clickAction</code>是显示在模态按钮上的文本。这里要注意的最后一件事是<code class="du lk ll lm ln b">constructor</code>方法，它用一些初始值初始化类，在这种情况下，当组件在页面中第一次被实例化时，<code class="du lk ll lm ln b">open</code>属性将被设置为false以隐藏组件。</p><h2 id="8b76" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">样式和功能</h2><p id="3d8d" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">现在，制作一个模型的全部目的就是要有一个好看的组件来显示消息。没有一些样式我们无法完成这个，所以让我们定义它们以及渲染方法和功能。请将这些方法添加到我们的组件类:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="7198" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们不会进入css的细节，但让我们简单回顾一下最重要的部分。这个<code class="du lk ll lm ln b">:host</code>只是为我们的模态定义了一个漂亮的字体。现在我们有了一个<code class="du lk ll lm ln b">wrapper</code> div，它将包含所有内容，并将组件置于屏幕中央。这里需要注意的是，这个包装器总是相对于它的父组件的，父组件可以是另一个组件，所以整个模态将相对于它的容器居中。接下来我们有一个<code class="du lk ll lm ln b">overlay</code> div，它不包含任何东西，它的唯一目的是在模态的背景上设置一点不透明度，并且当它被点击时禁用模态。最后,<code class="du lk ll lm ln b">dialog</code>本身就是模态的，我们为它定义了一个漂亮的样式和按钮的样式。</p><p id="f568" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，我们有了为组件定义模板的<code class="du lk ll lm ln b">render</code>方法。组件的所有html内容都在这里设置。</p><p id="60e0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们讨论一下开头提到的<code class="du lk ll lm ln b">classMap</code>函数。它接收一个带有键值对的Javascript对象，根据真值设置或取消设置类。在这种情况下，它将总是设置类<code class="du lk ll lm ln b">wrapper</code>，因为它总是接收这个键的真值，并且<code class="du lk ll lm ln b">open</code>类将根据组件的<code class="du lk ll lm ln b">open</code>属性设置。简而言之，当<code class="du lk ll lm ln b">open</code>属性为真时，该div中的类将是<code class="du lk ll lm ln b">class="wrapper open"</code>，当属性为假时，该div中的类只是<code class="du lk ll lm ln b">class=</code>“包装器”。</p><p id="27a2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，<code class="du lk ll lm ln b">close</code>方法会将<code class="du lk ll lm ln b">open</code>属性设置为false，当您单击覆盖图时，它会被触发的事件调用。它也将在按钮点击事件中被调用，这将由<code class="du lk ll lm ln b">handleClick</code>方法管理。这个<code class="du lk ll lm ln b">handleClick</code>方法还将向组件的父组件发送一个事件，让它知道按钮刚刚被按下。这将允许我们将模态中的按钮点击与父节点中的一些自定义例程连接起来，在本例中是游戏。</p><h2 id="95de" class="kk kl hi bd km kn ko kp kq kr ks kt ku jx kv kw kx kb ky kz la kf lb lc ld le bi translated">与应用程序集成</h2><p id="dd7a" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">现在一切都在一起了！让我们将它与完整的应用程序集成在一起。现在，尽管本教程特别关注于上一个教程中构建的井字游戏，但事件触发和监听可以推广到任何其他实现。</p><p id="427e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在让我们回到<code class="du lk ll lm ln b">TicTacToe.js</code>文件，也就是游戏本身。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="6d1b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先在文件的顶部，让我们导入<code class="du lk ll lm ln b">ModalDialog</code>组件。现在，随着应用程序的定义，我们在构造函数中绑定了所有东西来监听<code class="du lk ll lm ln b">player-win</code>和<code class="du lk ll lm ln b">tie</code>事件，这些事件是在检查胜利或平局条件时触发的。在事件监听器中，我们简单地定义了一个箭头函数来设置模态组件的所有值，特别是<code class="du lk ll lm ln b">open</code>属性将被设置为<code class="du lk ll lm ln b">true</code>来显示模态。最后，在游戏的<code class="du lk ll lm ln b">render</code>方法中，我们将添加一个带有监听器的<code class="du lk ll lm ln b">&lt;modal-dialog&gt;</code> html元素到它的<code class="du lk ll lm ln b">button-click</code>事件中。该事件被绑定到<code class="du lk ll lm ln b">resetGame</code>方法，该方法只调用<code class="du lk ll lm ln b">resetTiles</code>和<code class="du lk ll lm ln b">initGame</code>。这最后一个在之前的教程中被用来初始化游戏的变量和棋盘状态，而<code class="du lk ll lm ln b">resetTiles</code>将重置棋盘单元格中的所有符号以不显示任何符号。</p><h1 id="d697" class="ly kl hi bd km lz ma mb kq mc md me ku io mf ip kx ir mg is la iu mh iv ld mi bi translated">决赛成绩</h1><p id="89cd" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">最后，这是此模态的两种情况的外观:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mj"><img src="../Images/0ab387fa2625730c676fbefd1976bf88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/1*UOHh1ZEqe8iT-BD03iBm4Q.gif"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">表示玩家胜利的模式</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mj"><img src="../Images/d910af6785de6a8f9cfbeb739fc788cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/1*wCn230PFzXqWwNN6GojFrQ.gif"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">表示结的模态</figcaption></figure><h1 id="4c11" class="ly kl hi bd km lz ma mb kq mc md me ku io mf ip kx ir mg is la iu mh iv ld mi bi translated">结论</h1><p id="7891" class="pw-post-body-paragraph jo jp hi jq b jr lf ij jt ju lg im jw jx lh jz ka kb li kd ke kf lj kh ki kj hb bi translated">我们已经构建了一个与上下文无关的模态对话框组件，因此它可以添加到任何基于web组件的应用程序中。这个模式有一个漂亮的样式和可配置的标题和文本显示，以及一个按钮来触发父组件中的事件，以向我们的页面添加功能。</p><p id="79da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我希望你喜欢这个小教程！</p></div></div>    
</body>
</html>