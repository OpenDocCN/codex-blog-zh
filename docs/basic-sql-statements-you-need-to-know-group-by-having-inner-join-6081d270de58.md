# æ‚¨éœ€è¦äº†è§£çš„åŸºæœ¬ SQL è¯­å¥(GROUP BY/HAVING/INNER JOIN)

> åŸæ–‡ï¼š<https://medium.com/codex/basic-sql-statements-you-need-to-know-group-by-having-inner-join-6081d270de58?source=collection_archive---------8----------------------->

> ä»‹ç»

åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](/@24littledino/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†éå¸¸åŸºæœ¬çš„ SQL è¯­å¥ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨ç¨å¾®å¤æ‚ä¸€ç‚¹çš„â€” `GROUP BY`ã€`HAVING`å’Œ`INNER JOIN`ï¼Œç„¶è€Œå®ƒä»¬éå¸¸å¼ºå¤§ã€‚

> *SQL è¯­å¥*

åœ¨ä¸‹é¢çš„æ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŒä¸€ä¸ªè¡¨ä½œä¸ºç¤ºä¾‹ã€‚è¿™ä¸ªè¡¨å«åš**å®¢æˆ·**ï¼Œè®°å½•äº†å®¢æˆ·çš„ä¿¡æ¯ã€‚å®ƒæœ‰ 4 ä¸ªç‰¹å¾â€”â€”`ID`**`Name`**`City`**`Age`ï¼Œè¿™ä¸ªè¡¨ä¸­æœ‰ 6 ä¸ªå®¢æˆ·ã€‚æ­¤å¤–ï¼Œ**ä¸»é”®æ˜¯** `**ID**`ï¼Œå› ä¸ºæ‚¨åªèƒ½ä½¿ç”¨`ID`æ¥å”¯ä¸€åœ°æ ‡è¯†æ¯ä¸€è¡Œã€‚******

****å¦‚æœä½ å¯¹å…³ç³»æ•°æ®åº“ä¸ç†Ÿæ‚‰ï¼Œå»çœ‹çœ‹æˆ‘çš„[ä¸Šä¸€ç¯‡æ–‡ç« ](/@24littledino/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)ï¼****

****![](img/8019b5dcd204e7e6c465790ce47b49a4.png)****

******1ã€‚åˆ†ç»„ä¾æ®******

****ç¬¬ä¸€ä¸ªç”¨äºå°†å…·æœ‰ç›¸åŒå€¼**çš„è¡Œåˆ†ç»„ä¸ºæ±‡æ€»è¡Œ**ï¼Œæ‚¨å¯ä»¥å†³å®š**æƒ³è¦å“ªç§ç±»å‹çš„æ±‡æ€»**(å³`MAX` / `MIN` / `AVG` / `SUM` / `COUNT`)ã€‚****

****æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“æ¯ä¸ªåŸå¸‚å®¢æˆ·çš„å¹³å‡å¹´é¾„ã€‚æˆ‘ä»¬å¦‚ä½•å¯¹å®¢æˆ·è¿›è¡Œåˆ†ç»„ï¼Ÿ****

****æ˜¯çš„ï¼Œ**æŒ‰åŸå¸‚**ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`AVG`å‡½æ•°å¾—åˆ°æ¯ä¸ªåŸå¸‚çš„å¹³å‡å¹´é¾„ã€‚æ›´å…·ä½“åœ°è¯´ï¼ŒæŸ¥è¯¢ç±»ä¼¼äº`SELECT City, **AVG(Age)** FROM customers **GROUP BY City**;`ï¼Œå®ƒè¿”å›â€”****

****![](img/c8cbb61d1104786ca7865f96c1e4372b.png)****

****å¦‚æœæˆ‘ä»¬ç°åœ¨æƒ³çŸ¥é“**æ¯ä¸ªåŸå¸‚çš„å®¢æˆ·æ€»æ•°**è¯¥æ€ä¹ˆåŠï¼Ÿ****

****æˆ‘ä»¬å°†åŠŸèƒ½æ›´æ”¹ä¸º`COUNT`ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯`COUNT(*)`å°†**åŒ…æ‹¬é‡å¤å€¼å’Œç©ºå€¼**ï¼Œå®ƒåªæ˜¯è®¡ç®—è¡Œæ•°ã€‚å¦‚æœæ‚¨æƒ³è®¡ç®—**å”¯ä¸€**è¡Œçš„æ•°é‡ï¼Œæ‚¨æœ‰ä¸¤ä¸ªé€‰é¡¹ã€‚****

*   ****åœ¨åˆ—åå‰æ·»åŠ `**DISTINCT**`å…³é”®å­—ã€‚å®ƒå°†åˆ é™¤é‡å¤é¡¹(å‚è§[å¦‚ä½•ä½¿ç”¨](/codex/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)`[DISTINCT](/codex/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)`)â€”â€”`SELECT City, COUNT(**DISTINCT** Name) Customers FROM customers GROUP BY City;`ã€‚****
*   ****ç»Ÿè®¡**ä¸»é”®**ä¸­çš„è¡Œæ•°ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ä¹‹å‰è®¨è®ºè¿‡çš„[ï¼Œä¸»é”®æ˜¯ç”¨æ¥å”¯ä¸€æ ‡è¯†è¡Œçš„ã€‚å…¶ä¸­ä¸ä¼šæœ‰ä»»ä½•é‡å¤çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å±æ€§æ¥æŸ¥æ‰¾å”¯ä¸€è¡Œçš„æ•°é‡â€” `SELECT City, COUNT(**ID**) Customers FROM customers GROUP BY City;`ã€‚](/codex/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)****

****è¿™ä¸¤ç§æ–¹æ³•äº§ç”Ÿç›¸åŒçš„ç»“æœï¼Œå³ä½¿`Name`ä¸æ˜¯ä¸»é”®ã€‚****

****âš¡ç¬¬äºŒä¸ªåˆ—åæ˜¯`Customers`ï¼Œå› ä¸ºæˆ‘ä»¬**é‡å‘½å**è¯¥åˆ—ï¼Œæ–¹æ³•æ˜¯åœ¨åŸå§‹åˆ—ååç»™æ–°åç§°åˆ†é…ä¸€ä¸ªç©ºæ ¼ã€‚****

****![](img/b3df5d054223f235284aa19a592a31be.png)****

****è¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨`GROUP BY`çš„æ–¹å¼ï¼ä¸‹ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ‰¾åˆ°è‡³å°‘æœ‰ä¸¤ä¸ªé¡¾å®¢çš„åŸå¸‚æ€ä¹ˆåŠï¼Ÿ****

****ä½ å¯èƒ½ä¼šæƒ³åˆ°`WHERE`å­å¥(è§[å¦‚ä½•ä½¿ç”¨](/codex/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1) `[WHERE](/codex/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)`)ã€‚ä¸å¹¸çš„æ˜¯ï¼Œ`WHERE` **ä¸èƒ½å’Œ**ä¸€èµ·ä½¿ç”¨èšé›†å‡½æ•°ï¼Œæ¯”å¦‚`COUNT`ã€`SUM`ã€`AVG`ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¦ä¸€ä¸ªæ¡æ¬¾â€” `HAVING`ã€‚****

******2ã€‚æ‹¥æœ‰******

****ç®€å•åœ°è¯´ï¼Œ`HAVING`çš„è¡Œä¸ºä¸`WHERE`å®Œå…¨ç›¸åŒï¼Œé™¤äº†å®ƒæ˜¯ä¸ºèšåˆå‡½æ•°è®¾è®¡çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ‰¾åˆ°è‡³å°‘æœ‰ä¸¤ä¸ªå®¢æˆ·çš„åŸå¸‚ï¼Œæˆ‘ä»¬åªéœ€å†™ä¸‹è¿”å›****

****![](img/2d25982586ca1183a6567559fbf5a9a8.png)****

****å¦‚æœä½ æ£€æŸ¥å‰é¢çš„ç»“æœï¼Œä½ ä¼šå‘ç°å·´é»ç¡®å®æ˜¯å”¯ä¸€ä¸€ä¸ªè‡³å°‘æœ‰ä¸¤ä¸ªé¡¾å®¢çš„åŸå¸‚ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœä½ æƒ³æ‰¾åˆ°å“ªä¸ªåŸå¸‚çš„å®¢æˆ·å¹³å‡å¹´é¾„é«˜äº 30 å²ï¼Œä½ å°±å†™ T0ã€‚****

******3ã€‚å†…éƒ¨è¿æ¥******

****çŸ¥é“å¦‚ä½•ä»ä¸€ä¸ªè¡¨ä¸­æå–ä¿¡æ¯æ˜¯æœ‰ç”¨ä¸”å…³é”®çš„ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æƒ³è¦åˆå¹¶æ¥è‡ªå¤šä¸ªè¡¨çš„ä¿¡æ¯ã€‚ç‰¹åˆ«æ˜¯ï¼Œ`INNER JOIN`å…è®¸æˆ‘ä»¬é€‰æ‹©åœ¨ **2 è¡¨**ä¸­å…·æœ‰**åŒ¹é…å€¼**çš„è®°å½•ã€‚****

****è¯­æ³•æ˜¯è¿™æ ·çš„`SELECT * FROM table1 **INNER JOIN** table2 **ON** table1.column1 = table2.column2`ã€‚æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œ`ON`ç”¨äºé€‰æ‹©æ‚¨æƒ³è¦åŒ¹é…çš„åˆ—ã€‚ä¾‹å¦‚ï¼Œæ•°æ®åº“ä¸­æœ‰ä¸¤ä¸ªè¡¨ã€‚ä¸€ä¸ªå­˜å‚¨å®¢æˆ·çš„**ä¸ªäººä¿¡æ¯**ï¼Œå¦ä¸€ä¸ªå­˜å‚¨å®¢æˆ·çš„**è®¢å•ä¿¡æ¯**ã€‚æˆ‘ä»¬å¯èƒ½å¸Œæœ›åŒ¹é…ä¸¤ä¸ªè¡¨ï¼Œä»¥æŸ¥çœ‹ç‰¹å®šå¹´é¾„èŒƒå›´çš„å®¢æˆ·**çš„**è®¢å•åå¥½**ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿æ¥ä¸¤ä¸ªè¡¨ã€‚æˆ‘ä»¬åº”è¯¥é€‰æ‹©å“ªä¸€åˆ—ï¼Ÿ******

**æˆ‘çŸ¥é“æˆ‘æ²¡æœ‰ç»™ä½ ä¸¤å¼ è¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šä½¿ç”¨**å®¢æˆ· id**ã€‚ID æ˜¯åˆé€‚çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥å”¯ä¸€åœ°æ ‡è¯†æ¯ä¸ªå®¢æˆ·ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨**åç§°**ä½œä¸ºåŒ¹é…å±æ€§ã€‚å‡ ä¹å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œä¸€å®šæœ‰ä¸æ­¢ä¸€ä¸ªåŒåçš„å®¢æˆ·ï¼Œæˆ‘ä»¬å¦‚ä½•ç¡®åˆ‡åœ°çŸ¥é“è°è®¢è´­äº†å“ªäº›äº§å“ï¼Ÿæ˜¯èŠåŠ å“¥çš„çº¦ç¿°è¿˜æ˜¯ä¼¦æ•¦çš„çº¦ç¿°ï¼Ÿ**

**è®©æˆ‘ä»¬åšä¸€ä¸ªæœ‰è¶£çš„å®éªŒã€‚å‡è®¾æˆ‘ä»¬åœ¨`Name`å±æ€§â€” `SELECT * FROM customers c1 **INNER JOIN** customers c2 **ON** c1.Name = c2.Name`ä¸Šå°†å®¢æˆ·è¡¨ä¸å…¶è‡ªèº«è¿›è¡Œå†…éƒ¨è¿æ¥ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš(æˆ‘çŸ¥é“è¿™çœ‹èµ·æ¥æœ‰ç‚¹ç–¯ç‹‚)ã€‚ç»“æœä¼šæ˜¯æ€æ ·çš„ï¼Ÿ**

**ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªé¡¾å®¢éƒ½åº”è¯¥ä¸è‡ªå·±ç›¸åŒ¹é…ã€‚ç„¶è€Œï¼Œäº‹å®å¹¶éå¦‚æ­¤ï¼Œç»“æœå®é™…ä¸Šæ˜¯â€”**

**![](img/d431eac69a73caf1bd55cfdfb78f25ea.png)**

**å¤§å¤šæ•°å®¢æˆ·å¦‚æˆ‘ä»¬æ‰€æ–™è¢«åˆå¹¶ï¼Œä½†æ˜¯çº¦ç¿°å‡ºç°äº† 4 æ¬¡ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ**

**æ˜¯çš„ï¼Œä½ æ˜¯å¯¹çš„ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ä¸»é”®(`ID`)æ¥åˆå¹¶è¡¨ã€‚å› æ­¤ï¼ŒèŠåŠ å“¥çš„çº¦ç¿°ä¸å¾—ä¸ä¸è‡ªå·±å’Œä¼¦æ•¦çš„çº¦ç¿°åˆå¹¶ã€‚åŒæ ·çš„äº‹æƒ…ä¹Ÿå‘ç”Ÿåœ¨å¦ä¸€ä¸ªçº¦ç¿°èº«ä¸Šã€‚ä¼¦æ•¦çš„çº¦ç¿°ä¸å¾—ä¸ä¸è‡ªå·±å’ŒèŠåŠ å“¥çš„çº¦ç¿°åˆå¹¶ã€‚ç°åœ¨ä½ çœ‹åˆ°é—®é¢˜äº†ã€‚æˆ‘ä»¬æ›´å–œæ¬¢ä½¿ç”¨**ä¸»é”®**ä½œä¸ºåŒ¹é…å±æ€§æ¥é¿å…è¿™ä¸ªé—®é¢˜(å³åŒ¹é…çš„å®¢æˆ·å®é™…ä¸Šæ˜¯ä¸åŒçš„äºº)ã€‚**

**ä½†æ˜¯ï¼Œå¦‚æœæ‚¨åšæŒï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨`Name`æ¥åˆå¹¶ 2 ä¸ªè¡¨ï¼Œåªæ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé¢å¤–çš„åˆ—â€” `City`ã€‚å› ä¸ºæˆ‘ä»¬çš„æ¡Œå­å¾ˆå°ï¼Œä½ å¯ä»¥çœ‹åˆ°å”¯ä¸€çš„é—®é¢˜æ˜¯æœ‰ä¸¤ä¸ªçº¦ç¿°ä½åœ¨ä¸åŒçš„åŸå¸‚ã€‚å¦‚æœæˆ‘ä»¬åŒæ—¶ä½¿ç”¨`Name`å’Œ`City`æ¥åˆå¹¶è¡¨æ ¼ï¼Œä»–ä»¬å°†è¢«è§†ä¸ºä¸åŒçš„äººã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨**å¤šåˆ—æ¡ä»¶**ã€‚æŸ¥è¯¢æ˜¯è¿™æ ·çš„â€” `SELECT * FROM customers c1 INNER JOIN customers c2 ON c1.Name = c2.Name AND **c1.City = c2.City**;`ï¼Œå®ƒè¿”å›â€”**

**![](img/f42779060b8e86e459c1dd96cb733a66.png)**

**é—®é¢˜å·²è§£å†³ï¼èŠåŠ å“¥çš„çº¦ç¿°åªé…è‡ªå·±ï¼Œä¼¦æ•¦çš„çº¦ç¿°ä¹Ÿé…è‡ªå·±ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„æ•°æ®åº“å¾ˆå°ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ‰¾åˆ°é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬çš„æ•°æ®åº“è¶³å¤Ÿå¤§ï¼Œæˆ‘ä»¬åº”è¯¥æ‰¾åˆ°ä¸¤ä¸ªä½åœ¨åŒä¸€ä¸ªåŸå¸‚çš„åŒååŒå²çš„äººã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦`ID`æ¥åˆå¹¶è¡¨(è¿™å®é™…ä¸Šæ˜¯æœ€å¥½çš„é€‰æ‹©)ã€‚**

**æœ‰æ—¶å€™ä½ ä¹Ÿè®¸å¯ä»¥ä½¿ç”¨`INNER JOIN`è€Œä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ï¼Œä½†æ˜¯**ç»“æœæ˜¯æœ‰é—®é¢˜çš„æˆ–è€…æ²¡æœ‰åæ˜ ç°å®**ã€‚åŸºäºä¸æ­£ç¡®ä¿¡æ¯æ£€ç´¢çš„åˆ†æä¼šæœ‰åå·®ï¼ŒåŸºäºæœ‰åå·®åˆ†æçš„å†³ç­–ä¼šæœ‰åæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½åœ°å°å¿ƒï¼Œè¿™é‡Œæœ‰ä¸€äº›å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°‘é”™è¯¯çš„æ³¨æ„äº‹é¡¹ã€‚**

*   ****é€šè¿‡é‡å‘½åè¡¨æ ¼å’ŒæŒ‡å®šè¡¨æ ¼åç§°æ¥é¿å…æ­§ä¹‰****

**ä»ä¸Šé¢çš„æŸ¥è¯¢ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘å°†ç¬¬ä¸€ä¸ª`customers`è¡¨é‡å‘½åä¸º`c1`ï¼Œå°†ç¬¬äºŒä¸ª`customers`è¡¨é‡å‘½åä¸º`c2`ã€‚ç„¶åï¼Œå½“æˆ‘å¼•ç”¨ä¸€ä¸ªåˆ—æ—¶ï¼Œæˆ‘æ˜¯é’ˆå¯¹è¡¨çš„ï¼Œå³`c1.Name`(ä»ç¬¬ä¸€ä¸ª`customers`å¼€å§‹çš„`Name`åˆ—)ã€`c2.Name`(ä»ç¬¬äºŒä¸ª`customers`å¼€å§‹çš„`Name`åˆ—)ã€‚**åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‡å‘½åæ˜¯å¼ºåˆ¶æ€§çš„**ï¼Œå› ä¸ºä¸¤ä¸ªè¡¨çš„åç§°å®Œå…¨ç›¸åŒã€‚æ­¤å¤–ï¼Œ**ç”±äº`Name`åˆ—å‡ºç°åœ¨ä¸¤ä¸ªè¡¨ä¸­ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œ**è¡¨åçš„è¯´æ˜ä¹Ÿæ˜¯å¼ºåˆ¶æ€§çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸æŒ‡å®šæˆ‘ä»¬æŒ‡çš„æ˜¯å“ªä¸ª`Name`ï¼ŒSQL å°†ä¼šè¢«æ··æ·†å¹¶è¿”å›é”™è¯¯ã€‚**

**ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æœ‰ä¸åŒçš„è¡¨åå’Œä¸åŒçš„åˆ—åï¼Œ**é‡å‘½åå’ŒæŒ‡å®šéƒ½ä¸æ˜¯å¼ºåˆ¶æ€§çš„**ã€‚è¯´åˆ°è¿™é‡Œï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å€¾å‘äºå°†è¡¨é‡å‘½åä¸º**ä¸€ä¸ªæ›´çŸ­çš„åç§°**(æŒ‡å®šæ—¶ä¸éœ€è¦é”®å…¥å®Œæ•´çš„åç§°)ã€‚ä¸ºäº†æ¸…æ™°å’Œè°ƒè¯•ï¼Œæˆ‘ä»¬è¿˜åœ¨åˆ—**å‰æŒ‡å®šäº†è¡¨å(å½“æ‚¨çŸ¥é“åˆ—æ¥è‡ªå“ªé‡Œæ—¶ï¼Œè°ƒè¯•ä¼šæ›´å®¹æ˜“)ã€‚å› æ­¤ï¼Œé‡å‘½åå’ŒæŒ‡å®šç»å¯¹æ˜¯éœ€è¦ä¿æŒçš„å¥½ä¹ æƒ¯ã€‚****

*   ****æ— åŒ¹é…å€¼â€”è¿”å›ç©ºè¡¨****

**å½“åˆ—ä¸­æ²¡æœ‰åŒ¹é…å€¼æ—¶ï¼ŒSQL åªè¿”å›ä¸€ä¸ªç©ºè¡¨ã€‚è¿™é€šå¸¸æ˜¯æŸ¥è¯¢å¤±è´¥çš„æ ‡å¿—ã€‚æ‚¨å¯èƒ½ä½¿ç”¨äº†é”™è¯¯çš„è¡¨ï¼Œå¼•ç”¨äº†é”™è¯¯çš„åˆ—ï¼Œæˆ–è€…æ•°æ®åº“æœ¬èº«æœ‰é—®é¢˜ã€‚**

*   ****æ£€æŸ¥è¡¨åˆ†åŒºçš„ç»“æœ****

**ç°å®ä¸–ç•Œä¸­çš„ä¸€ä¸ªè¡¨å¯èƒ½æœ‰æ•°ä¸‡è¡Œ(ç”šè‡³æ›´å¤š)ã€‚è€ƒè™‘åˆ°æ•°æ®é‡ï¼Œå¾ˆéš¾åˆ¤æ–­è¿æ¥ç»“æœæ˜¯å¦æ­£ç¡®ã€‚æˆ‘ç»å¸¸åšçš„æ˜¯é¦–å…ˆå¯¹è¡¨è¿›è¡Œåˆ†åŒºï¼Œç„¶ååœ¨å°è¡¨ä¸ŠéªŒè¯è¿æ¥ç»“æœã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ¯ä¸ªè¡¨ä¸­éšæœºæŠ½å– 20 è¡Œï¼Œå¯¹å®ƒä»¬è¿›è¡Œå†…éƒ¨è¿æ¥ï¼Œå¹¶æ£€æŸ¥ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ç„¶åï¼Œæˆ‘ä»¬é‡å¤éªŒè¯è¿‡ç¨‹å‡ æ¬¡ï¼Œå› ä¸ºè¿™äº›è¡Œæ˜¯éšæœºé€‰æ‹©çš„ã€‚æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼ŒæŸ¥è¯¢åªé€‚ç”¨äºéƒ¨åˆ†æ•°æ®(ä¾‹å¦‚ï¼ŒéªŒè¯æ•°æ®é›†ä¸­æ²¡æœ‰é€‰æ‹©ä¸åŒåŸå¸‚çš„çº¦ç¿°)ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°æ®é›†ã€‚**

*   ****é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„åˆ—****

**å¦‚æ‚¨æ‰€è§ï¼Œå³ä½¿ä¸¤ä¸ªè¡¨ä¸­çš„åˆ—å…·æœ‰å®Œå…¨ç›¸åŒçš„åç§°å’ŒåŒ¹é…çš„å€¼ï¼Œå®ƒä»¬ä¹Ÿä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚æˆ‘ä»¬åº”è¯¥é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„åˆ—**ä»¥é¿å…å†—ä½™**ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨`Name`å’Œ`City`å±æ€§ä¸Šè¿æ¥ä¸¤ä¸ªè¡¨`c1`ã€`c2`ï¼Œé‚£ä¹ˆè¿™ä¸¤åˆ—ä¸­çš„ç»“æœå€¼åœ¨ä¸¤ä¸ªè¡¨ä¸­æ˜¯ç›¸åŒçš„(è¿™å®è´¨ä¸Šå°±æ˜¯è¿æ¥çš„å«ä¹‰)ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©`c1.Name, c1.City`æˆ–`c2.Name, c2.City`ã€‚ç»“æœè¡¨å°†æ¯”åŸå§‹è¡¨æ›´æ•´æ´(æ˜¾ç¤ºç›¸åŒçš„å±æ€§ä¸¤æ¬¡)ã€‚**

*   ****è¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨****

**å…¶å®æˆ‘ä»¬å¯ä»¥åŠ å…¥**å¤šä¸ªè¡¨**ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­æœ‰ 3 ä¸ªè¡¨ã€‚ç¬¬ä¸€ä¸ªå­˜å‚¨å®¢æˆ·çš„**ä¸ªäººä¿¡æ¯**ï¼›ç¬¬äºŒä¸ªå­˜å‚¨å®¢æˆ·çš„**è®¢å•ä¿¡æ¯**ï¼›æœ€åä¸€ä¸ªå­˜å‚¨äº§å“çš„**ç»†èŠ‚ã€‚æˆ‘ä»¬å¯èƒ½æƒ³è¦åŒ¹é… 3 ä¸ªè¡¨æ¥æŸ¥çœ‹ç‰¹å®šå¹´é¾„èŒƒå›´**çš„å®¢æˆ·**çš„**äº§å“åå¥½**ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦**åŒ¹é… 3 ä¸ªè¡¨**ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªè¡¨æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºç¬¬äºŒä¸ªè¡¨ä¸åŒ…å«äº§å“ç»†èŠ‚ï¼›åŒ¹é…ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªè¡¨æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºç¬¬äºŒä¸ªè¡¨ä¸åŒ…å«å®¢æˆ·è¯¦ç»†ä¿¡æ¯(å³å¹´é¾„)ã€‚åŒ¹é…ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªè¡¨æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæ²¡æœ‰å…±åŒçš„å±æ€§ã€‚****

**ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸æŠŠæ‰€æœ‰çš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ä¸­ã€‚å®é™…ä¸Šï¼Œè¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´**å†—ä½™å’Œå¼‚å¸¸**ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è§„èŒƒåŒ–è¡¨æ ¼(ä¸è¿‡è¿™æ˜¯å¦ä¸€å¤©çš„ä¸»é¢˜)ã€‚è¿™é‡Œçš„å…³é”®ç‚¹æ˜¯æˆ‘ä»¬å¯ä»¥è¿æ¥ä»»æ„å¤šçš„è¡¨ï¼Œè¯­æ³•ç±»ä¼¼äº`SELECT * FROM table1 **INNER JOIN** (table2 **INNER JOIN** table3 **ON** table2.column1 = table3.column2) **ON** table1.column1 = table2.column2;`ã€‚**

**æ­å–œä½ ï¼Œä½ å·²ç»èµ°äº†è¿™ä¹ˆè¿œï¼åœ¨[ä¸Šä¸€ç¯‡](/codex/basic-sql-statements-you-need-to-know-select-distinct-order-by-limit-where-26b703df8aa1)å’Œæœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç»å†äº†`SELECT`ã€`ORDER BY`ã€`LIMIT`ã€`DISTINCT`ã€`WHERE`ã€`GROUP BY`ã€`HAVING`ã€`INNER JOIN`ï¼Œè¿™äº›å…³é”®è¯/ä»å¥åº”è¯¥è¶³å¤Ÿä½ ä»æ•°æ®åº“ä¸­æå–ä¿¡æ¯äº†ã€‚ç„¶è€Œï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚ä½ å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°å¤§é‡çš„ SQL ç»ƒä¹ ï¼Œå»ç»ƒä¹ å§ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æµåˆ©åœ°ç»„åˆä»å¥äº†ã€‚ç¥ä½ å¥½è¿ï¼**

**ğŸ’›å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä¸€å®šè¦å…³æ³¨æˆ‘ï¼è¿™çœŸçš„é¼“åŠ±äº†æˆ‘ï¼Œæ¿€åŠ±æˆ‘ç»§ç»­åˆ†äº«ã€‚éå¸¸æ„Ÿè°¢ã€‚**

> **å‚è€ƒ**

1.  **[https://www.w3schools.com/sql/sql_groupby.asp](https://www.w3schools.com/sql/sql_groupby.asp)**
2.  **[https://www.w3schools.com/sql/sql_having.asp](https://www.w3schools.com/sql/sql_having.asp)**
3.  **[https://www.w3schools.com/sql/sql_join_inner.asp](https://www.w3schools.com/sql/sql_join_inner.asp)**