<html>
<head>
<title>Pandas Practice Series: Marketing Campaign Success</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫实践系列:营销活动成功</h1>
<blockquote>原文：<a href="https://medium.com/codex/pandas-practice-series-marketing-campaign-success-c73e0177d1c1?source=collection_archive---------15-----------------------#2022-09-04">https://medium.com/codex/pandas-practice-series-marketing-campaign-success-c73e0177d1c1?source=collection_archive---------15-----------------------#2022-09-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="ab50" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">级别:硬|公司:亚马逊</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/9ffaffcb57f1d2e5862508ab38bb92c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eTt4AjMkfJhrcYjiTmHwwA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图片来自Unsplash的Lukas Blaze</figcaption></figure><h1 id="639f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">问题描述:</h1><blockquote class="kg kh ki"><p id="87ef" class="kj kk kl km b kn ko ij kp kq kr im ks kt ku kv kw kx ky kz la lb lc ld le lf hb bi translated">你有一个用户应用内购买的表格。首次进行应用内购买的用户被置于营销活动中，他们会看到更多应用内购买的行动号召。找出由于营销活动的成功而进行额外应用内购买的用户数量。</p><p id="139c" class="kj kk kl km b kn ko ij kp kq kr im ks kt ku kv kw kx ky kz la lb lc ld le lf hb bi translated">营销活动在首次应用内购买后一天才开始，所以第一天只购买一次或多次的用户不算在内，随着时间的推移，只购买第一天购买的产品的用户也不算在内。</p></blockquote><p id="4ee3" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">这个问题来自<strong class="km hj"> Stratascratch，</strong>一个<strong class="km hj"> </strong>网站，该网站收集了基本的面试问题，并根据问题的难度和被问到的公司来组织这些问题。</p><p id="0656" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated"><strong class="km hj">数据预览:</strong></p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="6e83" class="lo jp hi lk b fi lp lq l lr ls">marketing_campaign.head()</span></pre><p id="aa22" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated"><strong class="km hj">输出:</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lt"><img src="../Images/ff86af59c9e793ae4a283dc58de156b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_m6RSC7vq8Mz-ZXmrbsoeA.png"/></div></div></figure><h1 id="c19d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">类比与第一原理方法:</h1><p id="f877" class="pw-post-body-paragraph kj kk hi km b kn lu ij kp kq lv im ks lg lw kv kw lh lx kz la li ly ld le lf hb bi translated">简单的问题可以用蛮力或类比思维来解决。但是，当一个问题如此复杂时，我们需要一个适当的第一原则方法，将问题分成几个部分，一步一步地解决它。</p><p id="af9c" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">甚至很难描绘出类比方法可能是什么样子；你不断尝试，直到达到你想要的结果，你所有的行动都是基于直觉和推理，只有当问题很简单时，直觉才是有意义的，随着问题难度的增加，直觉开始瓦解。执行的步骤似乎不可追踪，留给你的解决方案(如果你找到了解决方案)更像是一个黑箱。</p><p id="78b3" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">另一方面，当你用基本原则思维处理问题时，你会把问题分解成基本的部分。逐个解决这些问题，然后把它们放在一起。它让你有一个高度可解释且易于理解的解决方案。</p><h1 id="dedd" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">解决办法</h1><p id="9037" class="pw-post-body-paragraph kj kk hi km b kn lu ij kp kq lv im ks lg lw kv kw lh lx kz la li ly ld le lf hb bi translated">让我们逐步解决这个问题:</p><p id="38d6" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">这个想法是首先过滤符合活动标准的用户，然后检查他们购买的所有产品是否都符合标准。</p><ul class=""><li id="e5f2" class="lz ma hi km b kn ko kq kr lg mb lh mc li md lf me mf mg mh bi translated">活动的标准取决于唯一日期的数量以及每个用户的产品id。因此，我们根据用户id进行分组，并获得日期和产品id的唯一值的数量，如下所示:</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ul class=""><li id="64e6" class="lz ma hi km b kn ko kq kr lg mb lh mc li md lf me mf mg mh bi translated">问题声明活动将在第二天开始，相同产品的购买将不被计算在内。因此，我们必须只考虑那些日期和产品id都大于1的用户。</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mi mj l"/></div></figure><ul class=""><li id="0ff8" class="lz ma hi km b kn ko kq kr lg mb lh mc li md lf me mf mg mh bi translated">现在我们已经在一个单独的数据框中获得了符合标准的用户，为了方便起见，让我们在原始数据框中创建几列。</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="4c12" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">“user_product”列连接两列的值，即“user_id”和“product_id”，这样我们就不必在每次需要特定用户的产品id时都编写新的条件(因为相同的product_id可能属于不同的用户)。</p><p id="80f1" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">修改“created_at”列，将日期转换为下一行中的transform函数可以轻松处理的格式。</p><p id="a17e" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated"><a class="ae jn" href="https://pbpython.com/pandas_transform.html" rel="noopener ugc nofollow" target="_blank">转换函数</a>是一个与groupby函数结合使用的聚合函数，但它不同于其他聚合函数，如apply、count、..等等。区别在于它返回的输出大小。大多数聚合函数返回小于输入大小的输出，但在这种情况下，它返回与输入大小相同的输出。</p><p id="20a4" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">该问题指定不应该考虑在不包括在活动中的日期购买的产品id，即用户购买产品的初始/最小日期。“first_order”列包含每个用户的最小日期。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="200d" class="lo jp hi lk b fi lp lq l lr ls">marketing_campaign.head(9)</span></pre><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/c605891697b725ce31c76dbcd4eeef36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4EdxOphGH6P_HN9Wemxzng.png"/></div></div></figure><ul class=""><li id="4bd7" class="lz ma hi km b kn ko kq kr lg mb lh mc li md lf me mf mg mh bi translated">现在我们已经准备好了所有的列，我们只需要编写一个简单的条件来过滤出符合条件的用户，同时，删除每个用户在活动开始前购买的产品id。</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="7182" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="c98a" class="pw-post-body-paragraph kj kk hi km b kn lu ij kp kq lv im ks lg lw kv kw lh lx kz la li ly ld le lf hb bi translated">正如你自己所看到的，当问题被分解成基本部分，然后用自下而上的方法解决时，它会更有意义，也更容易解决。尽管我们必须将问题分解成小部分的部分并不容易，但要掌握基本原则思维的艺术，我们必须大量练习。所以敬请关注更多此类解决问题的帖子！！！</p><p id="5beb" class="pw-post-body-paragraph kj kk hi km b kn ko ij kp kq kr im ks lg ku kv kw lh ky kz la li lc ld le lf hb bi translated">如果你有兴趣以一口大小的块的形式获取每天的ML、DL和python内容，以便即使在空闲时间也可以更新知识，请查看我的Twitter帐户👇</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ml mj l"/></div></figure></div></div>    
</body>
</html>