<html>
<head>
<title>C# Tricks &amp; Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C#技巧和特性</h1>
<blockquote>原文：<a href="https://medium.com/codex/c-tricks-features-9940b5e7b4ed?source=collection_archive---------1-----------------------#2021-01-06">https://medium.com/codex/c-tricks-features-9940b5e7b4ed?source=collection_archive---------1-----------------------#2021-01-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/3e7d60479b2aae0272e0170aacc90fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DONid5HdhsR7pp8Q"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">奥斯卡·伊尔迪兹在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><div class=""/><div class=""><h2 id="e89f" class="pw-subtitle-paragraph iv hx hy bd b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm dx translated">任何编程语言都有其技巧和用途。</h2></div><p id="3b89" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">理解任何编程语言背后的技巧都可以使你的代码更短更高效。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="96c3" class="kq kr hy bd ks kt ku kv kw kx ky kz la je lb jf lc jh ld ji le jk lf jl lg lh bi translated">类中的表达式体成员</h1><p id="5c1e" class="pw-post-body-paragraph jn jo hy jp b jq li iz js jt lj jc jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">在C# OOP中，我们可以找到一些有用的工具，它们可以在编写代码时节省我们大量的时间和空间。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="9e9f" class="lw kr hy ls b fi lx ly l lz ma">public class SampleClass<br/>{<br/>    public int x { get; set; }<br/>    public int y { get; set; }<br/>    public int z =&gt; x + y; //automaticlly holds the sum<br/>}</span></pre><p id="b77f" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在下面的例子中，我们可以看到两个基本的变量声明。</p><p id="5997" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">x &amp; y变量的声明意味着我们可以从任何地方获取和设置它们的值。</p><p id="e577" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">然而，第三个声明意味着变量z将总是存储x和y的和。这意味着每次我们改变变量x或y，z存储的值将自动更新为当前x和y的和。</p><p id="acba" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">通过使用这个表达式体成员表达式，我们不需要在每次改变这些值时都使用函数或操作。</p><p id="f0bc" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hz">注意</strong>这个操作符也可以等同于返回值的函数。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="64d1" class="lw kr hy ls b fi lx ly l lz ma">public class SampleClass<br/>{<br/>   public int x { get; set;}<br/>   public int y { get; set;}<br/>   public double z =&gt; Avrage(x, y);//automaticlly holds the average</span><span id="95b2" class="lw kr hy ls b fi mb ly l lz ma">   public double Average(int x, int y)<br/>   {<br/>     double sum = x + y;<br/>     return sum / 2.0;<br/>   }<br/>}</span></pre><p id="1c19" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在上面的代码中，z的值总是x &amp; y的平均值。</p><p id="fb89" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这是另一个例子:</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="71aa" class="lw kr hy ls b fi lx ly l lz ma">int x = 5;<br/>int y = 6;<br/>int z =&gt; x + y; //stores 11 on the beginning</span><span id="fbb5" class="lw kr hy ls b fi mb ly l lz ma">public void IncX()<br/>{ <br/> this.x++; /* now x = 6 and z = 12 because we increased x by one and now z is updated to the current sum of x &amp; y which is 12*/<br/>}</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="5398" class="kq kr hy bd ks kt ku kv kw kx ky kz la je lb jf lc jh ld ji le jk lf jl lg lh bi translated">特殊关键字</h1><h2 id="44d8" class="lw kr hy bd ks mc md me kw mf mg mh la jw mi mj lc ka mk ml le ke mm mn lg mo bi translated">的名称</h2><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="cb84" class="lw kr hy ls b fi lx ly l lz ma">int myVariable = 5;<br/>Console.WriteLine(nameof(myVariable)); /*prints the name of the variable*/</span></pre><p id="3c20" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">下面几行代码使用了一个名为nameof的特殊关键字。这个关键字基本上返回您传递到的变量的名称。</p><p id="9d1c" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在本例中，代码将打印“my variable”；</p><h2 id="8bbb" class="lw kr hy bd ks mc md me kw mf mg mh la jw mi mj lc ka mk ml le ke mm mn lg mo bi translated">转到</h2><p id="d8b4" class="pw-post-body-paragraph jn jo hy jp b jq li iz js jt lj jc jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">在我们开始讨论goto关键字之前，您应该知道，尽管goto关键字看起来非常独特和有用，但理解使用它是<strong class="jp hz">而不是</strong>一个好的实践，但它是一个很好的工具，这一点很重要。</p><p id="6dc7" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">如果你是一个汇编爱好者，那么你很可能已经熟悉goto关键字。goto关键字就像汇编中的“jmp”关键字一样。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="f58e" class="lw kr hy ls b fi lx ly l lz ma">int number = 45;<br/>goto nextLabel;<br/>Console.WriteLine("My Number is 5"); //not be executed<br/>nextLabel:<br/>  Console.WriteLine(number); //will be executed</span></pre><p id="9ac4" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">goto关键字的主要思想是跳过代码行，跳到一个标签中。</p><p id="842c" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">例如，在这几行代码中，打印“My Number of 5”的那一行将永远不会被执行，因为goto关键字跳过了它并跳转到了“nextLabel”。</p><p id="58b9" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">所以屏幕上唯一会显示的是数字的值。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="57a2" class="lw kr hy ls b fi lx ly l lz ma">int number = 5;<br/>goto myLabel;<br/>if(number == 7)<br/>{<br/>myLabel:<br/>  Console.WriteLine("I like the goto keyword!");<br/>}</span></pre><p id="51dd" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">例如，如果您知道C中的goto关键字，那么您可能会认为下面的代码是合法的，但是，在C#中，goto关键字是不同的，因为这些代码是无效的。毕竟，goto关键字不能用于跳转到条件的执行块，就像我们在这个例子中看到的那样。</p><h2 id="fbb9" class="lw kr hy bd ks mc md me kw mf mg mh la jw mi mj lc ka mk ml le ke mm mn lg mo bi translated">参考和输出</h2><p id="2818" class="pw-post-body-paragraph jn jo hy jp b jq li iz js jt lj jc jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">在C#中，我们可以使用ref &amp; out关键字来更改作为参数传递给函数的变量的值，并在函数外部更新它们的值。</p><p id="9a44" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为此，C#提供了两个不同的关键字，但是，它们之间有什么区别呢？嗯，<strong class="jp hz"> out </strong>关键字接受参数，但不接受它的值，我们不能使用这个值，我们必须在函数内部初始化它，因为这样，我们可以传递给函数一个变量，这个变量没有初始化为参数。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="48d6" class="lw kr hy ls b fi lx ly l lz ma">int b; //not initialized<br/>Initialize(out b); //valid </span></pre><p id="070b" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">关键字<strong class="jp hz"> ref </strong>也改变函数外部的参数值(如果你做了改变)，但是你不必初始化函数内部的值，你也不能接受未初始化的变量作为参数。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="e0c3" class="lw kr hy ls b fi lx ly l lz ma">int b; //not initialized<br/>Initialize(ref b); //not valid</span></pre><p id="8fea" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">当我们声明一个参数为<strong class="jp hz"> ref </strong>或<strong class="jp hz"> out </strong>时，我们必须写入参数out/ref，然后是类型，然后是变量名，例如(out int b)。</p><p id="8312" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">当我们调用函数时，我们应该写出/ref和变量名(无类型声明)。下面是一个示例，说明当我们使用这些关键字时，应该如何在函数内和函数外声明:</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="3e27" class="lw kr hy ls b fi lx ly l lz ma">public class Program<br/>{<br/>  public static void Main(string[] args)<br/>  {<br/>     int a = 5;<br/>     int b = 6;<br/>     Increase(out b, ref a); //now b = 0, a = 6<br/>     Console.WriteLine(a + " " + b); //prints 6 0<br/>  }</span><span id="8ebb" class="lw kr hy ls b fi mb ly l lz ma">public static void Increase(out int b, ref int a)<br/>  { <br/>     a++; // increase the value by 1<br/>     b = 0; //requires initializing the value<br/>  }<br/>}</span></pre><p id="7c4c" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hz">注意</strong>-如果您没有初始化函数内<strong class="jp hz"> out </strong>参数的值，将会出现错误。</p><h1 id="9083" class="kq kr hy bd ks kt mp kv kw kx mq kz la je mr jf lc jh ms ji le jk mt jl lg lh bi translated">地区</h1><p id="fab4" class="pw-post-body-paragraph jn jo hy jp b jq li iz js jt lj jc jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">我们使用区域来简单地声明一段代码的用途。区域很像注释，但是它们的声明和用法是不同的。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="60c1" class="lw kr hy ls b fi lx ly l lz ma">#region sum<br/>int x = 5;<br/>int y = 6;<br/>Console.WriteLine(x + y);<br/>#endregion</span></pre><p id="9169" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这里的区域显示，位于该区域内的任何东西都代表总和。当我们编写代码并希望展示代码块的作用时，使用这种编码方式会很有用。</p><p id="0a24" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hz">注意</strong>Sum中的所有代码都会被执行，而不是像注释中那样。</p></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><h1 id="69b9" class="kq kr hy bd ks kt ku kv kw kx ky kz la je lb jf lc jh ld ji le jk lf jl lg lh bi translated">可空<t> &amp; T？</t></h1><p id="785a" class="pw-post-body-paragraph jn jo hy jp b jq li iz js jt lj jc jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">在C#中，我们可以将任何值类型设置为可空类型。<br/> <strong class="jp hz">注意</strong>引用类型已经可以为空，所以我们不需要为它们做任何事情(ReferenceType？不会引发错误，但可空的&lt; ReferenceType &gt;会)。</p><p id="7cac" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">可空类型意味着我们可以让任何类型的变量在他可以存储的其他值中存储null。</p><p id="91f6" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">比如，我们可以让一个整数存储null，除了他已经可以存储的整数。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="d414" class="lw kr hy ls b fi lx ly l lz ma">int? num = null; //legal<br/>num = 5; //legal</span></pre><p id="1b31" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">要声明一个变量可以为空，我们有两种不同的方法。</p><pre class="ln lo lp lq fd lr ls lt lu aw lv bi"><span id="4f65" class="lw kr hy ls b fi lx ly l lz ma">Nullable&lt;int&gt; integer = null; //Example 1<br/>int? integer2 = null // Example 2</span></pre></div><div class="ab cl kj kk gp kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="hb hc hd he hf"><p id="67fa" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">恭喜你！你现在知道了一些C#可以提供的很酷的工具。</p><p id="e0ef" class="pw-post-body-paragraph jn jo hy jp b jq jr iz js jt ju jc jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">希望你喜欢:)</p></div></div>    
</body>
</html>