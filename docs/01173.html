<html>
<head>
<title>Use a button to upload files on your React App (with bootstrap)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用一个按钮在React应用程序上上传文件(带引导程序)</h1>
<blockquote>原文：<a href="https://medium.com/codex/use-a-button-to-upload-files-on-your-react-app-with-bootstrap-ef963cbe8280?source=collection_archive---------2-----------------------#2021-04-09">https://medium.com/codex/use-a-button-to-upload-files-on-your-react-app-with-bootstrap-ef963cbe8280?source=collection_archive---------2-----------------------#2021-04-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/eb5444b096b553169c1ba35876a575fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*7JESyTUxJQhLA3CZGeqRFg.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated">图片由<a class="ae iq" href="https://pixabay.com/users/io-images-1096650/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1118929" rel="noopener ugc nofollow" target="_blank"> IO-Images </a>来自<a class="ae iq" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1118929" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><p id="cc55" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果您在这里，您可能在定制input[type=file]标签以匹配您的设计时遇到了问题。如果是按钮就简单多了。</p><p id="4279" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">在本教程中，我们将只关注这一点。特别是这个，是使用bootstrap完成的，所以在本教程的其余部分，我将假设您已经安装了bootstrap。</p></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jw"><img src="../Images/0eaf78a7e8f96c20dc6f36b01537fec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1tGdRWbqEhL1tVKkeelDXg.png"/></div></div></figure><p id="11b1" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">这就是你现在可能所处的位置，任何定制输入标签的尝试都会改变标签，但不会改变“选择文件”按钮。此外，按钮的显示取决于你在什么浏览器中打开它，这是很麻烦的，如果你想要一个一致的设计。</p><p id="b4d8" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">先说显示器。我们可以隐藏输入字段并添加一个按钮。使用bootstrap，我们可以将“d-none”添加到输入标签的类名中。</p><blockquote class="kf kg kh"><p id="df40" class="ir is ki it b iu iv iw ix iy iz ja jb kj jd je jf kk jh ji jj kl jl jm jn jo hb bi translated">N <!-- -->注意这也将删除上传后显示文件名的标签。在本教程的最后，我将向您展示如何显示文件名。</p></blockquote><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="6e3f" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">运行这段代码应该会给出我们所追求的外观和感觉。</p><figure class="jx jy jz ka fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/4b9078fbf93dea8f827c1d4cd18bbcdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*QHhf85RFxyTqEdWC1_DLHw.png"/></div></figure><p id="1895" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我还添加了一个标签，让这个按钮的用途更加明显。现在我们已经用按钮替换了输入字段，让我们把功能也转移过来。你可以用两种方法做到这一点，我将在下面展示，你可以选择你喜欢的方法。</p><p id="4335" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">1.使用ref <br/>使用useRef钩子创建一个ref，inputRef，并将其插入输入字段的ref属性。然后，我们可以在用户点击按钮时触发输入字段的点击功能。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="14fb" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">2.使用id属性<br/>我们首先将id属性添加到输入字段，然后在组件呈现时调用document.getElementbyId来访问输入字段。然后，当我们使用按钮的onClick方法单击按钮时，我们可以调用输入字段的click方法。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="61f7" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">使用ref是更简单的方法，但是有时您可能更喜欢使用id属性。无论您现在决定使用哪种方法，您都应该能够将文件上传到React应用程序中。</p><figure class="jx jy jz ka fd ij er es paragraph-image"><div class="er es if"><img src="../Images/b9eae65f955e50b188e5cc22af7e8acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*_gaJjN90O8uB8LMnMLuqqA.gif"/></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="1186" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">我们现在唯一的问题是，我们没有从应用程序反馈文件已上传。以前，我们有一个显示文件名的标签，但我们删除了它。</p><p id="f3ff" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">修复这个问题很容易，因为与我们刚刚上传的文件相关的所有信息现在都位于我们之前创建的ref对象(inputRef/inputFile)中。这让我们可以让上传按钮更加定制化。</p><blockquote class="kf kg kh"><p id="5f41" class="ir is ki it b iu iv iw ix iy iz ja jb kj jd je jf kk jh ji jj kl jl jm jn jo hb bi translated">假设用户上传文件后，客户端希望按钮变成绿色，并在按钮内显示一条成功消息(或者更好，显示文件名)。</p></blockquote><p id="8383" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">为了实现这个功能，我们将创建一个状态变量uploadedFileName，它最初被设置为null。使用输入字段的onChange属性，我们可以在每次上传时将状态设置为文件名。然后，我们可以从inputRef.current中的files数组(files[0],因为我们上传的是单个文件)访问文件名。最后，我们可以在按钮的className属性中应用相同的语法，在用户上传文件后将其颜色改为绿色。</p><figure class="jx jy jz ka fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="dac2" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果您以前实现了id方法，唯一的区别是您如何访问files数组，您可以直接从inputFile中获得该数组，因此您的handleDisplayFileName函数将如下所示:</p><pre class="jx jy jz ka fd kp kq kr ks aw kt bi"><span id="9ec1" class="ku kv hi kq b fi kw kx l ky kz">// UploadButtonByID.tsx<br/>const handleDisplayFileDetails = () =&gt; {</span><span id="62f6" class="ku kv hi kq b fi la kx l ky kz">   inputFile?.files &amp;&amp; setUploadedFileName(inputFile.files[0].name);</span><span id="6f44" class="ku kv hi kq b fi la kx l ky kz">};</span></pre><p id="22d4" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">如果你遵循一切，我们有一个完美的工作可定制的上传文件按钮。你可以在GitHub链接这里找到所有代码= &gt;<a class="ae iq" href="https://github.com/shresthaprince/reactdemouploadfilebtn.git" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/shrestha price/reactdemuploadfilebtn . git</a>。</p><figure class="jx jy jz ka fd ij er es paragraph-image"><div class="er es if"><img src="../Images/495e625419ad8b77f437538b80588a99.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*9-1amM4jL9kVeG2yGsggHg.gif"/></div><figcaption class="im in et er es io ip bd b be z dx translated">最终产品🎉</figcaption></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="6ebf" class="pw-post-body-paragraph ir is hi it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hb bi translated">除了“名称”之外，files数组还保存文件的其他信息，这对其他用例很有用。例如，如果我们想要设置用户可以上传的文件大小的限制，我们可以使用size属性。根据用户上传的文件类型，我们可以使用type属性在按钮旁边显示图标。</p><h1 id="636c" class="lb kv hi bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">📷image.png//🗎文档. docx</h1><figure class="jx jy jz ka fd ij er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ly"><img src="../Images/d6a31b47f9ccdb646d6b553e7dc4ee9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SztuIqGjrrevdkpjtY9PQg.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">文件属性</figcaption></figure></div></div>    
</body>
</html>