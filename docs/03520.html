<html>
<head>
<title>What is MSIL in .NET Framework?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MSIL在哪里？NET框架？</h1>
<blockquote>原文：<a href="https://medium.com/codex/what-is-msil-in-net-framework-78f9f1e7e502?source=collection_archive---------6-----------------------#2021-09-07">https://medium.com/codex/what-is-msil-in-net-framework-78f9f1e7e502?source=collection_archive---------6-----------------------#2021-09-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3d55bead473fd0e5419b3dee72362261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbP-ftvCPXe7953GfQZ38Q.png"/></div></div></figure><p id="bf19" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了构造程序，the.NET框架为不同的编程语言如C#提供了单独的编译器。</p><p id="8f31" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">编译完源代码后，each.NET编译器生成一个中间代码，每个环境都使用这个中间代码，称为微软中间语言(MSIL)。</p><p id="db58" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这篇文章中，我们将详细了解什么是MSIL，包括它的作用和必要性。</p><p id="587d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目录</strong></p><ol class=""><li id="5bd0" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">什么是MSIL？</li><li id="ecad" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">公共语言运行时(CLR)中的执行进程</li><li id="6f8c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">MSIL在. NET环境中的角色</li><li id="acdc" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">先决条件</li><li id="862f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">MSIL内部</li><li id="eb0e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">最后的话</li></ol><h1 id="9c97" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是MSIL编程？</h1><p id="30e5" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">微软中间语言(MSIL)也被称为通用中间语言(CIL)。它通常是由特定于语言的编译器根据源代码创建的一组平台无关的指令。</p><p id="5ff9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它是由各种编译器(C#、VB、.NET等等)。the.NET框架SDK(FrameworkSDKBinildasm.exe)中包含的ILDasm(中间语言反汇编程序)软件允许用户以人类可读的格式查看MSIL代码。我们可以使用这个应用程序查看any.NET可执行文件(EXE或DLL)中的MSIL代码。</p><p id="436c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">MSIL是机器不可知的，可以很快被转换成本机代码。CLR中包含一个实时(JIT)编译器，它将MSIL代码转换成本机代码。因此，MSIL在CPU上执行之前必须由JIT编译器进行翻译。对于每种支持的机器体系结构，JIT编译器都是可用的。任何受支持的机器都将运行相同的MSIL。</p><h1 id="4420" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">公共语言运行时(CLR)中的执行进程</h1><p id="86aa" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">下面是执行过程，包括MSIL的产生和JIT编译器将MSIL转换成机器码:</p><ul class=""><li id="7589" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn lf ju jv jw bi translated">在CLR编译时，特定于语言的编译器将源代码转换为MSIL。除了MSIL，编译期间还会生成元数据。元数据包括代码中类型的定义和签名等元素，以及运行时信息。</li><li id="8533" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">MSIL被组装到公共语言基础结构(CLI)程序集中。该程序集是用于安全、部署、版本控制和其他目的的内置代码库。分为进程汇编(EXE)和库汇编(LIB) (DLL)两种。</li><li id="ea56" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">JIT编译器然后将微软中间语言(MSIL)翻译成与其执行的计算机环境相关的机器代码。MSIL在逐个需求的基础上被转换成机器码，这意味着JIT编译器只编译必要的MSIL，而不是整个MSIL。</li><li id="4778" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">JIT编译器生成机器码，随后由计算机的CPU执行。</li></ul><h1 id="72e6" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">MSIL在. NET环境中的角色</h1><p id="a73a" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">以下是MSIL在电影中的角色。网络环境:-</p><ol class=""><li id="52c4" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">平台独立性:- </strong>平台独立性是指相同的字节码指令文件可以放在任何平台上；编译的最后阶段可以在运行时简单地完成，这样代码就可以在那个平台上执行。换句话说，MSIL定义了一组不依赖于特定CPU的可移植指令。</li><li id="7fc9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">性能提升:-</strong>JIT编译器只是根据需要编译每一段代码，而不是一次构建整个应用程序。当代码编译一次后，生成的本机可执行文件将一直保存到应用程序创建完毕，因此下次运行该部分代码时不必重新编译。这种方法比从头开始编译完整的程序代码要快。它还演示了运行MSIL代码几乎和运行本机代码一样快。</li><li id="108a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">语言互用性:- </strong>语言互用性得益于MSIL的使用。一个人可以从一种语言编译到MSIL，结果代码与另一种语言的代码(编译到MSIL)兼容。换句话说，MSIL设计允许框架是语言不可知的。语言选择不再由开发人员控制。甚至在一个程序中可以使用多种语言。</li><li id="1005" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">减少维护上的麻烦:-CLR可以检查MSIL代码，看看它是否符合类型安全之类的标准。缓冲区溢出和不安全的强制转换可以在构建时被识别出来，大大减少了维护上的麻烦。</li></ol><h1 id="4207" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">先决条件</h1><p id="8836" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">因为CIL开发人员直接面对CLR的内置语法，所以用CIL编程可能会很困难。使用操作码，而不是更用户友好的语言，如C#、F#和VB.NET(它们使用更像英语的语言语法)。直接对CIL编程时，建议您安装以下工具。</p><ul class=""><li id="2311" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn lf ju jv jw bi translated">Visual Studio IDE 2010或更高版本</li><li id="66f3" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">。NET Framework 4.0或更高版本</li><li id="201a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">伊尔达斯姆。ILASM.EXE公用事业公司</li><li id="65e9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">记事本++</li><li id="ecde" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">SharpDevelop(可选)</li><li id="c53f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn lf ju jv jw bi translated">Xamarin Studio(可选)</li></ul><p id="39dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">虽然CIL代码可以在简单的记事本编辑器中编写，但建议您使用像SharpDevelop这样的全功能编辑器来开发CIL代码。</p><h1 id="2058" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">MSIL内部</h1><p id="5763" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">CIL代码在概念上类似于Java字节码，因为除非绝对必要，否则它不会被编译成特定于平台的指令。对于每个面向运行时的CPU，the.NET CLR使用一个针对底层平台优化的JIT编译器。元数据in.NET二进制文件描述了二进制文件中包含的每种类型的特征。</p><p id="c125" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">元数据(正式名称为清单)包含有关程序集当前版本的信息，以及所有外部链接程序集和区域性数据的列表。</p><p id="afaa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每一个the.Net许可的编程源代码最终都被编译成CIL，而不是直接编译成特定的指令集。正因为如此，所有的。NET支持的语言可以相互通信。此外，CIL代码提供了Java程序员所期望的优势。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es lg"><img src="../Images/e9678bb17005c95d6bc243767a0eaa9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/0*v_6VVHZMr0efqsd3"/></div></figure><p id="a75a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">each.NET支持的编程语言中的关键字被映射到CIL助记符。将字符串变量加载到内存中时，可以使用操作码“ldstr”来代替StringLoading。</p><h1 id="2c39" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">最后的话</h1><p id="3f6e" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">every.NET会议的基础是MSIL法典。你对MSIL指令集了解得越多，你就能更好地理解advanced.NET应用开发。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="22e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="ls">原载于</em><a class="ae lt" href="https://www.partech.nl/nl/publicaties/2021/09/what-is-msil" rel="noopener ugc nofollow" target="_blank"><em class="ls">https://www . partech . nl</em></a><em class="ls">。</em></p></div></div>    
</body>
</html>