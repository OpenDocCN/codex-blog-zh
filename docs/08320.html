<html>
<head>
<title>How to use video call API to build a live video call app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用视频通话API搭建视频通话直播app</h1>
<blockquote>原文：<a href="https://medium.com/codex/video-call-api-c3e3a71d4ff1?source=collection_archive---------8-----------------------#2022-07-31">https://medium.com/codex/video-call-api-c3e3a71d4ff1?source=collection_archive---------8-----------------------#2022-07-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="cf32" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">本文将介绍如何使用ZEGOCLOUD的视频通话API和firebase来构建一个视频通话直播app</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/272d9c98a495169e0eda8bb46e231a8c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*hFdEKhG4WbDoZmmSn2vGNw.jpeg"/></div></figure><h2 id="fc8c" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">介绍</h2><p id="6138" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">随着设备性能和网络质量的不断提升，越来越多的音视频通话场景得到应用，视频通话API也得到越来越多的应用。</p><p id="aaeb" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">视频通话API可以提供哪些能力？</p><p id="7ec7" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">随着视频通话API的需求越来越大，提供视频通话API的公司也越来越多，但提供的功能大同小异。</p><p id="0073" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">视频呼叫API提供的功能主要包括:</p><ol class=""><li id="9b70" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">通话邀请</li><li id="0605" class="lb lc hi kf b kg lk kj ll jq lm ju ln jy lo kv lg lh li lj bi translated">语音和视频通话</li><li id="397a" class="lb lc hi kf b kg lk kj ll jq lm ju ln jy lo kv lg lh li lj bi translated">离线推送功能</li><li id="a769" class="lb lc hi kf b kg lk kj ll jq lm ju ln jy lo kv lg lh li lj bi translated">呼叫用户界面和交互</li></ol><p id="1858" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">下面是使用ZEGOCLOUD的视频通话API搭建的视频通话直播app。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/df6316f2a41f56299ecb21122fbec7d2.png" data-original-src="https://miro.medium.com/v2/1*xOT1P4gQxJtE02EceijgBQ.gif"/></div></figure><h2 id="a696" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">ZEGOCLOUD的视频通话API是什么？</h2><p id="bc9c" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">ZEGOCLOUD的视频调用API采用分层架构。详情如下图所示:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/e7fa75acb5dd49be34ff8271cf9d8f14.png" data-original-src="https://miro.medium.com/v2/format:webp/1*fRwHCwiRL4i7niRFPfF86g.png"/></div></figure><p id="8547" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">ZEGOCLOUD的视频调用API为你提供了两种不同的SDK:<code class="du lp lq lr ls b">CallUIKit</code>和<code class="du lp lq lr ls b">Call SDK</code>。</p><p id="71a7" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated"><code class="du lp lq lr ls b">CallUIKit</code>:提供完整的视频直播通话UI，只需要调用通话界面，在需要完成通话过程的地方挂机界面即可。</p><p id="cf8d" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated"><code class="du lp lq lr ls b">Call SDK</code>:提供视频直播通话的底层逻辑，如音视频管理、通话管理、网络状态管理等。你只需要专注于上层自定义UI的实现，调用相应的交互接口就可以完成调用过程。</p><h2 id="487a" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">如何使用ZEGOCLOUD的视频通话API</h2><h2 id="b739" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">第一步。创建一个ZEGOCLOUD帐户</h2><ul class=""><li id="d77d" class="lb lc hi kf b kg kh kj kk jq lt ju lu jy lv kv lw lh li lj bi translated">在<a class="ae lx" href="https://www.zegocloud.com/account/signup?_source=medium&amp;article=25" rel="noopener ugc nofollow" target="_blank"> ZEGOCLOUD官方</a>创建账号。</li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/4bb7bebbd4b686d8875d83284f375d56.png" data-original-src="https://miro.medium.com/v2/1*lA41q6TKIXr33krcJ6bpPg.gif"/></div></figure><h2 id="a4f8" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">第二步。创建新项目</h2><ul class=""><li id="7273" class="lb lc hi kf b kg kh kj kk jq lt ju lu jy lv kv lw lh li lj bi translated">在<a class="ae lx" href="https://console.zegocloud.com?_source=medium&amp;article=25" rel="noopener ugc nofollow" target="_blank"> ZEGOCLOUD管理控制台</a>中创建一个项目。</li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/62e7b23751558dd96ebd6703afeb3ad5.png" data-original-src="https://miro.medium.com/v2/1*98Ds-wdQ4USIIxOLM-Q8Yw.gif"/></div></figure><h2 id="7ca6" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">第三步。创建一个Firebase项目</h2><p id="868f" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">在<a class="ae lx" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a>中创建一个Firebase项目。更多详情，请参见<a class="ae lx" href="https://firebase.google.com/docs/functions/get-started" rel="noopener ugc nofollow" target="_blank"> Firebase文档</a>。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/f0d042e03ee8c66a69e3ea7f75022f38.png" data-original-src="https://miro.medium.com/v2/1*uvbRj7vpmd8KAGzzcbcA7Q.gif"/></div></figure><h2 id="e8ff" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">第四步。部署Firebase云功能</h2><p id="5895" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">ZEGO Call默认使用Firebase Cloud函数作为业务服务器，我们建议您在集成ZEGOCall SDK之前激活并部署它。</p><ol class=""><li id="9104" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">在Firebase中创建一个新的实时数据库。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/f1da5336474ace0b14dd870bae9b6de9.png" data-original-src="https://miro.medium.com/v2/1*JGRDnnKXpO5uHwWm0gPzwg.gif"/></div></figure><ol class=""><li id="5035" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">通过添加以下内容来编辑实时数据库的规则:</li></ol><pre class="ix iy iz ja fd ly ls lz ma aw mb bi"><span id="0d4f" class="jf jg hi ls b fi mc md l me mf">{<br/>  "rules": {<br/>        ".read": "auth.uid != null",<br/>        ".write": "auth.uid != null",<br/>  }<br/>}</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/318d720cfa1eccce62b7cf8f6d995174.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-86Rvn1v8D4pyyK2Pv4z1g.jpeg"/></div></figure><ol class=""><li id="d4fb" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">通过npm安装CLI。</li></ol><ul class=""><li id="2454" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lw lh li lj bi translated"><code class="du lp lq lr ls b">npm install -g firebase-tools</code></li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/b94291eb2e0cb0d092abcd82e7ea1cb9.png" data-original-src="https://miro.medium.com/v2/1*rlLdyvWcIu6G0MG5GIObNQ.gif"/></div></figure><ol class=""><li id="fb9d" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">运行<code class="du lp lq lr ls b">firebase login</code>通过浏览器登录并验证firebase工具。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/8b20ee12113b2df7e9e568fb8955186f.png" data-original-src="https://miro.medium.com/v2/1*9TbTIzWXWH9qZZOfRomqag.gif"/></div></figure><ol class=""><li id="85f0" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">运行<code class="du lp lq lr ls b">firebase init functions</code>。该工具为您提供了安装npm依赖项的选项。如果您想以另一种方式管理依赖项，拒绝是安全的，但是如果您拒绝，您需要在模拟或部署您的功能之前运行npm install。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/6b51ea4a4edbe2b4dcbd1f521a3af092.png" data-original-src="https://miro.medium.com/v2/1*w8Otfk699kSt9oWkB6IKew.gif"/></div></figure><ol class=""><li id="6e71" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">下载<a class="ae lx" href="https://github.com/ZEGOCLOUD/call_firebase_funcitons" rel="noopener ugc nofollow" target="_blank">云函数示例代码</a>。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/25b57532ed669735af57cfdb8f58ee9c.png" data-original-src="https://miro.medium.com/v2/1*5XMW4VFPMu2s3rFjv3qPYQ.gif"/></div></figure><ol class=""><li id="8823" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">将示例代码中的<code class="du lp lq lr ls b">firebase.json</code>、<code class="du lp lq lr ls b">functions\index.js</code>文件和<code class="du lp lq lr ls b">functions\token04</code>文件夹复制到您的云函数项目中，覆盖同名文件。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/c11f7b081314058c6f34f73d28c5ec8a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*r13hQMEAJikstlU3YHkDAA.jpeg"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/45d96a980ac339cf2396d9853e8f8c57.png" data-original-src="https://miro.medium.com/v2/1*H2ik1DDOwHiP2cNzNw8cww.gif"/></div></figure><ol class=""><li id="ec09" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">修改<code class="du lp lq lr ls b">index.js</code>文件，正确填写从<a class="ae lx" href="https://console.zegocloud.com?_source=medium&amp;article=25" rel="noopener ugc nofollow" target="_blank"> ZEGOCLOUD管理控制台</a>获得的AppID和ServerSecret。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/40304d6428ac38fcfaa8940cd0897bc1.png" data-original-src="https://miro.medium.com/v2/1*fGNfbCKa_GLIJYAinIW_FQ.gif"/></div></figure><ol class=""><li id="5c3d" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">在Firebase CLI中，运行<code class="du lp lq lr ls b">firebase deploy --only functions</code>命令来部署云功能。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/6480b1829d2b0e081c6849969e13825e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*bMpr3_IJyUBBZZsyoC802g.jpeg"/></div></figure><h2 id="f81b" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">第五步。将文件复制到项目中</h2><p id="e761" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">要将ZEGOCallUIKit与CocoaPods自动集成，请执行以下操作:</p><ol class=""><li id="82a1" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">下载<a class="ae lx" href="https://codestore.zegocloud.com/project/2" rel="noopener ugc nofollow" target="_blank">示例代码</a>，并将<code class="du lp lq lr ls b">ZEGOCallUIKit</code>和<code class="du lp lq lr ls b">ZEGOCall</code>文件夹复制到您的项目目录中(如果您没有项目，请创建一个新项目)。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/31434e58cf914ad1377ceb58cae61b3c.png" data-original-src="https://miro.medium.com/v2/1*4XP5Z5FT-APR6YtCn5BCog.gif"/></div></figure><ol class=""><li id="fbb1" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">打开终端，导航到您的项目目录，运行<code class="du lp lq lr ls b">pod init</code>命令创建一个<code class="du lp lq lr ls b">Podfile</code>，然后将以下内容添加到文件中。</li></ol><ul class=""><li id="8fdd" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lw lh li lj bi translated"><code class="du lp lq lr ls b">pod 'ZegoExpressEngine' pod 'FirebaseAuth' pod 'GoogleSignIn' pod 'Firebase/Database' pod 'Firebase/Analytics' pod 'Firebase/Crashlytics' pod 'Firebase/Messaging' pod 'Firebase/Functions'</code></li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/e0b25d748db0ff0afdf3c46628a635c9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*lk5rE-e9M51sx-8H4azEAA.png"/></div></figure><ol class=""><li id="5cf4" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">在终端中，导航到Podfile所在的目录，运行<code class="du lp lq lr ls b">pod install</code>命令。</li></ol><ul class=""><li id="e9c5" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lw lh li lj bi translated"><code class="du lp lq lr ls b">pod install</code></li></ul><ol class=""><li id="6689" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">重启Xcode，打开新生成的。工作区文件。</li></ol><h2 id="5254" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">第六步。添加权限</h2><p id="f7d8" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">可以根据需要设置权限。</p><ol class=""><li id="26e8" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">打开Xcode，选择目标对象，然后点击<strong class="kf hj">信息&gt;自定义iOS目标属性</strong>。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/2719d9c05db016fbd0bdbf80cb15a3b7.png" data-original-src="https://miro.medium.com/v2/format:webp/1*njQ890sg1Sm9n6iPPSFJEA.png"/></div></figure><ol class=""><li id="6351" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">点击<strong class="kf hj">添加按钮(+) </strong>添加摄像头和麦克风权限。</li></ol><ul class=""><li id="aa62" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lw lh li lj bi translated"><code class="du lp lq lr ls b">Privacy-Camera Usage Description</code></li><li id="7df9" class="lb lc hi kf b kg lk kj ll jq lm ju ln jy lo kv lw lh li lj bi translated"><code class="du lp lq lr ls b">Privacy-Microphone Usage Description</code></li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/e66ca48d7c4c926790933c5b8251b5fb.png" data-original-src="https://miro.medium.com/v2/format:webp/1*zNwul32pVFLZIUHT-oLV0g.png"/></div></figure><ol class=""><li id="5fef" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">选择目标项目，选择<strong class="kf hj">标志&amp;能力&gt;能力</strong>，搜索<strong class="kf hj">后台模式</strong>并双击。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/9d7fdff900d7e967b910aae55416eb9c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*65ZgFAGVJ8plf-UVe22tcw.png"/></div></figure><ol class=""><li id="3b54" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">在<strong class="kf hj">背景模式</strong>中检查以下选项。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/29f4cb2dd108e4b61502e295e60fabed.png" data-original-src="https://miro.medium.com/v2/format:webp/1*w4dq3VyhmfJdq0BOYUy4Yg.png"/></div></figure><ol class=""><li id="6dbb" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">启用<strong class="kf hj">推送通知</strong>功能。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/93181f5cf4e0223be52f69996f7d9d96.png" data-original-src="https://miro.medium.com/v2/format:webp/1*MCJwSGkq0nh2jBWv0SK_7A.png"/></div></figure><ol class=""><li id="4a65" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">下载firebase的配置文件<strong class="kf hj">Google service-info . plist</strong>，并将其添加到您的项目中。要获取配置文件，请参考<a class="ae lx" href="https://firebase.google.com/docs/ios/setup#add-config-file" rel="noopener ugc nofollow" target="_blank">如何获取配置文件？</a>。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/86dcca456ba83a38cd4ec031126863ad.png" data-original-src="https://miro.medium.com/v2/format:webp/1*lyvsrt11Bw9oRchCGoXeig.png"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/0c88d01e41c52a6e39f3d1bca9997745.png" data-original-src="https://miro.medium.com/v2/format:webp/1*05x4VsCtxy6zk0JNzRwXMQ.png"/></div></figure><ol class=""><li id="7b09" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lg lh li lj bi translated">设置<strong class="kf hj"> URL类型</strong>:用<strong class="kf hj">Google service-info . plist</strong>文件中的<strong class="kf hj"> REVERSED_CLIENT_ID </strong>字段填写<strong class="kf hj"> URL方案</strong>。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/60eebe727cf221b1295bc6cc2eaa9468.png" data-original-src="https://miro.medium.com/v2/format:webp/1*kR0RwtZs3iSRlP9v2szfCQ.png"/></div></figure><h2 id="7184" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">初始化ZEGOCallUIKit</h2><p id="175f" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">要初始化ZEGOCallUIKit，获取<code class="du lp lq lr ls b">CallManager</code>实例，传递项目的AppID。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="b3ec" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">要接收回调，将相应的<code class="du lp lq lr ls b">delegate</code>设置为<code class="du lp lq lr ls b">self</code>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h2 id="b49c" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">用户登录</h2><p id="9080" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">ZEGO Call还不提供用户管理功能。您需要让用户登录Firebase，然后调用<code class="du lp lq lr ls b">setLocalUser</code>方法，根据登录结果将用户信息设置为CallUIKit。</p><p id="5d5f" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">Firebase提供了多种登录身份验证模式。下面以Google登录为例。<br/>更多模式请参考<a class="ae lx" href="https://firebase.google.com/docs/auth/where-to-start" rel="noopener ugc nofollow" target="_blank"> Firebase官方</a>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h2 id="6c89" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">获得代币</h2><p id="8444" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">ZEGO Call使用RTC SDK实现语音和视频通话功能。主叫用户和被叫用户加入同一个房间，并且在呼叫接通时开始流发布和流播放。因此，要进行出站调用，您需要为RTC SDK提供一个令牌进行验证。有关详细信息，请参见<a class="ae lx" href="#11648" rel="noopener ugc nofollow">使用令牌进行认证</a>。</p><p id="d608" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">在发出或接受出站呼叫之前，您需要从Firebase Cloud函数获取一个令牌。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="3925" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">为<code class="du lp lq lr ls b">CallManager</code>的Token属性设置一个令牌，实现<code class="du lp lq lr ls b">TokenProvider</code>的代理拥有的回调<code class="du lp lq lr ls b">getRTCToken</code>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h2 id="daf1" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">拨打出站电话</h2><p id="f579" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">要进行出站语音呼叫，调用<code class="du lp lq lr ls b">callUser</code>方法并将<code class="du lp lq lr ls b">type</code>参数设置为<code class="du lp lq lr ls b">CallType.voice</code>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="ca49" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">要进行出站视频呼叫，调用<code class="du lp lq lr ls b">callUser</code>方法并将<code class="du lp lq lr ls b">type</code>参数设置为<code class="du lp lq lr ls b">CallType.video</code>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="6ecd" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated">发出呼叫后，CallUIKit会自动为被叫方和主叫方显示当前状态的UI(需要集成CallUIKit)，您可以在UI上进行进一步的操作。</p><ul class=""><li id="aaf9" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lw lh li lj bi translated">当调用方调用方法进行调用时，将显示以下内容(为了便于说明，进行语音调用)</li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/143f48e2176fdb9a4377cccc158aadb7.png" data-original-src="https://miro.medium.com/v2/format:webp/1*-IFjoh69svPg0t0JFac5gQ.png"/></div></figure><ul class=""><li id="445a" class="lb lc hi kf b kg kw kj kx jq ld ju le jy lf kv lw lh li lj bi translated">当被叫方收到来电时，会弹出以下黑色提示(以语音呼叫为例)</li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl jc"><img src="../Images/00d3844a3ac1e59fced039f0c3bc0bfe.png" data-original-src="https://miro.medium.com/v2/format:webp/1*CG_4_HoyKnSKClcVTGrjsQ.png"/></div></figure><h2 id="b5cd" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">上传日志</h2><p id="1da3" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">当您在使用您的app时遇到问题，调用<code class="du lp lq lr ls b">uploadLog</code>方法上传日志，以便我们更快地定位和帮助您。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><h2 id="ce38" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">取消初始化ZEGOCallUIKit</h2><p id="72f0" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">在使用完ZEGO调用后，调用<code class="du lp lq lr ls b">unInit</code>方法来取消SDK的初始化。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="faa1" class="pw-post-body-paragraph kd ke hi kf b kg kw ij ki kj kx im kl jq ky kn ko ju kz kq kr jy la kt ku kv hb bi translated"><a class="ae lx" href="https://console.zegocloud.com/account/signup?_source=medium&amp;article=25" rel="noopener ugc nofollow" target="_blank">与ZEGOCLOUD签约</a>，每月免费获得<strong class="kf hj">10000分钟</strong>。</p><h1 id="a720" class="mi jg hi bd jh mj mk ml jl mm mn mo jp io mp ip jt ir mq is jx iu mr iv kb ms bi translated">你知道吗？👏</h1><pre class="ix iy iz ja fd ly ls lz ma aw mb bi"><span id="c043" class="jf jg hi ls b fi mc md l me mf">You can give up to <strong class="ls hj">50 Claps</strong> for an article?</span><span id="ba6c" class="jf jg hi ls b fi mt md l me mf"><strong class="ls hj">Tap and hold the clap button</strong> for a few seconds.</span><span id="e087" class="jf jg hi ls b fi mt md l me mf"><strong class="ls hj">Follow me</strong> to learn more technical knowledge.</span><span id="8755" class="jf jg hi ls b fi mt md l me mf">Thank you for reading :)</span></pre><h2 id="0357" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">了解更多信息</h2><p id="5a3f" class="pw-post-body-paragraph kd ke hi kf b kg kh ij ki kj kk im kl jq km kn ko ju kp kq kr jy ks kt ku kv hb bi translated">这是现场技术文章之一。欢迎阅读其他文章:</p><div class="mu mv ez fb mw mx"><a href="https://faun.pub/how-to-build-an-android-video-call-app-with-firebase-realtime-database-af76c2b202d9" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hj fi z dy nc ea eb nd ed ef hh bi translated">如何使用firebase实时数据库构建Android视频通话应用程序</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">本文将帮助您快速构建一个视频/音频通话应用程序</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">faun.pub</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl jd mx"/></div></div></a></div><div class="mu mv ez fb mw mx"><a href="https://faun.pub/how-to-build-a-clubhouse-clone-app-with-android-and-zegocloud-a-social-audio-app-development-cb4059e361b0" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hj fi z dy nc ea eb nd ed ef hh bi translated">如何用Android和ZEGOCLOUD构建一个俱乐部会所克隆应用——一个社交音频应用开发</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">本文解释了如何使用ZEGOCLOUD ZEGOLiveAudioRoom SDK快速克隆一个俱乐部应用程序</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">faun.pub</p></div></div><div class="ng l"><div class="nm l ni nj nk ng nl jd mx"/></div></div></a></div><div class="mu mv ez fb mw mx"><a href="https://faun.pub/using-ios-callkit-7ffd260e80d4" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hj fi z dy nc ea eb nd ed ef hh bi translated">如何用iOS CallKit和ZEGOCLOUD实现一个视频通话app</h2><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">faun.pub</p></div></div><div class="ng l"><div class="nn l ni nj nk ng nl jd mx"/></div></div></a></div><div class="mu mv ez fb mw mx"><a href="https://faun.pub/video-api-fcd2bcbe24f7" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hj fi z dy nc ea eb nd ed ef hh bi translated">你了解视频API吗？</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">这篇文章描述了什么是视频API？视频API如何保证音视频的流畅传输？</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">faun.pub</p></div></div><div class="ng l"><div class="no l ni nj nk ng nl jd mx"/></div></div></a></div><div class="mu mv ez fb mw mx"><a href="https://faun.pub/super-live-chat-136dfa19f96f" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hj fi z dy nc ea eb nd ed ef hh bi translated">如何实现超级实时聊天:你应该知道的3种方法</h2><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">faun.pub</p></div></div><div class="ng l"><div class="np l ni nj nk ng nl jd mx"/></div></div></a></div></div></div>    
</body>
</html>