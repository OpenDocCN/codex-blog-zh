<html>
<head>
<title>Draw A Line And Bar Chart Using Swift Within 10 Lines Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Swift在10行代码内绘制线条和条形图</h1>
<blockquote>原文：<a href="https://medium.com/codex/draw-a-line-and-bar-chart-using-swift-within-10-lines-code-c36aadaf3cdd?source=collection_archive---------4-----------------------#2022-06-30">https://medium.com/codex/draw-a-line-and-bar-chart-using-swift-within-10-lines-code-c36aadaf3cdd?source=collection_archive---------4-----------------------#2022-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/460060552708ea52061e725193d309c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*6PqjC9XbCIoHzU_OKdqfdQ.png"/></div></figure><p id="dd01" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在大数据时代的入口之内，<code class="du jk jl jm jn b">visualization</code>可以用更直观的方式展示数据，让数据更客观，更有说服力，从而帮助用户理解和分析数据。今天我们来看看如何使用Swift 的<strong class="io hj"> 10行代码<strong class="io hj">绘制线图</strong>。</strong></p><h1 id="16c2" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">技术选择</h1><p id="d76b" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">其实iOS上的可视化图表库很少。著名的是<a class="ae kr" href="https://github.com/danielgindi/Charts" rel="noopener ugc nofollow" target="_blank">图表</a>，但今天我选择了<a class="ae kr" href="https://github.com/antvis/F2Native" rel="noopener ugc nofollow" target="_blank"> F2Native </a>，主要是因为它丰富的图表类型，<code class="du jk jl jm jn b">supporting 7 types of charts</code>，跨越<code class="du jk jl jm jn b">iOS</code>、<code class="du jk jl jm jn b">MacOS</code>、<code class="du jk jl jm jn b">Android</code>、<code class="du jk jl jm jn b">Webassembly</code>平台，最后实现了<code class="du jk jl jm jn b"> the grammar of graphic</code>理论，可以组合形成千变万化的图表。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ks"><img src="../Images/c2d42d40245f8252604aa59e02034c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uXnuH2hpawf5PR7fE0AHtA.png"/></div></div></figure><h1 id="6f2e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">开发和实施</h1><p id="9813" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">代码提交在GitHub上，你可以在最后直接下载。那我们开始吧。</p><p id="9c9e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们使用<code class="du jk jl jm jn b">CocoaPods</code>来导入这个库，如果你的机器上没有安装，你需要先安装它。</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="1e70" class="lf jp hi jn b fi lg lh l li lj">sudo gem install cocoapods</span></pre><h1 id="dae8" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">1.创建项目</h1><p id="b99e" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">我们使用<code class="du jk jl jm jn b">Xcode</code>创建线图-Swift项目，文件- &gt;新建- &gt;项目，选择<code class="du jk jl jm jn b">iOS Tab</code>下的<code class="du jk jl jm jn b">App</code>，点击下一步</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lk"><img src="../Images/70cbc88d058c353973596026990d1219.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gRjczZR61wh2sUDx3_8-1A.png"/></div></div></figure><p id="6b54" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">接下来，我们在<code class="du jk jl jm jn b">Interface</code>中选择<code class="du jk jl jm jn b">StoryBoard</code>，在<code class="du jk jl jm jn b">Language</code>中选择<code class="du jk jl jm jn b">Swift</code>，点击下一步，完成项目创建</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es lk"><img src="../Images/dafcc718301bc61217da00e0fd12f31c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LjVCnDIo-dPm_OG9oyybsA.png"/></div></div></figure><h2 id="4791" class="lf jp hi bd jq ll lm ln ju lo lp lq jy ix lr ls kc jb lt lu kg jf lv lw kk lx bi translated">2.CocoaPod设置</h2><p id="ca69" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">我们使用<code class="du jk jl jm jn b">CocoaPod</code>来导入<code class="du jk jl jm jn b">F2Native</code>。首先，使用命令行输入项目的目录。</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="a159" class="lf jp hi jn b fi lg lh l li lj">cd /Users/weiqing.twq/Documents/LineChart-Swift</span></pre><p id="9738" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">创建Podfile</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="1cbc" class="lf jp hi jn b fi lg lh l li lj">pod init</span></pre><p id="85b4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">用编辑器打开Podfile，输入<code class="du jk jl jm jn b">pod 'F2'</code>(注意这里叫<code class="du jk jl jm jn b">F2</code>，不是<code class="du jk jl jm jn b">F2Native</code>)</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ly"><img src="../Images/fd6c79163e1d10c3e0d75b68999f98c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXXguNMOyCDN29-CZEGN_w.png"/></div></div></figure><p id="8a49" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">安装它</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="d06d" class="lf jp hi jn b fi lg lh l li lj">pod install</span></pre><p id="12e0" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">安装完成后，目录下会有一个<code class="du jk jl jm jn b">LineChart-Swift.xcworkspace</code>文件，双击打开(记得关闭创建时自动打开的<code class="du jk jl jm jn b">Xcode</code>窗口)。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/be7a2255d48757ae35ab250ae5221273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*pkD7PzCBKteA-pKcyyCe1A.png"/></div></figure><h2 id="0a60" class="lf jp hi bd jq ll lm ln ju lo lp lq jy ix lr ls kc jb lt lu kg jf lv lw kk lx bi translated">3.准备数据</h2><p id="a4d0" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">由于发动机的输入数据格式是一个<code class="du jk jl jm jn b">NSArray</code>，所以我准备了以下数据，保存为<code class="du jk jl jm jn b">data.json</code>文件。</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="254c" class="lf jp hi jn b fi lg lh l li lj">[{ “genre”: “Sports”, “sold”: 275 }, <br/>{ “genre”: “Strategy”, “sold”: 115 }, <br/>{ “genre”: “Action”, “sold”: 120 }, <br/>{ “genre”: “Shooter”, “sold”: 350 }, <br/>{ “genre”: “Other”, “sold”: 150 }]</span></pre><p id="a351" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将<code class="du jk jl jm jn b">data.json</code>拖到项目中</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es ma"><img src="../Images/629a1d15a3601e29d64123e5fbd565c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5_9vVZi7AtMwvTDr4okzqg.png"/></div></div></figure><h2 id="d409" class="lf jp hi bd jq ll lm ln ju lo lp lq jy ix lr ls kc jb lt lu kg jf lv lw kk lx bi translated">4.编码</h2><p id="9eca" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">在<code class="du jk jl jm jn b">ViewController.swift</code>进口<code class="du jk jl jm jn b">F2</code></p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="55bb" class="lf jp hi jn b fi lg lh l li lj">import F2</span></pre><p id="c533" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在<code class="du jk jl jm jn b">viewDidLoad</code>中绘制图表，具体的绘制步骤已经在代码中标注</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="f564" class="lf jp hi jn b fi lg lh l li lj">var canvasView:F2CanvasView?<br/>var chart:F2Chart?</span><span id="77ed" class="lf jp hi jn b fi mb lh l li lj">override func viewDidLoad() {<br/>    super.viewDidLoad()<br/>    <br/>    //Step 1 init a canvas view to show chart<br/>    self.canvasView = F2CanvasView.canvas(CGRect(x:0, y: 100, width: self.view.frame.width, height: 200))<br/>    self.view.addSubview(self.canvasView!)<br/>    <br/>    //Step 2 prepare a chart for drawing<br/>    self.chart = F2Chart.init(self.canvasView!.bounds.size, name: "LineChart")<br/>    <br/>    //Step 3 connect chart and canvasview<br/>    self.chart!.canvas()(self.canvasView!).padding()(20, 20, 20, 20)<br/>    <br/>    //Step 4 setup the source data of chart<br/>    let jsonPath = Bundle.main.path(forResource: "data", ofType: "json")<br/>    guard let jsonString = try? String.init(contentsOfFile: jsonPath!) else {<br/>        return<br/>    }<br/>    let jsonData = F2Utils.toJsonArray(jsonString)<br/>    self.chart!.source()(jsonData)<br/>    <br/>    //Sete 5 draw a line in chart<br/>    //The mapping of the x-axis data is the genre field, and the mapping of the y-axis data is the sold field<br/>    self.chart!.line()().position()("genre*sold")<br/>    <br/>    //Step 6 draw chart and show on canvas view<br/>    self.chart!.render()();<br/>}</span></pre><p id="8f1c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">👏 👏恭喜你！下面是我们绘制折线图所需的代码，我们已经使用<code class="du jk jl jm jn b">10 lines code at all</code>完成了折线图的绘制。点击<code class="du jk jl jm jn b">Xcode</code>的▶️，弹出</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/856d714b13f6b2861855cc7dcf023b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*7Fp-TU6gEs09TKRk43SlaQ.png"/></div></figure><p id="a486" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">刚才我提到过，<code class="du jk jl jm jn b">F2Native</code>实现了<code class="du jk jl jm jn b">the grammer of graphic</code>，通过组合可以快速应对业务迭代的快速性。如果需求突然变成条形图，那么我们只需要把<code class="du jk jl jm jn b">Step 5</code>的线改成下图:</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="d27b" class="lf jp hi jn b fi lg lh l li lj">self.chart!.interval()().position()("genre*sold")</span></pre><p id="c07c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">条形图出来了</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es md"><img src="../Images/7d5eacd037e14aef9771965bf013cb07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*9FPS1kANWa8mE4qHBYr1lQ.png"/></div></figure><p id="aa54" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">或者你可以把它们放在一起，线形条形图就出来了</p><pre class="kt ku kv kw fd lb jn lc ld aw le bi"><span id="e75a" class="lf jp hi jn b fi lg lh l li lj">self.chart!.line()().position()(“genre*sold”)<br/>self.chart!.interval()().position()("genre*sold")</span></pre><p id="18f2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">线形条形图出来了</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es if"><img src="../Images/460060552708ea52061e725193d309c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*6PqjC9XbCIoHzU_OKdqfdQ.png"/></div></figure><h1 id="a98b" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">终于</strong></h1><p id="572d" class="pw-post-body-paragraph im in hi io b ip km ir is it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj hb bi translated">当然，这还是基本的图表显示。在实际业务中，应该会有一些更复杂的设计。例如，y轴上应该增加额外的单位，其次，应该区分条形的颜色。最后，按压的时候最好有一些提示。我会在后面的文章中详细展示这些，感谢阅读，代码已经提交到<a class="ae kr" href="https://github.com/weiqingtangx/LineChart-Swift" rel="noopener ugc nofollow" target="_blank"> GitHub </a>，欢迎下载。😄</p><div class="me mf ez fb mg mh"><a href="https://github.com/weiqingtangx/LineChart-Swift" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">GitHub-weiqing tangx/line chart-Swift:一个展示如何使用Swift创建折线图示例</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">github.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ik mh"/></div></div></a></div></div></div>    
</body>
</html>