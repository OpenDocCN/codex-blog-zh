<html>
<head>
<title>The Biggest Web Scraping Roadblocks and How to Avoid Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最大的网络抓取障碍和如何避免它们</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-biggest-web-scraping-roadblocks-and-how-to-avoid-them-669125b886b9?source=collection_archive---------8-----------------------#2021-03-22">https://medium.com/codex/the-biggest-web-scraping-roadblocks-and-how-to-avoid-them-669125b886b9?source=collection_archive---------8-----------------------#2021-03-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/6437ef5ff7f7c64fb8d1d51051c2e7f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfdJB7hyHDm_P2Br3ExS2w.png"/></div></div></figure><h2 id="47cd" class="hr hs ht bd b fp hu hv hw hx hy hz dx ia translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><p id="6584" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">你好。正如你可能已经知道的，网络搜集对于商业和研究都是非常有用的。这种数据和信息提取越来越受欢迎，因此，网站也试图通过开发对策来阻止蜘蛛爬他们的产品。</p><p id="e128" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">当你抓取网页时，你可能会因为网站发现你使用了一个机器人而难以得到你想要的结果。有办法避免这种情况吗？</p><p id="00f1" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这就是这篇文章的内容。我将告诉你更多关于蜘蛛的用途，并向你展示如何不用担心反机器人措施就能抓取网页。</p><p id="155c" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">所以，如果你想尾随的话，请系好安全带！</p><h1 id="a716" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">为什么要使用刮网器</h1><p id="593f" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">当你想在短时间内大量提取信息时，使用web scraper非常有用。企业在日常生活中使用这些工具的用例有很多。它们也可以用于研究目的，例如机器学习。</p><p id="2241" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这里有几个例子来说明为什么网页抓取工具如此受欢迎:</p><ul class=""><li id="16f5" class="la lb ht jb b jc jd jg jh jk lc jo ld js le jw lf lg lh li bi translated">线索挖掘</li><li id="a1ea" class="la lb ht jb b jc lj jg lk jk ll jo lm js ln jw lf lg lh li bi translated">机器学习</li><li id="471b" class="la lb ht jb b jc lj jg lk jk ll jo lm js ln jw lf lg lh li bi translated">研究</li><li id="79b2" class="la lb ht jb b jc lj jg lk jk ll jo lm js ln jw lf lg lh li bi translated">价格优化</li><li id="568e" class="la lb ht jb b jc lj jg lk jk ll jo lm js ln jw lf lg lh li bi translated">搜索引擎优化</li></ul><p id="c469" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">如果你有兴趣了解更多，你可以看看我的其他文章，我在这些文章中详细介绍了<a class="ae lo" rel="noopener" href="/@dan.suciu/when-is-web-scraping-the-answer-the-top-7-uses-cases-for-data-extraction-d95cb72d12ac">网络爬虫的用例</a>。</p><h1 id="9b7d" class="jx jy ht bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">网站如何识别和阻止网页抓取工具</h1><p id="94a8" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">上面提到的一些用例是大多数网站不希望被抓取的原因。我们都同意，与你的竞争对手分享信息不是一个好主意，所以他们希望真正的用户在他们的网站上爬行，而不是蜘蛛和机器人。</p><p id="1982" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">网站可以通过跟踪浏览器的活动，验证IP地址，植入蜜罐，添加验证码，甚至限制请求速率以避免垃圾邮件来识别网络爬虫。</p><p id="f3be" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">让我向你解释一下这些网络抓取对策是如何工作的，以及你如何绕过它们继续无忧无虑地提取数据。</p><h2 id="fdf1" class="lp jy ht bd jz lq lr ls kd lt lu lv kh jk lw lx kl jo ly lz kp js ma mb kt hz bi translated">浏览器指纹识别</h2><p id="01ea" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">浏览器指纹是一种网站用来收集用户信息并将其活动和属性与唯一的在线“指纹”相关联的技术。该网站在您的浏览器后台运行脚本，以了解您的设备规格、您使用的操作系统类型或您的浏览器设置。此外，它可以找出你是否使用广告拦截器，用户代理，你在浏览什么语言，你的时区，等等。</p><p id="5390" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">所有这些属性被编织成一个独特的数字指纹，在网络上跟随你。通过这种方式，他们更容易检测到机器人，因为改变你的代理，使用匿名模式，清除你的cookies或浏览器历史不会改变指纹。</p><p id="2746" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">如何防止浏览器指纹干扰您的网页抓取？做这件事的一个好方法是玩假装。无头浏览器的行为就像一个真正的浏览器，但没有任何用户界面包装它。使用Chrome驱动程序是一种流行的方法。</p><p id="8035" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在的网站都有检测无头浏览器的方法，即使你在本地机器上实现解决方案，大规模工作也可能是一个问题，因为同时运行更多的实例将会使用大量的资源(RAM)。</p><h2 id="0163" class="lp jy ht bd jz lq lr ls kd lt lu lv kh jk lw lx kl jo ly lz kp js ma mb kt hz bi translated">TLS指纹识别</h2><p id="0a7b" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">传输层安全性是在以前的安全套接字层(SSL)协议基础上开发的一种安全协议。HTTPS是HTTP的安全版本。两者的区别在于HTTPS在HTTP协议上使用TLS或SSL加密。</p><p id="ce02" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这种类型的指纹类似于上面介绍的浏览器指纹，但是使用TLS来识别用户。当用户连接到服务器时，两者之间会交换请求。这个过程被称为“TLS握手”，如果成功，协议将描述客户端和服务器如何相互通信。</p><p id="485d" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">你可以用<a class="ae lo" href="https://tlsfingerprint.io" rel="noopener ugc nofollow" target="_blank"> TLSfingerprint </a>查看你的浏览器生成了什么指纹，甚至可以看到它在用户中有多受欢迎。通过使用一组参数，如握手版本、扩展、TLS版本等，围绕这些“TLS握手”构建TLS指纹。</p><p id="d675" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">怎么能把这个指纹换成更偷偷的刮网？替换TLS参数并不像听起来那么简单。如果你随机选择参数，TLS指纹会非常罕见，它会被直接归类为骗局。你最好使用一个工具来帮助你修改你的参数。这里的<a class="ae lo" href="https://nodejs.org/api/tls.html" rel="noopener ugc nofollow" target="_blank">模块可能会帮助你</a>使用Node.js支持的刮刀。</p><h2 id="280a" class="lp jy ht bd jz lq lr ls kd lt lu lv kh jk lw lx kl jo ly lz kp js ma mb kt hz bi translated">可疑IP</h2><p id="949c" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">听起来很傻，甚至IP地址也可能有犯罪记录。网站有几种方法可以检测IP地址是否可疑:</p><ol class=""><li id="2a65" class="la lb ht jb b jc jd jg jh jk lc jo ld js le jw mc lg lh li bi translated">如果你使用的是免费代理池，很有可能他们已经被那个网站禁止了。要么是其他人已经使用了它们，要么是开发者事先将它们添加到了上述网站的黑名单中。如果你能找到那些代理人，他也能。</li><li id="a142" class="la lb ht jb b jc lj jg lk jk ll jo lm js ln jw mc lg lh li bi translated">使用由<strong class="jb id">数据中心</strong>提供的IP地址也可能被认为是可疑的，因为它们具有相同的子网块范围，这使得它们很容易被检测到。</li><li id="397e" class="la lb ht jb b jc lj jg lk jk ll jo lm js ln jw mc lg lh li bi translated">一些网站可能认为来自不同地理位置的IP地址也是可疑的。它的内容可能只提供给某些国家或地理区域。虽然这不一定是可疑的，但它可能会阻止您访问所有您想要的内容。</li></ol><p id="17ee" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">使用住宅IP地址，这是一个人的个人网络，是解决这些问题的好办法。它们是来自互联网服务提供商的完全合法的IP地址，因此不太可能被阻止。受地理位置限制的内容也不会成为问题，因为一个好的代理池拥有来自世界各地的IP地址。</p><h2 id="2336" class="lp jy ht bd jz lq lr ls kd lt lu lv kh jk lw lx kl jo ly lz kp js ma mb kt hz bi translated">IP速率限制</h2><p id="4578" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">速率限制是网站采用的一种策略，限制同一IP地址在一定时间内发出的请求数量。如果一个IP地址超过了这个数字，它将被禁止发出请求一段时间。</p><p id="2dd9" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">当在同一个网站上进行大规模网络抓取时，这种类型的机器人对策可能会非常令人恼火，因为它会减慢我的数据收集速度，但这并不意味着我们不能逃避这种不适。</p><p id="96c0" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">一种解决方案是故意在每个请求之间增加延迟。一个更合适的解决方案是通过使用代理池从不同的位置向您想要抓取的网站发送请求。在请求之间切换到不同的IP地址使得速率限制器难以动作。</p><h2 id="3ebf" class="lp jy ht bd jz lq lr ls kd lt lu lv kh jk lw lx kl jo ly lz kp js ma mb kt hz bi translated">验证码</h2><p id="7c7c" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">我敢肯定你在上网的时候遇到过验证码验证。这种类型的反机器人措施通常被网站用来确认一个真实的人在计算机屏幕后面。</p><figure class="me mf mg mh fd hk er es paragraph-image"><div class="er es md"><img src="../Images/330452e750077d3c861940f937063bfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/0*hOlSxY76HeQbOqol"/></div><figcaption class="mi mj et er es mk ml bd b be z dx translated"><a class="ae lo" href="https://i.kym-cdn.com/photos/images/facebook/000/355/550/da2.jpg" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="d532" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">验证码通常显示给可疑的IP地址，因此一个快速的解决方案是使用不同的代理重试请求。在其他情况下，使用验证码解决服务将是最佳解决方案，如<a class="ae lo" href="https://2captcha.com" rel="noopener ugc nofollow" target="_blank">2验证码</a>或<a class="ae lo" href="https://anti-captcha.com/mainpage" rel="noopener ugc nofollow" target="_blank">反验证码</a>。</p><p id="609a" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">有各种类型的验证码。有些可能涉及解决一个简单的数学问题，单词识别，或识别图片中的物体。例如，谷歌在2014年推出了现在很受欢迎的<a class="ae lo" href="https://www.google.com/recaptcha/about/" rel="noopener ugc nofollow" target="_blank"> reCAPTCHA </a>，用于跟踪用户的运动和数据。对于用户来说，这可能是一个简单的任务，但对于机器人来说，这往往很难，因为他们往往非常有条理，并在中间选中框。如果验证失败，reCAPTCHA可以要求进行另一次测试，类似于上面介绍的测试。</p><figure class="me mf mg mh fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/c73bb44de4bd7a72897bd63fe8ee45da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aa1bl0PxB3PbzozS"/></div></div></figure><p id="fbdf" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">请注意，即使您设法通过解决验证码或使用不同的代理重试来避免这种反机器人措施，您的数据提取仍然会被检测到。</p></div><div class="ab cl mn mo gp mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hb hc hd he hf"><h1 id="5c1a" class="jx jy ht bd jz ka mu kc kd ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku bi translated">最后的想法</h1><p id="a85a" class="pw-post-body-paragraph iz ja ht jb b jc kv je jf jg kw ji jj jk kx jm jn jo ky jq jr js kz ju jv jw hb bi translated">我希望这个故事对你的网络抓取项目有很好的指导，现在你知道网站如何保护自己，防止你的数据提取过程。</p><p id="e04a" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">有很多因素需要考虑，并为每个人实现一个旁路，以抓取网站而不被注意和阻止。如果你问我的话，这可能相当耗时，但如果方法正确，这并非不可能。</p><p id="0f29" class="pw-post-body-paragraph iz ja ht jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">你有没有想过使用第三方软件，比如API，它可以帮你解决所有这些麻烦的事情？看看<a class="ae lo" href="https://webscrapingapi.com" rel="noopener ugc nofollow" target="_blank"> WebScrapingAPI </a>。对于没有时间从头开始构建自己的工具的开发人员来说，这是一个值得信赖的解决方案。</p></div></div>    
</body>
</html>