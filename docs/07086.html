<html>
<head>
<title>Write Compose in XML Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在XML项目中编写合成</h1>
<blockquote>原文：<a href="https://medium.com/codex/write-compose-in-xml-project-836dee68082d?source=collection_archive---------6-----------------------#2022-05-29">https://medium.com/codex/write-compose-in-xml-project-836dee68082d?source=collection_archive---------6-----------------------#2022-05-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b4e1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">XML-Jetpack组合互操作性</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/24b6f5683313f8c58c8fb5b19c3c80fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4qJACh9VtTsgucqp.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fwww.raywenderlich.com%2F7032631-jetpack-compose-tutorial-for-android-getting-started&amp;psig=AOvVaw1Ig_ZKQ2dHF5vmisKqg4EQ&amp;ust=1653902500501000&amp;source=images&amp;cd=vfe&amp;ved=0CA4Q3YkBahcKEwiYw76LsYT4AhUAAAAAHQAAAAAQLQ" rel="noopener ugc nofollow" target="_blank">信号源</a></figcaption></figure><p id="615d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您有一个XML项目，并且希望包含可组合的函数来呈现给UI。你打算怎么做？Google已经引入了Compose和XML之间的互操作性，以便于移植。</p><h1 id="6a9b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">步骤0 —配置梯度</h1><p id="24d6" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在您的顶层<code class="du lh li lj lk b">build.gradle</code>文件中，添加compose_version扩展属性:</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="8a48" class="lp kl hi lk b fi lq lr l ls lt">buildscript {<br/>  ext {<br/>    compose_version = '1.0.5'<br/>  }<br/>  ...<br/>}</span></pre><p id="cf76" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在您的模块级<code class="du lh li lj lk b">build.gradle</code>文件中，添加以下几行:</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="b53c" class="lp kl hi lk b fi lq lr l ls lt">android {<br/>  ...<br/>  buildFeatures {<br/>    compose true<br/>  }<br/>  composeOptions {<br/>    kotlinCompilerExtensionVersion compose_version<br/>    kotlinCompilerVersion '1.5.10'<br/>  }<br/>}</span><span id="b648" class="lp kl hi lk b fi lu lr l ls lt">dependencies {<br/>  ...<br/>  implementation "androidx.compose.ui:ui:$compose_version"<br/>  implementation "androidx.compose.material:material:$compose_version"<br/>  implementation "androidx.compose.ui:ui-tooling-preview:$compose_version"<br/>  androidImplementation "androidx.compose.ui:ui-test-junit4:$compose_version"<br/>}</span></pre><p id="e495" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">注意</strong>:<code class="du lh li lj lk b">kotlinCompilerVersion</code>必须匹配项目<code class="du lh li lj lk b">build.gradle</code>类路径中的Gradle插件。</p><h1 id="6395" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">步骤1 —在XML中添加占位符</h1><p id="f1c0" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">为了在XML项目中使用Jetpack Compose，您需要将一个<code class="du lh li lj lk b">ComposeView</code>添加到XML文件中。</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="c74c" class="lp kl hi lk b fi lq lr l ls lt">&lt;androidx.compose.ui.platform.ComposeView<br/>  android:id="@+id/compose_view"<br/>  android:layout_width="match_parent"<br/>  android:layout_height="match_parent" /&gt;</span></pre><h1 id="12e2" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">步骤2 —编写您的合成代码</h1><p id="64fd" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">一旦我们在XML文件中有了视图，我们就可以用它来编写组件了。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lv lw l"/></div></figure><h1 id="ea3d" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论</h1><p id="8c3b" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">如果您有一个想要迁移到Compose的现有项目，使用这个互操作性特性可以很容易地完成。不要试图一次迁移整个项目，而是逐个组件或逐个屏幕地迁移。</p><p id="bc4c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">目前，谷歌地图或ExoPlayer等各种高级视图都没有可用的组件。如果您的应用程序需要这些视图，明智的做法是使用包含可组合部分的XML项目。</p></div><div class="ab cl lx ly gp lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hb hc hd he hf"><p id="4876" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">谢谢你看我的文章！✌️</p><pre class="iy iz ja jb fd ll lk lm ln aw lo bi"><span id="a78c" class="lp kl hi lk b fi lq lr l ls lt"><strong class="lk hj">Want to connect?</strong></span><span id="a49c" class="lp kl hi lk b fi lu lr l ls lt">My <a class="ae jn" href="https://github.com/cybercoder-naj" rel="noopener ugc nofollow" target="_blank">GitHub</a> Profile<br/>My <a class="ae jn" href="https://cybercoder-naj.github.io" rel="noopener ugc nofollow" target="_blank">Portfolio</a> Website</span></pre></div></div>    
</body>
</html>