# 使用多种语言的 React app

> 原文：<https://medium.com/codex/react-app-in-more-than-one-language-e424b5338237?source=collection_archive---------7----------------------->

![](img/71ac23f58a2fee9dc3361f105b8321f8.png)

图片上的文本:i18n in React —调整 web 应用程序以显示多种语言

过去几个月，我大部分时间都在 React 应用中转换文本。从源代码中删除硬编码的字符串，把它们放在一个更注重内容而不是代码的地方，这是令人惊讶的回报。然而，最精彩的部分是观察语言之间的转换——从一种有日期和复数形式的语言到另一种语言，没有留下任何成分。

作为牵着琴弦的人，我当然知道，变革将会到来。然而，对于那些往里看的人来说，在这种转变之前，看不到任何变化。网站上的一切看起来都是一样的，无论字符串是硬编码的还是包装在更动态的东西中。

如果你也想让你的 React web 应用程序支持除一种语言之外的其他语言，这里有一个简单的总结。

# React 中 i18n 的前三个库

*   [React-i18next](https://react.i18next.com/) — NPM 每周下载量:978 '
*   [React-intl](https://formatjs.io/docs/react-intl/) — NPM 每周下载量:927 '
*   [LinguiJS](https://lingui.js.org/)——NPM 每周下载量:50 '

> 太好了，我们有赢家了！
> 
> …还是我们现在就要？

至少可以说，选择前三名进行战斗是一条捷径，从这些人中选择下载量最多的进行国际化是…容易的。但是由于你选择的库将会在你的软件中存在很长一段时间，你可能需要多加考虑。

虽然我知道比较可能已经过时，但我仍然觉得在特定的时间点获得感知的利弊快照是有价值的。它使寻找改进或找到满足特定需求的东西的过程变得更加容易。考虑到这一点，这里总结了截至 2021 年 6 月排名前三的 React i18n 库。

## react-i18 接下来

它越来越受欢迎，目前在周下载量上领先于 React-intl。它是 i18next 系列的一部分，可以与任何 JS 框架结合。它的伸缩性很好，支持类和函数组件以及普通的 JS，并附带了大量插件，可以满足您使 i18n 进程顺利进行的所有需求。要开始，你需要设置一个配置文件，但这是你需要完全覆盖到全局语言状态。也有一个`i18NextProvider`可用，但是只有在使用服务器端渲染或者有多个 i18n 实例时才需要。

react-i18n 最大的缺点是默认不依赖 ICU 消息格式。然而，如果这是你的项目所需要的，有一个插件。它的语法比 react-i18next 的标准翻译函数更冗长，但这是意料之中的，因为语法遵循标准。

## 反应-国际

T 多年来，他一直是 React 应用程序国际化的首选库，但 React-i18next 一直在不断逼近。它支持多种语言环境，可扩展，并且开箱即可提取翻译信息。它最大的卖点是它建立在行业标准之上，如 [ECMA 脚本国际化 API](https://www.ecma-international.org/publications-and-standards/standards/ecma-402/) 、 [Unicode CLDR](http://cldr.unicode.org/) 和 [ICU 消息格式](http://userguide.icu-project.org/formatparse/messages)。您可以放心地知道，您的软件将符合您的应用程序将支持的不同语言和国家所使用的语言和文化惯例。作为 FormatJS 系列的一部分，它现在支持服务器端渲染

但是另一方面，您只能在 React 组件的视图层中翻译消息。普通 JS 函数中的字符串不能被翻译。此外，它还没有充分利用 hook 的使用。所提供的只是一个框架，供开发人员构建定制的挂钩。尽管 React-i18next 的钩子(和 HOC，就此而言)用全局语言状态注入了组件/普通 JS 函数，但`useIntl`钩子(或 HOC)不会。如果您希望用户能够切换语言，这取决于开发人员使用`React.Context`来处理全局区域设置状态并将其传递给提供者。

## 语言

因圭斯就像是服用了类固醇的轻量级反兴奋剂。它具有相同的消息格式和类似的 API，但是使用宏和 CLI 来改进开发人员和翻译人员的国际化过程。基本上，你所需要做的就是将硬编码封装在一个组件或宏中，剩下的事情自然就好了。宏的使用减少了代码的冗长性和可读性，没有因改变翻译文件的结构而破坏任何东西的风险。

像 React-Intl 一样，您需要通过用传递给地区的上下文包装`intlProvider`来注入全局语言状态。使用字符串作为 id 也可能被视为反模式，但这取决于您，因为您可以使用 id 作为键。

所以，我们有它。三个流行的库，各有利弊。如果你想让你的 React 应用程序支持多种语言，支持它们在日期、复数、小数点等方面的不同特点，你就有机会成功。