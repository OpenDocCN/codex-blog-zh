<html>
<head>
<title>Data Science Practice for Loan Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">贷款申请的数据科学实践</h1>
<blockquote>原文：<a href="https://medium.com/codex/data-science-practice-for-loan-applications-f3f53ae145eb?source=collection_archive---------4-----------------------#2021-10-29">https://medium.com/codex/data-science-practice-for-loan-applications-f3f53ae145eb?source=collection_archive---------4-----------------------#2021-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9824" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是数据科学实践，涉及数据争论、探索性数据分析、预测建模和贷款申请数据集的结果评估。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/ed16de4baf07eb8bf33d2c7e6c6f7f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*nRJKSayaCg3wvKIFxJ_EUQ.jpeg"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">图片取自:<a class="ae jp" href="https://www.template.net/business/letters/sample-loan-application-letters/" rel="noopener ugc nofollow" target="_blank">https://www . template . net/business/letters/sample-loan-application-letters/</a></figcaption></figure><p id="219b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文包含Jupyter笔记本细胞，以帮助数据科学家重现结果，并可能了解新的numpy，pandas，seaborn，sklearn包技巧。</p></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="3eba" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">资料组</h1><p id="56eb" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">数据集是著名的“Statlog德国信用数据”的修改版本，可通过以下链接访问:</p><p id="ebf8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jp" href="https://archive.ics.uci.edu/ml/datasets/statlog+(german+credit+data)" rel="noopener ugc nofollow" target="_blank"><em class="la">https://archive . ics . UCI . edu/ml/datasets/statlog+(德语+信用+数据)</em> </a></p><p id="5543" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集是德国贷款申请的CSV文件格式，由汉斯·霍夫曼教授的团队于1994年提供。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lb"><img src="../Images/509ea886a3ab131774b0e17fa777d045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f-r4w3gnuf_YC6JOaqBWSA.png"/></div></div></figure><p id="4fa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据是结构化的表格形式，每一行代表一个贷款申请，其中个人因各种原因申请贷款。它包含1003行，关于申请人及其贷款历史的22个变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/9c3365db00c47a6f55eb42e10d119edc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*fFSih30AIiyjwp362oiwQQ.png"/></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="7ea5" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">探索性数据分析</h1><p id="d926" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">下一步是探索数据集。我们有一个名为“accepted”的目标类，表示应用程序是被拒绝还是被接受。原始数据集中给出的目标变量实际上衡量了对申请人的信用风险；值为<strong class="ih hj">“好”</strong>或<strong class="ih hj">“坏”。</strong>“好”表示申请人值得接受信贷，“坏”则相反。原始数据中70%的目标变量属于“好”类，其余30%属于“坏”类。在我们的例子中，0代表70%，1代表30%。因此，我们应该改变修改后的数据集，将0映射到“好”,这意味着贷款批准，将1映射到“坏”,这意味着贷款拒绝。我们将使用熊猫图书馆的地图功能，Python。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lh"><img src="../Images/8f016b5c5d762ec8cf7902e1e085336c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*vXz9C5s5CeqOsyXKJXMJlw.png"/></div></figure><p id="74e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更正后，贷款批准和拒绝的分布显示在下面Matplotlib库的圆环图中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es li"><img src="../Images/6c76d0050dccafe5526b22abcc4b54a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9pHboqO-zZqd8-i56dh4Q.png"/></div></div></figure><p id="ca13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们利用熊猫独有的()函数来探索<strong class="ih hj"><em class="la">personal _ status</em></strong>字段。它似乎有四个独特的不同的分类值。值以“男性”或“女性”开头，后跟下划线。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lj"><img src="../Images/e7a874940d5f65a869287dded0cb9b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*K8Awz7L-GAiPbNiNeF4dcQ.png"/></div></figure><p id="e9af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们从字符串中取出“男性”和“女性”部分，并创建一个名为“性别”的新变量。我们将结合使用split()和apply()函数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/d8b2b70bbdb19cc6ef99ee6523f60419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*RX2s-1GtfJjcThZkOva_BQ.png"/></div></figure><p id="1c45" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过使用pandas的pivot_table()函数，我们可以按性别对目标值进行分组和聚合。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ll"><img src="../Images/9942311141d0e86679fd9f4c7f75c5ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*Z3vCiVodAdihIYXf7GGpsQ.png"/></div></figure><p id="45bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">男性支持率为72.4%，女性为64.8%。Seaborn barplot()函数有助于显示结果。Matplotlib text()函数也用于在图形中嵌入百分比。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/a9d73ce1e56eaa4b9ae79d8a21171528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*Z88JGQ-ExuC-cs4tGPLMOA.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/5b327448290fa98687320403b6dd22aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*bDHEEMpHb--nfqQvLKjvww.png"/></div></figure><h2 id="d920" class="ln jy hi bd jz lo lp lq kd lr ls lt kh iq lu lv kl iu lw lx kp iy ly lz kt ma bi translated">数据插补</h2><p id="fa44" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">现在让我们填写缺失的数据(如果有的话)。为了检查丢失的数据，我们将使用pandas的isnull()函数。“age”和“asnm”列都有50个缺失值，而“credit_amount”列只有一个。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es mb"><img src="../Images/4a0b13d021638e63a906a4cf2368df90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*eNfriP9yXCmgf004kgOQaQ.png"/></div></div></figure><p id="ea0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在输入缺失数据之前，最好先看看变量的直方图。我们将使用Seaborn包的distplot()函数。Matplotlib的vlines()函数也用于图表中的垂直线(年龄变量的平均值、中值和众数)。均值、中值和众数是最常用的集中趋势指标。均值度量适合用于非偏斜分布，如正态/高斯分布。在我们的例子中，由于年龄变量是<strong class="ih hj">正偏态</strong>，我们将不得不消除平均指标。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es mc"><img src="../Images/660aac648c114645e262b70144681742.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*v-dEMQe_Xmtu8OhpABEWSQ.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/f7b6519c02f50cceb0b0cba7e2f80d81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*QDy2PHd8GF5j-0BH7oQNNg.png"/></div></figure><p id="d941" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，人们可以在中位数和众数之间选择这样的偏态分布。我们将选择<strong class="ih hj">模式</strong>，因为它不会像均值和中值那样扭曲分布形状。均值、中值和众数插补方案在下面的比较图中显示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es md"><img src="../Images/34a6ec74a11d65f7556cad5b2b552670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*gou4eE_CSqXBroK4ZEYIyw.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es me"><img src="../Images/172b1db0c4f199b47bc67da50e5abed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8rj0TZEAz5P6L9WZY1s0kA.png"/></div></div></figure><p id="d334" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们创建一个因素<strong class="ih hj"> <em class="la"> age_group </em> </strong>来分组:25岁以下、25–34岁、35–49岁、50岁以上。为此，我们将使用numpy的select()函数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mf"><img src="../Images/cff0a477516d35be2efd5680e308d1ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*OedtScD2CJI59XYUVqIx-g.png"/></div></figure><p id="49e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Credit_amount是应用程序中请求的金额。让我们画出变量的直方图。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mg"><img src="../Images/eb70391551a8037b63641f651544bd39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*K2UlVOVUV58i3PQC_Y5usA.png"/></div></figure><p id="43c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为有<strong class="ih hj">异常值</strong>，直方图是如此无用。由于异常值和其余数据之间的巨大差异，单个箱必须代表几乎全部人口。</p><p id="e43e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们来看看credit_amount字段中的异常值，并剔除它们。在下面的箱线图中可以看到异常值。一些候选人似乎有兴趣获得超过1000万德国马克的贷款。在图中，x轴选择对数刻度，以获得更好的视觉效果。四分位距(IQR)是已知的过滤掉异常值的方法之一。超出<strong class="ih hj">Q1-1.5 iqr和Q3+1.5IQR </strong>范围的值被视为异常值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lg"><img src="../Images/e1a9d6c79779103637a4a34e1388e480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*Lfmk_5rRIyf-kNYd1rlz9Q.png"/></div></figure><p id="e599" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们计算25%和75%的百分位数，并测量范围。该范围将通过乘以1.5来扩展，然后1.5*IQR之外的值将被视为异常值并从数据集中移除</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mh"><img src="../Images/a7a4b70914da06a1747cbffc675936e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*go8-55WlR6axGTXQtq_Zew.png"/></div></figure><p id="d226" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">剔除异常值后，直方图看起来更好。信贷金额变量具有正偏态分布，这意味着尾部在右侧，或者数据更偏向下侧。对于这些类型的分布，平均值大于中值</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lh"><img src="../Images/993ab854bd53f946045f2b2ddd296c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*ha-QvYr9BcspRs5CEb3sdg.png"/></div></figure><p id="fbba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于申请人的年龄和所申请的信用额度之间的关系，我们可以知道如下。</p><p id="38be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们计算数据集中age和credit_amount变量之间的相关值。这两者之间的相关性被计算为<strong class="ih hj"> ~0.036一个正值，但是仍然意味着这两者之间非常弱的线性关系</strong>。</p><p id="c851" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">两者之间的散点图也给出了变量之间关系的概念。该图表明这两个变量之间没有线性关系。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mi"><img src="../Images/151c255c6d17c6765ffc99fe86e3b87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*D9rWigdzeK4nBN3qDvHuRw.png"/></div></figure><p id="483d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不过，最好也检查一下我们之前创建的<strong class="ih hj">“age group”</strong>变量。从表面上看，20岁以下的申请人比其他申请人要求的要少一些。我们来进行一个T检验，看上面的假设是否正确。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mj"><img src="../Images/dc450adc3008445f2ca2c3de9a88e055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*mb0RlbGvAd8MvaPb3EWNzQ.png"/></div></figure><p id="6140" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的无效假设如下:</p><p id="9f64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">H0:25岁以下和25岁以上的申请人申请的平均信用额度<strong class="ih hj">没有差别</strong></p><p id="da1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将显著性水平设置为0.05，这将在拒绝或未能拒绝零假设时将我们的<strong class="ih hj">置信水平设置为95% </strong></p><p id="b7ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基于此的t检验结果是:</p><ul class=""><li id="7c1e" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">统计:-2.17</li><li id="861e" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">p值:0.03</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es my"><img src="../Images/c4f174f7723e4367d7525e16b0031b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*aQUFBJwcKb4vqZckd0nVMg.png"/></div></figure><p id="c5fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">p值小于我们的显著性水平(0.05)，这意味着我们可以拒绝零假设。因此我们可以有95%的把握说:与其他申请人相比，20岁以下的申请人要求稍低。</p><p id="7b0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们来看看年龄和这个叫做“asnm”的变量之间的关系。</p><p id="ed95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以散点图开始来形象化这种关系总是一个好主意。正如我们在下图中，两个变量似乎有抛物线关系(不是线性关系)。因此皮尔逊相关值会误导我们。正如所料，观察到误导性的结果。皮尔逊相关值计算为-0.093，这意味着弱负相关，但是如果我们看图表:</p><ul class=""><li id="6d06" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">当申请人年龄大于42岁时，ASNM值倾向于以指数方式随年龄增长，因此具有很强的正相关性</li><li id="374e" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">另一方面，当申请人年龄小于42岁时，ASNM和年龄的相关性变成强负相关</li></ul><p id="551e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，这两个参数有很强的相关性。不止如此；下图显示了通过将年龄值放入函数中获得的ASNM值。</p><p id="5afa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这些类型的非线性相关，<strong class="ih hj">距离相关</strong>度量可用于获得相关值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mz"><img src="../Images/fe242d6380359454e942829c640fc7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*AXs2cWItQ5U9G_8MIqP6Yg.png"/></div></figure><h2 id="7ae1" class="ln jy hi bd jz lo lp lq kd lr ls lt kh iq lu lv kl iu lw lx kp iy ly lz kt ma bi translated">假设检验</h2><p id="4f2b" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">让我们通过构建一个假设并对其进行测试来尝试找到以下问题的答案:</p><blockquote class="na nb nc"><p id="4306" class="if ig la ih b ii ij ik il im in io ip nd ir is it ne iv iw ix nf iz ja jb jc hb bi translated">拥有一部电话对信用申请被接受的可能性有什么影响？</p></blockquote><p id="a045" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当实验试图进行比较或找出两个分类随机变量之间的差异时，我们可以使用<strong class="ih hj">卡方检验</strong>，来检验统计差异。</p><p id="2ce6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">拥有手机(是&amp;无)和信用审批(0 &amp; 1)变量都是分类变量，或者说是非连续变量。因此，我们的目的是提出一个假设，并用卡方检验机制对其进行检验。</p><p id="31de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以我们的无效假设如下:</p><ul class=""><li id="115e" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">H0:“拥有一部手机对获得信贷审批没有任何影响”</li></ul><p id="766d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于二元测试只有两种结果(批准或拒绝),自由度为1。另一种假设也只有一种，那就是:</p><ul class=""><li id="e780" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">H1:“拥有一部手机<strong class="ih hj">会影响</strong>获得信贷批准”</li></ul><p id="4596" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下表给出了每种组合的计数。在拥有手机的351名候选人中，只有82人获得了批准，大约23%的支持率。相反，没有电话的候选人似乎有更高的支持率(~31%)。几乎三分之二的申请人没有手机，这表明数据是在90年代收集的。如今，由于几乎每个人都有电话，这种分析可能不会反映到我们的时代。让我们继续进一步测试我们的假设。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mj"><img src="../Images/ee93d1ded4db5099f377c5d2932d9116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*enzoYUNQ9Me45wEfYYJXRg.png"/></div></figure><p id="aae8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们将显著性水平设置为0.05，这将在拒绝或未能拒绝零假设时将我们的<strong class="ih hj">置信水平设置为95% </strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ng"><img src="../Images/8bb46274b91ec9366d3aa9a6a93f3470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*IHZHWjW4mEkbD1SizAuqbw.png"/></div></figure><p id="e526" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">计算卡方得分</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mf"><img src="../Images/1074178423f8af0451924821a2989f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*C33h_xMMG3TgPgU9gZKn0Q.png"/></div></figure><p id="e753" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给定置信度和自由度，计算<strong class="ih hj">临界值</strong>:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ng"><img src="../Images/bd6f0b2c2dc9f762019db84d6444b719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*wM8G-uWDlu-TUwEeLt_9xQ.png"/></div></figure><p id="2bc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果计算的卡方值大于临界值，那么我们拒绝零假设。因此，我们拒绝零假设。这意味着<strong class="ih hj">“拥有一部手机影响获得信贷审批”</strong>。根据我们之前计算的批准率，可以说拥有一部手机降低了获得批准的机会。</p><p id="229f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们深入研究建模部分之前，让我们更多地探索变量。</p><p id="50c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将变量的分布可视化，并绘制直方图。最初的想法和有趣的事实:</p><ul class=""><li id="3309" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">这四个变量取大范围的数值(整数值),因此最好使用直方图来显示数值的分布</li><li id="1834" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">数据集中剩余的变量要么是分类变量，要么是顺序变量，因此我们将使用圆环图来查看分布情况</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lh"><img src="../Images/c0dd1094e97181be9f9fd0623658c6f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*ASw8bzybwwc1REzGK16bRg.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es nh"><img src="../Images/89b4508e9ad6fa72590f97dd0337bea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ukPMnZ8LTWrBroKLsvzacw.png"/></div></div></figure><p id="c12a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">信贷金额和还款期限如预期相关。它们之间的正相关值被计算为0.62。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mc"><img src="../Images/cd2560a127d1d6f11375ddfe65ee6d14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*iLDXh-JjXG8evKRuOWUMEQ.png"/></div></figure><p id="13bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们想象分类变量的分布。在特征工程和建模改进阶段，最好不时地回到这个图表，以便对变量分布有一个坚实的掌握。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ni"><img src="../Images/94752e49e16a1008d65caedd6e7ec6ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*XEuUYVxyDHeYw7v68LWJUA.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es nh"><img src="../Images/0121396f4ad3f80fda8ce85e591941c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1p6X3hdkNvyEN8j8hBLBww.png"/></div></div></figure></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="3fc8" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">系统模型化</h1><p id="ef5e" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">因为我们有:</p><ul class=""><li id="1e51" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">训练我们的模型的目标变量(接受列)</li><li id="30e0" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">目标变量只接受二进制值(1 &amp; 0)</li></ul><p id="fc56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就变成了二元分类问题。如果我们将奥卡姆剃刀原理应用于机器学习，那么与复杂的黑盒模型相比，“如果它们的性能相似”，选择更简单的模型会更好。然而，如果复杂/高级模型比简单模型表现得好得多，那么我们将不得不选择表现最好的模型。</p><p id="75de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">逻辑回归可能是最适合的(更简单的模型)开始。易于理解其建模方式，也易于解释其参数变化的结果</p><p id="d44b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了在我们的模型中使用分类变量，我们必须首先将它们转换为one-hot-encoded版本:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nj"><img src="../Images/c2417e6039b6be935f1c7017e36fb12b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*aa_T12wA0ekeMnbEdDkk1A.png"/></div></figure><p id="a731" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们找出与目标值最相关的特性。注意，前两个最相关的特征来自于<strong class="ih hj">检查状态</strong>变量。这告诉我们检查状态变量对我们的ML模型是一个有价值的输入。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es nk"><img src="../Images/01f3acd6e35cee84628c5009f999121c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NAJ__09FKx7CVEDTP1nBKg.png"/></div></div></figure><p id="1549" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们比较每个组对checking_status变量的批准率，那么checking_account余额为负的组的批准率最低。批准率随着支票账户余额的增加而增加。然而，没有流水账的申请人似乎有最高的批准率。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lm"><img src="../Images/7ecdd9eb41c7adfb900d77345fe43c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*E-PuW-e1-awypaz9qmybZg.png"/></div></figure><p id="2b5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们进一步挖掘。下图显示，如果您的储蓄账户余额超过1000元，那么无论您的支票状态如何，您都非常接近获得批准的比率(下面的紫色条)。这个图表仍然不能很好地解释为什么没有流水账的申请者有更高的批准率。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/4bc81be66f4f0986cccf4698ff10031e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*6kKiqkOxmBZNtTGLqeytSA.png"/></div></figure><p id="6db3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们在checking_status上检查savings_status的分布时，我们可以看到没有流水账的申请人在他们的储蓄账户中有更高的余额。对于这个特定的数据集，这可能是有偏差的，因此最好用其他信用数据集来检查这一现象</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lj"><img src="../Images/fbe6c786b8b57251802ce393d7093913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*iK-Rq75m-xB8zKatggy3dQ.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es nh"><img src="../Images/ecad4fe30c481be0262d6666d66882f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HXh2D4dGF7EXxX2dYGRtvQ.png"/></div></div></figure><p id="f6a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据集的标准化是许多机器学习估计器(如逻辑回归)的常见要求:如果单个特征或多或少看起来不像标准的正态分布数据(例如，均值和单位方差为0的高斯数据)，它们可能表现不佳。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es nl"><img src="../Images/dc31e45d4608e509019495aaa1fc6cb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*QKTFqSmce64nEeOgo7ksdg.png"/></div></div></figure><p id="6d22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们初始化一个逻辑回归模型</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mj"><img src="../Images/3db81bf482c3a3607d804c0ea50871f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*VMemRDhmDxM8lWykoztJ2w.png"/></div></figure><p id="3af2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">成本矩阵与原始数据集一起提供，为正类的每个误分类错误提供不同的惩罚。正类是目标变量中值为1的类，这也意味着申请人没有信用。</p><p id="9140" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="la">假阴性代价&gt;假阳性代价</em></p><p id="8549" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这表明正面类是预测任务的焦点，并且对于银行或金融机构来说，把钱给坏客户比不给好客户更昂贵。在选择性能指标时，我们会考虑这一点。</p><p id="9aec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们将使用scikit-learn中的<strong class="ih hj"> fbeta分数</strong>，这是已知F1分数指标的更通用版本。F-beta分数是精确度和召回率的加权调和平均值，在1处达到其最佳值，在0处达到其最差值。beta参数决定了<strong class="ih hj">召回</strong>在综合得分中的权重。beta &lt; 1更重视<strong class="ih hj">精度</strong>，而beta &gt; 1更倾向于召回。由于我们对更高的召回值感兴趣，我们将设置<strong class="ih hj"> beta=2 </strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ng"><img src="../Images/25e78717ae47a985cad2583b8971e470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*R-aHX5t35UVHjig5qICRbw.png"/></div></figure><p id="c42a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了避免抽样偏差效应和随机性，我们将使用分层k-fold交叉验证技术动态分割数据。我们将拆分数量设置为10，将数据集拆分为10组；在每一轮中，9个组将用于训练模型，其余的组将用于测试目的。与常规k-fold相反，分层k-fold以某种方式划分组，以确保基于值的分布，组之间没有显著差异</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nm"><img src="../Images/0d17f1f35551af31b2544b6c96389f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*gMyxMP2OD-PHaTvTL7hVLw.png"/></div></figure><p id="b33d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，逻辑回归模型(具有默认参数)得到测试组平均约0.50的F2分数，这是不足的性能。没有过度拟合的迹象，因为性能已经很低，训练和测试结果也没有明显不同。在下一节中，我们将尝试提高模型性能。</p><h2 id="56f0" class="ln jy hi bd jz lo lp lq kd lr ls lt kh iq lu lv kl iu lw lx kp iy ly lz kt ma bi translated">我们如何提高性能？</h2><p id="e7d1" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">逻辑回归有一个名为<strong class="ih hj"> class_weight </strong>的超参数，用于处理类别不平衡问题。由于我们的目标变量分布在30%到70%之间，调整这个参数将有助于获得更好的回忆值。当我们将class_weight参数设置为“平衡”模式时，它使用目标值来自动调整与输入数据中的类频率成反比的权重。这意味着少数阶级(没有信用的候选人)的权重按比例增加。</p><p id="4484" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们也尝试优化模型的超参数。为此，我们将使用网格搜索算法，旨在获得我们之前定义的定制f2分数的高分:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es nm"><img src="../Images/e318645e9f3d504dd32be92ca7f57b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*IkvA29gE9Z788SMoTi5gUw.png"/></div></figure><p id="2cb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将使用优化的参数来获得最终结果和性能。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es nn"><img src="../Images/60af6b26e4a5f248e1ecac9fa94038e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgHNEbu5Pgw4ZEbRsf46Vw.png"/></div></div></figure><p id="184c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们比较调整前后的结果，我们可以说我们取得了进步:</p><ul class=""><li id="f7e0" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated">test_results的F2分数<strong class="ih hj">从0.50提高到0.72 </strong>，这是一个显著的进步</li><li id="7b4c" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated">此外，对这类问题非常重要的回忆参数显著增加(<strong class="ih hj">从0.47增加到0.81 </strong>)</li></ul></div><div class="ab cl jq jr gp js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hb hc hd he hf"><h1 id="206a" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">进一步的工作</h1><p id="bfdb" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">还有许多其他步骤可以用来获得更好的结果，其中一些是:</p><ul class=""><li id="ccd4" class="mk ml hi ih b ii ij im in iq mm iu mn iy mo jc mp mq mr ms bi translated"><strong class="ih hj">特征工程</strong>:这是指从数据中创造出最有用的特征。例如，可以使用领域专业知识从现有数据中提取新特征。还可以进行特征选择，即选择最重要的特征或其他降维方法(例如PCA)。我们可以使用许多技术来提取特征和选择特征</li><li id="3acb" class="mk ml hi ih b ii mt im mu iq mv iu mw iy mx jc mp mq mr ms bi translated"><strong class="ih hj">更高级的模型</strong>:基于决策树的集成模型，如bagging和boosting，也可用于提高性能。众所周知，随机森林、XGBoost、轻量级GBM模型对于结构化数据问题表现良好</li></ul></div></div>    
</body>
</html>