# 主动防御常见的勒索软件交付

> 原文：<https://medium.com/codex/proactive-defense-against-common-ransomware-delivery-8123c9893e29?source=collection_archive---------15----------------------->

![](img/82d99b0ceca36926f0047ff52f1a4edf.png)

作为安全从业者，我们经常提醒其他人，良好的网络卫生和安全控制方面的最佳实践将大大有助于有效抵御勒索软件和恶意软件。在这篇后续文章中，我们分析了大多数勒索软件变种使用的几种关键交付技术，并提供了“性价比最高”的应对措施，即使您的环境缺乏“下一代”安全产品或服务，这些措施也通常可以相对快速和廉价地实施。

首先，让我们深入了解一些常见的交付方法和策略。为了提供初始利用，攻击者通常使用诱饵来发起攻击；这可以通过网络钓鱼电子邮件、恶意链接、受感染的附件、恶意广告或受损网站将有效负载发送给受害者来实现。以下是观察到的勒索软件利用并进入受害者计算机的最常见技术。

***钓鱼邮件***
诱骗某人点击看似合法的电子邮件中的恶意链接，远比试图突破计算机的防御要容易得多。通常，受害者会收到一封看似由已知联系人或组织发送的邮件，其中包含附件或链接。他们经常使用金融主题来制造一种紧迫感，诱使用户不假思索地打开邮件。

示例:

FW:费用报告# xxxx
付款确认
额外费用
最近账单
RE:需要额外信息# xxxx

*文件附件*

这些电子邮件还可能包含文件附件。通常声称是文档或电子表格，但被武器化以在交互时危害计算机。最常见的方法是将宏嵌入到 Office 文档中，这是用 Visual Basic for Applications (VBA)编写的有效负载，一旦不知情的受害者允许运行时，它就会执行。为了鼓励受害者允许宏，文档可能建议需要宏来纠正文本编码。一旦被允许，将从远程服务器下载并执行可执行文件，而不是更正文本编码，从而完成感染。

另一种常见的文件附件技术是文件扩展名隐藏。不良行为者可能试图在压缩的档案附件(如 ZIP 文件)中传递可执行文件。将 ZIP 文件中的可执行文件重命名为类似“deposit.pdf.exe”的名称，以欺骗用户认为它是安全的。另一种变化是通过在“.”前使用大量空格来模糊真正的文件扩展名。exe”，比如:“deposit.pdf。exe”——所以该”。exe”不会出现在屏幕上，并欺骗受害者认为这是一个 PDF 文件。在这种情况下，一旦可执行文件运行，感染就完成了。

*恶意链接*

这种勒索软件交付的变体依赖于用户点击钓鱼电子邮件的链接。然后，该链接可能会将用户带到一个网站，该网站通过一系列重定向(如漏洞利用工具包或恶意广告诱导的驱动下载)感染系统，或者通过点击嵌入链接(如[http://website.com/evil.exe](http://website.com/evil.exe)的嵌入链接)直接下载恶意软件。

***飞车下载***

偷渡式下载主要针对 Windows 和其他已安装软件中未打补丁的漏洞，几乎不需要用户干预就能悄悄感染您的计算机，这种恶意软件会“自动安装”，而不会出现通常的保存或运行下载文件的提示。即使在访问合法网站时，用户也必须保持警惕，因为合法网站可能会被入侵以托管重定向到漏洞利用工具包和恶意软件有效负载的恶意脚本或广告。

*广告宣传*

与访问受损网站类似，恶意广告通过在在线广告中隐藏恶意代码来执行。这些广告包括活动脚本，用于在页面加载广告后下载恶意软件或向受害者的计算机强制发送不良内容。恶意广告者通常依靠 Adobe Flash、Adobe PDF 和 Java 漏洞来传播恶意软件，因为这些浏览器插件非常容易出现安全漏洞。

## **可以被实现来防御这种常见交付方法的防御:**

*网络钓鱼邮件*

*   垃圾邮件过滤器—启用过滤器不会捕获每封恶意电子邮件，但可以阻止大量恶意电子邮件，尤其是在调整和更新过滤器规则的情况下。
*   外部标记—如果您的邮件服务器允许此类功能，请将从外部系统接收的电子邮件配置为在主题行中标记一个标记(例如“[外部]”和“[附件]”)，以使用户知道邮件来自外部方，并谨慎处理邮件中包含或附加的任何内容。因此，如果一名员工收到一封声称来自另一名员工、但带有[外部]标签的电子邮件，这应该会引发危险信号。
*   阻止高风险文件类型—阻止带有常见滥用文件格式附件的电子邮件，如可执行文件、ZIP、RAR、7z、带有宏的 Office 文档、脚本和其他高风险文件格式。查看基于扩展名要阻止的高风险文件类型列表[和](http://www.howtogeek.com/137270/50-file-extensions-that-are-potentially-dangerous-on-windows/)。由于扩展名很容易被操纵或混淆，基于内容检查(例如文件头)阻止文件格式比仅基于扩展名阻止更有效。
*   总是显示文件扩展名——默认情况下，Windows 资源管理器隐藏文件扩展名，但是您可以通过下面的[简单解决方案](http://support.microsoft.com/en-us/kb/865219)使文件扩展名可见。
*   培训—关注用户意识和培训。由于最终用户经常成为攻击目标，因此应该让员工了解勒索软件的威胁及其传播方式，并接受基本信息安全原则和技术的培训，包括如何识别网络钓鱼电子邮件和其他社会工程技术。

*飞车下载*

*   配置广告拦截器—在浏览器中安装和配置广告拦截器插件，这有助于阻止恶意广告和其他恶意下载媒介。
*   禁用/卸载 Flash–在“程序和功能”中找到“Adobe Flash Player ”,并弹出卸载对话框。谷歌 Chrome 提供了一个内置的(也可以说是更安全的)Flash Player 版本，可以通过在地址栏输入 [chrome://plugins](http://chrome//plugins/) 进入 Chrome 插件页面来禁用它。
*   禁用 Java 浏览器集成—这将防止恶意网站加载 Java 浏览器插件以静默方式安装恶意软件。在 Java 的“安全性”选项卡上的“设置”中，取消选中“在浏览器中启用 Java 内容”复选框。这将禁用您电脑上所有浏览器中的 Java 插件。
*   禁用 PDF Reader 插件—禁用 PDF Reader 插件将导致您下载 PDF 以在 PDF Reader 应用程序中查看，而不是在浏览器中查看，从而避免用户加载包含攻击 PDF Reader 漏洞的代码的页面。或者，也有非 Adobe PDF 阅读器软件，如 [Sumatra PDF](http://download.cnet.com/Sumatra-PDF/3000-18497_4-10698785.html) ，它不像 Adobe 那样通常被作为目标。
*   保持最新的补丁程序管理—在发现漏洞时，为所有终端设备操作系统、软件(包括 web 浏览器)和固件打补丁。危险在于补丁已经发布，这意味着攻击者确切地知道未打补丁的机器的弱点。
*   启用 AppLocker —允许组织根据文件的唯一标识指定哪些用户或组可以运行特定的应用程序。这允许为您的桌面创建规则，以防止执行未知的可执行文件。 [Windows AppLocker](http://technet.microsoft.com/en-us/library/dd759117.aspx)
*   文件和共享权限—应对用户运行和安装软件以及访问网络共享的能力实施最低权限访问。默认情况下，不允许用户以本地管理员身份运行或安装软件。允许用户以本地管理员身份运行他们的 web 浏览器和任何下载或附加的文件有利于恶意软件(如勒索软件)以本地管理员身份不受阻碍地执行。同样，共享权限应该尽可能细化。例如，如果受感染用户被限制为对关键网络共享的只读权限，勒索软件将无法从受感染用户的工作站加密或删除该共享中的文件。
*   防病毒保护软件—保持最新的防病毒软件，但不要依赖防病毒软件，因为勒索软件很容易逃避检测，因此最好的恶意软件和防病毒工具是预防。

了解个性化的勒索软件交付策略，使我们能够确定可以采取哪些对策和防御技术来掩盖交付过程。