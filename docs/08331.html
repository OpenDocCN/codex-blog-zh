<html>
<head>
<title>AWS Certified Solutions Architect Professional — Security — CloudTrail Solution Architect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS认证解决方案架构师专家—安全— CloudTrail解决方案架构师</h1>
<blockquote>原文：<a href="https://medium.com/codex/aws-certified-solutions-architect-professional-security-cloudtrail-solution-architect-9014311a3af5?source=collection_archive---------7-----------------------#2022-08-01">https://medium.com/codex/aws-certified-solutions-architect-professional-security-cloudtrail-solution-architect-9014311a3af5?source=collection_archive---------7-----------------------#2022-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c3c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于AWS CloudTrail解决方案架构师的简短说明。这篇文章是由夏羽·马瑞克教授的《终极AWS认证解决方案架构师》课程的一个简要说明。这个帖子的唯一目的是一个总结，如果你想要详细的学习，请购买夏羽·马雷克的课程。</p><h1 id="5abf" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">CloudTrail解决方案架构师——交付给S3</h1><p id="437e" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">解决方案架构师示例的第一个用例。CloudTrail将日志文件交付给S3存储桶。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/c13afbba499e751f60eb45fed595c4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*My5DjGfCAGvj9OrF0nJUFQ.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">图片作者:夏羽·马雷克</figcaption></figure><p id="0008" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以每五分钟向亚马逊S3发送一次活动副本。默认情况下，亚马逊S3存储桶和对象是私有的，您需要修改亚马逊S3存储桶来接收组织跟踪的日志文件。</p><p id="c967" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从CloudTrail发送的日志文件将被加密，默认为SSE-S3，但您可以手动设置SSE-KMS。</p><p id="8402" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了优化和节省成本，您可以在S3存储桶上设置一个生命周期策略，将对象转移到<strong class="ih hj"> S3冰川。</strong></p><p id="08e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您需要在S3时段接收对象时得到通知，可以启用S3事件来通知SQS、SNS或Lambda函数。</p><p id="47d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你也可以让CloudTrail直接向SNS发送通知，从SNS你可以调用SQS或Lambda。</p><p id="8825" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS根据案例为您提供不同的方法。</p><h1 id="b14a" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">CloudTrail解决方案架构师—多帐户、多地区日志记录</h1><p id="b667" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">解决方案架构师示例的第二个用例。交叉帐户监控架构师。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kw"><img src="../Images/ab47f5d9a359defa56329c62a994e8f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_BVM0gGPQtH02YpJQfdXQ.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">图片作者:夏羽·马雷克</figcaption></figure><p id="c17a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上图中，我们有两个帐户，帐户A和帐户B，我们有一个安全帐户，我们需要向其中发送日志。</p><p id="72dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这两个帐户中，我们有CloudTrail，我们将在安全帐户中设置一个S3存储桶来保存所有这些CloudTrail的日志。</p><p id="b1a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将日志文件交付到安全帐户中的S3存储桶的唯一方法是定义S3存储桶策略，S3存储桶策略应该允许CloudTrail将文件交付到S3。</p><h1 id="fb54" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">API调用警报</h1><p id="5058" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">解决方案架构师示例的第三个用例。某些API调用的警报已完成。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kx"><img src="../Images/f54d88268a54ec74e5331c92bb4f4907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3TJCyb90fVqfUYgqXIFEJg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">图片作者:夏羽·马雷克</figcaption></figure><p id="959d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从CloudTrail中，您可以将所有这些事件流式传输到CloudWtach日志中，从CloudWatch日志中，您可以打开一堆用例。</p><p id="8769" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过上图，在CloudWatch Logs从CloudTrail接收日志文件后，您可以创建一个度量过滤器和警报来监控日志文件中的事件。</p><p id="a7f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，你可以指定一个事件，比如Amazon EC2 <code class="du ky kz la lb b">RunInstances</code>操作，当事件发生时，CloudWatch会向SNS发送通知，你可以从SNS调用SQS或Lambda。</p><h1 id="3772" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">CloudTrail:如何最快地对事件做出反应？</h1><p id="2e73" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">总体而言，CloudTrail可能需要15分钟来交付事件，但您可以将CloudTrail与其他工具结合使用，以更快地对事件做出反应。</p><p id="acd2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一种也是最快、最具反应性的方法是使用CloudWatch事件，CloudTrail中的任何API调用都可以触发该事件，您可以通过创建一个Trail来设置它。</p><p id="cfbc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二种方式是使用CloudTrail交付给CloudWatch日志，事件是流式的。</p><p id="2ec0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三种方式是使用CloudTrail传送到S3，事件每五分钟传送一次。</p><p id="ab21" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以有不同的解决方案，要么是CloudWatch事件，要么是CloudWatch日志，要么是S3，它们都没有好坏之分，只是取决于你想达到什么目的。</p><h1 id="0629" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">结束</h1><p id="1176" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">结束关于AWS CloudTrail解决方案架构师用例的快速说明。</p><p id="7cb7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有关于安全的帖子:</p><ol class=""><li id="0b59" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated"><a class="ae ll" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-security-cloudtrail-850006168acb">安全——云迹</a>。</li><li id="0aec" class="lc ld hi ih b ii lm im ln iq lo iu lp iy lq jc lh li lj lk bi translated"><a class="ae ll" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-security-cloudtrail-solution-architect-9014311a3af5">安全— CloudTrail解决方案架构师</a>。</li><li id="48fb" class="lc ld hi ih b ii lm im ln iq lo iu lp iy lq jc lh li lj lk bi translated"><a class="ae ll" rel="noopener" href="/@hmquan08011996/aws-certified-solutions-architect-professional-security-key-management-service-2da9f983a58a">安全—密钥管理服务</a>。</li><li id="22ed" class="lc ld hi ih b ii lm im ln iq lo iu lp iy lq jc lh li lj lk bi translated"><a class="ae ll" rel="noopener" href="/@hmquan08011996/aws-certified-solutions-architect-professional-security-ssm-parameter-store-11875fd32c6d">安全性— AWS系统管理器参数存储</a>。</li></ol></div></div>    
</body>
</html>