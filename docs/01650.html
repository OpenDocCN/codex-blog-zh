<html>
<head>
<title>Introduction to Rasa Open Source</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rasa开源简介</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-rasa-open-source-8af137eeb2c4?source=collection_archive---------15-----------------------#2021-05-18">https://medium.com/codex/introduction-to-rasa-open-source-8af137eeb2c4?source=collection_archive---------15-----------------------#2021-05-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/400149c6ddea851e9ce421a09264ebbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xerO6amwZ-sHX3oG"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">沃洛季米尔·赫里先科在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1f9e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文由Betacom分析和创新团队撰写。Betacom是一家总部位于意大利和德国的公司，在IT领域使用创新技术、数字解决方案和尖端编程方法进行运营。您可以在我们的<a class="ae iu" href="https://betacom.eu/" rel="noopener ugc nofollow" target="_blank">网站</a>上了解更多信息。</p><h1 id="98ab" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">介绍</h1><blockquote class="kr ks kt"><p id="ba52" class="iv iw ku ix b iy iz ja jb jc jd je jf kv jh ji jj kw jl jm jn kx jp jq jr js hb bi translated">Rasa是一个开源的机器学习框架，用于自动化的文本和基于语音的对话。理解消息，进行对话，并连接到消息传递通道和API。</p></blockquote><p id="6883" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">来源:<a class="ae iu" href="https://rasa.com/docs/rasa/" rel="noopener ugc nofollow" target="_blank">https://rasa.com/docs/rasa/</a></p><p id="9699" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将探索Rasa的主要概念，并学习如何使用该框架构建一个简单的聊天机器人。</p><h1 id="dba3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">概观</h1><p id="fdce" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">Rasa开源基于Python，可以使用pip安装。请注意，它需要Python 3.6、3.7或3.8。</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="9f93" class="lm ju hi li b fi ln lo l lp lq">pip install -U pip</span><span id="c2ec" class="lm ju hi li b fi lr lo l lp lq">pip install rasa</span></pre><p id="74e2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">关于安装过程的更多细节可以在<a class="ae iu" href="https://rasa.com/docs/rasa/installation" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="2ed5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可能已经知道，聊天机器人需要后端和前端。第一个是我们今天要构建的，由机器人与用户交互时必须遵循的所有规则和动作组成；而开发第二个意味着创建一个界面，比如一个小部件，允许用户和机器人聊天。构建前端超出了本文的范围，因此我们将使用Rasa提供的命令行界面。</p><p id="340f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">构建聊天机器人时，你首先需要明确的是用户目标，也就是用户想要达到的总体目标。为此，用户将发送消息并与助理建议的按钮进行交互。<br/>在用户消息中，<strong class="ix hj">意图</strong>是用户试图完成的事情。一些意图示例包括问候、指定位置、寻求帮助。从用户消息中，也可以提取关键字，称为<strong class="ix hj">实体</strong>。它们可以是电话号码、位置等。</p><p id="9984" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一方面，助手执行<strong class="ix hj">动作</strong>，比如向用户发回<strong class="ix hj">响应</strong>或者完成默认和自定义动作。响应可以是文本、按钮、图像和其他内容，而定制动作是开发人员编写的运行任意代码的动作，主要用于与外部系统和API进行交互。请注意，响应只是一个答案列表，机器人每次都必须从中选择一个答案。运行定制动作代码的服务器被称为<strong class="ix hj">动作服务器</strong>。Rasa用Python维护Rasa SDK来实现定制动作，尽管也可以用其他语言编写定制动作。</p><p id="5001" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">表单</strong>是一种定制动作，用于向用户询问多条信息。例如，如果您需要一个城市和一个电影名称来订票观看，您可以创建一个表单来收集这些信息。您可以在表单中描述业务逻辑，比如在剧院中为客户提供不同的座位选项。我们将在后面的文章中详细介绍它们。</p><p id="af1d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们刚刚讨论的一切都列在<strong class="ix hj">域</strong>中，其中<strong class="ix hj"> </strong>定义了一个助手的输入和输出。</p><p id="e00e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，<strong class="ix hj">故事</strong>是对话模型的训练数据格式，由用户和机器人之间的对话组成。用户的消息被表示为带注释的意图和实体，机器人的响应被表示为一系列动作。</p><h1 id="96ef" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">构建聊天机器人</h1><p id="a979" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在这一节中，我们将讨论如何构建一个简单的聊天机器人。如前所述，首先要做的是定义用户目标。我们希望我们的助手充当电影名称的搜索引擎。然后，它将能够介绍自己，并询问用户他们感觉如何，如果他们想搜索电影名称。如果是这样，那么它将声明这样的请求将很快可用，因为我们将在以后的文章中构建这个特性。</p><p id="56b7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们行动起来吧！打开一个命令窗口，转到一个空目录，所有的聊天机器人配置文件将被存储。在那里，执行命令<code class="du ls lt lu li b">rasa init</code>并按下<code class="du ls lt lu li b">n</code>来回答问题“你想训练一个初始模型吗？”。一会儿我们会训练这个模型。</p><p id="74af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将创建一个具有以下文件夹结构的chatbot配置示例:</p><figure class="ld le lf lg fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/daa65852763670b82820f6c916e6e3c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:344/0*hR2jKt1mUc4Mgpac"/></div></figure><p id="40ef" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在可以通过运行命令<code class="du ls lt lu li b">rasa train</code>来训练模型。现在让我们来看看示例聊天机器人能做什么！</p><p id="4f4d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">打开两个命令提示符，进入聊天机器人的根文件夹。在第一个cmd中，运行命令“rasa run actions”来激活操作服务器，即后端将运行的服务器；而在第二个示例中，执行“rasa shell”来加载最后一个经过训练的模型，并启动命令行界面来与助手聊天。</p><p id="f57d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是一个基本对话的例子:</p><figure class="ld le lf lg fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/308a2cf5c882239a8c19e7324b516cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/0*xmlAMGRL78WjWLq4"/></div></figure><p id="f6fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">示例聊天机器人实际上只能询问用户的感受，并对肯定和否定的回答做出反应。试试你自己，如果你写下你感到悲伤会发生什么。</p><p id="b23b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们编辑配置文件来实现用户目标。首先要做的是将两个bot响应添加到<strong class="ix hj"> domain.yml </strong>文件中:</p><ul class=""><li id="f39f" class="lx ly hi ix b iy iz jc jd jg lz jk ma jo mb js mc md me mf bi translated">utter_movie询问用户是否想寻找一部电影</li><li id="03d4" class="lx ly hi ix b iy mg jc mh jg mi jk mj jo mk js mc md me mf bi translated">utter_not_yet通知用户某个功能即将可用。</li></ul><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="37ee" class="lm ju hi li b fi ln lo l lp lq">utter_movie:<br/>  - text: "Do you want me to look for a movie?"<br/>  - text: "Do you need me to look for a movie?"<br/>  - text: "Would you like to look for a movie?"<br/> <br/>  utter_not_yet:<br/>  - text: "This feature is not available yet. Please come back!"<br/>  - text: "This feature will be available soon!"</span></pre><p id="d5ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在必须编辑<strong class="ix hj">数据\故事. yml </strong>文件，将这些响应添加到对话路径中。目前的故事是</p><ul class=""><li id="3557" class="lx ly hi ix b iy iz jc jd jg lz jk ma jo mb js mc md me mf bi translated">“快乐路径”,其覆盖了用户声称快乐的对话，</li><li id="3966" class="lx ly hi ix b iy mg jc mh jg mi jk mj jo mk js mc md me mf bi translated">“悲伤路径1 ”,其覆盖了用户声称很高兴并且机器人响应很有帮助的对话，</li><li id="349b" class="lx ly hi ix b iy mg jc mh jg mi jk mj jo mk js mc md me mf bi translated">“悲伤路径2”涵盖了用户表示悲伤以及机器人响应没有帮助的对话。</li></ul><p id="2ffc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们需要6个故事来涵盖所有可能的场景:</p><figure class="ld le lf lg fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/a0d663e635bdcc5a78c849b3b6ce0a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Pp9LRnBBOHJf2UgbFaR2g.png"/></div></div></figure><p id="8ace" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">包含所有故事的完整文件可以在<a class="ae iu" href="https://gist.githubusercontent.com/efontana10/7f5833b2678a5aa80b9cad2f058ef0ff/raw/a75a52d5652c37d870bd7362d0afb7fb6cbdba46/stories.yml" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="1977" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在可以像以前一样使用<code class="du ls lt lu li b">rasa train</code>命令来训练新模型。</p><h1 id="3ed5" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="a8cf" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我们浏览了Rasa开源的基础知识，并学习了如何构建一个简单的聊天机器人。我们建议看一下由<code class="du ls lt lu li b">rasa init</code>命令生成的文件，并尝试添加一些关于意图和响应的例子。在下一篇文章中，我们将讨论如何添加一个自定义动作，并使用实体和槽来提高聊天机器人的技能。回头见！</p></div></div>    
</body>
</html>