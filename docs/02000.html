<html>
<head>
<title>Setting up your PLEX Server on Raspberry Pi 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Raspberry Pi 4上设置PLEX服务器</h1>
<blockquote>原文：<a href="https://medium.com/codex/setting-up-your-plex-server-on-raspberry-pi-4-28855b906679?source=collection_archive---------0-----------------------#2021-06-22">https://medium.com/codex/setting-up-your-plex-server-on-raspberry-pi-4-28855b906679?source=collection_archive---------0-----------------------#2021-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8519fec44662a548ae28e494f024ca60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-X2ywmshzx2T5f62hbRECA.jpeg"/></div></div></figure><p id="505d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">随着办公室离开网飞，我最终决定对我的Plex服务器进行技术更新，以确保它好用且便宜。在过去的七年里，我一直在利用一台从旧游戏电脑上拆下来的未升级的服务器来处理我的大部分家务，但是我已经厌倦了每年10-50美元的电力成本来为这个庞然大物供电。</p><p id="3735" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">进入树莓Pi 4。随着迷你电脑技术在过去十年里取得了如此大的进步，现在似乎是时候为我的家庭服务器需求换一个更优雅的解决方案了。一台十年前的unRAID服务器仍然比我现在使用的要强大一些，但是Plex不需要太多的电力就可以在你的家庭网络内部运行。也就是说，如果你计划从家庭网络之外流式传输(或让其他人流式传输)你的内容，那么你应该坚持为你的Plex服务器使用unRAID。</p><p id="5a0b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，如果你打算只在家里使用Plex，那么树莓Pi 4就可以了。所以，如果你来这里只是为了找到那个答案(这个答案很难找到！)，你找到了:树莓Pi 4会运行内部Plex媒体服务器！谢谢你来听我的Ted演讲。在本文的其余部分，我将逐步介绍如何设置一个Raspberry Pi 4 Plex媒体服务器。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="f8b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，你要购买所需的材料。我使用了一个<a class="ae jv" href="https://amzn.to/3hzNCEu" rel="noopener ugc nofollow" target="_blank"> CanaKit Raspberry Pi 4GB入门套件</a>，尽管他们现在提供了<a class="ae jv" href="https://amzn.to/2Mey8Ke" rel="noopener ugc nofollow" target="_blank"> 8GB入门套件</a>，也可以用于Plex媒体服务器；虽然额外的4GB RAM对于Pi运行其他功能的速度来说确实是一个方便因素，但这并不是说转码Plex在两种型号中都使用了相同的1.5 GHz中央处理器。你还需要一个支持USB 2.0的外置硬盘驱动器(HDD)，像这个<a class="ae jv" href="https://amzn.to/2WYy7MH" rel="noopener ugc nofollow" target="_blank"> 8TB的外置硬盘驱动器</a>。这些东西很难找到，因为很多地方都不生产支持USB 2.0的驱动器，生产有外部电源的驱动器的地方就更少了。但是，您的硬盘需要同时具备这两种功能，因为Rasbperry Pi无法为旋转的硬盘供电。你可以购买一个外部固态硬盘(SSD)，但如果你可能需要两到三个这些2TB的SSD，它们每个都比8TB的HDD贵20美元。</p><p id="7cde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦你得到了所有的装备，你需要把它安装到箱子里，如下视频所述。在将顶盖放入机箱之前，请参阅随您的CanaKit附带的快速入门指南，并在您的CPU、RAM和千兆位控制器以及微型机箱风扇上安装微型散热器。</p><figure class="jw jx jy jz fd ij"><div class="bz dy l di"><div class="ka kb l"/></div></figure><p id="7b08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦安装好所有这些组件，并将外壳放在Pi上，将microSD卡面朝下安装(标签应朝向外壳底部)。SD卡不会与Pi本身齐平，但不会超出CanaKit。</p><p id="837d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将鼠标和键盘插入USB 1.0(黑色)插槽，将micro-HDMI电缆插入HDMI 0插槽，最后将电源插入USB 3.0插槽。Raspberry Pi应该在不到3分钟的时间内启动，如果没有，请关闭Pi并确保SD卡<a class="ae jv" href="https://www.youtube.com/watch?v=xQdCoA5T8Tk" rel="noopener ugc nofollow" target="_blank">正确安装</a>并重试。如果Pi仍然无法启动，请浏览这个<a class="ae jv" href="https://www.raspberrypi.org/forums/viewtopic.php?t=58151#p1485558" rel="noopener ugc nofollow" target="_blank">论坛帖子</a>以获取故障排除技术。可能是您的SD卡没有正确安装，SD卡没有安装NOOBs，或者EEPROM没有正确配置。</p><p id="a395" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦Raspberry Pi启动，您应该会看到NOOBS安装页面，在这里您将安装操作系统(OS)。安装Raspbian(推荐)选项；在4GB的机型上，这大约需要30分钟。出现提示时，在安装完成后重新启动。</p><p id="484f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Raspbian操作系统启动后，会提示你做几件事，比如设置语言、密码和更新操作系统。遵循这些提示，并在出现提示时重新启动。当提示停止时，您就可以开始了。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="c052" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在您的Raspberry Pi上设置Plex媒体服务器的第一步是首先将您的Raspberry Pi设置为网络服务器。这是一个相当简单的过程。首先，你要插上外置硬盘；大多数预格式化的将自动安装和现成的工作(<a class="ae jv" href="https://amzn.to/3aY0C5y" rel="noopener ugc nofollow" target="_blank">推荐希捷做到了！</a>)，但如果你的没有，就跟着<a class="ae jv" href="https://www.raspberrypi.org/documentation/configuration/external-storage.md" rel="noopener ugc nofollow" target="_blank">这个教程</a>。硬盘运行后，在设置所需的Plex媒体服务器文件夹结构之前，使用图形用户界面(鼠标点击)找到硬盘并删除其上的文件(如果有)。您可以在终端中这样做，但是，老实说，如果您不熟悉基于Linux的操作系统，在GUI中这样做也很容易。但是，这是一个临时的解决方案，因为基于GUI的挂载有一些奇怪的隐藏权限，因此Plex将永远无法对其进行读/写操作！</p><p id="cc55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，您需要永久安装驱动器，为了做到这一点，您需要打开您的GUI文件资源管理器并卸载(防止Plex对临时安装的HDD进行读/写的隐藏权限可以防止从终端卸载)您的硬盘驱动器，打开终端并键入以下命令。如果您需要帮助，请点击<a class="ae jv" href="https://forums.plex.tv/t/using-ext-ntfs-or-other-format-drives-internal-or-external-on-linux/198544" rel="noopener ugc nofollow" target="_blank">这篇文章</a>了解您正在做的事情的更多详细信息，但是对于那些不需要额外信息的人，请进行以下操作:</p><pre class="jw jx jy jz fd kc kd ke kf aw kg bi"><span id="8528" class="kh ki hi kd b fi kj kk l kl km"><strong class="kd hj">mkdir /plex/media</strong></span><span id="bab5" class="kh ki hi kd b fi kn kk l kl km"><strong class="kd hj">sudo sh</strong> (enter your password)</span><span id="f378" class="kh ki hi kd b fi kn kk l kl km"><strong class="kd hj">df</strong></span><span id="488e" class="kh ki hi kd b fi kn kk l kl km"><strong class="kd hj">blkid </strong>(enter the /dev/sd### for your HDD; copy the UUID for this drive)</span><span id="e5c8" class="kh ki hi kd b fi kn kk l kl km"><strong class="kd hj">nano /etc/fstab </strong>(and enter a new line “UUID=######## /plex/media ntfs <br/> default,auto,rw,nofail 0 1”)</span><span id="cb71" class="kh ki hi kd b fi kn kk l kl km"><strong class="kd hj">CTRL+X, Y, ENTER</strong></span><span id="1107" class="kh ki hi kd b fi kn kk l kl km"><strong class="kd hj">mount /plex/media</strong></span></pre><p id="c31a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您没有得到错误，尝试导航到/plex/media(<em class="ko">CD/plex/media</em>)并显示内容(<em class="ko"> ls -latr </em>)，看看您的文件是否显示。如果是这样，您就可以开始了，并且完成了这一步！如果没有，<a class="ae jv" href="https://forums.plex.tv/t/using-ext-ntfs-or-other-format-drives-internal-or-external-on-linux/198544" rel="noopener ugc nofollow" target="_blank">本文</a>将帮助您排除<em class="ko">故障。</em>如果继续，您将到达末尾，Plex将不会显示任何媒体，并且您可以返回到此步骤进行修复。接下来，您需要安装Samba，这样您就可以通过键入以下命令在网络间共享文件:</p><pre class="jw jx jy jz fd kc kd ke kf aw kg bi"><span id="1f00" class="kh ki hi kd b fi kj kk l kl km">sudo apt-get update</span><span id="b880" class="kh ki hi kd b fi kn kk l kl km">sudo apt-get upgrade</span><span id="f939" class="kh ki hi kd b fi kn kk l kl km">sudo apt-get install samba samba-common-bin</span></pre><p id="e462" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些命令将Samba文件共享服务安装到您的Raspbian操作系统中，这是基于Linux的操作系统在网络上共享文件的方式。接下来，您需要通过修改其配置(或conf)文件来配置服务。如果你想知道更多关于操作系统、服务和“sudo”的意思，请查阅我的书<a class="ae jv" href="https://amzn.to/3hxuZkz" rel="noopener ugc nofollow" target="_blank"> <em class="ko">了解它:解码技术和商业</em> </a> <em class="ko">。</em>对于本教程来说，重要的是要知道sudo告诉终端窗口以管理员的身份做一些事情(这相当于在Windows 10的那些弹出窗口上点击“继续”的基于文本的操作)，如果你在互联网上找到的命令看起来有些可疑，你不希望只是随意键入sudo后跟命令。</p><pre class="jw jx jy jz fd kc kd ke kf aw kg bi"><span id="24b1" class="kh ki hi kd b fi kj kk l kl km">sudo nano /etc/samba/smb.conf</span></pre><p id="0436" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当该文件打开时，向下滚动到底部，并使用以下文本添加另一个块。我建议您按照smb.conf文件中的方式缩进文本，以便于阅读，但这最终取决于您。</p><pre class="jw jx jy jz fd kc kd ke kf aw kg bi"><span id="94fa" class="kh ki hi kd b fi kj kk l kl km">[Pi Plex Share]</span><span id="39a0" class="kh ki hi kd b fi kn kk l kl km">path = /plex/media</span><span id="5e30" class="kh ki hi kd b fi kn kk l kl km">writeable=Yes</span><span id="e4a3" class="kh ki hi kd b fi kn kk l kl km">create mask = 0777</span><span id="a7c8" class="kh ki hi kd b fi kn kk l kl km">directory mask = 0777</span><span id="07d3" class="kh ki hi kd b fi kn kk l kl km">public = Yes</span></pre><p id="319d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">编辑完文件后，您会希望使用nano控件来保存和退出(CTRL+X，Y和ENTER)。Tada，只要你遵循这些步骤，那么这些文件夹应该可以在你的网络上被发现。您可能希望最终将该文件编辑为"<strong class="is hj"> <em class="ko"> public = No </em> </strong>"，并设置用户名和密码以在有人来访时保护您的文件，但是在设置时，更容易限制潜在的挂起次数。</p><p id="6d32" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要测试是否成功，请转到将要访问共享的Windows 10计算机，并启用SMB 1.0/CIFS文件共享支持，方法是进入控制面板，单击程序，然后<em class="ko">“打开或关闭Windows功能”</em></p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es kp"><img src="../Images/884a39b3402884962d2379eb438682db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*w9FYjyvQJszwMP1B9GWN-g.png"/></div></figure><p id="ec12" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦启用了SMB 1.0，重启你的电脑，进入你的Raspberry Pi的终端窗口，输入<strong class="is hj"> <em class="ko"> hostname -I </em> </strong>并记下IP地址。当你的Windows 10电脑重启后，点击Windows-R，输入\\192.168.X.X\其中X.X是你记下的IP地址，点击运行。如果你做的一切都是正确的，你会看到你在树莓Pi上创建的文件夹！</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/79d94835494683cab4faf52c176be40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QWe6lnbar6cX2cqpDaqSCg.png"/></div></div></figure><p id="81b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你看到了那个屏幕，那么它工作了！接下来，如果你像我一样，从另一台服务器传输数据，你现在就需要这样做。你可以用慢而简单的方式来完成(只需使用你的Windows 10电脑通过网络拷贝)，或者你可以设置第二个外部硬盘来更快地传输数据位。我，呃，选择了懒惰的方法，花了很长时间。</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div class="er es kr"><img src="../Images/cadd8005a162f28355e83f258a51ae46.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*_7XWSzf47Y17q_wkQ19S6Q.png"/></div></figure><p id="4f2d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦完成，或者如果您没有要传输的数据，您就可以进入下一步，将Plex媒体服务器安装到您的新Raspberry Pi上！在您等待的时候，您可能想要确保SSH已经安装(通过<a class="ae jv" href="https://www.raspberrypi.org/documentation/remote-access/ssh/" rel="noopener ugc nofollow" target="_blank"> GUI </a>)或者通过在终端中键入<em class="ko"> sudo raspi-config </em>，选择<strong class="is hj">界面选项，SSH，Yes，OK，</strong>，最后<strong class="is hj">完成</strong>。一旦SSH被启用，尝试进入您的Raspberry Pi并输入<em class="ko"> sudo whoami </em>。如果你根本无法SSH到你的Raspberry Pi，或者那个命令没有用<strong class="is hj"> root </strong>响应，如果你现在通过分别对这里的<a class="ae jv" href="https://www.raspberrypi.org/documentation/linux/usage/users.md#:~:text=You%20can%20create%20additional%20users,don't%20want%20a%20password." rel="noopener ugc nofollow" target="_blank">和这里的</a><a class="ae jv" href="https://linuxize.com/post/how-to-add-user-to-sudoers-in-ubuntu/" rel="noopener ugc nofollow" target="_blank"/>进行故障诊断来解决这些问题，事情会变得容易得多。</p><p id="0a8b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保你的Raspberry Pi有一个静态IP地址也是一个好主意，要么通过配置你的路由器(或任何在你的网络中处理DHCP的东西)来保留那个IP，要么通过配置<a class="ae jv" href="https://pimylifeup.com/raspberry-pi-static-ip-address/" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi本身</a>。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="a45d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您的Raspberry Pi是一个网络服务器，您可以通过打开一个终端并键入以下命令来使它成为一个Plex媒体服务器。</p><pre class="jw jx jy jz fd kc kd ke kf aw kg bi"><span id="382d" class="kh ki hi kd b fi kj kk l kl km">sudo apt-get install apt-transport-https</span><span id="33a2" class="kh ki hi kd b fi kn kk l kl km">curl <a class="ae jv" href="https://downloads.plex.tv/plex-keys/PlexSign.key" rel="noopener ugc nofollow" target="_blank">https://downloads.plex.tv/plex-keys/PlexSign.key</a> | sudo apt-key add -</span><span id="6351" class="kh ki hi kd b fi kn kk l kl km">echo deb <a class="ae jv" href="https://downloads.plex.tv/repo/deb" rel="noopener ugc nofollow" target="_blank">https://downloads.plex.tv/repo/deb</a> public main | sudo tee /etc/apt/sources.list.d/plexmediaserver.list</span><span id="ee9b" class="kh ki hi kd b fi kn kk l kl km">sudo apt-get update</span><span id="7ebd" class="kh ki hi kd b fi kn kk l kl km">sudo apt install plexmediaserver</span></pre><p id="173d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您得到错误/usr/lib/apt/methods/https not found，那么重试—您可能忽略了在<em class="ko">sudo apt-get install apt-transport-https</em>中的一个错误或警告。完成后，您可以通过IP地址:32400/web/通过您的Web浏览器导航到Plex Web应用程序，它应该是这样的！</p><figure class="jw jx jy jz fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/1976211a870124607bcae9b68dbc0ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8a-RAkCtTKUCJ6bReB_hTA.png"/></div></div></figure><p id="52fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一点上，将媒体内容抓取到您的Plex服务器中对于Raspberry Pi来说仍然是与unRAID相同的过程:手刹！你可以点击下面的按钮来阅读教程，一旦你完成了，你就有了自己的网飞！</p></div></div>    
</body>
</html>