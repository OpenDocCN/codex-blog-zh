<html>
<head>
<title>Create a Comment Box and Comment Posting Function Using React JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React JS创建评论框和评论发布功能</h1>
<blockquote>原文：<a href="https://medium.com/codex/create-a-comment-box-and-comment-posting-function-using-react-js-c6004087118?source=collection_archive---------0-----------------------#2021-04-02">https://medium.com/codex/create-a-comment-box-and-comment-posting-function-using-react-js-c6004087118?source=collection_archive---------0-----------------------#2021-04-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/051c6d0800471c830d338035b05512a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qmH88rAcNohZN5GLZPb-Ng.png"/></div></div></figure><p id="cf64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在使用vanilla JS完成Instagram clone项目后，现在我正在学习React的基础知识，并将我编写的vanilla JS代码更改为React代码。React最重要的概念是<strong class="is hj">状态</strong>和<strong class="is hj">道具</strong>。</p><p id="9561" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">光是理解它们的含义和作用就费了很多周折。我甚至还没有真正适应普通的JS，但现在我不得不学习React，它只是在我的脑海里发生了太多的事情。</p><p id="7160" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">总之，这篇文章的主题是<strong class="is hj">如何使用React </strong>创建一个具有评论发布功能的评论框。这个帖子只指UI，不考虑后端。我将介绍:</p><ul class=""><li id="9dbe" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">如何为用户输入的注释值设置状态</strong></li><li id="5720" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">如何启用评论框上的“发布”按钮</strong></li><li id="d337" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">如何使用状态和道具，并在评论列表中发表评论</strong></li><li id="390c" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">为什么对每个评论应用唯一键很重要</strong></li></ul></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="c24e" class="kj kk hi bd kl km kn ko kp kq kr ks kt jb ku kv kw jf kx ky kz jj la lb lc ld bi translated">如何为用户输入的注释值设置状态&amp;启用注释框中的“发布”按钮</h2><p id="91e2" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">因此，在Instagram feeds上，当评论输入框中没有输入任何内容时,“发布”按钮被禁用(无法点击),只有当输入内容时，按钮才会被启用并变成蓝色。请参考下面的图片。</p><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/9c8e165b6ddcf0319ed39db325d51131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KjNGQAWXAGKZfK_shVjIIg.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">默认</figcaption></figure><figure class="lk ll lm ln fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ls"><img src="../Images/854450d1263604099e70ae2dd92d216a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lm4NPePQjih7noGEBK1lng.png"/></div></div><figcaption class="lo lp et er es lq lr bd b be z dx translated">启用发布按钮</figcaption></figure><p id="b759" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看下面的代码:</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="8d8c" class="kj kk hi lu b fi ly lz l ma mb">...<br/>class Main extends Component {</span><span id="28e7" class="kj kk hi lu b fi mc lz l ma mb">constructor() {<br/> super();</span><span id="439c" class="kj kk hi lu b fi mc lz l ma mb"><em class="md"> this</em>.state = {<br/>  <strong class="lu hj">commentValue: “”,</strong><br/>  commentLine: [{ commentId:””, text: “”, }],<br/>  };<br/>}</span><span id="b084" class="kj kk hi lu b fi mc lz l ma mb">...</span></pre><ol class=""><li id="7cd3" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn me ju jv jw bi translated">我们需要从在states对象中设置组件的初始状态开始。我们现在在主组件上，但最终我们将通过props把状态传递给子组件CommentBox。我这里用的是<code class="du mf mg mh lu b">class</code>，但是你也可以用函数。</li><li id="16be" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn me ju jv jw bi translated">我将初始的<code class="du mf mg mh lu b">commentValue</code>(输入到input元素中的值)的状态设置为空，当有东西输入时，它将被改变。我们将在后面的文章中讨论<code class="du mf mg mh lu b">commentLine</code>状态。</li></ol><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="0aef" class="kj kk hi lu b fi ly lz l ma mb">handleCommentValue = (e) =&gt; {</span><span id="4047" class="kj kk hi lu b fi mc lz l ma mb"><em class="md">this</em>.setState({<br/>  commentValue: e.target.value,<br/> });<br/>};</span></pre><p id="cf56" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.现在，我们需要将<code class="du mf mg mh lu b">commentValue</code>的状态改为用户在输入元素中输入的内容。在这种情况下，我们需要一个事件处理函数。我将其命名为<code class="du mf mg mh lu b">handleCommentValue</code>，当<code class="du mf mg mh lu b">e</code>(事件)发生时，<code class="du mf mg mh lu b">setState()</code>函数被执行。<code class="du mf mg mh lu b">setState()</code>将状态更改为指定值<code class="du mf mg mh lu b">e.target.value</code>——用户输入的值。</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="5334" class="kj kk hi lu b fi ly lz l ma mb">render() {<br/> <em class="md">return</em> (<br/>  &lt;&gt;<br/>  ...</span><span id="aa31" class="kj kk hi lu b fi mc lz l ma mb">  &lt;CommentBox<br/>    <strong class="lu hj"><em class="md">commentValue</em>={<em class="md">this</em>.state.commentValue}<br/>    <em class="md">handleCommentValue</em>={<em class="md">this</em>.handleCommentValue}</strong><br/>    <em class="md">enterCommentLine</em>={<em class="md">this</em>.enterCommentLine}<br/>    <em class="md">submitCommentLine</em>={<em class="md">this</em>.submitCommentLine}<br/>  /&gt;</span><span id="b20b" class="kj kk hi lu b fi mc lz l ma mb">...<br/>&lt;/&gt;</span></pre><p id="df1d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.然后，我们需要将状态和事件处理函数传递给包含注释框元素的子组件。因为<code class="du mf mg mh lu b">CommentBox</code>是一个组件，所以可以通过写<code class="du mf mg mh lu b">&lt;CommentBox /&gt;</code>在父组件中返回它。在标签内部，状态和事件处理函数可以像写属性一样传递，比如<code class="du mf mg mh lu b">commentValue={this.state.commentValue}</code>。属性的名称可以是您喜欢的，但是我将它们设置为与州名相同。稍后我们将回到最后两个状态(enterCommentLine和submitCommentLine)。</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="5e6b" class="kj kk hi lu b fi ly lz l ma mb"><strong class="lu hj">class CommentBox extends Component</strong> {</span><span id="d596" class="kj kk hi lu b fi mc lz l ma mb">render() {</span><span id="d2d5" class="kj kk hi lu b fi mc lz l ma mb"> const { <strong class="lu hj">commentValue, handleCommentValue,</strong> <br/> enterCommentLine, submitCommentLine} = <em class="md">this</em>.props;</span><span id="630c" class="kj kk hi lu b fi mc lz l ma mb"><strong class="lu hj"> const enableCommentButton = () =&gt; {<br/>  <em class="md">return</em> (commentValue ? false : true);<br/>}</strong></span><span id="7a44" class="kj kk hi lu b fi mc lz l ma mb"><strong class="lu hj"> const changeCommentButtonStyle = () =&gt; {<br/>  <em class="md">return</em> (commentValue ? "comments-button-enabled" : <br/>  "comments-button-disabled");<br/>}</strong></span><span id="5304" class="kj kk hi lu b fi mc lz l ma mb"><em class="md">return</em> (</span><span id="c027" class="kj kk hi lu b fi mc lz l ma mb"> &lt;div <em class="md">className</em>="comments-box"&gt;<br/>  &lt;input <em class="md">onKeyPress</em>={enterCommentLine} <strong class="lu hj"><em class="md">value</em>={commentValue}</strong><br/>    <em class="md">id</em>="comments-input" <strong class="lu hj"><em class="md">onChange</em>={handleCommentValue}</strong><br/>    <em class="md">type</em>="text" <em class="md">placeholder</em>="Add a comment..." /&gt;</span><span id="16e0" class="kj kk hi lu b fi mc lz l ma mb">  &lt;button <em class="md">onClick</em>={submitCommentLine} <em class="md">type</em>="submit"     <br/>    <em class="md">className</em>="comments-button"<strong class="lu hj"><em class="md">id</em>={changeCommentButtonStyle()}</strong><br/>    <strong class="lu hj"><em class="md">disabled</em>={enableCommentButton()}</strong>&gt;Post&lt;/button&gt;<br/>  &lt;/div&gt;</span><span id="1a04" class="kj kk hi lu b fi mc lz l ma mb"> )}<br/>}</span></pre><p id="b503" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">5.现在让我们把注意力集中在加粗的代码上。从#4开始，我们将<code class="du mf mg mh lu b">commentValue</code>和<code class="du mf mg mh lu b">handleCommentValue</code>传递给了CommentBox组件。为了在组件的元素中使用它们，我们需要通过编写<code class="du mf mg mh lu b">const { <strong class="is hj">commentValue, handleCommentValue</strong>} = <em class="md">this</em>.props;</code>将它们设置为<code class="du mf mg mh lu b">props</code>。</p><p id="ac1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">6.注意，<code class="du mf mg mh lu b">handleCommentValue</code>被分配给<code class="du mf mg mh lu b">onChange</code>属性，该属性跟踪用户在元素中输入的值，并将<code class="du mf mg mh lu b">commentValue</code>设置为这些值。此外，<code class="du mf mg mh lu b">commentValue</code>被分配给<code class="du mf mg mh lu b">value</code>属性，以便在我们提交/发布评论时重置输入元素。</p><p id="c5c3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">7.在<code class="du mf mg mh lu b">render()</code>内部而在<code class="du mf mg mh lu b">return()</code>外部，声明了两个函数——从Post按钮元素中去除<code class="du mf mg mh lu b">disabled</code>属性的<code class="du mf mg mh lu b">enableCommentButton()</code>,以及在按钮被启用时改变按钮样式的<code class="du mf mg mh lu b">changeCommentsButtonStyle()</code>。然后，这两个函数被插入到按钮标签— <code class="du mf mg mh lu b"><strong class="is hj"><em class="md">id=</em>{changeCommentButtonStyle()} <em class="md">disabled</em>={enableCommentButton()}</strong></code> <strong class="is hj"> </strong>。请注意，这些函数用{}包装，您可以在这里用JSX语言编写JS语法。通过将该函数应用于<code class="du mf mg mh lu b">id</code>，我们可以使用CSS来应用适当的样式。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="ccab" class="kj kk hi bd kl km kn ko kp kq kr ks kt jb ku kv kw jf kx ky kz jj la lb lc ld bi translated"><strong class="ak">如何使用状态和道具，并在评论列表中发表评论</strong></h2><p id="d5cf" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">现在，我们需要通过按Enter或单击post按钮来发布评论。我创建了一个评论组件，它代表用户提交的每个评论(<code class="du mf mg mh lu b">commentLine</code>)。但是首先，让我们继续使用父Main组件，然后是CommentBox组件。现在，父主组件处于commentLine状态。</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="75cc" class="kj kk hi lu b fi ly lz l ma mb"><em class="md">this</em>.state = {<br/>  commentValue: “”,<br/>  <strong class="lu hj">commentLine: [{ commentId:””, text: “”, }],</strong><br/>};</span></pre><ol class=""><li id="a737" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn me ju jv jw bi translated">注意，<code class="du mf mg mh lu b">commentLine</code>是一个数组，它包含一个对象的每个元素，该对象有<code class="du mf mg mh lu b">commentId</code>和<code class="du mf mg mh lu b">text</code>数据。我们将在下一节讨论<code class="du mf mg mh lu b">commentId</code>。</li></ol><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="daf6" class="kj kk hi lu b fi ly lz l ma mb">setCommentLine = () =&gt; {</span><span id="ab16" class="kj kk hi lu b fi mc lz l ma mb"><em class="md">this</em>.setState({<br/>  commentLine: [<br/>   …<em class="md">this</em>.state.commentLine,<br/>   { commentId: commentCounter++, text: <em class="md">this</em>.state.commentValue }],</span><span id="1993" class="kj kk hi lu b fi mc lz l ma mb">  commentValue: “”,<br/>});</span></pre><p id="13eb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.在父主组件中，我声明了设置<code class="du mf mg mh lu b">commentLine</code>状态的<code class="du mf mg mh lu b">setCommentLine</code>函数。当我们考虑这种状态时，它需要更改为输入元素中输入的任何内容。因此，<code class="du mf mg mh lu b">commentValue</code>状态被分配给<code class="du mf mg mh lu b">text</code>。在<code class="du mf mg mh lu b">commentLine</code>被发布后，它应该是空的— <code class="du mf mg mh lu b">commentLine: ""</code>。现在让我们再做两个执行<code class="du mf mg mh lu b">setCommentLine</code>的函数。</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="0bf0" class="kj kk hi lu b fi ly lz l ma mb">submitCommentLine = (e) =&gt; {<br/> e.preventDefault();<br/> <em class="md">this</em>.setCommentLine();<br/>};</span><span id="cf5c" class="kj kk hi lu b fi mc lz l ma mb">enterCommentLine = (e) =&gt; {<br/> <em class="md">if</em> (e.charCode === 13) {<br/>  <em class="md">this</em>.setCommentLine();<br/> }<br/>};</span></pre><p id="5515" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">3.<code class="du mf mg mh lu b">setCommentLine</code>当我们通过输入或点击发布按钮发布评论时，需要执行该功能。因此，我们需要两个事件处理函数，一个用于单击按钮，另一个用于按Enter。在每个功能内部，执行<code class="du mf mg mh lu b">setCommentLine</code>功能。然后，这两个函数再次传递给子CommentBox组件。</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="bdb6" class="kj kk hi lu b fi ly lz l ma mb"><em class="md">...<br/>return</em> (</span><span id="18b6" class="kj kk hi lu b fi mc lz l ma mb"> &lt;div <em class="md">className</em>="comments-box"&gt;<br/>  &lt;input <strong class="lu hj"><em class="md">onKeyPress</em>={enterCommentLine}</strong> <em class="md">value</em>={commentValue}<br/>   <em class="md">id</em>="comments-input" <em class="md">onChange</em>={handleCommentValue}<br/>   <em class="md">type</em>="text" <em class="md">placeholder</em>="Add a comment..." /&gt;</span><span id="3357" class="kj kk hi lu b fi mc lz l ma mb">  &lt;button <strong class="lu hj"><em class="md">onClick</em>={submitCommentLine}</strong> <em class="md">type</em>="submit"    <br/>   <em class="md">className</em>="comments-button"<em class="md">id</em>={changeCommentButtonStyle()}<br/>   <em class="md">disabled</em>={enableCommentButton()}&gt;Post&lt;/button&gt;<br/> &lt;/div&gt;</span><span id="1078" class="kj kk hi lu b fi mc lz l ma mb">)}<br/>}</span></pre><p id="823d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">4.在子CommentBox组件中，注意<code class="du mf mg mh lu b">enterCommentLine</code>被赋给input元素的<code class="du mf mg mh lu b">onKeyPress</code>属性，<code class="du mf mg mh lu b">submitCommentLine</code>被赋给button元素的<code class="du mf mg mh lu b">onClick</code>属性。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h2 id="a561" class="kj kk hi bd kl km kn ko kp kq kr ks kt jb ku kv kw jf kx ky kz jj la lb lc ld bi translated"><strong class="ak">为什么对每个评论应用唯一键很重要</strong></h2><p id="1854" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">现在，让我们看看当用户发布评论时添加的每个评论元素。</p><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="1a55" class="kj kk hi lu b fi ly lz l ma mb"><strong class="lu hj">let commentCounter = 1;</strong></span><span id="1343" class="kj kk hi lu b fi mc lz l ma mb">class Main extends Component {</span><span id="1b66" class="kj kk hi lu b fi mc lz l ma mb">constructor() {<br/>super();</span><span id="51a2" class="kj kk hi lu b fi mc lz l ma mb"><strong class="lu hj"><em class="md">this</em>.state </strong>= {<br/>  commentValue: “”,<br/>  commentLine: [{ <strong class="lu hj">commentId:””</strong>, text: “”, }],<br/>  };<br/>}</span><span id="4c81" class="kj kk hi lu b fi mc lz l ma mb">....</span><span id="2d73" class="kj kk hi lu b fi mc lz l ma mb">setCommentLine = () =&gt; {</span><span id="3725" class="kj kk hi lu b fi mc lz l ma mb"><strong class="lu hj"><em class="md">this</em>.setState</strong>({<br/> commentLine: [<br/>  …<em class="md">this</em>.state.commentLine,<br/>  { <strong class="lu hj">commentId: commentCounter++</strong>, text: <em class="md">this</em>.state.commentValue }],</span><span id="fe08" class="kj kk hi lu b fi mc lz l ma mb"> commentValue: “”,<br/>});</span></pre><ol class=""><li id="5df5" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn me ju jv jw bi translated">在我们进入子注释组件之前，让我们回忆一下<code class="du mf mg mh lu b">commentLine</code>有一个带有<code class="du mf mg mh lu b">commentId</code>和<code class="du mf mg mh lu b">text</code>属性的对象元素。<code class="du mf mg mh lu b">commentId</code>是赋予每个评论的唯一键。另外，请注意，<code class="du mf mg mh lu b">commentCounter</code>变量是在全局范围内声明的，它在<code class="du mf mg mh lu b">setState()</code>中用来给<code class="du mf mg mh lu b">commentId</code>分配一个唯一的编号。</li></ol><pre class="lk ll lm ln fd lt lu lv lw aw lx bi"><span id="30eb" class="kj kk hi lu b fi ly lz l ma mb">class Comment extends Component {</span><span id="7256" class="kj kk hi lu b fi mc lz l ma mb">render() {<br/> <strong class="lu hj">const { commentLine } = <em class="md">this</em>.props;</strong></span><span id="c105" class="kj kk hi lu b fi mc lz l ma mb"><em class="md"> return</em> (<br/>  &lt;ul <em class="md">className</em>=”comments-list”&gt;<br/>  {commentLine.map((val) =&gt; {<em class="md">return</em> <br/>    <strong class="lu hj">&lt;li <em class="md">className</em>=”each-comment”  <br/>     <em class="md">key</em>={val.commentId}&gt;{val.text}<br/>    &lt;/li&gt;</strong><br/>    })<br/>   }<br/>  &lt;/ul&gt;<br/>)};<br/>}</span></pre><p id="fe94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.现在我们在子评论组件上。它需要使用来自父组件的props返回带有数据的<code class="du mf mg mh lu b">li</code>元素。由于<code class="du mf mg mh lu b">commentLine</code>是一个包含有两个属性的对象元素的数组，我们可以使用<code class="du mf mg mh lu b">map()</code>方法来处理并返回每个属性。这里，<code class="du mf mg mh lu b">commendId</code>被分配给<code class="du mf mg mh lu b">li</code>元素的<code class="du mf mg mh lu b">key</code>，而<code class="du mf mg mh lu b">text</code>被分配给值。</p><p id="b5b8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那么，为什么给数组中的元素一个唯一的键很重要呢？ </p><p id="0bd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们使用<code class="du mf mg mh lu b">key</code>给数组中的元素一个稳定的标识。稳定的标识有助于跟踪哪个项目被更改、添加或删除。当React在DOM节点的子节点上递归时，它同时迭代两个子节点列表，只有在有差异时才变异。这意味着，如果一个新的不同的<code class="du mf mg mh lu b">li </code>元素进入其他具有相同值的<code class="du mf mg mh lu b">li</code>元素的开头，这可能会导致问题，因为React将变异每个子元素，就好像这些元素都是不同的一样。更详细的解释在这里:</p><div class="mi mj ez fb mk ml"><a href="https://reactjs.org/docs/reconciliation.html#recursing-on-children" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hj fi z dy mq ea eb mr ed ef hh bi translated">和解-反应</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">React提供了一个声明式API，因此您不必担心每次更新时会发生什么变化。这使得…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">reactjs.org</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz io ml"/></div></div></a></div><p id="b2e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我们需要给数组中的元素一个惟一的键，以避免应用程序的低效率和可能的问题。我使用了每个元素增加1的<code class="du mf mg mh lu b">commentCounter</code>，但是当组件在你的应用中被反复使用时，这不是一个理想的方法。理想情况下，key的惟一id将从后端给出，或者您也可以利用生成随机数的库。</p></div></div>    
</body>
</html>