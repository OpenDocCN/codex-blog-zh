<html>
<head>
<title>Flutter — Razorpay Payment Gateway Integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">flutter——razor pay支付网关集成</h1>
<blockquote>原文：<a href="https://medium.com/codex/flutter-razorpay-payment-gateway-integration-9aeb6210e914?source=collection_archive---------5-----------------------#2022-06-12">https://medium.com/codex/flutter-razorpay-payment-gateway-integration-9aeb6210e914?source=collection_archive---------5-----------------------#2022-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9935" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有很多支付网关可以集成到你的应用程序中，其中之一是Razorpay。这是一个流行的和最常用的支付网关之一。</p><p id="70d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将看到如何将Razorpay集成到flutter应用程序中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/8d25c98fc687b26474d929262f0d1814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vRvWgTAv_SCAro7TmKXClA.png"/></div></div></figure><h1 id="d814" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">所需插件</strong></h1><p id="7d48" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">1- <a class="ae ks" href="https://pub.dev/packages/razorpay_flutter" rel="noopener ugc nofollow" target="_blank"> razorpay_flutter </a></p><p id="8ee1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2- <a class="ae ks" href="https://pub.dev/packages/http" rel="noopener ugc nofollow" target="_blank"> http </a></p><p id="c293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将使用http插件进行API调用。</p><h1 id="1628" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">添加Proguard规则(仅适用于Android) </strong></h1><p id="f51e" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">如果您在构建中使用Proguard，您需要在Proguard文件中添加以下代码行</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kt"><img src="../Images/f35aa607a2930753fa08afd3254f0126.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*yvvtxmrOL6ofM95W8y7d1g.png"/></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">proguard-rules.pro</figcaption></figure><h1 id="19c0" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">在IOS上启用UPI意图</h1><p id="93e3" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">通过在您的应用程序的结账表单上启用UPI Intent，为您的客户提供更好的支付体验。在UPI意向流中:</p><p id="8c5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.客户在您的iOS应用程序中选择UPI作为支付方式。显示支持意向流的UPI应用列表。例如PhonePe、Google Pay和Paytm。</p><p id="83bc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.客户选择偏好的应用程序。UPI应用程序打开时会显示预先填充的付款详情。</p><p id="74a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.客户输入UPI PIN码完成交易。</p><p id="d77d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过在您的应用程序的结账表单上启用UPI Intent，为您的客户提供更好的支付体验。在UPI意向流中:</p><p id="8822" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1.客户在您的iOS应用程序中选择UPI作为支付方式。显示支持意向流的UPI应用列表。比如PhonePe，Google Pay，Paytm。</p><p id="9b42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.客户选择他们喜欢的应用程序。UPI应用程序打开时会显示预先填充的付款详情。</p><p id="f465" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.客户输入他们的UPI PIN以完成他们的交易。</p><p id="7374" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">4.一旦支付成功，客户将被重定向到您的应用程序或网站。</p><p id="dace" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要在iOS集成中启用此功能，您必须在应用的info.plist文件中进行以下更改。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ky"><img src="../Images/fbd2b61746e7adc5e07b526e53265c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*rOCCZehPkhsF5EOgIBxxRw.png"/></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">信息列表</figcaption></figure><h1 id="bf75" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">所需的最低版本</strong></h1><p id="0602" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">对于<strong class="ih hj"> Android </strong>，请确保您的应用程序的最低API级别为19或更高。</p><p id="6351" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于<strong class="ih hj"> iOS </strong>，请确保您的应用的最低部署目标是iOS 10.0或更高版本。此外，不要忘记为您的项目启用位代码。</p><p id="7a32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们开始编码…</p><h1 id="6a33" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建Razorpay实例</h1><p id="0b0a" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">import ' package:razor pay _ flutter/razor pay _ flutter . dart '；</p><p id="45e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">final _razorpay = Razorpay()。</p><h1 id="cdc2" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">附加事件侦听器</h1><p id="0b39" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">该插件使用基于事件的通信，并在支付失败或成功时发出事件。</p><p id="d7e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事件名称通过<code class="du kz la lb lc b">Razorpay</code>类中的常量<code class="du kz la lb lc b">EVENT_PAYMENT_SUCCESS</code>、<code class="du kz la lb lc b">EVENT_PAYMENT_ERROR</code>和<code class="du kz la lb lc b">EVENT_EXTERNAL_WALLET</code>公开。</p><p id="ef27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du kz la lb lc b">Razorpay</code>实例上使用<code class="du kz la lb lc b">on(String event, Function handler)</code>方法来附加事件监听器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ld"><img src="../Images/eee99063001bf0a39ee855b4597a5d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*wh9XUBc_s0eCZ-U0xIvAgQ.png"/></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">initState (main.dart)中的侦听器</figcaption></figure><p id="cb22" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">处理程序将在类中定义为:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es le"><img src="../Images/b269f7e4309053c73631fef486c237c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*soT1NyPh8o9owCcDtJQAWw.png"/></div></figure><p id="f245" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要清除事件侦听器，请在<code class="du kz la lb lc b">Razorpay</code>实例上使用<code class="du kz la lb lc b">clear</code>方法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lf"><img src="../Images/bf4bcdaeb0c5f2ab804b77c51bbfb8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*OW5TMkcPylq2Ux9r71UgNA.png"/></div></figure><p id="6a34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">完整Razorpay流程可以分为3个部分</p><p id="4832" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">1-创建订单</p><p id="cf2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2-结帐</p><p id="6eca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3-签名验证</p><p id="618e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们一个一个地看这些部分</p><h1 id="c0ec" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建订单</h1><p id="a676" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">订单是支付过程中的一个重要步骤。</p><ul class=""><li id="1901" class="lg lh hi ih b ii ij im in iq li iu lj iy lk jc ll lm ln lo bi translated">应该为每笔付款创建一个订单。</li><li id="6b38" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">您可以使用订单API创建订单。它是一个服务器端API调用。</li><li id="9cd2" class="lg lh hi ih b ii lp im lq iq lr iu ls iy lt jc ll lm ln lo bi translated">响应中收到的order_id应该被传递给checkout。这将订单与付款联系起来，并保护请求不被篡改。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/10889eb91b97eb9cb27470eeb4531204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnVVIOZUspFRKAzw49nzQA.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">创建订单</figcaption></figure><h1 id="09b7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">添加结帐选项</h1><p id="5fc1" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">传递结账选项。确保您通过了在对上一步的响应中收到的<code class="du kz la lb lc b">order_id</code>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/13c797c2ad42c4993ee183094685005c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOSfMF-rOKG9LEmcBxOK6A.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">检验</figcaption></figure><h1 id="c7b7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">处理监听器中的响应</h1><p id="8588" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">如果成功，我们将验证签名</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/914579e3d7db0630f92af83a6f224399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*VwCIhz5Qd-ZVjqMXVFbLtg.png"/></div></figure><h1 id="1045" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">验证签名</h1><p id="5c06" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">这是一个强制步骤，用于确认返回到成功付款的结帐表单的详细信息的真实性。</p><p id="5d09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在你的服务器上生成签名</strong></p><p id="430a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你得下载Razorpay PHP SDK。</p><p id="64d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以下载或运行composer命令来安装Razorpay PHP SDK。</p><p id="555e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[计] 下载</p><p id="5ea3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从GitHub的发布部分下载最新的<a class="ae ks" href="https://github.com/razorpay/razorpay-php/releases/" rel="noopener ugc nofollow" target="_blank"> razorpay-php.zip文件</a>。razorpay-php.zip是预编译的，包含了所有的依赖项。</p><p id="df05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用编写器命令</p><p id="b0b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用composer命令安装Razorpay。在您的Composer上运行下面的命令:解压缩SDK文件，并将Razorpay.php文件包含在您的项目中。</p><pre class="je jf jg jh fd lx lc ly lz aw ma bi"><span id="abbc" class="mb jq hi lc b fi mc md l me mf">Install using Composer</span><span id="0419" class="mb jq hi lc b fi mg md l me mf">composer <strong class="lc hj">require</strong> razorpay/razorpay:2.*</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/0659116171011fd4ab6bfead136d686c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAYJmDM1tx4mCw_uKlr3Dw.png"/></div></div><figcaption class="ku kv et er es kw kx bd b be z dx translated">在服务器上验证的PHP代码</figcaption></figure><p id="f973" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">调用验证码</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mi"><img src="../Images/3b62ad240cd63fc654d5e5c73d11c884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*0cXdQH-SYpyOtieoPKjreg.png"/></div></figure><p id="93e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看GitHub上的完整代码。</p><div class="mj mk ez fb ml mm"><a href="https://github.com/aniket-yadav/razorpay_demo" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hj fi z dy mr ea eb ms ed ef hh bi translated">GitHub-ani ket-yadav/razor pay _ demo</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jn mm"/></div></div></a></div></div></div>    
</body>
</html>