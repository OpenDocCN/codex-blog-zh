<html>
<head>
<title>How to build an API with TypeScript and use it in React (PART 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ç”¨TypeScriptæ„å»ºAPIå¹¶åœ¨Reactä¸­ä½¿ç”¨å®ƒ(ç¬¬2éƒ¨åˆ†)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/how-to-build-an-api-with-typescript-and-use-it-in-react-part-2-2c789fa38a0?source=collection_archive---------7-----------------------#2022-07-17">https://medium.com/codex/how-to-build-an-api-with-typescript-and-use-it-in-react-part-2-2c789fa38a0?source=collection_archive---------7-----------------------#2022-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4443" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">APIçš„ä½¿ç”¨åœ¨ç¼–ç¨‹ä¸­æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä»æ•°æ®è§£é‡Šçš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›æ˜¯ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´æœ€å…³é”®çš„å±‚ã€‚æœ¬æ–‡è§£é‡Šäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¹¶åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/769b008725fd3857c0db02c467f5f919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDAjomK78Q8rsiRFqAFsSQ.png"/></div></div></figure><p id="3fad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¥½å§ï¼Œæˆ‘ä»¬è¯´åˆ°å“ªäº†ï¼Ÿ</p><p id="44e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿è¡Œåœ¨<code class="du jp jq jr js b">localhost:3000</code>ä¸Šçš„å®Œç¾çš„APIï¼Œå¦‚æœæˆ‘ä»¬è¿›è¡Œè°ƒç”¨ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ªå¯¹è±¡:</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="a20e" class="jx jy hi js b fi jz ka l kb kc">{<br/>  message: 'Awesome!'<br/>}</span></pre><p id="88e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è®°ä½ï¼Œå› ä¸ºç”¨<code class="du jp jq jr js b">nodemon</code>è¿è¡Œæˆ‘ä»¬çš„APIï¼Œæˆ‘ä»¬å®Œå…¨æœ‰èƒ½åŠ›åœ¨ä»»ä½•æ—¶å€™åˆ°è¾¾å®ƒï¼Œç›´åˆ°æˆ‘ä»¬åœæ­¢å®ƒã€‚æˆ‘ä»¬ä¸ä»…å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ï¼Œè¿˜å¯ä»¥ä»å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºè°ƒç”¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„React TypeScripté¡¹ç›®ã€‚æ‚¨å¯ä»¥ä»è¿™é‡Œå¼€å§‹åœ¨å‰ç«¯åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ¥è‡ªAPIçš„æ•°æ®ï¼</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="de23" class="jx jy hi js b fi jz ka l kb kc">ğŸ˜ <strong class="js hj">CREATE A NEW REACT APPLICATION FROM YOUR TERMINAL</strong><br/>npx create-react-app awesome-app --template typescript</span></pre><p id="a985" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨æˆ‘ä»¬å¼€å§‹æ–°çš„å‰ç«¯åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œè¯·æƒ³ä¸€æƒ³è¿™é‡Œä¼šå‘ç”Ÿä»€ä¹ˆã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªAPIè¿è¡Œåœ¨<code class="du jp jq jr js b">localhost</code>ï¼Œç«¯å£<code class="du jp jq jr js b">3000</code>ã€‚ç°åœ¨æˆ‘ä»¬å°†å¯åŠ¨æˆ‘ä»¬çš„Reactåº”ç”¨ç¨‹åºï¼Œå®ƒæœ€åˆä¹Ÿä¼šå°è¯•åœ¨<code class="du jp jq jr js b">localhost</code>ç«¯å£<code class="du jp jq jr js b">3000</code>ä¸Šå¯åŠ¨ï¼</p><p id="4da9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ºäº†ä¸Reactåº”ç”¨ç¨‹åºå¹¶è¡Œè¿è¡ŒAPIï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹APIçš„ç«¯å£</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="160c" class="jx jy hi js b fi jz ka l kb kc">â—ï¸ <strong class="js hj">CHANGE THE PORT NUMBER OF THE API BEFORE STARTING REACT APP</strong><br/>...<br/><strong class="js hj">const port = 3001</strong><br/>app.listen(port, () =&gt; {<br/>  console.log('App is listening on port', port)<br/>})<br/>...</span></pre><p id="c19b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ºäº†æ”¯æŒReactåº”ç”¨ç¨‹åºçš„è°ƒç”¨ï¼Œå¦ä¸€ä»¶è¦åšçš„äº‹æƒ…æ˜¯å‘æœåŠ¡å™¨æ·»åŠ ä¸€ä¸ªCORSå¤´ã€‚</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="4237" class="jx jy hi js b fi jz ka l kb kc">ğŸ’¡ <em class="kd">CORS = Cross-Origin Resource Sharing</em></span></pre><p id="4ff4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é¦–å…ˆï¼Œå°†<code class="du jp jq jr js b">cors</code>åº“æ·»åŠ åˆ°APIä¸­</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="efc7" class="jx jy hi js b fi jz ka l kb kc">â• <strong class="js hj">ADD CORS LIBRARY TO YOUR API</strong><br/>cd ../my-first-api<br/>npm i cors</span></pre><p id="42df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ºäº†è®©APIå®é™…ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¿…é¡»å®šä¹‰å®ƒå¹¶å…è®¸æœåŠ¡å™¨æ–‡ä»¶ä¸­çš„<code class="du jp jq jr js b">localhost:3000</code>è¯·æ±‚</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="da40" class="jx jy hi js b fi jz ka l kb kc">ğŸ <strong class="js hj">DEFINE CORS</strong><br/>...<br/>const cors = require('cors')<br/>...<br/>app.use(cors({<br/>  origin: '<a class="ae ke" href="http://localhost:3000'" rel="noopener ugc nofollow" target="_blank">http://localhost:3000'</a><br/>}))<br/>...</span></pre><p id="491d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæƒ³ä¸èµ·æ¥æˆ–è€…æ ¹æœ¬ä¸çŸ¥é“ï¼Œå¯ä»¥å†è¯»ä¸€éç¬¬1éƒ¨åˆ†çš„APIä»£ç :</p><div class="kf kg ez fb kh ki"><a rel="noopener follow" target="_blank" href="/codex/how-to-build-an-api-with-typescript-and-use-it-in-react-part-1-2dab843d12be"><div class="kj ab dw"><div class="kk ab kl cl cj km"><h2 class="bd hj fi z dy kn ea eb ko ed ef hh bi translated">å¦‚ä½•ç”¨TypeScriptæ„å»ºAPIå¹¶åœ¨Reactä¸­ä½¿ç”¨å®ƒ(ç¬¬1éƒ¨åˆ†)</h2><div class="kp l"><h3 class="bd b fi z dy kn ea eb ko ed ef dx translated">APIçš„ä½¿ç”¨åœ¨ç¼–ç¨‹ä¸­æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ä»æ•°æ®è§£è¯»çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›æ˜¯æœ€å…³é”®çš„â€¦</h3></div><div class="kq l"><p class="bd b fp z dy kn ea eb ko ed ef dx translated">medium.com</p></div></div><div class="kr l"><div class="ks l kt ku kv kr kw jn ki"/></div></div></a></div><p id="092b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ¥ä¸‹æ¥ï¼Œæ‚¨åº”è¯¥æ‰“å¼€Reactåº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹(åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ–‡ä»¶å¤¹åç§°æ˜¯æ‚¨çš„åº”ç”¨ç¨‹åºçš„åç§°<code class="du jp jq jr js b">awesome-app</code>)å¹¶å¼€å§‹å¤„ç†æ‚¨çš„é¡¹ç›®</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="a9a6" class="jx jy hi js b fi jz ka l kb kc">ğŸ”Œ STEP INTO YOUR REACT APP FOLDER AND START IT<br/>cd ../awesome-app<br/>npm start</span></pre><p id="cd83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¹²å¾—å¥½ï¼å¦‚æœä¸€åˆ‡æŒ‰è®¡åˆ’è¿›è¡Œï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªæ—‹è½¬çš„Reactå¾½æ ‡å’Œä¸€äº›æ–‡æœ¬ã€‚ç°åœ¨ç»§ç»­åˆ é™¤<code class="du jp jq jr js b">App.tsx</code>ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶åœ¨<code class="du jp jq jr js b">return</code>é”®åç•™ä¸‹ä¸€ä¸ªç©ºç™½<code class="du jp jq jr js b">&lt;div&gt;&lt;/div&gt;</code>ã€‚</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="699a" class="jx jy hi js b fi jz ka l kb kc">ğŸ¦´ <strong class="js hj">LEAVE JUST A BLANK PAGE IN App.tsx FOR NOW</strong><br/>function App() {<br/>  return (<br/>    &lt;div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App</span></pre><p id="26dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»ä»¥æŸç§æ–¹å¼å°†æ•°æ®ä»æ­£åœ¨è¿è¡Œçš„APIä¸­è·å–åˆ°å‰ç«¯åº”ç”¨ç¨‹åºä¸­ã€‚æˆ‘ä»¬å¯ä»¥ç”¨<code class="du jp jq jr js b">fetch</code>æ¥å®ç°ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåä¸º<code class="du jp jq jr js b">data</code>çš„æ–°çš„ç®€å•<code class="du jp jq jr js b">state</code></p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="2e16" class="jx jy hi js b fi jz ka l kb kc">ğŸ’¾  <strong class="js hj">CREATE A NEW STATE</strong><br/>function App() {<br/>  <strong class="js hj">const [data, setData] = useState&lt;{ message: string } | null&gt;(null)</strong><br/>  return (<br/>    &lt;div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App</span></pre><p id="e9e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ å¿…é¡»æ„è¯†åˆ°</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="9685" class="jx jy hi js b fi jz ka l kb kc">ğŸ’¡ <em class="kd">You must type your new state to prevent type errors since we are using TypeScript yet again</em></span></pre><p id="150f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æœ€åä¸€æ­¥æ˜¯ä»¥æŸç§æ–¹å¼å°†æ¥è‡ªAPIçš„æ•°æ®è®¾ç½®ä¸ºå‰ç«¯çš„<code class="du jp jq jr js b">data</code>çŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨<code class="du jp jq jr js b">useEffect</code>é’©å­ä¸­çš„<code class="du jp jq jr js b">fetch</code>å‡½æ•°ã€‚</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="6681" class="jx jy hi js b fi jz ka l kb kc">ğŸ¦„ <strong class="js hj">SET THE DATA FROM THE API TO THE FRONTEND'S STATE</strong><br/>import {useEffect, useState} from "react";<br/>function App() {<br/>  const [data, setData] = useState&lt;{ message: string } | null&gt;(null)<br/>  <strong class="js hj">useEffect(() =&gt; {<br/>    fetch('</strong><a class="ae ke" href="http://localhost:3001/'" rel="noopener ugc nofollow" target="_blank"><strong class="js hj">http://localhost:3001/'</strong></a><strong class="js hj">, {<br/>      method: "GET",<br/>      headers: {<br/>        'Accept': 'application/json',<br/>        'Content-Type': 'application/json',<br/>        'Access-Control-Allow-Origin': '*'<br/>      },<br/>    })<br/>      .then(res =&gt; res.json())<br/>      .then(_data =&gt; setData(_data))<br/>  }, [])</strong><br/>  return (<br/>    &lt;div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App;</span></pre><p id="6010" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬å°†ä¸€äº›é‡è¦çš„å‚æ•°ä¼ é€’ç»™è¿™é‡Œçš„<code class="du jp jq jr js b">fetch</code>ã€‚é¦–å…ˆæˆ‘ä»¬è®¾ç½®åœ°å€ï¼Œåœ°å€æ˜¯<code class="du jp jq jr js b"><a class="ae ke" href="http://localhost:3001/`" rel="noopener ugc nofollow" target="_blank">http://localhost:3001/</a></code>ã€‚ç„¶åæˆ‘ä»¬å¼€å§‹æ·»åŠ é¢å¤–çš„å‚æ•°ï¼Œæ¯”å¦‚<code class="du jp jq jr js b">method</code>ã€‚è¿˜è®°å¾—æˆ‘ä»¬åœ¨APIä¸­ä½¿ç”¨äº†<code class="du jp jq jr js b">app.get</code>å—ï¼Ÿè¿™ä¸ª<code class="du jp jq jr js b">get</code>(æˆ–<code class="du jp jq jr js b">GET</code>)ä¹Ÿæ˜¯åœ¨å‰ç«¯appä¸­å®šä¹‰çš„ï¼åœ¨ä¸€äº›è¯·æ±‚å¤´è®¾ç½®å’Œ<code class="du jp jq jr js b">JSON</code>æ ¼å¼åŒ–ä¹‹åï¼Œç§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥è‡ªAPIçš„å¯¹è±¡è®¾ç½®<code class="du jp jq jr js b">data</code>çŠ¶æ€äº†ï¼æœ€åè¦åšçš„æ˜¯åœ¨ç»„ä»¶ä¸­å°†å…¶æ˜¾ç¤ºä¸º<code class="du jp jq jr js b">{data.message}</code></p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="4ae8" class="jx jy hi js b fi jz ka l kb kc">â­ï¸ SHOW THE MESSAGE<br/>import {useEffect, useState} from "react";<br/>function App() {<br/>  const [data, setData] = useState&lt;{ message: string } | null&gt;(null)<br/>  useEffect(() =&gt; {<br/>    fetch('<a class="ae ke" href="http://localhost:3001/'" rel="noopener ugc nofollow" target="_blank">http://localhost:3001/'</a>, {<br/>      method: "GET",<br/>      headers: {<br/>        'Accept': 'application/json',<br/>        'Content-Type': 'application/json',<br/>        'Access-Control-Allow-Origin': '*'<br/>      },<br/>    })<br/>      .then(res =&gt; res.json())<br/>      .then(_data =&gt; setData(_data))<br/>  }, [])<br/>  return (<br/>    &lt;div&gt;<br/><strong class="js hj">      &lt;div&gt;Message from the API:&lt;/div&gt;<br/>      &lt;div&gt;{data?.message &amp;&amp; data.message}&lt;/div&gt;</strong><br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default App;</span></pre><p id="4f9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ­å–œä½ ï¼æ‚¨å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„APIï¼Œå¹¶ä½¿ç”¨å®šåˆ¶çš„å‰ç«¯Reactåº”ç”¨ç¨‹åºä»ä¸­æ£€ç´¢æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ—¶åˆ»ï¼</p></div><div class="ab cl kx ky gp kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="hb hc hd he hf"><p id="463a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ‘‹æˆ‘å¸Œæœ›è¿™åœ¨ä½ å¯»æ‰¾æ–°çš„å­¦ä¹ ææ–™æ—¶å¯¹ä½ æœ‰ç”¨ã€‚æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»æœ¬æ–‡ï¼</p><p id="465d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœä½ ä»æˆ‘çš„æ–‡ç« ä¸­æ›´å¥½åœ°ç†è§£äº†ä¸€äº›ä¸œè¥¿ï¼Œ<strong class="ih hj">ä½ å¯ä»¥è¯·æˆ‘å–æ¯å’–å•¡æ¥æ”¯æŒæˆ‘</strong>:<a class="ae ke" href="https://www.buymeacoffee.com/daanworks" rel="noopener ugc nofollow" target="_blank">https://www.buymeacoffee.com/daanworks</a></p><p id="27f6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ“¯<strong class="ih hj">è®¢é˜…æˆ‘çš„ç”µå­é‚®ä»¶åˆ—è¡¨</strong>ï¼Œå¦‚æœä½ æƒ³åœ¨æœªæ¥è¯»åˆ°æ›´å¤šè¿™æ ·çš„æ•…äº‹ï¼Œè¯·åœ¨è¿™é‡Œæˆ–åœ¨<a class="ae ke" href="https://twitter.com/daanwords" rel="noopener ugc nofollow" target="_blank"> Twitter </a> <strong class="ih hj">ä¸Šå…³æ³¨æˆ‘ï¼</strong></p></div></div>    
</body>
</html>