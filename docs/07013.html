<html>
<head>
<title>Troubleshooting iOS chat push notifications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS聊天推送通知故障排除</h1>
<blockquote>原文：<a href="https://medium.com/codex/troubleshooting-ios-chat-push-notifications-f8c4e4a1d610?source=collection_archive---------17-----------------------#2022-05-24">https://medium.com/codex/troubleshooting-ios-chat-push-notifications-f8c4e4a1d610?source=collection_archive---------17-----------------------#2022-05-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/035032e0aacbbd719c7aed0e00f16bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/0*b6lwJwpAsFiRAS1A.png"/></div><figcaption class="hn ho et er es hp hq bd b be z dx translated">仙鸟2022</figcaption></figure><div class=""/><div class=""><h2 id="e6f9" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">初步检查、最佳实践、测试和修复常见推送通知问题的指南</h2></div><p id="1d74" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">由迦娜·麦克劳克林<br/>解决方案工程师| <a class="ae ke" href="https://www.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> Sendbird </a></p><p id="af8a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><em class="kf">我们建议您查看</em> <a class="ae ke" href="https://github.com/sendbird/sendbird-uikit-ios" rel="noopener ugc nofollow" target="_blank"> <em class="kf">样本app </em> </a> <em class="kf">获取您可能需要的代码。如果您需要更多指导，请访问我们的</em> <a class="ae ke" href="https://sendbird.com/docs/chat/v3/ios/guides/push-notifications" rel="noopener ugc nofollow" target="_blank"> <em class="kf">文档</em> </a> <em class="kf">。不要忘记查看应用内聊天的</em> <a class="ae ke" href="https://sendbird.com/demos/in-app-chat" rel="noopener ugc nofollow" target="_blank"> <em class="kf">演示</em> </a> <em class="kf">，并访问我们的</em> <a class="ae ke" href="https://sendbird.com/features/chat-messaging" rel="noopener ugc nofollow" target="_blank"> <em class="kf">网站</em> </a> <em class="kf">了解更多关于Sendbird Chat可以提供的服务。</em></p><blockquote class="kg kh ki"><p id="e2d6" class="ji jj kf jk b jl jm iu jn jo jp ix jq kj js jt ju kk jw jx jy kl ka kb kc kd hb bi translated"><em class="ht">为了第一个了解新教程、开发者相关聊天/电话发布以及其他重要更新，</em> <a class="ae ke" href="https://get.sendbird.com/dev-newsletter-subscription.html" rel="noopener ugc nofollow" target="_blank"> <em class="ht">注册</em> </a> <em class="ht">获取我们的开发者简讯。</em></p></blockquote><h1 id="fa16" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">介绍</h1><p id="b7ff" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">推送通知对于向用户发送重要消息并鼓励他们返回你的移动应用程序至关重要。本指南将解释推送通知如何与Sendbird Chat配合使用，以及出现问题时如何进行故障排除。作为其中的一部分，我们将介绍一些基本的测试来诊断问题并提出解决方案。本指南适用于iOS SDK，不包括iOS对JavaScript SDK的支持。</p><p id="682b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">为了简化推送通知测试和调试，请查看我们的推送通知测试工具<a class="ae ke" href="https://sendbird.com/developer/tutorials/mobile-push-notifications-tester" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">教程。</strong> </a></p><p id="f59c" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">让我们从一些初步检查开始。✅</p><h1 id="376e" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">初步检查</h1><p id="db19" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">请核实:</p><ol class=""><li id="84ee" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd lo lp lq lr bi translated">您已经在Sendbird dashboard上为APNs (Apple推送通知服务)启用了推送通知。确保:</li></ol><ul class=""><li id="f96d" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd ls lp lq lr bi translated">您的. p12证书尚未过期。</li><li id="a980" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd ls lp lq lr bi translated">您的. p12证书已正确映射到您的开发应用程序或生产应用程序。上传证书时，您必须指定“开发”或“生产”作为证书类型。</li><li id="2aa6" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd ls lp lq lr bi translated">生产证书应该是“Apple推送通知服务SSL(沙盒&amp;生产)”证书。</li><li id="56f7" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd ls lp lq lr bi translated">开发证书可以是“苹果推送通知服务SSL(沙盒)”或“苹果推送通知服务SSL(沙盒和产品)”证书。</li><li id="4c80" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd ls lp lq lr bi translated"><strong class="jk hu">请注意</strong>:你需要一个‘生产’证书来测试TestFlight应用上的推送通知(这些可能包括发布到TestFlight的开发应用)。</li></ul><p id="ce27" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">2.你的应用已为你的用户注册了推送令牌。<br/> <strong class="jk hu">大多数应用开发者面临的首要问题是用户的推送令牌没有正确注册或不再有效。</strong>要在Sendbird仪表板上查看用户的推送令牌，请转到“仪表板”&gt;“用户”部分，选择您的用户，然后在“聊天”部分查找“推送令牌”。</p><p id="6ec5" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">3.您是在物理设备上测试，而不是在Xcode模拟器上测试。</p><p id="3ffb" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">4.您正在群组频道中测试推送通知(开放频道不支持推送通知)。</p><p id="bc8e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">5.当应用程序进入后台时，您的应用程序不会<code class="du ly lz ma mb b">disconnect()</code>用户并注销设备令牌。使用<code class="du ly lz ma mb b">disconnect()</code>并取消注册令牌主要是推荐在用户从设备注销并且不再需要接收通知时使用。</p><p id="7e0a" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">6.您的设备在后台运行或关闭该应用程序，以便通过Sendbird接收来自APNs的远程通知。在这种情况下，请注意应用仪表板上的推送通知设置:</p><ul class=""><li id="41ed" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd ls lp lq lr bi translated">通过<strong class="jk hu">“只要一台设备离线就发送”</strong>设置，后台的任何设备都可以接收远程通知。</li><li id="f775" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd ls lp lq lr bi translated">通过<strong class="jk hu">“所有设备离线时发送”</strong>设置，连接用户的每台运行应用程序的设备必须在后台运行或关闭。</li></ul><p id="7568" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">7.您正在使用最新版本的Sendbird iOS SDK进行测试。</p><ul class=""><li id="0723" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd ls lp lq lr bi translated">具体到iOS 13支持，构建应用需要Sendbird iOS SDK v3.0.150或更高版本。原因是与iOS 13同时发布的Xcode 11改变了应用程序和库获取设备推送令牌的常见方式。iOS 13用户将无法在低于v3.0.150的SDK版本上从您的应用程序订阅通知。</li></ul><p id="3f48" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">如果您/您的开发团队确认了上述所有情况，并且任何问题仍然存在，请立即联系您的Sendbird应用仪表板上的Sendbird支持人员(仪表板&gt;您的组织名称(在右上角) &gt;联系我们)。在您对问题的描述中，请分享<strong class="jk hu">应用ID </strong>、<strong class="jk hu"> iOS Chat SDK版本号、该用户的用户ID和设备令牌</strong>、<strong class="jk hu"> channel_url </strong>以及上次执行推送通知测试的<strong class="jk hu">时间戳</strong>，以便我们进一步调查。问题的截图、gif或视频也有助于调查。</p><h1 id="ac6f" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">设备令牌的最佳实践</h1><p id="19c2" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">Sendbird遵循苹果的<a class="ae ke" href="https://developer.apple.com/documentation/usernotifications/registering_your_app_with_apns" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">指南</strong> </a>来“注册你的应用，并在每次你的应用启动时接收你的设备令牌”。因此，我们建议在用户每次连接到Sendbird时，向Sendbird注册用户的设备令牌。</p><p id="7c46" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">下面的列表指定了APN何时可以在设备上更新令牌:</p><ol class=""><li id="f4f4" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd lo lp lq lr bi translated">该应用程序会在新设备上恢复</li><li id="83c9" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">用户卸载/重新安装应用程序</li><li id="b916" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">用户清除应用程序数据。</li></ol><p id="e2c9" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">现在我们来谈谈如何解决常见问题。</p><h1 id="afa0" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">按案例排除故障</h1><ol class=""><li id="9cfb" class="lj lk ht jk b jl le jo lf jr mc jv md jz me kd lo lp lq lr bi translated"><strong class="jk hu">用户未离线</strong> <br/>当你的用户离线且应用不在任何设备的前台时，测试推送通知是最容易的。在Sendbird仪表板的“用户”部分检查该用户的脱机状态。</li><li id="4065" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated"><strong class="jk hu">设备令牌发放</strong> <br/>确保用户注册了设备令牌。要在Sendbird仪表板上检查用户的推送令牌，请转到您的应用程序下的用户部分。选择您的用户，并在聊天部分寻找推送令牌。如果用户有多个设备令牌(<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-list-registration-or-device-tokens" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">，如平台API此处</strong> </a>所示)，请尝试通过调用平台API<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-remove-a-registration-or-device-token" rel="noopener ugc nofollow" target="_blank"><strong class="jk hu">注销用户当前的所有设备令牌</strong> </a>。<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-add-a-registration-or-device-token" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">通过调用平台API或再次运行app添加新令牌</strong> </a>。这将通过SDK注册用户的设备令牌。检查Sendbird仪表板以获取用户的最新令牌。</li><li id="31c3" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated"><strong class="jk hu">特定用户无法接收推送通知</strong> <br/>检查测试用户没有禁用推送通知。我们的平台API让您可以轻松:</li></ol><ul class=""><li id="c902" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd ls lp lq lr bi translated">通过平台API查看<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-view-push-preferences" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">用户的推送偏好</strong> </a>。</li><li id="07b5" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd ls lp lq lr bi translated">当您通过我们的平台API获取用户组频道列表时，请检查您的测试频道的<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-list-my-group-channels-3-response" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> is_push_enabled </strong> </a>频道属性。如果is_push_enabled为“假”，<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-update-push-preferences" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">更新特定频道的用户推送偏好</strong> </a>以查看应该接收推送通知的测试频道是群组频道，并且没有为此用户禁用推送通知。</li></ul><p id="4a0d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">4.<strong class="jk hu">用户有时会收到本地或远程通知支持的推送</strong> <br/>检查。如果您的应用程序在前台时明确地在本地生成通知，则这些本地通知不会作为Sendbird发送的推送通知由APNs触发。您的应用程序可能正在侦听应用程序中的message received事件委托，并触发看起来像推送通知的本地通知。检查来自Sendbird的<a class="ae ke" href="https://sendbird.com/docs/chat/v3/ios/guides/push-notifications#2-how-to-register-push-notification-credentials-3-step-5-handle-a-notification-payload" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">通知负载</strong> </a>是否由应用程序:didreceiveremotenoption:fetchCompletionHandler:method处理。通道:didReceiveMessage:是一个事件处理程序，将为用户联机时收到的消息触发该事件处理程序，并且可能仅触发本地通知。</p><p id="848d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">5.<strong class="jk hu">用户可以在一台设备上接收通知，但不能在另一台设备上接收(多设备支持)</strong> <br/>一台设备可以接收用户的推送通知，而另一台设备则不能。确保您在Sendbird仪表盘&gt;设置&gt;通知上选择了“发送至离线和在线设备”设置。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="er es mf"><img src="../Images/330d3be94674a57a0d4f97ead62c83b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MTfqtkCJfD5y5_FN.png"/></div></div></figure><p id="b12d" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><strong class="jk hu"> 6。无法将APNs推送证书上传到Sendbird </strong> <br/>如果您在将. p12证书上传到Sendbird时遇到问题，您可能会收到一条错误消息，例如:</p><ul class=""><li id="582e" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd ls lp lq lr bi translated">从Sendbird仪表板</li></ul><pre class="mg mh mi mj fd mo mb mp mq aw mr bi"><span id="129f" class="ms kn ht mb b fi mt mu l mv mw">"CREATE Push Configuration" failed.</span></pre><ul class=""><li id="2344" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd ls lp lq lr bi translated">从平台API</li></ul><pre class="mg mh mi mj fd mo mb mp mq aw mr bi"><span id="7467" class="ms kn ht mb b fi mt mu l mv mw">{"message": "\"CREATE Push Configuration\" failed.", "code": 500901, "error": true}</span></pre><p id="0e9b" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">这可能是由于上传了无效证书造成的。请确保您上传的<a class="ae ke" href="https://developer.apple.com/support/certificates/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">有效证书</strong> </a>支持推送通知。请检查您上传的是“苹果推送通知服务SSL”证书，而不是“苹果分发”证书。若要检查证书，请在“钥匙串访问”中打开它。有效证书的名称中应包含“Apple推送服务”。您也可以在“钥匙串访问”中右键单击证书，然后选择“显示简介”来查看有关证书的更多信息。如果证书的通用名称中没有“Apple推送服务”，或者扩展中没有“Apple推送服务客户端”，则它可能不是有效的推送证书。</p><p id="509e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">7.<strong class="jk hu">您的应用需要特殊的证书选项</strong> <br/>您的应用在显示通知之前，可能会通过推送通知或修改后的推送通知有效负载进行静默后台更新。</p><p id="bcad" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">a.<strong class="jk hu">内容可用</strong>:为您的客户端应用程序确定是否在用户设备上执行静默后台更新。有关更多信息，请参见苹果开发者文档的<a class="ae ke" href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/pushing_updates_to_your_app_silently" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">将后台更新推送到您的应用</strong> </a>。(默认值:false)。<strong class="jk hu"> Sendbird建议不要将您的推送通知的内容可用设置为“真”,因为它们可能会被APN抑制，并中断您的应用程序中收到的推送通知消息的发送。</strong></p><p id="e52e" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">b.<strong class="jk hu">可变内容</strong>:在推送通知显示在用户设备上之前，为您的客户端应用确定是否修改推送通知的有效负载。有关更多信息，请参见苹果开发者文档的<a class="ae ke" href="https://developer.apple.com/documentation/usernotifications/modifying_content_in_newly_delivered_notifications" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">修改新发送通知中的内容</strong> </a>。(默认值:false)</p><p id="aab0" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">c.检查您的推送通知证书是否选择了“内容可用”或“可变内容”选项。要在你的Sendbird应用上启用这些设置，请前往仪表板&gt;设置&gt;通知&gt; APNs &gt;选择你的iOS证书旁边的三个点&gt;“编辑”。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="er es mx"><img src="../Images/455d3ab5b0e4a68e61320e7f44d0296a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1pGMqo5_ILU37VbB.png"/></div></div></figure><p id="efca" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">或者，通过<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/application#2-add-an-apns-push-configuration-3-request-body" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">平台AP </strong> </a> I .更新这些选项。(注意:更新端点所需的‘provider _ ID’与push_configuration ID相同。您可以<a class="ae ke" href="https://sendbird.com/docs/chat/v3/platform-api/guides/application#2-list-push-configurations" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">查看所有push _ configurations的列表</strong> </a>，并按“APN”过滤“push_type”</p><h1 id="0a54" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">测试</h1><p id="e090" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">测试以确定您的Sendbird应用程序是否可以接收来自Sendbird服务器的通知。</p><ol class=""><li id="f289" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd lo lp lq lr bi translated">下载Sendbird的<a class="ae ke" href="https://github.com/sendbird/SendBird-iOS" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> iOS示例app </strong> </a>，将应用ID改为你的Sendbird app ID。</li><li id="0370" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">将捆绑包ID更改为与您上传到Sendbird仪表板的证书相匹配的应用程序捆绑包ID。</li><li id="1eca" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">以用户身份登录(用户A)。</li><li id="6264" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">退出应用程序。确保应用程序不在后台，并且用户A处于离线状态。</li><li id="b115" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">在另一台设备上，从另一个用户(用户B)向用户(用户A)发送消息。或者用<a class="ae ke" href="https://sendbird.com/developer/tutorials/mobile-push-notifications-tester" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">推送通知测试工具</strong> </a>测试发送到用户A的设备。第一个用户(用户A)收到通知了吗？如果是，那么Sendbird服务器可以向您的应用程序发送推送通知。在您的应用程序中，检查您的应用程序正在为您的用户注册一个设备令牌，并且您的应用程序实现了<code class="du ly lz ma mb b">application:didReceiveRemoteNotification:fetchCompletionHandler:</code>方法。</li></ol><h1 id="f173" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">生产应用程序用户的开发测试</h1><p id="d5da" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">可以针对生产应用用户测试开发中的推送通知。</p><ol class=""><li id="3f75" class="lj lk ht jk b jl jm jo jp jr ll jv lm jz ln kd lo lp lq lr bi translated">从生产应用程序用户“Bob”开始，确保“Bob”离线。</li><li id="e9d0" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">在当前生产应用下，设备令牌A与“Bob”的生产证书相关联。</li><li id="a921" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">将开发证书上传到Sendbird仪表板。</li><li id="e0a7" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">在您自己的测试设备上运行Xcode中的应用程序，使用开发证书进行测试。以用户“Bob”的身份连接，并确保您的应用程序为开发证书注册了一个新的设备令牌B。</li><li id="84ab" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">Sendbird尝试向设备令牌B发送推送通知，以获取生产和开发证书。只有开发证书成功，现在设备令牌B与开发证书相关联。</li><li id="a15b" class="lj lk ht jk b jl lt jo lu jr lv jv lw jz lx kd lo lp lq lr bi translated">用户“Bob”将仍然具有与生产证书相关联的设备令牌A，除非该令牌被注销或者为Bob的设备注册了新的令牌。</li></ol><h1 id="88da" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">其他注释</h1><ol class=""><li id="adab" class="lj lk ht jk b jl le jo lf jr mc jv md jz me kd lo lp lq lr bi translated">语言翻译:当通过平台API指定用户的<code class="du ly lz ma mb b">preferred_languages</code>或通过SDK添加这些语言，为您的应用启用消息翻译时，推送通知可以被翻译成其他语言。</li></ol><h1 id="a6b3" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">测试工具</h1><p id="040b" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated"><strong class="jk hu">推送器</strong><br/><a class="ae ke" href="https://github.com/noodlewerk/NWPusher" rel="noopener ugc nofollow" target="_blank"><strong class="jk hu">【https://github.com/noodlewerk/NWPusher】<br/></strong></a>在Sendbird之外用你的APNs推送通知证书测试一下，看看是否能和用户注册的设备令牌一起使用。请注意，如果推送通知证书是Apple Development iOS推送服务证书而不是Apple推送服务证书，您的用户的设备令牌在开发中可能会有所不同。</p><p id="0384" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated"><strong class="jk hu"> Sendbird推送通知测试器</strong></p><p id="63d3" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">推送通知测试器允许您向应用程序中任何注册用户的设备发送测试推送通知。您可以在完全支持苹果推送通知服务(APNs)、Firebase云消息(FCM)或华为移动服务(HMS)的iPhone、Android或华为设备上向用户发送测试推送通知。有关该工具的完整回顾，请查看我们的<a class="ae ke" href="https://sendbird.com/developer/tutorials/mobile-push-notifications-tester" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">指南</strong> </a>。</p><h1 id="c948" class="km kn ht bd ko kp kq kr ks kt ku kv kw iz kx ja ky jc kz jd la jf lb jg lc ld bi translated">结论</h1><p id="7379" class="pw-post-body-paragraph ji jj ht jk b jl le iu jn jo lf ix jq jr lg jt ju jv lh jx jy jz li kb kc kd hb bi translated">我们已经讨论了初步的推送通知检查、设备令牌的最佳实践，以及如何在各种情况下对推送通知进行故障排除。推送通知调试可能会很复杂，但是在本指南和我们新的<a class="ae ke" href="https://sendbird.com/developer/tutorials/mobile-push-notifications-tester" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu">测试工具</strong> </a>之间，你将自力更生。一如既往，如果您有任何问题，请随时通过我们的<a class="ae ke" href="http://community.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hu"> Sendbird社区</strong> </a>或通过您的支持计划联系我们。</p><p id="7186" class="pw-post-body-paragraph ji jj ht jk b jl jm iu jn jo jp ix jq jr js jt ju jv jw jx jy jz ka kb kc kd hb bi translated">下次见，快乐推通知楼！👩‍💻</p></div></div>    
</body>
</html>