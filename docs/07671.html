<html>
<head>
<title>How to build an iOS messaging app with Swift: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Swift构建iOS报文传送应用程序:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-build-an-ios-messaging-app-with-swift-part-1-c50edb3de7e6?source=collection_archive---------17-----------------------#2022-06-21">https://medium.com/codex/how-to-build-an-ios-messaging-app-with-swift-part-1-c50edb3de7e6?source=collection_archive---------17-----------------------#2022-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/ca9f65e0a27ecf6026b4d51a4eb0c793.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3G0zn7_FWTHcg51Z.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">仙鸟2022</figcaption></figure><div class=""/><div class=""><h2 id="ead6" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">为iOS消息应用程序创建一个用户界面，并利用<a class="ae jm" href="https://sendbird.com/docs/chat/v3/ios/quickstart/send-first-message" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> Sendbird Chat SDK </strong> </a>开发支持消息传递的功能</h2></div><p id="f486" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">由迦娜·麦克劳克林<br/>解决方案工程师| <a class="ae jm" href="https://www.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> Sendbird </a></p><p id="9ffb" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><em class="kj">为了更好地理解，我们建议您查看</em> <a class="ae jm" href="https://github.com/janna-sendbird/SendbirdSwiftBlog/tree/part1_userloginview" rel="noopener ugc nofollow" target="_blank"> <em class="kj">示例代码</em> </a> <em class="kj">。如需更多指导，请访问我们的</em> <a class="ae jm" href="https://sendbird.com/docs/chat/v3/ios/quickstart/send-first-message" rel="noopener ugc nofollow" target="_blank"> <em class="kj">文档</em> </a> <em class="kj">。不要忘记查看应用内聊天的</em> <a class="ae jm" href="https://sendbird.com/demos/in-app-chat" rel="noopener ugc nofollow" target="_blank"> <em class="kj">演示</em> </a> <em class="kj">，并访问我们的</em> <a class="ae jm" href="https://sendbird.com/features/chat-messaging" rel="noopener ugc nofollow" target="_blank"> <em class="kj">网站</em> </a> <em class="kj">以了解更多关于仙鸟聊天可以提供的内容。</em></p><blockquote class="kk kl km"><p id="6c4a" class="jn jo kj jp b jq jr iy js jt ju jb jv kn jx jy jz ko kb kc kd kp kf kg kh ki hb bi translated"><em class="hx">成为第一个了解新教程、开发者相关聊天/电话发布以及其他重要更新的人，</em> <a class="ae jm" href="https://get.sendbird.com/dev-newsletter-subscription.html" rel="noopener ugc nofollow" target="_blank"> <em class="hx">注册</em> </a> <em class="hx">订阅我们的开发者简讯。</em></p></blockquote><h1 id="a8a6" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">介绍</h1><p id="0c8a" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">在本教程中，您将学习如何为iOS消息应用程序实现用户界面，并开发支持使用<a class="ae jm" href="https://sendbird.com/docs/chat/v3/ios/quickstart/send-first-message" rel="noopener ugc nofollow" target="_blank"><strong class="jp hy">Sendbird Chat SDK</strong></a>发送消息的功能。完成后，您将创建自己的登录视图，并将您的用户连接到Sendbird。这是用Swift和故事板创建自己的聊天应用程序的第1部分。</p><p id="a011" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">未来的样品将被列在<a class="ae jm" href="https://github.com/janna-sendbird/SendbirdSwiftBlog/tree/part1_userloginview" rel="noopener ugc nofollow" target="_blank">这个储存库<strong class="jp hy">的</strong>或</a>主分支或零件特定分支下。</p><p id="f34b" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">本教程是使用以下工具构建的:</p><ul class=""><li id="2b34" class="ln lo hx jp b jq jr jt ju jw lp ka lq ke lr ki ls lt lu lv bi translated">Xcode版本12.5</li><li id="27e5" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated">iOS版本14.5</li><li id="2e43" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated">Sendbird核心iOS SDK版本3.0.224</li></ul><p id="3ed0" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">请注意，本教程假设您对Swift有基本的了解。也就是说，让我们开始吧！</p><h1 id="a727" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">第一步。创建一个新的Xcode应用程序并导入Sendbird Chat SDK</h1><p id="e726" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">1.在Xcode中新建一个App:<br/>要启动一个新项目，运行Xcode，选择<strong class="jp hy">文件&gt;新建&gt;项目</strong>，选择<strong class="jp hy"> App </strong>。点击<strong class="jp hy">下一个</strong>。</p><p id="b469" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">将你的app命名为Messenger，设置界面为<strong class="jp hy">故事板</strong>，选择<strong class="jp hy"> Swift </strong>为语言。点击下一个的<strong class="jp hy">。</strong></p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/372ac4f9572ebab33069a342cd9e04e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*Ctqq1040XKDi24JC.png"/></div></figure><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/c355b3ec96fd1d370a71688f57da935b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*b74TOAmt38EOi7nV.png"/></div></figure><p id="d666" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">选择您想要创建项目的文件夹，然后单击<strong class="jp hy">创建</strong>。</p><p id="721d" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">Xcode将自动使用我们将在本教程中编辑的<strong class="jp hy"> AppDelegate.swift </strong>、<strong class="jp hy"> ViewController.swift </strong>和<strong class="jp hy"> Main.storyboard </strong>文件创建您的应用程序。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/561312e28706b1d583be1ccb057fd377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*yISRT6Od2HJA1gFF.png"/></div></figure><p id="2bd0" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">2.按照<strong class="jp hy">第二步:通过CocoaPods或者Carthage </strong>和<strong class="jp hy">安装SDK第三步:使用GitHub上Sendbird Chat iOS SDK readme . MD<a class="ae jm" href="https://github.com/sendbird/sendbird-ios-framework#step-2-install-sdk-via-cocoapods-or-carthage" rel="noopener ugc nofollow" target="_blank"><strong class="jp hy">page</strong></a>中Objective-C </strong>中的聊天SDK。这将引导您完成SDK安装。</p><p id="e585" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于本教程，我选择CocoaPods通过终端应用程序进行安装:</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/32cd6a8f69540cbc0852c3c6b266d28b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*MJZ0REc1fzmkTkhi.png"/></div></figure><p id="3d87" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我的Podfile如下所示:</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/6a8b1480308ce40ed032eed68482958d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*Bqf5ZdZPxMRSAbPb.png"/></div></figure><p id="8a30" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">安装和SDK配置完成后，请务必关闭任何当前Xcode会话，并从现在开始对此项目使用“Messenger.xcworkspace”文件。这将使以后构建和运行应用程序成为可能。</p><p id="272f" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">对于<strong class="jp hy">步骤3 </strong>中的导入行，可以在<strong class="jp hy"> AppDelegate.swift </strong>文件顶部添加“import SendBirdSDK ”,如下所示:</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/901c8c203a95ca0153caecd44ecbada5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*i1TgmUiqK-4HZJaU.png"/></div></figure><p id="a504" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">注意:</strong>如果您发现该导入行有任何问题，无法找到该模块，请从左栏中选择<strong class="jp hy">Pods</strong>project&gt;<strong class="jp hy">Build Settings</strong>&gt;<strong class="jp hy">Build Active Architecture Only</strong>(您也可以使用搜索来找到它)并将其设置为“NO”。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/afc9d68cb91ce29256141f7006ee56ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*OOHXiUoZGRKbOXSU.png"/></div></figure><p id="5d79" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在顶部，选择<strong class="jp hy">产品</strong> &gt; <strong class="jp hy">构建</strong>。此时，导入错误应该会自行解决，您现在可以运行应用程序来查看一个空屏幕。如果没有，你可以在这个StackOverflow帖子 中找到其他有用的替代解决方案<a class="ae jm" href="https://stackoverflow.com/questions/37852614/xcode-cant-find-a-module-after-updating" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hy">。</strong></a></p><h1 id="79c4" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">第二步。在仪表板上创建Sendbird应用程序</h1><p id="9388" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">首先，您需要在Sendbird仪表板上创建一个应用程序。为此，请访问<a class="ae jm" href="https://dashboard.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hy"> Sendbird仪表盘</strong> </a>。</p><p id="8900" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">注册以创建仪表板帐户。</p><p id="53d5" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">注册后，遵循初始设置过程。完成后，您可以在仪表板概览中查看您的新应用程序。</p><figure class="mc md me mf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mg"><img src="../Images/9f2c49dac78071a5c914730d9128351d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*glL_0IiPkXFelsyLNdhEZQ.png"/></div></div></figure><p id="7dca" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">客户端使用<strong class="jp hy">应用程序ID </strong>来识别您的应用程序。</p><h1 id="e7d9" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">第三步。实现登录视图</h1><h2 id="65ac" class="mh kr hx bd ks mi mj mk kw ml mm mn la jw mo mp lc ka mq mr le ke ms mt lg mu bi translated">了解推荐的登录过程</h2><p id="281a" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">想要和某人聊天的用户必须获得访问Sendbird服务器的许可。如果您想发布一个具有更安全认证的产品版本，必须实现一个用户认证服务器。认证服务器有一个用户数据库，通过发送鸟<a class="ae jm" href="https://sendbird.com/docs/chat/v3/platform-api/guides/user#2-create-a-user" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hy">平台API </strong> </a>与发送鸟服务器通信。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/5b0a09808f0949672c49c26b292faddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*fc--4hfskMp5cQ8X.png"/></div></figure><p id="2591" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">上图解释了从用户认证服务器获得许可的过程。</p><ol class=""><li id="63a5" class="ln lo hx jp b jq jr jt ju jw lp ka lq ke lr ki mv lt lu lv bi translated">iOS客户端使用用户ID和密码登录用户认证服务器。</li><li id="20ca" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki mv lt lu lv bi translated">用户认证服务器(通过平台API)创建一个用户，或者检查该用户是否已经存在于Sendbird中。</li><li id="f02d" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki mv lt lu lv bi translated">Sendbird服务器向用户认证服务器返回访问令牌或会话令牌。</li><li id="c409" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki mv lt lu lv bi translated">用户认证服务器将访问令牌返回给iOS客户端。</li><li id="a854" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki mv lt lu lv bi translated">iOS客户端通过Sendbird的SDK使用用户ID和访问令牌连接到Sendbird服务器。</li><li id="181b" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki mv lt lu lv bi translated">SendBird服务器向SDK返回成功，并连接用户。</li></ol><h2 id="a9c8" class="mh kr hx bd ks mi mj mk kw ml mm mn la jw mo mp lc ka mq mr le ke ms mt lg mu bi translated">简化登录程序</h2><p id="1378" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">然而，本教程并没有介绍用户认证服务器。为了模仿登录过程并易于实现，本教程省略了用户认证服务器。</p><figure class="mc md me mf fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mw"><img src="../Images/3a22d565e6cdf57b628b9a6bef74c288.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SpN6WgbIsaxLoY-s.png"/></div></div></figure><p id="9580" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">根据Sendbird仪表板上的应用程序设置，Sendbird允许用户在没有访问令牌的情况下进行连接。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/efa879ac99f18b95d742ddb7a916b840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*KxAWigTASBObYaGR.png"/></div></figure><p id="a22b" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在本教程中，我们将使用<strong class="jp hy">读&amp;写</strong>策略。</p><h2 id="a98b" class="mh kr hx bd ks mi mj mk kw ml mm mn la jw mo mp lc ka mq mr le ke ms mt lg mu bi translated">构建登录视图</h2><p id="21c3" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">登录用户界面有两个基本元素:(1)获取用户ID的文本字段和(2)开始连接的按钮。还有一个接受用户昵称的文本字段，以便其他用户可以识别该用户。在Sendbird应用程序中，用户ID必须是惟一的，但是昵称可以是任何东西。</p><p id="1fb5" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">登录视图将包含以下元素:</p><ul class=""><li id="5e98" class="ln lo hx jp b jq jr jt ju jw lp ka lq ke lr ki ls lt lu lv bi translated"><strong class="jp hy"> UIImageView </strong>用于应用程序徽标图像</li><li id="1792" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated"><strong class="jp hy"> UILabel </strong>为用户Id标签</li><li id="f6a1" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated"><strong class="jp hy"> UITextField </strong>用于输入用户ID</li><li id="578e" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated"><strong class="jp hy"> UILabel </strong>为昵称标签</li><li id="22e6" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated"><strong class="jp hy"> UITextField </strong>用于输入昵称</li><li id="9b66" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated"><strong class="jp hy">ui按钮</strong>用于连接</li></ul><p id="0fee" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">1.当前的Xcode项目被命名为<strong class="jp hy"> ViewController.swift </strong>。在左侧窗格的<strong class="jp hy">项目导航器</strong>中双击文件名，将名称改为<strong class="jp hy">loginview controller . swift</strong>。</p><p id="2f71" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">2.点击<strong class="jp hy">LoginViewController . swift</strong>并将类名改为<strong class="jp hy"> LoginViewController </strong>。保存文件(键盘快捷键:<strong class="jp hy">命令</strong>–<strong class="jp hy">S</strong>)。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/b35fc55ef41c8cc39d9edaae1a7e0e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*bM2AIpOlUzsD9WP-.png"/></div></figure><p id="f6e9" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">3.打开<strong class="jp hy"> Main.storyboard </strong>文件，将<strong class="jp hy">视图控制器</strong>重命名为<strong class="jp hy">登录视图控制器</strong>。</p><p id="dd00" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">4.选择<strong class="jp hy">登录视图控制器</strong>并点击右侧窗格中的<strong class="jp hy">身份检查器</strong>。将<strong class="jp hy">自定义类</strong>部分中的类字段更改为<strong class="jp hy"> LoginViewController </strong>。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/cd0d693a8f0358d6928572829131737d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*5yVlTR43tu2YeRUe.png"/></div></figure><p id="cb99" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">5.选择右上角的<strong class="jp hy"> + </strong>图标，搜索<strong class="jp hy"> UIImageView </strong>并将其拖动到视图的上半部分。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/d42a08cefe941640e09d3be1f05ff067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*RpaLZ0K7Jdu9uc6s.png"/></div></figure><p id="7d2e" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">我在我的项目中添加了一个自定义图像，Sendbird徽标。您可以将您自己的图像从您的计算机拖放到左侧窗格的<strong class="jp hy">项目导航器</strong>中。在右侧窗格的<strong class="jp hy">属性检查器</strong>中，点击图像旁边的箭头，您应该会看到您的新图像作为一个可供选择的选项。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/d13ac39f493d77cd063ac8e5e09af8f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*8rsR8b3uKLvzUa3t.png"/></div></figure><p id="94bb" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">6.再次选择右上方的<strong class="jp hy"> + </strong>图标，找到一个<strong class="jp hy">文本字段</strong>，将其拖动到视图中央。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/577cf44059d84e62cbb6f5a00d28d47a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*HTsFiXGBbmyVODAU.png"/></div></figure><p id="666a" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在让我们为您的<strong class="jp hy">文本字段</strong>添加约束。<strong class="jp hy">按住Control键点击<strong class="jp hy">文本字段</strong>上的</strong>，并将鼠标拖到主<strong class="jp hy">视图</strong>上。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mx"><img src="../Images/29bba1d0f8d5865d659f1a765cc38b61.png" data-original-src="https://miro.medium.com/v2/resize:fit:524/format:webp/0*6wRNdggSbEV1CPMN.png"/></div></figure><p id="d15f" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">按住<strong class="jp hy">换挡</strong>选择<strong class="jp hy">在安全区</strong>水平居中<strong class="jp hy">在安全区</strong>约束垂直居中。这将使文本字段固定在视图的中心。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es my"><img src="../Images/0792e83300e83084b6996034c448bde6.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/0*DpV-SG1hxRZ8WRgw.png"/></div></figure><p id="5e34" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">选择Xcode底部的<strong class="jp hy">添加新约束</strong>图标，将<strong class="jp hy">宽度</strong>设置为<strong class="jp hy"> 240 </strong>。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mz"><img src="../Images/c2cbfd6a50f72a2e40f4547d2e57120a.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/0*G3Hh_hWeNMr8TmIW.png"/></div></figure><p id="9b6a" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">7.再次点击顶部的<strong class="jp hy"> + </strong>图标，添加一个<strong class="jp hy">标签</strong>。<strong class="jp hy">双击<strong class="jp hy">标签</strong>上的</strong>将其重命名为<strong class="jp hy">用户Id </strong>。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/ceace11a8f68f70ecc962e558ebb6ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*XI8ux_9uoFaLtbTQ.png"/></div></figure><p id="fdd9" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">这一次，我们将在刚刚创建的<strong class="jp hy">用户Id标签</strong>和<strong class="jp hy">文本字段</strong>之间添加一个约束。<strong class="jp hy">按住Control键点击<strong class="jp hy">用户Id标签</strong>上的</strong>，并将光标拖到<strong class="jp hy">文本字段</strong>上。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es na"><img src="../Images/f99d149fabbe982cf969d847d169a1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/0*eBZKsEYnLN3l5EI0.png"/></div></figure><p id="c41d" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">按住<strong class="jp hy"> Shift </strong>，选择<strong class="jp hy">垂直标准间距</strong>、<strong class="jp hy">前导</strong>和<strong class="jp hy">尾随</strong>约束。将<strong class="jp hy">文本字段</strong>重命名为<strong class="jp hy">用户Id文本字段</strong>。</p><p id="00aa" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">8.接下来，我们将为用户的昵称添加一个标签和文本字段。选择左栏中的<strong class="jp hy">用户Id文本字段</strong>。按住<strong class="jp hy"> Shift </strong>选择<strong class="jp hy">用户Id标签</strong>。复制并粘贴(<strong class="jp hy"> command-c </strong>和<strong class="jp hy"> command-v </strong>)它们来创建第二个标签和第二个文本字段。将第二个标签重命名为<strong class="jp hy">昵称标签</strong>。将第二个文本字段重命名为<strong class="jp hy">昵称文本字段</strong>。在iPhone视图中向下移动它们，这样它们就不会与第一个字段重叠。向上移动<strong class="jp hy">昵称标签</strong>，使其不与<strong class="jp hy">昵称文本字段</strong>重叠。</p><p id="867f" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">现在，让我们修复约束。在选择了<strong class="jp hy">昵称标签</strong>和<strong class="jp hy">昵称</strong> <strong class="jp hy">文本字段</strong>的情况下，<strong class="jp hy">按住control键单击</strong>，并将鼠标拖动到第一个<strong class="jp hy">用户Id文本字段</strong>。按住<strong class="jp hy"> Shift </strong>选择<strong class="jp hy">垂直标准间距</strong>、<strong class="jp hy">前导</strong>和<strong class="jp hy">尾随</strong>约束。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es nb"><img src="../Images/f99c29a32fe9a517105f0c54a391edb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/0*80OGzO14gnXgDF24.png"/></div></figure><p id="4c0a" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">9.接下来，单击右上角的<strong class="jp hy"> + </strong>，创建一个<strong class="jp hy">按钮</strong>，并将其拖动到视图中央<strong class="jp hy">昵称文本字段</strong>的下方。<strong class="jp hy">双击</strong>按钮<strong class="jp hy">并将其重命名为<strong class="jp hy">连接</strong>。<br/>如果你愿意，在<strong class="jp hy">属性检查器</strong>中调整按钮的宽度以匹配文本字段，添加背景，并改变字体使其变大。</strong></p><p id="3c28" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">按住Control键并点击</strong>，拖动鼠标到<strong class="jp hy">昵称文本字段</strong>，添加<strong class="jp hy">垂直间距</strong>、<strong class="jp hy">前导、</strong> <strong class="jp hy">水平居中</strong>和<strong class="jp hy">尾随</strong>约束。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es nc"><img src="../Images/a7efeb83ae80234b643f3b94ee40d05c.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/0*6ce3grIXIBasBEda.png"/></div></figure><h2 id="35ac" class="mh kr hx bd ks mi mj mk kw ml mm mn la jw mo mp lc ka mq mr le ke ms mt lg mu bi translated">将登录视图连接到登录视图控制器</h2><p id="8d0b" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">1.在<strong class="jp hy"> Main.storyboard </strong>文件仍然打开的情况下，选择右侧图标上的<strong class="jp hy">添加编辑器。选择Messages文件夹旁边的Main.storyboard文件夹，然后选择<strong class="jp hy">loginview controller . swift</strong>。</strong></p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/fa0d8920298cd487957b0b4db94895b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*hw6GaiNOlsw6xsvi.png"/></div></figure><p id="4b29" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">2.接下来，我们将为文本字段添加变量。</p><p id="de27" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy"> @IBOutlet弱var userIdTextField: UITextField！<br/> @IBOutlet弱var昵称TextField: UITextField！</strong></p><p id="64de" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在左边的<strong class="jp hy"> Main.storyboard </strong>中，<strong class="jp hy"> control-click </strong>上的<strong class="jp hy">用户Id文本字段</strong>并将鼠标拖动到<strong class="jp hy">loginview controller . swift</strong>类以插入IBOutlet变量。将文本字段命名为<strong class="jp hy"> userIdTextField </strong>并点击<strong class="jp hy">连接</strong>。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/941aba949fc233f536c763bc5dec9762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*HSNanD1D00G57onP.png"/></div></figure><p id="ec87" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">重复这个步骤，为<strong class="jp hy">昵称文本字段</strong>创建IBOutlet。</p><p id="f1b6" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">3.现在我们将为按钮添加一个函数。</p><p id="71df" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">@ I action func didTapConnectButton(_ sender:Any){ }</strong></p><p id="cf7c" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">按住Control键点击</strong><strong class="jp hy">连接</strong>按钮，拖动鼠标到<strong class="jp hy">loginviewcontroller . swift</strong>类，插入IBAction变量。将名称设置为<strong class="jp hy"> didTapConnectButton </strong>并点击<strong class="jp hy">连接</strong>。</p><p id="ed2a" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">您的代码现在应该如下所示:</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/7660bdc3cc9dc77abb30e95e41900391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*69BK-yGo7tGQTJ3M.png"/></div></figure><p id="edfb" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">4.在我们运行应用程序之前，我们需要添加一些代码来处理当用户用键盘编辑文本时发生的事情，让应用程序知道用户已经完成了键入。</p><p id="2e75" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在<strong class="jp hy"> viewDidLoad() </strong>函数中，设置<strong class="jp hy">userid textfield . delegate = self</strong>和<strong class="jp hy">昵称TextField.delegate = self </strong>。在类的顶部，添加<strong class="jp hy"> UITextFieldDelegate </strong>并覆盖<strong class="jp hy"> touchesBagan </strong>函数。添加<strong class="jp hy"> textFieldShouldReturn </strong>方法，以告知应用程序用户何时停止键入并在文本区域外单击，或者用户何时选择了键盘的Return按钮。</p><figure class="mc md me mf fd hk"><div class="bz dy l di"><div class="nd ne l"/></div></figure><p id="879e" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">5.现在，我们准备运行应用程序来查看视图。点击用户Id和昵称文本框，并在键盘外单击或选择返回按钮隐藏视图。在下一部分，我们将使用<strong class="jp hy">连接</strong>按钮将用户连接到Sendbird。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es nf"><img src="../Images/48610caf0e121d1751822afa04963ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/0*BKz5Mh3Z4Uo-5ppH.gif"/></div></figure><h2 id="cfd6" class="mh kr hx bd ks mi mj mk kw ml mm mn la jw mo mp lc ka mq mr le ke ms mt lg mu bi translated">将用户连接到Sendbird</h2><p id="78e3" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">在上一节中，我们添加了一个<strong class="jp hy">I action</strong>函数<strong class="jp hy">diddapconnectbutton</strong>，它连接到我们的<strong class="jp hy"> Connect </strong>按钮。让我们填写这个方法，以便当按下<strong class="jp hy"> Connect </strong>时，用户登录到您的Sendbird应用程序。</p><p id="8a34" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">1.首先，让我们用你的应用程序初始化Sendbird。在<strong class="jp hy"> AppDelegate.swift </strong>中，更新<strong class="jp hy">difinishlaunchingwithoptions</strong>方法以包含以下内容:</p><p id="f7c2" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">sbd main . init with application ID(" YOUR-APP-ID-HERE ")<br/></strong>这个app id可以在你的<a class="ae jm" href="https://dashboard.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hy"> Sendbird仪表盘</strong> </a>上找到。</p><p id="6cad" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">2.在<strong class="jp hy"> dIdTapConnectButton </strong>方法的<strong class="jp hy">loginview controller . swift</strong>类中，从这些文本字段的用户输入中提取用户id和昵称:</p><p id="49d6" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">let userId = userId textfield . text<br/>let nickname = nickname textfield . text</strong></p><p id="d0be" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">3.用userId连接到Sendbird。添加以下内容:</p><p id="f9ee" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hy">sbd main . connect(with userId:userId？？""，completionHandler: { (user，error)in<br/>guard error = = nil else { return/<em class="kj">/Handle connection errors in this block</em>}</strong></p><p id="196b" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">4.(可选)为警报添加一个helper方法，以显示用户是否能够成功连接。</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/a931f0bcd2fa2eb5f02f28317c328897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*3NL2Xx9Xq0eiW7UD.png"/></div></figure><p id="cbeb" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在以下情况下调用此方法:</p><p id="1912" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">a)用户成功连接<br/> b)用户未成功连接<br/> c)用户在选择连接按钮之前没有输入用户id和昵称</p><figure class="mc md me mf fd hk er es paragraph-image"><div class="er es mb"><img src="../Images/befb5487e0eabdb4f504d344bd1b1d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*TXsDSqj503V3prLk.png"/></div></figure><p id="732b" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在GitHub上的 这里可以看到<a class="ae jm" href="https://github.com/janna-sendbird/SendbirdSwiftBlog/blob/part1_userloginview/Messenger/LoginViewController.swift#L22-L50" rel="noopener ugc nofollow" target="_blank">的连接代码。：</a></p><p id="49f7" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">您的用户现在应该成功连接到Sendbird了！</p><p id="5757" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在您的Sendbird仪表板中，您应该能够通过“Users”部分中的用户Id找到用户。选择用户并检查聊天&gt;状态，查看该用户是否“在线”。</p><h1 id="7ab5" class="kq kr hx bd ks kt ku kv kw kx ky kz la jd lb je lc jg ld jh le jj lf jk lg lh bi translated">结论</h1><p id="c122" class="pw-post-body-paragraph jn jo hx jp b jq li iy js jt lj jb jv jw lk jy jz ka ll kc kd ke lm kg kh ki hb bi translated">本教程的第1部分到此结束，您正在使用Swift中的Sendbird创建自己的聊天应用程序！在本教程中，您将:</p><ul class=""><li id="0bcd" class="ln lo hx jp b jq jr jt ju jw lp ka lq ke lr ki ls lt lu lv bi translated">导入的依赖项</li><li id="33c8" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated">用Sendbird初始化你的应用</li><li id="b5ff" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated">为UI创建了LoginViewController和登录视图</li><li id="5a87" class="ln lo hx jp b jq lw jt lx jw ly ka lz ke ma ki ls lt lu lv bi translated">将您的用户连接到Sendbird</li></ul><p id="f24b" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">敬请关注Swift指南的第2部分，在该部分中，您将通过添加频道列表和聊天UI来完成您自己的聊天应用程序，以便用户发送和接收消息。</p><p id="380f" class="pw-post-body-paragraph jn jo hx jp b jq jr iy js jt ju jb jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">开心聊楼！✌</p></div></div>    
</body>
</html>