<html>
<head>
<title>Matplotlib Tutorial — 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matplotlib教程— 8</h1>
<blockquote>原文：<a href="https://medium.com/codex/matplotlib-tutorial-8-63ffff8fa912?source=collection_archive---------8-----------------------#2022-12-05">https://medium.com/codex/matplotlib-tutorial-8-63ffff8fa912?source=collection_archive---------8-----------------------#2022-12-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="09c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程将涵盖，绘制时间序列数据。</p><p id="1db9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我有下面的示例代码，我将用它来覆盖时间序列数据，让我们先检查一下代码。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="b961" class="jm jn hi ji b be jo jp l jq jr">import pandas as pd<br/>from datetime import datetime, timedelta<br/>from matplotlib import pyplot as plt<br/>from matplotlib import dates as mpl_dates<br/><br/>plt.style.use('seaborn')<br/><br/>dates = [<br/>    datetime(2019, 5, 24),<br/>    datetime(2019, 5, 25),<br/>    datetime(2019, 5, 26),<br/>    datetime(2019, 5, 27),<br/>    datetime(2019, 5, 28),<br/>    datetime(2019, 5, 29),<br/>    datetime(2019, 5, 30)<br/>]<br/><br/>y = [0, 1, 3, 4, 6, 5, 7]<br/><br/>plt.tight_layout()<br/><br/>plt.show()</span></pre><p id="8916" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们从matplotlib导入了pandas、DateTime、timedelta和dates。此外，我们有x轴的样本日期和y轴的一些随机值。</p><p id="d204" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们使用plot_date绘制相同的图形，然后我们将检查配置选项。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="855b" class="jm jn hi ji b be jo jp l jq jr">plt.plot_date(dates,y)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es js"><img src="../Images/ef3a0337e5e49e40ca4503c767f828ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tUhDZ58_c2eiQ0lhMPYXNg.png"/></div></div></figure><p id="2e78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，它将只绘制标记，但是如果你想要一个实线连接，我们可以通过传递一个额外的参数来实现。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="cbea" class="jm jn hi ji b be jo jp l jq jr">plt.plot_date(dates,y,linestyle='solid')</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ka"><img src="../Images/d029de5761468d5c10ff5587df6c0a09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYA6fVMQMAOaVp6UxKbAWw.png"/></div></div></figure><p id="d4aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将使用gcf()方法格式化我们的x轴数据，它代表获取当前数字。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="ef7b" class="jm jn hi ji b be jo jp l jq jr">plt.gcf().autofmt_xdate()</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kb"><img src="../Images/38689fdaaa5e42a3874893b3442e6df8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6BS3JnM0e-lOJCxO0_zeQ.png"/></div></div></figure><p id="a736" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这提供了我们的x轴日期，以便更好地表示。现在，我们将使用matplotlib中作为mpl_dates导入的日期来格式化日期。对于格式字符串，我会提供下面的链接，所以你可以使用不同的格式，如果你想的话。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="8373" class="jm jn hi ji b be jo jp l jq jr">date_format = mpl_dates.DateFormatter('%b , %d %Y')<br/>plt.gca().xaxis.set_major_formatter(date_format)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kc"><img src="../Images/1a811d0b578774788f80d554b5872bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XarnZspLpgHqgvhXOE8U3A.png"/></div></div></figure><div class="kd ke ez fb kf kg"><a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="noopener  ugc nofollow" target="_blank"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd hj fi z dy kl ea eb km ed ef hh bi translated">日期时间-基本日期和时间类型- Python 3.11.0文档</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">模块只提供一个具体的类，即类。该类可以表示简单的时区，具有固定的…</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">docs.python.org</p></div></div></div></a></div><p id="8c95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，x轴日期以我们提供的格式出现，现在我们将使用CSV数据对更大的数据集执行操作。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="071c" class="jm jn hi ji b be jo jp l jq jr">data = pd.read_csv('Data_TimeSeries.csv')<br/>price_date = data['Date']<br/>price_close = data['Close']<br/><br/>plt.title('Bitcoin Prices')<br/>plt.xlabel('Date')<br/>plt.ylabel('Closing Price')<br/><br/>plt.plot_date(price_date,price_close,linestyle='solid')<br/>plt.gcf().autofmt_xdate()<br/>date_format = mpl_dates.DateFormatter('%b , %d %Y')<br/>plt.gca().xaxis.set_major_formatter(date_format)<br/>plt.tight_layout()<br/><br/>plt.show()</span></pre><p id="b5a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有一个样本数据csv文件，其中包含样本比特币价格(下面是相同的github链接)，我们使用熊猫读取相同的数据，我们绘制的日期为x轴，价格为y轴。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kp"><img src="../Images/e13b20a54d5b22da137d87ce8e8a9984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCMhFIE7WBAc19jeAYth3g.png"/></div></div></figure><p id="e713" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是当我们从pandas读取数据时，它会默认读取字符串，所以假设我们有一些未排序的日期，那么它会按原样绘制，这实际上没有任何意义。</p><p id="a458" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了进行排序，我们首先需要将数据从字符串转换为日期时间，然后排序，以绘制实际结果，下面是相同的代码。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="4f08" class="jm jn hi ji b be jo jp l jq jr">price_date = pd.to_datetime(data['Date'])<br/>data.sort_values('Date',inplace=True)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kq"><img src="../Images/bc9ebd31ff975f308eaa79e143220c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ol0uGViaUznSf_T_pH8jBg.png"/></div></div></figure><p id="5027" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是代码和数据表的链接。</p><div class="kd ke ez fb kf kg"><a href="https://github.com/vivalka/Matplotlib-Tutorials/tree/main/Tutorial_8" rel="noopener  ugc nofollow" target="_blank"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd hj fi z dy kl ea eb km ed ef hh bi translated">Matplotlib-Tutorials/Tutorial _ 8位于main vival ka/Matplotlib-Tutorials</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">github.com</p></div></div><div class="kr l"><div class="ks l kt ku kv kr kw jy kg"/></div></div></a></div><p id="a2ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一教程中，将介绍实时绘制实时数据。</p></div></div>    
</body>
</html>