<html>
<head>
<title>IoT to AIML infrastructure-as-code. Deployment from 3 weeks to 3 hrs!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">物联网到AIML基础设施即代码。部署时间从3周缩短到3小时！</h1>
<blockquote>原文：<a href="https://medium.com/codex/iot-to-aiml-infrastructure-as-code-deployment-from-3-weeks-to-3-hrs-99555a86423d?source=collection_archive---------8-----------------------#2022-08-05">https://medium.com/codex/iot-to-aiml-infrastructure-as-code-deployment-from-3-weeks-to-3-hrs-99555a86423d?source=collection_archive---------8-----------------------#2022-08-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0bb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在今天的文章中，我们将带您了解我们的基础架构部署流程，其中(如标题所述)我们使用<a class="ae jd" href="https://aws.amazon.com/servicecatalog/?aws-service-catalog.sort-by=item.additionalFields.createdDate&amp;aws-service-catalog.sort-order=desc" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> AWS服务目录</strong> </a>从3周到3天再到3小时完成了部署。我们的物联网到AIML平台即服务在水利和国防项目中久经考验，体现了最佳实践，因此数据科学家可以快速创造决策优势。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/813da1ac1b071b2430aa3d4da4209738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXcmB6yA2fiWZy19i6ayIg.png"/></div></div></figure><h1 id="f797" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">开始:3周(2019年)</h1><p id="f0c0" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">起初，至少可以说，将我们的物联网部署到AIML参考架构是一个乏味的过程。尽管我们已经对基础架构进行了模块化，但这仍然是一个手动的点击、输入命令和配置、测试的过程，如果某项服务或组件不能按预期运行，我们还会参考我们的内部环境并比较配置等。</p><p id="715b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">这个过程平均花了我们3周时间来完成</strong>，以及端到端的测试。</p><h1 id="8107" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">第一轮:3天(2021年)</h1><p id="15e7" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">就在一年多前，我们决定在一定程度上自动化部署过程，这不会是一个完全成熟的自动化项目，因为我们没有足够的时间或资源投入到这样的项目中。我们只能分配5天时间和单一资源，并着手将基础设施部署转换成脚本(<a class="ae jd" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> AWS CLI </strong> </a>)。</p><p id="5d32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个过程很简单(在较高层次上)，只需参考体系结构中实现的每项服务</p><ul class=""><li id="c7f6" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">将部署转换成一个<a class="ae jd" href="https://docs.aws.amazon.com/cli/latest/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> AWS CLI脚本</strong> </a></li><li id="6977" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">尽可能参数化，这将允许定制部署</li><li id="478a" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">测试它，修复任何问题，进行增强</li><li id="b1c2" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">将脚本转换成批处理文件</li></ul><p id="b615" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文件</p><ul class=""><li id="ceda" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">版本控制</li><li id="f069" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">先决条件</li><li id="7de7" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">预期投入和产出</li><li id="0ca1" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">任何问题，比如确保在执行脚本之前本地配置了正确的AWS概要文件和区域，等等</li></ul><p id="dff5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在使用上面的清单转换了几个服务之后，过程就清楚了。我们成功节省了大量时间，将参考体系结构部署时间<strong class="ih hj">从3周减少到3天。</strong></p><h1 id="f2d3" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">第二轮:3小时(2022)</h1><p id="6cda" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">在过去的12个月中，我们的物联网到AIML参考架构经历了多次更新<strong class="ih hj"> <em class="lh">(重大更新即将推出)</em> </strong>，在潜在风险方面，我们发现了以下情况</p><ul class=""><li id="132e" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated">随着服务数量的增加，体系结构的复杂性也在增加</li><li id="7010" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">增加配置步骤的数量</li><li id="680a" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">加强安全、监控和管理的要求。</li><li id="8f8a" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">多个项目，每个客户都需要多个环境</li></ul><p id="50a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是时候再次尝试改进我们的流程了，这一次不仅仅是为了缩短部署时间，而是为了能够管理基础设施的修复、更改和增强。我们研究了基础架构即代码(IaaS)和可用选项，并确定了<a class="ae jd" href="https://aws.amazon.com/servicecatalog/?aws-service-catalog.sort-by=item.additionalFields.createdDate&amp;aws-service-catalog.sort-order=desc" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> AWS服务目录</strong> </a>作为解决方案。它已经存在很多年了，对于我们的需求来说已经很成熟了。</p><ul class=""><li id="87cf" class="kt ku hi ih b ii ij im in iq kv iu kw iy kx jc ky kz la lb bi translated"><strong class="ih hj">基础知识</strong>——了解背后的基础知识可以节省你几个小时甚至几天的时间，让你不必为了让事情运转起来而跑来跑去。AWS在线内容有许多YouTube频道，提供关于AWS服务目录的精彩内容。</li><li id="bb81" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">服务目录</strong>是一种利用<strong class="ih hj">云信息</strong>部署基础设施即代码(IaaS)的服务</li><li id="b9a1" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">产品— </strong>可以部署一个或多个服务的云架构堆栈</li><li id="e5dd" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">语言</strong> — <strong class="ih hj"> YAML </strong>或<strong class="ih hj"> JSON </strong>，我们推荐YAML除了完全兼容JSON之外，它还支持注释，注释可以用来分解各个部分并解释每个部分的作用。这对将来的参考很重要</li><li id="b1fa" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">版本</strong> —每个产品可以有多个版本，用于发布修复、增强和更新</li><li id="8172" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">支持详情</strong> —用于提供有关产品、支持电子邮件和链接的信息..等等</li><li id="42ad" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">产品组合</strong> —产品的集合</li><li id="8831" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">约束— </strong>应用限制、治理和成本控制</li><li id="86eb" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">标签</strong> —可用于存储关于每项服务的元数据，标签还可用于计算详细的成本</li><li id="75d3" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">共享</strong> —通过与其他AWS帐户、ou、组、角色和用户共享投资组合来控制访问</li><li id="c399" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">沙盒环境</strong> —通过建立一个单独的AWS帐户，拥有一个隔离的环境来测试你所学到的东西是很关键的。一旦你完成测试，终止所有的服务，如果需要，关闭帐户</li><li id="521f" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">有人可能会说，让它工作起来，又快又脏</li><li id="50c1" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">担心清理代码，添加标签..等主要代码按预期工作后</li><li id="d5fb" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">尝试多种测试场景</li><li id="cd81" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">终止一切，再试一次，直到你对结果满意为止</li><li id="762b" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">不要忘记在进行过程中更新文档</li><li id="3e32" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">产品主页</strong> —这是配置产品(在我们的例子中是参考架构)的环境，任何更新、修复和增强都将在沙盒环境中进行测试，然后在产品主页中实施，再分发给其他内部或客户环境</li><li id="3956" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated"><strong class="ih hj">部署测试环境</strong> —这是测试产品最终部署的地方。一旦代码在产品家庭环境中被清理和设置，它就与部署测试环境共享，在部署测试环境中整个架构被端到端地部署。这将暴露部署过程、文档..部署完成后，您将执行一个端到端的测试流程，从而完成整个流程。</li></ul><p id="a23f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">整个演习花费了我们大约10-12天的时间来完成，我们成功地将部署时间从<strong class="ih hj">的3天缩短到了3小时。</strong></p><h1 id="6444" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">主要优势和要点:</h1><ul class=""><li id="971a" class="kt ku hi ih b ii ko im kp iq li iu lj iy lk jc ky kz la lb bi translated">经过真实世界测试的基础设施的快速部署<em class="lh">(类似于快速入门包)</em></li><li id="5a99" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">降低专业服务的成本，腾出更多时间/预算来专注于为我们的客户解决数据科学问题</li><li id="3edb" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">几乎无缝地接收更新、修复和增强</li><li id="1ccb" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">跟上最新的技术，过去的方法和工具可能已经不够好了</li><li id="4480" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">总有更好的方法来完成同样的任务，关键是确定何时开始使用更好的方法</li><li id="8f8e" class="kt ku hi ih b ii lc im ld iq le iu lf iy lg jc ky kz la lb bi translated">永远要比较努力和收益，而不仅仅是技术收益，客户也必须从中受益</li></ul><p id="9d2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读。敬请关注我们即将推出的IoT至AIML参考架构的下一次重大更新！</p></div></div>    
</body>
</html>