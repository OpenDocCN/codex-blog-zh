<html>
<head>
<title>Creating a simple College Database using SQLite</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SQLite创建一个简单的大学数据库</h1>
<blockquote>原文：<a href="https://medium.com/codex/creating-a-simple-college-database-using-sqlite-a29a0bcfcf37?source=collection_archive---------2-----------------------#2022-06-12">https://medium.com/codex/creating-a-simple-college-database-using-sqlite-a29a0bcfcf37?source=collection_archive---------2-----------------------#2022-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f73d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">练习SQL和基本数据库设计— #1</h2></div><p id="270a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我正在寻找一些项目的想法，在这些项目中，我可以练习我的SQL并应用我迄今为止在基本数据库设计方面所学的知识，在快速的谷歌搜索后，我登陆了这个页面:</p><div class="jt ju ez fb jv jw"><a href="https://www.upgrad.com/blog/sql-project-ideas-topics-for-beginners/#2_Centralized_College_Database" rel="noopener  ugc nofollow" target="_blank"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">15个令人兴奋的SQL项目创意&amp;初学者主题[2022] | upGrad博客</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">在过去几年中，现代商业世界经历了数据驱动决策的热潮。还有…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">www.upgrad.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk kl jw"/></div></div></a></div><p id="ab01" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我想尝试解决第二个问题:</p><blockquote class="km kn ko"><p id="683e" class="ix iy kp iz b ja jb ij jc jd je im jf kq jh ji jj kr jl jm jn ks jp jq jr js hb bi translated">学院有学术部门，如英语系、数学系、历史系等等。每个系都提供各种各样的课程。现在，一名教师可以教授多门课程。比如说，一位教授上了一堂统计学和微积分的课。作为数学系的学生，你可以选修这两门课程。因此，每门大学课程都可以有任意数量的学生。这里需要注意的重要一点是，一门特定的课程只能有一名讲师，以避免重叠。”</p></blockquote><p id="fd65" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我不想先在网上检查解决方案，然后再亲自尝试，只是基于我所知道的，我将在这里分享。像往常一样，任何建设性的反馈和批评都是受欢迎的，没有更多的麻烦，让我们直接开始吧！</p><p id="2549" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">想象并创建数据库模式</strong></p><p id="7afb" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">总结上面的问题，我们有以下几点需要考虑(加上我自己的一些补充):</p><ol class=""><li id="e6d2" class="kt ku hi iz b ja jb jd je jg kv jk kw jo kx js ky kz la lb bi translated">一个系可以有很多课程</li><li id="eb55" class="kt ku hi iz b ja lc jd ld jg le jk lf jo lg js ky kz la lb bi translated">一名教师可以教授多门课程(在自己的部门内)</li><li id="1250" class="kt ku hi iz b ja lc jd ld jg le jk lf jo lg js ky kz la lb bi translated">一个学生可以(从任何系)选修许多课程</li><li id="3630" class="kt ku hi iz b ja lc jd ld jg le jk lf jo lg js ky kz la lb bi translated">一门课程只能由一名讲师授课</li></ol><p id="341b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以我想象了一个如下的场景:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lh"><img src="../Images/147cbff478d52f312ef3375ce2608ad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iOwLBb3Ru6xP2NxsS3B2IA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated"><em class="lw">总的来说，4个学生，4个系，6个老师教的8门课</em></figcaption></figure><p id="0030" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当然，我们不会创建这样的数据库，我们需要考虑我上面总结的几点，我认为数据库看起来更像这样:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lx"><img src="../Images/6e0d947a5cdafff5f2b3b1795d3aafb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9VyPJy1f1gDBiZMtGy-Xqw.png"/></div></div></figure><p id="a512" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除了我可怕的糟糕的书写，我将使用我自己的话和我如何理解我到目前为止所学到的来解释我上面所做的:</p><ul class=""><li id="6869" class="kt ku hi iz b ja jb jd je jg kv jk kw jo kx js ly kz la lb bi translated">每个表的每一行都有自己唯一的ID(主键)</li><li id="339c" class="kt ku hi iz b ja lc jd ld jg le jk lf jo lg js ly kz la lb bi translated">每个表通过它们的id相互链接，这取决于哪种关系最有意义(例如，每个教师通过department_id连接到部门，department _ id用作教师表中引用部门表的外键)</li><li id="7c55" class="kt ku hi iz b ja lc jd ld jg le jk lf jo lg js ly kz la lb bi translated">在学生、教师和课程的情况下——每一行只能指向一个部门，不管它是什么，因此它们可以通过引用department_id来建立“直接关系”</li><li id="5d50" class="kt ku hi iz b ja lc jd ld jg le jk lf jo lg js ly kz la lb bi translated">然而，一个教师可以教许多课程，一个学生可以选修许多课程。此外，一门课程可以有很多学生。为了管理彼此之间的这种多对多关系，我们将在学生和课程以及教师和课程之间添加一个“第三”表，即“学生_课程”和“教师_课程”，该表将只包含指向其id的外键来描述它们的关系(哪个教师教哪个班，哪个学生上哪个班)。</li></ul><p id="8378" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">既然我已经基本上提出了这个概念，让我们开始实际制作吧。对于这一个，我将只使用SQLite来做所有的事情(方式更繁琐，但对我来说更快，而且我可以练习我的SQL，这是我第一次使用外键)。</p><p id="b6d2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">创建表格:</p><pre class="li lj lk ll fd lz ma mb mc aw md bi"><span id="5ec6" class="me mf hi ma b fi mg mh l mi mj">CREATE TABLE department (<br/> department_id INTEGER PRIMARY KEY AUTOINCREMENT,<br/> department_name varchar(255)<br/> );</span><span id="f99c" class="me mf hi ma b fi mk mh l mi mj">CREATE TABLE instructor (<br/> instructor_id INTEGER PRIMARY KEY AUTOINCREMENT,<br/> instructor_name varchar(255),<br/> department_id INTEGER,<br/> FOREIGN KEY (department_id) REFERENCES department (department_id)<br/> );</span><span id="e8dc" class="me mf hi ma b fi mk mh l mi mj">CREATE TABLE course (<br/> course_id INTEGER PRIMARY KEY AUTOINCREMENT,<br/> course_name varchar(255),<br/> department_id INTEGER,<br/> FOREIGN KEY (department_id) REFERENCES department (department_id)<br/> );</span><span id="0a9c" class="me mf hi ma b fi mk mh l mi mj">CREATE TABLE student (<br/> student_id INTEGER PRIMARY KEY AUTOINCREMENT,<br/> student_name varchar(255),<br/> department_id INTEGER,<br/> FOREIGN KEY (department_id) REFERENCES department (department_id)<br/> );</span><span id="18cf" class="me mf hi ma b fi mk mh l mi mj">CREATE TABLE instructor_course (<br/> instructor_course_id INTEGER PRIMARY KEY AUTOINCREMENT,<br/> instructor_id INTEGER,<br/> course_id INTEGER,<br/> FOREIGN KEY (instructor_id) REFERENCES instructor (instructor_id),<br/> FOREIGN KEY (course_id) REFERENCES course (course_id)<br/> );</span><span id="7c08" class="me mf hi ma b fi mk mh l mi mj">CREATE TABLE student_course (<br/> student_course_id INTEGER PRIMARY KEY AUTOINCREMENT,<br/> student_id INTEGER,<br/> course_id INTEGER,<br/> FOREIGN KEY (student_id) REFERENCES student (student_id),<br/> FOREIGN KEY (course_id) REFERENCES course (course_id)<br/> );</span></pre><p id="92b1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在让我们填满所有的表格:</p><pre class="li lj lk ll fd lz ma mb mc aw md bi"><span id="d1a0" class="me mf hi ma b fi mg mh l mi mj">-- Insert department data</span><span id="b6ac" class="me mf hi ma b fi mk mh l mi mj">INSERT INTO department (department_name) VALUES ('English');<br/>INSERT INTO department (department_name) VALUES ('Math');<br/>INSERT INTO department (department_name) VALUES ('Science');<br/>INSERT INTO department (department_name) VALUES ('Business');</span><span id="9853" class="me mf hi ma b fi mk mh l mi mj">-- Insert instructor data</span><span id="f121" class="me mf hi ma b fi mk mh l mi mj">INSERT INTO instructor (instructor_name, department_id) VALUES ('Mr. Pizza', 1);<br/>INSERT INTO instructor (instructor_name, department_id) VALUES ('Mr. Pie', 2);<br/>INSERT INTO instructor (instructor_name, department_id) VALUES ('Mr. Donut', 3);<br/>INSERT INTO instructor (instructor_name, department_id) VALUES ('Mr. Chips', 3);<br/>INSERT INTO instructor (instructor_name, department_id) VALUES ('Mr. Pepsi', 4);<br/>INSERT INTO instructor (instructor_name, department_id) VALUES ('Mr. Hotpockets', 4);</span><span id="2ccc" class="me mf hi ma b fi mk mh l mi mj">-- Insert student data</span><span id="0019" class="me mf hi ma b fi mk mh l mi mj">INSERT INTO student (student_name, department_id) VALUES ('Alice', 1);<br/>INSERT INTO student (student_name, department_id) VALUES ('Bob', 2);<br/>INSERT INTO student (student_name, department_id) VALUES ('Charlie', 3);<br/>INSERT INTO student (student_name, department_id) VALUES ('Dave', 4);</span><span id="82c2" class="me mf hi ma b fi mk mh l mi mj">-- Insert course data</span><span id="0c1c" class="me mf hi ma b fi mk mh l mi mj">INSERT INTO course (course_name, department_id) VALUES ('English 1A', 1);<br/>INSERT INTO course (course_name, department_id) VALUES ('Calculus', 2);<br/>INSERT INTO course (course_name, department_id) VALUES ('Chemistry', 3);<br/>INSERT INTO course (course_name, department_id) VALUES ('Physics', 3);<br/>INSERT INTO course (course_name, department_id) VALUES ('Biology', 3);<br/>INSERT INTO course (course_name, department_id) VALUES ('Finance', 4);<br/>INSERT INTO course (course_name, department_id) VALUES ('Accounting', 4);<br/>INSERT INTO course (course_name, department_id) VALUES ('Marketing', 4);</span><span id="659d" class="me mf hi ma b fi mk mh l mi mj">-- Insert instructor_course data</span><span id="adb2" class="me mf hi ma b fi mk mh l mi mj">INSERT INTO instructor_course (instructor_id, course_id) VALUES (1,1);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (2,2);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (3,3);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (4,4);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (4,5);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (5,6);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (6,7);<br/>INSERT INTO instructor_course (instructor_id, course_id) VALUES (6,8);</span><span id="b7f8" class="me mf hi ma b fi mk mh l mi mj">-- Insert student_course data</span><span id="cdfb" class="me mf hi ma b fi mk mh l mi mj">--Alice<br/>INSERT INTO student_course (student_id, course_id) VALUES (1,1);<br/>INSERT INTO student_course (student_id, course_id) VALUES (1,2);<br/>INSERT INTO student_course (student_id, course_id) VALUES (1,3);<br/>INSERT INTO student_course (student_id, course_id) VALUES (1,6);</span><span id="3e77" class="me mf hi ma b fi mk mh l mi mj">--Bob<br/>INSERT INTO student_course (student_id, course_id) VALUES (2,1);<br/>INSERT INTO student_course (student_id, course_id) VALUES (2,2);<br/>INSERT INTO student_course (student_id, course_id) VALUES (2,4);<br/>INSERT INTO student_course (student_id, course_id) VALUES (2,7);</span><span id="b1cb" class="me mf hi ma b fi mk mh l mi mj">--Charlie<br/>INSERT INTO student_course (student_id, course_id) VALUES (3,1);<br/>INSERT INTO student_course (student_id, course_id) VALUES (3,2);<br/>INSERT INTO student_course (student_id, course_id) VALUES (3,5);<br/>INSERT INTO student_course (student_id, course_id) VALUES (3,8);</span><span id="3bc0" class="me mf hi ma b fi mk mh l mi mj">--Dave<br/>INSERT INTO student_course (student_id, course_id) VALUES (4,1);<br/>INSERT INTO student_course (student_id, course_id) VALUES (4,2);<br/>INSERT INTO student_course (student_id, course_id) VALUES (4,3);<br/>INSERT INTO student_course (student_id, course_id) VALUES (4,8);</span></pre><p id="f4fa" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们准备好测试它了。我将使用Pandas和Jupyter notebook在这里发布结果，因为DataFrame输出看起来比终端输出更好(如果你想知道如何做到这一点，请在这里阅读<a class="ae ml" href="https://lifang-lee.medium.com/creating-a-simple-database-using-python-and-sqlite-349d126253da" rel="noopener">我的帖子</a>)。</p><p id="4a0f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">场景#1:找到鲍勃参加的所有课程，包括课程的部门和教师</strong></p><p id="e945" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">正如我在上面的场景表中看到的，答案应该是:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mm"><img src="../Images/7f4a8969707ad6b0e71195d91c437236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_CmdKBxddXGRQ4PNeXSzoA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">讲师(从左到右):披萨先生，派先生，薯条先生，热口袋先生</figcaption></figure><p id="ab67" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">SQL查询:</p><pre class="li lj lk ll fd lz ma mb mc aw md bi"><span id="faba" class="me mf hi ma b fi mg mh l mi mj">SELECT department.department_name, course.course_name, instructor.instructor_name FROM department <br/>INNER JOIN instructor ON department.department_id = instructor.department_id <br/>INNER JOIN instructor_course ON instructor.instructor_id = instructor_course.instructor_id <br/>INNER JOIN course ON instructor_course.course_id = course.course_id <br/>INNER JOIN student_course ON course.course_id = student_course.course_id <br/>INNER JOIN student ON student_course.student_id = student.student_id <br/>WHERE student.student_name = "Bob";</span></pre><p id="979c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">结果:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mm"><img src="../Images/b8f7b6b1302c7b443e24a753343f1972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*phXAPfSJG4jqeCImUAvE3w.png"/></div></div></figure><p id="304e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我发现在考虑内部连接时，参考上面的模式对我有帮助，对于我画的每个红色箭头，它通过引用一个表的主键和另一个表的外键来引用两个表之间的内部连接。</p><p id="04b7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">场景#2:找到所有上化学课的学生</strong></p><p id="ab91" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">答案应该是:爱丽丝和戴夫。</p><p id="a931" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">SQL查询:</p><pre class="li lj lk ll fd lz ma mb mc aw md bi"><span id="9996" class="me mf hi ma b fi mg mh l mi mj">SELECT student.student_name, department.department_name FROM department <br/>INNER JOIN instructor ON department.department_id = instructor.department_id <br/>INNER JOIN instructor_course ON instructor.instructor_id = instructor_course.instructor_id <br/>INNER JOIN course ON instructor_course.course_id = course.course_id <br/>INNER JOIN student_course ON course.course_id = student_course.course_id <br/>INNER JOIN student ON student_course.student_id = student.student_id <br/>WHERE course.course_name = "Chemistry";</span></pre><p id="52a8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">结果:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div class="er es mn"><img src="../Images/22a6b6914abcd5caa8349eb155af83c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*kCq7LkdAL7fkDOQELbYwtw.png"/></div></figure><p id="f68a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">场景#3:显示课程及其教师的列表</strong></p><p id="1e6f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里没有什么特别有趣的，但我只是想指出，因为如果我们只搜索教员_课程表，我们会得到:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es mo"><img src="../Images/da724bfbad1a2112377060a4777ab829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jl2G4Wol9bJK7I_u48UyHg.png"/></div></div></figure><p id="9943" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为它们都只是一个带有相互引用的id的表，但是如果我们以一种更人性化的方式来看待这个问题，用教员姓名替换教员id，用课程名称替换课程id，结果将如下所示:</p><p id="52ec" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">SQL查询:</p><pre class="li lj lk ll fd lz ma mb mc aw md bi"><span id="bb7d" class="me mf hi ma b fi mg mh l mi mj">SELECT instructor.instructor_name, course.course_name FROM instructor <br/>INNER JOIN instructor_course ON instructor.instructor_id = instructor_course.instructor_id<br/>INNER JOIN course ON instructor_course.course_id = course.course_id;</span></pre><p id="228f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">结果:</p><figure class="li lj lk ll fd lm er es paragraph-image"><div class="er es mp"><img src="../Images/042d06c2fef0362027d0d3c583b04b4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*jzmZvkODG0nESNBgiewWkg.png"/></div></figure><p id="4b48" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我终于可以在网上看看我是否做错了什么和/或是否有更好的解决方案。但是我认为这是开始我的数据库设计学习之旅的一个很好的练习，如果你设法读完了，希望它对你也有帮助！</p></div></div>    
</body>
</html>