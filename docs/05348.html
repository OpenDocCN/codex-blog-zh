<html>
<head>
<title>Putout v25</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">输出v25</h1>
<blockquote>原文：<a href="https://medium.com/codex/putout-v25-5e1a52268fbd?source=collection_archive---------6-----------------------#2022-02-20">https://medium.com/codex/putout-v25-5e1a52268fbd?source=collection_archive---------6-----------------------#2022-02-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dc1db0dca49d4abc61a214417007a7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ixvc1uFwkO_pjIYX.png"/></div></div></figure><h1 id="1102" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">失去对节点&lt; 16</h1><blockquote class="jo jp jq"><p id="c084" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">的支持在直重领主墙上的格言中有这样一条:“重大的事情不应该被轻视。lttei大师评论道:“小事也要认真对待。”</em></p><p id="58a7" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">山本恒茂《haga kure》</em></p></blockquote><p id="a15d" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">嗨伙计们！发布新版本的时候到了🎉！</p><p id="ec47" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">支持节点版本&lt; 16 is dropped. “Why is so?” — you ask. The main goal of 🐊 【T0】  is <strong class="ju hj">带来软件开发</strong> <strong class="ju hj">过程</strong>的最佳实践。最佳实践之一是:及时更新依赖关系。</p><p id="fa69" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">节点<code class="du kt ku kv kw b">v16</code>稳定，LTS，我认为没有理由等待大约一年，而每个人都下降<code class="du kt ku kv kw b">v14</code>。</p><p id="2f90" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated"><em class="jt"> ☝️如果不能升级就用🐊</em> <code class="du kt ku kv kw b"><em class="jt">Putout</em></code> <em class="jt"> v24，如果你有任何问题</em> <a class="ae kx" href="https://github.com/coderaiser/putout/issues/new" rel="noopener ugc nofollow" target="_blank"> <em class="jt">制造问题</em> </a> <em class="jt">我随时恭候你的帮助:)</em></p><p id="a12c" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">☝️ <em class="jt">需要github动作支持帮助使用:</em><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-github#set-node-versions" rel="noopener ugc nofollow" target="_blank"><em class="jt">@ putout/plugin-github</em></a></p><h1 id="ea63" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">应用-数组-at</h1><blockquote class="jo jp jq"><p id="8d9c" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">在一个人的事情中，不应该有超过两三件事可以称之为大问题。<br/>这些如果是平时推敲，也能理解。事先想好事情，到时候再轻松处理，这才是关键。</p><p id="0b23" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">山本恒茂《haga kure》</em></p></blockquote><p id="5d6e" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">放弃旧节点版本的第二个原因是适应和推广像<code class="du kt ku kv kw b"><a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/at" rel="noopener ugc nofollow" target="_blank">array.at()</a></code>这样的新构造。所以从现在开始，当你想得到数组的最后一个元素时,<code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-apply-array-at#readme" rel="noopener ugc nofollow" target="_blank">@putout/plugin-apply-array-at</a></code>会被捆绑、启用并帮助你。</p><h1 id="92ab" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">错误代码的❌示例</h1><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="7673" class="lg ir hi kw b fi lh li l lj lk">const array = [1, 2, 3];<br/>console.log(array[array.length - 1]);</span></pre><h1 id="f149" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">正确代码的✅示例</h1><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="16d7" class="lg ir hi kw b fi lh li l lj lk">const array = [1, 2, 3];<br/>console.log(array.at(-1));</span></pre><p id="69fc" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated"><code class="du kt ku kv kw b">apply-array-at</code>是写在🦎<a class="ae kx" href="https://github.com/coderaiser/putout/blob/master/docs/putout-script.md" rel="noopener ugc nofollow" target="_blank">输出脚本</a>并这样看:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="e4a6" class="lg ir hi kw b fi lh li l lj lk">module.exports.replace = () =&gt; ({<br/>    '__a[__a.length - __b]': '__a.at(-__b)',<br/>});</span></pre><p id="5e35" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">如此少的代码却有如此强大的功能，令人惊叹，不是吗😏？</p><p id="6173" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">☝️ <em class="jt">徘徊为什么还在</em> <code class="du kt ku kv kw b"><a class="ae kx" href="https://nodejs.org/api/modules.html#modules-commonjs-modules" rel="noopener ugc nofollow" target="_blank"><em class="jt">CommonJS</em></a></code> <em class="jt">而不是</em> <code class="du kt ku kv kw b"><a class="ae kx" href="https://nodejs.org/api/esm.html#modules-ecmascript-modules" rel="noopener ugc nofollow" target="_blank"><em class="jt">ESM</em></a></code> <em class="jt">？不要担心！等到</em><a class="ae kx" href="https://github.com/eslint/eslint/issues/15394" rel="noopener ugc nofollow" target="_blank"><em class="jt">eslint/eslint # 15394</em></a><em class="jt">解决了:我们需要</em> <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/eslint-plugin-putout#eslint-plugin-putout--" rel="noopener ugc nofollow" target="_blank"><em class="jt">eslint-plugin-putout</em></a></code> <em class="jt">工作了！反正</em> <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-convert-commonjs-to-esm#putoutplugin-convert-commonjs-to-esm-" rel="noopener ugc nofollow" target="_blank"><em class="jt">convert-commonjs-to-esm</em></a></code> <em class="jt">已经准备好了🤺，到时候——</em><strong class="ju hj"><em class="jt">转换不免</em> </strong> <em class="jt"> ✊.</em></p><h1 id="06dc" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-apply-try-catch#putoutplugin-apply-try-catch-" rel="noopener ugc nofollow" target="_blank">apply-try-catch</a></code></h1><p id="18b0" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated">在<code class="du kt ku kv kw b">apply-try-catch</code>的帮助下，又大又丑的<code class="du kt ku kv kw b">try-catch</code>方块将被转换成又小又漂亮的叫声。</p><h1 id="1918" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">错误代码的❌示例</h1><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="4501" class="lg ir hi kw b fi lh li l lj lk">try {<br/>    say('hello');<br/>} catch (error) {<br/>    log(error);<br/>}</span></pre><h1 id="4d11" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">正确代码的✅示例</h1><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="0072" class="lg ir hi kw b fi lh li l lj lk">import tryCatch from 'try-catch';<br/>const [error] = tryCatch(say, 'hello');</span><span id="f62a" class="lg ir hi kw b fi lq li l lj lk">if (error)<br/>    log(error);</span></pre><p id="fbbc" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">这一切都有可能借助于:</p><ul class=""><li id="5fd5" class="lr ls hi ju b jv jw jz ka kq lt kr lu ks lv kp lw lx ly lz bi translated">✅ <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/try-catch#try-catch-----" rel="noopener ugc nofollow" target="_blank">try-catch</a></code></li><li id="43bf" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated">✅ <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/try-catch#try-catch-----" rel="noopener ugc nofollow" target="_blank">try-to-catch</a></code></li><li id="3018" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated">✅ <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-declare-undefined-variables#putoutplugin-declare-undefined-variables-" rel="noopener ugc nofollow" target="_blank">@putout/plugin-declare-undefined-variables</a></code></li></ul><p id="3ab0" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">这里是用<code class="du kt ku kv kw b">try-catch</code>代替旧语法结构的<a class="ae kx" href="https://gist.github.com/coderaiser/a26e535bc43b5fe1ac4d72624bd6bed2" rel="noopener ugc nofollow" target="_blank">推理</a>。</p><h1 id="8de0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">新加载器API</h1><blockquote class="jo jp jq"><p id="e511" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">如果你事先没有下定决心，重新面对一件事并轻松解决它是很困难的，而且在达到目标的过程中总会有不确定性。<br/>但是，如果之前就打好了基础，你可以把这句话<br/>“大事化小，小事化了”，作为自己行动的基础。</p><p id="b7ab" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">山本恒茂《haga kure》</em></p></blockquote><p id="0aa4" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">Loaders是node.js的试验性新功能。根据文档，它可以随时更改，但是:</p><blockquote class="jo jp jq"><p id="3f0f" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">☝️Loaders是覆盖ESM中导入模块的唯一方法</p></blockquote><p id="45d1" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">🐊<strong class="ju hj">输出</strong>和基于它的工具支持这种实验技术。</p><p id="c3f5" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">节点v14有一种类型的加载程序:</p><ul class=""><li id="ba50" class="lr ls hi ju b jv jw jz ka kq lt kr lu ks lv kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v14.x/docs/api/esm.html#esm_resolve_specifier_context_defaultresolve" rel="noopener ugc nofollow" target="_blank"> resolve(说明符、上下文、默认解析)</a></li><li id="023e" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v14.x/docs/api/esm.html#esm_getformat_url_context_defaultgetformat" rel="noopener ugc nofollow" target="_blank"> getFormat(url，context，defaultGetFormat) </a></li><li id="9330" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v14.x/docs/api/esm.html#esm_getsource_url_context_defaultgetsource" rel="noopener ugc nofollow" target="_blank"> getSource(url，context，defaultGetSource) </a></li><li id="4cf9" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v14.x/docs/api/esm.html#esm_transformsource_source_context_defaulttransformsource" rel="noopener ugc nofollow" target="_blank"> transformSource(source，context，defaultTransformSource) </a></li><li id="5abc" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v14.x/docs/api/esm.html#esm_getglobalpreloadcode" rel="noopener ugc nofollow" target="_blank"> getGlobalPreloadCode() </a></li></ul><p id="edea" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">节点v16具有其他:</p><ul class=""><li id="b9e5" class="lr ls hi ju b jv jw jz ka kq lt kr lu ks lv kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v16.x/docs/api/esm.html#resolvespecifier-context-defaultresolve" rel="noopener ugc nofollow" target="_blank"> resolve(说明符、上下文、默认解析)</a></li><li id="eb95" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v16.x/docs/api/esm.html#loadurl-context-defaultload" rel="noopener ugc nofollow" target="_blank">加载(url，上下文，默认加载)</a></li><li id="fc56" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated"><a class="ae kx" href="https://nodejs.org/dist/latest-v16.x/docs/api/esm.html#globalpreload" rel="noopener ugc nofollow" target="_blank"> globalPreload() </a></li></ul><p id="e2db" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">支持他们两个一点都不好玩😅…</p><p id="8690" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">☝️ <em class="jt">所以</em><code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/mock-import" rel="noopener ugc nofollow" target="_blank"><em class="jt">mock-import</em></a></code><em class="jt"/><code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/zenload" rel="noopener ugc nofollow" target="_blank"><em class="jt">zenload</em></a></code><em class="jt">和🎩</em> <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/escover" rel="noopener ugc nofollow" target="_blank"><em class="jt">EScover</em></a></code> <em class="jt">也更新到只支持最新版本的API。</em></p><h1 id="59a0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">减少依赖计数</h1><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es mf"><img src="../Images/b1fe6ec7e9bac9153bdaf633226db828.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/0*BAFz1WsnE1f9U9aP.png"/></div><figcaption class="mg mh et er es mi mj bd b be z dx translated"><em class="mk"/><a class="ae kx" href="https://en.wikipedia.org/wiki/Cipactli" rel="noopener ugc nofollow" target="_blank"><em class="mk"/></a></figcaption></figure><blockquote class="jo jp jq"><p id="acd0" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">这三个属性，Sat、Chit、阿难<br/>(存在、意识、极乐)<br/>实际上并没有定义梵天。毒药对别人是毒药，但对自己不是。</em></p><p id="dba7" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">光泽、硬度、黄色、<br/>合起来表示黄金。<br/>粘、甜、粘，<br/>合起来表示蜂蜜。</em></p><p id="aae4" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated"><em class="hi">jnaneshwara《amṛit'ānubhava》</em></p></blockquote><p id="6eea" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">有几个变化，使安装🐊<code class="du kt ku kv kw b">Putout</code>更快。</p><h1 id="921c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">将规则合并成<code class="du kt ku kv kw b">promises</code></h1><p id="cfc9" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated"><code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-promises#putoutplugin-promises-" rel="noopener ugc nofollow" target="_blank">@putout/plugin-promises</a></code>将下一个规则作为依赖项:</p><ul class=""><li id="0316" class="lr ls hi ju b jv jw jz ka kq lt kr lu ks lv kp lw lx ly lz bi translated">✅ <code class="du kt ku kv kw b">apply-top-level-await</code></li><li id="f037" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated">✅ <code class="du kt ku kv kw b">remove-useless-async</code></li><li id="dc3a" class="lr ls hi ju b jv ma jz mb kq mc kr md ks me kp lw lx ly lz bi translated">✅ <code class="du kt ku kv kw b">remove-useless-await</code></li></ul><p id="a1bc" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">但是现在它们合并成了一个npm包。</p><h1 id="8f26" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">将规则合并到<code class="du kt ku kv kw b">remove-empty</code></h1><p id="038f" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated">同<code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-remove-empty" rel="noopener ugc nofollow" target="_blank">@putout/plugin-remove-empty</a></code>它合并了<code class="du kt ku kv kw b">remove-empty-pattern</code>。</p><h1 id="8505" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><code class="du kt ku kv kw b">remove-useless-variables</code>中的新规则<code class="du kt ku kv kw b">destruct</code></h1><p id="0c4d" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated"><code class="du kt ku kv kw b">remove-useless-variables</code> <a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-remove-useless-variables#destruct" rel="noopener ugc nofollow" target="_blank">能多做一点点😏</a>现在:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="a3d3" class="lg ir hi kw b fi lh li l lj lk">-function hello(args) {<br/>-    const {a, b} = args;<br/>-}<br/>+function hello({a, b}) {<br/>+}</span></pre><p id="6194" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated"><em class="jt"> ☝️ </em></p><h1 id="3d33" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><code class="du kt ku kv kw b">remove-unused-variables</code>变得更加强大</h1><p id="3201" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated">现在支持<code class="du kt ku kv kw b">ClassProperties</code> ( <a class="ae kx" href="https://github.com/coderaiser/putout/issues/96" rel="noopener ugc nofollow" target="_blank"> #96 </a>)，编码:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="a78c" class="lg ir hi kw b fi lh li l lj lk">import thing from ‘./thing.js’;<br/>const pi = Math.PI;</span><span id="8998" class="lg ir hi kw b fi lq li l lj lk">export default class {<br/>    static t = thing;<br/>    static mathPi = pi;<br/>    t = thing;<br/>}</span></pre><p id="5de6" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">将不会出现误报:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="2eee" class="lg ir hi kw b fi lh li l lj lk">1:7  error   "thing" is defined but never used  remove-unused-variables <br/> 3:6  error   "pi" is defined but never used     remove-unused-variables */</span></pre><p id="a8ea" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">感谢向<a class="ae kx" href="https://github.com/adamdicarlo" rel="noopener ugc nofollow" target="_blank">@ adamdicallo</a>举报！</p><h1 id="c57b" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">比较</h1><figure class="ky kz la lb fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/2e6da0b3fba8ea514f03e2001272ee00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*JvZTaLiPegoJnVRc.png"/></div></figure><blockquote class="jo jp jq"><p id="57aa" class="jr js jt ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp hb bi translated">没有任何外在的东西能让你变得更好、更强、更富有、更快或更聪明。<br/>万物皆在。一切都存在。不要在自己之外寻求任何东西。”<br/>宫本武藏</p></blockquote><p id="09f2" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/compare#comparenode-string--node-template-string--node--options-options" rel="noopener ugc nofollow" target="_blank">@输出/比较</a>中的一些变化。它大量使用了<code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/engine-runner#replacer" rel="noopener ugc nofollow" target="_blank">Replacer</a></code>、<code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/putout/tree/master/packages/engine-runner#includer" rel="noopener ugc nofollow" target="_blank">Includer</a></code>和异人🦎<a class="ae kx" href="https://github.com/coderaiser/putout/blob/master/docs/putout-script.md" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hj"> PutoutScript </strong> </a>一个活的！</p><p id="c17a" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">很久以前，出于简化的原因，做出了下一个决定:当节点类型不同时，向上比较。</p><p id="9fad" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">但是🎩<code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/escover#readme" rel="noopener ugc nofollow" target="_blank">ESCover</a></code>需要保持比较，所以现在我们有了<code class="du kt ku kv kw b">findUp</code>标志(<em class="jt">默认开启</em>):</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="249d" class="lg ir hi kw b fi lh li l lj lk">compare(path, 'const __a = __b', {<br/>    findUp: false,<br/>});</span></pre><p id="d725" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">和代码:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="a0f6" class="lg ir hi kw b fi lh li l lj lk">const operator = getOperator(ret.argument || ret);</span></pre><p id="025e" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">可以转换为:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="ab77" class="lg ir hi kw b fi lh li l lj lk">const operator = (__c4['🧨'](4, 17), getOperator((__c4['🧨'](4, 29), ret.argument) || (__c4['🧨'](4, 45), ret)));</span></pre><p id="ddd6" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">而不是:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="fbe7" class="lg ir hi kw b fi lh li l lj lk">const operator = (__c4['🧨'](4, 17), getOperator(ret.argument || ret));</span></pre><p id="18f2" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">而<code class="du kt ku kv kw b">SequenceExpressions</code>像<code class="du kt ku kv kw b">(__c4['🧨'](__d, __e), __f)</code>被排除在外。</p><h1 id="cd12" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">🤷‍♂️这个变化跟♨️ <code class="du kt ku kv kw b">Speca</code>有什么关系？</h1><p id="370f" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated">嗯，♨️ <code class="du kt ku kv kw b"><a class="ae kx" href="https://github.com/coderaiser/speca" rel="noopener ugc nofollow" target="_blank">Speca</a></code>是基于🐊<code class="du kt ku kv kw b">Putout</code>。有些病例没有报道，所以我被困在这。</p><p id="dd67" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">它看起来是这样的:</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/2d3e04185dcf3664778923ad6d4f2c30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m4pa3sn3RCBMrdWq.png"/></div></div></figure><h1 id="6bd0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">我还能做什么🐊熄灭？</h1><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/cc256ebb8ba98d29b514df5260432210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBsrdtqNAXQ07OSIfRDxAA.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx translated">你可以在转换的帮助下学习人类代码！</figcaption></figure><p id="2859" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">让我们假设你想学习学生写变量声明:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="7760" class="lg ir hi kw b fi lh li l lj lk">const voice = cow.say("moo");</span></pre><p id="35dd" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">我们在这里做的是:创建一个名为<code class="du kt ku kv kw b">voice</code>的新常量，然后将它赋给<code class="du kt ku kv kw b">cow.say("moo")</code>调用表达式。表达式<code class="du kt ku kv kw b">cow.say("moo")</code>由成员表达式被调用方<code class="du kt ku kv kw b">cow.say</code>和字符串参数<code class="du kt ku kv kw b">"moo"</code>组成。让我们看看代码和警告的例子。</p><p id="aedc" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated"><strong class="ju hj">代码:</strong></p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="6e00" class="lg ir hi kw b fi lh li l lj lk">const voice = cow.say("moo");<br/>cow.say("mew");<br/>cow.say("moo");<br/>say("moo");</span></pre><p id="37d9" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated"><strong class="ju hj">警告</strong>:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="a599" class="lg ir hi kw b fi lh li l lj lk">‘✅ Assign “voice” to “caw.say” call with “moo” argument passed”’;<br/>‘❌ Call “cow.say” with argument “moo”’;<br/>‘❌ Assign “cow.say” call to “voice” constant’;<br/>‘❌ “say” should be a property of member expression’;</span></pre><p id="643b" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">这是🐊<strong class="ju hj">Putout</strong>T11】实现(没错，你可以用它在玩🐊<strong class="ju hj">输出编辑</strong>😏):</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="c423" class="lg ir hi kw b fi lh li l lj lk">module.exports.rules = {<br/>    '-cow-say': {<br/>        report: () =&gt; '❌ cow say moo',<br/>        match: () =&gt; ({<br/>            'cow.say("moo")': ({__a}, path) =&gt; {<br/>                return !path.parentPath.isVariableDeclarator();<br/>            },<br/>            'cow.say(__a)': ({__a}, path) =&gt; {<br/>                return __a.value !== 'moo';<br/>            },<br/>        }),<br/>        replace: () =&gt; ({<br/>            'cow.say(__a)': (vars, path) =&gt; {<br/>                return `'❌ Call "cow.say" with argument "moo"'`;<br/>            },<br/>            'cow.say("moo")': (vars, path) =&gt; {<br/>                return `'❌ Assign "cow.say" call to "voice" constant'`;<br/>            },<br/>            'say("moo")': `'❌ "say" should be a property of member expression'`,<br/>        })<br/>    },<br/>    '+cow-say': {<br/>        report: () =&gt; '✅ cow say moo',<br/>        replace: () =&gt; ({<br/>            'const voice = cow.say(__a)': `'✅ Assign "voice" to "caw.say" call with "moo" argument passed"'`,<br/>        }),<br/>    },<br/>};</span></pre><p id="fff0" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">实现由捆绑在一起的几个规则组成。这就是嵌套规则的工作方式。</p><h1 id="a0d8" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">很好的第一期</h1><p id="9bb9" class="pw-post-body-paragraph jr js hi ju b jv ll jx jy jz lm kb kc kq ln kf kg kr lo kj kk ks lp kn ko kp hb bi translated">如果你想帮忙，又不知道怎么帮，看看<a class="ae kx" href="https://github.com/coderaiser/putout/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22" rel="noopener ugc nofollow" target="_blank">好的第一期</a>标签:)。</p><p id="4b80" class="pw-post-body-paragraph jr js hi ju b jv jw jx jy jz ka kb kc kq ke kf kg kr ki kj kk ks km kn ko kp hb bi translated">今天到此为止🎈！祝您愉快，并照顾好您的代码库🦔！</p></div></div>    
</body>
</html>