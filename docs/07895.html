<html>
<head>
<title>The God-level Kotlin Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">神级科特林函数</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-god-level-kotlin-function-e287a0df8bed?source=collection_archive---------1-----------------------#2022-07-04">https://medium.com/codex/the-god-level-kotlin-function-e287a0df8bed?source=collection_archive---------1-----------------------#2022-07-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="20b5" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">中缀、扩展、运算符和Lambda函数</h2></div><p id="9bd6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">去年，我为一家公司编写了一个自定义视图，我制作了<strong class="iz hj">神级函数</strong>，在这里你可以使用Kotlin给我们的每一种类型的函数。为了更好地理解本文，有一个小的先决条件——您应该知道如何在自定义视图中动态显示值。如果你不知道这个话题，你可以浏览一下我几天前发表的这篇文章:</p><div class="ju jv ez fb jw jx"><a rel="noopener follow" target="_blank" href="/codex/the-math-required-for-android-development-558c706aa97"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hj fi z dy kc ea eb kd ed ef hh bi translated">Android开发所需的数学知识</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">轻松掌握Android中复杂的用户界面</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">medium.com</p></div></div><div class="kg l"><div class="kh l ki kj kk kg kl km jx"/></div></div></a></div></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ku"><img src="../Images/40a15496f485426f495abfb77725dcc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e9CiZWJk-Z5hxDWL"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated"><a class="ae lj" href="https://unsplash.com/@adrienconverse?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Adrien Converse </a>在<a class="ae lj" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9c21" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Kotlin引入了许多不同类型的函数:</p><ol class=""><li id="9b99" class="lk ll hi iz b ja jb jd je jg lm jk ln jo lo js lp lq lr ls bi translated">中缀函数</li><li id="3569" class="lk ll hi iz b ja lt jd lu jg lv jk lw jo lx js lp lq lr ls bi translated">扩展功能</li><li id="49e1" class="lk ll hi iz b ja lt jd lu jg lv jk lw jo lx js lp lq lr ls bi translated">λ函数</li><li id="b6f3" class="lk ll hi iz b ja lt jd lu jg lv jk lw jo lx js lp lq lr ls bi translated">操作员功能</li></ol><p id="d985" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有更多…</p><p id="e47a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我想告诉to我是如何设法在一行中使用所有这4个函数<strong class="iz hj">的。</strong></p><h1 id="f61f" class="ly lz hi bd ma mb mc md me mf mg mh mi io mj ip mk ir ml is mm iu mn iv mo mp bi translated">介绍</h1><p id="dd64" class="pw-post-body-paragraph ix iy hi iz b ja mq ij jc jd mr im jf jg ms ji jj jk mt jm jn jo mu jq jr js hb bi translated">我需要在自定义视图中显示值，所以我使用了<code class="du mv mw mx my b">ValueAnimator</code>类来实现。</p><figure class="kv kw kx ky fd kz"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="1b32" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将使用Accelerate Deaccelerate插值器在10秒内使<code class="du mv mw mx my b">myFloat</code>的值从0变为10(我将很快发表一篇关于插值器的有趣文章)。</p><p id="a357" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着这个自定义视图的复杂性增加，我厌倦了一次又一次地编写相同的代码。我需要提取通用代码。</p><h1 id="fec4" class="ly lz hi bd ma mb mc md me mf mg mh mi io mj ip mk ir ml is mm iu mn iv mo mp bi translated">显色法</h1><p id="834d" class="pw-post-body-paragraph ix iy hi iz b ja mq ij jc jd mr im jf jg ms ji jj jk mt jm jn jo mu jq jr js hb bi translated">我需要两个值:起始值和结束值。因为我和Kotlin有过广泛的合作，我知道<code class="du mv mw mx my b">Pair&lt;Float, Float&gt;</code>将是拥有这两种价值观的完美的类。作为加分项，扩展中缀函数<code class="du mv mw mx my b">to</code>使得代码可读。</p><pre class="kv kw kx ky fd nb my nc nd aw ne bi"><span id="d1ec" class="nf lz hi my b fi ng nh l ni nj"><strong class="my hj">infix fun</strong> &lt;A, B&gt; A.<em class="jt">to</em>(that: B): <a class="ae lj" href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html" rel="noopener ugc nofollow" target="_blank">Pair</a>&lt;A, B&gt; {<br/>  <strong class="my hj">return</strong> Pair(<strong class="my hj">this</strong>, that)<br/>}</span></pre><p id="bfa0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好的，现在我有了一个看起来像<code class="du mv mw mx my b">0f to 10f</code>的东西；但是这并没有做任何事情；它只创建了一个对象。我可以使用<code class="du mv mw mx my b">invoke</code>操作符函数来运行一些我想要的代码。这个<code class="du mv mw mx my b">invoke</code>操作函数必须存在于<code class="du mv mw mx my b">Pair</code>对象上，动画才能工作。因此，一个扩展函数。</p><figure class="kv kw kx ky fd kz"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="3d61" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以现在我们有了一个<code class="du mv mw mx my b">Pair</code>对象的扩展函数，它是一个操作函数<code class="du mv mw mx my b">invoke</code>。因此，如果我运行代码<code class="du mv mw mx my b">(0f to 10f)()</code>，这个函数将执行，从而启动动画。</p><p id="6b44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是我正在开发的自定义视图。我需要视图的实例来调用<code class="du mv mw mx my b">invalidate</code>函数来重画画布。此外，我们需要这个动画的持续时间和插值。我把这些加到了我的函数参数里。此外，我还需要一个回调函数来更新我想要更新的变量的值；这需要一个Lambda函数</p><figure class="kv kw kx ky fd kz"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="24e7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后，我得到了我需要的一切。使用它，我发现我在一行中使用了4种不同类型的函数<strong class="iz hj">！</strong></p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es nk"><img src="../Images/f80e8996ac6ef5d1df9d38c875b2234d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iPuwAqTm_roXY3IxS1Muw.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">我的神级功能</figcaption></figure><h1 id="9eec" class="ly lz hi bd ma mb mc md me mf mg mh mi io mj ip mk ir ml is mm iu mn iv mo mp bi translated">结论</h1><p id="a9c3" class="pw-post-body-paragraph ix iy hi iz b ja mq ij jc jd mr im jf jg ms ji jj jk mt jm jn jo mu jq jr js hb bi translated">Kotlin为您提供了无与伦比的灵活性。如何将一大段样板代码简化为一行代码，使其读起来像英语一样容易理解，这一点非常突出。</p></div><div class="ab cl kn ko gp kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hb hc hd he hf"><p id="68e5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我希望你喜欢读我的文章，并学到了一些东西。谢谢大家！✌️</p><pre class="kv kw kx ky fd nb my nc nd aw ne bi"><span id="a1e6" class="nf lz hi my b fi ng nh l ni nj"><strong class="my hj">Want to connect?</strong></span><span id="aea1" class="nf lz hi my b fi nl nh l ni nj">My <a class="ae lj" href="https://github.com/cybercoder-naj" rel="noopener ugc nofollow" target="_blank">GitHub</a> profile.<br/>My <a class="ae lj" href="https://cybercoder-naj.github.io" rel="noopener ugc nofollow" target="_blank">Portfolio</a> website.</span></pre></div></div>    
</body>
</html>