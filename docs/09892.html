<html>
<head>
<title>The History of The Royal Breakfast (Meet Git #6)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">皇家早餐的历史(见Git #6)</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-history-of-the-royal-breakfast-meet-git-6-b1a8a2b521ba?source=collection_archive---------10-----------------------#2022-11-17">https://medium.com/codex/the-history-of-the-royal-breakfast-meet-git-6-b1a8a2b521ba?source=collection_archive---------10-----------------------#2022-11-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3bbc" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">什么是提交以及如何读取Git历史？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d0c2b466eada67dabfd6e61de260fc67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kprm-1ZD7VJ3Rpnf"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">乔安娜·科辛斯卡在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="66c2" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">介绍</h1><p id="d9c5" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在上一篇文章中，我们正在完成食谱中的第一个食谱。今天，您将学习关于什么是提交、它们如何相互关联以及如何查看存储库历史的基础知识。</p><p id="2f0b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我们开始吧！</p><h1 id="c10c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">提交已解释</h1><h2 id="10bc" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">什么是提交？</h2><p id="355d" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">嗯，我们已经在cookbook存储库中创建了一些提交，但是它们到底是什么呢？</p><p id="6a8e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">每次您通过输入<code class="du lv lw lx ly b">git commit</code>告诉Git保存您的更改，Git都会创建一个commit，您可能已经猜到了。</p><p id="e3da" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">提交是自上次提交以来通过<code class="du lv lw lx ly b">git add</code>命令发生的所有暂存更改的快照。每次提交都包含以下信息:</p><ul class=""><li id="c06b" class="lz ma hi ki b kj lc km ld kp mb kt mc kx md lb me mf mg mh bi translated">对以前快照的新更改</li><li id="5581" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">作者</li><li id="2684" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">编成日期</li><li id="1e1e" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">消息</li><li id="3d0f" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">SHA-1校验和，例如cab78b27856…，通常只有前几个字符重要，只要您可以唯一地标识提交</li></ul><h2 id="8256" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">提交存储在哪里？</h2><p id="df5c" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这些对象存储在哪里？提醒一下:在<code class="du lv lw lx ly b">.git</code>子目录中，在我们的例子中是<code class="du lv lw lx ly b">cookbook/.git</code>。</p><p id="33fc" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">幸运的是，我们不需要知道Git内部的细节。你需要记住的是<strong class="ki hj">你的库是</strong> <code class="du lv lw lx ly b"><strong class="ki hj">.git</strong></code> <strong class="ki hj">目录</strong>。这意味着，即使您不小心修改了皇家早餐的食谱，或者您甚至删除了名为<code class="du lv lw lx ly b">royal_breakfast.txt</code>的文件，恢复食谱也是轻而易举的，只要您有<code class="du lv lw lx ly b">.git</code>目录。</p><h2 id="3f02" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">提交是如何相互关联的？</h2><p id="2cdd" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">关于提交，<em class="mn">每个</em>提交都链接到其父提交。在这一点上，我想提一下有两种特殊情况，可能会发生:</p><ul class=""><li id="c45c" class="lz ma hi ki b kj lc km ld kp mb kt mc kx md lb me mf mg mh bi translated">存储库中的第一个提交没有其父提交</li><li id="267a" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">合并提交可以有多个父提交(我们还没有谈到合并，但是我将在下一集向您展示这个场景)</li></ul><p id="f61d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">为了更好地理解提交之间的关联，让我给你一个基于cookbook存储库的例子。</p><p id="0a8e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">最新的提交<code class="du lv lw lx ly b">cab78b2</code>链接到<code class="du lv lw lx ly b">c033558</code>，这意味着<code class="du lv lw lx ly b">cab78b2</code>的父代是<code class="du lv lw lx ly b">c033558</code>。然后，提交<code class="du lv lw lx ly b">c033558</code>，链接到存储库中的初始提交，即<code class="du lv lw lx ly b">1033ca3</code>。最终，提交<code class="du lv lw lx ly b">1033ca3</code>没有父级。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/dfa43be7518a07a12d6d90b17344742d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_dUp3ji9aXw9Nt5FBv3pQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">每个提交都链接到其父级</figcaption></figure><h2 id="3633" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">不要失去理智</h2><p id="6700" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">还有一件事需要注意:你看到上面截图上的蓝色标记了吗？这是一个所谓的<em class="mn">指针</em>，如果你的工作流很简单(就像我们的例子)，它通常被放在分支的顶部。</p><p id="abf2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><code class="du lv lw lx ly b">HEAD</code>指针主要有两个职责:</p><ul class=""><li id="11a5" class="lz ma hi ki b kj lc km ld kp mb kt mc kx md lb me mf mg mh bi translated">它显示了您的工作目录所代表的存储库的状态</li><li id="f20c" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">它指向下一次提交将被添加到的位置</li></ul><p id="5f26" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在上面的截图中，<code class="du lv lw lx ly b">HEAD</code>指向提交<code class="du lv lw lx ly b">cab78b2</code>。<strong class="ki hj"/><code class="du lv lw lx ly b"><strong class="ki hj">HEAD</strong></code><strong class="ki hj">的位置只是告诉你</strong> <code class="du lv lw lx ly b"><strong class="ki hj">cookbook </strong></code> <strong class="ki hj">目录中的文件看起来就像执行这个提交时一样(除非你用皇家早餐食谱修改了文本文件)。</strong></p><p id="fa42" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><strong class="ki hj">同样，如果你要执行另一个提交，它会出现在</strong> <code class="du lv lw lx ly b"><strong class="ki hj">cab78b2</strong></code> <strong class="ki hj">之上，因为这是HEAD指向的地方。</strong></p><p id="ba2a" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">操作<code class="du lv lw lx ly b">HEAD</code>指针非常有用，例如，如果你想让你的项目回到之前的已知状态。<strong class="ki hj">时光旅行，还原Git中的变化主要与移动</strong> <code class="du lv lw lx ly b"><strong class="ki hj">HEAD</strong></code> <strong class="ki hj">指针有关，这个话题下一集会讲到。</strong></p><h2 id="4703" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">关于分支</h2><p id="0a38" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在分支方面，我还没有谈到这个主题，但是现在你只需要知道每个存储库至少有一个分支，在我们的存储库中这个分支被称为<code class="du lv lw lx ly b">master</code>，或者<code class="du lv lw lx ly b">main</code>，这取决于你的Git配置。我们<em class="mn">总是</em>在特定分支的上下文中工作，所以我们可以说我们一直在<code class="du lv lw lx ly b">master</code>分支上工作。</p><p id="abfb" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这是什么意思？像这样组织的提交允许您做有趣的事情，例如:</p><ul class=""><li id="82bb" class="lz ma hi ki b kj lc km ld kp mb kt mc kx md lb me mf mg mh bi translated">比较<em class="mn">和</em>时有哪些变化</li><li id="88e1" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated">如果你改变主意，时光旅行/回复变化</li></ul><h1 id="dac4" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">查看历史记录</h1><p id="b136" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在前几集，我们在存储库中创建了三个修改(提交),但是如何检查引入了什么以及何时引入的？</p><p id="d5a0" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">像现在这种项目超级简单的时候很容易记住所有这些东西，但是当项目越来越大的时候，记住所有的东西就越来越难了。为了查看和分析历史，Git附带了几个工具，我将在下面描述。</p><h2 id="2a74" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">使用git日志</h2><p id="8477" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">使用<code class="du lv lw lx ly b">git log</code>是了解存储库情况的最简单的方法。<strong class="ki hj"/><code class="du lv lw lx ly b"><strong class="ki hj">git log</strong></code><strong class="ki hj">命令显示了您当前工作的分支的历史</strong> ( <code class="du lv lw lx ly b">master</code>，因为在整个存储库中只有一个分支)。每个条目代表一次提交，它由一组关于特定快照的重要信息组成。</p><p id="28bf" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">重要的是，条目是按从最新到最老的顺序排列的，所以如果你想按时间顺序查看历史，就从下往上读条目。乍一看这似乎很奇怪，但是我们通常对最近的变化感兴趣，所以这就是为什么它们被列在第一位。</p><p id="23db" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果历史记录包含太多的提交，以至于无法在一个页面上显示，请使用键盘上的<code class="du lv lw lx ly b">B</code>(后退)、<code class="du lv lw lx ly b">F</code>(前进)和<code class="du lv lw lx ly b">Q</code>(退出)键进行导航。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/014808a128597343fd817746e180731d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plyEVvQSGJi0d6q-Wv5KwQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">最近的更改列在顶部</figcaption></figure><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/41f3ef787cae51407299de50fb3a6f8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zkHx6ZqBb94s85liyjzsbA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">结尾的冒号意味着还有更多页面要显示</figcaption></figure><h2 id="64ea" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">以图表形式查看历史</h2><p id="d4d5" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">简单的<code class="du lv lw lx ly b">git log</code>没问题，但是如果你想真正像专业人士一样使用Git，我有更好的东西给你。</p><p id="0ae5" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">现在，让我们假设我们的食谱将包含比现在更多的食谱。此外，如果您想独立于其他配方开发配方，您可能会喜欢在单独的<em class="mn">分支</em>上工作，并且存储库的历史可能看起来像下面的截图。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/f153d0037d1a7f1aa3469fe5d0b4e649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FCnn-x-feAAhYYQQENaMPg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">以图表形式表示的存储库历史</figcaption></figure><p id="464e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">每个浅绿色标签，即<code class="du lv lw lx ly b">master</code>、<code class="du lv lw lx ly b">spaghetti_carbonara</code>、<code class="du lv lw lx ly b">tiramisu_omg</code>，代表一个单独的分支。如你所见，<strong class="ki hj">历史不再是线性的，所以这些配方可以独立开发。</strong></p><p id="f686" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在这种情况下，简单的<code class="du lv lw lx ly b">git log</code>不再有效。我的意思是，它确实工作，并且仍然产生输出，但是<strong class="ki hj"/><code class="du lv lw lx ly b"><strong class="ki hj">git log</strong></code><strong class="ki hj">的输出仅限于来自你当前所在的</strong>分支的提交(<code class="du lv lw lx ly b">HEAD</code>指向<code class="du lv lw lx ly b">master</code>分支)。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mo"><img src="../Images/57c9b7d87a3fe7aad60f4f175b91144c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUJSk598P44k09Ajwb22Bw.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">git日志只显示来自当前分支(主)的提交</figcaption></figure><p id="cece" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">更好的做法是对存储库的样子有一个更大的了解，例如存储库中还有哪些分支，如果有的话，它们是如何合并的。</p><p id="c270" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">为了实现这一点，我鼓励你开始使用 <code class="du lv lw lx ly b"><strong class="ki hj">git log --graph --all --oneline --decorate</strong></code> <strong class="ki hj">。</strong></p><p id="df68" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">下面是对特定标志作用的简短解释:</p><ul class=""><li id="f0b5" class="lz ma hi ki b kj lc km ld kp mb kt mc kx md lb me mf mg mh bi translated"><code class="du lv lw lx ly b">--graph</code>使得每一次提交都是用一行星号连接起来的</li><li id="076a" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated"><code class="du lv lw lx ly b">--all</code>显示<em class="mn">存储库中的所有</em>分支</li><li id="debe" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated"><code class="du lv lw lx ly b">--oneline</code>将单个提交的信息压缩到一行中</li><li id="3ee2" class="lz ma hi ki b kj mi km mj kp mk kt ml kx mm lb me mf mg mh bi translated"><code class="du lv lw lx ly b">--decorate</code>给出了一些额外的格式(取决于Git版本，默认情况下可以启用装饰)</li></ul><h2 id="6578" class="lh jp hi bd jq li lj lk ju ll lm ln jy kp lo lp ka kt lq lr kc kx ls lt ke lu bi translated">Git中的别名</h2><p id="8031" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这个命令很好，但是我们真的需要在每次想要使用它的时候一遍又一遍地重复输入吗？</p><p id="5a35" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我承认，将历史显示为图形的命令有点长，如果我不得不从头开始输入，这将使我发疯。</p><p id="8a3f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">幸运的是，Git有一个很酷的特性叫做<em class="mn">别名</em>。如果您有一个经常使用的命令，可以为这样的命令创建一个别名。例如，这允许您将长命令变得更短。</p><p id="d21f" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果我告诉你不用写<code class="du lv lw lx ly b">git log --graph --all --oneline --decorate</code>而只用<code class="du lv lw lx ly b">git lga</code>会怎么样？</p><p id="4569" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">为了使<code class="du lv lw lx ly b">git lga</code>在Git中可用，粘贴端子<code class="du lv lw lx ly b">git config --global alias.lga log --graph --all --oneline --decorate</code>。这将在全局范围内添加新的别名，这意味着从现在开始，<code class="du lv lw lx ly b">git lga</code>将可用于您的系统帐户。</p><h1 id="e1cc" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">下一步是什么？</h1><p id="353d" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">由于我们还没有穷尽检查历史的主题，在下一集我们将了解如何检查具体是什么时候被提交的。</p><h1 id="074d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">参考</h1><p id="9f46" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">[1]王南钧·什皮查科夫斯基，<em class="mn">让皇家早餐真正皇家化(遇见Git # 5)</em><a class="ae jn" rel="noopener" href="/codex/make-the-royal-breakfast-truly-royal-meet-git-5-b7ba8a36f91">https://medium . com/codex/Make-the-Royal-Breakfast-true-Royal-Meet-Git-5-b7ba 8 a 36 f 91</a></p></div></div>    
</body>
</html>