# 制作有效拉动式请求的艺术

> 原文：<https://medium.com/codex/the-art-of-crafting-effective-pull-requests-d31502dbd4cb?source=collection_archive---------16----------------------->

![](img/14bc908bbaa200ef69e3671db034732b.png)

Pull Requests (PRs)是向项目提交贡献的一种很好的方式，尤其是当有多个开发人员同时在做这个项目的时候。如果做得好，它们是一种媒介，通过它我们可以收到反馈，并增加我们所发布的变更的可见性。

好的公关有很多要素。他们最终决定了最终可交付产品的质量，并讲述了某个特性或变化是如何产生的。

在这篇文章中，我将介绍公关生产过程中每个阶段需要优化的一些基础知识。我的希望是，你将能够使用这个来最大化反馈质量和最小化合并时间。所以让我们开始吧。

# 辖域

打造公关之旅的第一步是为你的变化创建一个单独的分支。在这个阶段，确定变更的范围是关键。首先，想一想你想在单个 PR 中引入多大的变更集。尝试在 PR 中解决一个问题或构建一个功能。它越大，审查起来就越复杂，就越有可能被拖延。记住复习 PRs 是占用别人一天的时间！

一旦确定了范围，确保每个变更都被分解成小的逻辑提交。因为几个原因，小提交是有价值的。首先，它允许审阅者看到变更的进展，并理解 PR 的当前状态。如果您正在使用 [git 二等分](https://thoughtbot.com/blog/git-bisect)来调试一个问题或者试图在将来回滚一个更改，这也是非常有价值的。

# 起草

旅程的下一步是打开一份 PR 草案。假设您没有在本地运行整个测试套件，这并不总是必要的，但是如果您希望看到完整的 CI 与所有测试一起运行，这是很有用的。这将为您提供早期信号，告诉您您的更改是否以意想不到的方式与代码库的其余部分交互。

花点时间回顾一下你的修改，看看从回顾者的角度来看是否一切都有意义。如果您对 PR 的状态感到满意，必要时您可以标记审阅者以获得早期反馈。

如果你决定给评论者贴标签，要求具体的反馈，指出公关仍在进行中的事实。用你想要的反馈来引导你的评论者。这将确保他们不会花费时间和精力给你反馈可能会改变的事情，或者你已经意识到的事情。

# 出版

如果你的 PR 草稿状态良好，你现在就可以标记评论者了。在挑选评审员时，挑选不超过 2-3 名主要评审员。如果你标记了大量的评论者，你可能会看到旁观者效应。

在标记审阅者之前，请确保:

*   测试结果都是绿色的。你不希望评审人员把宝贵的时间花在指出基础知识上。
*   你已经清楚地阐明了公关的目的以及变革的大背景。链接回相关的松弛线程或票证。这一点很重要，即使你认为为了子孙后代，评论者会有完整的背景。
*   你已经做了自我检讨。我建议浏览一下[马斯洛的代码审查金字塔](http://www.dein.fr/2015-02-18-maslows-pyramid-of-code-review.html)，看看你的工作是否符合那些标准。你应该是第一个在别人之前对你的工作进行批判性评论的人。
*   如果你心里有具体的后续行动，也要描述出来，这样评价者就知道接下来会发生什么。
*   您已经以截图、视频或日志的形式向 PR 提供了相关的工件。这将帮助您的审阅者更好地理解您的更改的影响。

# 反馈

当您收到审核者的反馈时，请记住:

*   在异步通信中，音调很容易丢失。因此，请假设最佳意图，不要将反馈视为针对个人。为你的决定提供解释和背景。
*   如果有些事情不清楚，问清楚问题，不要试图阅读茶叶。如果在异步对话中事情仍然不清楚，要求一些时间在电话中聊天。一旦你有机会讨论，回过头来总结 PR 中讨论的要点，以保留上下文。
*   无论您是否决定接受反馈，请务必确认您收到的反馈。这表明你重视评审者的时间和努力。
*   处理完反馈后，明确要求重新审核。不要假设评审者会知道你什么时候完成。如果你在后续的评论中指出了针对他们反馈的具体承诺，那就加分了。

# 放

一旦你完成了反馈周期并获得了评审的批准，记得回来合并你的 PR。等待的时间越长，遇到合并冲突或倒退的机会就越大。所以一定要尽快合并。

如果您发布的 PR 将执行大型数据操作或更改关键路径中的某些内容，请确保您可以在发布过程中遵循该 PR，并减少过程中的任何错误或中断。

如果一切顺利，并且您的更改已在生产中，请记住跟踪利益相关者并更新他们的进度。

*本帖原载于* [*BetterUp 产品博客*](https://build.betterup.com/the-art-of-crafting-effective-pull-requests/) *。*