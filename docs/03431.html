<html>
<head>
<title>Create Serverless REST API on iPad like a madman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像疯子一样在iPad上创建无服务器REST API</h1>
<blockquote>原文：<a href="https://medium.com/codex/create-serverless-rest-api-on-ipad-like-a-madman-58c0ed369d62?source=collection_archive---------11-----------------------#2021-09-02">https://medium.com/codex/create-serverless-rest-api-on-ipad-like-a-madman-58c0ed369d62?source=collection_archive---------11-----------------------#2021-09-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="78d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天我想展示如何用a̶l̶m̶o̶s̶t̶毫不费力地创建无服务器REST API。为了证明我完全疯了——我要在iPad上这么做。接下来的动作可以在任何电脑上执行，只是不用iSh和Alpine，你可以使用你的本地操作系统、终端和软件包管理器(或者如果你在Windows上，可以使用巫毒魔法，但是说真的<a class="ae jd" href="https://chocolatey.org" rel="noopener ugc nofollow" target="_blank"> Chocolatey </a>)。以下所有命令都是在iPad上的iSh应用程序中测试的，这是Alpine Linux emulator for iOS。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/b19d89a99438e5ef12bbee7bd32d86d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_CHLQNPE1n-ttoW5"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">由<a class="ae jd" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7324" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我<a class="ae jd" rel="noopener" href="/codex/how-to-get-a-free-cloudy-linux-server-7f528c09595f">描述了</a>如何获得一个免费的Oracle服务器，以及如何在iOS上ssh到它。但是现在我要用iSh直接从iPad设备部署一个API，中间没有Linux服务器。</p><p id="f383" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">剧透在前，我准备用<a class="ae jd" href="https://aws.amazon.com/lambda/?nc1=h_ls" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>，Python3和Chalice框架。当地一家很棒的咖啡馆提供的WIFI上网服务。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="54a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS Lambda是一个无服务器的函数执行服务，这意味着我可以将任何代码块部署为一个函数，而不需要关心基础设施、服务器及其支持和维护。AWS每月提供100万个免费请求和40万千兆秒的计算时间。它非常适合测试第一个基于MVP或POC API的产品。无服务器架构的优点和简单之处在于您只关心代码，而不关心其他。AWS负责使其公开和可伸缩。有多种框架可以简化AWS Lambda函数的开发，Chalice就是其中之一。让我展示一下它是如何工作的。但是首先你需要一个AWS账户<a class="ae jd" href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/" rel="noopener ugc nofollow" target="_blank">如果你没有的话。</a></p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="dcfe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我建议对信用卡使用与获取Oracle服务器文章中相同的策略:小额信用卡或私人预付卡。AWS以隐性成本闻名。您可以使用我们的示例API，但是如果您决定测试免费层没有覆盖的其他服务——预计会有意想不到的费用。</p><p id="1d62" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您有了AWS帐户，<a class="ae jd" href="https://aws.amazon.com/premiumsupport/knowledge-center/create-access-key/" rel="noopener ugc nofollow" target="_blank">创建访问密钥</a>,以便对您的帐户进行编程访问。为了做一些事情，你还需要正确的用户策略。对于测试，我推荐PowerUserAccess，我假设您在某个时候有过AWS的经验，但也许我会在将来为AWS IAM和安全性准备一篇文章。</p><p id="a147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦您有了访问密钥，请按如下方式设置它们:</p><pre class="jf jg jh ji fd kb kc kd ke aw kf bi"><span id="65f1" class="kg kh hi kc b fi ki kj l kk kl">$ mkdir ~/.aws<br/>$ cat &gt;&gt; ~/.aws/config<br/>[default]<br/>aws_access_key_id=YOUR_ACCESS_KEY_HERE<br/>aws_secret_access_key=YOUR_SECRET_ACCESS_KEY<br/>region=YOUR_REGION (such as us-west-2, us-west-1, etc)</span></pre><p id="4d83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它将在<em class="km">中创建文件<em class="km">配置</em>。aws </em>文件夹与您的凭证。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="17ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我接下来要做的是在iPad上安装Python3。是的，你没看错。实际上也没那么难。我打开iSh，输入<code class="du kn ko kp kc b">apk add --no-cache --update python3 py3-pip</code>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kq"><img src="../Images/77640566b525886d1b0ba92f74033250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BR8J3180l1Ojd-kLvIsCEg.png"/></div></div></figure><p id="7379" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一部分更具挑战性——我将安装圣杯。执行<code class="du kn ko kp kc b">pip3 install chalice</code>。现在，如果你用的是iPad，你会想要喝一两杯咖啡，吃点零食，或者拜访一个你有一段时间没见的亲戚，因为这需要一段时间。一段时间，像大时代。你知道，Alpine Linux在iPad上的模拟不会出现芯片，所以要有耐心。我已经等了大约一个小时。也许有时候按下回车键，它似乎在进程停滞时帮助了我。愿力量与你同在。</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="73f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Chalice正在使用boto core(AWS SDK)——这是一个自我高效的框架，可以自己进行部署和资源供应。一旦安装完成，你需要执行<code class="du kn ko kp kc b">chalice --version</code>来检查你的努力是否得到了回报。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kq"><img src="../Images/8fac6c1c6f0258be15d28011220fa6d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRSclgqQi1xTLcdpm8WBOQ.jpeg"/></div></div></figure><p id="7b4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我要创建一个简单的API来生成不同的短语来描述使用iPad进行开发的不稳定的人。多酷啊。使用您最喜欢的文本编辑器。我用的是<em class="km"> nano </em>，说实话我对<em class="km"> vi </em>不太感冒。(<code class="du kn ko kp kc b">apk add nano</code>)。你可以使用你最喜欢的文本编辑器。</p><ul class=""><li id="45d7" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">执行<code class="du kn ko kp kc b">chalice new-project generator</code>。它将在<em class="km">生成器</em>文件夹中创建基本项目脚手架，包括<em class="km"> app.py </em>文件。</li><li id="964b" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">执行<code class="du kn ko kp kc b">cd generator</code>和<code class="du kn ko kp kc b">nano app.py</code>(或者使用自己喜欢的文本编辑器)。</li><li id="9d37" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">编辑文件以获得下一个内容，或者发挥创造力大声呼喊:</li></ul><pre class="jf jg jh ji fd kb kc kd ke aw kf bi"><span id="5c70" class="kg kh hi kc b fi ki kj l kk kl">from chalice import Chalice<br/>from random import choice</span><span id="ba0d" class="kg kh hi kc b fi lf kj l kk kl">app = Chalice(app_name='generator')<br/>adjectives = ['totally', 'completely', 'ultimate', 'absolutely', 'epic', 'seeking medical attention']<br/>attributes = ['cuckoo', 'mental', 'creepy', 'cray-cray', 'shizo', 'phsyco']<br/>subjects = ['coder', 'devops', 'project manager', 'scrum master', 'girlfriend']</span><span id="51bd" class="kg kh hi kc b fi lf kj l kk kl">result = choice(adjectives) + ' ' + choice(attributes) + ' ' + choice(subjects)</span><span id="fbfe" class="kg kh hi kc b fi lf kj l kk kl">@app.route('/{name}')<br/>def index(name): <br/>    return {'result': result + ' ' + name}</span></pre><ul class=""><li id="9846" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">执行<code class="du kn ko kp kc b">chalice deploy</code>。如果您拥有正确的凭据和权限，并且非常幸运，您将得到类似的输出:</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lg"><img src="../Images/070f4b56b764cc77a96aab8ff35276af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QAjJSxAKttCpGLyzPBF0w.jpeg"/></div></div></figure><ul class=""><li id="b50c" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">试试看:<code class="du kn ko kp kc b">curl <a class="ae jd" href="https://your/api/url" rel="noopener ugc nofollow" target="_blank">https://your/api/url</a></code></li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kq"><img src="../Images/bab214c2f3115a6fd890a09f9d914868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hAn0bVp3cQV1o3RxCDXMvQ.jpeg"/></div></div></figure><ul class=""><li id="9c00" class="kr ks hi ih b ii ij im in iq kt iu ku iy kv jc kw kx ky kz bi translated">删除应用:<code class="du kn ko kp kc b">chalice delete</code></li><li id="fcbe" class="kr ks hi ih b ii la im lb iq lc iu ld iy le jc kw kx ky kz bi translated">阅读文件和实验:<a class="ae jd" href="https://github.com/aws/chalice" rel="noopener ugc nofollow" target="_blank">https://github.com/aws/chalice</a></li></ul></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="a5a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你玩得开心，记得关注我，这样我就有动力写更多疯狂的话题。如果你有关于建立帐户或执行某些命令的问题，请在评论中写下。</p></div></div>    
</body>
</html>