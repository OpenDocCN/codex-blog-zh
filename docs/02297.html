<html>
<head>
<title>React Native starter project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React本机启动项目</h1>
<blockquote>原文：<a href="https://medium.com/codex/react-native-starter-project-a20eafd552be?source=collection_archive---------7-----------------------#2021-07-12">https://medium.com/codex/react-native-starter-project-a20eafd552be?source=collection_archive---------7-----------------------#2021-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fc7c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何设置一个初学者项目的快速指南，这样您就不必安装和设置您总是需要的库。</h2></div><blockquote class="ix iy iz"><p id="da47" class="ja jb jc jd b je jf ij jg jh ji im jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">你可以在<a class="ae jx" href="https://github.com/trta2352/starter_project/tree/master" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到这个项目。</p></blockquote><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es jy"><img src="../Images/3fb42a0ede470419def67cf4122deaf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2G91BPUvxxri0U8RwUdMeg.jpeg"/></div></div></figure><p id="24b4" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">这篇文章正在编写中，不久将会更新。目前，我们设置了:</p><ol class=""><li id="8ce2" class="kn ko hi jd b je jf jh ji kk kp kl kq km kr jw ks kt ku kv bi translated">完成:用react-native init初始化项目，</li><li id="e6aa" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw ks kt ku kv bi translated">完成:添加类型脚本支持</li><li id="42d8" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw ks kt ku kv bi translated">完成:创建基本的项目结构并添加React导航支持</li><li id="52f0" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw ks kt ku kv bi translated">TODO: Redux支持</li><li id="c53b" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw ks kt ku kv bi translated">完成:SVG图像支持</li><li id="ee39" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw ks kt ku kv bi translated">完成:安全存储支持</li></ol></div><div class="ab cl lb lc gp ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hb hc hd he hf"><p id="909e" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">这听起来熟悉吗？你有一个很好的想法，你想测试一下。经过一段时间的编程，你会意识到在你有基本的设置之前要花多少时间。你失去了兴趣，决定改天继续做这个项目。</p><p id="1557" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">如果你和我一样，这种情况已经发生在你身上不止一次了。我决定适可而止，是时候彻底解决这个问题了。让我们创建一个启动项目，它拥有你需要的一切，可以让你马上开始开发你的想法。那么我们需要什么？我们需要某种导航和状态管理。我们也补充一下。svg图片支持、类型脚本和加密存储，用于保护登录令牌。</p><h2 id="9ce0" class="li lj hi bd lk ll lm ln lo lp lq lr ls kk lt lu lv kl lw lx ly km lz ma mb mc bi translated">1.使用react-native init &lt;<project name="">来初始化我们的项目</project></h2><p id="8279" class="pw-post-body-paragraph ja jb hi jd b je md ij jg jh me im jj kk mf jm jn kl mg jq jr km mh ju jv jw hb bi translated">这里没有必要重新发明轮子，让我们使用react-native init来初始化我们的项目。它创建了一个基本的工作应用程序，只有一个主屏幕。</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="d191" class="li lj hi mj b fi mn mo l mp mq">react-native init starter_project</span></pre><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es mr"><img src="../Images/62dec35a122960c38f178e4abc4b9697.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*-XCQrr10o1NX99neSwpXiQ.png"/></div></div><figcaption class="ms mt et er es mu mv bd b be z dx translated">图1:运行react-native init后的项目文件结构。</figcaption></figure><h2 id="1a7f" class="li lj hi bd lk ll lm ln lo lp lq lr ls kk lt lu lv kl lw lx ly km lz ma mb mc bi translated">2.安装Typescript和React导航</h2><p id="c7ee" class="pw-post-body-paragraph ja jb hi jd b je md ij jg jh me im jj kk mf jm jn kl mg jq jr km mh ju jv jw hb bi translated">项目初始化后不需要安装Typescript。你可以使用react-native提供的Typescript模板(更多信息请点击<a class="ae jx" href="https://github.com/react-native-community/react-native-template-typescript" rel="noopener ugc nofollow" target="_blank">这里</a>)。这样做的问题在于，你总是要检查模板的版本是否是最新的，而且它会添加我们不需要的代码。所以最好自己加Typescript。这可以通过三个步骤轻松实现。</p><ol class=""><li id="e415" class="kn ko hi jd b je jf jh ji kk kp kl kq km kr jw ks kt ku kv bi translated">在终端(或cmd)中导航到您的项目，并运行以下命令:</li></ol><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="fa1d" class="li lj hi mj b fi mn mo l mp mq">npm install -D typescript @types/jest @types/react @types/react-native @types/react-test-renderer</span></pre><p id="e3b9" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">2.添加TypeScript配置文件。在项目的根目录下创建一个<strong class="jd hj"> tsconfig.json </strong>:</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="eeb4" class="li lj hi mj b fi mn mo l mp mq">{<br/>  "compilerOptions": {<br/>    "allowJs": true,<br/>    "allowSyntheticDefaultImports": true,<br/>    "esModuleInterop": true,<br/>    "isolatedModules": true,<br/>    "jsx": "react",<br/>    "lib": ["es6"],<br/>    "moduleResolution": "node",<br/>    "noEmit": true,<br/>    "strict": true,<br/>    "target": "esnext"<br/>  },<br/>  "exclude": [<br/>    "node_modules",<br/>    "babel.config.js",<br/>    "metro.config.js",<br/>    "jest.config.js"<br/>  ]<br/>}</span></pre><p id="46f3" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">3.创建一个<strong class="jd hj"> jest.config.js </strong>文件来配置jest使用TypeScript</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="5893" class="li lj hi mj b fi mn mo l mp mq">module.exports = {<br/>  preset: 'react-native',<br/>  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx', 'json', 'node']<br/>};</span></pre><p id="829c" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">你可以在官方<a class="ae jx" href="https://reactnative.dev/docs/typescript" rel="noopener ugc nofollow" target="_blank"> React原生网站</a>上找到对这些步骤更深入的解释。</p><h2 id="b046" class="li lj hi bd lk ll lm ln lo lp lq lr ls kk lt lu lv kl lw lx ly km lz ma mb mc bi translated">3.创建基本项目结构并添加React导航</h2><p id="5116" class="pw-post-body-paragraph ja jb hi jd b je md ij jg jh me im jj kk mf jm jn kl mg jq jr km mh ju jv jw hb bi translated">React原生项目应该如何构建是一个自其首次发布以来就一直存在的热门话题。人们对采用通用架构模式有些兴趣，比如MVC(模型—视图—控制器)，这种模式最终没有多大意义，并且增加了应用程序的复杂性，却没有显著的好处。</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es mw"><img src="../Images/513f6b3342a2e63e8b660ff3d3c68c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/format:webp/1*n0tT0J0g_Uv33obZRYA0rA.png"/></div><figcaption class="ms mt et er es mu mv bd b be z dx translated">图2:源文件夹的基本结构。</figcaption></figure><p id="fae3" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">我喜欢做的是一个基本的项目结构，由文件夹组成:“assets”、“components”、“redux”、“screens”和“utils”。名称以及文件夹包含的内容是不言自明的，但对于那些刚刚开始的人，这里有一个简短的解释:</p><ul class=""><li id="ad58" class="kn ko hi jd b je jf jh ji kk kp kl kq km kr jw mx kt ku kv bi translated">资产:包含您所有的静态文件，如图片，字体，颜色和全球风格。</li><li id="79e4" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw mx kt ku kv bi translated">组件:包含每个组件类型的单独文件夹。例如，你可以为你的按钮，警告，模态，输入创建文件夹…</li><li id="3437" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw mx kt ku kv bi translated">redux:容纳redux状态管理的逻辑。被进一步划分为文件夹，用于您的操作和缩减者，</li><li id="15a3" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw mx kt ku kv bi translated">屏幕:包含您的主屏幕/视图逻辑</li><li id="b53d" class="kn ko hi jd b je kw jh kx kk ky kl kz km la jw mx kt ku kv bi translated">utils:包括数据库管理、API管理、支持功能等文件…</li></ul><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es my"><img src="../Images/fed35e58e27054d08c6f4e60488ae647.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*7XNsprbfNdqfglieECmh0A.png"/></div><figcaption class="ms mt et er es mu mv bd b be z dx translated">图3:应用程序开发完成后源文件夹的样子。</figcaption></figure><p id="b78b" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">在图2中，您可以看到我们有一个名为“navigator.tsx”的文件。这取决于个人喜好，但我喜欢用一个文件包含应用程序中的所有导航。React Native已经有一个内置的导航库，用于导航移动应用程序，但很少使用。要去的库是<a class="ae jx" href="https://reactnavigation.org/" rel="noopener ugc nofollow" target="_blank">反应导航</a>和<a class="ae jx" href="https://wix.github.io/react-native-navigation/docs/basic-navigation" rel="noopener ugc nofollow" target="_blank">反应本地导航</a>。两者都做得很好，但是有一些不同。看你自己决定更喜欢哪个，觉得更好用。对我来说，最明显的赢家是React Navigation。主要是因为它的易用性。</p><p id="903e" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">要安装React导航，请运行以下命令:</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="dc7c" class="li lj hi mj b fi mn mo l mp mq">npm install <a class="ae jx" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-navigation/native <a class="ae jx" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-navigation/stack react-native-reanimated react-native-gesture-handler react-native-screens react-native-safe-area-context @react-native-community/masked-view</span></pre><p id="5d27" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">这将安装React Navigation和Stack navigator(React-Navigation/Stack)以及它的所有依赖项。根据你的情况，你可能还需要<a class="ae jx" href="https://reactnavigation.org/docs/tab-based-navigation" rel="noopener ugc nofollow" target="_blank">标签导航器</a>和/或<a class="ae jx" href="https://reactnavigation.org/docs/drawer-based-navigation" rel="noopener ugc nofollow" target="_blank">抽屉导航器</a>。鉴于这只是一个起步项目，我们没有什么比堆栈导航器。</p><p id="08e2" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">现在我们已经安装了所有与导航相关的东西，让我们写一些代码。我不打算详细解释React导航是如何工作的以及代码的哪些部分是什么意思。还有更详细的文章。</p><p id="2e92" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">在下面的代码片段中，您可以看到我们如何导入“主屏幕”，然后创建一个“主堆栈”和主“导航器”。您可以将多个屏幕添加到HomeStack，或者为登录/注册屏幕创建一个单独的堆栈。</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="mz na l"/></div></figure><p id="70c2" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">我建议您创建自己的屏幕模板，其中包含您可能需要或喜欢使用的所有内容(例如类组件，而不是功能组件)</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="mz na l"/></div></figure><h2 id="9a44" class="li lj hi bd lk ll lm ln lo lp lq lr ls kk lt lu lv kl lw lx ly km lz ma mb mc bi translated">4.添加对SVG图像的支持</h2><p id="0baf" class="pw-post-body-paragraph ja jb hi jd b je md ij jg jh me im jj kk mf jm jn kl mg jq jr km mh ju jv jw hb bi translated">如果您有兴趣了解更多关于添加SVG图像支持的信息，您可以查看这篇文章。</p><p id="5ace" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">要添加对SVG图像的支持，请运行以下命令:</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="9259" class="li lj hi mj b fi mn mo l mp mq">npm i react-native-svg react-native-svg-transformer</span><span id="c596" class="li lj hi mj b fi nb mo l mp mq">and </span><span id="f6ce" class="li lj hi mj b fi nb mo l mp mq">cd ios &amp;&amp; pod install</span></pre><p id="a227" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">这将安装<a class="ae jx" href="https://github.com/react-native-svg/react-native-svg" rel="noopener ugc nofollow" target="_blank"> react-native-svg </a>(允许显示图像)和<a class="ae jx" href="https://github.com/kristerkari/react-native-svg-transformer" rel="noopener ugc nofollow" target="_blank">react-native-svg-transformer</a>(允许在项目中导入SVG文件)。</p><p id="19e9" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">仅仅安装一个转换器本身并不会在构建项目时自动将SVG图像转换成png。我们需要一种方法来告诉编译器转换图像。我们通过添加或修改metro.config文件来实现这一点。</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="b388" class="li lj hi mj b fi mn mo l mp mq">const { getDefaultConfig } = require("metro-config");<br/><br/>module.exports = (async () =&gt; {<br/>  const {<br/>    resolver: { sourceExts, assetExts }<br/>  } = await getDefaultConfig();<br/>  return {<br/>    transformer: {<br/>      babelTransformerPath: require.resolve("react-native-svg-transformer")<br/>    },<br/>    resolver: {<br/>      assetExts: assetExts.filter(ext =&gt; ext !== "svg"),<br/>      sourceExts: [...sourceExts, "svg"]<br/>    }<br/>  };<br/>})();</span></pre><p id="5ead" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">如果我们试图导入一个SVG文件到TSX文件，我们会得到一个错误。这表明项目缺少声明文件。</p><p id="b39b" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">打开您的declaration.d.ts文件或创建它并添加对SVG文件的支持。这样，在将SVG图像导入TypeScript文件时就不会出错。</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="6baf" class="li lj hi mj b fi mn mo l mp mq">declare module "*.svg" {<br/>  import React from 'react';<br/>  import { SvgProps } from "react-native-svg";<br/>  const content: React.FC&lt;SvgProps&gt;;<br/>  export default content;<br/>}</span></pre><h2 id="9a19" class="li lj hi bd lk ll lm ln lo lp lq lr ls kk lt lu lv kl lw lx ly km lz ma mb mc bi translated">5.添加用于存储用户登录信息的安全存储</h2><p id="8ab4" class="pw-post-body-paragraph ja jb hi jd b je md ij jg jh me im jj kk mf jm jn kl mg jq jr km mh ju jv jw hb bi translated">如果你有兴趣了解更多关于安全存储数据的不同可能性，你可以看看这篇文章。</p><p id="f693" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">哪些信息应该永久存储在手机上取决于每个使用案例。我们可以肯定地说，如果我们在应用程序中内置了登录功能，我们就必须存储一些关于认证用户的信息。这通常包括用户ID、用户电子邮件/用户名以及用于与后端通信的令牌或ID。这样，我们的后端就知道用户已经通过了身份验证。</p><p id="3976" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">有相当多的库可以使用。比如有<a class="ae jx" href="https://github.com/oblador/react-native-keychain" rel="noopener ugc nofollow" target="_blank"> react-native-keychain </a>和<a class="ae jx" href="https://github.com/emeraldsanto/react-native-encrypted-storage" rel="noopener ugc nofollow" target="_blank">react-native-encrypted-storage</a>。最终，他们都使用相同的原生功能来实现目标(iOS- <a class="ae jx" href="https://developer.apple.com/documentation/security/keychain_services" rel="noopener ugc nofollow" target="_blank">钥匙链服务</a>和Android- <a class="ae jx" href="https://developer.android.com/reference/android/content/SharedPreferences" rel="noopener ugc nofollow" target="_blank">共享偏好</a>)。使用哪一个取决于个人喜好。我个人最喜欢的是<a class="ae jx" href="https://github.com/emeraldsanto/react-native-encrypted-storage" rel="noopener ugc nofollow" target="_blank">react-native-encrypted-storage</a>，但是我鼓励你也去看看其他的。</p><pre class="jz ka kb kc fd mi mj mk ml aw mm bi"><span id="3881" class="li lj hi mj b fi mn mo l mp mq">npm i react-native-encrypted-storage</span><span id="b431" class="li lj hi mj b fi nb mo l mp mq">and</span><span id="db5f" class="li lj hi mj b fi nb mo l mp mq">cd ios &amp;&amp; pod install</span></pre><p id="4c5f" class="pw-post-body-paragraph ja jb hi jd b je jf ij jg jh ji im jj kk jl jm jn kl jp jq jr km jt ju jv jw hb bi translated">管理数据最简单的方法是创建一个<a class="ae jx" href="https://www.martinfowler.com/eaaCatalog/tableDataGateway.html" rel="noopener ugc nofollow" target="_blank">网关</a>。一般来说，我们只需要三个简单的函数来帮助我们保存、加载和删除数据。它的工作原理与异步存储非常相似。请记住，示例中的“user_session”是我们用来访问数据的键。可以是你想要的任何东西。</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="mz na l"/></div></figure></div></div>    
</body>
</html>