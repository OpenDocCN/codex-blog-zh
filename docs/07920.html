<html>
<head>
<title>Power yourself with zsh and iTerm2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用zsh和iTerm2给自己充电</h1>
<blockquote>原文：<a href="https://medium.com/codex/power-yourself-with-zsh-and-iterm2-3b2a9a202e7d?source=collection_archive---------5-----------------------#2022-07-05">https://medium.com/codex/power-yourself-with-zsh-and-iterm2-3b2a9a202e7d?source=collection_archive---------5-----------------------#2022-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/ada7cfde60c608b8d0c70e75adeec536.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/0*-S0bsMmLtRumrMLF.png"/></div><figcaption class="im in et er es io ip bd b be z dx translated"><a class="ae iq" href="https://www.zsh.org/" rel="noopener ugc nofollow" target="_blank">https://www.zsh.org/</a></figcaption></figure><figure class="is it iu iv fd ij er es paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="er es ir"><img src="../Images/8ef4c21ae5b403450f5686a6f6533e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TjW4hdMwXrEG0Dps.jpg"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">来源:https://iterm2.com/</figcaption></figure><h1 id="ef1d" class="ja jb hi bd jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx bi translated"><strong class="ak">Mac/Linux支持的外壳</strong></h1><p id="ec2c" class="pw-post-body-paragraph jy jz hi ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">无论在macOS还是Linux中，默认shell都是bash。然而，我们在macOS/Linux中有许多shells可供选择，例如zsh、csh等。你可以看一下<em class="kw">/etc/shell</em>来检查支持的shell:</p><figure class="is it iu iv fd ij er es paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="er es kx"><img src="../Images/0aff131d3c872e2ce5c06037337db342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TqHYqGff4Z4fTpYIv4jZog.png"/></div></div></figure><p id="70f9" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">您可以使用以下命令检查您的默认shell:</p><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="490b" class="li jb hi le b fi lj lk l ll lm">echo $SHELL</span></pre><h1 id="cbba" class="ja jb hi bd jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx bi translated"><strong class="ak">为什么选择zsh </strong></h1><p id="6503" class="pw-post-body-paragraph jy jz hi ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">很多mac用户是赞成zsh的。对我来说，与bash相比有几个优点:</p><ol class=""><li id="cbfa" class="ln lo hi ka b kb ky kf kz kj lp kn lq kr lr kv ls lt lu lv bi translated">更智能的命令推荐。无论你是想尝试一些shell命令还是跳转到一些特定的文件夹，<code class="du lw lx ly le b">tab</code>键都是你所需要的。</li><li id="ec15" class="ln lo hi ka b kb lz kf ma kj mb kn mc kr md kv ls lt lu lv bi translated">你可以为zsh选择更多有趣的主题</li><li id="d042" class="ln lo hi ka b kb lz kf ma kj mb kn mc kr md kv ls lt lu lv bi translated">如果目录是git repo，zsh可以显示git分支名称</li></ol><figure class="is it iu iv fd ij er es paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="er es me"><img src="../Images/acbaefad8e677f10102814e0878681bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GhQG3d_Tn7MthlvSdFKsQ.png"/></div></div></figure><h1 id="bc68" class="ja jb hi bd jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx bi translated"><strong class="ak"> macOS设置</strong></h1><h2 id="97fb" class="li jb hi bd jc mf mg mh jg mi mj mk jk kj ml mm jo kn mn mo js kr mp mq jw mr bi translated">iTerm2</h2><p id="7380" class="pw-post-body-paragraph jy jz hi ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">我想推荐使用ITER ms(<a class="ae iq" href="https://iterm2.com/" rel="noopener ugc nofollow" target="_blank">https://iterm2.com/</a>)。iTerms中的许多惊人特性可以让你更有效率。</p><h2 id="d719" class="li jb hi bd jc mf mg mh jg mi mj mk jk kj ml mm jo kn mn mo js kr mp mq jw mr bi translated">哦，我的Zsh</h2><p id="d753" class="pw-post-body-paragraph jy jz hi ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">虽然macOS已经有了它的zsh，但是我还是推荐使用Oh My Zsh(<a class="ae iq" href="https://ohmyz.sh/#install" rel="noopener ugc nofollow" target="_blank">https://ohmyz.sh/#install</a>，<a class="ae iq" href="https://github.com/ohmyzsh/ohmyzsh" rel="noopener ugc nofollow" target="_blank">https://github.com/ohmyzsh/ohmyzsh</a>)。安装它的简单脚本:</p><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="6377" class="li jb hi le b fi lj lk l ll lm">sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"</span></pre><p id="fd52" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">现在外壳会切换到zsh。和之前的bash配置文件<code class="du lw lx ly le b">~/.bashrc</code>一样，zsh的配置文件现在是<code class="du lw lx ly le b">~/.zshrc</code>。</p><p id="feea" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">这里需要注意的是，在Mac上安装Oh My Zsh之后，你的系统会生成一个新的<code class="du lw lx ly le b">.zshrc</code>文件。这里有两种情况:</p><ol class=""><li id="1d9c" class="ln lo hi ka b kb ky kf kz kj lp kn lq kr lr kv ls lt lu lv bi translated">如果你使用默认的zsh，你旧的<code class="du lw lx ly le b">.zshrc</code>文件的内容将全部转移到<code class="du lw lx ly le b">.zshrc-pre-oh-my-zsh</code>。所以，如果你有一些定制的配置，最好把它们从<code class="du lw lx ly le b">.zshrc-pre-oh-my-zsh</code>复制到<code class="du lw lx ly le b">.zshrc</code>里</li><li id="098b" class="ln lo hi ka b kb lz kf ma kj mb kn mc kr md kv ls lt lu lv bi translated">如果您使用的是bash，您还可以将您的定制配置从<code class="du lw lx ly le b">.bashrc</code>或<code class="du lw lx ly le b">.bash_profile</code>复制到<code class="du lw lx ly le b">.zshrc</code>。或者您可以简单地将以下命令放入<code class="du lw lx ly le b">.zshrc</code>:</li></ol><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="a6b6" class="li jb hi le b fi lj lk l ll lm">source ~/.zshrc<br/>source ~/.bash_profile</span></pre><h2 id="b2bf" class="li jb hi bd jc mf mg mh jg mi mj mk jk kj ml mm jo kn mn mo js kr mp mq jw mr bi translated">zsh主题</h2><p id="5215" class="pw-post-body-paragraph jy jz hi ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">在<code class="du lw lx ly le b">~/.zshrc</code>中，您可以使用以下命令设置zsh主题:</p><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="f5bc" class="li jb hi le b fi lj lk l ll lm">ZSH_THEME="robbyrussell"</span></pre><p id="65a9" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">你可以在<code class="du lw lx ly le b">~/.oh-my-zsh/themes</code>中找到Oh My Zsh的所有主题。此外，您还可以在<a class="ae iq" href="https://github.com/ohmyzsh/ohmyzsh/wiki/themes" rel="noopener ugc nofollow" target="_blank">我的Zsh主题</a>中查看所有主题的详细信息。</p><p id="e7fa" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">对我来说，我对主题<code class="du lw lx ly le b">agnoster</code>做了一些修改:</p><figure class="is it iu iv fd ij er es paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="er es ms"><img src="../Images/bf8850c0b8670561f0f43280e83891fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-TjWWtkMEZl68KG6OpXuw.png"/></div></div></figure><p id="ea2f" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">第一个是conda/pyenv虚拟环境，下面是主机名、目录和git分支。修改后的主题文件在这里是<a class="ae iq" href="https://github.com/pandaczm/zsh_theme/blob/main/agnoster-custom.zsh-theme" rel="noopener ugc nofollow" target="_blank"/>，命名为<code class="du lw lx ly le b">agnoster-custom.zsh-theme</code>。下载文件后，您可以将其放入<code class="du lw lx ly le b">~/.oh-my-zsh/custom/themes</code>，并在<code class="du lw lx ly le b">~/.zshrc</code>中更改设置:</p><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="db84" class="li jb hi le b fi lj lk l ll lm">ZSH_THEME="<!-- -->agnoster-custom<!-- -->"</span></pre><p id="bd2b" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">你也可以根据你的喜好改变主题，在这里按照zsh语法<a class="ae iq" href="https://wiki.archlinux.org/title/zsh" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="27fe" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">记得运行<code class="du lw lx ly le b">source ~/.zshrc</code>来激活您的更改</p><h2 id="0f39" class="li jb hi bd jc mf mg mh jg mi mj mk jk kj ml mm jo kn mn mo js kr mp mq jw mr bi translated">电力线设置</h2><p id="a924" class="pw-post-body-paragraph jy jz hi ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">Powerline是vim的一个状态行插件，为其他几个应用程序提供状态行和提示，包括zsh、bash、tmux、IPython、Awesome、i3和Qtile。(参考来自<a class="ae iq" href="https://powerline.readthedocs.io/en/master/overview.html" rel="noopener ugc nofollow" target="_blank">电力线</a></p><p id="eb9c" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">整个设置如下:</p><ol class=""><li id="34d1" class="ln lo hi ka b kb ky kf kz kj lp kn lq kr lr kv ls lt lu lv bi translated">您可以使用pip简单地安装电力线:</li></ol><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="c527" class="li jb hi le b fi lj lk l ll lm">pip install --user powerline-status</span></pre><p id="fc9d" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated"><code class="du lw lx ly le b">--user</code>确保将powerline安装到<code class="du lw lx ly le b">~/.local</code>中，方便您管理。</p><p id="c667" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">2.运行以下命令安装电力线字体:</p><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="8392" class="li jb hi le b fi lj lk l ll lm">git clone <a class="ae iq" href="https://github.com/powerline/fonts.git" rel="noopener ugc nofollow" target="_blank">https://github.com/powerline/fonts.git</a><br/>cd fonts<br/>./install.sh</span></pre><p id="3454" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">3.您还需要将以下内容添加到<code class="du lw lx ly le b">~/.zshrc</code>中，以使zsh能够使用电力线字体:</p><pre class="is it iu iv fd ld le lf lg aw lh bi"><span id="6482" class="li jb hi le b fi lj lk l ll lm">export PATH=$HOME/.local/bin:$PATH<br/>. ~/.local/lib/python3.7/site-packages/powerline/bindings/bash/powerline.sh </span></pre><p id="918d" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">运行<code class="du lw lx ly le b">source ~/.zshrc</code>后，一些奇怪的事情发生了:</p><figure class="is it iu iv fd ij er es paragraph-image"><div class="er es mt"><img src="../Images/49709c38093c0d06f0e4b69b539ed705.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*u4ZrIl0s5ziomd6EjIRhuQ.png"/></div></figure><p id="eff1" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">这是因为您还没有设置iTerm2的字体:</p><figure class="is it iu iv fd ij er es paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="er es mu"><img src="../Images/2731b1a6948bbcdb677bfd069ad9c0bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6RUZqYCl-XX3wXVeXJOgZQ.png"/></div></div><figcaption class="im in et er es io ip bd b be z dx translated">Mac iTerm2字体设置</figcaption></figure><p id="318c" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">尝试搜索以<code class="du lw lx ly le b">Powerline</code>结尾的字体。</p><p id="1912" class="pw-post-body-paragraph jy jz hi ka b kb ky kd ke kf kz kh ki kj la kl km kn lb kp kq kr lc kt ku kv hb bi translated">那么一切都结束了，你现在可以开始你的新ZSH了！</p></div></div>    
</body>
</html>