<html>
<head>
<title>How To Create Controlled Forms in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中创建受控表单</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-create-controlled-forms-in-react-a8c8982ace00?source=collection_archive---------11-----------------------#2021-03-31">https://medium.com/codex/how-to-create-controlled-forms-in-react-a8c8982ace00?source=collection_archive---------11-----------------------#2021-03-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d143" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您是使用React组件创建应用程序的开发人员，您很可能希望通过表单收集用户数据。本帖将重点介绍在React中构建受控表单的最常见实践。但在此之前，理解什么是受控形式是很重要的。</p><p id="4b97" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">受控形式和非受控形式有什么区别？</p><p id="a4eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单来说，React中的非受控表单相当于基本的HTML表单。用户输入数据静态存储在DOM节点中，稍后使用ref属性进行引用。这些类型的表单保持它们自己的内部状态。</p><p id="8c70" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">受控形态则相反，它们并不维持自己的内部状态，它们是由道具控制的。它们从React状态对象接收输入值。这种状态被视为“真实的单一来源”，并使用回调事件处理程序进行动态更新。React的官方文档建议尽可能使用受控组件。在下一节中，将说明构建受控表单的过程。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="417e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">考虑用户输入他们的猫的名字和品种的情况。下面是用户与呈现的cat表单交互的示例:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/9b931a074318a137dca27527029bb871.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Jz0z6oVCGxXHJDF-h95GGw.gif"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图1:简单的Cat表单示例</figcaption></figure><p id="e935" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">表单(上图)相当简单，用户与它交互的方式与不受控制的表单一样。为了了解这种形式与不受控制的形式的区别，有必要查看代码内部。</p><figure class="jl jm jn jo fd jp"><div class="bz dy l di"><div class="jw jx l"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图2:受控Cat表单的源代码</figcaption></figure><p id="0f37" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使这种形式具有动态性的是使用props的输入值在状态之间的流动。最初呈现表单时，从状态中提取相应的输入值，在本例中，该值被设置为空字符串。onChange合成事件然后监听输入字段中的变化。一旦用户记录了另一次击键，合成事件就会注意到，并立即调用处理程序来处理该事件。在我们的处理函数中，状态随后用新的值更新为catName或catBreed with setState()。这个循环一直持续到用户提交表单。图3(下图)展示了这一流程。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jy"><img src="../Images/4078b936e7471be9cd51598dd50da0b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*Dpitv5OliKUxOLiNGyJiYw.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图3:表示受控表单与状态交互的流程图</figcaption></figure><p id="22fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了直观显示每次击键所修改的状态，提供了下面的GIF:</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/b61862a2aed4efd278ff5bd764bff4ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*fEWzF5Dj5y1GQRUxYgOBUQ.gif"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图4:控制台记录状态以验证表单控件</figcaption></figure><p id="4d49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">已创建了一个受控表单！这个例子使用了类组件和状态。一旦掌握了这个基本流程，尝试使用<a class="ae jz" rel="noopener" href="/swlh/building-controlled-forms-using-functional-components-in-react-965d033a89bd">功能组件和React钩子</a>来试验受控表单。这种方法甚至比这里概述的方法消耗的资源更少，但是如果您是新手的话，就有点棘手了！感谢您的阅读！</p><p id="d8d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">资源:</strong></p><ol class=""><li id="1796" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated"><a class="ae jz" href="https://reactjs.org/docs/forms.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/forms.html</a></li><li id="2bab" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">【https://www.youtube.com/watch?v=7Vo_VCcWupQ】T2&amp;ab _ channel =共同进化</li></ol></div></div>    
</body>
</html>