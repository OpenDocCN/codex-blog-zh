<html>
<head>
<title>iOS Interview: Background Fetch || Background Task</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS面试:后台取||后台任务</h1>
<blockquote>原文：<a href="https://medium.com/codex/ios-interview-background-fetch-background-task-5ed92eb11997?source=collection_archive---------4-----------------------#2022-12-17">https://medium.com/codex/ios-interview-background-fetch-background-task-5ed92eb11997?source=collection_archive---------4-----------------------#2022-12-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="ae72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">iOS中的</strong>后台任务是一段代码，当应用程序在后台时(即，当应用程序没有被主动使用时)执行。在iOS应用程序中实现后台任务有多种方式，具体取决于任务的具体需求。一些选项包括:</p><ol class=""><li id="c577" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">后台获取</strong>:iOS操作系统的这一功能允许应用在不活跃使用时，在后台获取新数据或执行其他任务。要实现后台抓取，需要在app的Xcode项目中启用“后台抓取”功能，在app的<code class="du jm jn jo jp b"><strong class="ih hj">UIApplicationDelegate</strong></code>中实现<code class="du jm jn jo jp b"><strong class="ih hj">application(_:performFetchWithCompletionHandler:)</strong></code>方法。</li><li id="9631" class="jd je hi ih b ii jq im jr iq js iu jt iy ju jc ji jj jk jl bi translated"><strong class="ih hj">后台任务</strong>:<code class="du jm jn jo jp b"><strong class="ih hj">BGTaskScheduler</strong></code>框架允许你安排后台任务，当应用程序在后台运行时执行这些任务。您可以使用这个框架安排任务在特定的时间间隔或特定的时间运行，或者您可以注册触发任务的特定事件。</li></ol><p id="6b4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们在本文中讨论背景获取。</p></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><p id="d57b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">要在iOS应用程序中实现后台抓取，您需要执行以下操作:</strong></p><ol class=""><li id="b8b6" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">在应用程序的Xcode项目中启用“后台获取”功能。为此，打开项目的“签名和功能”选项卡，并打开<strong class="ih hj">“后台模式”</strong>选项。然后，选中“后台获取”复选框。</li></ol><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/bc2908d7593826d2d8580ece2284f011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8Pss7LMdGM09imOTZ8qdQ.png"/></div></div></figure><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es ko"><img src="../Images/e0f63a0da870c432fd64d3232215764a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ytdZUkBpo5Hz6WYbjO1ZMQ.png"/></div></div></figure><p id="f8aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.在app的<code class="du jm jn jo jp b"><strong class="ih hj">UIApplicationDelegate</strong></code>中，实现<code class="du jm jn jo jp b"><strong class="ih hj">application(_:performFetchWithCompletionHandler:)</strong></code>方法。当系统想要为应用程序获取新数据时，会调用此方法。</p><pre class="kd ke kf kg fd kp jp kq bn kr ks bi"><span id="4171" class="kt ku hi jp b be kv kw l kx ky">func application(_ application: UIApplication, performFetchWithCompletionHandler completionhandler: @escaping (UIBackgroundFetchResult) -&gt; Void) {<br/>    // Perform the background fetch here.<br/>    // When the fetch is complete, call the completion handler with the appropriate UIBackgroundFetchResult value.<br/>    completionHandler(.newData)<br/>}</span></pre><p id="1570" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.在<code class="du jm jn jo jp b"><strong class="ih hj">performFetchWithCompletionHandler</strong></code>方法中，执行所需的后台任务(比如从服务器获取新数据)。当任务完成时，一定要调用完成处理程序，传入表示获取结果的<code class="du jm jn jo jp b"><strong class="ih hj">UIBackgroundFetchResult</strong></code>值。</p><p id="639b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">需要注意的是，iOS对应用程序在后台执行代码的时间有严格的限制，超过这些限制的应用程序可能会被终止。因此，尽可能高效地设计后台任务，并且只在后台执行必要的工作是很重要的。</p></div><div class="ab cl jv jw gp jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="hb hc hd he hf"><p id="3129" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="kz">如果你喜欢这个，点击💚尽你所能在下面为这篇文章鼓掌，这样其他人会在媒体上看到。如果您有任何疑问或建议，请随时评论或点击我的</em></strong><a class="ae la" href="https://twitter.com/b_banzara" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="kz">Twitter</em></strong></a><strong class="ih hj"><em class="kz">，或</em></strong><a class="ae la" href="https://www.linkedin.com/in/rranjanchchn/" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj"><em class="kz">Linkedin</em></strong></a></p></div></div>    
</body>
</html>