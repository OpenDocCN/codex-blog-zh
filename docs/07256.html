<html>
<head>
<title>Flipping business rule code in Serverless</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在无服务器中翻转业务规则代码</h1>
<blockquote>原文：<a href="https://medium.com/codex/flipping-business-rules-in-serverless-a78df3b5170e?source=collection_archive---------9-----------------------#2022-06-07">https://medium.com/codex/flipping-business-rules-in-serverless-a78df3b5170e?source=collection_archive---------9-----------------------#2022-06-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fda80513873180d839291fc04e03b32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Fb4dym38rhT7R7yxWwAGg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">λ与阶跃函数</figcaption></figure><p id="308e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在五年的时间里，我对无服务器环境中不断变化的业务规则进行了定位。在过去，Lambdas控制着整个领域，包含了我所有的业务规则，我越来越多地看到业务逻辑被分割和分散到外围服务中。AWS Step-functions已经成为一个真正强大的服务，可以取代AWS Lambda的角色。本文探讨了这种新风格架构的利与弊。</p><blockquote class="js"><p id="855e" class="jt ju hi bd jv jw jx jy jz ka kb jr dx translated">让我们把阶跃函数放在我们平台的核心！</p></blockquote></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="6775" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">Lambda到底在不在驾驶座上？</h1><p id="3e4d" class="pw-post-body-paragraph iu iv hi iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr hb bi translated">不久前，我写了一篇名为“<a class="ae lm" rel="noopener" href="/codex/managing-serverless-spaghetti-c2fb1a7db73e">管理无服务器意大利面</a>”的博客。半年后，我想以不同的方式思考其中的含义。在我之前的博客文章中，我写了从lambdas中提取业务规则和配置的缺点，以及您可以做些什么。今天，我想采取不同的视角，拥抱它。如果你有使用阶跃函数的经验，你可以跳过介绍。</p><h2 id="4c7d" class="ln kk hi bd kl lo lp lq kp lr ls lt kt jf lu lv kx jj lw lx lb jn ly lz lf ma bi translated">小步骤功能介绍</h2><p id="e495" class="pw-post-body-paragraph iu iv hi iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr hb bi translated">“步骤功能”已经成为我近年来最喜欢的服务之一。它提供了一种创建流程、可视化和管理系统状态的方法。使用条件句，你可以创建流，甚至循环。它创建了有限状态机，一旦打开，你可以跟踪和追踪它们的执行。更多的解释，你可以阅读它的<a class="ae lm" href="https://aws.amazon.com/step-functions/getting-started/" rel="noopener ugc nofollow" target="_blank"> AWS文档</a>。</p><figure class="mc md me mf fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/9863ecbfa62a32c991f40d82efc79fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tK4RqNLr7naEQcPHS2XBhQ.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">阶跃函数编辑器</figcaption></figure></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="358e" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">您平台的核心功能</h1><p id="3f07" class="pw-post-body-paragraph iu iv hi iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr hb bi translated">我认为step的功能是作为<strong class="iw hj">协调者</strong>或<strong class="iw hj">指挥者</strong>。AWS服务过去是一组不相连的工具，其中我的lambdas包含“粘合代码”来连接这些不同的服务，现在您可以使用step函数作为粘合函数。</p><figure class="mc md me mf fd ij er es paragraph-image"><div class="er es mg"><img src="../Images/db800bd5e8efa05ad96ec2939df6ebbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*r40LBFuRkWxm2YZ_GdJlkA.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">AWS步骤-负责协调的功能</figcaption></figure><p id="fad4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">拥有超过200个集成的step-function现在可以直接进行大量的AWS集成，而无需使用Lambdas。就平台架构而言，我建议切换到原生集成应该是一种深思熟虑的行为。混合和匹配阶跃函数风格将不可避免地导致系统业务规则的不可见性。</p><p id="a22b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在阶跃函数本地交互中，您的Lambdas仍然有一些作用。但我喜欢将它们视为小型公用事业。所以:<strong class="iw hj">业务规则和决策应该剥离出来，迁移到状态机</strong>。剩下的是一组微功能，它们提供了AWS无法比拟的<em class="mh">实用功能</em>。</p><h2 id="da79" class="ln kk hi bd kl lo lp lq kp lr ls lt kt jf lu lv kx jj lw lx lb jn ly lz lf ma bi translated">关于AWS阶跃函数用于本地集成的思考</h2><p id="5ba8" class="pw-post-body-paragraph iu iv hi iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr hb bi translated">在将Lambda代码迁移到阶跃函数之前，您可能需要考虑一些后果和基本原理。</p><h2 id="9bcc" class="ln kk hi bd kl lo lp lq kp lr ls lt kt jf lu lv kx jj lw lx lb jn ly lz lf ma bi translated"><strong class="ak">优点</strong></h2><ul class=""><li id="58b5" class="mi mj hi iw b ix lh jb li jf mk jj ml jn mm jr mn mo mp mq bi translated">如果你投资使用阶跃函数，你可能会节省lambda执行的成本，这取决于它是如何实现的。</li><li id="0af0" class="mi mj hi iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">通过将条件外化到阶跃函数流结构，实现业务逻辑的可见性。</li><li id="2ff9" class="mi mj hi iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">如果你阻止了太多的多样性，这是一个防止λ弹球的好方法。</li></ul><h2 id="78d9" class="ln kk hi bd kl lo lp lq kp lr ls lt kt jf lu lv kx jj lw lx lb jn ly lz lf ma bi translated"><strong class="ak">缺点</strong></h2><ul class=""><li id="6f71" class="mi mj hi iw b ix lh jb li jf mk jj ml jn mm jr mn mo mp mq bi translated">数据处理的成本可能会上升，因为阶跃函数的本机集成可能会导致更复杂的状态机和更多的步骤(因此成本更高)。</li><li id="5428" class="mi mj hi iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">基础架构脚本将主宰应用程序的前景。虽然我喜欢像CDK这样的现代工具，但我认为你的业务规则的可见性并不等同于应用程序级别的编码。</li><li id="e129" class="mi mj hi iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">基础设施项目的代码质量通常会纠缠到堆栈级别，甚至更高。在应用程序中，我们花了几十年的时间来改进解决方案的抽象和隔离。我还没有看到类似的设施来自CDK框架或地形。</li><li id="516b" class="mi mj hi iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">阶跃函数的测试实践并不等同于应用程序级别的众多工具。今天，需要一种集成测试方法来测试状态机执行的复杂性。</li></ul></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="76eb" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">要不要全力以赴AWS阶跃函数？</h1><p id="8338" class="pw-post-body-paragraph iu iv hi iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr hb bi translated">我认为AWS step-functions是一个非常好的服务。使用它通常会给我带来极大的快乐，尤其是在低音量的交互中。总之，我建议将它用于重要的业务逻辑。这样，它包装的价值与成本模型更匹配。对于数百万次执行，这种模式可能会变得过于昂贵。</p><p id="c60e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你需要考虑的最重要的事情是，这将会是一个大滑坡。有人可能会说，向阶跃函数的过渡会让你进入某种低代码领域。改进的<a class="ae lm" href="https://aws.amazon.com/blogs/aws/new-aws-step-functions-workflow-studio-a-low-code-visual-tool-for-building-state-machines/" rel="noopener ugc nofollow" target="_blank">工作室</a> UI提供了一个视觉上吸引人的交互来模拟你的状态机。然而，市场上也有类似的工具(例如Outsystems和Mendix)。那么，您不应该一直使用更成熟的工具吗？最大的区别是与AWS服务的本机集成。这在当前的低代码产品中是无与伦比的。因此，根据你的要求，这可能是你的新的最好的朋友。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="def3" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">阶跃函数或lambda封装了您环境中的大部分业务逻辑吗？请在评论中告诉我！</p></div></div>    
</body>
</html>