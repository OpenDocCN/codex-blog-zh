<html>
<head>
<title>The Dark Art of Building an Enterprise-Grade Mobile App — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建企业级移动应用的黑暗艺术——第1部分</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-dark-art-of-building-an-enterprise-grade-mobile-app-part-1-34ff34387deb?source=collection_archive---------11-----------------------#2021-07-25">https://medium.com/codex/the-dark-art-of-building-an-enterprise-grade-mobile-app-part-1-34ff34387deb?source=collection_archive---------11-----------------------#2021-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/5eaae78bba1f78c39332524ea12f6814.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JHPgd7DhQu4XqgH8OyHFw.jpeg"/></div></div></figure><div class=""/><p id="42d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">移动应用是数字存在的缩影。这意味着你关心你的顾客。这意味着你已经找到了进入他们生活的方式，并且有了一个在个人层面与他们互动的平台。它呼唤以设计为中心的思维，尖端的技术，高度响应的用户界面。支撑这一切的是(很可能)驻留在云中的一套坚实的API。这些系统需要容错、高度安全，并且可以按需扩展。</p><p id="dcd5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它<em class="jo">的意思是</em>你解决了很多工程问题。</p><p id="ac39" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过这篇文章，我打算从一个企业的角度，带您踏上移动应用程序开发的旅程，以及它所带来的多方面的挑战。与此同时，已经注意到将概念分解成简单的字节大小的插图，任何人都可以跟随！</p><p id="ad7f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章是一系列文章中的第一篇，部分是<em class="jo">如何做</em>，部分是<em class="jo">杂志</em>，概述了我过去18个月的移动应用开发之旅。</p><h1 id="009d" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">两个操作系统的故事</h1><p id="cee2" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">在我们直接进入如何构建移动应用的机制之前，让我们先了解一些背景。任何移动应用都需要运行在两大操作系统之一上，即iOS和Android。</p><p id="a5c1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">苹果的软件是专有的，只运行安全的苹果硬件，只有他们制造。另一方面，安卓以开源著称，可以在成千上万的设备上运行。制造商也可以根据他们设备的需求定制操作系统。它也是世界上最受欢迎的操作系统，拥有30亿活跃用户，而苹果只有10亿。眨眼！</p><blockquote class="ks kt ku"><p id="6d3d" class="iq ir jo is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">有<strong class="is hu"> iOS </strong>，却没有一个<strong class="is hu"> <em class="ht"> Android </em> </strong> <em class="ht">。</em>只是口味不同而已。是的，我是吃了苦头才知道的！</p></blockquote><h2 id="786c" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">更深入地了解这些架构</h2><p id="c4ae" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">下面是两个操作系统架构的比较。每个操作系统的最顶层包含了我们接触、交流或互动的框架。每个操作系统的最底层直接位于底层硬件之上，处理底层功能。(想想文件系统、内存、电源、网络等。)</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lm"><img src="../Images/775b9bbfa3fb221edb6cecec55839336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*noBVRm9_-xxqY0Ir3tfk0g.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">iOS与Android平台架构</figcaption></figure><p id="b263" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可能会发现iOS中抽象层次较低。这个故事还有很多，但直觉上，它应该是有意义的。</p><blockquote class="ks kt ku"><p id="eeb3" class="iq ir jo is b it iu iv iw ix iy iz ja kv jc jd je kw jg jh ji kx jk jl jm jn hb bi translated">如果我的软件只在我生产的产品上运行，我要处理的复杂性就会降低很多。</p></blockquote><h2 id="f0fc" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">安全架构</h2><p id="1071" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">让我们更进一步，看看他们的安全架构。虽然iOS和Android都采取了分层的安全方法，但苹果硬件的定义特征是存在一个安全的飞地。(下图中的蓝框)。把它想象成你设备中的一个安全芯片，它有自己的加密固件，没有人可以访问！<em class="jo">不是</em> e <em class="jo"> ven你自己的iOS </em>。进去的东西永远出不来！算是吧。</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lv"><img src="../Images/889603687e55b13373d942fbb8917cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-WuHGTSUwVK1v-mlxYH9g.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">保护Enclave组件。来源:<a class="ae lw" href="https://support.apple.com/en-au/guide/security/sec59b0b31ff/web" rel="noopener ugc nofollow" target="_blank">苹果</a></figcaption></figure><p id="4e83" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Secure Enclave便于保护设备密码、生物识别、Apple Pay和加密密钥。(目前支持椭圆曲线密码，具体来说就是Diffie-Hellman算法。私钥生成并存储在enclave中。你可以在这篇优秀的<a class="ae lw" href="https://darthnull.org/secure-enclave-ecies/" rel="noopener ugc nofollow" target="_blank">博客文章</a>中读到更多。据我们所知，Android设备制造商开始效仿他们自己的secure enclave实现。当我们讨论生物识别技术时，我们将再次讨论这个话题。</p><h2 id="418d" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">应用程序沙箱</h2><p id="d3f9" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">然而，两种操作系统的一个共同主题是应用程序沙箱的概念。每个应用程序都位于其自己的逻辑边界内，以保护应用程序，并只授予最低级别的权限来做它需要的事情。沙盒的底层实现在两种操作系统之间有所不同。</p><p id="79a8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Android使用非常Linux风格的UUID(唯一用户标识)。每个应用程序在操作系统上都有一个UUID，从而确保其完整性(它的工作方式非常类似于Linux操作系统中的用户权限)。一个应用程序存储的文件或数据不能被另一个应用程序访问)。这也是为什么根设备会带来问题，因为流氓应用程序或恶意软件可能会损害应用程序的完整性。在iOS中，沙盒是建立在苹果所谓的<a class="ae lw" href="https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html" rel="noopener ugc nofollow" target="_blank">权利</a>之上的。权限是由应用程序开发人员在其构建的配置中设置的键值对，授予对目标资源的特定权限。例如，查看和共享照片的授权密钥并不能授权应用程序读取另一个应用程序的文件系统或用户的位置。</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lx"><img src="../Images/4ffc1d5938b43e5806ba93fd1e759394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*esXqD_mJqwSzW3IVwGdvMg.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">应用沙盒插图</figcaption></figure><p id="c127" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，我们对移动生态系统的理解应该是这样的。我们将在此基础上继续前进！</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ly"><img src="../Images/2661bd9a97a63cb029b1210461ed1d70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x9NKP7FZ6Cjvdb7H"/></div></div></figure><h1 id="1909" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">选择正确的技术</h1><p id="146e" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们的应用程序应该运行在两个完全不同的平台上。有几种方法可以解决这个问题。</p><h2 id="50c8" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">原生应用</h2><p id="12ac" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们有理由认为，我们需要在两个不同的代码库(完全用不同的语言编写)上构建两个独立的应用程序，它们的外观、感觉和行为都是一样的。我们是对的。这种方法提供了许多独特的优势，如独立的发布周期、对底层安全实现的更高控制、保持最新的操作系统版本升级等等。这也是以运行两个独立团队为代价的。</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lz"><img src="../Images/ecbeca45b1b74f6fe1b2506e00c4ce91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S5NQUZkacrsZDJtP"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">原生应用开发模式</figcaption></figure><h2 id="2fe9" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">跨平台应用</h2><p id="bb84" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">如果我们能开发一个能在两个平台上运行的应用程序会怎么样？我们仍然需要做一些小的调整，但是没关系；我们可以忍受。它将降低成本，使我们可以即时部署的设备多样化，将上市时间最小化，并拥有紧凑的可重用代码(难道开发人员不喜欢这样吗？)</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ma"><img src="../Images/32affff0533779d56398af86bede3768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dKmv6-vveTIR8UOd"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">跨平台应用开发模型</figcaption></figure><p id="e9fb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">市场上有几种平台已经竭尽全力来解决这些问题。选择合适的平台来构建我们的应用程序是一个绝对关键的考虑因素，不可掉以轻心。除非我们用“概念证明”来试水，否则这是一条不归路(或者非常昂贵的一条)。在我看来，没有一个对或错的平台，只有适合组织的平台，它的用户群、预算、人才库、发布节奏、你想成为的最新版本等等。</p><p id="1c00" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面是一个统计数据，概括了过去3年中跨平台框架的流行程度。Flutter已经在2021年挤过react-native。</p><figure class="ln lo lp lq fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mb"><img src="../Images/74bf07d746428b25b807017adc994111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzD7WeeHaCYh3ww40al81Q.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx translated">跨平台应用框架。来源:<a class="ae lw" href="https://www.statista.com/statistics/869224/worldwide-software-developer-working-hours/" rel="noopener ugc nofollow" target="_blank"> Statista </a></figcaption></figure><h1 id="7197" class="jp jq ht bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">React-native案例</h1><p id="ff8a" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们走了自然的路。它符合我们的要求；我们能够快速迭代，并在六个月内与一个由网络工程师组成的团队一起构建应用的核心组件，这对他们来说是移动优先。那么，我们对react-native有什么体验呢？</p><h2 id="004e" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">一个团队，一个代码库</h2><p id="5f6f" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">选择react-native(更广泛地说，跨平台方法)而不是native的最大优势可能是<em class="jo">一个开发团队</em>可以为两个平台构建。这对企业来说是巨大的成本节约；一个人可以争论几乎一半。由于代码库也是共享的，所有的特性都是为我们的客户同时构建、测试和发布的。(这个故事有一些例外，但基本上是成立的。)事实上，我们可以用一个小型工程师团队(不到10人)构建一个企业级应用程序，这是对react-native强大功能的证明。</p><h2 id="044e" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated"><strong class="ak">“开关”和可重用性</strong></h2><p id="531f" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">对于我们这样一个从网络迅速转向移动的团队来说，这是一个显而易见的选择。这似乎是一个有争议的话题，但是对于react开发人员来说，过渡到react-native要容易得多。React-native基于React.js，而react . js又基于Javascript。更好的是，该团队可以在react-native应用程序中重用一些现有的react模块。这同样有助于节省大量时间和成本。</p><h2 id="5d19" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated"><strong class="ak">实验和迭代</strong></h2><p id="b114" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们在斯派克住了好几个月。react-native构建了我们的构建管道，集成了生物识别、联邦API、检测离线模式或与某些本机模块交互，使我们能够在遵循企业要求的标准的同时快速迭代。</p><h2 id="ce72" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated"><strong class="ak">那么本地代码呢？</strong></h2><p id="b13d" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">好了，好戏来了。我们仍然需要编写本地代码，这意味着我们仍然需要本地专业知识。我们很幸运有一些杰出的工程师，他们卷起袖子开始工作，实现了这一目标。本地专业知识可能是一个挑战。但是仍然有大约95%-5%的人支持RN。与原生方法相比，这仍然是一个非常可接受的折衷方案。</p><h2 id="6d12" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">开发社区和第三方支持</h2><p id="b676" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">脸书为解决跨平台开发的问题而构建的React-native是开源的，拥有一个庞大而活跃的开发人员社区，他们积极为之做出贡献。脸书的react-native团队仍在开发核心模块。在它落后的地方，有许多第三方库，这使得生活更容易。但是这就引出了我们的下一个问题。</p><h2 id="8974" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated"><strong class="ak">安全呢？</strong></h2><p id="89f2" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">嗯，还不错。但是我们必须小心。我们必须尽快与Expo库分离。在项目的初始阶段，我们没有在管道中构建代码和漏洞扫描软件，这需要一些返工。我们还进行了精心的笔测试；(黑盒和白盒)并需要进一步修改以修补某些问题。</p><h2 id="031e" class="ky jq ht bd jr kz la lb jv lc ld le jz jb lf lg kd jf lh li kh jj lj lk kl ll bi translated">是不是“一次编写，随处运行？”</h2><p id="dc4e" class="pw-post-body-paragraph iq ir ht is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">不完全是。有时我们会看到不同设备的UI组件不一致。谷歌的Pixel想到很多！对源代码的任何更改都意味着要对我们的设备环境进行全面测试。但是我们发现了这些不一致背后的根本原因，而且这些原因很少。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="2303" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章是一系列文章中的第一篇，这一系列文章的第一部分概述了我过去18个月的移动应用程序开发之旅。</p><p id="6357" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">第1部分:介绍和选择正确的技术</em></p><p id="81c3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lw" rel="noopener" href="/@sundarsingh_2383/the-dark-art-of-building-an-enterprise-grade-mobile-app-part-2-950f1d9e911b">第2部分:解释移动设备特有的挑战</a></p><p id="ab5b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lw" rel="noopener" href="/@sundarsingh_2383/the-dark-art-of-building-an-enterprise-grade-mobile-app-part-3-e24c60ab735d">第三部分:移动和应用安全</a></p><p id="5fbd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae lw" rel="noopener" href="/@sundarsingh_2383/the-dark-art-of-building-an-enterprise-grade-mobile-app-part-4-2ab218e5ad62">第四部分:分析、分布式监控、敏捷软件开发</a></p></div></div>    
</body>
</html>