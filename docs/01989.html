<html>
<head>
<title>Navigating the Etsy API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">导航Etsy API</h1>
<blockquote>原文：<a href="https://medium.com/codex/navigating-the-etsy-api-6f7f3abc739b?source=collection_archive---------8-----------------------#2021-06-20">https://medium.com/codex/navigating-the-etsy-api-6f7f3abc739b?source=collection_archive---------8-----------------------#2021-06-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/11921b12272c83e4f3ace8b07e955d03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yywrVse2Flaus3rI"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://unsplash.com/@fatosi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法托斯Bytyqi </a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="9b78" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我最近完成了一个需要使用Etsy API的项目，并且非常兴奋地发现了这样一个记录良好且有用的API。希望会有更多的项目使用这个单一来源的广泛数据。</p><p id="b752" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们了解一下在python中使用API的基本知识。为了从API导入数据，我们将使用GET请求和API URL。我喜欢将GET请求的参数作为独立变量。</p><p id="47ff" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们将检查响应状态代码，以确保请求是…嗯，正确请求的。除了200状态代码之外的任何代码都需要进行一些调查。完整的状态代码列表可以在<a class="ae iu" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="864f" class="kc kd hi jy b fi ke kf l kg kh">url = 'https://openapi.etsy.com/v2/listings/active?'<br/>params = {'api_key': 'YOUR API KEY'}</span><span id="0c2c" class="kc kd hi jy b fi ki kf l kg kh">response = requests.get(url = url, params = params)</span><span id="84ed" class="kc kd hi jy b fi ki kf l kg kh">response.status_code</span></pre><p id="794b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Etsy的响应是JSON格式的，所以要查看数据，我们需要使用。json()方法。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5313" class="kc kd hi jy b fi ke kf l kg kh">etsy_data = response.json()</span></pre><p id="d21f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">太好了！在更具体地谈论Etsy的API之前，这些是我们需要了解的基础知识——所以让我们开始吧！</p><p id="1c73" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在直接进入API之前，一定要先阅读文档。Etsy的很全面，很有帮助。基本文档<a class="ae iu" href="https://www.etsy.com/developers/documentation/getting_started/api_basics" rel="noopener ugc nofollow" target="_blank">链接于此</a>。这包括数据类型、参数选项、获取API键的指令等等。在这个页面的顶部，所有API的引用都是链接的。这些引用允许用户提取某些信息。</p><p id="cd26" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设我们想要查看杯垫的当前产品列表，我们将使用带参数的<a class="ae iu" href="https://www.etsy.com/developers/documentation/reference/listing" rel="noopener ugc nofollow" target="_blank">“列表”引用</a>来缩小杯垫的搜索范围。每个引用的文档中都包含可用的字段，我们将使用tags字段作为参数来查找杯垫，并将返回的列表限制为5个。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="50f5" class="kc kd hi jy b fi ke kf l kg kh">params = {'api_key': 'YOUR API KEY', 'tags': ['coaster'], 'limit': 5}</span><span id="0eab" class="kc kd hi jy b fi ki kf l kg kh">response = requests.get(url = url, params = params)<br/>etsy_listings = reponse.json()<br/>etsy_listings.keys()</span><span id="ac6b" class="kc kd hi jy b fi ki kf l kg kh"><em class="kj">dict_keys(['count', 'results', 'params', 'type', 'pagination'])</em></span></pre><p id="f159" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们看到我们有一个包含计数、结果、参数、类型和分页键的字典。请注意，调用“结果”会给我们留下一个列表。对列表进行索引将为我们获得每个列表的字典。让我们来看看。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="8df5" class="kc kd hi jy b fi ke kf l kg kh">results = etsy_listings['results']<br/>first_listing = results[0]<br/>first_listing.keys()</span><span id="bccf" class="kc kd hi jy b fi ki kf l kg kh"><em class="kj">dict_keys(['listing_id', 'state', 'user_id', 'category_id', 'title', 'description', 'creation_tsz', 'ending_tsz', 'original_creation_tsz', 'last_modified_tsz', 'price', 'currency_code', 'quantity', 'sku', 'tags', 'materials', 'shop_section_id', 'featured_rank', 'state_tsz', 'url', 'views', 'num_favorers', 'shipping_template_id', 'processing_min', 'processing_max', 'who_made', 'is_supply', 'when_made', 'item_weight', 'item_weight_unit', 'item_length', 'item_width', 'item_height', 'item_dimensions_unit', 'is_private', 'recipient', 'occasion', 'style', 'non_taxable', 'is_customizable', 'is_digital', 'file_data', 'should_auto_renew', 'language', 'has_variations', 'taxonomy_id', 'taxonomy_path', 'used_manufacturer', 'is_vintage'])</em></span></pre><p id="846e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以看到我们的结果包含了大量的信息，从产品的价格到是否是古董。从这里开始，世界就是你的了！我喜欢选择我想要使用的键，并将它们放入数据框中，以便于清理和可视化——但是选项是无穷无尽的。</p><p id="2ddf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这篇简短的博客只涵盖了Etsy的许多参考资料中的一个，不要忘记访问他们的API文档并看看其他的。它们包括图像、用户资料和地址，以及支付和运输信息。</p><p id="6833" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">感谢阅读！希望这给了你一个很好的想法，如何轻松地通过一个API。</p></div></div>    
</body>
</html>