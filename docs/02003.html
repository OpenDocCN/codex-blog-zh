<html>
<head>
<title>Creating your own Programming Language with Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python创建自己的编程语言。</h1>
<blockquote>原文：<a href="https://medium.com/codex/creating-your-own-programming-language-with-python-895c4b26c704?source=collection_archive---------3-----------------------#2021-06-22">https://medium.com/codex/creating-your-own-programming-language-with-python-895c4b26c704?source=collection_archive---------3-----------------------#2021-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b704aa2684207742147b0b0f3116120a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JWdEPMqrMw0RDWxc"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Radowan Nakif Rehan 在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3790" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以你想创建自己的编程语言，却不知道从何下手？下面是我如何为父亲节创造自己的编程语言，名为<a class="ae iu" href="https://github.com/Aadit-Ambadkar/TEN-Programming-Language" rel="noopener ugc nofollow" target="_blank"> TEN </a>。</p><p id="704d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">附:你也可以！</p><p id="4c85" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要开始，你需要确保你已经安装了Python。您可能还想将其更新到Python 3.X。我会推荐3.9，因为这是本文发布时的最新版本。</p><p id="a81b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要安装Python，只需进入<a class="ae iu" href="http://www.python.org," rel="noopener ugc nofollow" target="_blank">www.python.org，</a>打开导航栏中的下载部分，点击Python 3.9.5按钮:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ju"><img src="../Images/a63996ae4409ed08ea0a15676be73a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fZIRytyl5BwX3-M62nxxwg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">去Python的网站(截图过时)</figcaption></figure><p id="1fcd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行安装程序，并遵循弹出的步骤。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="b9a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们需要安装一些python包，这将允许我们把python文件转换成exe文件。这些步骤取自<a class="ae iu" href="https://stackoverflow.com/a/44433442" rel="noopener ugc nofollow" target="_blank">这个</a>堆栈溢出答案。</p><p id="44cf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">打开一个新的命令提示符窗口，并键入以下命令:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="6112" class="kl km hi kh b fi kn ko l kp kq">pip install cx_Freez</span></pre><p id="cce6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，键入以下命令:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="b4c2" class="kl km hi kh b fi kn ko l kp kq">pip install idna</span></pre><p id="f0ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这两个库是转换所需要的。将文件复制到。exe文件。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="c8ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">既然已经解决了这个问题，我们需要开始规划我们的定制语言。为了简单起见，我们将构建一种基于堆栈的编程语言。</p><p id="8306" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">基于堆栈的编程语言是一种在堆栈上运行的语言。首先，输入一些值，然后对这些值进行运算。例如，要将两个数字相加，您需要键入以下代码:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="4568" class="kl km hi kh b fi kn ko l kp kq">number1 number2 +</span></pre><p id="1bd6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du kr ks kt kh b">number1</code>将第一个数字添加到堆栈，然后<code class="du kr ks kt kh b">number2</code>将第二个数字添加到堆栈。所以，我们的堆栈现在包含了<code class="du kr ks kt kh b">number1</code>和<code class="du kr ks kt kh b">number2</code>。然后，通过键入<code class="du kr ks kt kh b">+</code>，我们将这两个数字添加到堆栈中。所以，这样做的最终结果是堆栈中<code class="du kr ks kt kh b">number1+number2</code>的值。</p><p id="0d47" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">顾名思义，整个语言运行在一个堆栈上，所以我们需要首先定义一个包含我们的堆栈的变量。为此，从<code class="du kr ks kt kh b">collections</code>库导入<code class="du kr ks kt kh b">deque</code>(发音为deck)包:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="fb39" class="kl km hi kh b fi kn ko l kp kq">from collections import deque<br/>q = deque()</span></pre><p id="abba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步是——好吧，现在你做不了什么，因为你还没有真正考虑过你的语言的语法。真正的下一步是远离Python，打开一个黑色文本文件。您需要开始创建您的编程语言的语法。</p><p id="a14b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">想想你希望它是什么样子。你将如何对数字进行基本运算？你将如何向堆栈中添加项目？你如何定义字符串？</p><p id="1ed1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想得够久，你应该至少有10个不同的命令，不包括基本的数字运算。否则，你基本上只是在建造一个计算器。</p></div><div class="ab cl jz ka gp kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hb hc hd he hf"><p id="c6af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你已经想好了语法(相信我，你还没有完全想好，因为你可以打赌语法会随着你开发这种语言的时间而改变)，我们可以开始真正的python工作了。</p><p id="97e5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了清楚起见，让我们称我们将要创建的语言为CUSTOM。</p><p id="6789" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们需要打开包含自定义脚本的文件。但是，在我们打开文件之前，我们需要文件名。如果你曾经编译过python脚本，你知道你输入的命令是<code class="du kr ks kt kh b">python &lt;filename&gt;.py</code>。我们实际做的是将字符串<code class="du kr ks kt kh b">&lt;filename.py&gt;</code>传递给python.exe，然后python.exe编译这个文件。Python实际上允许我们编译带有附加参数的python文件:<code class="du kr ks kt kh b">python &lt;filename&gt;.py arg1 arg2 …</code>。arg1、arg2、…然后被传递到我们的python脚本中，该脚本可以使用这些参数。为了访问这些参数，我们使用<code class="du kr ks kt kh b">sys.argv</code>。<code class="du kr ks kt kh b">sys.argv</code>是包含每个附加参数的列表。目前，我们将只传入一个参数，即自定义脚本的文件名:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="254c" class="kl km hi kh b fi kn ko l kp kq">from collections import deque</span><span id="bab9" class="kl km hi kh b fi ku ko l kp kq">filename = sys.argv[1]<br/>q = deque()</span></pre><p id="d70c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我们将文件的所有内容读取到一个名为<code class="du kr ks kt kh b">contents</code>的变量中。</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="af12" class="kl km hi kh b fi kn ko l kp kq">import sys<br/>from collections import deque</span><span id="b5b8" class="kl km hi kh b fi ku ko l kp kq">filename = sys.argv[1]<br/>file = open(filename, 'r')<br/>contents = file.read() # Reads the entire file as a single string</span><span id="8ae2" class="kl km hi kh b fi ku ko l kp kq">q = deque()</span></pre><p id="a063" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我假设你的编程语言不会有变量，因为变量访问可能是一个真正的痛苦。您可以查看我的TEN Github页面(上面有链接),看看我是如何管理变量赋值和访问的。</p><p id="1f8b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，几乎所有的变量都完成了。现在我们需要逐个字符地迭代代码。我让我的每个命令都是一个字符，这样我就可以一个字符一个字符地迭代。您可以使用一个字符串标记器，但实际上并不需要。(另外，制作一种模糊的编程语言非常流行)</p><p id="cc25" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，迭代每个字符的代码:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="4280" class="kl km hi kh b fi kn ko l kp kq">i = 0<br/>while (i &lt; len(contents):<br/>    # Some code here</span></pre><p id="3219" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们从简单的开始，检查用户是否正在定义一个字符串。假设用户用<code class="du kr ks kt kh b">“</code>打开字符串，用<code class="du kr ks kt kh b">‘</code>关闭。然后，我们将编写以下内容:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="ad60" class="kl km hi kh b fi kn ko l kp kq">if (contents[i] == "\""):<br/>    j = i<br/>    while (contents[j] != "\'"):<br/>        j += 1<br/>    q.appendleft(contents[i+1:j])<br/>    i = j</span></pre><p id="0a1c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以像这样的一些基本的东西会让代码变得更好！</p><p id="8dcc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是一个示例，它只允许用户添加字符串并打印它们。使用与上面相同的字符串定义，并让<code class="du kr ks kt kh b">;</code>成为打印堆栈顶部的命令:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="130d" class="kl km hi kh b fi kn ko l kp kq">import sys<br/>from collections import deque</span><span id="3a54" class="kl km hi kh b fi ku ko l kp kq">filename = sys.argv[1]<br/>file = open(filename, "r")<br/>contents = file.read()</span><span id="84e8" class="kl km hi kh b fi ku ko l kp kq">i = 0<br/>while i &lt; len(contents):<br/>    if (contents[i] == "\""):<br/>        j = i<br/>        while (contents[j] != "\'"):<br/>            j += 1<br/>        q.appendleft(contents[i+1:j])<br/>        i = j<br/>    elif (contents[i] == ";"):<br/>        print(q[0])<br/>    i+=1</span></pre><p id="479e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样！剧本写好了！现在，我们只需要把它变成一个EXE文件。为此，创建另一个python文件，并将其命名为<code class="du kr ks kt kh b">setup.py</code>。在该文件中，粘贴以下代码:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="d44b" class="kl km hi kh b fi kn ko l kp kq">from cx_Freeze import setup, Executable</span><span id="6441" class="kl km hi kh b fi ku ko l kp kq">base = None</span><span id="aa51" class="kl km hi kh b fi ku ko l kp kq">executables = [Executable("CUSTOM.py", base=base)]</span><span id="abb4" class="kl km hi kh b fi ku ko l kp kq">packages = ["idna"]<br/>options = {<br/>    'build_exe': {<br/>        'packages':packages,<br/>    },<br/>}<br/>setup(<br/>    name = "CUSTOM",<br/>    options = options,<br/>    version = "0.2",<br/>    description = '',<br/>    executables = executables<br/>)</span></pre><p id="c2e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">不要忘记用python文件的名称替换CUSTOM。就这样跑<code class="du kr ks kt kh b">setup.py</code>:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="1823" class="kl km hi kh b fi kn ko l kp kq">python setup.py build</span></pre><p id="038e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">就是这样！该文件将保存在构建文件夹中。确保另一个文件夹(lib)和python3.dll，python3X.dll(X是你的版本)和实际的exe文件在同一个目录下。</p><p id="d266" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，用以下内容创建一个文本文件:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="e70e" class="kl km hi kh b fi kn ko l kp kq">"Hello World!';</span></pre><p id="37cd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用以下命令运行它:</p><pre class="jv jw jx jy fd kg kh ki kj aw kk bi"><span id="8e7f" class="kl km hi kh b fi kn ko l kp kq">CUSTOM sample.txt</span></pre><p id="46dd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">还有，“你好，世界！”应该输出！如果你愿意，可以随意在脚本中添加更多内容。如前所述，你可以在我的GitHub中看到我的作品样本。</p></div></div>    
</body>
</html>