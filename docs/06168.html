<html>
<head>
<title>ReactJS &amp; GraphQL: Full Stack Real Estate Web App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ReactJS &amp; GraphQL:全栈房地产Web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/codex/reactjs-graphql-full-stack-real-estate-web-app-98b59fddc7a6?source=collection_archive---------5-----------------------#2022-04-11">https://medium.com/codex/reactjs-graphql-full-stack-real-estate-web-app-98b59fddc7a6?source=collection_archive---------5-----------------------#2022-04-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/59653f8c20bfa6619ee03e3539c319a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wkepD8HojC0WL1YIsVJFFg.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><strong class="bd iu">源代码:</strong><a class="ae iv" href="https://github.com/lwoluke/React-RealEstate-FullStack" rel="noopener ugc nofollow" target="_blank"><strong class="bd iu">https://github.com/lwoluke/React-RealEstate-FullStack</strong></a></figcaption></figure><h2 id="d714" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">背景</h2><p id="a91e" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn hb bi translated">在完成我的房地产网站的第一部分<a class="ae iv" rel="noopener" href="/@luke_o/reactjs-real-estate-website-part-1-47f47fd7d678">后，我意识到在现有的网站上有很多我想改变的东西。虽然我真的很喜欢一些功能，如英雄图像和导航条，但我注意到我构建网站的方式无法很好地扩展。这是因为在我的设计中，每个页面都有一个单独的房子，并且需要大量的上下滚动来一个接一个地查看房子。出于这个原因，我决定放弃我以前所做的大部分事情，但是保留我真正喜欢的网站的特性。</a></p><p id="8ab6" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">我在构建完整网站时的主要策略是回到起点，在我前进的过程中改变网站的各个部分，并添加新的功能。</p><h2 id="5e8e" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">项目:前端</h2><p id="dcb2" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn hb bi translated">在完成我的项目的第1部分后，我发现<a class="ae iv" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">反应状态挂钩</a>是一个令人困惑的概念。我想确定它的用途，以及如何在网站的其他地方更有效地使用它。根据React文档，钩子最显著的优点是允许使用状态。这指的是React用来表示组件当前状态信息的普通JavaScript对象，它由组件本身管理。除此之外，可以用钩子代替写类。在函数组件内部，我们无法使用<code class="du kt ku kv kw b">this.state</code> <em class="kx">。相反，我们可以在组件中直接调用<code class="du kt ku kv kw b">useState</code>，它提供了与类中的<code class="du kt ku kv kw b">this.state</code> <em class="kx"> </em>完全相同的功能。调用<code class="du kt ku kv kw b">useState</code>声明一个状态变量。下面是我从React文档中找到的一个例子。</em></p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="a174" class="iw ix hi kw b fi lg lh l li lj"><strong class="kw hj">// Using classes</strong><br/>class Example extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      count: 0<br/>    };<br/>  }</span><span id="1716" class="iw ix hi kw b fi lk lh l li lj">render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;p&gt;You clicked {this.state.count} times&lt;/p&gt;<br/>        &lt;button onClick={() =&gt; this.setState({ count: this.state.count + 1 })}&gt;<br/>          Click me<br/>        &lt;/button&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="f049" class="iw ix hi kw b fi lk lh l li lj"><strong class="kw hj">//Using state hook<br/></strong>import React, { useState } from 'react';</span><span id="07f3" class="iw ix hi kw b fi lk lh l li lj">function Example() {<br/>  // Declare a new state variable, which we'll call "count"<br/>  const [count, setCount] = useState(0);</span><span id="2c46" class="iw ix hi kw b fi lk lh l li lj">return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;You clicked {count} times&lt;/p&gt;<br/>      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;<br/>        Click me<br/>      &lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="de32" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">在这个例子中，我想要指定计数的初始状态，并且每次递增1。当<code class="du kt ku kv kw b">useState</code>被返回时，它保存组件的当前状态，<code class="du kt ku kv kw b"><em class="kx">count</em></code>和更新它的<code class="du kt ku kv kw b">setCount</code>函数。</p><p id="f182" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">我在创建前端时最大的障碍是我在使用相对文件路径时一直有问题。出于某种原因，这并没有给我这个项目的第一部分带来太大的问题。然而，有这么多的文件和目录，它变得非常混乱，做进口。如果我想重新组织我的文件结构，我必须不断地修改相对路径。显然，这是一个<a class="ae iv" href="https://stackoverflow.com/questions/41993461/import-react-components-with-absolute-path" rel="noopener ugc nofollow" target="_blank">非常普遍的问题</a>，许多其他与React一起工作的人都面临着这个问题。我发现如果我想使用我最熟悉的绝对路径，我需要在根目录中创建一个<code class="du kt ku kv kw b">jsconfig.json</code>文件。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="55fd" class="iw ix hi kw b fi lg lh l li lj">{<br/>    "compilerOptions": {<br/>        "baseUrl": "src"<br/>    }<br/>}</span></pre><p id="82dc" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">这意味着除了能够使用相对路径导入之外，我现在可以从src目录开始使用绝对路径导入文件。下面是我想将一个图像文件导入到我的<code class="du kt ku kv kw b">Section1.js</code>文件中的例子。如您所见，随着项目规模的增大，管理您的文件肯定会变得更加困难。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="9673" class="iw ix hi kw b fi lg lh l li lj"><strong class="kw hj">//Old method using relative path from root directory</strong><br/>import building6 from "../../../../assets/building6.jpg";</span><span id="2ed4" class="iw ix hi kw b fi lk lh l li lj"><strong class="kw hj">//New method using src as the absolute path</strong><br/>import building6 from "assets/building6.jpg";</span></pre><p id="d5c5" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">另一种让我困惑的React语法是<a class="ae iv" href="https://www.w3schools.com/react/react_events.asp" rel="noopener ugc nofollow" target="_blank">事件</a>。这些是React可以根据用户的操作执行的操作。下面是一个例子:</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="8110" class="iw ix hi kw b fi lg lh l li lj"><strong class="kw hj">// Creates input box  </strong><br/>&lt;input <br/>    type="text" <br/>    placeholder="Enter a Location"<br/>    onChange={(e) =&gt; setLocation(e.target.value)}    <strong class="kw hj">// Event line</strong><br/>/&gt;</span></pre><p id="2579" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated"><code class="du kt ku kv kw b">e.target</code>代表触发事件的元素。在这种情况下，用户将为当前设置为占位符的位置输入一个字符串值，然后<code class="du kt ku kv kw b">e.target.value</code>获取元素的值，并将事件更新为该值。</p><p id="d4e2" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">在创建了我的房地产网站的第一部分后，我意识到我想重新设计我创建的大部分内容。我唯一保持不变的两个方面是导航条和英雄图像滑块。对于网站的下一部分，我决定在网站中加入搜索功能。我尝试在文字后面放一张图片。我知道，为了让它更容易阅读，我需要以某种方式淡出图像。为此，我没有直接改变图像的样式，而是改变了标语本身的背景颜色。</p><p id="82f1" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated"><strong class="jv hj">搜索菜单</strong></p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/0e1b0552f0b8c9c365db64afd5988a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Aa_zuHejb6Vke3jGiP5d8g.gif"/></div></div></figure><p id="4605" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">想起上次学到的东西，我决定创建一个可以在web应用程序的不同区域重用的按钮。为了做到这一点，我发现了一个更聪明的方法来添加数据到一个按钮。除此之外，我为按钮创建了默认规范，这使得测试实现变得更加容易。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="e346" class="iw ix hi kw b fi lg lh l li lj">import { Link } from "react-router-dom";<br/>import { BsArrowRight } from "react-icons/bs";<br/>import styles from "./Buttons.module.scss"</span><span id="5b9e" class="iw ix hi kw b fi lk lh l li lj">const ArrowButton = ({ text, path }) =&gt; {<br/>    return(<br/>    &lt;div className={styles.btn}&gt;<br/>      &lt;Link to={`${path}`}&gt;{text}&lt;/Link&gt;<br/>      &lt;BsArrowRight /&gt;<br/>    &lt;/div&gt;);<br/>};</span><span id="b35b" class="iw ix hi kw b fi lk lh l li lj">ArrowButton.defaultProps = {<br/>  text: "Test",<br/>  path: "/",<br/>};<br/> <br/>export { ArrowButton };</span></pre><p id="be0a" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">对于web应用程序的下一部分，我决定添加访问特定属性类型的方法。除了能够使用下拉菜单和导航条之外，我认为它对web应用程序的用户了解去哪里访问某些类型的属性非常有帮助。我在这里使用的按钮是我之前演示过如何创建的。由于改进了创建按钮的方法，将它添加到JavaScript文件中要容易得多。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="43f9" class="iw ix hi kw b fi lg lh l li lj"><strong class="kw hj">{/* BUY HOMES SECTION */}</strong><br/>&lt;div className={styles.buy}&gt;<br/>  &lt;h3&gt;Buy a home&lt;/h3&gt;<br/>    &lt;p&gt;<br/>      Find the most beautiful homes, all of which feature <br/>      an immersive photographic experience. You'll see <br/>      properties that are impossible to find anywhere else.<br/>    &lt;/p&gt;<br/>  &lt;ArrowButton text={"Search Houses"} path="buy" /&gt;<br/>&lt;/div&gt;</span></pre><p id="8da0" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated"><strong class="jv hj">按物业类型查找</strong></p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/254570f763ac63976c71bd8164c5e864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MiFZuKl84qfk7LHgNpvaLw.gif"/></div></div></figure><p id="cecd" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">对于web应用程序的下一部分，我想添加用户可以刷过的特色房屋。这种功能被称为<a class="ae iv" href="https://www.mockplus.com/blog/post/website-carousel" rel="noopener ugc nofollow" target="_blank">转盘</a>，用于在单个空间中显示许多图像。通过鼓励用户关注web应用程序最重要的方面，这提高了视觉吸引力。对于carousel，我决定使用<a class="ae iv" href="https://swiperjs.com/" rel="noopener ugc nofollow" target="_blank"> Swiper </a>，这是一个现代的触摸滑块，用于在移动设备上查看web应用程序。在<code class="du kt ku kv kw b">Carousel</code>组件中，幻灯片包含每个<code class="du kt ku kv kw b">children</code>的属性，它们是转盘的单个幻灯片组件。除了滑动浏览之外，<code class="du kt ku kv kw b">Pagination</code>还能让用户点击进入不同的图片。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="5550" class="iw ix hi kw b fi lg lh l li lj">const Carousel = ({ children, slides }) =&gt; {<br/>  return (<br/>    &lt;Swiper<br/>    modules={[Pagination]}<br/>    spaceBetween={50}<br/>    sliderPerView={slides}<br/>    pagination={{ clickable: true }}<br/>    &gt;<br/>      {children} <br/>      <strong class="kw hj">{/* PAGINATION MARGIN */}</strong><br/>      &lt;div style={{ marginTop: "70px" }}&gt;&lt;/div&gt;<br/>    &lt;/Swiper&gt;<br/>  );<br/>};</span><span id="5c48" class="iw ix hi kw b fi lk lh l li lj">Carousel.defaultProps = {<br/>  slides: "auto",<br/>};</span></pre><p id="bff5" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">接下来，我创建了card组件，它代表了carousel中可以滑动的元素。在后端开发完成之前，每个卡组件都将拥有相同的默认图像和元数据，这是我使用JSON传入的。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="7254" class="iw ix hi kw b fi lg lh l li lj"><strong class="kw hj">//default Props</strong><br/>Card.defaultProps = {<br/>  info: {<br/>    id: undefined,<br/>    imageSource: placeholder,<br/>    category: "Buy",<br/>    city: "Default City",<br/>    neighborhood: "Default Neighborhood",<br/>    street: "Default Street",<br/>    rooms: 6,<br/>    bedrooms: 3,<br/>    bathrooms: 2,<br/>    shortAddress: "Default",<br/>    price: 325000,<br/>    rent: 0,<br/>  },<br/>  showInfo: {<br/>    price: true,<br/>    rent: false,<br/>  },<br/>  secondClass: "undefined",<br/>};</span></pre><p id="c449" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated"><strong class="jv hj">带有卡片组件的传送带</strong></p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/522975bbc6fb714dcb98fc690b973e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1pO4pr7dHHG3TX_ExBeM9w.gif"/></div></div></figure><p id="35b7" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">我发现，在弄清楚web应用程序的前面部分之后，实现接下来的两个部分(关于业务的跟踪记录和从哪里开始)非常简单。我最喜欢的是在文字后面交错放置两张图片，我觉得这看起来很酷，而且制作起来非常简单。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="a6dd" class="iw ix hi kw b fi lg lh l li lj">.image_container_1 {<br/>    position: relative;<br/>    z-index: -2;<br/>    margin-right: 1.5rem;<br/>    display: flex;<br/>    align-items: flex-end;<br/>    img {<br/>        width: 500px;<br/>        height: 450px;<br/>        object-fit: cover;<br/>        <a class="ae iv" href="http://twitter.com/media" rel="noopener ugc nofollow" target="_blank">@media</a> screen and (max-width: 1100px) {<br/>             width: 400px;<br/>        }<br/>    }<br/>}</span><span id="dec8" class="iw ix hi kw b fi lk lh l li lj">.image_container_2 {<br/>    position: relative;<br/>    display: flex;<br/>    align-items: flex-end;<br/>    z-index: -2;<br/>    img {<br/>        width: 40vw;<br/>        height: 500px;<br/>        object-fit: cover;<br/>    }<br/>}</span></pre><p id="179a" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">将图片设置为<code class="du kt ku kv kw b">flex-end</code> <a class="ae iv" href="https://cssreference.io/property/align-items/" rel="noopener ugc nofollow" target="_blank">使其在底部</a>对齐，这样当我设置不同的高度并设置边距时，结果如下:</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lm"><img src="../Images/b2058212e8663be864ee6c54f2ac0728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-6BlEwpC8GwXYP96DlxMNg.png"/></div></div></figure><p id="f7e1" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">当创建关于公司信息的页脚时，我使用了React图标。这里有一个名为<a class="ae iv" href="https://react-icons.github.io/react-icons/icons?name=ai" rel="noopener ugc nofollow" target="_blank"> AI </a>的子目录，里面有各种公司的图标，所以我用它们来代表UPST8帝国所在的社交媒体平台。</p><p id="cb9f" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">前端现在完成了！为了创建搜索、购买和租赁页面，我将通过从后端获取数据来使用GraphQL。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/d9e1c2cab3711d7c4f9812ceb7999861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gMrslPcAgrQD7y5HptjwnA.gif"/></div></div></figure><h2 id="dd6c" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">项目:后端</h2><p id="5e2f" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn hb bi translated">虽然我已经使用REST创建了我的<a class="ae iv" rel="noopener" href="/codex/web-app-development-java-spring-postgres-rest-api-3c302e28d571"> Java Spring和PostGres API </a>项目，但我想尝试一些不同的东西。最近我听说了GraphQL，这是一种开源的数据查询和操作语言，作为REST APIs的潜在替代者<a class="ae iv" href="https://graphcms.com/blog/graphql-vs-rest-apis" rel="noopener ugc nofollow" target="_blank">，它已经获得了越来越多的关注。经过研究，我发现这并不适用于所有情况，但是在某些情况下，用GraphQL APIs代替REST APIs可能是有利的。GraphQL有多种脱颖而出的方式:</a></p><ul class=""><li id="773e" class="ln lo hi jv b jw ko ka kp jg lp jk lq jo lr kn ls lt lu lv bi translated">客户端可以从服务器获取所需的精确资源</li><li id="6d50" class="ln lo hi jv b jw lw ka lx jg ly jk lz jo ma kn ls lt lu lv bi translated">自动验证和类型检查</li><li id="c363" class="ln lo hi jv b jw lw ka lx jg ly jk lz jo ma kn ls lt lu lv bi translated">更快的性能和开发速度</li><li id="0751" class="ln lo hi jv b jw lw ka lx jg ly jk lz jo ma kn ls lt lu lv bi translated">轻松汇总各种来源的数据</li></ul><p id="8b16" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">如果你想了解更多关于GraphQL的知识，我建议你先看看这个简短的解释视频。</p><figure class="ky kz la lb fd ij"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="c1be" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">为了使用GraphQL创建后端，我决定使用Strapi。根据这篇文章:</p><blockquote class="md me mf"><p id="4f10" class="jt ju kx jv b jw ko jy jz ka kp kc kd mg kq kf kg mh kr ki kj mi ks kl km kn hb bi translated">Strapi 是一个开源的无头CMS，用于构建用JavaScript编写的快速且易于管理的api。它使开发人员能够使用漂亮的用户界面轻松制作灵活的API结构。</p><p id="2482" class="jt ju kx jv b jw ko jy jz ka kp kc kd mg kq kf kg mh kr ki kj mi ks kl km kn hb bi translated">Strapi可以用于各种数据库，包括MongoDB、PostgreSQL等。</p></blockquote><p id="e3e1" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">CMS指的是内容管理系统，它是一种用于创建、编辑和管理网站的软件。当涉及到那些<a class="ae iv" href="https://www.sanity.io/blog/headless-cms-explained" rel="noopener ugc nofollow" target="_blank">无头</a>的内容时，这意味着它不是将你的内容链接到一个网页，而是通过一个API将内容作为数据提供。这种类型的CMS的价值在于您可以选择内容发送到的头部(输出)。虽然我以前从未使用过这样的东西，但我认为尝试这个项目会很有趣。</p><p id="1ebc" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">接下来，我运行安装脚本<code class="du kt ku kv kw b">npx create-strapi-app@latest Back-End --quickstart</code>，后端是我的项目名称。创建Strapi帐户后，我可以开始为我的web应用程序的内容构建数据架构。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mj"><img src="../Images/6a4c8e50056f46939b0c8e5824b2fe0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GtIaryquv-aRe8raZNfUQw.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">默认内容选项</figcaption></figure><p id="b547" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">与此同时，我需要使用<code class="du kt ku kv kw b">npm run strapi install graphql</code>导航到我刚刚创建的后端文件夹来安装GraphQL。现在我已经拥有了开始开发所需的一切，可以运行<code class="du kt ku kv kw b">npm run develop</code>了。</p><p id="f5b9" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">在Strapi中，我为房子、位置、类别和用户创建了集合类型。很快，我开始真正喜欢上使用Strapi，因为它的UX/用户界面是如此的简单而吸引人。以下是创建集合类型的一些示例:</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mk"><img src="../Images/84fc829d0fcdf355a9913de6cd232699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVA8t5R5L0r2uj7hkyR78w.png"/></div></div></figure><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/8fa63f8eac115c2a085261aaa058ff28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhjQp3zK2X_1HjnmYLJLTw.png"/></div></div></figure><p id="a4fc" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">在添加并保存这些内容之后，会自动生成必要的http请求，这会更新后端。现在，我能够从我以前创建的每个集合中创建条目。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/4cb6d97161368ecc264823ebdf01721f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMlhrDoJoKZMJ847gIFPVA.png"/></div></div></figure><p id="0e69" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">一旦创建了一些条目，我就可以运行查询来访问我想要的特定信息。这是通过在Strapi中修改权限后在web浏览器中键入<code class="du kt ku kv kw b">localhost:1337/graphql</code>来完成的。</p><h2 id="1954" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">查询测试条目</h2><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/4c27ca66a26c266b1d5f82edd2cb066c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qt11VutV-UVjEQKbbAHdxQ.gif"/></div></div></figure><p id="86f9" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">为了让来自Strapi的条目出现在web应用程序中，我需要使用<a class="ae iv" href="https://github.com/apollographql/apollo-client" rel="noopener ugc nofollow" target="_blank"> Apollo </a>。这是一个缓存GraphQL客户端，能够与其他框架中的React集成。通过用Apollo构建UI组件，我可以通过GraphQL获取、缓存和修改数据。Apollo的神奇之处在于，当我使用它时，它会自动更新我的web应用程序的UI。为了安装，我在导航到前端目录后输入命令<code class="du kt ku kv kw b">npm i graphql @apollo/client</code>。之后，我在我的<code class="du kt ku kv kw b">App.js</code>文件中创建了Apollo客户端。</p><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="018c" class="iw ix hi kw b fi lg lh l li lj">import "./App.scss";<br/>import { Routes, Route } from "react-router-dom";<br/>import Home from "./components/Pages/Home/Home";<br/>import { ApolloClient, InMemoryCache, ApolloProvider } from "@apollo/client";</span><span id="f40c" class="iw ix hi kw b fi lk lh l li lj">const client = new ApolloClient({<br/>  uri : "http://localhost1337/graphql:",<br/>  cache: new InMemoryCache(),<br/>})</span><span id="6013" class="iw ix hi kw b fi lk lh l li lj">function App() {<br/>  return (<br/>    &lt;ApolloProvider client={client}&gt;<br/>      &lt;div className="App"&gt;<br/>        &lt;Routes&gt;<br/>          &lt;Route path="/" element={&lt;Home /&gt;} /&gt;<br/>        &lt;/Routes&gt;<br/>      &lt;/div&gt;<br/>    &lt;/ApolloProvider&gt;<br/>  );<br/>}</span><span id="f52b" class="iw ix hi kw b fi lk lh l li lj">export default App;</span></pre><p id="6bb4" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">接下来，我想使用GraphQL和Apollo运行一个查询来更新featured homes部分。以前，我使用我标记为默认的同一张卡来测试转盘是否正常工作。当将这个查询添加到React中时，我一直得到“<a class="ae iv" href="https://graphcms.com/docs/api-reference/basics/errors#400-bad-request" rel="noopener ugc nofollow" target="_blank"> 400:错误请求</a>”错误。在这上面花了很长时间，我意识到我拼错了几个单词。检查这一点的快速方法是简单地将React中的查询复制并粘贴到本地GraphQL环境中，您将立即知道是否有问题。</p><h2 id="97e3" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">React中实现的GraphQL查询</h2><pre class="ky kz la lb fd lc kw ld le aw lf bi"><span id="de09" class="iw ix hi kw b fi lg lh l li lj">const CARD_DATA = gql`</span><span id="7292" class="iw ix hi kw b fi lk lh l li lj">  query GET_CARDS {<br/>    houses(<br/>      filters: { categories: { Category: { contains: "Buy" } } }<br/>      pagination: { limit: 6 }<br/>    ) {<br/>      data {<br/>        id<br/>        attributes {<br/>          location {<br/>            data {<br/>              attributes {<br/>                City<br/>              }<br/>            }<br/>          }<br/>          Preview_Image {<br/>            data {<br/>              attributes {<br/>                url<br/>              }<br/>            }<br/>          }<br/>          categories {<br/>            data {<br/>              attributes {<br/>                Category<br/>              }<br/>            }<br/>          }<br/>          Neighborhood<br/>          Street<br/>          Rooms<br/>          Bedrooms<br/>          Bathrooms<br/>          Short_Address<br/>          Price<br/>        }<br/>      }<br/>    }<br/>  }<br/>`;</span></pre><h2 id="7959" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">更新的用户界面</h2><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/6b96443221256e4781397da024b2ac68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*caZsf7yuf5lq0_EwILcujw.gif"/></div></div></figure><p id="a2e5" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">接下来，我创建了购买、租赁和<a class="ae iv" href="https://blog.hubspot.com/blog/tabid/6307/bid/33766/10-clever-website-error-messages-from-creative-companies.aspx" rel="noopener ugc nofollow" target="_blank">错误404页面</a>。为此，我在<code class="du kt ku kv kw b">App.js</code>文件中添加了额外的路由路径。除此之外，我还为购买和租赁页面创建了JavaScript文件。这些使用的GraphQL查询与上面的查询非常相似，上面的查询将buy卡的数量限制为6张。在这个例子中，我返回了所有的房子，在它们各自的页面上显示了buy和rent。</p><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/73e4e62d18ed3cca0f6b2260d184e255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ei_mMX5y7nvo4YwZNGkhXg.gif"/></div></div></figure><p id="8bb7" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">我最不想创建的是每个页面上家庭的动态路由。为此，我添加了一个名为property的附加路由路径。在这个文件中，它将通过过滤房屋id进行查询，这样当单击某个特定的房屋时，只有关于它的信息会作为卡片返回。</p><h2 id="7025" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">动态路由</h2><figure class="ky kz la lb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ll"><img src="../Images/0e2d6fa88eaef66a2b4d2b2a01e6e9d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*buuX2_ztUiYdN84CSOw0DA.gif"/></div></div></figure><h2 id="4acc" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">部署</h2><p id="6274" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn hb bi translated">为了部署web应用程序，我决定使用<a class="ae iv" href="https://www.netlify.com/" rel="noopener ugc nofollow" target="_blank"> Netlify </a>。当我试图将应用程序的前端和后端部署在一起时，我只能做到前端，这意味着没有一所房子能够在通过web服务器使用它时显示出来。在我构建的下一个应用程序中，我的主要目标将是学习如何做到这一点，并能够实时对应用程序进行更改。</p><h2 id="d321" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated"><strong class="ak"> TLDR版</strong></h2><p id="899e" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn hb bi translated">在React中创建了一个UI后，我原本计划只开发一个前端项目。然而，我意识到这将是一个绝佳的机会，利用我从第1部分中学到的知识，改进前端，并使用对我来说新的技术开发后端。总的来说，这是一次惊人的学习经历，我真的很期待看到我将来能够开发出什么类型的应用程序。</p><h2 id="623c" class="iw ix hi bd iu iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js bi translated">引用的作品</h2><p id="7e06" class="pw-post-body-paragraph jt ju hi jv b jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn hb bi translated">火船。<em class="kx"> GraphQL用100秒解释</em>。YouTube，2021年2月13日，<a class="ae iv" href="https://www.youtube.com/watch?v=eIQh02xuVw4&amp;t=82s." rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=eIQh02xuVw4&amp;t = 82s。2022年4月10日访问。</a></p><p id="3f17" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">加纳特拉，罗纳克。“GraphQL与Rest APIs。”<em class="kx"> GraphCMS </em>，GraphCMS，2021年11月11日，<a class="ae iv" href="https://graphcms.com/blog/graphql-vs-rest-apis#what-is-a-rest-api." rel="noopener ugc nofollow" target="_blank">https://graph CMS . com/blog/graph QL-vs-rest-API # what-is-a-rest-API。</a></p><p id="1691" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">精通，JavaScript，导演。<em class="kx">托管&amp;部署React应用的最佳方式</em>。<em class="kx"> YouTube </em>，YouTube，2020年10月22日<a class="ae iv" href="https://www.youtube.com/watch?v=Ey_90l9GaAw&amp;t=315s." rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=Ey_90l9GaAw&amp;t = 315s。</a>2022年4月10日访问。</p><p id="649c" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">梅尔瓦，克努特。“无头CMS分钟解释。”https://www.sanity.io/blog/headless-cms-explained.，2022年1月25日</p><p id="f531" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">杰弗里·蒙盖。《Strapi API CMS入门》<em class="kx"> Section </em>，Section，<a class="ae iv" href="https://www.section.io/engineering-education/getting-started-with-strapi/#:~:text=Strapi%20is%20an%20open%2Dsource,including%20MongoDB%2C%20PostgreSQL%2C%20etc." rel="noopener ugc nofollow" target="_blank">https://www . Section . io/engineering-education/getting-started-with-Strapi/#:~:text = Strapi % 20 is % 20 an % 20 open % 2d source，包括% 20 MongoDB % 2C % 20 PostgreSQL % 2C % 20等。</a></p><p id="bbe0" class="pw-post-body-paragraph jt ju hi jv b jw ko jy jz ka kp kc kd jg kq kf kg jk kr ki kj jo ks kl km kn hb bi translated">"使用状态挂钩。"https://reactjs.org/docs/hooks-state.html.<em class="kx">反应</em>，Meta平台公司<a class="ae iv" href="https://reactjs.org/docs/hooks-state.html." rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>