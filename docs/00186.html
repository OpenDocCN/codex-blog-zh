<html>
<head>
<title>RGB to Color Names in Python — The Robust Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中RGB到颜色名称的健壮方法</h1>
<blockquote>原文：<a href="https://medium.com/codex/rgb-to-color-names-in-python-the-robust-way-ec4a9d97a01f?source=collection_archive---------0-----------------------#2021-01-03">https://medium.com/codex/rgb-to-color-names-in-python-the-robust-way-ec4a9d97a01f?source=collection_archive---------0-----------------------#2021-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="aa69" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">一个简单的函数，将RGB值转换成各种组合的颜色名称。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/9571789679cf1a5eccec19fc5f5355b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0QVillbnDMRu75F_27frFw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">在<a class="ae jn" href="https://unsplash.com/@rohitraj_28?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jn" href="https://unsplash.com/@rohitraj_28?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Rohit Raj </a>拍摄的照片</figcaption></figure><p id="b209" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是一个相当简单的问题，有一个名为<a class="ae jn" href="https://pypi.org/project/webcolors/1.3/" rel="noopener ugc nofollow" target="_blank"> webcolors </a>的Python库可以解决这个问题。我们可以使用<em class="kk"> rgb_to_name </em>函数，该函数将rgb值作为参数，并返回它们所代表的颜色的名称。让我们来看看它的实际应用:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="081a" class="kq kr hi km b fi ks kt l ku kv">from webcolors import rgb_to_name<br/>named_color = rgb_to_name((255,0,0), spec='css3')</span><span id="6c45" class="kq kr hi km b fi kw kt l ku kv">print(named_color)</span></pre><p id="dcc9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="f331" class="kq kr hi km b fi ks kt l ku kv">red</span></pre><p id="a559" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这很好。但是让我们看看它是否能处理一些RGB值的随机组合。我们试试(190，53，25)。</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="6221" class="kq kr hi km b fi ks kt l ku kv">named_color = rgb_to_name((190,53,25), spec='css3')</span><span id="6fdb" class="kq kr hi km b fi kw kt l ku kv">print(named_color)</span></pre><p id="031f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面的代码抛出一个错误:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="45d1" class="kq kr hi km b fi ks kt l ku kv">ValueError: '#960000' has no defined color name in css3.</span></pre><p id="8052" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它告诉我们，我们给出的RGB值的组合没有映射到css3中任何可用的十六进制代码。换句话说，当函数将十进制值转换为CSS十六进制代码时，它不会找到与之关联的颜色名称的精确匹配。让我们来看看一些RGB值及其十六进制代码和颜色名称，以便弄清楚:</p><ul class=""><li id="42d0" class="kx ky hi jq b jr js ju jv jx kz kb la kf lb kj lc ld le lf bi translated"><strong class="jq hj"> RGB </strong> →(0.255.0)，<strong class="jq hj">十六进制代码</strong> →#00FF00，<strong class="jq hj">颜色名称</strong>→石灰</li><li id="582c" class="kx ky hi jq b jr lg ju lh jx li kb lj kf lk kj lc ld le lf bi translated"><strong class="jq hj"> RGB </strong> →(178，34，34)，<strong class="jq hj">十六进制代码</strong> →#B22222，<strong class="jq hj">颜色名称</strong>→耐火砖</li></ul><p id="103c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你正在做一个依赖于颜色准确性的项目，这实际上是有意义的。然而，如果您可以凑合使用给定RGB值的最接近的颜色名称，我们可以使用找到最接近匹配的东西。</p><h1 id="1cea" class="ll kr hi bd lm ln lo lp lq lr ls lt lu io lv ip lw ir lx is ly iu lz iv ma mb bi translated">解决方案:</h1><p id="2809" class="pw-post-body-paragraph jo jp hi jq b jr mc ij jt ju md im jw jx me jz ka kb mf kd ke kf mg kh ki kj hb bi translated">我们将使用一种叫做KDTree的数据结构。它将为我们给定的RGB查找最匹配的十六进制代码，该代码具有与之相关联的颜色名称。你可以在这里阅读更多关于KDTree <a class="ae jn" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.html" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="79c4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">代码:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="bbca" class="kq kr hi km b fi ks kt l ku kv">from scipy.spatial import KDTree<br/>from webcolors import (<br/>    css3_hex_to_names,<br/>    hex_to_rgb,<br/>)</span><span id="850f" class="kq kr hi km b fi kw kt l ku kv">def convert_rgb_to_names(rgb_tuple):<br/>    <br/>    # a dictionary of all the hex and their respective names in css3<br/>    css3_db = css3_hex_to_names<br/>    names = []<br/>    rgb_values = []</span><span id="14a4" class="kq kr hi km b fi kw kt l ku kv">    for color_hex, color_name in css3_db.items():<br/>        names.append(color_name)<br/>        rgb_values.append(hex_to_rgb(color_hex))<br/>    <br/>    kdt_db = KDTree(rgb_values)</span><span id="cb0d" class="kq kr hi km b fi kw kt l ku kv">    distance, index = kdt_db.query(rgb_tuple)<br/>    return f'closest match: {names[index]}'</span></pre><p id="198a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们用这个函数得到RGB的名称(190，53，25)。</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="9d49" class="kq kr hi km b fi ks kt l ku kv">print(convert_rgb_to_names((190,53,25)))</span></pre><p id="6a2d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">输出:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="6b64" class="kq kr hi km b fi ks kt l ku kv">closest match: firebrick</span></pre><h1 id="f902" class="ll kr hi bd lm ln lo lp lq lr ls lt lu io lv ip lw ir lx is ly iu lz iv ma mb bi translated"><strong class="ak">结论</strong></h1><p id="590f" class="pw-post-body-paragraph jo jp hi jq b jr mc ij jt ju md im jw jx me jz ka kb mf kd ke kf mg kh ki kj hb bi translated">我们可以看到css3中<em class="kk">耐火砖</em>的RGB与我们使用的相差不远。如果您需要每个可能的RGB组合的颜色名称，可以使用此代码。我希望这篇文章是有帮助的。</p></div></div>    
</body>
</html>