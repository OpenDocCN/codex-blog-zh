# Ruby ä¸­çš„æ¨¡å—

> åŸæ–‡ï¼š<https://medium.com/codex/modules-in-ruby-72263d88b9af?source=collection_archive---------3----------------------->

## ä¸èƒ½åƒç±»é‚£æ ·å®ä¾‹åŒ–çš„é‚£ä¸ªï¼

# å…ˆå†³æ¡ä»¶

ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™ä¸ªä¸»é¢˜ï¼Œæˆ‘å»ºè®®æ‚¨å¯¹ Ruby **ä¸­çš„** [**ç±»æœ‰æ‰å®çš„**çŸ¥è¯†ã€‚****](https://juzer-shakir.medium.com/class-and-its-different-methods-in-ruby-ea8e919c87a4)

# ç›®å½•

â†¦ [**å®šä¹‰**](#aa20)

â†¦ [**åµŒå¥—æ¨¡å—**](#ee3b)

â†¦ [è®¿é—®å¸¸æ•°**è®¿é—®å¸¸æ•°**è®¿é—®å¸¸æ•°](#cf38)

â†¦ [æ¨¡å—ä¸­çš„**æ–¹æ³•**æ¨¡å—](#edd9)

â†¦ [æ¨¡å—ä¸­çš„**ç±»**æ¨¡å—](#0f43)

â†¦ [**ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¨¡å—ï¼Ÿ**](#e06c)

â†¦ [**å‘½åç©ºé—´**](#cafc)

â†¦ [**ç±³æ¬£**](#4472)â†ª [åŒ…æ‹¬](#26b6)
â†ª [å‰ç½®](#9277)
â†ª [å»¶ä¼¸](#90b9)

â†¦ [**ä»ä¸åŒçš„æ–‡ä»¶ä¸­è®¿é—®ä¸€ä¸ªæ¨¡å—**](#cf1d)

# å®šä¹‰

> æ¨¡å—æ˜¯å®¹å™¨ä¸­å¸¸é‡ã€æ–¹æ³•ã€ç±»å’Œå˜é‡çš„é›†åˆã€‚

![](img/c4af46d3b7cabf7ef50c6777dfc20807.png)

æœ¬æ–‡æ¶µç›–çš„ä¸»é¢˜

å®ƒç±»ä¼¼äºä¸€ä¸ª*ç±»*ï¼Œä½†å…³é”®åŒºåˆ«åœ¨äº ***æ¨¡å—*ä¸èƒ½åƒ*ç±»*é‚£æ ·è¢«å®ä¾‹åŒ–**ã€‚

```
# module begins
module Test
 # end of scope
end
```

æ¨¡å—ç”±å…³é”®å­—`*module*`åˆå§‹åŒ–ï¼Œåè·Ÿ' *module_name'* ï¼Œ`*Test*`ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å¸¸é‡ã€‚æœ€åé€šè¿‡`*end*`å…³é”®å­—ç»“æŸå®ƒçš„èŒƒå›´ã€‚

# åµŒå¥—æ¨¡å—

æ˜¯å•Šï¼æ¨¡å—ä¹Ÿå¯ä»¥åµŒå¥—ï¼Œå°±åƒåµŒå¥—ç±»æˆ–åµŒå¥—æ–¹æ³•ä¸€æ ·ã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®å†…éƒ¨æ¨¡å—`Inner`ï¼Œæ–¹æ³•æ˜¯è°ƒç”¨å®ƒçš„çˆ¶æ¨¡å—`Outer`ï¼Œåè·Ÿä¸€ä¸ªåŒå†’å·æ“ä½œç¬¦`::`ï¼Œåè·Ÿå†…éƒ¨æ¨¡å—çš„åç§°ã€‚(çº¿ *#9* )

æˆ‘ä»¬ä¹Ÿå¯ä»¥åƒé‡æ–°æ‰“å¼€ Rubys çš„å†…ç½®ç±»æˆ–è€…æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ä¸€æ ·é‡æ–°æ‰“å¼€æ¨¡å—ï¼Œç›´æ¥è®¿é—®å†…éƒ¨æ¨¡å—ï¼Œå¦‚ç¬¬ *#12* è¡Œæ‰€ç¤ºã€‚è¿™ç§é£æ ¼æœ‰åˆ©äºç¨‹åºå‘˜å°†ç¼©è¿›çš„æ•°é‡ä»ä¸¤è¡Œå‡å°‘åˆ°ä¸€è¡Œã€‚

# **æ¨¡å—ä¸­çš„å¸¸é‡**

æˆ‘ä»¬é€šè¿‡ç»™ *module_name* ã€`*Test*`ï¼Œåè·ŸåŒå†’å·è¿ç®—ç¬¦ã€`::`ï¼Œå†åè·Ÿ *constant_nameã€*ã€`Module_constant`æ¥è®¿é—®æ¨¡å—çš„*å¸¸é‡*ã€‚

`Module_constant`æ˜¯ä¸€ä¸ªå¸¸é‡å¯¹è±¡ï¼Œå¯ä»¥è¢«æ¨¡å—`Test`ä¸­å®šä¹‰çš„æ–¹æ³•ã€ç±»å’Œæ¨¡å—è®¿é—®ã€‚ç„¶è€Œï¼Œå¸¸é‡åœ¨æ¨¡å—`Test`çš„èŒƒå›´ä¹‹å¤–æ˜¯ä¸å¯è®¿é—®çš„ã€‚

# æ¨¡å—ä¸­çš„æ–¹æ³•

å®šä¹‰å’Œè®¿é—®*å®ä¾‹*å’Œ*æ¨¡å—*æ–¹æ³•ç±»ä¼¼äºæˆ‘ä»¬å¯¹*ç±»*æ‰€åšçš„ã€‚

ç”±äºæˆ‘ä»¬ä¸èƒ½å°†*æ¨¡å—*å®ä¾‹åŒ–ä¸º*ç±»*ï¼Œè®¿é—®*å®ä¾‹æ–¹æ³•*å°†åœ¨æœ¬æ–‡åé¢çš„ [**Mixin**](#4472) éƒ¨åˆ†è®¨è®ºã€‚

# æ¨¡å—ä¸­çš„ç±»

æ­£å¦‚æˆ‘ä»¬å¯ä»¥ä»*æ¨¡å—*ä¸­è®¿é—®*å¸¸é‡*ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¿é—®*æ¨¡å—*èŒƒå›´ä¹‹å¤–çš„*ç±»*ã€‚

# **ä¸ºä»€ä¹ˆè¦ç”¨æ¨¡å—è€Œä¸æ˜¯ç±»ï¼Ÿ**

å‡ºäºè¿™ä¸¤ä¸ªåŸå› :

1.  **å‘½åç©ºé—´**
2.  **Mixin**

æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹:

# å‘½åç©ºé—´

> å‘½åç©ºé—´æ˜¯å°†é€»è¾‘ä¸Šç›¸å…³çš„å¯¹è±¡æ†ç»‘åœ¨ä¸€èµ·çš„ä¸€ç§æ–¹å¼ã€‚å®ƒå…è®¸åç§°å†²çªçš„ç±»æˆ–æ¨¡å—å…±å­˜ï¼ŒåŒæ—¶é¿å…å†²çªã€‚

è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯*å¯¼è½¨*æ¨¡å—ã€‚

è¿™é‡Œçš„`*Application*`ç±»æ˜¯åœ¨`*Rails*`æ¨¡å—çš„èŒƒå›´å†…å®šä¹‰çš„ã€‚

ç”±äº`*Application*`ç±»æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„ç±»åï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å¦ä¸€ä¸ª gem ä¸­é‡åˆ°ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…ç›¸ä¼¼åç§°çš„å†²çªï¼Œ`*Application*`ç±»è¢«å°è£…åœ¨`*Rails*`æ¨¡å—ä¸­ã€‚

è¿™æ„å‘³ç€ç±»`*Rails::Application*`æ°¸è¿œä¸ä¼šä¸åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰çš„`*Application*` ç±»æˆ–`*Other_gem::Application*`ç±»å†²çªã€‚

# ç±³æ¬£

> Mixin æ˜¯ä¸€ç§å·¥å…·ï¼Œé€šè¿‡ä½¿ç”¨`include`ã€`prepend`å’Œ`extend`å…³é”®å­—ï¼Œå¯ä»¥åœ¨å¦ä¸€ä¸ªæ¨¡å—æˆ–ç±»ä¸­è°ƒç”¨ä¸€ä¸ªæ¨¡å—ã€‚

## åŒ…æ‹¬:

è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨æ¨¡å—`*Mod*`çš„èŒƒå›´ä¹‹å¤–åˆ›å»ºäº†ä¸€ä¸ªç±»`*Klass*` ï¼Œæˆ‘ä»¬å°†`*Mod*`æ¨¡å—çš„å®ä¾‹æ–¹æ³•ä½œä¸ºå®ä¾‹æä¾›ç»™ç±» `***Klass***` **ã€‚**

å½“æˆ‘ä»¬å¯¹ç±»`Klass`è°ƒç”¨`.*ancestors*`æ–¹æ³•æ—¶ï¼Œå®ƒç»™å‡ºäº†ç±»`*Klass*` ä»*ç»§æ‰¿çš„ç±»å’Œæ¨¡å—çš„åˆ—è¡¨ã€‚*

åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬è°ƒç”¨`*include*`ï¼Œç±»`*Klass*`ç›´æ¥ä»`*Object*` *ï¼Œ*ç»§æ‰¿ï¼Œä½†æ˜¯åœ¨`*include*`è°ƒç”¨ä¹‹åï¼Œç±»`*Klass*`ç°åœ¨ç›´æ¥ä»æ¨¡å—`*Mod*`ç»§æ‰¿ã€‚

**`**include**`**å…³é”®å­—å°†å£°æ˜çš„æ¨¡å—çš„æ–¹æ³•æ·»åŠ åˆ°å£°æ˜ä¸ºå®ä¾‹æ–¹æ³•çš„ç±»ä¸­ã€‚****

**æ¢å¥è¯è¯´:**

****`***include***`**å…³é”®å­—ä½¿*æ¨¡å—*æˆä¸º*ç±»çš„çˆ¶æ¨¡å—ï¼Œå®ƒåœ¨ç¥–å…ˆé“¾ä¸­å£°æ˜äº†*ã€‚******

****å› æ­¤ï¼Œå½“æˆ‘ä»¬å°†ä¸€ä¸ª*å®ä¾‹æ–¹æ³•*è°ƒç”¨åˆ°ç±»`*Klass*` *ï¼Œ*æ—¶ï¼Œå®ƒä»¬ä¼šåœ¨å®ƒä»¬çš„çˆ¶æ¨¡å—`*Mod*`ä¸­æ‰¾åˆ°ä¸€ä¸ª*å®ä¾‹æ–¹æ³•*å¹¶ç»™å‡ºè¾“å‡ºã€‚****

******ä½†æ˜¯ï¼Œæ¨¡å—æ–¹æ³•åªå¯¹** `***Mod***` **æ¨¡å—æœ¬èº«å¯ç”¨ã€‚******

****ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ª*ç±»*ä¸­`*include*`ä¸¤ä¸ªä¸åŒçš„æ¨¡å—å…·æœ‰ç›¸åŒçš„â€œ*method _ nameâ€*ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ****

****ä»ç¬¬ä¸€ä¸ªæ¨¡å—ç›´æ¥å¯¼å…¥çš„ç¬¬äºŒä¸ªæ¨¡å—ã€‚****

****æ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨`*method_1*`æ—¶ï¼Œå®ƒå°†é¦–å…ˆæŸ¥çœ‹å®ƒæ˜¯å¦åœ¨ç±»`*Klass*`ä¸­å¯ç”¨ï¼Œç„¶åå®ƒå°†åœ¨å±‚æ¬¡ç»“æ„ä¸­å‘ä¸Šä¸€æ­¥åˆ°æ¨¡å—`*Mod_2*`ä»¥æ‰¾åˆ°*æ–¹æ³•*ï¼Œå®ƒåœ¨é‚£é‡Œæ‰¾åˆ°å®ƒå¹¶ç»™å‡ºè¾“å‡ºã€‚****

****å¦‚æœæˆ‘ä»¬ä»`*Mod_1*`ä¸­ç§»é™¤`*method_1*`ï¼Œè¿™ä¸ä¼šç»™å‡ºä»»ä½•ä¸åŒçš„è¾“å‡ºï¼Œå› ä¸ºå®ƒä¸ä¼šå»é‚£é‡Œå¯»æ‰¾*æ–¹æ³•*ï¼Œç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä»`*Mod_2*`ä¸­ç§»é™¤`*method_1*`ï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨`*Mod_1*`ä¸­æ‰¾åˆ°`*method_1*`å¹¶ç»™å‡ºå®ƒçš„è¾“å‡ºã€‚****

## ******å‰ç½®******

******`***prepend***`**å…³é”®å­—ä½¿*æ¨¡å—*æˆä¸º*ç±»çš„å­æ¨¡å—ï¼Œå®ƒåœ¨ç¥–å…ˆé“¾ä¸­è¢«å£°æ˜ä¸º*ã€‚********

****æˆ–è€…ï¼Œ****

******å£°æ˜** `**prepend**` **å…³é”®å­—çš„ç±»æ˜¯è¢«å£°æ˜æ¨¡å—çš„çˆ¶ç±»ã€‚******

****å› æ­¤ï¼Œå½“æˆ‘ç»™å‡ºä¸€ä¸ªåœ¨*æ¨¡å—*å’Œ*ç±»*ä¸­éƒ½å¯ç”¨çš„*æ–¹æ³•*æ—¶ï¼Œå®ƒå°†é¦–å…ˆåœ¨*æ¨¡å—*ä¸­æŸ¥æ‰¾ï¼Œä½œä¸ºå…¶ç¥–å…ˆé“¾ä¸­çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚****

## ******å»¶é•¿******

******`**extend**`**å…³é”®å­—å°†å£°æ˜æ¨¡å—çš„å®ä¾‹æ–¹æ³•æ·»åŠ åˆ°å£°æ˜ä¸ºç±»æ–¹æ³•çš„ç±»ä¸­ã€‚********

****æˆ–è€…ï¼Œ****

******`**extend**`**å…³é”®å­—ä½¿ m *æ¨¡å—*çš„*å®ä¾‹æ–¹æ³•*æˆä¸º*å®ä¾‹æ–¹æ³•*åˆ°*å•ä¾‹ç±»*çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œå…¶ä¸­** `**extend**` **åœ¨*ä¸­å£°æ˜ã€‚*********

****æ¢å¥è¯è¯´ï¼Œ****

******`**extend**`**å…³é”®å­—å¸¦æ¥äº†*å®ä¾‹æ–¹æ³•*ä¸­çš„ä¸€ä¸ª**`**Mod**`**ï¼Œä½œä¸º*å•ä½“æ–¹æ³•*çš„** `**Klass**` **ã€‚********

```
**Klass.singleton_methods  
# => [:method_1]**
```

****ç±»`*Klass*`çš„ç¥–å…ˆé“¾æ²¡æœ‰å—åˆ°å½±å“ï¼Œä½†æ˜¯*å•ä¾‹ç±»*çš„ç¥–å…ˆé“¾å—åˆ°å½±å“...****

```
**p Klass.singleton_class.ancestors[#<Class:Klass>, Mod, #<Class:Object>, #<Class:BasicObject>, Class, Module, Object, Kernel, BasicObject]**
```

****æ¨¡å—`*Mod*` æ˜¯å•ä¾‹ç±»`*Class:Klass*`çš„çˆ¶ç±»ã€‚æ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨`*Klass.method_1*`æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨ä»å•ä¾‹ç±»ã€`Class:Klass.`ä¸­è®¿é—®`*method_1*`****

# *****ä»ä¸åŒæ–‡ä»¶è®¿é—®æ¨¡å—*****

*****è¿™ä¸ªæˆ‘åœ¨è¿™ç¯‡[æ–‡ç« ](https://juzer-shakir.medium.com/accessing-module-in-root-in-ruby-8eb46dbb38e1)é‡Œå·²ç»è¯¦ç»†è§£é‡Šè¿‡äº†ã€‚*****

# *****é¢å¤–èµ„æº*****

*******å‰ç½®çš„çœŸå®ä¾‹å­:*******

*****[](https://chunksofco.de/rubys-prepend-how-is-it-useful-d3bba8d11a95) [## Ruby çš„ Prepend:å®ƒæ˜¯å¦‚ä½•æœ‰ç”¨çš„ï¼Ÿ

### ç”¨ä¸€ä¸ªçœŸå®çš„ä¾‹å­

chunksofco.de](https://chunksofco.de/rubys-prepend-how-is-it-useful-d3bba8d11a95) 

**Rubys çš„å†…ç½®æ¨¡å—æœ‰:**

[](https://juzer-shakir.medium.com/enumerable-module-in-ruby-7cb0e42d4b3f) [## Ruby ä¸­çš„ä¸€ä¸ªå¯æšä¸¾æ¨¡å—

### Ruby æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•èµ„æºï¼Œå¯ä¾›ç±»ä½¿ç”¨ã€‚

juzer-shakir.medium.com](https://juzer-shakir.medium.com/enumerable-module-in-ruby-7cb0e42d4b3f) [](/kode-art/everything-is-comparable-in-ruby-cf9ab5e8252f) [## åœ¨ Ruby ä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯â€œå¯æ¯”çš„â€

### æ¬¢è¿ğŸ˜‰

medium.com](/kode-art/everything-is-comparable-in-ruby-cf9ab5e8252f) 

æ¬¢è¿å¯¹æœ¬æ–‡æå‡ºä»»ä½•å»ºè®®æˆ–ç¼–è¾‘ï¼è°¢è°¢å¤§å®¶ï¼

**æˆ‘ä¸Šä¸€ç¯‡:**[Ruby ä¸­çš„ä¸€ä¸ªç±»](https://juzer-shakir.medium.com/class-and-its-different-methods-in-ruby-ea8e919c87a4)
**æˆ‘ä¸‹ä¸€ç¯‡:**[Ruby ä¸­çš„ä¸€ä¸ªå¯æšä¸¾æ¨¡å—](https://juzer-shakir.medium.com/enumerable-module-in-ruby-7cb0e42d4b3f)

[**GitHub**](https://github.com/JuzerShakir)|[**é¢†è‹±**](https://www.linkedin.com/in/juzershakir/)*****