<html>
<head>
<title>Event-driven solution is still a hot topic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">事件驱动的解决方案仍然是一个热门话题</h1>
<blockquote>原文：<a href="https://medium.com/codex/event-driven-solution-is-still-a-hot-topic-15632a8130ef?source=collection_archive---------12-----------------------#2021-08-12">https://medium.com/codex/event-driven-solution-is-still-a-hot-topic-15632a8130ef?source=collection_archive---------12-----------------------#2021-08-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c7a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最近，我不得不解释为什么事件驱动架构仍然是当前市场上的热门话题:当我与金融、医疗保健或零售行业的许多公司合作时，我看到松散耦合、事件驱动的微服务解决方案得到了大力采用，新的数据管道用于将数据注入现代数据湖，以及Apache Kafka或Apache Pulsar等事件主干技术的采用。</p><p id="c039" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与我的团队一起，我们正在研究参考架构、参考实施和基于事件驱动实施的首款解决方案。在过去的一年里，随着无服务器、knative eventing、云原生技术、microprofile 3.x消息传递的采用，这个领域发生了很大的变化...</p><p id="25c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇博客中，我想介绍我们的EDA工作，并参考一些您可能能够在自己的项目中利用的资产。我将在以后的博客中更详细地介绍我们为客户服务开发的一些资产和最佳实践。</p><p id="d145" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事件驱动架构(EDA)是一种架构模式，它促进事件的产生、检测、消费和反应。它支持组件之间的异步通信，并且大多数情况下支持发布/订阅编程模型。微服务的采用带来了一些有趣的挑战，如数据一致性、契约耦合和可伸缩性，EDA有助于解决这些挑战。</p><p id="fb30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从业务价值的角度来看，采用这种体系结构有助于根据工作负载扩展业务应用程序，并通过随着时间的推移添加新的组件来支持轻松扩展，这些组件可以随时生成或消费整个系统中已经存在的事件。我们可以开发出以前无法开发的新的实时数据流应用程序。</p><p id="4b69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">主要用例</strong></p><p id="ae58" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在高层次上，使用基于事件的解决方案的主要业务动机是在数据创建或修改发生时实时响应它们，这意味着评估那些变化是什么，提供响应性的客户体验，或者评估业务风险和机会。</p><p id="1c01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">人工智能和预测评分的采用也可以集成到实时数据管道中，以构建更智能的应用程序。</p><p id="0861" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在技术层面，我们可以看到事件驱动解决方案的三种应用:</p><ul class=""><li id="e435" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">现代数据管道</strong>将提取、转换和加载作业的传统批处理转移到实时接收，数据在中央消息主干中持续可见。数据源可以是数据库、队列或特定的生产者应用程序，而消费者可以是应用程序、流、长存储桶、队列、数据库…</li><li id="b2e8" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">采用<strong class="ih hj">异步方式，云原生微服务之间的发布-订阅通信</strong>有助于扩展和解耦:采用微服务来开发业务应用有助于解决维护和可扩展性问题，但纯RESTful或基于SOAP的解决方案带来了集成和耦合挑战，抑制了微服务架构所承诺的敏捷性。发布/订阅有助于改善解耦，但是良好的设计实践非常重要。(我将在以后的博客中详细阐述)</li><li id="4f29" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">实时分析</strong>:这包括纯分析计算，如数据流上的聚合，也包括复杂的事件处理、基于时间窗口的推理或数据流上的人工智能评分集成。</li></ul><p id="d777" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">参考架构</strong></p><p id="239c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有了这些主要驱动因素，我们已经定义了参考架构，以评估这种事件驱动的解决方案中涉及哪些通用组件。在IBM，我们已经开发了两个架构图，但我在我的大多数客户项目中使用的是<a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/eventDrivenArchitecture/reference-architecture" rel="noopener ugc nofollow" target="_blank">扩展图</a>，因为它包括如何利用事件主干中的数据来开发AI模型，我认为这是一个重要的采用模式。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/bc98aa8411d38ffa871b8f0b819fdf2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Q4mnd44oLcmwG7w1n5ctg.png"/></div></div></figure><p id="011b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我鼓励您从<a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/eventDrivenArchitecture/reference-architecture" rel="noopener ugc nofollow" target="_blank">这个网站</a>上阅读更多关于这些组件和功能的信息。</p><p id="8d54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">事件驱动模式</strong></p><p id="feff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着事件驱动解决方案的采用，开发人员和架构师需要评估我们工具箱中的不同设计模式，如<a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/event-driven-event-sourcing-pattern" rel="noopener ugc nofollow" target="_blank">Event Sourcing】</a>将业务实体的状态持久化为一系列状态改变事件，<a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/event-driven-cqrs-pattern" rel="noopener ugc nofollow" target="_blank">命令查询责任分离(CQRS) </a>将写与读模型和API分离，<a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/event-driven-saga-pattern" rel="noopener ugc nofollow" target="_blank"> SAGA </a>支持跨多个微服务的长时间运行的事务，并带有补偿流程，<a class="ae jr" href="https://microservices.io/patterns/data/transactional-outbox.html" rel="noopener ugc nofollow" target="_blank">事务发件箱</a>从数据库表中获取数据并将消息发送到主题或队列，以及<a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/eventDrivenArchitecture/patterns" rel="noopener ugc nofollow" target="_blank"/></p><p id="2d1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些模式有助于更好地设计事件驱动的微服务，但是选择这样的模式需要常识。我们已经完成了这些模式的不同实现，为您自己的实现获得了一些起始代码和实践:</p><ul class=""><li id="47d4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jr" href="https://github.com/ibm-cloud-architecture/refarch-kc-order-ms" rel="noopener ugc nofollow" target="_blank"> CQRS为海外运送货物的订单管理服务</a>。</li><li id="8353" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://ibm-cloud-architecture.github.io/refarch-kc/implementation/saga-patterns/" rel="noopener ugc nofollow" target="_blank"> Saga支持装运订单，包括船只分配和冷藏集装箱分配</a>。</li><li id="2915" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://github.com/ibm-cloud-architecture/vaccine-order-mgr-pg" rel="noopener ugc nofollow" target="_blank">交易发件箱</a>在另一个订单管理服务上:这是covid 19疫苗订单。它使用Quarkus Debezium插件，Postgresql和Kafka连接器。</li></ul><p id="25a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何入门？</strong></p><p id="0110" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从方法论的角度来看，事件风暴法是由Alberto Brandolini在“<a class="ae jr" href="https://www.eventstorming.com/book/" rel="noopener ugc nofollow" target="_blank">介绍事件风暴书</a>”中介绍和公布的，用于快速捕获解决方案设计和提高团队对领域的理解。我们扩展了研讨会，以评估事件关系和来自数据流的见解:这将有助于设计持续处理事件流的智能代理。</p><p id="e6ea" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将精益启动与敏捷开发实践、事件风暴和领域驱动的设计实践结合起来，帮助我们为任何事件驱动的解决方案打下良好的基础。这不是一个简单的练习，很容易出错。但是，当我们发现主要的实现问题时，如服务或事件模式的耦合等，能够改变、重构和调整微服务的边界是很重要的</p><p id="c353" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文的<a class="ae jr" href="https://ibm-cloud-architecture.github.io/refarch-eda/methodology/event-storming/" rel="noopener ugc nofollow" target="_blank">中，我们将结合</a><a class="ae jr" href="https://ibm-cloud-architecture.github.io/refarch-eda/methodology/domain-driven-design/" rel="noopener ugc nofollow" target="_blank">领域驱动的设计概念和构造</a>的快速总结，详细介绍如何举办一个事件风暴研讨会。</p><p id="69eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从开发人员的角度来看，我想提供一些基于相同微服务范围的简单示例代码:订单管理服务，但使用不同的语言，并通过使用域驱动的设计和元素，如异步API、Avro模式…</p><p id="eba2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jr" href="https://github.com/ibm-cloud-architecture/eda-quickstarts" rel="noopener ugc nofollow" target="_blank"> eda-quickstarts </a> github库包括Quarkus 2.x Kafka生产者和消费者，以及Spring云项目:这个github库仍在工作中，我欢迎贡献者。</p><p id="76c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">技术趋势</strong></p><p id="a1de" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Apache Kafka是支持我们参考架构的事件主干组件的当前选择，我们进行了广泛的研究，以总结实施生产者和消费者应用的关键概念和最佳实践，并辅以大量的动手实验。</p><p id="da2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果Kafka运行在Kubernetes上，那么部署和管理Kafka将会非常方便，为了获得最佳的部署方法，请使用可以从OpenShift Operator Hub使用的<a class="ae jr" href="https://strimzi.io/docs/operators/latest/using.html" rel="noopener ugc nofollow" target="_blank"> Strimzi操作符</a>。IBM Event Streams也是基于这个操作符。</p><p id="b725" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为Kafka的一个很好的竞争对手，是Apache Pulsar(T14 ),它用更多有趣的特性解决了所有预期的事件主干特性。</p><p id="f8e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Kafka领域的一个新玩家是来自矢量化的“<a class="ae jr" href="https://vectorized.io" rel="noopener ugc nofollow" target="_blank"> Redpanda ”,它提供了许多非常好的功能，与Kafka兼容。</a></p><p id="f8a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你想要实现流逻辑时，Kafka使用Kafka Streams API或kSQL来支持它。它们与Kafka紧密集成，即使它们解决了大多数流处理需求，也有替代方案。2021年，我想采用<a class="ae jr" href="https://flink.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Flink </a>作为你的分析工具，独立于Kafka进行扩展。</p><p id="6e6c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Flink有很多特性可以帮助你处理数据流用例，同时也支持SQL和复杂的事件处理。</p><p id="be8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将事件主干和数据流与人工智能结合起来是一条出路，我们需要在所有这些方面提升我们的技能。</p><p id="d3ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">重要EDA链接</strong></p><ul class=""><li id="ecf8" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><a class="ae jr" href="https://www.ibm.com/cloud/architecture/architectures/eventDrivenArchitecture/overview" rel="noopener ugc nofollow" target="_blank"> IBM事件驱动参考架构</a></li><li id="d812" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://www.ibm.com/cloud/architecture/content/field-guide/event-driven-field-guide/" rel="noopener ugc nofollow" target="_blank"> EDA现场指南</a></li><li id="3c81" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">我们的<a class="ae jr" href="https://ibm-cloud-architecture.github.io/refarch-eda/" rel="noopener ugc nofollow" target="_blank">事件驱动架构知识体系</a>(始终在进行中)</li><li id="a596" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://ibm-cloud-architecture.github.io/refarch-eda/methodology/event-storming/" rel="noopener ugc nofollow" target="_blank">事件风暴方法</a></li><li id="afca" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><a class="ae jr" href="https://developer.ibm.com/articles/event-streams-kafka-fundamentals" rel="noopener ugc nofollow" target="_blank">卡夫卡基础</a>和一些<a class="ae jr" href="https://ibm-cloud-architecture.github.io/refarch-eda/technology/kafka-producers-consumers/" rel="noopener ugc nofollow" target="_blank">其他最佳实践</a>。</li></ul></div></div>    
</body>
</html>