<html>
<head>
<title>Understanding Operator Overloading in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Swift中的运算符重载</h1>
<blockquote>原文：<a href="https://medium.com/codex/understanding-operator-overloading-in-swift-1f2cad16243c?source=collection_archive---------3-----------------------#2022-07-26">https://medium.com/codex/understanding-operator-overloading-in-swift-1f2cad16243c?source=collection_archive---------3-----------------------#2022-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1689" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用运算符重载来实现您的运算符，甚至调整现有的运算符</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/90a5f37a9c51d3595352cc7e3678c797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*xzLQ_lgXKtfk-ZmXYgkx9w.png"/></div></figure><p id="46c0" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在开始之前，我们将通过重载<code class="du kb kc kd ke b">==</code>操作符来理解<code class="du kb kc kd ke b">Operator Overloading</code>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="4b10" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们都知道上面的代码的结果会是什么，对吗？<code class="du kb kc kd ke b">1</code>总是等于<code class="du kb kc kd ke b">1</code>从而印出<code class="du kb kc kd ke b">True</code>。现在我们将通过重载来修改<code class="du kb kc kd ke b">==</code>操作符。我们可以通过编写一个类似下面代码的小函数轻松做到这一点。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="7059" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这之后，现在每当我们运行我们的第一个代码片段时，它将总是打印<code class="du kb kc kd ke b">False</code>，因为我们已经修改了<code class="du kb kc kd ke b">==</code>操作符以总是返回<code class="du kb kc kd ke b">false</code>。</p><p id="0ac1" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">从上面的片段中，我们可以了解到函数的名字是操作符。<code class="du kb kc kd ke b">func ==</code>。就参数而言，我们有两个整数。<code class="du kb kc kd ke b">lhs</code>(左手侧)和<code class="du kb kc kd ke b">rhs</code>(右手侧)。该函数将返回一个<code class="du kb kc kd ke b">boolean</code>。</p><p id="d97d" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">操作者还有<code class="du kb kc kd ke b">precedence</code>和<code class="du kb kc kd ke b">associativity</code>，两者都会影响操作的结果。Swift首先使用优先级最高的操作员。就像我们的BODMAS法则一样。</p><p id="20af" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在我们来试着理解一下<code class="du kb kc kd ke b">precedence</code>和<code class="du kb kc kd ke b">associativity</code>。为此，我们将看到一个小数学题。</p><pre class="iy iz ja jb fd kh ke ki kj aw kk bi"><span id="040a" class="kl km hi ke b fi kn ko l kp kq">let num = 5 * 2 + 2 * 10</span></pre><p id="b830" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">根据BODMAS法则，乘法应该先执行，所以先执行<code class="du kb kc kd ke b">5 * 2</code>，然后是<code class="du kb kc kd ke b">2 * 10</code>，最后是加法。<code class="du kb kc kd ke b">10 + 20</code> = <code class="du kb kc kd ke b">30</code></p><p id="2986" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">同样的内容也被输入到Swift标准库中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="7eee" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在这里你可以看到他们使用了<code class="du kb kc kd ke b">infix</code>。这些操作符被称为<code class="du kb kc kd ke b">infix</code>，因为这些操作符被放置在两个操作数之间。<code class="du kb kc kd ke b">1 + 2</code>举个例子。</p><p id="f8ce" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">和<code class="du kb kc kd ke b">infix</code>一样，还有其他的符号也叫做<code class="du kb kc kd ke b">prefix</code>和<code class="du kb kc kd ke b">postfix</code></p><pre class="iy iz ja jb fd kh ke ki kj aw kk bi"><span id="31df" class="kl km hi ke b fi kn ko l kp kq"><strong class="ke hj">infix - </strong> operators are placed between two operands<strong class="ke hj"><br/>prefix - </strong>operators are placed before operands<strong class="ke hj"><br/>postfix - </strong>operators are placed after operands</span></pre></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><h2 id="d784" class="kl km hi bd ky kz la lb lc ld le lf lg jo lh li lj js lk ll lm jw ln lo lp lq bi translated">优先级和结合性</h2><p id="0b65" class="pw-post-body-paragraph jf jg hi jh b ji lr ij jk jl ls im jn jo lt jq jr js lu ju jv jw lv jy jz ka hb bi translated"><code class="du kb kc kd ke b"><strong class="jh hj">Precedence</strong></code> <strong class="jh hj"> <br/> </strong>优先是设置运算符优先级的一种方式。优先级值越高，运算符的优先级越高。优先级值的范围可以是0..255.</p><p id="41d9" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们试着改变<code class="du kb kc kd ke b">*</code> an操作符的优先级值，如下所示。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="094a" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在让我们看看我们最初的问题会发生什么。</p><pre class="iy iz ja jb fd kh ke ki kj aw kk bi"><span id="9944" class="kl km hi ke b fi kn ko l kp kq">let num = 5 * 2 + 2 * 10</span></pre><p id="427c" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">因为优先值<code class="du kb kc kd ke b">*</code>被设置为小于<code class="du kb kc kd ke b">+</code>运算符的值。这里<code class="du kb kc kd ke b">+</code>操作员将优先。因此，结果将是<code class="du kb kc kd ke b">200</code>。</p><p id="2ec6" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><code class="du kb kc kd ke b"><strong class="jh hj">Associativity</strong></code> <strong class="jh hj"> <br/> </strong>结合性是指相同优先级的运算符如何分组——从左或从右。</p><p id="e2fc" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们尝试改变<code class="du kb kc kd ke b">+</code>操作符的结合值，如下所示。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kf kg l"/></div></figure><p id="983b" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们看看下面的问题。</p><pre class="iy iz ja jb fd kh ke ki kj aw kk bi"><span id="9a68" class="kl km hi ke b fi kn ko l kp kq">let num = 8 - 4 - 2</span></pre><p id="548a" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">在典型情况下，计算将导致<code class="du kb kc kd ke b">2</code>。但是随着<code class="du kb kc kd ke b">associativity</code>值改为<code class="du kb kc kd ke b">right</code>，现在将解释为<code class="du kb kc kd ke b">8 — (4 — 2)</code>，结果为<code class="du kb kc kd ke b">6</code>。</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><p id="475d" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">我们已经到了这个故事的结尾。我希望您已经理解了运算符重载的概念。</p><p id="5a60" class="pw-post-body-paragraph jf jg hi jh b ji jj ij jk jl jm im jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">如果你喜欢这个故事，请分享并关注我的帐户，以获得更多类似的故事。如果你有任何疑问或建议，请告诉我。感谢阅读。</p></div></div>    
</body>
</html>