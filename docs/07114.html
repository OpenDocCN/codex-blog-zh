<html>
<head>
<title>Introduction to “Set Variable” Activity in Azure Data Factory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure数据工厂中的“设置变量”活动介绍</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-set-variable-activity-73bcddcf0318?source=collection_archive---------6-----------------------#2022-05-31">https://medium.com/codex/introduction-to-set-variable-activity-73bcddcf0318?source=collection_archive---------6-----------------------#2022-05-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="b2d6" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是设置可变活动</h1><p id="cc49" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">设置变量</em></strong><strong class="jf hj"><em class="kb">活动</em> </strong>是<strong class="jf hj"/>用来设置 的<strong class="jf hj"> <em class="kb">值一个<strong class="jf hj"> <em class="kb">类型的现有变量字符串</em> </strong>、<strong class="jf hj"><em class="kb">【Bool】</em></strong>，或者<strong class="jf hj"> <em class="kb">数组中定义的</em></strong><strong class="jf hj"><em class="kb">数据工厂</em></strong></em></strong></p><h1 id="8ae9" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">使用设置变量Activity创建管道</h1><p id="3b94" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第一步</em></strong>-<strong class="jf hj">-</strong>打开<strong class="jf hj"> <em class="kb">蔚蓝门户</em></strong>(<strong class="jf hj"><em class="kb">portal.azure.com</em></strong>)。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/919a4f901bdcfee8b8eb20ba2a019858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u4zliixoN0u-29K-Ron5WA.png"/></div></div></figure><p id="f349" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第二步</em></strong>-<strong class="jf hj">-<em class="kb">点击</em>-</strong>-<strong class="jf hj">-<em class="kb">Azure数据工厂资源</em>-</strong>-<strong class="jf hj">-<em class="kb">ADF-Oindrila-2022-March</em>-</strong>。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/b3a6bfe33b0e37deceec1edf4d043240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6mDmd3k_oExN1JFyEdWJg.png"/></div></div></figure><p id="5b5f" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第三步</em></strong>-The<strong class="jf hj"><em class="kb">Azure Data Factory</em></strong><strong class="jf hj"><em class="kb">ADF-Oindrila-2022-3月</em></strong><strong class="jf hj"><em class="kb">设置页面</em> </strong>是<strong class="jf hj"> <em class="kb">打开</em> </strong>。<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">打开Azure数据工厂工作室</em></strong><strong class="jf hj"><em class="kb">链接</em> </strong>。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/59e2be862486e2d0e629738cae2ae137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n72VcAQlzc7POSGBeHarCQ.png"/></div></div></figure><p id="4b75" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第四步</em></strong>-Azure<strong class="jf hj"><em class="kb">数据工厂资源</em></strong><strong class="jf hj"><em class="kb">ADF-Oindrila-2022-3月</em> </strong>是<strong class="jf hj"> <em class="kb">在</em> </strong>中打开的一个<strong class="jf hj"> <em class="kb">新标签在</em></strong><strong class="jf hj"><em class="kb">相同的浏览器</em></strong>现在，<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">作者</em></strong><strong class="jf hj"><em class="kb">链接打开</em></strong><strong class="jf hj"><em class="kb">蔚蓝数据工厂</em> </strong> <strong class="jf hj"> <em class="kb">处于编辑模式</em> </strong>。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/98d062e9c04e30296fa7f1dcee892790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxvzP6pqoYQ8E3YQ3Kg2nA.png"/></div></div></figure><p id="1548" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第五步</em> </strong> - <strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb"/></strong><strong class="jf hj"><em class="kb">管道</em></strong><strong class="jf hj"><em class="kb">类别</em></strong><strong class="jf hj"><em class="kb"/></strong><strong class="jf hj"><em class="kb">资源浏览器</em> </strong>，<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb"/></strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/8c091bf9faca5afe390398dc3e0aee1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5zpasCrG-HubpevCKVTAKg.png"/></div></div></figure><p id="542a" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第六步</em></strong>-<strong class="jf hj">-<em class="kb">转到</em></strong><strong class="jf hj"><em class="kb">参数</em></strong><strong class="jf hj"><em class="kb">选项卡</em></strong><strong class="jf hj"><em class="kb">管道</em></strong><strong class="jf hj"><em class="kb">PL _ usepipeline variables</em></strong>。<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">+新建</em></strong><strong class="jf hj"><em class="kb">链接添加</em> </strong>一个<strong class="jf hj"> <em class="kb">参数</em></strong><strong class="jf hj"><em class="kb">地址行</em></strong><strong class="jf hj"><em class="kb">字符串</em></strong><strong class="jf hj"><em class="kb">类型<strong class="jf hj"> <em class="kb">提供</em></strong><strong class="jf hj"><em class="kb">地址:M.G. Road路221号。城市:加尔各答。状态:西孟加拉邦</em></strong><strong class="jf hj"><em class="kb">为</em></strong><strong class="jf hj"><em class="kb">默认值为</em></strong><strong class="jf hj"><em class="kb">参数</em></strong><strong class="jf hj"><em class="kb">address line</em></strong>。</em></strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/b24ee6ad0b9991218459d600922d9084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CorAabEvc2zWF2iicLVQBQ.png"/></div></div></figure><p id="0060" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第七步</em></strong>-<strong class="jf hj">-<em class="kb">转到</em></strong><strong class="jf hj"><em class="kb">变量</em></strong><strong class="jf hj"><em class="kb">选项卡<strong class="jf hj"> <em class="kb">管道</em></strong><strong class="jf hj"><em class="kb">PL _ UsePipelineVariables</em></strong>。<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">+</em></strong><strong class="jf hj"><em class="kb">新建</em></strong><strong class="jf hj"><em class="kb">链接添加</em></strong><strong class="jf hj"><em class="kb">变量与</em></strong><strong class="jf hj"><em class="kb">名称</em></strong><strong class="jf hj"><em class="kb">城市名称</em><strong class="jf hj"><em class="kb">字符串</em></strong>做<strong class="jf hj"> <em class="kb">不提供</em></strong><strong class="jf hj"><em class="kb">默认值</em> </strong>。</strong></em></strong></p><p id="daaf" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"> 中的<strong class="jf hj"> <em class="kb">值一个<strong class="jf hj"> <em class="kb">变量</em> </strong>可以<strong class="jf hj"> <em class="kb">或者</em> </strong>被<strong class="jf hj"> <em class="kb">提供为</em> </strong>一个<strong class="jf hj"> <em class="kb">默认值</em></strong><strong class="jf hj"><em class="kb">或者</em> </strong>，可以<strong class="jf hj"> <em class="kb">设置<strong class="jf hj"> <em class="kb">这里的</em> </strong>，<strong class="jf hj"> <em class="kb">值</em> </strong>会被<strong class="jf hj"> <em class="kb">设置使用</em></strong><strong class="jf hj"><em class="kb">设置变量</em></strong><strong class="jf hj"><em class="kb">活动</em> </strong>。</em></strong></em></strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/e3f1e6a526db29aed1c5219582dc8815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EX6BBbE7kS2DKdLrNvUfMw.png"/></div></div></figure><p id="5b26" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第八步</em></strong>-<strong class="jf hj">-<em class="kb">搜索</em></strong><strong class="jf hj"><em class="kb">设置变量</em></strong><strong class="jf hj"><em class="kb">活动</em></strong><strong class="jf hj"><em class="kb"/></strong>活动浏览器 和<strong class="jf hj"> <em class="kb"/></strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/8c7bf4c702d80510727f0d0cc8f98489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TBU70Z_J9J3dD6gGfYD3aQ.png"/></div></div></figure><p id="cd5e" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第九步</em></strong>-<strong class="jf hj">-<em class="kb">转到</em></strong><strong class="jf hj"><em class="kb">变量</em></strong><strong class="jf hj"><em class="kb">选项卡</em></strong><strong class="jf hj"><em class="kb">设置变量</em></strong><strong class="jf hj"><em class="kb">活动</em> </strong>。<strong class="jf hj"> <em class="kb">点击</em></strong>的<strong class="jf hj"> <em class="kb">下拉框<strong class="jf hj"> <em class="kb">名称属性</em> </strong>。这将<strong class="jf hj"> <em class="kb">显示所有</em></strong><strong class="jf hj"><em class="kb">变量出现在</em></strong><strong class="jf hj"><em class="kb">流水线范围</em> </strong>。<strong class="jf hj"> <em class="kb">选择</em></strong><strong class="jf hj"><em class="kb">变量</em></strong><strong class="jf hj"><em class="kb">城市名</em></strong><strong class="jf hj"><em class="kb">从</em></strong><strong class="jf hj"><em class="kb">下拉选项</em> </strong>。</em></strong></p><p id="b89d" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">在</em></strong><strong class="jf hj"><em class="kb">文本框中的值属性</em> </strong>，<strong class="jf hj"> <em class="kb">要么是</em><strong class="jf hj"><em class="kb">硬编码值</em> </strong>，<strong class="jf hj"> <em class="kb">要么是</em> </strong>，<strong class="jf hj"> <em class="kb">动态内容</em> </strong>，即<strong class="jf hj"><strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">文本框</em></strong><strong class="jf hj"><em class="kb">值属性</em> </strong>。<strong class="jf hj"> <em class="kb">链接</em></strong><strong class="jf hj"><em class="kb">添加动态内容【Alt+Shift+D】</em></strong>是<strong class="jf hj"> <em class="kb">显示在</em> </strong>下的<strong class="jf hj"> <em class="kb">文本框</em> </strong>。<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">链接</em> </strong>。</strong></strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/dec12b010ba3506c8f290aef455b81f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O8as9DRsma9C_MQepzneww.png"/></div></div></figure><p id="1973" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第十步</em></strong>-的<strong class="jf hj"> <em class="kb">值“<strong class="jf hj"><em class="kb">City name</em></strong>”<strong class="jf hj"><em class="kb">变量</em> </strong>会在<strong class="jf hj"> <em class="kb">表达式语言</em></strong>——<strong class="jf hj">——<em class="kb">@ substring(pipeline(). address line，add(index of(pipeline(). address line，' City:')，6)，sub(sub(indexof(pipeline()参数)。</em></strong></em></strong></p><p id="61b0" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">最后，<strong class="jf hj"> <em class="kb">点击</em></strong><strong class="jf hj"><em class="kb">确定</em></strong><strong class="jf hj"><em class="kb">按钮</em> </strong>。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/779b4a94358039fe65006b9b26894484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N9nVrkseE6AnxUiAxN_WzA.png"/></div></div></figure><ul class=""><li id="86ed" class="kt ku hi jf b jg ko jk kp jo kv js kw jw kx ka ky kz la lb bi translated"><strong class="jf hj"><em class="kb">index of(Pipeline()parameters . address line，' City:') </em> </strong> <strong class="jf hj"> <em class="kb">返回</em></strong><strong class="jf hj"><em class="kb">位置</em><em class="kb">第一个出现</em></strong><strong class="jf hj"><em class="kb">字母</em></strong><strong class="jf hj"><em class="kb">C</em></strong>，<strong class="jf hj"> <em class="kb">字</em></strong></li><li id="1a95" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj"> <em class="kb">加【index of(Pipeline)】parameters . address line，‘City:’(6)</em></strong><strong class="jf hj"><em class="kb">返回</em> </strong>的<strong class="jf hj"> <em class="kb">位置</em>的</strong>的“<strong class="jf hj"> <em class="kb">首字母</em> </strong>的“<strong class="jf hj">串<em class="kb">串</em> </strong>，即<strong class="jf hj"> <em class="kb">持有</em> </strong>的<strong class="jf hj"> <em class="kb">值</em> </strong>的“之”<br/>这里，“<strong class="jf hj"> <em class="kb"> 6 </em> </strong>是<strong class="jf hj"> <em class="kb">增加了</em> </strong>，因为，在“<strong class="jf hj"> <em class="kb">首字母</em> </strong>”的“<strong class="jf hj"> <em class="kb">串</em> </strong>，即<strong class="jf hj"> <em class="kb">持有</em> </strong>的“<strong class="jf hj"> <em class="kb">值</em> </strong>的“T68”</li><li id="0b9a" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj"><em class="kb">index of【Pipeline】(【parameters . address line】‘State:’)</em></strong><strong class="jf hj"><em class="kb">返回</em></strong>the<strong class="jf hj"><em class="kb">Position</em>the</strong>of<strong class="jf hj"><em class="kb">First Occurrence</em></strong>the<em class="kb">Letter</em><strong class="jf hj"><em class="kb">S</em></strong>"，of</li><li id="f296" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj"><em class="kb">sub(index of(Pipeline(). address line，' State:')，2) </em> </strong> <strong class="jf hj"> <em class="kb">返回</em><strong class="jf hj"><em class="kb">位置</em></strong><strong class="jf hj"><em class="kb">最后一个字母</em></strong><strong class="jf hj"><em class="kb">字符串</em> </strong>，即<strong class="jf hj"> <em class="kb">持有</em></strong><strong class="jf hj"><em class="kb">值</em> </strong><br/>在这里，<strong class="jf hj"> <em class="kb"> 2 </em> </strong>是<strong class="jf hj"> <em class="kb">减去</em> </strong>，因为，<strong class="jf hj"> <em class="kb">字符串</em> </strong>，即<strong class="jf hj"> <em class="kb">持有</em></strong><strong class="jf hj"><em class="kb">值</em></strong><strong class="jf hj"><em class="kb">属性</em></strong><strong class="jf hj"/></strong></li><li id="3316" class="kt ku hi jf b jg lc jk ld jo le js lf jw lg ka ky kz la lb bi translated"><strong class="jf hj"><em class="kb">sub(sub(index of(pipeline(). address line，' State:')，2)，add(index of(pipeline(). address line，' City:')，6))返回</em></strong><strong class="jf hj"><em class="kb">差值</em></strong><strong class="jf hj"><em class="kb"/></strong><strong class="jf hj"><em class="kb">位置</em></strong><strong class="jf hj"><em class="kb">的最后一个字母</em> </strong>。 那个<strong class="jf hj"> <em class="kb">保存着</em></strong><strong class="jf hj"><em class="kb">属性</em></strong><strong class="jf hj"><em class="kb">城市:</em></strong><em class="kb">中的</em><strong class="jf hj"><em class="kb">地址线</em> </strong></li></ul><p id="e079" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">的<strong class="jf hj"> <em class="kb">值</em></strong>的<strong class="jf hj"> <em class="kb">变量</em></strong><strong class="jf hj"><em class="kb">城市名</em></strong><em class="kb">现在显示为</em> 以下-</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/034657c046702005a51c9d2e8a42c7a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mJPlhLokmw7RCq91PycnDw.png"/></div></div></figure><p id="39fe" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj"> <em class="kb">第十一步</em> </strong> - <strong class="jf hj"> <em class="kb">调试</em> </strong>流水线<strong class="jf hj"><em class="kb">PL _ UsePipelineVariables</em></strong><strong class="jf hj"><em class="kb">查看</em></strong><strong class="jf hj"><em class="kb">输出的</em></strong><strong class="jf hj"><em class="kb">设置变量</em></strong><strong class="jf hj"><em class="kb">活动</em><strong class="jf hj"> <em class="kb">设置变量</em></strong><strong class="jf hj"><em class="kb">活动</em> </strong>已经<strong class="jf hj"><em class="kb"/></strong>运行成功。</strong></p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/d89686cd4b5fda51dd9395b2bd2dc7a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mLYOoNLFst67_ZhwSEYlzA.png"/></div></div></figure><p id="38e4" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">在<strong class="jf hj"><em class="kb"/></strong><strong class="jf hj"><em class="kb">选项卡</em> </strong>中，将<strong class="jf hj"><em class="kb"/></strong>输出<strong class="jf hj"> <em class="kb">显示为</em></strong><strong class="jf hj"><em class="kb">加尔各答</em></strong>--</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lh"><img src="../Images/4d083f438f13d4e2bff32c54d2e1e1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p3MFpVOdqjqkxX6qnQyHZQ.png"/></div></div></figure></div></div>    
</body>
</html>