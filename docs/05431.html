<html>
<head>
<title>Object Detection on Custom Dataset in 3 Simple Steps Using YOLOv5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨YOLOv5é€šè¿‡3ä¸ªç®€å•çš„æ­¥éª¤å¯¹è‡ªå®šä¹‰æ•°æ®é›†è¿›è¡Œå¯¹è±¡æ£€æµ‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/object-detection-on-custom-dataset-in-3-simple-steps-using-yolov5-e9d4940df16e?source=collection_archive---------2-----------------------#2022-02-27">https://medium.com/codex/object-detection-on-custom-dataset-in-3-simple-steps-using-yolov5-e9d4940df16e?source=collection_archive---------2-----------------------#2022-02-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="11ef" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªå…·æœ‰é«˜æ€§èƒ½æŒ‡æ ‡çš„è‡ªå®šä¹‰æ ‡è®°æ•°æ®çš„å¯¹è±¡æ£€æµ‹æ¡†æ¶ã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/4c12fb0dce3011bb43524706904758c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_roWqoGejW6meKh8iWC4Q.png"/></div></div></figure><p id="281f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æœ¬æ–‡å°†ä¸æä¾›å…³äºå¯¹è±¡æ£€æµ‹å’Œæ‰€æœ‰ç›¸å…³æœ¯è¯­çš„ç»†èŠ‚ã€‚æˆ‘å¸Œæœ›ä½ çŸ¥é“ç‰©ä½“æ£€æµ‹çš„ç†è®ºä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è·³åˆ°å®ç°éƒ¨åˆ†ï¼Œè¿™æ˜¯æœ¬æ–‡çš„ä¸»è¦ç›®æ ‡ã€‚æ–‡ç« åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><ol class=""><li id="5996" class="kf kg hi jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated"><strong class="jl hj">æ•°æ®é›†åˆ›å»º:</strong>æˆ‘å°†è®¨è®ºæˆ‘ä»¬è¾“å…¥æ•°æ®çš„æ ¼å¼ã€‚</li><li id="eff3" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated"><strong class="jl hj">åŸ¹è®­:</strong>åŸ¹è®­æ­¥éª¤ã€æ‰€éœ€çš„ä¾èµ–é¡¹å’Œä»£ç ã€‚</li><li id="91d4" class="kf kg hi jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated"><strong class="jl hj">æµ‹è¯•:</strong>åœ¨ç»™å®šçš„ä¸€ç»„å›¾åƒä¸Šæµ‹è¯•è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚</li></ol><h1 id="7df2" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">A.æ•°æ®é›†åˆ›å»º</h1><p id="b2ee" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¸¦æ ‡ç­¾çš„æ•°æ®é›†æ¥åˆ›å»ºå¯¹è±¡æ£€æµ‹æ¨¡å‹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨RoboFlow [1]æˆ–LabelImg [2]ç­‰åœ¨çº¿å·¥å…·æ‰‹åŠ¨æ³¨é‡Šæ•°æ®é›†ã€‚æœ‰å¿…è¦ä»¥YOLOæ ¼å¼ä¿å­˜å¯¹åº”äºæ¯ä¸ªå›¾åƒçš„æ ‡ç­¾ã€‚åœ¨YOLOï¼Œæˆ‘ä»¬æœ‰å››ä¸ªå€¼æ¥ç¡®å®šè¾¹ç•Œæ¡†<strong class="jl hj"><em class="lq">ã€x _ centerï¼Œy_centerï¼Œwidthï¼Œheightã€‘ï¼Œ</em> </strong>å…¶ä¸­<strong class="jl hj"><em class="lq">'</em></strong><em class="lq">x _ center '</em>å’Œ<em class="lq"> 'y_center' </em>æ˜¯è¾¹ç•Œæ¡†ä¸­å¿ƒçš„å½’ä¸€åŒ–(åœ¨0å’Œ1ä¹‹é—´)åæ ‡ã€‚è¾¹ç•Œæ¡†çš„'<em class="lq">é«˜åº¦'</em>å’Œ'<em class="lq">å®½åº¦'</em>ä¹Ÿåœ¨0å’Œ1ä¹‹é—´æ ‡å‡†åŒ–ã€‚</p><p id="a8af" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºã€‚å›¾åƒåç§°åº”è¯¥ä¸æ ‡ç­¾åç§°ç›¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨<em class="lq">'</em><strong class="jl hj"><em class="lq">train/imagesâ€™</em></strong>æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ªå›¾åƒ<strong class="jl hj"><em class="lq">' 0001 . jpgâ€™</em></strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨<strong class="jl hj"><em class="lq">' train/labelsâ€™</em></strong>æ–‡ä»¶å¤¹ä¸­ä¹Ÿå¿…é¡»æœ‰<strong class="jl hj"><em class="lq">' 0001 . txtâ€™</em></strong>æ–‡ä»¶ã€‚</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="db8a" class="lw ku hi ls b fi lx ly l lz ma"># <em class="lq">dataset folder structure</em></span><span id="d198" class="lw ku hi ls b fi mb ly l lz ma">dataset<br/>  |--- train<br/>  |      |--- images<br/>  |      |--- labels<br/>  |<br/>  |--- valid<br/>  |      |--- images<br/>  |      |--- labels</span></pre><h1 id="8baa" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated"><strong class="ak"> B .åŸ¹è®­</strong></h1><h2 id="7d25" class="lw ku hi bd kv mc md me kz mf mg mh ld js mi mj lf jw mk ml lh ka mm mn lj mo bi translated">1.åˆ›å»ºä¸€ä¸ª. yamlæ–‡ä»¶</h2><p id="1039" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<strong class="jl hj"> <em class="lq"> data.yaml </em> </strong>æ–‡ä»¶ï¼ŒåŒ…å«æ•°æ®é›†çš„è·¯å¾„å’Œè¦æ£€æµ‹çš„ç±»çš„è¯¦ç»†ä¿¡æ¯ã€‚è¯¥æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="1a79" class="lw ku hi ls b fi lx ly l lz ma">train: dataset/train/images<br/>val: dataset/valid/images</span><span id="57f6" class="lw ku hi ls b fi mb ly l lz ma">nc: 1<br/>names: ['flag']</span></pre><p id="ee41" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å…¶ä¸­ï¼Œåœ¨ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬å°†æŒ‡å®šè®­ç»ƒå›¾åƒçš„è·¯å¾„ã€‚åœ¨ç¬¬äºŒè¡Œï¼Œæˆ‘ä»¬å°†æåˆ°éªŒè¯å›¾åƒçš„è·¯å¾„ã€‚ä¹‹åï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ·»åŠ ç±»çš„æ•°é‡ï¼Œåè·Ÿç±»æ ‡ç­¾ã€‚</p><h2 id="c7ae" class="lw ku hi bd kv mc md me kz mf mg mh ld js mi mj lf jw mk ml lh ka mm mn lj mo bi translated">2.æŒ‡å®šæ¨¡å‹æ¶æ„</h2><p id="a4c0" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">æˆ‘ä»¬ç°åœ¨å°†å®šä¹‰YOLOv5æ¨¡å‹æ¶æ„å’Œå‚æ•°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<strong class="jl hj"> custom_yolo.yaml </strong>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«ä»¥ä¸‹å…ƒç´ ã€‚</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="e815" class="lw ku hi ls b fi lx ly l lz ma"># parameters<br/>nc: 1  # number of classes<br/>depth_multiple: 0.33  # model depth multiple<br/>width_multiple: 0.50  # layer channel multiple</span><span id="711e" class="lw ku hi ls b fi mb ly l lz ma"># anchors<br/>anchors:<br/>  - [10,13, 16,30, 33,23]  # P3/8<br/>  - [30,61, 62,45, 59,119]  # P4/16<br/>  - [116,90, 156,198, 373,326]  # P5/32</span><span id="824b" class="lw ku hi ls b fi mb ly l lz ma"># YOLOv5 backbone<br/>backbone:<br/>  # [from, number, module, args]<br/>  [[-1, 1, Focus, [64, 3]],  # 0-P1/2<br/>   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4<br/>   [-1, 3, BottleneckCSP, [128]],<br/>   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8<br/>   [-1, 9, BottleneckCSP, [256]],<br/>   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16<br/>   [-1, 9, BottleneckCSP, [512]],<br/>   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32<br/>   [-1, 1, SPP, [1024, [5, 9, 13]]],<br/>   [-1, 3, BottleneckCSP, [1024, False]],  # 9<br/>  ]</span><span id="98a6" class="lw ku hi ls b fi mb ly l lz ma"># YOLOv5 head<br/>head:<br/>  [[-1, 1, Conv, [512, 1, 1]],<br/>   [-1, 1, nn.Upsample, [None, 2, 'nearest']],<br/>   [[-1, 6], 1, Concat, [1]],  # cat backbone P4<br/>   [-1, 3, BottleneckCSP, [512, False]],  # 13</span><span id="985b" class="lw ku hi ls b fi mb ly l lz ma">[-1, 1, Conv, [256, 1, 1]],<br/>   [-1, 1, nn.Upsample, [None, 2, 'nearest']],<br/>   [[-1, 4], 1, Concat, [1]],  # cat backbone P3<br/>   [-1, 3, BottleneckCSP, [256, False]],  # 17 (P3/8-small)</span><span id="3eca" class="lw ku hi ls b fi mb ly l lz ma">[-1, 1, Conv, [256, 3, 2]],<br/>   [[-1, 14], 1, Concat, [1]],  # cat head P4<br/>   [-1, 3, BottleneckCSP, [512, False]],  # 20 (P4/16-medium)</span><span id="40f7" class="lw ku hi ls b fi mb ly l lz ma">[-1, 1, Conv, [512, 3, 2]],<br/>   [[-1, 10], 1, Concat, [1]],  # cat head P5<br/>   [-1, 3, BottleneckCSP, [1024, False]],  # 23 (P5/32-large)</span><span id="65b4" class="lw ku hi ls b fi mb ly l lz ma">[[17, 20, 23], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)<br/>  ]</span></pre><h2 id="ec3c" class="lw ku hi bd kv mc md me kz mf mg mh ld js mi mj lf jw mk ml lh ka mm mn lj mo bi translated">3.ä»GitHubä¸‹è½½ä»£ç ã€‚</h2><p id="115f" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">æˆ‘ä»¬å°†ä»GitHubå…‹éš†YOLOv5 repoï¼Œç„¶ååœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ä¾èµ–é¡¹[3]ã€‚æ­¥éª¤å¦‚ä¸‹ã€‚</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="c7b7" class="lw ku hi ls b fi lx ly l lz ma">git clone <a class="ae mp" href="https://github.com/ultralytics/yolov5" rel="noopener ugc nofollow" target="_blank">https://github.com/ultralytics/yolov5</a><br/>cd yolov5<br/>pip install requirements.txt</span></pre><h2 id="5828" class="lw ku hi bd kv mc md me kz mf mg mh ld js mi mj lf jw mk ml lh ka mm mn lj mo bi translated">4.å¼€å§‹è®­ç»ƒ</h2><p id="c639" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">å®Œæˆä»£ç å’Œæ‰€éœ€åº“çš„è®¾ç½®åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡ŒåŸ¹è®­éƒ¨åˆ†äº†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è½¬åˆ°train.pyæ‰€åœ¨çš„è·¯å¾„ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="d5be" class="lw ku hi ls b fi lx ly l lz ma"><strong class="ls hj">python</strong> <strong class="ls hj">train.py</strong> <strong class="ls hj">--img</strong> 416 <strong class="ls hj">--batch</strong> 32 <strong class="ls hj">--epochs</strong> 10 <strong class="ls hj">--data</strong> &lt;path to data.yaml file&gt; <strong class="ls hj">--cfg</strong> &lt;path to custom_yolo.yaml file&gt; <strong class="ls hj">--name</strong> &lt;give name to your run&gt;</span></pre><p id="1689" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è®­ç»ƒå®Œæˆåï¼Œä½“é‡å°†å­˜å‚¨åœ¨<strong class="jl hj"><em class="lq">â€˜yolov 5/runs/train/&lt;æ‚¨çš„è·‘æ­¥åç§°&gt;/weights/best . pyâ€™</em></strong>ä¸­</p><h1 id="b480" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">C.æµ‹è¯•</h1><p id="b639" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">ä½¿ç”¨ä¿å­˜çš„æƒé‡ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æµ‹è¯•æ•°æ®é›†è¿›è¡Œæ¨æ–­ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="iy iz ja jb fd lr ls lt lu aw lv bi"><span id="84a1" class="lw ku hi ls b fi lx ly l lz ma"><strong class="ls hj">python</strong> <strong class="ls hj">detect.py</strong> <strong class="ls hj">--weights</strong> &lt;best model weights&gt; <strong class="ls hj">--data</strong> &lt;path to data.yaml file&gt; <strong class="ls hj">--image</strong> 416 <strong class="ls hj">--conf</strong> 0.5 <strong class="ls hj">--source</strong> &lt;test images path&gt;</span></pre><p id="a202" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æµ‹è¯•è¿‡ç¨‹å®Œæˆåï¼Œè¾“å‡ºå°†å­˜å‚¨åœ¨<strong class="jl hj"><em class="lq">ã€yolov 5/runs/detect/exp/ã€‘</em></strong>ä¸­</p><h1 id="5159" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">ç»“è®º</h1><p id="a3a6" class="pw-post-body-paragraph jj jk hi jl b jm ll ij jo jp lm im jr js ln ju jv jw lo jy jz ka lp kc kd ke hb bi translated">æœ¬æ–‡å±•ç¤ºäº†ä¸€ç§ä½¿ç”¨YOLOv5æ–¹æ³•è®­ç»ƒè‡ªå®šä¹‰å¯¹è±¡æ£€æµ‹æ¨¡å‹çš„å¿«é€Ÿè€Œç®€å•çš„æ–¹æ³•ã€‚</p><h1 id="aeb9" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">å‚è€ƒ</h1><div class="mq mr ez fb ms mt"><a href="https://roboflow.com/#annotate" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab dw"><div class="mv ab mw cl cj mx"><h2 class="bd hj fi z dy my ea eb mz ed ef hh bi translated">1.Roboflow:è®©ä½ çš„è½¯ä»¶èƒ½å¤Ÿçœ‹åˆ°å›¾åƒå’Œè§†é¢‘ä¸­çš„ç‰©ä½“</h2><div class="na l"><h3 class="bd b fi z dy my ea eb mz ed ef dx translated">æ ‡ç­¾ä½¿ç”¨ä»»ä½•æ“ä½œç³»ç»Ÿï¼Œæ— éœ€ä¸‹è½½ä»»ä½•è½¯ä»¶ã€‚ä½¿ç”¨æœ€æµè¡Œçš„æ³¨é‡Šæ ¼å¼ï¼ŒåŒ…æ‹¬â€¦</h3></div><div class="nb l"><p class="bd b fp z dy my ea eb mz ed ef dx translated">roboflow.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh jh mt"/></div></div></a></div><div class="mq mr ez fb ms mt"><a href="https://github.com/tzutalin/labelImg" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab dw"><div class="mv ab mw cl cj mx"><h2 class="bd hj fi z dy my ea eb mz ed ef hh bi translated">2.github-Tzu talin/labelimg:ğŸ–ï¸labelimgæ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„å›¾åƒæ³¨é‡Šå·¥å…·å’Œæ ‡ç­¾å¯¹è±¡â€¦</h2><div class="na l"><h3 class="bd b fi z dy my ea eb mz ed ef dx translated">LabelImgæ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„å›¾åƒæ³¨é‡Šå·¥å…·ã€‚å®ƒæ˜¯ç”¨Pythonå†™çš„ï¼Œä½¿ç”¨Qtä½œä¸ºå®ƒçš„å›¾å½¢ç•Œé¢â€¦</h3></div><div class="nb l"><p class="bd b fp z dy my ea eb mz ed ef dx translated">github.com</p></div></div><div class="nc l"><div class="ni l ne nf ng nc nh jh mt"/></div></div></a></div><div class="mq mr ez fb ms mt"><a href="https://github.com/ultralytics/yolov5" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab dw"><div class="mv ab mw cl cj mx"><h2 class="bd hj fi z dy my ea eb mz ed ef hh bi translated">3.GitHub-ultralytics/yolov 5:yolov 5ğŸš€åœ¨PyTorch &gt; ONNX &gt; CoreML &gt; TFLiteä¸­</h2><div class="na l"><h3 class="bd b fi z dy my ea eb mz ed ef dx translated">YOLOv5ğŸš€æ˜¯åœ¨COCOæ•°æ®é›†ä¸Šé¢„å…ˆè®­ç»ƒçš„ä¸€ç³»åˆ—å¯¹è±¡æ£€æµ‹ä½“ç³»ç»“æ„å’Œæ¨¡å‹ï¼Œè¡¨ç¤ºâ€¦</h3></div><div class="nb l"><p class="bd b fp z dy my ea eb mz ed ef dx translated">github.com</p></div></div><div class="nc l"><div class="nj l ne nf ng nc nh jh mt"/></div></div></a></div></div></div>    
</body>
</html>