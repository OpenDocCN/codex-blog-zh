<html>
<head>
<title>“If I created it, only I can move the bricks.” Conditional Rendering in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“如果是我创造的，只有我能搬砖。”React中的条件渲染</h1>
<blockquote>原文：<a href="https://medium.com/codex/if-i-created-it-only-i-can-move-the-bricks-conditional-rendering-in-react-cfd93de9ee17?source=collection_archive---------4-----------------------#2022-01-16">https://medium.com/codex/if-i-created-it-only-i-can-move-the-bricks-conditional-rendering-in-react-cfd93de9ee17?source=collection_archive---------4-----------------------#2022-01-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9a27c0a928169278ba8fc983f15ce9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lhPvYHIXIPfAQnAK"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自乐高创意网站。</figcaption></figure><p id="0b8e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这篇文章是我的关于React的文章的延续。如果您需要了解如何在React/Redux应用程序中实现JWT令牌。请随意阅读。</p><p id="3933" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦我们的用户注册并登录到我们的应用程序，我们必须设置一些规则，用户将有权创建，更新和删除他们想要的所有内容，当他们想要的时候，以他们想要的方式。我们不希望我们的应用程序出现混乱。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jt"><img src="../Images/0536e9d06bb7c671e1048fad59f999a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rWynh9Bs8_BptOAf.jpg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">我们不希望我们的应用程序看起来像一堆乐高积木。</figcaption></figure><p id="41a7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这就是条件渲染发挥作用的地方。在我上一篇与身份验证相关的文章中，我提供了一个我编写的条件呈现，让用户知道他们是否需要登录，或者他们是否可以注销。</p><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="168b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将使导航栏更改为以下内容:</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ka"><img src="../Images/5f6ad9809b670c6b975c99fbffc63a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IvCxVsQP5aHboBnVOTs_cw.jpeg"/></div></div></figure><p id="3bd7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我的React/Redux应用是用来分享和听播客的。因此，我需要为将要登录的用户提供正确的授权。只有创建者可以编辑和添加专题节目到他们的播客中。为了弄清楚我们如何编写条件语句，让我们回到<code class="du kb kc kd ke b">App.js</code>文件中的路径。</p><h1 id="3bca" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">路线</h1><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="00c8" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们使用routerProps将道具传递给播客组件。我们通过将podcast声明为变量并使用<code class="du kb kc kd ke b">.find</code>方法等于<code class="du kb kc kd ke b">routerProps.match.params.id</code>，在<code class="du kb kc kd ke b">/podcasts/:id</code>中找到请求的podcast。如果请求的id存在，它将使用请求的播客数据呈现播客组件。如果id不存在，路径将呈现错误组件。</p><pre class="ju jv jw jx fd ld ke le lf aw lg bi"><span id="c6c0" class="lh kg hi ke b fi li lj l lk ll">return (!!podcast) ? ( &lt;Podcast {...routerProps} {...podcast}/&gt; ) : ( &lt; Error /&gt;)</span></pre><p id="cc64" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">看看我们如何使用条件语句，因为我们发送了一个显示特定播客的请求。如果你需要更多关于路由器道具如何工作的信息，我建议查看<a class="ae js" href="https://v5.reactrouter.com/web/api/Route" rel="noopener ugc nofollow" target="_blank"> react-router文档</a>。</p><h1 id="52a0" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">该组件</h1><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="1aef" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">正如你在上面看到的，这就是整个播客组件。我做的一个好决定是创建功能组件。毕竟，我的主要目标是呈现播客页面。不仅更容易编码，而且你还可以使用钩子，我喜欢使用它们。</p><p id="ea8c" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">首先，我们使用return迭代播客(记住，函数组件中没有render)。我们正在显示播客标题、图像和网站。此外，我们需要在播客页面上的插曲。为了确保我们呈现正确的播客剧集，我们需要告诉应用程序显示那些特定的剧集，如果该播客创建了任何剧集的话。这就是条件渲染发挥作用的地方。在这里，我们将确保<code class="du kb kc kd ke b">history.location.pathname</code>与<code class="du kb kc kd ke b">podcast/:id</code>路线相同。</p><pre class="ju jv jw jx fd ld ke le lf aw lg bi"><span id="f3dc" class="lh kg hi ke b fi li lj l lk ll">{(!!history &amp;&amp; history.location.pathname === `/podcasts/${id}`) ? &lt;EpisodesContainer podcast={{id, title, image_format, website, user_id, episodes}}  currentUser={user} /&gt; : null}        </span></pre><p id="e281" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如您所见，我们调用了整个<code class="du kb kc kd ke b">EpisodesContainer</code>。由于这是一个只有两个剧集组件的小应用程序，我决定同时拥有<code class="du kb kc kd ke b">EpisodeInput</code>和剧集组件，因为我希望用户能同时看到这两个组件。在这行代码中，我们必须调用<code class="du kb kc kd ke b">EpisodeContainer</code>我们传递的播客道具。我们使用道具来观看我们想听的正确剧集，并且还能够向同一个播客添加其他剧集。</p><h1 id="9931" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">集装箱</h1><figure class="ju jv jw jx fd ij"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="e1bd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">上面是整个<code class="du kb kc kd ke b">EpisodesContainer</code>文件的代码，这是一个类组件，我还没有把它改成功能组件。我决定留下我所有的类组件有两个原因，我可以在我的项目中检查类组件，我也想留下我还是训练营学生时的基本框架。</p><p id="11ab" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了让播客创建者添加剧集并进行修改，我们将返回播客组件并添加<code class="du kb kc kd ke b">useSelector</code>挂钩。</p><pre class="ju jv jw jx fd ld ke le lf aw lg bi"><span id="f91d" class="lh kg hi ke b fi li lj l lk ll">import { useSelector } from ‘react-redux’</span><span id="81e1" class="lh kg hi ke b fi lm lj l lk ll">const user = useSelector(state =&gt; state.authorization.currentUser)</span></pre><p id="58cd" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们从react-redux 导入了<code class="du kb kc kd ke b"><a class="ae js" href="https://react-redux.js.org/api/hooks" rel="noopener ugc nofollow" target="_blank">useSelector</a></code> <a class="ae js" href="https://react-redux.js.org/api/hooks" rel="noopener ugc nofollow" target="_blank">钩子，让我们通过创建一个名为User的变量来传递当前的user状态。</a></p><pre class="ju jv jw jx fd ld ke le lf aw lg bi"><span id="d239" class="lh kg hi ke b fi li lj l lk ll">&lt;EpisodesContainer podcast={{id, title, image_format, website, user_id, episodes}} currentUser={user} /&gt;</span></pre><p id="e271" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于redux状态，这是我们调用剧集容器时作为currentUser传递的用户变量。</p><pre class="ju jv jw jx fd ld ke le lf aw lg bi"><span id="dcc6" class="lh kg hi ke b fi li lj l lk ll">{(parseInt(this.props.podcast.user_id) === parseInt(this.props.currentUser?.data?.id)) ? &lt; EpisodeInput podcast={this.props.podcast} /&gt; : null}</span></pre><p id="fa3b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">回到剧集容器，是时候最终编码播客创作者会喜欢的条件呈现了。我们将确保<code class="du kb kc kd ke b">this.props.podcast.user_id</code>和<code class="du kb kc kd ke b">this.props.currentUser.data.id</code>是相同的。当使用<code class="du kb kc kd ke b"><a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt" rel="noopener ugc nofollow" target="_blank">parseInt()</a></code>时，我们比较的id作为整数传递。</p><p id="3434" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果你使用Redux作为状态管理器，一定要记得检查数据树，确保调用你传递的道具和你想要比较的东西。在这种情况下，我想检查播客的user_id是否与currentUser相同。在Redux树中，这个用户id在数据内部。</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ln"><img src="../Images/f346ea8683a8ff95239c49c0492ef08a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x5kYGOjEcRTDX7OR"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图来自这篇关于freeCodeCamp 的强烈推荐<a class="ae js" href="https://www.freecodecamp.org/news/the-best-way-to-architect-your-redux-app-ad9bd16c8e2d/" rel="noopener ugc nofollow" target="_blank">文章。</a></figcaption></figure><p id="f592" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好了，我们终于把事情安排妥当了，一切都很棒。你的应用程序可以像最严谨的乐高积木一样有条理，由一些负责任的用户创建和发布内容。我希望这有助于您在自己的React项目中实现条件渲染，或者更好地理解它。编码快乐！</p><figure class="ju jv jw jx fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/0181bedbc953ec3018be3b3e09307129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f-lTIfYENOeQYYWJ.jpg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">乐高电影，华纳兄弟的财产。</figcaption></figure><h1 id="7d0b" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">摘要</h1><ol class=""><li id="6513" class="lp lq hi iw b ix lr jb ls jf lt jj lu jn lv jr lw lx ly lz bi translated">条件渲染简介</li><li id="3925" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">反应路由器</li><li id="fae8" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">React组件，用户界面呈现</li><li id="03b2" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">用户选择器挂钩</li><li id="f391" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">反应容器</li><li id="7583" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">冗余状态树</li></ol><h1 id="f48f" class="kf kg hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">参考</h1><ol class=""><li id="fc62" class="lp lq hi iw b ix lr jb ls jf lt jj lu jn lv jr lw lx ly lz bi translated">React路由器<a class="ae js" href="https://v5.reactrouter.com/web/api/" rel="noopener ugc nofollow" target="_blank">文档</a></li><li id="8b3c" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">React Redux <a class="ae js" href="https://react-redux.js.org/api" rel="noopener ugc nofollow" target="_blank">文档</a></li><li id="0bfc" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">MDN网络文档，<a class="ae js" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt" rel="noopener ugc nofollow" target="_blank"> parseInt </a></li><li id="f73b" class="lp lq hi iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">构建Redux应用程序的最佳方式是</li></ol></div></div>    
</body>
</html>