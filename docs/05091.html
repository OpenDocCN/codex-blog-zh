<html>
<head>
<title>Extending the SQL and PL/SQL with custom external functions and procedures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用自定义外部函数和过程扩展SQL和PL/SQL</h1>
<blockquote>原文：<a href="https://medium.com/codex/extending-the-sql-and-pl-sql-with-custom-external-functions-and-procedures-214067761061?source=collection_archive---------9-----------------------#2022-01-31">https://medium.com/codex/extending-the-sql-and-pl-sql-with-custom-external-functions-and-procedures-214067761061?source=collection_archive---------9-----------------------#2022-01-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9b65e79ea1e57bc33c3da03ab6320857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t03BYJeezIAEIEOjU9XazQ.png"/></div></div></figure><p id="4e9c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">许多数据库管理系统都有独特的功能。例如，可以使用自定义函数进行扩展，这些函数既可以在过程中使用，也可以直接在SQL查询中使用。</p><p id="c356" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们什么时候需要自定义函数？例如，当我们需要实现非标准计算、编码、加密、转换时。这种功能也有助于与外部系统进行交互。</p><p id="53b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它看起来会像这样:</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="5955" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我不得不在不同的DBMSs中以这种方式重复扩展。今天，我将告诉您如何在Oracle中实现这一点。事实证明，它可以在11g到19c的Oracle版本中工作。</p><blockquote class="ju jv jw"><p id="8997" class="iq ir jx is b it iu iv iw ix iy iz ja jy jc jd je jz jg jh ji ka jk jl jm jn hb bi translated">我想指出的是，它不是一个隐藏函数。它是合法的，由甲骨文公司开发。此外，Oracle自己也建议在某些情况下应用它。</p></blockquote></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="a82d" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">如何用自定义函数扩展SQL和PL/SQL</h1><p id="9f87" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">整个过程相当简单，你只需要遵循四个步骤:</p><ol class=""><li id="4466" class="ll lm hi is b it iu ix iy jb ln jf lo jj lp jn lq lr ls lt bi translated">编写并编译一个实现这个函数的库。</li><li id="490e" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">设置Oracle，以便它可以检测库。</li><li id="434d" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">在Oracle中创建一个将引用我们库的库对象。</li><li id="016d" class="ll lm hi is b it lu ix lv jb lw jf lx jj ly jn lq lr ls lt bi translated">在Oracle中创建一个过程\函数包装器，用于在SQL查询中访问编写的库。</li></ol><p id="7081" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于实验，我通常使用现成的虚拟机实例，它们已经有了一个配置好的Linux、一个Oracle数据库和工作所需的一切。在此下载映像<a class="ae lz" href="https://www.oracle.com/downloads/developer-vm/community-downloads.html" rel="noopener ugc nofollow" target="_blank">，将其导入VirtualBox(在此</a>下载<a class="ae lz" href="https://www.virtualbox.org/" rel="noopener ugc nofollow" target="_blank">)，5分钟后我们就可以使用Oracle 19c得到一个现成的虚拟机。</a></p><p id="1328" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，让我们来看看我们的虚拟机。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="0b2f" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">步骤1:编写库</h1><p id="0e8f" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">这可能是我们必须做的所有事情中最困难的部分。但是如果你按照我的指示去做，一切都会好的。</p><p id="0943" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个例子中的库是用C语言为Linux平台编写的，因为我们有一个运行Linux的虚拟机。</p><blockquote class="ju jv jw"><p id="2543" class="iq ir jx is b it iu iv iw ix iy iz ja jy jc jd je jz jg jh ji ka jk jl jm jn hb bi translated">注意:Oracle允许您包含用C、C++、COBOL、Java编写的库。网等。</p></blockquote><p id="8b3f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">航站楼已经为我们开放了，我们开始吧。</p><p id="8f7d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们检查我们是否在/home/oracle目录中:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="75bd" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost ~]$ pwd</span><span id="daa5" class="mf kj hi mb b fi mk mh l mi mj">/home/oracle</span></pre><p id="fcb0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个目录来放置我们的库。我们姑且称之为，比如，面膜。然后打开它:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="3bd4" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost ~]$ mkdir mask</span><span id="bdc5" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost ~]$ cd mask</span><span id="51d0" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="14a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个扩展名为“c”的文件—这是一个用c语言编写源代码的文件。让我们称它为简单的文件— mask.c:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="2509" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ nano mask.c</span></pre><p id="65f8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">编辑器将打开。然后你可以输入你的文本或者粘贴我的。我的代码可能并不优雅，但它是如何实现两个函数和一个过程的示例:</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="244f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> echo </strong>函数只是返回传递给它的字符串。在将它包含到Oracle中之前，我们将使用它来检查该函数是否工作。</p><p id="f552" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> mask </strong>函数获取一个字符串并将其屏蔽，用字符“X”替换第7个到最后一个字符。</p><p id="8245" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> logit </strong>过程会将传递的字符串写入log.txt文件。是的，你不应该这样做。我们这样做是为了示范。</p><p id="c574" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">插入后，关闭编辑器(按Ctrl-X，然后Y，Enter)并同意以此名称保存它(按Enter)。</p><p id="3983" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建另一个mask.h文件:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="5672" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ nano mask.h</span></pre><p id="cb0e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">和以前一样，键入您自己的文本或复制下面的文本并保存:</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="75d0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">确保两个文件都已创建:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="a95f" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ ls -l</span><span id="5a0a" class="mf kj hi mb b fi mk mh l mi mj">total 8</span><span id="f0e2" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 456 Jan 20 09:46 mask.c</span><span id="fbd8" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 141 Jan 20 09:57 mask.h</span><span id="8cd6" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="5399" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将源文件编译成动态库:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="f855" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ gcc -shared -o libmask.so -fPIC mask.c</span><span id="92fd" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="a1a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">没有错误，太好了！确保库已创建。应该命名为<strong class="is hj"> libmask.so </strong>:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="f23e" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ ls -l</span><span id="8ef4" class="mf kj hi mb b fi mk mh l mi mj">total 20</span><span id="8186" class="mf kj hi mb b fi mk mh l mi mj">-rwxr-xr-x. 1 oracle oinstall 8416 Jan 20 10:02 <strong class="mb hj">libmask.so</strong></span><span id="9035" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 458 Jan 20 10:02 mask.c</span><span id="e6a1" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 143 Jan 20 10:02 mask.h</span><span id="84b3" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="dd44" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们需要检查我们编写和编译的库是否运行。为此，我们将编写一个调用我们的库的小程序:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="b655" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ nano testlib.c</span></pre><p id="e2d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">粘贴此代码:</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="6ebf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关闭、保存、编译:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="2bba" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ gcc -Wall -L/home/oracle/mask -o testlib testlib.c -lmask</span><span id="f8af" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="be83" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到目前为止还可以。我们确保已经创建了我们需要的文件:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="b7cf" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ ls -l</span><span id="92cc" class="mf kj hi mb b fi mk mh l mi mj">total 36</span><span id="5fed" class="mf kj hi mb b fi mk mh l mi mj">-rwxr-xr-x. 1 oracle oinstall 8416 Jan 20 10:02 libmask.so</span><span id="73b1" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 458 Jan 20 10:02 mask.c</span><span id="8180" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 143 Jan 20 10:02 mask.h</span><span id="f7c1" class="mf kj hi mb b fi mk mh l mi mj">-rwxr-xr-x. 1 oracle oinstall 8472 Jan 20 10:14 <strong class="mb hj">testlib</strong></span><span id="ef0b" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 83 Jan 20 10:11 testlib.c</span><span id="61c1" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="bdad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不要忘记设置环境变量:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="4f2f" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ export LD_LIBRARY_PATH=/home/oracle/mask:$LD_LIBRARY_PATH</span><span id="1f93" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="dd15" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，运行:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="31d6" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ ./testlib</span><span id="56fd" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="fcea" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查执行结果。应该已经创建了一个log.txt文件，其中包含“echo testing…”一行:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="494d" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ ls -l</span><span id="0a1d" class="mf kj hi mb b fi mk mh l mi mj">total 40</span><span id="a397" class="mf kj hi mb b fi mk mh l mi mj">-rwxr-xr-x. 1 oracle oinstall 8416 Jan 20 10:02 libmask.so</span><span id="7114" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 16 Jan 20 10:18 <strong class="mb hj">log.txt</strong></span><span id="7af2" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 458 Jan 20 10:02 mask.c</span><span id="00e5" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 143 Jan 20 10:02 mask.h</span><span id="29d4" class="mf kj hi mb b fi mk mh l mi mj">-rwxr-xr-x. 1 oracle oinstall 8472 Jan 20 10:14 testlib</span><span id="8c4e" class="mf kj hi mb b fi mk mh l mi mj">-rw-r — r — . 1 oracle oinstall 83 Jan 20 10:11 testlib.c</span><span id="1ad9" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$ cat log.txt</span><span id="d841" class="mf kj hi mb b fi mk mh l mi mj"><strong class="mb hj">echo testing…</strong></span><span id="f3fa" class="mf kj hi mb b fi mk mh l mi mj">[oracle@localhost mask]$</span></pre><p id="56b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里。这意味着我们的库工作了，我们现在可以开始安装Oracle了。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="6af1" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">步骤2:设置Oracle，以便它可以检测库</h1><p id="1e0d" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">为此，在一个特殊的配置文件extproc.ora中写入我们库的路径。</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="7cbd" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ nano $ORACLE_HOME/hs/admin/extproc.ora</span></pre><p id="fe22" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在打开的窗口中，在末尾添加一行到我们库的路径:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="4973" class="mf kj hi mb b fi mg mh l mi mj">SET EXTPROC_DLLS=ONLY:/home/oracle/mask/libmask.so</span></pre><p id="90ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关闭并保存。</p><p id="64f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，您可以直接在Oracle数据库中创建必要的对象。</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="b22c" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">步骤3:在数据库中创建对象</h1><p id="9ead" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">为了清楚起见，我们将使用已经安装在虚拟机上的Oracle SQL Developer应用程序。让我们运行它。</p><blockquote class="ju jv jw"><p id="b5aa" class="iq ir jx is b it iu iv iw ix iy iz ja jy jc jd je jz jg jh ji ka jk jl jm jn hb bi translated">密码是标准的“甲骨文”。</p></blockquote><p id="e18d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开一个空白的SQL工作表(Alt-F10 ),粘贴命令以创建库:</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="93fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">执行(Ctrl-Enter)。我们会看到库已创建的消息:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="dada" class="mf kj hi mb b fi mg mh l mi mj">Library LIB_MASK compiled</span></pre></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="b2bb" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">步骤4:创建PL\SQL函数和过程，我们将用它们来调用用c编写的函数和过程。</h1><p id="984f" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">为此，我们创建了pkg_mask包，其中描述了一个函数和一个过程。将代码粘贴到工作表中并执行:</p><figure class="jo jp jq jr fd ij"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="39df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">检查包是否已创建:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="a97c" class="mf kj hi mb b fi mg mh l mi mj">Package PKG_MASK compiled</span></pre><p id="aaa5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们可以检查一切是如何工作的。为此，我们执行普通的select，它调用包函数:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="ff2d" class="mf kj hi mb b fi mg mh l mi mj">select pkg_mask.mask(‘1234567890ABCD’) from dual;</span></pre><p id="4989" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是结果—一个屏蔽的字符串。</p><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es ml"><img src="../Images/12436943735685871c8267bba8b375e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/0*R79__fbtv4JGgNh7"/></div></figure><p id="4fa8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一切正常))</p><blockquote class="ju jv jw"><p id="ff12" class="iq ir jx is b it iu iv iw ix iy iz ja jy jc jd je jz jg jh ji ka jk jl jm jn hb bi translated"><em class="hi">注意:如果突然出现错误，请尝试关闭sql developer并再次打开它。</em></p></blockquote><p id="f0fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看第二个logit过程是如何工作的，它将文本写入文件:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="bf53" class="mf kj hi mb b fi mg mh l mi mj">call pkg_mask.logit(‘Test write to log’);</span></pre><figure class="jo jp jq jr fd ij er es paragraph-image"><div class="er es mm"><img src="../Images/4a048afceb4e8cd6ef0b93f098e310cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/0*OeGpe10TSwMPR6-9"/></div></figure><p id="460c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该程序已成功完成。让我们检查是否有日志条目。为此，请返回终端并查看:</p><pre class="jo jp jq jr fd ma mb mc md aw me bi"><span id="6153" class="mf kj hi mb b fi mg mh l mi mj">[oracle@localhost mask]$ cat log.txt</span><span id="783a" class="mf kj hi mb b fi mk mh l mi mj">‘Test write to log’</span></pre><p id="0793" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以我们得到了预期的结果。太好了！</p></div><div class="ab cl kb kc gp kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hb hc hd he hf"><h1 id="4cbe" class="ki kj hi bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">结论</h1><p id="53ef" class="pw-post-body-paragraph iq ir hi is b it lg iv iw ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn hb bi translated">我们已经与您讨论了一个示例，说明如何创建外部库并将其包含到Oracle中，以及如何在查询和过程中轻松使用它们。如果您决定自己用这种方法实现某些东西，那么一定要查看Oracle文档——在不同的版本中可能会有细微的差别。</p><p id="9efe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我喜欢帮助组织用数据来增强他们的业务，所以我很乐意在评论中听到你对上述内容的想法，并随时通过<a class="ae lz" href="https://www.linkedin.com/in/yevgeniysamoilenko/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>与我联系。</p></div></div>    
</body>
</html>