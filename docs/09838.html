<html>
<head>
<title>How I use localStorage in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æˆ‘å¦‚ä½•åœ¨Reactä¸­ä½¿ç”¨æœ¬åœ°å­˜å‚¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/how-i-use-localstorage-in-react-b4109f1e7a3?source=collection_archive---------5-----------------------#2022-11-13">https://medium.com/codex/how-i-use-localstorage-in-react-b4109f1e7a3?source=collection_archive---------5-----------------------#2022-11-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="75bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨webå¼€å‘ä¸­ä½¿ç”¨<code class="du jd je jf jg b">localStorage</code>æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ã€‚ä¸»é¢˜ä¿¡æ¯ç”šè‡³äº§å“æ•°æ®éƒ½å¯ä»¥è½»æ¾ä¿å­˜åœ¨ç”¨æˆ·çš„æµè§ˆå™¨å­˜å‚¨ä¸­ï¼›åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºå¦‚ä½•åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jh"><img src="../Images/f18c6ba89e4810104fd136ae78c2c36d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-7yK7q6W8oN1MR6JanJNtw.png"/></div></div></figure><p id="6724" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹è±¡çš„åŠŸèƒ½ä½¿ç”¨èµ·æ¥ç›¸å½“ç®€å•ã€‚å¯ä»¥ç”¨<code class="du jd je jf jg b">key: string</code>è®¿é—®æ•°æ®ï¼Œæˆ–è€…ç”¨<code class="du jd je jf jg b">key: string</code>å’Œ<code class="du jd je jf jg b">value: string</code>è®¾ç½®æ•°æ®</p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="4108" class="jx jy hi jg b fi jz ka l kb kc">ğŸ§‘â€ğŸ’» <strong class="jg hj">USING localStorage IN REACT IS SIMPLE</strong></span><span id="2c0f" class="jx jy hi jg b fi kd ka l kb kc">type Theme = 'dark' | 'light'</span><span id="0a19" class="jx jy hi jg b fi kd ka l kb kc">const [theme, setTheme] = useState&lt;Theme&gt;(<strong class="jg hj">localStorage.getItem('theme')</strong> as Theme || 'light')</span><span id="ad07" class="jx jy hi jg b fi kd ka l kb kc">useEffect(() =&gt; {<br/>  <strong class="jg hj">localStorage.setItem('theme', theme)</strong><br/>}, [theme])</span></pre><p id="cc69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç”šè‡³å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿå¯ä»¥ç”¨<code class="du jd je jf jg b">JSON.stringify()</code>å­˜å‚¨ä¸ºä¸€ä¸ªå€¼</p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="1b2d" class="jx jy hi jg b fi jz ka l kb kc">ğŸ‘ <strong class="jg hj">OBJECTS AND ARRAYS SHOULD BE STORED WHEN DATA IS COMPLEX</strong></span><span id="737f" class="jx jy hi jg b fi kd ka l kb kc">useEffect(() =&gt; {<br/>  const colors = ['#02D4F6', '#02D4B8', 'ğŸ´']<br/>  const theme = {<br/>    preferred: 'light',<br/>    actual: 'dark',<br/>    horse: 'ğŸ´'<br/>  }<br/>  <strong class="jg hj">localStorage.setItem('list', JSON.stringify(colors))</strong><br/>  <strong class="jg hj">localStorage.setItem('list', JSON.stringify(theme))</strong><br/>}, [])</span></pre><p id="8a2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å› ä¸ºæˆ‘ä»¬åªèƒ½ä¿å­˜<code class="du jd je jf jg b">string</code>ç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥å¯¹è±¡å’Œæ•°ç»„å¿…é¡»æ€»æ˜¯åœ¨<code class="du jd je jf jg b">setItem()</code>ä¸Š<code class="du jd je jf jg b">JSON.stringify()</code> edï¼Œåœ¨<code class="du jd je jf jg b">getItem()</code>ä¸Š<code class="du jd je jf jg b">JSON.parse()</code> dã€‚è¿™æœ€ç»ˆä¼šå˜å¾—å¤šä½™ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ç”¨ç¨‹åºæ¥ä¸ºæˆ‘ä»¬å®Œæˆè¿™é¡¹å·¥ä½œ</p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="2c6e" class="jx jy hi jg b fi jz ka l kb kc">ğŸ‘” <strong class="jg hj">CREATE storage.ts IN src/utils</strong></span><span id="a5cc" class="jx jy hi jg b fi kd ka l kb kc">const storage = {<br/><strong class="jg hj">  get: (key: string): string | null =&gt; {<br/>    const result = localStorage.getItem(key)<br/>    if (!result) return null<br/>    try {<br/>      return JSON.parse(result)<br/>    } catch {<br/>      return result<br/>    }<br/>  }</strong><br/>}</span><span id="2805" class="jx jy hi jg b fi kd ka l kb kc">export default storage</span></pre><p id="9770" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬è‡ªå·±çš„<code class="du jd je jf jg b">storage</code>å¯¹è±¡æ˜¯ä½¿ç”¨<code class="du jd je jf jg b">get</code>å‡½æ•°å±æ€§åˆ›å»ºçš„ã€‚å®ƒçš„èŒè´£æ˜¯ä½¿ç”¨ä¸€ä¸ª<code class="du jd je jf jg b">key</code>å‚æ•°ä»<code class="du jd je jf jg b">localStorage</code>è·å–ä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶å°è¯•è§£æç»“æœã€‚å¦‚æœç»“æœæ˜¯ä¸€ä¸ª<code class="du jd je jf jg b">string</code>ï¼Œå®ƒå°†è¿”å›å®ƒè€Œä¸è¿›è¡Œè§£æã€‚å¦‚æœå€¼æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå®ƒå¯ä»¥è§£æå¹¶è¿”å›å®ƒã€‚</p><p id="2edc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨<code class="du jd je jf jg b">set</code>æ‰©å±•æˆ‘ä»¬çš„æ•ˆç”¨</p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="652b" class="jx jy hi jg b fi jz ka l kb kc">ğŸ“ˆ <strong class="jg hj">EXTEND UTILITY WITH set()</strong></span><span id="d9e7" class="jx jy hi jg b fi kd ka l kb kc">const storage = {<br/>  get: (key: string): string | null =&gt; {<br/>    const result = localStorage.getItem(key)<br/>    if (!result) return null<br/>    try {<br/>      return JSON.parse(result)<br/>    } catch {<br/>      return result<br/>    }<br/>  },<br/>  <strong class="jg hj">set: (key: string, value: string | {} | []): void =&gt; {<br/>    localStorage.setItem(<br/>      key,<br/>      typeof value === 'string' ? value : JSON.stringify(value)<br/>    )<br/>  }</strong><br/>}</span><span id="7596" class="jx jy hi jg b fi kd ka l kb kc">export default storage</span></pre><p id="c15f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">é™¤äº†ä¸€ä¸ª<code class="du jd je jf jg b">key</code>ï¼Œ<code class="du jd je jf jg b">set</code>è¿˜æœ‰ä¸€ä¸ª<code class="du jd je jf jg b">value</code>å‚æ•°ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯¹è±¡ï¼Œæˆ–è€…æ•°ç»„ã€‚è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†<code class="du jd je jf jg b">localStorage</code>ä¸­<code class="du jd je jf jg b">key</code>ä¸‹çš„<code class="du jd je jf jg b">value</code>ä¿å­˜ï¼Œå¦‚æœ<code class="du jd je jf jg b">value</code>çš„ç±»å‹ä¸æ˜¯<code class="du jd je jf jg b">string</code>ï¼Œä¿å­˜å‰å¿…é¡»<code class="du jd je jf jg b">JSON.stringify()</code>è¯¥<code class="du jd je jf jg b">value</code>ã€‚</p><p id="5b11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å½“ç„¶ï¼ŒæŒ‰ç…§è¿™ç§æ¨¡å¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é¢å¤–çš„<code class="du jd je jf jg b">localStorage</code>åŠŸèƒ½æ¥æ‰©å±•è¿™ä¸ªå®ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼Œæ¯”å¦‚<code class="du jd je jf jg b">clear()</code></p><pre class="ji jj jk jl fd jt jg ju jv aw jw bi"><span id="2489" class="jx jy hi jg b fi jz ka l kb kc">ğŸš€ <strong class="jg hj">ADD MORE FIELDS</strong></span><span id="e9bc" class="jx jy hi jg b fi kd ka l kb kc">const storage = {<br/>  get: (key: string): string | null =&gt; {<br/>    const result = localStorage.getItem(key)<br/>    if (!result) return null<br/>    try {<br/>      return JSON.parse(result)<br/>    } catch {<br/>      return result<br/>    }<br/>  },<br/>  set: (key: string, value: string | {} | []): void =&gt; {<br/>    localStorage.setItem(<br/>      key,<br/>      typeof value === 'string' ? value : JSON.stringify(value)<br/>    )<br/>  },<br/><strong class="jg hj">  clear: (): void =&gt; {<br/>    localStorage.clear()<br/>  }</strong><br/>}</span><span id="da30" class="jx jy hi jg b fi kd ka l kb kc">export default storage</span></pre><p id="4346" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ç°åœ¨ä½¿ç”¨éå¸¸ç®€å•ï¼›å­˜å‚¨å¯¹è±¡åªéœ€å¯¼å…¥åˆ°é¡µé¢æˆ–ç»„ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨é€‚å½“çš„å‚æ•°æ‰§è¡Œã€‚</p><p id="c507" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ å¯¹è¿™ä¸ªå®ç°æœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿè¿™å¯¹ä½ æœ‰æ„ä¹‰å—ï¼Ÿä¼šè®©ä½ çš„ç”Ÿæ´»æ›´è½»æ¾å—ï¼Ÿè¯·åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æƒ³æ³•ã€‚</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="4240" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ‘‹æˆ‘å¸Œæœ›è¿™åœ¨ä½ å¯»æ‰¾æ–°çš„å­¦ä¹ ææ–™æ—¶å¯¹ä½ æœ‰ç”¨ã€‚æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼å¦‚æœä½ æƒ³åœ¨æœªæ¥è¯»åˆ°æ›´å¤šè¿™æ ·çš„æ•…äº‹ï¼Œè¯·è®¢é˜…æˆ‘çš„ç”µå­é‚®ä»¶åˆ—è¡¨ã€‚</p></div></div>    
</body>
</html>