<html>
<head>
<title>How to Easily Transform Any Pandas DataFrame to HTML Tables in Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Django中轻松地将任何熊猫数据帧转换成HTML表格</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-easily-transform-any-pandas-dataframe-to-html-tables-in-django-ad17fb84edbc?source=collection_archive---------4-----------------------#2022-08-15">https://medium.com/codex/how-to-easily-transform-any-pandas-dataframe-to-html-tables-in-django-ad17fb84edbc?source=collection_archive---------4-----------------------#2022-08-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="0cbd" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">一个真实的例子和自定义Django模板标签</h2></div><p id="227d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大家好。如今，我是一个团队的成员，该团队正在为土耳其最大的建筑公司之一的云BI基础设施项目提供咨询。在这篇文章中，我将写一个我今天早上遇到的真实例子。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/a1b9492e23b9ce5e03254c81666568ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QczRZrmxYH4RQtIA8mI2cw.jpeg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">照片由<a class="ae kj" href="https://unsplash.com/@imperiumnordique?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">海伦娜·赫兹</a>在<a class="ae kj" href="https://unsplash.com/s/photos/template-tag?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="3cef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我正在为这个项目开发一个Django项目。Django应用程序将被用作网关，向董事会成员显示数据仓库中的一些表格。我必须开发4个数据表页面来过滤表格并显示它们。数据必须从CSV文件中读取。</p><p id="c6d4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我为处理这项任务而开发的定制模板标签工作得很好。您可以通过下面的链接获得更多详细信息。</p><div class="kk kl ez fb km kn"><a href="https://docs.djangoproject.com/en/4.1/howto/custom-template-tags/" rel="noopener  ugc nofollow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">如何创建自定义模板标签和过滤器| Django文档| Django</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">Django的模板语言带有各种各样的内置标签和过滤器，旨在解决表示问题…</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">docs.djangoproject.com</p></div></div></div></a></div></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><p id="5cac" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另外，你可以通过下面的链接阅读本文的第二部分。</p><div class="kk kl ez fb km kn"><a rel="noopener follow" target="_blank" href="/codex/a-boilerplate-to-self-hosted-continuous-delivery-django-apps-part-2-f358274a0ac3"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">自托管连续交付Django应用程序的样板文件(第2部分)</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">Django，Docker，GitHub操作，工作流，自托管，自定义运行器</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">medium.com</p></div></div><div class="le l"><div class="lf l lg lh li le lj kd kn"/></div></div></a></div></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><h1 id="9a05" class="lk ll hi bd lm ln lo lp lq lr ls lt lu io lv ip lw ir lx is ly iu lz iv ma mb bi translated">自定义模板标签</h1><p id="7a0c" class="pw-post-body-paragraph ix iy hi iz b ja mc ij jc jd md im jf jg me ji jj jk mf jm jn jo mg jq jr js hb bi translated">首先，我在我的app文件夹下创建了<code class="du mh mi mj mk b">templatetags</code>文件夹。然后，我创建了<code class="du mh mi mj mk b">datagateway_template_tags.py</code>文件。在我的模板文件中，我将直接加载这个文件。</p><pre class="ju jv jw jx fd ml mk mm mn aw mo bi"><span id="a662" class="mp ll hi mk b fi mq mr l ms mt">from django import template</span><span id="9dad" class="mp ll hi mk b fi mu mr l ms mt">register = template.Library()</span><span id="716a" class="mp ll hi mk b fi mu mr l ms mt">def convert_data_frame_to_html_table_headers(df):</span><span id="329e" class="mp ll hi mk b fi mu mr l ms mt">  html = "&lt;tr&gt;"</span><span id="8fc4" class="mp ll hi mk b fi mu mr l ms mt">  for col in df.columns:</span><span id="3bf1" class="mp ll hi mk b fi mu mr l ms mt">  html += f"&lt;th&gt;{col}&lt;/th&gt;"</span><span id="1cbb" class="mp ll hi mk b fi mu mr l ms mt">  html += "&lt;/tr&gt;"</span><span id="3ab7" class="mp ll hi mk b fi mu mr l ms mt">  return html<br/></span><span id="e921" class="mp ll hi mk b fi mu mr l ms mt">def convert_data_frame_to_html_table_rows(df):</span><span id="425e" class="mp ll hi mk b fi mu mr l ms mt">   html = ""</span><span id="8a9d" class="mp ll hi mk b fi mu mr l ms mt">   for row in df.values:</span><span id="cfb5" class="mp ll hi mk b fi mu mr l ms mt">      row_html = "&lt;tr&gt;"</span><span id="bbc0" class="mp ll hi mk b fi mu mr l ms mt">      for value in row:</span><span id="8c68" class="mp ll hi mk b fi mu mr l ms mt">         row_html += f"&lt;td&gt;{value}&lt;/td&gt;"</span><span id="4540" class="mp ll hi mk b fi mu mr l ms mt">      row_html += "&lt;/tr&gt;"<br/>   html += row_html<br/>   return html<br/></span><span id="f01f" class="mp ll hi mk b fi mu mr l ms mt">register.filter("convert_data_frame_to_html_table_rows", convert_data_frame_to_html_table_rows)</span><span id="1349" class="mp ll hi mk b fi mu mr l ms mt">register.filter("convert_data_frame_to_html_table_headers", convert_data_frame_to_html_table_headers)</span></pre><p id="a33e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些模板标签函数需要获得至少1个参数，这是我们任务的数据帧。然后，我创建一个HTML字符串来呈现模板文件。</p><h1 id="cb3f" class="lk ll hi bd lm ln mv lp lq lr mw lt lu io mx ip lw ir my is ly iu mz iv ma mb bi translated">使用标签</h1><p id="d08c" class="pw-post-body-paragraph ix iy hi iz b ja mc ij jc jd md im jf jg me ji jj jk mf jm jn jo mg jq jr js hb bi translated">在我的模板文件中，我正在加载我创建的模块。</p><pre class="ju jv jw jx fd ml mk mm mn aw mo bi"><span id="db56" class="mp ll hi mk b fi mq mr l ms mt">{% extends 'partials/base.html' %}</span><span id="7cfb" class="mp ll hi mk b fi mu mr l ms mt">{% load static %}</span><span id="5f42" class="mp ll hi mk b fi mu mr l ms mt"># this is the file that I created to store my template tags<br/>{% load datagateway_template_tags %}</span></pre><p id="44a0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后，我通过将从后端视图函数发送的数据帧传递给模板来使用标记。</p><pre class="ju jv jw jx fd ml mk mm mn aw mo bi"><span id="05d3" class="mp ll hi mk b fi mq mr l ms mt">&lt;table <em class="ld">id</em>="efficiency-hub-table" <em class="ld">class</em>="table table-bordered dt-responsive nowrap w-100"&gt;</span><span id="0f6e" class="mp ll hi mk b fi mu mr l ms mt"> &lt;thead&gt;<br/>  {{ table_data | convert_data_frame_to_html_table_headers | safe}}<br/> &lt;/thead&gt;<br/> &lt;tbody&gt;<br/>   {{table_data | convert_data_frame_to_html_table_rows | safe}}<br/> &lt;/tbody&gt;</span><span id="d192" class="mp ll hi mk b fi mu mr l ms mt">&lt;/table&gt;</span></pre><h1 id="8e14" class="lk ll hi bd lm ln mv lp lq lr mw lt lu io mx ip lw ir my is ly iu mz iv ma mb bi translated">最后</h1><p id="8161" class="pw-post-body-paragraph ix iy hi iz b ja mc ij jc jd md im jf jg me ji jj jk mf jm jn jo mg jq jr js hb bi translated">这是一个将Pandas数据帧转换成HTML表格的简单方法。希望它能帮助您开发自己的项目并将数据框嵌入到您的网页中。另外，我可以在模板函数上使用<code class="du mh mi mj mk b">mark_safe</code>函数。然而，我更喜欢在模板上使用<code class="du mh mi mj mk b">|safe</code>标签。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es na"><img src="../Images/7674adacd6b0ec80274c16351285a884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UclN8bsqFIMAg64rpJj7wg.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">作者图片</figcaption></figure><p id="27bc" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">问候</p></div><div class="ab cl kw kx gp ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="hb hc hd he hf"><p id="48af" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另外，你可以通过下面的链接阅读本文的第二部分。</p><div class="kk kl ez fb km kn"><a rel="noopener follow" target="_blank" href="/codex/a-boilerplate-to-self-hosted-continuous-delivery-django-apps-part-2-f358274a0ac3"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hj fi z dy ks ea eb kt ed ef hh bi translated">自托管连续交付Django应用程序的样板文件(第2部分)</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">Django，Docker，GitHub操作，工作流，自托管，自定义运行器</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">medium.com</p></div></div><div class="le l"><div class="lf l lg lh li le lj kd kn"/></div></div></a></div></div></div>    
</body>
</html>