<html>
<head>
<title>Observer Pattern In PHP 8+</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP 8+ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/observer-pattern-in-php-8-569c71dd7837?source=collection_archive---------3-----------------------#2021-07-14">https://medium.com/codex/observer-pattern-in-php-8-569c71dd7837?source=collection_archive---------3-----------------------#2021-07-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/5494673a982148dc7234a6807f21746e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DoB5LSpOU6pdXhQ-ASGyVg.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">å›¾ç‰‡æ¥è‡ª<a class="ae hv" href="https://pixabay.com/pt/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1209011" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>çš„<a class="ae hv" href="https://pixabay.com/photos/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1209011" rel="noopener ugc nofollow" target="_blank">å…è´¹ç…§ç‰‡</a></figcaption></figure><div class=""/><p id="1c3e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨PHP 8+ä¸­å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„æœ€ç®€å•æŒ‡å—</p><p id="0e1d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PHPä¸–ç•Œä¸­æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€æ˜¯<strong class="ix hz">è§‚å¯Ÿå™¨</strong>ï¼Œå½“æˆ‘ä»¬æœ‰å‡ ä¸ªä¾èµ–äºå¦ä¸€ä¸ªå¯¹è±¡çš„å¯¹è±¡ï¼Œå¹¶ä¸”éœ€è¦åœ¨é‚£ä¸ªå¯¹è±¡çš„çŠ¶æ€æ”¹å˜æ—¶æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œæˆ–è€…ä¸€ä¸ªå¯¹è±¡éœ€è¦é€šçŸ¥å…¶ä»–äººè€Œä¸çŸ¥é“ä»–ä»¬æ˜¯è°æˆ–è€…æœ‰å¤šå°‘äººæ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚</p><h1 id="bb19" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ğŸ§è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼</h1><p id="5311" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><strong class="ix hz">è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒè®©ä¸€ä¸ªå¯¹è±¡åœ¨äº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚çŠ¶æ€æ”¹å˜æˆ–æ–¹æ³•æ‰§è¡Œã€‚</p><p id="052b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è¿™ä¸ªæ¨¡å¼ç”±ä¸€ä¸ªåä¸º<strong class="ix hz">å¯è§‚å¯Ÿ</strong>çš„å¯¹è±¡(æˆ–æŸäº›æ¥æºä¸­çš„<strong class="ix hz">ä¸»ä½“</strong> / <strong class="ix hz">å‘å¸ƒè€…</strong>)å’Œè®¸å¤šå…¶ä»–åä¸º<strong class="ix hz">è§‚å¯Ÿè€…</strong>(æˆ–<strong class="ix hz">è®¢é˜…è€…</strong>)çš„å¯¹è±¡ç»„æˆã€‚<strong class="ix hz">å¯è§‚å¯Ÿå¯¹è±¡</strong>æ‹¥æœ‰ä¸€ä¸ª<strong class="ix hz">è§‚å¯Ÿå¯¹è±¡</strong>çš„åˆ—è¡¨ä½œä¸ºå±æ€§ï¼Œå¹¶è‡ªåŠ¨é€šçŸ¥å®ƒä»¬ä»»ä½•çŠ¶æ€å˜åŒ–ï¼Œé€šå¸¸è°ƒç”¨ä¸€ä¸ªè§‚å¯Ÿå¯¹è±¡çš„æ–¹æ³•ã€‚</p><p id="e609" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è§‚å¯Ÿè€…æ¨¡å¼é€šå¸¸ç”¨äºåœ¨åº”ç”¨ç¨‹åº<strong class="ix hz">ä¸­å®ç°äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸ä¼šåœ¨ä¸»ç±»å’Œäº‹ä»¶ç›‘å¬å™¨çš„å¯¹è±¡</strong>ä¹‹é—´åˆ›å»ºä¾èµ–å…³ç³»ã€‚</p><h1 id="4892" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ğŸ‘·â€â™‚ï¸å®æ–½</h1><p id="fd46" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ç³»ç»Ÿï¼Œå®ƒå¯ä»¥åˆ›å»ºç”¨æˆ·å¹¶å°†ä»–ä»¬çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ç„¶åæˆ‘ä»¬å°†åœ¨æ¯æ¬¡åˆ›å»ºç”¨æˆ·æ—¶å®ç°ä¸€ä¸ªé€šçŸ¥</p><p id="3467" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåªæœ‰åç§°å’Œç”µå­é‚®ä»¶å±æ€§çš„ç”¨æˆ·ç±»ã€‚</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="2fbf" class="lg ju hy lc b fi lh li l lj lk">class <strong class="lc hz">User</strong><br/>{<br/>    public function __construct(<br/>        private string $name,<br/>        private string $email<br/>    ) {}<br/>}</span></pre><p id="f172" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç„¶åï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<em class="kw">ç”¨æˆ·å­˜å‚¨åº“</em>æ¥å­˜å‚¨å’Œå¤„ç†ç”¨æˆ·æ•°æ®:</p><blockquote class="ll lm ln"><p id="a357" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated">UsersRepositoryç±»å°†å®ç°<strong class="ix hz">å•ä¾‹æ¨¡å¼</strong>,ä»¥ä¿è¯æ•°æ®è¢«æ­£ç¡®æŒä¹…åŒ–</p></blockquote><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="84d1" class="lg ju hy lc b fi lh li l lj lk">class <strong class="lc hz">UsersRepository</strong><br/>{<br/>    private array $users = [];</span><span id="ee5f" class="lg ju hy lc b fi lr li l lj lk">    private static $instance;</span><span id="7a39" class="lg ju hy lc b fi lr li l lj lk">    private function __construct() {}<br/>    private function __clone() {}</span><span id="21e8" class="lg ju hy lc b fi lr li l lj lk">    public function <strong class="lc hz">createUser</strong>(<em class="kw">User</em> $user)<br/>    {<br/>        <em class="kw">$this</em>-&gt;users[] = $user;<br/>    }</span><span id="7c74" class="lg ju hy lc b fi lr li l lj lk">    public static function <strong class="lc hz">getInstance</strong>()<br/>    {<br/>        if(<em class="kw">self</em>::$instance === null) {<br/>            self::$instance = new self;<br/>        }<br/>        return self::$instance;<br/>    }<br/>}</span></pre><p id="0c66" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">PHPæœ‰å†…ç½®çš„æ¥å£æ¥å¸®åŠ©æˆ‘ä»¬å®ç°è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ã€‚ä¸ºäº†å®ç°<strong class="ix hz">å¯è§‚å¯Ÿçš„</strong>å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a class="ae hv" href="https://php.net/manual/en/class.splsubject.php" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">spl subject</strong></a><strong class="ix hz"/>æ¥å£ï¼Œå¯¹äº<strong class="ix hz">è§‚å¯Ÿè€…</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a class="ae hv" href="https://www.php.net/manual/en/class.splobserver.php" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">spl observer</strong></a><strong class="ix hz"/>æ¥å£ã€‚</p><p id="6553" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨<em class="kw"> UsersRepository </em>ç±»ä¸Šå®ç°<strong class="ix hz"> SplSubject </strong>ï¼Œè¿™æ ·ï¼Œå½“æ‚¨çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œè¯¥ç±»å°†èƒ½å¤Ÿé€šçŸ¥å…¶ä»–ç±»ã€‚</p><blockquote class="ll lm ln"><p id="0e8d" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><strong class="ix hz"> SplSubject </strong>æ¥å£æŒ‡å®šæˆ‘ä»¬å¿…é¡»å®ç°<a class="ae hv" href="https://www.php.net/manual/en/splsubject.attach.php" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz"> attach </strong> </a>æ–¹æ³•æ¥è®¢é˜…ä¸€ä¸ªæ–°çš„è§‚å¯Ÿè€…ï¼Œå®ç°<a class="ae hv" href="https://www.php.net/manual/en/splsubject.detach.php" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz"> detach </strong> </a>æ–¹æ³•æ¥å–æ¶ˆè®¢é˜…ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œå®ç°<a class="ae hv" href="https://www.php.net/manual/en/splsubject.notify.php" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz"> notify </strong> </a>æ–¹æ³•é€šçŸ¥æ‰€æœ‰è®¢é˜…çš„è§‚å¯Ÿè€…ã€‚</p></blockquote><p id="fc98" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">é¦–å…ˆï¼Œæˆ‘ä¼šå±•ç¤ºæœ€ç»ˆçš„ç»“æœï¼Œç„¶åæˆ‘ä»¬ä¸€èµ·ä¸€æ­¥ä¸€æ­¥åœ°æ£€æŸ¥ä»£ç ã€‚å› æ­¤ï¼Œæœ€åä¸€ä¸ªç±»å°†æ˜¯è¿™æ ·çš„:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="e7d5" class="lg ju hy lc b fi lh li l lj lk">class <strong class="lc hz">UsersRepository</strong> implements SplSubject<br/>{<br/>    private <strong class="lc hz">\SplObjectStorage</strong> $observers;<br/>    <br/>    private array $users = [];</span><span id="f48b" class="lg ju hy lc b fi lr li l lj lk">    private static $instance;</span><span id="75a6" class="lg ju hy lc b fi lr li l lj lk">    private function __construct()<br/>    {<br/>        $this-&gt;observers = <strong class="lc hz">new \SplObjectStorage</strong>;<br/>    }<br/>    private function __clone() {}</span><span id="8d71" class="lg ju hy lc b fi lr li l lj lk">    public function createUser(<em class="kw">User</em> $user): void<br/>    {<br/>        <em class="kw">$this</em>-&gt;users[] = $user;<br/><strong class="lc hz">        $this-&gt;notify();</strong><br/>    }</span><span id="ab18" class="lg ju hy lc b fi lr li l lj lk">    public function <strong class="lc hz">attach</strong>(\SplObserver $observer): void<br/>    {<br/>        $this-&gt;observers-&gt;attach($observer);<br/>    }</span><span id="dec0" class="lg ju hy lc b fi lr li l lj lk">    public function <strong class="lc hz">detach</strong>(\SplObserver $observer): void<br/>    {<br/>        $this-&gt;observers-&gt;detach($observer);<br/>    }</span><span id="b35c" class="lg ju hy lc b fi lr li l lj lk">    public function <strong class="lc hz">notify</strong>(): void<br/>    {<br/>        foreach($this-&gt;observers as $observer) {<br/>            $observer-&gt;update($this);<br/>        }<br/>    }</span><span id="a2e8" class="lg ju hy lc b fi lr li l lj lk">    public static function getInstance(): self<br/>    {<br/>        if(<em class="kw">self</em>::$instance === null) {<br/>            self::$instance = new self;<br/>        }<br/>        return self::$instance;<br/>    }<br/>}</span></pre><p id="1ab1" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç¬¬ä¸€æ­¥æ˜¯å®ç°å±æ€§ï¼Œè¯¥å±æ€§å°†ä¿å­˜æ‰€æœ‰é™„åŠ åˆ°<strong class="ix hz">ä¸»é¢˜</strong>çš„è§‚å¯Ÿå™¨ï¼Œå¹¶åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–å®ƒ:</p><blockquote class="ll lm ln"><p id="38ac" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated">PHPæœ‰ä¸€ä¸ªå¤„ç†å¯¹è±¡é›†çš„å†…ç½®ç±»å«åš<a class="ae hv" href="https://www.php.net/manual/en/class.splobjectstorage.php" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">SplObjectStorage</strong></a>ã€‚å®ƒåœ¨éœ€è¦å”¯ä¸€æ ‡è¯†å¯¹è±¡çš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼Œå¹¶å°†åœ¨æˆ‘ä»¬çš„<strong class="ix hz">è§‚å¯Ÿè€…æ¨¡å¼</strong>å®ç°ä¸­ç”¨æ¥ä¿å­˜æˆ‘ä»¬çš„<strong class="ix hz">è§‚å¯Ÿè€…</strong>é›†åˆã€‚</p></blockquote><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="0e50" class="lg ju hy lc b fi lh li l lj lk">private <strong class="lc hz">\SplObjectStorage</strong> $observers;</span><span id="ab77" class="lg ju hy lc b fi lr li l lj lk">private function __construct()<br/>{<br/>    $this-&gt;observers = <strong class="lc hz">new \SplObjectStorage</strong>;<br/>}</span></pre><p id="1cab" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç„¶åï¼Œå‰©ä¸‹çš„å°±æ˜¯å®ç°æ–¹æ³•æ¥å¤„ç†è®¢é˜…(<strong class="ix hz">é™„åŠ </strong>)ã€å–æ¶ˆè®¢é˜…(<strong class="ix hz">åˆ†ç¦»</strong>)å’Œé€šçŸ¥(<strong class="ix hz">é€šçŸ¥</strong>)æ–¹æ³•ã€‚å¯¹äºç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae hv" href="https://www.php.net/manual/en/splobjectstorage.attach.php" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz"> attach </strong> </a>å’Œ<a class="ae hv" href="https://www.php.net/manual/en/splobjectstorage.detach.php" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">detach</strong></a>SplObjectStorageçš„æ–¹æ³•ï¼Œå°†ä¸€ä¸ªè§‚å¯Ÿè€…ä½œä¸ºå‚æ•°ä¼ é€’ã€‚å¯¹äºæœ€åä¸€ä¸ªï¼Œæˆ‘ä»¬å°†éå†æˆ‘ä»¬çš„è§‚å¯Ÿè€…æ± ï¼Œè°ƒç”¨æ¯ä¸ªè§‚å¯Ÿè€…çš„<strong class="ix hz"> update </strong>æ–¹æ³•ï¼Œå°†Subjectç±»ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p><blockquote class="ll lm ln"><p id="c655" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated">åœ¨<strong class="ix hz"> createUser </strong>æ–¹æ³•ä¸­åˆ›å»ºç”¨æˆ·åï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ªå¯¹<strong class="ix hz"> notify </strong>æ–¹æ³•çš„è°ƒç”¨ã€‚</p></blockquote><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="8776" class="lg ju hy lc b fi lh li l lj lk">public function createUser(<em class="kw">User</em> $user): void<br/>{<br/>    <em class="kw">$this</em>-&gt;users[] = $user;<br/><strong class="lc hz">    $this-&gt;notify();</strong><br/>}</span><span id="b0c1" class="lg ju hy lc b fi lr li l lj lk">public function <strong class="lc hz">attach</strong>(\SplObserver $observer): void<br/>{<br/>    $this-&gt;observers-&gt;<strong class="lc hz">attach</strong>($observer);<br/>}</span><span id="c706" class="lg ju hy lc b fi lr li l lj lk">public function <strong class="lc hz">detach</strong>(\SplObserver $observer): void<br/>{<br/>    $this-&gt;observers-&gt;<strong class="lc hz">detach</strong>($observer);<br/>}</span><span id="346d" class="lg ju hy lc b fi lr li l lj lk">public function <strong class="lc hz">notify</strong>(): void<br/>{<br/>    foreach($this-&gt;observers as $observer) {<br/>        $observer-&gt;<strong class="lc hz">update</strong>($this);<br/>    }<br/>}</span></pre><p id="ff15" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¥½äº†ï¼Œæˆ‘ä»¬çš„<em class="kw">ç”¨æˆ·èµ„æ–™åº“</em>å®Œæˆäº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªç±»ï¼Œæ¯æ¬¡åˆ›å»ºç”¨æˆ·æ—¶éƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„ç”µå­é‚®ä»¶å‘é€è€…ç±»ï¼Œå®ƒå°†å®ç°<strong class="ix hz"> SplObserver </strong>æ¥å£:</p><blockquote class="ll lm ln"><p id="a07e" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><strong class="ix hz"> SplObserver </strong>æ¥å£æŒ‡å®šæˆ‘ä»¬å¿…é¡»å®ç°<a class="ae hv" href="https://www.php.net/manual/en/splobserver.update.php" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">update</strong></a><strong class="ix hz"/>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†æ¥æ”¶å®ç°<strong class="ix hz"> SplSubject </strong>çš„å¯¹è±¡ä½œä¸ºå”¯ä¸€å‚æ•°ã€‚</p></blockquote><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="fc7d" class="lg ju hy lc b fi lh li l lj lk">class <strong class="lc hz">Email</strong> implements <strong class="lc hz">\SplObserver</strong><br/>{<br/>    public function <strong class="lc hz">update</strong>(\SplSubject $subject): void<br/>    {<br/>        echo "Email class has been notified!\n";<br/>    }<br/>}</span></pre><p id="d952" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»ºä¸€ä¸ªè„šæœ¬æ¥æµ‹è¯•æˆ‘ä»¬çš„<strong class="ix hz">è§‚å¯Ÿè€…æ¨¡å¼</strong>å®ç°:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="24fa" class="lg ju hy lc b fi lh li l lj lk">&lt;?php</span><span id="e98d" class="lg ju hy lc b fi lr li l lj lk"># First, we get an instance of UsersRepository and Email classes<br/>$usersRepository = UsersRepository::<strong class="lc hz">getInstance</strong>();<br/>$emailSender = <strong class="lc hz">new Email()</strong>;</span><span id="91f7" class="lg ju hy lc b fi lr li l lj lk"># Then, we attach the Email class to UsersRepository observers' pool<br/>$usersRepository-&gt;<strong class="lc hz">attach</strong>($emailSender);</span><span id="09d9" class="lg ju hy lc b fi lr li l lj lk"># Now we may create a new user<br/>$user = <strong class="lc hz">new User</strong>('Rafael', 'rafaelmelo.programmer@gmail.com');<br/>$usersRepository-&gt;<strong class="lc hz">createUser</strong>($user);</span></pre><p id="95b8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æ‰§è¡Œè¯¥è„šæœ¬å°†å¯¼è‡´:</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="60c1" class="lg ju hy lc b fi lh li l lj lk">$ Email class has been notified!</span></pre><h1 id="608f" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ğŸ“‰ä¼˜åŠ¿</h1><p id="5878" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼å…è®¸æˆ‘ä»¬åœ¨å¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå¹¶ä¸”ï¼Œæœ€å¥½çš„éƒ¨åˆ†æ˜¯:ä¸»å¯¹è±¡ä¸çŸ¥é“å®ƒçš„ä¾èµ–å¯¹è±¡çš„ä»»ä½•äº‹æƒ…ã€‚</p><p id="7d65" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå—¯ï¼Œè¿™å…è®¸æˆ‘ä»¬åœ¨ä¸æ”¹å˜ä¸»å¯¹è±¡çš„æƒ…å†µä¸‹å®ç°å…¶ä»–ä¾èµ–å¯¹è±¡ï¼Œæ¢å¥è¯è¯´ï¼Œè¿™ç»™æˆ‘ä»¬å¸¦æ¥äº†æœŸæœ›çš„ä½è€¦åˆå’Œé«˜å†…èšã€‚è€Œä¸”ï¼Œå®ƒç¬¦åˆ<a class="ae hv" href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">å¼€åˆåŸç†</strong> </a> <strong class="ix hz"> </strong>ä¸­æ‰€è¿°<strong class="ix hz"/><a class="ae hv" href="https://www.digitalocean.com/community/conceptual_articles/s-o-l-i-d-the-first-five-principles-of-object-oriented-design#:~:text=SOLID%20is%20an%20acronym%20for,OOD)%20principles%20by%20Robert%20C.&amp;text=O%20%2D%20Open%2Dclosed%20Principle,I%20%2D%20Interface%20Segregation%20Principle" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">ç¨³å›º</strong> </a>åŸç†ã€‚</p><p id="911a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å®é™…ä¸Šï¼Œå›åˆ°æˆ‘ä»¬çš„ä¾‹å­ï¼Œé™¤äº†å·²ç»å®ç°çš„ç”µå­é‚®ä»¶é€šçŸ¥ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®ç°å…¶ä»–é€šçŸ¥ç±»å‹ï¼Œæ¯”å¦‚SMSï¼Œè€Œæ— éœ€æ›´æ”¹<em class="kw"> UsersRepository </em>ç±»ã€‚</p><h1 id="731d" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ğŸ“ˆä¸è¶³ä¹‹å¤„</h1><p id="f4ff" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">å°½ç®¡æœ‰è¿™äº›å¥½å¤„ï¼Œä½†æ˜¯æ»¥ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°ä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸å¿…è¦çš„å¤æ‚æ€§ã€‚</p><p id="5844" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬æ— æ³•æ§åˆ¶è§‚å¯Ÿè€…çš„é€šçŸ¥é¡ºåºï¼Œå¦‚æœç³»ç»Ÿæ²¡æœ‰è‰¯å¥½çš„ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯æˆ–æ„å¤–çš„è¡Œä¸ºã€‚</p><h1 id="6e9e" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">âœ…ç»“è®º</h1><p id="aa29" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">Observeræ¨¡å¼æ˜¯PHPä¸–ç•Œä¸­æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥ä¸ºåº”ç”¨ç¨‹åºå¸¦æ¥çµæ´»æ€§ï¼Œå½“æˆ‘ä»¬æœ‰å‡ ä¸ªä¾èµ–äºå¦ä¸€ä¸ªå¯¹è±¡çš„å¯¹è±¡ï¼Œå¹¶ä¸”éœ€è¦åœ¨è¯¥å¯¹è±¡çš„çŠ¶æ€æ”¹å˜æ—¶æ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œæˆ–è€…ä¸€ä¸ªå¯¹è±¡éœ€è¦é€šçŸ¥å…¶ä»–å¯¹è±¡æ—¶ï¼Œå®ƒéå¸¸æœ‰ç”¨ã€‚</p><p id="147d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è¿™å¾ˆå®¹æ˜“å®ç°ï¼Œä¸»è¦æ˜¯åœ¨PHPä¸­ï¼Œæˆ‘ä»¬æœ‰å†…ç½®çš„æ¥å£å’Œç±»æ¥å¸®åŠ©æˆ‘ä»¬åŠ å¿«å¼€å‘è¿‡ç¨‹ã€‚</p><p id="030f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">è§‚å¯Ÿè€…æ¨¡å¼ç»™æˆ‘ä»¬å¸¦æ¥äº†ç³»ç»Ÿçš„ä½è€¦åˆå’Œé«˜å†…èšã€‚å¦ä¸€æ–¹é¢ï¼Œå®ƒä¼šç»™ä»£ç å¸¦æ¥ä¸å¿…è¦çš„å¤æ‚æ€§å’Œæ„æƒ³ä¸åˆ°çš„å‰¯ä½œç”¨ã€‚</p><p id="9a36" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°äº†è§£è¿™ä¸ªä¸»é¢˜ï¼Œæˆ‘å»ºè®®è®¿é—®æˆ‘åœ¨ä¸‹é¢ç•™ä¸‹çš„æ‰€æœ‰å‚è€ƒèµ„æ–™ï¼</p><h1 id="0ccc" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ğŸ“šå‚è€ƒ</h1><blockquote class="ll lm ln"><p id="5808" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><a class="ae hv" href="https://www.php.net/manual/pt_BR/class.splobserver.php" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹SplObserveræ–‡æ¡£</a></p><p id="ceed" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><a class="ae hv" href="https://www.php.net/manual/pt_BR/class.splsubject.php" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹SplSubjectæ–‡æ¡£</a></p><p id="9a3e" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><a class="ae hv" href="https://refactoring.guru/design-patterns/observer" rel="noopener ugc nofollow" target="_blank">è§‚å¯Ÿè€…(refactoring.guru) </a></p><p id="e13a" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><a class="ae hv" href="https://en.wikipedia.org/wiki/Event_(computing)" rel="noopener ugc nofollow" target="_blank">äº‹ä»¶(è®¡ç®—)â€”ç»´åŸºç™¾ç§‘</a></p><p id="d711" class="iv iw kw ix b iy iz ja jb jc jd je jf lo jh ji jj lp jl jm jn lq jp jq jr js hb bi translated"><a class="ae hv" href="https://www.sitepoint.com/understanding-the-observer-pattern/" rel="noopener ugc nofollow" target="_blank">é€šè¿‡<a class="ae hv" href="https://www.sitepoint.com/author/iteo" rel="noopener ugc nofollow" target="_blank"> Ignatius Teo </a>ç†è§£è§‚å¯Ÿè€…æ¨¡å¼</a></p></blockquote></div></div>    
</body>
</html>