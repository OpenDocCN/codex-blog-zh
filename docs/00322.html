<html>
<head>
<title>Kafka Deployment Options in Practice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实践中的Kafka部署选项</h1>
<blockquote>原文：<a href="https://medium.com/codex/apache-kafka-several-deployment-options-in-practice-4061db14d3d8?source=collection_archive---------2-----------------------#2021-01-17">https://medium.com/codex/apache-kafka-several-deployment-options-in-practice-4061db14d3d8?source=collection_archive---------2-----------------------#2021-01-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="5032" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><p id="5a1f" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">在这篇文章中，我将尝试为你提供一些选项，让你对真实项目中的人们如何使用卡夫卡有一个大致的了解。顺便说一句，如果你想简单地下载Zookeeper和Broker，安装到一台机器上，像我一样运行一些“hello world ”,然后下一步你可以做的是尝试在几台机器上运行不同的实例，甚至更高级一点，使用Docker。你会遇到一些挑战，但至少会获得一些实践经验，成为卡夫卡的初学者。</p><p id="45cf" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">在一个真实的项目中，许多因素将决定Kafka应该如何部署。例如，它可以是您的项目基础设施所依赖的云平台，也可以是像Kubernetes这样的容器编排系统。在这篇文章中，我将列出几个实用的选项，一般来说，可以用于实际项目。</p><p id="61bc" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">斯特里姆齐——库伯内特斯上的阿帕奇卡夫卡</strong></p><p id="9a07" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我将解释Strimzi是如何进入画面的，以及与阿帕奇卡夫卡相比，从特性的角度提供了什么。</p><p id="a885" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">简而言之，Strimzi有助于将您的“Hello world”系统迁移到Kubernetes平台(或open shift—Kubernetes的企业版)。如果没有Strimzi，没有任何之前使用Kubernetes的实践经验，您需要使用Kubernetes做另一个“Hello world”练习，尽管我认为这样的练习是不够的。然后，没有Strimzi，有了一些Kubernetes的经验，你开始自己做，解决任何问题。就我而言，在问题不断出现后，我通常会在这一步放弃。</p><p id="d978" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">假设您已经对Kubernetes中的一些概念有了大致的了解，您可以想象如何在Kubernetes的“机器”(pod、container、btw)上运行一个应用程序，并且可以自己完成，但不会那么顺利，因为您不是每天都这样做。然后Strimzi的人会给你提供一些脚本来实现这一点。这些脚本确保你不会有任何愚蠢的问题，比如没有安装正确的Java版本，在<em class="jm"> zookeeper.properties </em>或<em class="jm"> server.properties </em>中缺少一些配置。你所要做的只是复制并粘贴Strimzi的“入门”页面上提供的命令，并在你当地的Kubernetes上享受你的“Hello world”卡夫卡。</p><p id="37b5" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">依我看，与现有的卡夫卡概念相比，Strimzi中的新事物是卡夫卡桥，如下图所示。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jn"><img src="../Images/500b73b51894d6f59f70909334714ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vE2xGqcrrWDTJdFw.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">image src:<a class="ae kd" href="https://strimzi.io/docs/operators/latest/images/overview/kafka-concepts-supporting-components.png" rel="noopener ugc nofollow" target="_blank">https://strim zi . io/docs/operators/latest/images/overview/Kafka-concepts-supporting-components . png</a></figcaption></figure><p id="20ea" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">不知道向/从Kafka集群发布/订阅消息使用的是哪种协议(可能是TCP？).但是我很确定它不是宁静的。对于微服务架构，其中微服务通常通过REST APIs进行通信，Kafka bridge似乎是拼图中缺少的一块。尤其是在Kubernetes上，通过除HTTP/HTTPS之外的任何协议来公开服务并不总是更好的选择。如果你不是团队中负责Kafka集群并使用Kafka开发一些应用程序的人，而不是使用一些库来发布/订阅来自Kafka的消息，那么你只需调用Kafka bridge公开的API即可。难道不值得一试吗？我想是的。</p><p id="8c5f" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">汇流的卡夫卡</strong></p><p id="ce59" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我提到Confluent是因为我最近在我的脸书页面上看到了它的广告，并阅读了他们写得很好的关于事件驱动架构的书。事实上，实际上有许多解决方案可以为您提供Kafka的云原生部署。甚至你可以用你当地的Kubernetes来做，随便你怎么命名。通常，您可以从任何解决方案中找到所有基本的Kafka功能。这些解决方案之间的区别在于它们在支持、成熟度和功能集方面的基本业务模型，这不是本文的重点。</p><p id="d895" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我给你简单描述一下，然后如果你有兴趣，你可以去合流文档网站找到更多关于它的信息。在Kafka和cloud的上下文中，您可能会关注我概述的融合组件架构图的底部。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div class="er es ke"><img src="../Images/cabd6e9345070789d58c2e105f3b61be.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*wzqcqqCAbXB-j_fN.png"/></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">https://docs.confluent.io/_images/confluentPlatform.png<a class="ae kd" href="https://docs.confluent.io/_images/confluentPlatform.png" rel="noopener ugc nofollow" target="_blank">图片src</a></figcaption></figure><p id="4338" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">基本上，合流公司给你提供一个平台。该平台旨在帮助您在任何云平台或融合云上部署自己。它的(平台)核心是Apache Kafka，这意味着它有其他顶层功能，这些功能包装了Kafka功能，并为不同的应用程序提供API或任何东西(或一般的接口)。在某种程度上，这些接口为这些应用程序的开发人员提供了一种工具，例如，可以是可理解的语法、简单的输入参数、有效的默认配置设置等等。从<strong class="iq hs">理论</strong>的角度来看，它是一个备份解决方案，因为Apache Kafka是它的核心，在最糟糕的情况下，如果那些外部应用程序需要目前不可用的东西，可以有一个变通办法，使应用程序能够直接访问其核心Kafka。</p><p id="e6c7" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">目前，我这边的一些值得注意的特性/概念包括融合运算符，它利用Kubernetes运算符模式将Kafka作为后端服务进行有状态部署，融合REST代理。当我有机会玩它的时候，其他的可能会来。</p><p id="f58c" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">班仔云的卡夫卡</strong></p><p id="d453" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我没有机会玩Banzai Cloud Supertubes工具，因为它对资源的要求很高。从其整体架构来看，我认为其思路与Confluent相同，即建立一个以Kafka为核心的系统，部署几个由基于Kubernetes的运营商安装和管理的组件，实现与Prometheus for monitoring、Grafana for reporting等流行系统的集成。这种集成增加了在团队的现有基础设施中采用Banzai架构的成功率。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es kf"><img src="../Images/ea665fa05fa20cc2140fe26ddafa097d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2M0ri8Ne7enNTNIT.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">https://banzaicloud.com/docs/supertubes/supertubes-arch.png<a class="ae kd" href="https://banzaicloud.com/docs/supertubes/supertubes-arch.png" rel="noopener ugc nofollow" target="_blank">图片src</a></figcaption></figure><p id="eac6" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">谷歌云发布会</strong></p><p id="be11" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">你不愿意了解Kubernetes，或者像我一样，只是认为它是可以允许CRUD container的东西，只是想使用Kafka，而不关心可伸缩性、健壮性、维护等等，那么你可能会看一眼GCP。我提到GCP是因为我看到它提供的界面与卡夫卡提供的非常相似。然而，GCP还通过REST APIs为订阅特性提供了一种推送机制以及批处理能力。不知道后端用不用卡夫卡。</p><p id="4be8" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">从他们的Python库的源代码中，我看到任何请求都使用gRPC协议发送到GCP后端。</p><p id="3120" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">你呢，你在用什么系统或者知道什么系统？如果你能留下评论让我看看，我真的很感激。</p></div></div>    
</body>
</html>