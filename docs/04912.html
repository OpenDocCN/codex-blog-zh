<html>
<head>
<title>Introduction to Chatbots With Rasa &amp; Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rasa和Python聊天机器人简介</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-chatbots-with-rasa-python-463d9df058e9?source=collection_archive---------6-----------------------#2022-01-17">https://medium.com/codex/introduction-to-chatbots-with-rasa-python-463d9df058e9?source=collection_archive---------6-----------------------#2022-01-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="82f4" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><em class="ix">没必要了解机器学习，只关注实用面</em></h2></div><p id="52c6" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">你好。上周末，我在Coursera上闲逛，寻找高质量的内容来消费。我偶然发现了“用<a class="ae ju" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> Rasa </a>和Python创建你的第一个聊天机器人”指导项目。当然我消费了，做了一些笔记。在这个故事中，我们将尝试了解什么是<a class="ae ju" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> Rasa </a>以及如何使用<a class="ae ju" href="https://rasa.com/" rel="noopener ugc nofollow" target="_blank"> Rasa </a>。我们将创建一个聊天机器人来找出我们的目标所在的时区。其实你可以在Coursera引导的项目里找到类似的项目。但是，我们将创建我稍微扩展了一下的项目。我们将创建的机器人，获取输入，并显示输入区域的时区。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jv"><img src="../Images/ba236dbfe6da4cc9daec90b3e8f6cd55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yOp25w3ukA6LMKbZbm4CiA.jpeg"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">照片由<a class="ae ju" href="https://unsplash.com/@yuyeunglau?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">刘宇英</a>在<a class="ae ju" href="https://unsplash.com/s/photos/bot?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="625c" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">什么是Rasa？</h1><p id="5a62" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">我们可以说Rasa是一个创建对话应用的框架。我们可以使用Rasa创建自己的虚拟助手。</p><h1 id="d4df" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">Rasa的第一步</h1><p id="e166" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">如果我们想使用Rasa，首先我们需要在本地安装它。你可以通过下面的代码安装它。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="3243" class="ln km hi lj b fi lo lp l lq lr">pip install rasa</span></pre><p id="9934" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在我们可以使用Rasa CLI创建一个项目模板。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="2868" class="ln km hi lj b fi lo lp l lq lr">rasa init</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/97e430f4241b1865a162c4ca0f3bfa26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8b5KTryM73d6sz7DSjwK5A.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><p id="7b20" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">对于CLI问我的问题“您想训练一个初始模型吗？”我说“是”。我们将获得一个由Rasa训练模型的基础模板。</p><p id="72ad" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我将转到我在CLI中作为默认工作控制器键入的<code class="du lt lu lv lj b">myfirstbot</code>文件夹。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="10d6" class="ln km hi lj b fi lo lp l lq lr">cd myfirstbot</span></pre><p id="8339" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们可以通过执行以下命令来运行聊天机器人并开始对话:</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="45c6" class="ln km hi lj b fi lo lp l lq lr">rasa shell</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/6857237e243de095da8ea75064906e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kk89jX2RSq6VfYHlInI14g.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><h2 id="0ea2" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">什么是NLU？</h2><p id="4d16" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">NLU；自然语言理解。我们将设置句子(意图)来让机器人理解我们正在键入的内容，它将从我们键入的上下文中理解它，并将通过使用我们的句子来生成响应。</p><p id="6ebe" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">你可以通过使用这个链接从维基百科获得更多关于NLU的信息。</p><h1 id="a728" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">基本Rasa术语</h1><h2 id="186f" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">意图</h2><p id="ef63" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">这些术语需要从机器人的角度来理解。我们将在<code class="du lt lu lv lj b">data/nlu.yml</code>文件中设置它们。此外，我们还将写出与相关意图有关的术语和句子。通过使用这些例子，机器人将理解我们键入的内容。例如，我们在下面看到一个缺省设置意图。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/4a3b222c5028ff9b7a2bb6402d5e4827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ryb3Kgvw5rDEs8PMD2T2aQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><p id="62f8" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">意图由Rasa自动编写。当机器人得到类似“嘿”、“你好”、“你好”等输入时。在<code class="du lt lu lv lj b">examples</code>变量下，它会理解我们在问候它。</p><p id="edd2" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">每个意图都必须在<code class="du lt lu lv lj b">domain.yml</code>文件中定义。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/b5e0c279fb2a6fb02198282802e3d6a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jFXSMIMXxnnt5j9XvFkKcw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><h2 id="6bde" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">反应</h2><p id="4626" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">我们可以在<code class="du lt lu lv lj b">domain.yml</code>文件中定义响应。我们在下面看到了Rasa自动设置的默认响应。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/a8ff4ad231049e7bb331f776474bfad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zx0eGaQjR4JnoJbnYDsi7A.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><p id="7db5" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">例如，当我们想让机器人说“再见”时，我们需要使用<code class="du lt lu lv lj b">utter_goodbye</code>变量。</p><h2 id="47ce" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">故事</h2><p id="d3fd" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">我们可以在<code class="du lt lu lv lj b">stories.yml</code>文件中定义会话流。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/680c6711a768a4ae57a6a17df57e9104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2a5FLNP_1BxweGuBp7id-Q.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><p id="edce" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们在上面看到了Rasa自动添加的故事(流)。我想深入研究一下这个学期。</p><ul class=""><li id="9463" class="mj mk hi ja b jb jc je jf jh ml jl mm jp mn jt mo mp mq mr bi translated">我们通过<code class="du lt lu lv lj b">— story</code>开始定义一个流。</li><li id="5917" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">然后，我们在<code class="du lt lu lv lj b">steps</code>下定义它的步骤。</li><li id="0bf9" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">我们可以通过<code class="du lt lu lv lj b">intent</code>设置瞄准意图。</li><li id="246d" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">我们可以通过<code class="du lt lu lv lj b">action</code>来设置机器人将要完成的动作。</li></ul><p id="1ab0" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">注意这里，我们必须将所有这些参数(意图、动作、响应)写入<code class="du lt lu lv lj b">domains.yml</code>文件。</p><h2 id="a2e7" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">规则</h2><p id="87ce" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">我们可以在<code class="du lt lu lv lj b">rules.yml</code>文件中定义一般流程。我们在下面看到了Rasa添加的默认规则。例如，当机器人得到一些与<code class="du lt lu lv lj b">goodbye</code>意图相关的输入时，总是会采取<code class="du lt lu lv lj b">utter_goodbye</code>动作。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ls"><img src="../Images/bfff4e1e911bd8739ef6dbd3c1fc9960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywns6tgp_XhGkhM_AFWqVA.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><h1 id="695c" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">开始改进我们的第一个机器人</h1><p id="6948" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">现在，我们可以通过使用上面的信息来改进机器人。事实上，我们仍然需要学习一些关于Rasa的基本术语，但是我想一步一步来。我将删除除<code class="du lt lu lv lj b">greet</code>和<code class="du lt lu lv lj b">goodbye</code>之外的所有回应和意图。文件如下所示。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/315c2c67db32ee352e0f0aaa15cb035c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSvN-fGcQHIcBtVMHvhuCQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">domain.yml</figcaption></figure><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/adf74261fe4ec5a5638a7463f438bbfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f9vt3fUL66lT_glLAkt45Q.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">rules.yml</figcaption></figure><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/6bb52611e99f8469f8022e471827f928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZpenprrVXSDa6gyz4ITiw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">stories.yml</figcaption></figure><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/61f05dd8ae71cbc790c78b4d339f3730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-XonlnQ0Iizl8mDAraOBg.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">nlu.yml</figcaption></figure><p id="5d60" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如上所述，我们的机器人将显示输入区域的时区。为了模拟我们的场景，我将在<code class="du lt lu lv lj b">nlu.yml</code>文件中添加3个意图。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/d5096512c616232685699e5da04b5a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*33sz3FyF-pq573C6iPgDIA.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">nlu.yml</figcaption></figure><p id="ddb8" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">当机器人从示例部分获得类似句子时，将理解与机器人交互的人类的意图。并且，我将向<code class="du lt lu lv lj b">domain.yml</code>文件添加一些响应。还有，这里要注意。我们必须在这个文件中添加我们在上面创建的新意图。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/76fa9df81fa74c13c7fa3c62d76d2135.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NdRXAfuL4Q3ESt6IDOhpIw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">domain.yml</figcaption></figure><p id="51cd" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在创建一个故事来完成<code class="du lt lu lv lj b">stories.yml</code>文件中的场景。</p><p id="a1e2" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">在这个故事中，我们模拟了这个流程:</p><ul class=""><li id="d16c" class="mj mk hi ja b jb jc je jf jh ml jl mm jp mn jt mo mp mq mr bi translated">一个人询问时区</li><li id="d7ee" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">机器人询问哪个城市的时区</li><li id="791c" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">关于该地区的人类类型</li><li id="74d6" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">机器人搜索时区并显示出来</li><li id="d9e5" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">一个人说谢谢</li><li id="93bf" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">机器人欢迎人类</li></ul><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/b52d936508367bc6988de35665b74f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HCnD9NKJ1xTYQuBpMX56jQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">stories.yml</figcaption></figure><p id="5348" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">如果您执行直接的<code class="du lt lu lv lj b">rasa shell</code>代码来与机器人开始对话，您将与旧的机器人进行交互。我们必须在每次更新后执行<code class="du lt lu lv lj b">rasa train</code>来更新机器人。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="6f10" class="ln km hi lj b fi lo lp l lq lr">rasa train &amp;&amp; rasa shell</span></pre><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mx"><img src="../Images/cb11c3e0af2cd4543efac03af2745599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gw4xSgnj6hAWKqcQCHWZHA.png"/></div></div></figure><p id="d318" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在我们可以继续学习基本的Rasa术语。</p><h1 id="89f8" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">继续学习基本的Rasa术语</h1><h2 id="417a" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">实体</h2><p id="dac7" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">如果我们想从意图中提取数据，我们使用<code class="du lt lu lv lj b">entities</code>。我们需要像这样在<code class="du lt lu lv lj b">nlu.yml</code>文件中使用这些:<code class="du lt lu lv lj b">[VARIABLE Name](variable_name)</code>。我们需要定义<code class="du lt lu lv lj b">domain.yml</code>文件中的所有实体。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="0077" class="ln km hi lj b fi lo lp l lq lr">entities:<br/>  - entitiy_one<br/>  - entity_two</span></pre><h2 id="c36c" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">时间</h2><p id="a103" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">我们使用<code class="du lt lu lv lj b">slots</code>来存储<code class="du lt lu lv lj b">entities</code>。Rasa将<code class="du lt lu lv lj b">slots</code>存储为键值对。我们必须在<code class="du lt lu lv lj b">domain.yml</code>文件中定义<code class="du lt lu lv lj b">slots</code>。下面我们可以看到一个定义<code class="du lt lu lv lj b">slots</code>的例子。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="5f35" class="ln km hi lj b fi lo lp l lq lr">slots:<br/>  slot_one:<br/>    type: text<br/>    mappings:<br/>      - type: from_entity<br/>        entity: entity_one</span></pre><p id="8202" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们可以这样使用这些值:</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="9262" class="ln km hi lj b fi lo lp l lq lr">f"The time zone is {tz_slot} in {entity_one}"</span></pre><h2 id="a2d4" class="ln km hi bd kn lw lx ly kr lz ma mb kv jh mc md kx jl me mf kz jp mg mh lb mi bi translated">行动</h2><p id="9586" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">到目前为止，我们只使用默认动作从机器人返回字符串。我们可以创建自定义操作。要创建自定义动作，我们需要编辑<code class="du lt lu lv lj b">actions/actions.py</code>文件。我们需要按照以下步骤来创建自定义操作:</p><ul class=""><li id="86e2" class="mj mk hi ja b jb jc je jf jh ml jl mm jp mn jt mo mp mq mr bi translated">更新这两个文件:<code class="du lt lu lv lj b">domain.yml</code>和<code class="du lt lu lv lj b">stories.yml</code></li><li id="21ef" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">在<code class="du lt lu lv lj b">action.file</code>文件中创建自定义动作</li><li id="c8bb" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated">在启动聊天机器人之前，我们需要启动动作服务器来创建机器人和动作之间的通信。</li><li id="cd7e" class="mj mk hi ja b jb ms je mt jh mu jl mv jp mw jt mo mp mq mr bi translated"><code class="du lt lu lv lj b">rasa run actions</code>启动操作服务器</li></ul><p id="1571" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们可以在下面看到一个示例操作。实际上，我们将在我们的项目中使用这个动作。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/0caf45a7c8c609909266cd94ef08e80b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9FBiDmqYeDIInQUgtJtKQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><p id="90df" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated"><code class="du lt lu lv lj b">name</code>方法帮助我们在<code class="du lt lu lv lj b">domain.yml</code>文件中注册该动作。<code class="du lt lu lv lj b">run</code>方法帮助我们通过使用这个动作来定义要执行的流程。我们可以通过使用<code class="du lt lu lv lj b">tracker </code>实例来获取存储的实体。我们需要这样更新<code class="du lt lu lv lj b">domain.yml</code>文件:</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="ca36" class="ln km hi lj b fi lo lp l lq lr">actions:<br/> - custom_action</span></pre><p id="4455" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们需要做最后一件事来激活动作。我将取消<code class="du lt lu lv lj b">endpoints.yml</code>文件中<code class="du lt lu lv lj b">action_endpoint</code>变量的注释。通过这样做，机器人和动作可以通信。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es mz"><img src="../Images/3141338951b6f553fb88f05918910fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XYcu5ECYoM8R1qNu4eTypg.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">endpoints.yml</figcaption></figure><h1 id="5c09" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">继续改进我们的机器人</h1><p id="da6e" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">我将在<code class="du lt lu lv lj b">domain.yml</code>文件中添加一个实体和一个槽。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/70e36bff24c2597d4b737e60627c8339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*766DXivIdy2JMqHzcjJR2w.png"/></div></div></figure><p id="a2ca" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我创建了一个名为<code class="du lt lu lv lj b">target_timezone</code>的实体。我将实体存储在<code class="du lt lu lv lj b">target_timezone</code>槽中。</p><p id="4934" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我将更新我们的<code class="du lt lu lv lj b">city_info</code>意图。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/0a9c2134e57a807fc2c2d5e88c58f01d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ax-PWnufiuKdiR7A2FxOMQ.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">nlu.yml</figcaption></figure><p id="cacd" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">然后更新故事。我加了<code class="du lt lu lv lj b">action_find_timezone</code>。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/e3edac181f20c58b78425d12851cca5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2yh1ffKdOdeVwQESYUedg.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">stories.yml</figcaption></figure><p id="22b6" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在我将在<code class="du lt lu lv lj b">actions.py</code>文件中创建动作。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/f5e762e1afe373b289b0b53fbfd084c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7spFP49B3PxGf8asgrOt0w.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">actions.py</figcaption></figure><p id="1cd7" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">为了完成bot，我将取消对<code class="du lt lu lv lj b">endpoints.yml</code>文件中端点的注释。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/12a3ce6d1d02064e60180b13e028f9b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1loNbv1HJsuNRRuaCTHcFw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">endpoints.yml</figcaption></figure><p id="bf3c" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">现在，我们可以试试我们的聊天机器人。我将更新bot模型并重新运行它。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="cc58" class="ln km hi lj b fi lo lp l lq lr">rasa train &amp;&amp; rasa shell</span></pre><p id="84d2" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">同时，我将在一个新的终端中执行下面的代码。</p><pre class="jw jx jy jz fd li lj lk ll aw lm bi"><span id="5b4a" class="ln km hi lj b fi lo lp l lq lr">rasa run actions</span></pre><p id="e691" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">我们可以从我们的聊天机器人^^开始对话</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es my"><img src="../Images/76b4f05e35e611928ac63b00c41496da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4IGwiQRQg1AnDiuto-w4lw.png"/></div></div><figcaption class="kh ki et er es kj kk bd b be z dx translated">作者图片</figcaption></figure><h1 id="8536" class="kl km hi bd kn ko kp kq kr ks kt ku kv io kw ip kx ir ky is kz iu la iv lb lc bi translated">最后</h1><p id="7341" class="pw-post-body-paragraph iy iz hi ja b jb ld ij jd je le im jg jh lf jj jk jl lg jn jo jp lh jr js jt hb bi translated">希望你喜欢读它。我本人喜欢写作和编码。我们从Rasa的门口走了一步。现在，我们有了开始在Rasa上提升自己的基础知识。</p><p id="9f22" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">此外，您可以通过下面的链接获得我们在上面编写的代码。</p><div class="na nb ez fb nc nd"><a href="https://github.com/mebaysan/IntroductionToChatbotsWithRasa" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab dw"><div class="nf ab ng cl cj nh"><h2 class="bd hj fi z dy ni ea eb nj ed ef hh bi translated">GitHub-mebaysan/IntroductionToChatbotsWithRasa:我的第一个带Rasa的聊天机器人</h2><div class="nk l"><h3 class="bd b fi z dy ni ea eb nj ed ef dx translated">框架:https://rasa.com/安装rasa在您的本地pip安装rasa我们可以创建一个Rasa项目rasa init NLU是…</h3></div><div class="nl l"><p class="bd b fp z dy ni ea eb nj ed ef dx translated">github.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr kf nd"/></div></div></a></div><p id="d2b7" class="pw-post-body-paragraph iy iz hi ja b jb jc ij jd je jf im jg jh ji jj jk jl jm jn jo jp jq jr js jt hb bi translated">亲切的问候。</p></div></div>    
</body>
</html>