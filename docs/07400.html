<html>
<head>
<title>Nodejs handling POST requests.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理POST请求的节点。</h1>
<blockquote>原文：<a href="https://medium.com/codex/nodejs-handling-post-requests-3d38f1e7e059?source=collection_archive---------36-----------------------#2022-06-13">https://medium.com/codex/nodejs-handling-post-requests-3d38f1e7e059?source=collection_archive---------36-----------------------#2022-06-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/341996e6f2be20eee361f6a55db693bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eP7D1tLIEpQ0b6YYugyvAA.jpeg"/></div></div></figure><h1 id="a16d" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">前言。</h1><p id="74f1" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在上一篇文章中，我谈到了客户机/服务器模型，以及如何使用GET请求将数据从客户机发送到服务器，再返回到客户机。虽然get请求为互联网提供了动力(您发出GET请求只是为了查看本文)，但有时客户端可能希望向服务器发送额外的信息(您已经为用户名和密码或者向数据库添加了一些内容)。例如在html表单或URL查询中。我们将通过使用POST请求来探究这一点。</p><h1 id="3ac1" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">对于读者来说</h1><p id="decc" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在这篇文章中，我想深入探讨客户端如何向服务器发送更多数据。这称为POST请求。POST请求是指<strong class="jq hj">额外的</strong>数据可以被发送到服务器，并被后端解析和使用。我将使用NodeJS(其他编程语言也提供http请求的使用，以及post请求的http主体解析)。本文假设您对POST请求一无所知，您可以一步一步地阅读本文。</p><h1 id="2a2c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">发布请求是如何工作的？</h1><p id="bc46" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">POST请求是HTTP协议支持的请求方法。这种类型的请求将数据包含在HTTP请求体中。相比之下，GET请求不在HTTP请求体中包含数据，主要用于从服务器请求特定的资源(例如获取维基百科的页面)。POST请求通常与数据库结合使用，以将数据存储到数据库中，验证用户名和密码，或者任何其他需要更多数据而不仅仅是URL路径的任务。</p><h1 id="2eff" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">让我们首先确保安装了NPM。</h1><p id="492c" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">首先确保NodeJS安装在您的机器上(这对于Linux、mac和window机器可能是不同的。更多信息请参见NodeJS文档)。为此，让我们用命令<code class="du km kn ko kp b">node -v</code>进行检查</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kq"><img src="../Images/078dad8d0b2375ccc94ca0b7aedb1864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDPRvcfyiy-uvmvWIlAgCQ.png"/></div></div></figure><p id="501c" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">您应该收到您当前的NodeJS版本作为输出(例如，我目前使用的版本是8.11.0)。如果您没有收到这样的输出，请参考NPM文档。</p><h1 id="28e2" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">现在让我们创建目录并安装所需的模块。</h1><p id="b535" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在让我们创建我们的目录来保存我们所有的文件和依赖项。</p><p id="d90e" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">下次使用<code class="du km kn ko kp b">npm install express body-parser</code>。Express是我们处理HTTP请求的后端框架(这在上一篇文章中讨论过), body-parser是处理POST请求数据的NPM模块。</p><p id="a3c5" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">您的终端应该看起来像这样。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/8f334df4269c924aa266ff3cb206c666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C55MeO1ORdLas3FQeV91gQ.png"/></div></div></figure><h1 id="9201" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">让我们用表单创建一个HTML页面，我们将使用该表单发出POST请求。</h1><p id="7ef5" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">为此，我将创建另一个名为index.html的文件(在现实世界中，您可能会将该文件放在静态、路由或页面目录中，在本例中，我只是将它添加到根目录中。).此外，HTML文件中的文本应该像这样，应该包括我们的输入字段，和我们的提交按钮。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/c88fffd0927cfc12ddc04678cafd5fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ngi76mQjOTvIzf6GZ5tucQ.png"/></div></div></figure><p id="57cc" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">您的根目录现在应该是这样的。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lc"><img src="../Images/dd418624cbfc363df25ea77b73df86a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plD7r-Truf9P_tZWejSH5A.png"/></div></div></figure><h1 id="52f0" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">现在让我们进入后端，我们将从处理主页获取请求开始。</h1><p id="07e3" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">最后，现在我们可以创建接收POST请求数据的逻辑，但是首先我们需要处理服务我们的主页。为此，我们在根目录下创建一个server.js文件。这个文件将存放表单的后端逻辑，并返回一些内容，以及对主页和路径参数的get请求。</p><p id="17df" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">让我们创建一个server.js文件(通常称为app.js文件)并让它返回一个主页，然后我们可以向它添加更多的代码并让它处理post请求。server.js文件应该如下所示。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/6d458c9811617b1eba51fe12946f8567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*liFbnCosAidIr-iHX-TVKg.png"/></div></div></figure><p id="cf3a" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">到目前为止，我们的server.js文件(我们的express文件)可以处理对/ URL参数的GET请求，返回我们的主页。我们可以通过从终端运行<code class="du km kn ko kp b">node server.js</code>来检查这一点，然后进入我们的网络浏览器(在我的例子中，我使用的是谷歌浏览器)并进入<strong class="jq hj"> localhost:8080 </strong>你应该会看到你之前创建的HTML文件，看起来应该是这样的。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/5aa459fd2703e16b82e5c5f6945ead86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-MRXkcsQicYi6QRLBaUQw.png"/></div></div></figure><h1 id="d29c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">现在让我们添加POST请求的逻辑。</h1><p id="f93b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在让我们将POST请求逻辑添加到server.js文件中。还记得我们用NPM下载的主体解析器模块吗？这就是我们在这里用来处理POST请求表单数据的东西。</p><p id="4628" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">首先您将导入body-parser模块(就像我们对express所做的那样)，然后确保我们的body-parser变量使用json来处理数据。然后再加一个app方法来处理一切。总而言之，它应该是这样的。另外，请务必阅读此处的图片，以查看更具描述性的示例，了解一切是如何工作的。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/060aa92f6c3bfaa891b2031b31e9e268.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZYHPJ2J9tNOOrU0XTI6VAw.png"/></div></div></figure><p id="d926" class="pw-post-body-paragraph jo jp hi jq b jr kv jt ju jv kw jx jy jz kx kb kc kd ky kf kg kh kz kj kk kl hb bi translated">现在使用<code class="du km kn ko kp b">node server.js</code>运行server.js文件，并输入index.html(位于localhost:8080)表单。您的数据和server.js应该接收传入的请求并处理它！总而言之，它应该是这样的。请注意，我们的server.js文件已经用console.log记录了我们的传入数据！</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/1f7ce8870264ac0523465bcb0aaf0c46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EmlmRT9sj584JLCBRZtCdg.png"/></div></div></figure><h1 id="1601" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">您已经正式处理了帖子请求数据！</h1><p id="605f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">你做到了！您已经使用Express和body-parser处理了POST请求！现在，您可以接受来自任何HTML表单的表单数据，并对其进行处理。比如向数据库添加内容，对数据做一些事情，认证，或者让用户知道表单已经发送出去了！您还可以探索Fetch或Axios之类的东西，以便更好地处理POST请求。</p><h1 id="a0e7" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">感谢您的阅读！</h1><p id="4b8f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">感谢阅读。我希望你觉得这篇文章很有趣，并在这个过程中学到了一些东西。如果你觉得我遗漏了什么，请在下面评论，或者直接给我发消息。如果你觉得这篇文章内容丰富，也留下你的关注吧！:)</p><h1 id="0106" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">我最近在忙什么。</h1><p id="2e88" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我的名字大卫和我已经从事软件web开发大约两年了。大多是自由职业者的工作。我知道Python，JavaScript，Bash，CSS，HTML，PostgreSQL，MongoDB，还有很多其他的技术。如果你想联系我，请到davidesquerra.com来找我。在这个网站上，你可以直接给我发短信或电子邮件。就像我上面说的感谢阅读:)。</p></div></div>    
</body>
</html>