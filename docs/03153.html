<html>
<head>
<title>Cloud Native Enterprise Application Integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云原生企业应用集成</h1>
<blockquote>原文：<a href="https://medium.com/codex/cloud-native-enterprise-application-integration-95336db86a14?source=collection_archive---------11-----------------------#2021-08-20">https://medium.com/codex/cloud-native-enterprise-application-integration-95336db86a14?source=collection_archive---------11-----------------------#2021-08-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6c76" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated"><strong class="ak">敏捷开发时代的EAI</strong></h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e2de8ba04b8287225e0db9e5257b38fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IxCoW1bVDXnx2lEQ"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://www.cloudamqp.com/blog/when-to-use-rabbitmq-or-apache-kafka.html" rel="noopener ugc nofollow" target="_blank">https://www . cloudamqp . com/blog/when-to-use-rabbit MQ-or-Apache-Kafka . html</a></figcaption></figure><p id="c1b5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该行业正朝着完全云原生架构的方向发展，在这种架构中，任何东西都可以弹性地扩展/缩小，并在需要时优雅地删除和重新部署，以应对不可预测的工作负载峰值和不可避免的故障，甚至是灾难性的故障。所有这些都避免了由于大量未充分利用的服务器长时间闲置而产生的不必要成本。我相信，这种通过微服务在应用程序开发领域开始的趋势也正在企业集成领域获得牵引力。</p><h1 id="1d33" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">容器</h1><p id="1d34" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">容器已经成为首选的部署技术，因为它们在工作负载隔离和IT资源消耗之间有很好的平衡。因此，毫不奇怪，根据<a class="ae jn" href="https://www.cncf.io/wp-content/uploads/2020/11/CNCF_Survey_Report_2020.pdf" rel="noopener ugc nofollow" target="_blank">CNCF 2020年调查</a>，2020年生产中容器的使用增加到92%。容器编排是在生产环境中正确运行和管理容器所必需的，根据Datadog的2020容器<a class="ae jn" href="https://www.datadoghq.com/container-report/" rel="noopener ugc nofollow" target="_blank">报告</a>:</p><blockquote class="lh li lj"><p id="f5ee" class="jo jp lk jq b jr js ij jt ju jv im jw ll jy jz ka lm kc kd ke ln kg kh ki kj hb bi translated">Kubernetes已经成为容器编排事实上的标准。今天，一半运行容器的组织使用Kubernetes，无论是在自我管理的集群中，还是通过云提供商服务，如谷歌Kubernetes引擎(GKE)，Azure Kubernetes服务(AKS)，或亚马逊弹性Kubernetes服务(EKS)。自2017年以来，Kubernetes的采用量增加了一倍多，并继续稳步增长，没有任何放缓的迹象</p></blockquote><p id="5de2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在Kubernetes上运行我们的集成中间件允许我们利用它的功能来解决许多第二天的挑战，例如:内务管理、高可用性、自我修复、自动伸缩、日志记录、滚动升级等等。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lo"><img src="../Images/e10922a2d2b12e5bd1e73fd3daba4270.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UYRJwOJE6JhH7i6k"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><em class="lp">来源:</em><a class="ae jn" href="https://www.datadoghq.com/container-report/" rel="noopener ugc nofollow" target="_blank"><em class="lp">https://www.datadoghq.com/container-report/</em></a></figcaption></figure><h1 id="a5f9" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">ESB怎么了？</h1><p id="9e80" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">我在上面提到过，随着微服务的出现，集成环境正在采用容器。然而，值得注意的是，微服务架构的采用也使集成环境远离了企业服务总线(ESB ),因为由于其整体性，它们往往会成为基础架构和开发灵活性方面的瓶颈。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lq"><img src="../Images/803b3aa95159c37760566d4a68ef7c77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e2BOuDUred-d-GIJ"/></div></div></figure><p id="cd9d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如詹姆斯·刘易斯和马丁·福勒在著名的<a class="ae jn" href="https://martinfowler.com/articles/microservices.html#SmartEndpointsAndDumbPipes" rel="noopener ugc nofollow" target="_blank">文章</a>中提到的，微服务架构风格的标志之一是使用以下方法:</p><blockquote class="lh li lj"><p id="8460" class="jo jp lk jq b jr js ij jt ju jv im jw ll jy jz ka lm kc kd ke ln kg kh ki kj hb bi translated">智能端点和哑管道</p></blockquote><h1 id="367b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">分布式消息代理</h1><p id="6824" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">当然，微服务继续使用<em class="lk">异步通信</em>，但是它们只使用<em class="lk">消息传递结构</em>，而不指望任何由ESB集中执行的集成/转换逻辑。作为开源软件的忠实粉丝，我推荐使用<a class="ae jn" href="https://www.rabbitmq.com/" rel="noopener ugc nofollow" target="_blank"> RabbitMQ </a>作为<a class="ae jn" href="https://www.rabbitmq.com/distributed.html" rel="noopener ugc nofollow" target="_blank">分布式消息代理</a>。它用Erlang编写，这赋予了它效率和失重感，有助于在复杂的路由场景中高效地传递消息。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/6eddf9ccb2cbae4a3be10a1319c8e041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FpCoogUb12gpkD6q"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><em class="lp">来源:</em><a class="ae jn" href="https://www.cloudamqp.com/blog/part1-rabbitmq-best-practice.html" rel="noopener ugc nofollow" target="_blank"><em class="lp">https://www . cloudamqp . com/blog/part 1-rabbit MQ-best-practice . html</em></a></figcaption></figure><h1 id="be14" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">批量呢？</h1><p id="c77d" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在敏捷和CI/CD时代，开发团队应该能够每天在生产中部署新特性，甚至更快，夜间基于文件和批处理的集成无法跟上业务和客户期望的步伐。如今的需求是由<em class="lk">快速数据</em>或<em class="lk">流数据架构</em>提供的实时集成。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ls"><img src="../Images/0febe7c86f240f8f8877f70280d4946b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*37ibHjevG7ba5Wqa"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><em class="lp">来源:</em><a class="ae jn" href="https://blogs.informatica.com/2020/05/13/adopt-a-kappa-architecture-for-streaming-and-ingesting-data/" rel="noopener ugc nofollow" target="_blank"><em class="lp">https://blogs . informatica . com/2020/05/13/adopt-a-kappa-architecture-for-streaming-and-ingesting-data/</em></a></figcaption></figure><h1 id="bd0a" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">分布式API管理</h1><p id="0923" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">当我们有许多分散的团队，所有东西都是分布式的——应用程序、服务甚至集成——我们最好在所有相关部分之间有明确的合同，换句话说，我们需要一个可靠的<strong class="jq hj"> API优先</strong>策略，这意味着API被视为<em class="lk">一等公民</em>。但是，对于实践DevOps的组织来说，使用由集中团队管理的传统API网关以基于票证的方式工作并不是一个可行的选择。</p><p id="bb26" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://docs.pivotal.io/scg-k8s/1-0/" rel="noopener ugc nofollow" target="_blank">Spring Cloud Gateway for Kubernetes</a>，它基于非常成功的同名OSS项目，当与全新的<a class="ae jn" href="https://docs.pivotal.io/api-portal/1-0/" rel="noopener ugc nofollow" target="_blank"> API portal for VMware Tanzu </a>结合使用时，负责后端服务(微服务、monoliths、遗留应用程序或任何其他相关内容)的分布式团队可以控制API的定义/发布。API配置可以使用它们自己的CI/CD管道 <em class="lk">以及它们的发布过程</em>进行<em class="lk">版本控制和部署，换句话说，就是API的<strong class="jq hj">GitOps</strong>。因此，API生命周期由拥有后端服务的团队联合和控制。这就是我们所说的<a class="ae jn" href="https://redmonk.com/videos/what-is-a-distributed-api-gateway/" rel="noopener ugc nofollow" target="_blank">分布式API网关</a>。您可以在下面找到一个在混合云环境中部署的分布式API网关的示例。</em></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lt"><img src="../Images/f184efb82db7ccaa0fd4d162a19ba7a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B8Z4jrO8h-eSEqvf"/></div></div></figure><p id="9b87" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在安装了<em class="lk">Spring Cloud Gateway Kubernetes Operator</em>、<em class="lk">用于VMware Tanzu的API门户</em>并配置您的API门户以指向您的API网关之后，您可以将以下配置应用到您的集群:</p><ul class=""><li id="fa33" class="lu lv hi jq b jr js ju jv jx lw kb lx kf ly kj lz ma mb mc bi translated">部署三个API网关实例:</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es md"><img src="../Images/feec2d34e537bd02ade109462776b954.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/format:webp/1*EXMZzfTH8I-EObEDXgBN_Q.png"/></div></figure><ul class=""><li id="140f" class="lu lv hi jq b jr js ju jv jx lw kb lx kf ly kj lz ma mb mc bi translated">配置到GitHub的路由</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es me"><img src="../Images/61e07e4c6f9f38fc9d0a2f47534d64fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PYR3xcA7Ad1A4Jdg"/></div></div></figure><ul class=""><li id="3a91" class="lu lv hi jq b jr js ju jv jx lw kb lx kf ly kj lz ma mb mc bi translated">将新创建的路由映射到适当的网关实例</li></ul><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mf"><img src="../Images/4168a7bc16900c8e79465048f93a2c6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fW-TKeqxrCf7nT_9"/></div></div></figure><p id="7ce9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在，您应该能够打开API门户并读取已配置路由的OpenAPI定义:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/d86da009181bc8d7813f4949d5e03a76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K6MMdPHXer_6zuBs"/></div></div></figure><p id="4b9f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想尝试一下，你可以在这里找到上面所有的代码和部署整个环境的脚本以及一些其他有趣的东西。</p><h1 id="b143" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论</h1><p id="f8c9" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">企业应用集成(EAI)不能忽视从敏捷、开发运维以及云迁移中学到的技术和良好实践，也不能忽视从集中的象牙塔中获得的技术和良好实践。在我看来，实现可伸缩性和可持续性的唯一方法是通过多个<em class="lk">小型、</em>T20】联合和<em class="lk">自主</em>团队合作，在<em class="lk">安全的环境中工作，任何错误的影响范围都是有限的</em>。</p><p id="18bd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我建议<strong class="jq hj">使用API优先的方法，结合由分布式、弹性和可靠的消息传递结构支撑的持续事件驱动架构</strong>来处理企业集成。</p></div></div>    
</body>
</html>