<html>
<head>
<title>How to become a RegEx Wizard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何成为正则表达式向导</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-become-a-regex-wizard-731000cd704e?source=collection_archive---------15-----------------------#2021-09-02">https://medium.com/codex/how-to-become-a-regex-wizard-731000cd704e?source=collection_archive---------15-----------------------#2021-09-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f40b" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">正则表达式基础及其实际应用</h2></div><p id="b4b5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在用Ruby为一个博客应用程序编写一些验证时，我遇到了一个问题。我想写一个验证来确保一个新的博客文章的标题包括各种潜在的字符串之一。我最终能够提出一个涉及许多许多逻辑OR运算符的解决方案。非常重复，当然也不漂亮。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/870bd9cddd13a9cf6efcbd3cd7e1af60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*1Rg5JFFx_wpi4C_29Yt4ug.jpeg"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">不使用正则表达式编写验证</figcaption></figure><p id="c138" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我知道一定有更好的方法。这种更好的方法很快以正则表达式的形式出现。我完全掉进了兔子洞，并发现RegEx使查找字符串变得容易多了。</p><p id="0fbe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那么什么是正则表达式呢？本质上，它们允许我们梳理字符串，寻找特定的模式或字符，并在其他地方使用这些信息，比如Ruby验证。</p><p id="998d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每个正则表达式都以正斜杠开始和结束，就像这样:</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="4127" class="kk kl hi kg b fi km kn l ko kp">/bat/</span></pre><p id="7e48" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将选择字符串中第一个<code class="du kq kr ks kg b">“bat”</code>实例。</p><h2 id="3cd2" class="kk kl hi bd kt ku kv kw kx ky kz la lb jg lc ld le jk lf lg lh jo li lj lk ll bi translated">旗帜</h2><p id="7d91" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">您还可以在表达式的末尾添加一个或多个“标志”。一些有用的基本标志是</p><ul class=""><li id="89f3" class="lr ls hi iz b ja jb jd je jg lt jk lu jo lv js lw lx ly lz bi translated">g(全球)，</li><li id="f7eb" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">I(不区分大小写)</li><li id="5037" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">x(扩展模式)</li></ul><p id="7ba0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">全局标志将选择表达式的每个实例，而不仅仅是第一个。不区分大小写标志忽略大小写差异。扩展模式标志会忽略正在梳理的字符串中的空白。</p><h2 id="8401" class="kk kl hi bd kt ku kv kw kx ky kz la lb jg lc ld le jk lf lg lh jo li lj lk ll bi translated">特殊字符</h2><p id="0f49" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">特殊字符和修饰符允许您进一步指定如何从字符串中进行选择。重要的是要知道:</p><ul class=""><li id="ef72" class="lr ls hi iz b ja jb jd je jg lt jk lu jo lv js lw lx ly lz bi">+</li><li id="6f88" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi">?</li><li id="9396" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi">*</li><li id="bf61" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi">.</li><li id="7c29" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi">{}</li></ul><p id="6c9b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">+修饰符选择一个或多个前面的标记。例如，如果您在一串<code class="du kq kr ks kg b">“The bat and the cat fought over the food.”</code>上使用<code class="du kq kr ks kg b">/o+/g</code>，不仅<code class="du kq kr ks kg b">“cat”</code>和<code class="du kq kr ks kg b">“fought”</code>中的前两个o会被选中，而且<code class="du kq kr ks kg b">"food"</code>中的双o也会被选中。</p><p id="f810" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">那个？modifer选择零个或一个前面的标记，本质上使选择是可选的。使用上面的相同字符串并使用表达式<code class="du kq kr ks kg b">/ou?/g</code>将会选择在“fighted”中找到的ou，但是句子中其余的单个o也会被选择。后面的u字符只是可选的。</p><p id="116d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">*修饰符选择零个或多个前面的标记，即？和+修饰语。再次使用相同的字符串，<code class="du kq kr ks kg b">/fo*/g</code>的正则表达式将选择<code class="du kq kr ks kg b">“fought”</code>中的f，以及<code class="du kq kr ks kg b">“food”</code>中的foo。</p><p id="b5ed" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">的。是一个特殊的字符，它可以匹配除了新行之外的任何内容。例如，<code class="du kq kr ks kg b">/.at/g</code>将同时选择<code class="du kq kr ks kg b">“bat”</code>和<code class="du kq kr ks kg b">“cat”</code>。在这种情况下，句点充当通配符，代表任何字符。注意:如果你想选择句点作为字符，你要做的就是在它前面加一个反斜杠，就像这样<code class="du kq kr ks kg b">/\./g</code>。该表达式对特殊字符进行转义，并选择字符串中的每个句点</p><p id="a95f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">大括号{}允许您提供最小和最大数字来选择字符数。<code class="du kq kr ks kg b">{3}</code>会选择一行中前面的任意三个标记。<code class="du kq kr ks kg b">{3,}</code>会在前面的一行记号中选择三个或更多的字符。<code class="du kq kr ks kg b">{3–4} </code>将在前面的标记的一行中返回三到四个字符。当与范围和它们的快捷方式结合使用时，这个修饰符更有用。</p><h2 id="33d0" class="kk kl hi bd kt ku kv kw kx ky kz la lb jg lc ld le jk lf lg lh jo li lj lk ll bi translated">范围</h2><p id="60da" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">使用方括号可以匹配其中的任何字符，也可以用来定义范围。例如，<code class="du kq kr ks kg b">[12345]</code>和<code class="du kq kr ks kg b">[1–5]</code>都会选择1到5之间的任意数字。一些有用的范围是<code class="du kq kr ks kg b">[0–9]</code>、<code class="du kq kr ks kg b">[a-z]</code>和<code class="du kq kr ks kg b">[A-Z]</code>。某些范围也有快捷方式:</p><ul class=""><li id="0f1b" class="lr ls hi iz b ja jb jd je jg lt jk lu jo lv js lw lx ly lz bi translated"><code class="du kq kr ks kg b">[0–9]</code>可以表示为<code class="du kq kr ks kg b">\d</code>，也可以表示为否定<code class="du kq kr ks kg b">\D</code>。</li><li id="c5ce" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated"><code class="du kq kr ks kg b">[0–9a-zA-Z]</code>可以表示为<code class="du kq kr ks kg b">\w</code>，也可以表示为否定<code class="du kq kr ks kg b">\W</code>。</li><li id="74f9" class="lr ls hi iz b ja ma jd mb jg mc jk md jo me js lw lx ly lz bi translated">空白可以选择为\s，或者负的<code class="du kq kr ks kg b"> \S</code>。</li></ul><p id="775c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">另一个有用的约定是通过()分组。</p><h2 id="f63e" class="kk kl hi bd kt ku kv kw kx ky kz la lb jg lc ld le jk lf lg lh jo li lj lk ll bi translated">捕获组</h2><p id="186d" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">括号内的任何东西都是捕获组，意味着它们只作用于自己。这意味着可以使用运算符，如逻辑OR，而不会弄乱表达式的其余部分。例如，如果在字符串<code class="du kq kr ks kg b">“The bat and the cat fought over the food.”</code>上调用正则表达式<code class="du kq kr ks kg b">/(c|b)at/g </code>，它将选择<code class="du kq kr ks kg b">“bat”</code>和<code class="du kq kr ks kg b">“cat”</code>。如果删除括号并调用<code class="du kq kr ks kg b">/c|bat/g</code>，则<code class="du kq kr ks kg b">“bat”</code>仍会被选中，但只有字母<code class="du kq kr ks kg b">“c”</code>会被选中，因为它是通过逻辑OR分隔的。这也可以用花括号配对。<code class="du kq kr ks kg b">/(o|f|u){2,3}/g</code>将选择两组三个:fou在<code class="du kq kr ks kg b">“fought”</code>中，foo在<code class="du kq kr ks kg b">“food”</code>中。</p><h2 id="f317" class="kk kl hi bd kt ku kv kw kx ky kz la lb jg lc ld le jk lf lg lh jo li lj lk ll bi translated">实际应用</h2><p id="cee1" class="pw-post-body-paragraph ix iy hi iz b ja lm ij jc jd ln im jf jg lo ji jj jk lp jm jn jo lq jq jr js hb bi translated">通过上面的信息，您将能够完成RegEx通常用途的大约90%。让我们来看一个实际的例子。假设您的应用程序需要通过信用卡支付。我们希望验证输入的信息是有效的信用卡号。完美的正则表达式！</p><p id="a8fe" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以编写一个简单的表达式来检查16个连续的数字，如下所示:</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="b9a8" class="kk kl hi kg b fi km kn l ko kp">/\d{16}/</span></pre><p id="fd7f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但是如果用户决定将信用卡号分成四个一组怎么办:<code class="du kq kr ks kg b">5555–5555–5555–5555</code>。合理，但是上面的选择器不行。要解决这个问题，您可以在四组选择器之间添加连字符，查找四个数字，如下所示:</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="29fe" class="kk kl hi kg b fi km kn l ko kp">/\d{4}-\d{4}-\d{4}-\d{4}/</span></pre><p id="9400" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这是可行的，但是为了同时处理带连字符的数字和普通块，我们需要将连字符设为可选的。我们该怎么做？</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="5883" class="kk kl hi kg b fi km kn l ko kp">/\d{4}-?\d{4}-?\d{4}-?\d{4}/</span></pre><p id="0ec8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">没错！那个？修饰符使选择器无论连字符是否存在都可以工作。最后，如果用户使用空格而不是破折号会怎样？向下滚动之前，试着想清楚。</p><p id="5e7c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">请记住，我们希望该表达式与所有三个选项一起工作:一个块、连字符或空格。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mf"><img src="../Images/d4623201881875789e8dc901bf6b124d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*GiSA59aSeenu8hdJTg_aAA.gif"/></div></figure><p id="1ca0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了让这三者都工作，我们希望将连字符和空格组合在一个字符组中，如下所示:</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="35e7" class="kk kl hi kg b fi km kn l ko kp">/\d{4}[ -]?\d{4}[ -]?\d{4}[ -]?\d{4}/</span></pre><p id="59ce" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这就对了。这将允许正则表达式选择或匹配信用卡号，无论它是单个块，由连字符分隔，还是由空格分隔。作为额外的奖励，您可以在数字的每一部分加上括号，如下所示:</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="0cf4" class="kk kl hi kg b fi km kn l ko kp">(\d{4})[ -]?(\d{4})[ -]?(\d{4})[ -]?(\d{4})</span></pre><p id="6302" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这将允许您单独访问每组四个数字。默认情况下，这些组被命名为1、2、3和4，但也可以给定自定义名称:</p><pre class="ju jv jw jx fd kf kg kh ki aw kj bi"><span id="64d8" class="kk kl hi kg b fi km kn l ko kp">(?&lt;name1&gt;\d{4})[ -]?(?&lt;name2&gt;\d{4})[ -]?(?&lt;name3&gt;\d{4})[ -]?(?&lt;name4&gt;\d{4})</span></pre><p id="d7e8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你有它！你现在正在成为一名正则表达式大师。如果你想尝试这些例子或者做进一步的实验，<a class="ae mg" href="https://regexr.com/" rel="noopener ugc nofollow" target="_blank">Regexr.com</a>是可视化正则表达式如何工作的极好资源。</p></div></div>    
</body>
</html>