<html>
<head>
<title>Web Application to Microservice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Web应用到微服务</h1>
<blockquote>原文：<a href="https://medium.com/codex/web-application-to-microservice-4321c5fbecd2?source=collection_archive---------6-----------------------#2022-10-29">https://medium.com/codex/web-application-to-microservice-4321c5fbecd2?source=collection_archive---------6-----------------------#2022-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="2131" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">微服务是目前软件工程师中非常热门的话题。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/be0447ca43960f49ce36c3f572e828fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LoUS7TkpAzkZdqFOELJkaw.png"/></div></div></figure><p id="9eec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">2011年，为软件架构师举办了研讨会。在那个车间术语中，第一次使用了微服务。詹姆斯·刘易斯在2012年3月展示了他对微服务的一些想法。2013年，马丁·福勒写了一本关于这个主题的书。</p><p id="d3a1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">2014年，詹姆斯·刘易斯和马丁·福勒一起提供了一些真实世界的例子，并展示了微服务。它为web应用程序提供了一个新的架构视图。之后，它变得足够流行，被认为是大型企业的有力竞争者。</p><p id="c1e1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本文中，我将讨论web应用程序和微服务之间的主要区别。然后，您可以决定是否从web应用程序迁移到微服务。</p><p id="e88d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">什么是单片应用？</p><p id="8a84" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在微服务出现之前，许多应用都是为单片架构开发的。因此，这些应用被称为单片应用。整体式应用程序是作为一个统一的单元构建的。这意味着一个单一的应用程序对于整个应用程序只有一个可执行文件。这可能不可执行。这可以是war文件、er文件或任何其他档案。但问题是整个应用程序被打包到一个文件中。</p><p id="00fa" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">比如，假设你有一个学校管理系统。该系统包括学生注册、考试成绩发布、费用管理和考勤管理等流程。这是一个整体的应用程序。所以所有的进程都构建到一个文件中。假设在部署应用程序后，委托人请求更改费用管理中的简单业务逻辑。为了更新这个简单的逻辑，你必须休眠整个文件。不仅如此，我们还必须测试整个应用程序。这是使用单片应用程序的缺点之一。</p><p id="0554" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">对于单片应用程序来说，调试过程非常困难。它维护着一个巨大的代码库。大量工程师参与开发过程。所以每个工程师对应用程序的开始到结束都没有概念。那么调试就变得非常困难。部署过程也很复杂。</p><p id="09a3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">什么是微服务？</strong></p><p id="ba5a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">微服务是一种架构。要开发您的微服务架构，您可以使用任何平台、任何语言和任何工具。微服务架构风格，将单个应用程序开发为一组小服务。</p><p id="1529" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">微服务没有提取定义。但马丁·弗劳尔对此给出了一些想法。所以人们以此为基线给出微服务的定义。</p><p id="d1b7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你想建一栋房子。当你想盖一栋房子时，你可以去找建筑师，解释你对建筑的要求，然后他们会画一个好的建筑师并还给你。当你建立这一点，它需要六个月或一年的过程，这取决于你的情况；在此期间，你可以稍微修改。对于该架构，我们可以进行修改，但我们必须确保您知道自己在做什么，并且您应该能够承担风险。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es kf"><img src="../Images/154a8874d1c54b9713d251649319ddc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/1*7Em5hTjNypgv-FJR4CNTZw.gif"/></div></figure><p id="3b13" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">微服务是有专门的生活目的的。换句话说，就是领域驱动开发。微服务必须具备一些特征。那些是，</p><ul class=""><li id="e748" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">定义明确的范围</li><li id="47ee" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">运行自己的流程(自己的web容器)</li><li id="92cd" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">通过轻量级机制与其他服务通信。大部分时间它使用HTTP。但并不局限于HTTP。</li><li id="fe01" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">能够作为单独的服务进行扩展和部署</li><li id="c725" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">应该尽可能保持分散控制。</li></ul><p id="cd89" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">可独立扩展</strong></p><p id="b30c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">独立可扩展是微服务的主要特性之一。</p><p id="9d43" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在《可伸缩性的艺术》一书中，这本书对伸缩应该如何工作给出了一个很好的解释。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ku"><img src="../Images/329e39828348f4530869d88b918a53df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RgiIXHF_O5llDpJfiqWzcw.png"/></div></div></figure><p id="c2b3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">他们将三个轴定义为x、y和z。</p><p id="d039" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">x —应用程序必须能够通过x轴向外扩展。这意味着一个实例不足以正常运行服务，那么它必须能够产生其他实例并平稳地运行应用程序。我们可以进行群集，并添加更多的数据中心。等等，重要的是它应该能够横向扩展。</p><p id="a91a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">y——这应该能够进行功能分解。让我们以之前的单一学校管理系统为例。有4个主要过程学生注册，考试成绩发布，费用管理，和出勤管理。所以所有进程都在一个应用程序上。</p><p id="3bf4" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">作为第一阶段，我们可以将这些分成4个服务。而不是成为4个不同的独立服务。但是你不应该追求粒度级别。那么就会有问题，因为一个服务需要一些时间与另一个服务进行通信。所以你必须确保正确的平衡。</p><p id="b198" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在我们有4种不同的服务。有一个很重要的事情要考虑，学生模块有学生，s和支持模块有学生。当学生来到支持模块时，这是一个不同的视角。这是一个不同的领域和不同的观点。这就是称之为领域驱动开发的原因。</p><p id="39e9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">假设当考试结果公布时，系统上有巨大的流量。所以作为一个开发者，我必须再推出3个考试服务。在单片应用程序中，这是不可能的，因为所有进程都在同一个文件中。所以我必须生成整个应用程序。这是一种浪费。但是如果我们将这些实现为服务，我可以为考试结果生成3个实例。不会受到其他服务的影响。它节省了一些成本和时间。</p><p id="9007" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">z —这个应该可以分片。此外，它应该在地理上划分流量，类似亚洲客户直接到亚洲服务器，美国客户到美国服务器。等等…</p><p id="8c5e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">您可以使用任何编程语言来开发服务。使用编程语言没有限制。有一些开发微服务最流行的语言，比如Java、JavaScript (NodeJS、NestJS)和Python。大多数人用Java。如果你使用java，有一些框架，如spring-boot、microservices for java、Wso ms4j和drop wizard。等等…</p><p id="a9d3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当考虑设计时，使用领域驱动的设计是非常重要的。任何服务都不应该依赖于任何因素。这意味着服务应该能够在任何给定的时间从系统中移除，也可以在任何时候插入系统。这意味着不应该将一个服务与另一个服务紧密耦合。</p><p id="ce9f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">微服务最重要的一部分就是服务弹性和容错。这是必须实现的，因为这不是一个特性。例如，您将从服务a调用服务B。让我们假设考试结果发布服务从学生管理服务请求学生验证。但遗憾的是，学生管理系统停运了。在这种情况下，它应该能够管理故障。这就叫宽容。为此，我们可以使用代理和断路器模式等故障机制。等等…</p><p id="62bf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要开发微服务，你应该有一个完整的团队。这个团队必须包括来自所有领域的人，比如UI和QA。这个团队由10到12个成员组成，整个团队对系统负责。有一个概念叫微服务“你建立它，你拥有它”。部署之后，系统支持团队负责维护应用程序。但是对于微服务来说，即使在部署之后，整个开发团队也要对系统负责。</p><p id="52b9" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">优势:</p><ul class=""><li id="97f4" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">它易于维护，因为所有的服务都是隔离的。</li><li id="681a" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">这很容易扩展</li><li id="eb68" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">可以独立部署每项服务</li><li id="d683" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">独立可扩展</li></ul><p id="4116" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">缺点:</p><ul class=""><li id="31ed" class="kg kh hi jl b jm jn jp jq js ki jw kj ka kk ke kl km kn ko bi translated">不容易监控。因为它有不同的服务。</li><li id="99a3" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">测试的复杂性</li><li id="2f95" class="kg kh hi jl b jm kp jp kq js kr jw ks ka kt ke kl km kn ko bi translated">已单独启动每项服务。</li></ul><p id="2367" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">谢谢大家！</p></div></div>    
</body>
</html>