<html>
<head>
<title>Creating the Network Module with Hilt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Hiltåˆ›å»ºç½‘ç»œæ¨¡å—</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/creating-the-network-module-with-hilt-3eefc54b72?source=collection_archive---------3-----------------------#2021-07-09">https://medium.com/codex/creating-the-network-module-with-hilt-3eefc54b72?source=collection_archive---------3-----------------------#2021-07-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1b50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åœ¨å‰ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†åº”ç”¨ç¨‹åºæ¨¡å—ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Hiltæ³¨å…¥åº”ç”¨ç¨‹åºå®ä¾‹ã€‚åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•ä½¿ç”¨Hiltè®¾ç½®ç½‘ç»œæ¨¡å—ï¼Œç„¶åä½¿ç”¨MVVMæ¶æ„é€šè¿‡ç½‘ç»œæ¨¡å—è¿›è¡ŒAPIè°ƒç”¨ã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c26f41d9c78dd120ecf5523acb33b064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Arut6h5G5V3DDiT2"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">è’™ç½—å·¥ä½œå®¤åœ¨<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>æ‹æ‘„çš„ç…§ç‰‡</figcaption></figure></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="6691" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ å¯ä»¥ä»è¿™é‡Œè·³åˆ°è¿™ä¸ªç³»åˆ—çš„ä»»ä½•éƒ¨åˆ†</p><div class="kb kc ez fb kd ke"><a rel="noopener follow" target="_blank" href="/@priyansh-kedia/using-hilt-in-the-network-module-6ff8c50027d6"><div class="kf ab dw"><div class="kg ab kh cl cj ki"><h2 class="bd hj fi z dy kj ea eb kk ed ef hh bi translated">ä¸­ç­‰</h2><div class="kl l"><h3 class="bd b fi z dy kj ea eb kk ed ef dx translated">ç½‘ç»œæ¨¡å—ä¸­çš„å¥æŸ„</h3></div></div></div></a></div><div class="kb kc ez fb kd ke"><a rel="noopener follow" target="_blank" href="/@priyansh-kedia/creating-viewmodel-dependencies-using-hilt-ff8005488910"><div class="kf ab dw"><div class="kg ab kh cl cj ki"><h2 class="bd hj fi z dy kj ea eb kk ed ef hh bi translated">ä¸­ç­‰</h2><div class="kl l"><h3 class="bd b fi z dy kj ea eb kk ed ef dx translated">åˆ›å»ºè§†å›¾æ¨¡å‹ä¾èµ–é¡¹</h3></div></div></div></a></div></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="bf1a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">ç½‘ç»œæ¨¡å—ğŸ‘‘</strong></p><p id="b2d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„Kotlinç±»ï¼Œå¹¶å°†å…¶å‘½åä¸º<strong class="ih hj"> NetworkModule </strong>ã€‚</p><p id="b281" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬ä½¿ç”¨<strong class="ih hj"> @Moduleå’Œ@InstallInæ³¨é‡Šè¿™ä¸ªç±»ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé˜…è¯»è¿™äº›æ³¨è§£ã€‚æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªå¸®åŠ©æ³¨å…¥Gsonçš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨Gsonå¯¹JSONå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</strong></p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="8612" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>@Singleton<br/>fun getGson(): Gson {<br/>    return GsonBuilder().serializeNulls().setLenient().create()<br/>}</span></pre><p id="31c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬ä½¿ç”¨@Provideså’Œ@Singletonæ¥æ³¨é‡Šä¸Šé¢çš„æ–¹æ³•ã€‚è¿™äº›æ³¨é‡Šåœ¨ä¹‹å‰çš„åšå®¢ä¸­æœ‰ç®€è¦çš„è§£é‡Šã€‚</p><p id="585a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> serializeNulls() </strong>ç”¨äºæŒ‡å®šå³ä½¿æ˜¯ç©ºå€¼ä¹Ÿå°†è¢«åºåˆ—åŒ–ã€‚<em class="kx">é»˜è®¤æƒ…å†µä¸‹ï¼ŒGsonçœç•¥ç©ºå­—æ®µã€‚</em></p><p id="ce06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">set letterance()</strong>ä½¿Gsonè§£æå™¨åœ¨æ¥å—ä»€ä¹ˆæ–¹é¢æ›´åŠ è‡ªç”±<em class="kx">ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸¥æ ¼çš„ï¼Œåªæ¥å—JSONã€‚</em></p><h2 id="8f5a" class="kr ks hi bd ky kz la lb lc ld le lf lg iq lh li lj iu lk ll lm iy ln lo lp lq bi translated">ä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬é¦–å…ˆåˆ›é€ äº†è¿™ç§æ–¹æ³•å‘¢ï¼Ÿ</h2><p id="024a" class="pw-post-body-paragraph if ig hi ih b ii lr ik il im ls io ip iq lt is it iu lu iw ix iy lv ja jb jc hb bi translated">è¿™æ˜¯å› ä¸ºGsonä¾èµ–äºæˆ‘ä»¬å°†åœ¨NetworkModuleä¸­åˆ›å»ºçš„å…¶ä»–æ–¹æ³•ä¹‹ä¸€ã€‚</p><p id="f313" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸ºç½‘ç»œæ‹¦æˆªå™¨åˆ›å»ºæ–¹æ³•ã€‚</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="e7f5" class="kr ks hi bd ky kz la lb lc ld le lf lg iq lh li lj iu lk ll lm iy ln lo lp lq bi translated">æ‹¦æˆªå™¨æ–¹æ³•</h2><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="7325" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>@Singleton<br/>fun getInterceptor(): Interceptor {<br/>    return Interceptor <strong class="kn hj">{<br/>        </strong>val request = <strong class="kn hj">it</strong>.request().newBuilder()<br/>        val actualRequest = request.build()<br/>        <strong class="kn hj">it</strong>.proceed(actualRequest)<br/>    <strong class="kn hj">}<br/></strong>}</span></pre><p id="bd2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸Šé¢çš„æ–¹æ³•ç”¨äºåœ¨æˆ‘ä»¬å³å°†åˆ›å»ºçš„æ”¹è¿›å®ä¾‹ä¸­æ³¨å…¥æ‹¦æˆªå™¨ã€‚æ‚¨è¿˜å¯ä»¥ä¸ºæ‰€æœ‰è¯·æ±‚æ·»åŠ æ ‡é¢˜ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼Œ</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="08cf" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>@Singleton<br/>fun getInterceptor(): Interceptor {<br/>    return Interceptor <strong class="kn hj">{<br/>        </strong>val request = <strong class="kn hj">it</strong>.request().newBuilder()<br/>        request.addHeader("Authorization", "&lt;Your token here&gt;")<br/>        val actualRequest = request.build()<br/>        <strong class="kn hj">it</strong>.proceed(actualRequest)<br/>    <strong class="kn hj">}<br/></strong>}</span></pre><p id="ccbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¸ºOkHttpClientåˆ›å»ºæ–¹æ³•ã€‚</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="155c" class="kr ks hi bd ky kz la lb lc ld le lf lg iq lh li lj iu lk ll lm iy ln lo lp lq bi translated">OkHttpClientæ–¹æ³•</h2><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="0669" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>    @Singleton<br/>    fun getOkHttpClient(<br/>        interceptor: Interceptor<br/>    ): OkHttpClient {<br/>        val httpBuilder = OkHttpClient.Builder()<br/>            .addInterceptor(interceptor)<br/>            .connectTimeout(30, TimeUnit.<em class="kx">SECONDS</em>)<br/>            .readTimeout(30, TimeUnit.<em class="kx">SECONDS</em>)<br/>            .writeTimeout(50, TimeUnit.<em class="kx">SECONDS</em>)<br/><br/>        return httpBuilder<br/>            .protocols(<em class="kx">mutableListOf</em>(Protocol.<em class="kx">HTTP_1_1</em>))<br/>            .build()<br/>    }</span></pre><p id="f9ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">OkHttpClientçš„æ‰€æœ‰è¿™äº›è®¾ç½®éƒ½æŒ‡å®šäº†è¯»å–ã€å†™å…¥å’Œè¿æ¥è¶…æ—¶ã€‚ä½ ä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ªç±»ä¼¼<a class="ae jt" href="http://facebook.github.io/stetho/" rel="noopener ugc nofollow" target="_blank"> Stetho </a>çš„ç½‘ç»œæ‹¦æˆªå™¨ã€‚è¿™å¯ä»¥è¿™æ ·åšï¼Œ</p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="b06f" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>    @Singleton<br/>    fun getOkHttpClient(<br/>        interceptor: Interceptor<br/>    ): OkHttpClient {<br/>        val httpBuilder = OkHttpClient.Builder()<br/>            .addInterceptor(interceptor)<br/><strong class="kn hj">            .addNetworkInterceptor(StethoInterceptor())<br/></strong>            .connectTimeout(30, TimeUnit.<em class="kx">SECONDS</em>)<br/>            .readTimeout(30, TimeUnit.<em class="kx">SECONDS</em>)<br/>            .writeTimeout(50, TimeUnit.<em class="kx">SECONDS</em>)<br/><br/>        return httpBuilder<br/>            .protocols(<em class="kx">mutableListOf</em>(Protocol.<em class="kx">HTTP_1_1</em>))<br/>            .build()<br/>    }</span></pre><p id="a042" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ‚¨å¯ä»¥çœ‹åˆ°æ‹¦æˆªå™¨æ˜¯å¯¹<strong class="ih hj"> getOkHttpClient </strong>æ–¹æ³•çš„ä¾èµ–ã€‚ä½¿ç”¨Daggeræ³¨å…¥ï¼Œæˆ‘ä»¬ä¸éœ€è¦å•ç‹¬åˆ›å»ºè¿™äº›ä¾èµ–é¡¹ã€‚</p><p id="6a00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬ç°åœ¨åˆ›å»ºç”¨äºç¿»æ–°çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºå»ºç«‹ä¸æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥ã€‚</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><h2 id="7d1c" class="kr ks hi bd ky kz la lb lc ld le lf lg iq lh li lj iu lk ll lm iy ln lo lp lq bi translated">æ”¹é€ æ–¹æ³•</h2><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="1634" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>@Singleton<br/>fun getRetrofit(<br/>    client: OkHttpClient,<br/>    gson: Gson<br/>): Retrofit {<br/>    return Retrofit.Builder()<br/>        .baseUrl(BuildConfig.<em class="kx">BASE_URL</em>)<br/>        .addConverterFactory(GsonConverterFactory.create(gson))<br/>        .client(client)<br/>        .build()<br/>}</span></pre><p id="7cde" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†è½¬æ¢å™¨å·¥å‚æ·»åŠ åˆ°æ”¹é€ ä¸­ï¼Œæ·»åŠ åŸºæœ¬URLå’ŒOkHttpClientã€‚å¯ä»¥çœ‹åˆ°Gsonå’ŒOkHttpClientæ˜¯è¿™ä¸ªå‡½æ•°çš„ä¾èµ–é¡¹ã€‚</p><p id="66ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æœ€åï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬è¿æ¥APIç«¯ç‚¹çš„æ¥å£æ–¹æ³•ã€‚</p><p id="4ca8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">API clientæ–¹æ³•</strong></p><pre class="je jf jg jh fd km kn ko kp aw kq bi"><span id="a9af" class="kr ks hi kn b fi kt ku l kv kw">@Provides<br/>@Singleton<br/>fun getApiClient(retrofit: Retrofit): ApiClient {<br/>    return retrofit.create(ApiClient::class.<em class="kx">java</em>)<br/>}</span></pre><p id="ed67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™ä¸ªæ–¹æ³•ç®€å•åœ°åˆ›å»ºäº†ä¸€ä¸ªApiClientå®ä¾‹ï¼Œæ–¹æ³•æ˜¯å°†retrofitè¿æ¥åˆ°å®ƒã€‚</p><p id="d035" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•åˆ›å»ºApiClientæ¥å£ï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºè§†å›¾æ¨¡å‹çš„ä¾èµ–å…³ç³»ã€‚</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="cc96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä»<a class="ae jt" rel="noopener" href="/@priyansh-kedia/creating-viewmodel-dependencies-using-hilt-ff8005488910">è¿™é‡Œ</a>è·³åˆ°ä¸‹ä¸€ç¯‡åšå®¢ã€‚</p></div><div class="ab cl ju jv gp jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="hb hc hd he hf"><p id="f321" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">å‚è€ƒæ–‡çŒ®</strong></p><div class="kb kc ez fb kd ke"><a href="https://square.github.io/retrofit/" rel="noopener  ugc nofollow" target="_blank"><div class="kf ab dw"><div class="kg ab kh cl cj ki"><h2 class="bd hj fi z dy kj ea eb kk ed ef hh bi translated">åŠ è£…</h2><div class="kl l"><h3 class="bd b fi z dy kj ea eb kk ed ef dx translated">æ¥å£æ–¹æ³•åŠå…¶å‚æ•°ä¸Šçš„æ³¨é‡Šè¡¨æ˜äº†å¦‚ä½•å¤„ç†è¯·æ±‚ã€‚è¯·æ±‚æ–¹æ³•æ¯éš”â€¦</h3></div><div class="lw l"><p class="bd b fp z dy kj ea eb kk ed ef dx translated">square.github.io</p></div></div></div></a></div></div></div>    
</body>
</html>