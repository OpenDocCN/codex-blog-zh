<html>
<head>
<title>Using Cloud9 to Publish AWS Lambda Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cloud9发布AWS Lambda函数</h1>
<blockquote>原文：<a href="https://medium.com/codex/using-cloud9-to-publish-aws-lambda-functions-58b8c7c6beca?source=collection_archive---------14-----------------------#2021-07-05">https://medium.com/codex/using-cloud9-to-publish-aws-lambda-functions-58b8c7c6beca?source=collection_archive---------14-----------------------#2021-07-05</a></blockquote><div><div class="dt gx gy gz ha hb"/><div class="hc hd he hf hg"><div class=""/><figure class="ew ey ih ii ij ik es et paragraph-image"><div class="es et ig"><img src="../Images/65afee7c1dff74911e84d64ef8753bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*V-JwnxjTcxY-m22r4z9Sqg.png"/></div></figure><p id="a9ca" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">我喜欢AWS Cloud9。这是一个方便可用的IDE，启动时间不会太长，不需要机器上的高要求资源，还可以从不同的计算机连接并继续您离开的地方。与本地安装的IDE相比，这是一项技术进步。</p><p id="f211" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">我已经开始为小工具编写大量的Lambda函数。也就是说，每个函数实现一个工具。我在编写它们时面临的一个挑战是快速编辑和部署每个Lambda函数。显然，Lambda控制台不足以快速编辑几十个功能，因为你要么必须打开几个选项卡，要么必须降低生产率以等待每个页面加载。</p><p id="6416" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">这根本不是一个理想的解决方案。</p></div><div class="ab cl jl jm gq jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hc hd he hf hg"><p id="4260" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">幸运的是，AWS已经将Lambda函数管理集成到Cloud9 IDE中，这样就可以在不引导IDE的情况下将您的代码上传到Lambda。但这在某些方面仍有不足。</p><p id="f543" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">首先，如果你犯了一个灾难性的错误，这个错误在你的所有功能中都是重复的，你必须立刻修复并部署它，那该怎么办？使用Cloud9接口，你仍然需要指向并点击每个函数，点击按钮将每个函数上传到Lambda，点击它们的目录和ZIP包，等等。所以当你有很多函数的时候，这并不是Lambda控制台的很大改进。</p><p id="9a20" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">说到ZIP包，它们必须以一种特殊的方式创建才能上传到Lambda。事实上，ZIP包和根文件夹是将模块依赖项与函数捆绑在一起的唯一方式，因为Lambda控制台仍然没有为您提供从代码编辑器添加外部依赖项的简单方法。</p><p id="b479" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">因此，考虑到所有这些都是艰苦的工作，并且随着更多功能的创建，工作预计会达到不可管理的程度，因此必须有一种更简单的方法来做到这一点。</p><h1 id="2462" class="js jt hj bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">自动化拯救世界</h1><p id="2d86" class="pw-post-body-paragraph in io hj ip b iq kq is it iu kr iw ix iy ks ja jb jc kt je jf jg ku ji jj jk hc bi translated">我们可以在Cloud9环境中使用简单的bash脚本自动压缩所有的函数文件夹，并将它们上传到各自的函数中。</p><p id="f43b" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">为此，我们需要安装AWS CLI。在运行Amazon Linux的Cloud9上，默认安装，但它是版本1。我个人更喜欢版本2，在他们的文档中有安装它的说明<a class="ae kv" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank">。但是，请确保如果您最终安装了版本2，您要么在PATH变量中将它的文件夹向前移动(我的文件夹安装在/usr/local下),要么使用<code class="dv kw kx ky kz b">yum remove awscli</code>卸载版本1，然后根据需要创建到/usr/bin/aws和/usr/bin/aws_complete的符号链接。当然，还要重启你的外壳。</a></p><p id="f728" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">在使用AWS CLI之前，我们需要为AWS生成一个访问密钥，该密钥可用于非交互式脚本命令。这可以在IAM控制台中创建<a class="ae kv" href="https://console.aws.amazon.com/iam/home?region=us-east-2#/security_credentials$access_key" rel="noopener ugc nofollow" target="_blank">。您将需要访问密钥ID和秘密密钥，因为您将在运行<code class="dv kw kx ky kz b">aws config</code>时填充它们。</a></p><h2 id="6642" class="la jt hj bd ju lb lc ld jy le lf lg kc iy lh li kg jc lj lk kk jg ll lm ko ln bi translated">剧本</h2><p id="6821" class="pw-post-body-paragraph in io hj ip b iq kq is it iu kr iw ix iy ks ja jb jc kt je jf jg ku ji jj jk hc bi translated">我创建了一个脚本，用于将所有文件夹压缩到它们自己的zip文件中，另一个脚本用于将每个zip文件夹上传到相应的Lambda函数中。这个特殊的脚本很简单，它假设Lambda函数被命名为名称的最后一部分是目录名。这两个脚本都应该放在~/环境文件夹中。</p><figure class="lo lp lq lr fe ik"><div class="bz dz l di"><div class="ls lt l"/></div></figure><p id="fed4" class="pw-post-body-paragraph in io hj ip b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk hc bi translated">另一个函数比这个简单得多，它使用AWS CLI将lambda-func.zip文件上传到lambda函数。在使用CLI之前，请记住使用您的API密钥对其进行配置。</p><figure class="lo lp lq lr fe ik"><div class="bz dz l di"><div class="ls lt l"/></div></figure><h1 id="fb9b" class="js jt hj bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">但是测试呢？</h1><p id="f20c" class="pw-post-body-paragraph in io hj ip b iq kq is it iu kr iw ix iy ks ja jb jc kt je jf jg ku ji jj jk hc bi translated">当然，在彻底测试之前，任何功能都不能投入使用。Lambda在控制台中提供测试事件来创建和运行函数，但是我还没有找到在CLI中复制它的方法。关于这一点，我确实问过一个<a class="ae kv" href="https://stackoverflow.com/questions/68231606/is-there-a-way-to-run-all-lambda-test-cases-simultaneously" rel="noopener ugc nofollow" target="_blank"> StackOverflow问题</a>，除了建议在我的测试事件中从脚本和CLI运行Lambda函数之外，没有得到太多的活动，所以我可能会尝试那个解决方案。</p></div></div>    
</body>
</html>