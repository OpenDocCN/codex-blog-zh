<html>
<head>
<title>Three Steps to Perform on Input Data to Make Your Software More Secure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对输入数据执行三个步骤，使您的软件更加安全</h1>
<blockquote>原文：<a href="https://medium.com/codex/three-operations-on-input-data-to-make-your-software-more-secure-e5fc5aca2e70?source=collection_archive---------4-----------------------#2021-06-18">https://medium.com/codex/three-operations-on-input-data-to-make-your-software-more-secure-e5fc5aca2e70?source=collection_archive---------4-----------------------#2021-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c7f7" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为什么检查输入数据作为软件安全的第一道防线至关重要？这种辩护具体是如何实现的？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/dd9e16ee019aa3d4b54418e635c13593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oF6jE2lmR5ycVNxjARCZTA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">艾伦·莱文在<a class="ae jn" href="https://www.flickr.com/photos/cogdog/44469799221" rel="noopener ugc nofollow" target="_blank"> Flickr </a>上的照片(2018年9月1日)。</figcaption></figure><p id="d008" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi kk translated"><span class="l kl km kn bm ko kp kq kr ks di">O</span><strong class="jq hj">主入口</strong>要点对于想要攻击计算机系统的人来说，就是软件使用的所有输入[1]。这些输入数据确实是系统攻击面的一部分，如果它们提供了可被利用的漏洞，就可能被攻击者利用。</p><p id="7f88" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">根据<em class="kt">OWASP web应用十大安全风险</em>，2017年第一位是<strong class="jq hj">注入</strong>，2021年很可能依然如此[2]。其他利用输入数据的攻击包括缓冲区溢出、web参数篡改、跨站点脚本等。，并且不限于web应用程序。</p><p id="81bd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一般来说，<strong class="jq hj">输入数据</strong>不仅仅包含从表单中收集的值。它还指软件读取的文件、配置数据、从数据库检索的值、操作系统的环境变量等。事实上，它包括来自可执行代码之外的任何东西，这些东西的值只有在运行时才知道，在编译期间是不确定的。</p></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><p id="f1be" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">对输入数据执行的三种操作</strong>可以被开发人员用来编写更安全的代码。它们有助于帮助程序员在处理输入数据时减少可能的漏洞。</p><h2 id="69fe" class="lb lc hi bd ld le lf lg lh li lj lk ll jx lm ln lo kb lp lq lr kf ls lt lu lv bi translated">1.确认</h2><p id="f1d2" class="pw-post-body-paragraph jo jp hi jq b jr lw ij jt ju lx im jw jx ly jz ka kb lz kd ke kf ma kh ki kj hb bi translated"><strong class="jq hj">验证</strong>步骤包括检查输入数据的几个特征是否得到满足【3】。可以检查输入数据的大小、域或格式等方面。在应用程序中使用数据之前，必须进行验证。例如，一个要求输入您的出生年份的应用程序可以检查:</p><ul class=""><li id="be6a" class="mb mc hi jq b jr js ju jv jx md kb me kf mf kj mg mh mi mj bi translated">它是一个四位数的整数值，</li><li id="e269" class="mb mc hi jq b jr mk ju ml jx mm kb mn kf mo kj mg mh mi mj bi translated">在[1900–2021]区间内，这是一个严格的正值。</li></ul><p id="0a6d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">具体地说，验证步骤可以用基本的结构(如<code class="du mp mq mr ms b">if-else</code>语句)从头开始。<strong class="jq hj">正则表达式</strong>也是检查数据格式的绝佳工具。当然，最好是使用特定的库来提出标准的<strong class="jq hj">验证器</strong>以及定义自定义验证器的方法。</p><p id="0f29" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了能够执行数据验证，必须首先定义所有输入数据的几个预期的<strong class="jq hj">属性</strong>和特征，例如文本值的格式或二进制值的结构、类型、域、大小、文本值的编码、文件格式等。</p><p id="f2b3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">例如，让我们考虑一个不验证数量字段的在线购物车应用程序。如果数量可以是负数，客户就可以通过从订单中赚钱来入侵系统。</p><h2 id="61ce" class="lb lc hi bd ld le lf lg lh li lj lk ll jx lm ln lo kb lp lq lr kf ls lt lu lv bi translated">2.标准化</h2><p id="4f7d" class="pw-post-body-paragraph jo jp hi jq b jr lw ij jt ju lx im jw jx ly jz ka kb lz kd ke kf ma kh ki kj hb bi translated"><strong class="jq hj">规范化</strong>步骤包括将输入数据的值转换成标准形式【4】。对于可以用其他方式表示的值，例如绝对和相对文件路径，此操作是必需的。规范化必须在对输入数据进行任何其他操作之前完成。例如，一个要求文件路径的应用程序可以首先将它们全部转换成绝对路径。</p><p id="dc62" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">具体地说，确认步骤是通过选择一个<strong class="jq hj">唯一表示</strong>并总是将所有输入数据转换成所选择的数据来完成的。它既可以“手动”执行，也可以在特定库的帮助下执行。</p><p id="1112" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">因此，使用规范化可以使<strong class="jq hj">不再需要在程序中有几个case</strong>，这取决于剩余代码中的表示。它必须用于路径和URL、Unicode字符串、XML和HTML文档等。</p><p id="6180" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="kt">例如，让我们考虑一个web应用程序，它允许其客户端下载文件名作为参数给出的文件。使用相对路径，攻击者有可能下载他/她不应该访问的文件。</em></p><h2 id="5092" class="lb lc hi bd ld le lf lg lh li lj lk ll jx lm ln lo kb lp lq lr kf ls lt lu lv bi translated">3.消毒</h2><p id="603d" class="pw-post-body-paragraph jo jp hi jq b jr lw ij jt ju lx im jw jx ly jz ka kb lz kd ke kf ma kh ki kj hb bi translated">最后，<strong class="jq hj">净化</strong>步骤包括通过移除输入数据的某些部分或以不同方式写入来转换输入数据的值[5]。这一步对于随后在程序中解释的值非常重要。在使用输入数据之前，必须进行清理。例如，博客应用程序可能需要从输入文本中删除JavaScript代码。</p><p id="4e80" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">具体来说，清理步骤通常是通过对输入数据的值应用几个<strong class="jq hj">过滤器</strong>，对特殊字符进行转义，或者在使用DBMS时使用准备好的语句来完成的。</p><p id="059e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">数据清理是一个重要的步骤，主要是为了避免代码<strong class="jq hj">注入</strong>或跨站脚本等攻击。它还可以用来使应用程序更加用户友好，对用户施加更少的限制，并清理他/她在程序中的输入。</p></div><div class="ab cl ku kv gp kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="hb hc hd he hf"><p id="edc5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">本文介绍的三个步骤作为软件安全的第一道防线非常重要。输入数据确实经常被攻击者用作攻击系统的一种方式。为了检查一个程序的健壮性，针对几个输入，尤其是恶意输入，对它进行彻底的测试是非常重要的。一个值得研究和使用的技术是输入模糊化[6]。</p><p id="62c2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">总之，正如计算机安全领域的一贯做法一样，要消除所有漏洞并将风险降至零是不可能的。我们只能尽最大努力尽可能地降低风险。在检查投入时，我们还必须注意剩余风险。例如，用于数据验证的正则表达式容易受到ReDoS攻击。</p><h2 id="16d0" class="lb lc hi bd ld le lf lg lh li lj lk ll jx lm ln lo kb lp lq lr kf ls lt lu lv bi translated">参考</h2><p id="3a6d" class="pw-post-body-paragraph jo jp hi jq b jr lw ij jt ju lx im jw jx ly jz ka kb lz kd ke kf ma kh ki kj hb bi translated">[1]欧盟网络安全局(2016年)。<a class="ae jn" href="https://www.enisa.europa.eu/publications/info-notes/the-dangers-of-trusting-user-input" rel="noopener ugc nofollow" target="_blank">网络安全信息中心指出，相信用户输入的危险。<br/> [2] OWASP (2017)。<a class="ae jn" href="https://owasp.org/www-project-top-ten" rel="noopener ugc nofollow" target="_blank">十大Web应用安全风险</a>，OWASP十大。<br/> [3] OWASP (2018)。<a class="ae jn" href="https://owasp.org/www-project-proactive-controls/v3/en/c5-validate-inputs" rel="noopener ugc nofollow" target="_blank"> C5:验证所有输入</a>，OWASP十大主动控制。<br/> [4]林子幸·菲森(2013)。<a class="ae jn" href="https://us-cert.cisa.gov/bsi/articles/knowledge/coding-practices/ensure-input-properly-canonicalized" rel="noopener ugc nofollow" target="_blank">确保输入正确规范化</a>，卡内基梅隆大学。<br/> [5]凯宾·史密斯(2019)。净化你的输入？</a>，凯宾·史密斯——长期坚持。<br/> [6] OWASP (2021)。<a class="ae jn" href="https://owasp.org/www-community/Fuzzing" rel="noopener ugc nofollow" target="_blank">起毛</a>。</p></div></div>    
</body>
</html>