<html>
<head>
<title>Python Pandas Tutorial — 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python熊猫教程— 10</h1>
<blockquote>原文：<a href="https://medium.com/codex/python-pandas-tutorial-10-de890c748801?source=collection_archive---------8-----------------------#2022-11-02">https://medium.com/codex/python-pandas-tutorial-10-de890c748801?source=collection_archive---------8-----------------------#2022-11-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7ed5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程将介绍如何处理日期和时间序列数据。</p><p id="fc49" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是我们用来探索日期时间的数据。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7351ec1ba95e49818ca0f04bbc24d9c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XzZhU8mbuZLFkFZlojXqEw.png"/></div></div></figure><p id="0ff1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有一个名为day_name的方法来查找panda中的日期名称，因此，如果我们想要第一次约会的日期，我们可以使用此方法作为第一次约会的时间值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/efa38408a4b7521131b4c076641fc58b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TVP0_rfM7nLVk6eUx0HvXQ.png"/></div></div></figure><p id="46da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，如果我们将此方法直接应用于我们的第一个日期，我们会得到错误“str”对象没有属性day_name，因为我们已经将日期时间作为字符串上传，所以在应用此方法之前，我们需要将其转换为日期时间。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/1d8944326167ad6936347ba031c15fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U0WlzAI04MrdqPNW8t3s2Q.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx translated">w</figcaption></figure><p id="818a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经将列DateTime作为参数传递，它现在被转换为日期时间格式，但是如果您有任何复杂的日期时间格式，那么我们必须将第二个参数作为“格式”给出，并让pandas知道我们想要转换哪种格式的日期，下面是Python日期时间代码的链接以供参考。</p><div class="jv jw ez fb jx jy"><a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior" rel="noopener  ugc nofollow" target="_blank"><div class="jz ab dw"><div class="ka ab kb cl cj kc"><h2 class="bd hj fi z dy kd ea eb ke ed ef hh bi translated">日期时间-基本日期和时间类型- Python 3.11.0文档</h2><div class="kf l"><h3 class="bd b fi z dy kd ea eb ke ed ef dx translated">模块只提供一个具体的类，即类。该类可以表示简单的时区，具有固定的…</h3></div><div class="kg l"><p class="bd b fp z dy kd ea eb ke ed ef dx translated">docs.python.org</p></div></div></div></a></div><p id="4f30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以使用day_name方法来查找日期。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/2e2608befe5d6e7da26fc18657ec88fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*fIkIckCxHQHPPuGkgE8Tfg.png"/></div></figure><p id="ea12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以在加载excel时将数据转换为日期时间，只需要将parse_dates作为第二个参数传递。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e2357a63066571d355238ab065148a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UMOleln1GlHIaLVZhCVrAw.png"/></div></div></figure><p id="9db7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们要运行' day_name '方法来检查整个系列的日期，我们可以使用' dt '类来访问相同的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ki"><img src="../Images/0cecfa0f3b9171e580ba7ebb1fd14289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*GTzhH-Cs0HUPzWL7eAggdg.png"/></div></figure><p id="2e7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以添加一个名为星期几的新列来检查星期几和日期。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/4942d754af542286c164c3565a8c6436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNBgMQH-C8HIAyE5ZzYb3Q.png"/></div></div></figure><p id="1a42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以对日期执行min()和max()操作，并计算相同日期的时间增量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kk"><img src="../Images/a3dbba87a2cd409897271ca1a6ac8adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*0VBQMXR64UJN4NWfrY1p1g.png"/></div></figure><p id="e61b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，如果我们想要创建一个过滤器并访问特定日期范围的结果，我们可以使用下面的代码执行相同的操作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/7bb3f79e03f4b272a7460777e854c96a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UJA66AFhM90qTL26JoYiKg.png"/></div></div></figure><p id="703e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以使用AND、OR运算符来添加更多的条件，我们也可以使用pandas的“to_datetime”方法进行相同的操作，并传递一个字符串作为参数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es km"><img src="../Images/1843e5be702f0321e2082a590395ce84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbGdZjVn5ImnRAPqGHq2rw.png"/></div></div></figure><p id="205f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们将DateTime列作为一个索引，那么我们可以通过传递一个参数直接访问该值，而不需要为特定的年份创建一个过滤器，下面是相同的代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/2f1db660582429b5cef7273f545b1921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QOdg0QamdGnsejqR4ZaxRg.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/6a160633210139d90383532a8f0c07a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FYCUOzqXgo_xheAhM75hnw.png"/></div></div></figure><p id="fb43" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以在这里使用切片来过滤日期，假设我们只需要2019年1月到2019年2月的数据，然后我们编写以下代码。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/72de0cf1a87d509be7b90815e2ce0098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qspyFJH41ZFr3E4mP3uPEw.png"/></div></div></figure><p id="503e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们收到此警告，因为它已被否决，在未来版本中不可用。</p><p id="dbdf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将使用重采样方法按天对数据进行重采样，并尝试找到一天的最大会话计数，为了对数据进行重采样，我们可以传递参数，如，天，周等，下面是Pandas文档的链接。</p><div class="jv jw ez fb jx jy"><a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects" rel="noopener  ugc nofollow" target="_blank"><div class="jz ab dw"><div class="ka ab kb cl cj kc"><h2 class="bd hj fi z dy kd ea eb ke ed ef hh bi translated">时间序列/日期功能- pandas 1.5.1文档</h2><div class="kf l"><h3 class="bd b fi z dy kd ea eb ke ed ef dx translated">pandas包含广泛的功能和特性，可以处理所有领域的时间序列数据。使用数字…</h3></div><div class="kg l"><p class="bd b fp z dy kd ea eb ke ed ef dx translated">pandas.pydata.org</p></div></div></div></a></div><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kp"><img src="../Images/30dae5b5049433fd2deff498a653b47c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*FeqCPGt6mFJJ3JgnSyWWtg.png"/></div></figure><p id="473b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们对日期的数据进行重新采样，并将其存储到变量中，如果我们希望看到某个特定日期的高值，只需将它作为参数传递就可以找到。</p><p id="cc3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以使用matplotlib绘制相同的图形，请注意，我将在接下来的博客中介绍完整的matplotlib教程，这里我只展示一个示例。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/d0babf0a8b0ef123d7ef16e1243352af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*McPSD0DFfOV7x5c77hgL7g.png"/></div></div></figure><p id="278e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们没有得到一个图表，因为我们有更少的数据量，但它将提供一个很好的图形表示。</p><p id="1658" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以对整个数据帧执行重采样，并使用“agg”方法为每一列传递一个聚合函数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/12aa52cca553240360a98ac7b8882794.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYg7GJ6LuDo2JPcNSX22mw.png"/></div></div></figure></div></div>    
</body>
</html>