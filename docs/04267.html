<html>
<head>
<title>Querying Shopify Data in Postgres</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Postgres中查询Shopify数据</h1>
<blockquote>原文：<a href="https://medium.com/codex/querying-shopify-data-in-postgres-c5de2cac8519?source=collection_archive---------7-----------------------#2021-11-16">https://medium.com/codex/querying-shopify-data-in-postgres-c5de2cac8519?source=collection_archive---------7-----------------------#2021-11-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f603f7e56ee29037d4749f73d99a8ed6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g8KXLPG268qwypRK.png"/></div></div></figure><h1 id="15b7" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">Shopify简介</h1><p id="c522" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Shopify是一家SaaS公司，致力于简化建立和运营在线业务的流程。使用Shopify的企业可以在Shopify中访问有关其产品、订单、客户等重要信息。在大多数情况下，企业希望提取这些数据，并将其与其他数据合并到一个中央数据库中。在本文中，我们将讨论如何将数据从Shopify迁移到Postgres。</p><h1 id="5c74" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">创建Postgres数据库</strong></h1><p id="5196" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">您需要有一个Postgres数据库，您将在其中存储您的Shopify数据。您可以直接从Postgres创建数据库，其中您将使用<code class="du km kn ko kp b">CREATE DATABASE database_name</code>命令。例如，要将数据库命名为<em class="kq"> shopify </em>，请运行以下命令:</p><pre class="kr ks kt ku fd kv kp kw kx aw ky bi"><span id="79ae" class="kz ir hi kp b fi la lb l lc ld">CREATE DATABASE shopify;</span></pre><p id="29ba" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">该命令将在几秒钟内创建数据库。</p><p id="09b2" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">您还可以使用<a class="ae lj" href="https://www.heroku.com/postgres" rel="noopener ugc nofollow" target="_blank"> Heroku的</a>数据库即服务平台来创建Postgres数据库实例。首先，创建一个Heroku帐户，你会看到“创建新应用程序”屏幕。按照屏幕上的说明创建应用程序。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="ab fe cl lk"><img src="../Images/4df5d13aa4d3df5cd8cd6fe8638ed156.png" data-original-src="https://miro.medium.com/v2/0*c_ZY019sIaKIt7v2"/></div></figure><p id="efdf" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">创建应用程序后，单击“资源”。搜索“Postgres”</p><p id="d6d4" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">使用Heroku的免费计划，您无法完全提取足够多的行，因此选择“Hobby Basic(＄9/月)”。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="ab fe cl lk"><img src="../Images/4be9b54308c74b9491cdb037172b58c8.png" data-original-src="https://miro.medium.com/v2/0*8Go8DsrVVCGM1jRV"/></div></figure><p id="b4dd" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">在你的插件列表中点击Heroku Postgres打开你的仪表板。单击“设置”选项卡，然后选择“查看凭据”。稍后会要求您提供这些凭据。</p><h2 id="c313" class="kz ir hi bd is ll lm ln iw lo lp lq ja jz lr ls je kd lt lu ji kh lv lw jm lx bi translated"><strong class="ak">将您的Shopify数据迁移到Postgres </strong></h2><p id="1376" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">我们的目标是将关于Shopify订单的数据迁移到Postgres数据库。现在我们的Postgres数据库已经准备好了，我们将使用一个<a class="ae lj" href="https://www.stitchdata.com/vs/" rel="noopener ugc nofollow" target="_blank"> ETL(提取、转换、加载)服务</a>将Shopify订单数据拉入数据库。这三个ETL函数使我们能够从一个数据库中提取数据，并将其加载到另一个数据库中。</p><p id="5c9a" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">好的一面是有很多ETL工具可以使用。例子包括Stitchdata和<a class="ae lj" href="https://fivetran.com/connectors/shopify" rel="noopener ugc nofollow" target="_blank"> Fivetran </a>。当您扩展时，后者将对您有好处，因此，我们将使用Stitchdata。</p><p id="c33f" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">注册一个Stitchdata帐户。点击顶部的“目的地”标签，选择“Postgres”。输入您的Postgres数据库的凭据。有关这部分过程的截图，请参考我们关于将<a class="ae lj" href="https://arctype.com/blog/stripe-payments-sql-postgres/" rel="noopener ugc nofollow" target="_blank"> Stripe连接到Postgres </a>的文章。</p><p id="2983" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">接下来，您应该在<a class="ae lj" href="https://www.stitchdata.com/integrations/shopify/" rel="noopener ugc nofollow" target="_blank"> Shopify和Stitchdata </a>之间创建一个集成。点击“集成”选项卡，然后选择“Shopify”。输入整合的详细信息，包括Shopify商店的URL:</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="ab fe cl lk"><img src="../Images/1603a1e5156ab3cedbb393c774646529.png" data-original-src="https://miro.medium.com/v2/0*o59TXz_V8xV5Nohe"/></div></figure><p id="5f22" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">Stitchdata将开始提取您的Shopify数据，并将其加载到Postgres中。这个过程不到一个小时。</p><h2 id="6c51" class="kz ir hi bd is ll lm ln iw lo lp lq ja jz lr ls je kd lt lu ji kh lv lw jm lx bi translated"><strong class="ak">查询您的Shopify数据</strong></h2><p id="853f" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">当Stitchdata加载数据时，您可以花时间探索它的结构。为此，您可以使用不同的SQL客户端工具，</p><p id="3d82" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">下载正确的SQL客户端工具，并将您的Heroku数据库添加到其中。然后，您可以使用SQL的“SELECT *”语句来查询在您的数据库中创建的表。例如，以下SQL查询显示了客户发出的订单:</p><pre class="kr ks kt ku fd kv kp kw kx aw ky bi"><span id="8414" class="kz ir hi kp b fi la lb l lc ld">SELECT * FROM shopify.orders;</span></pre><p id="5e64" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">该语句将返回添加到数据库<em class="kq"> shopify </em>的<em class="kq">订单</em>表中的数据。</p><h1 id="a325" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">可视化数据</strong></h1><p id="6c37" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">数据可视化有不同的解决方案。Arctype可以免费使用，并具有内置的仪表盘工具，可以快速<a class="ae lj" href="https://arctype.com/blog/sales-dashboard/" rel="noopener ugc nofollow" target="_blank">构建可视化效果</a>。</p><p id="2268" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">Arctype将要求您建立与Heroku Postgres数据库的<a class="ae lj" href="https://arctype.com/postgres/setup/heroku-postgres" rel="noopener ugc nofollow" target="_blank">连接。然后，您可以开始从表中提取数据并将其可视化。</a></p><p id="9c4e" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">例如，让我们创建一个条形图，显示不同客户订购的商品数量。</p><p id="80fd" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">首先，让我们编写一个SQL查询来获取订单名称以及每个订单对应的商品数量:</p><pre class="kr ks kt ku fd kv kp kw kx aw ky bi"><span id="a026" class="kz ir hi kp b fi la lb l lc ld">SELECT name, items FROM orders;</span></pre><p id="8f5f" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">该查询将返回一个类似如下的表:</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="ab fe cl lk"><img src="../Images/d122c25aa0fb0f5e3a55afc20fd5749d.png" data-original-src="https://miro.medium.com/v2/0*YqdMJrIjf1pAi-p-"/></div></figure><p id="370f" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">要根据这些数据生成条形图，请单击“表格”按钮旁边的“图表”按钮。接下来，单击右侧的“选择图表类型”下拉按钮，然后选择“条形图”。</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="ab fe cl lk"><img src="../Images/7afb849a9dcc97b093b406823e7470c6.png" data-original-src="https://miro.medium.com/v2/0*fd4ay78oQEwpNhNZ"/></div></figure><p id="cfc2" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">您将在Arctype屏幕的右下角看到一个写有“将列拖动到此处”的部分。</p><p id="28a2" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">将其中一列拖到x轴，将另一列拖到y轴。将生成如下所示的条形图:</p><figure class="kr ks kt ku fd ij er es paragraph-image"><div class="ab fe cl lk"><img src="../Images/95ced29534e5a563c5a8558e70f793f8.png" data-original-src="https://miro.medium.com/v2/0*0BDmMBnABgCY33G6"/></div></figure><p id="1a87" class="pw-post-body-paragraph jo jp hi jq b jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh li kj kk kl hb bi translated">要更改生成的图表类型，请单击“选择图表类型”下拉按钮，然后选择所需的图表类型。</p><h1 id="23e3" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated"><strong class="ak">结论</strong></h1><p id="b06e" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">Shopify平台让个人建立和运营在线业务变得更加容易。运营Shopify业务时，你的店铺会产生大量数据。您需要提取这些数据，并将其与其他数据合并到一个中央数据库中，以便对您的业务做出有意义的决策。您可以使用一个ETL工具(如Stitchdata)来提取您的Shopify数据，并将其加载到您选择的数据库(如Postgres)中。然后，您可以使用Arctype等工具来查询数据并根据数据创建可视化效果。</p></div></div>    
</body>
</html>