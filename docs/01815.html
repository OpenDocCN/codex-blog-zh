<html>
<head>
<title>Introduction to Consuming Web Services in Java Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java中使用Web服务的介绍第1部分</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-consuming-web-services-in-java-part-1-43b4d4e8764?source=collection_archive---------6-----------------------#2021-06-03">https://medium.com/codex/introduction-to-consuming-web-services-in-java-part-1-43b4d4e8764?source=collection_archive---------6-----------------------#2021-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f5e48b52fb887360520b4b4b6f82ed32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mtQSKqNsjX5BScQN"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">马文·迈耶在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="233d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我们谈论web服务时，通常会想到一些事情:</p><ul class=""><li id="20b2" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">API端点</li><li id="122e" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">确定谁将消费API端点</li></ul><p id="50e8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虽然这提供了后端API服务工作的一个很好的概述，但实际上还有更多。</p><p id="407b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">本文将详细介绍编写一个使用另一个端点的web服务是什么感觉。将会涉及很多内容，但我们将使用以下关键术语:</p><ul class=""><li id="7074" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">发布者(将为其他客户/消费者向用户公开API的服务)</li><li id="cc36" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">消费者(将使用向发布者用户公开的API的服务)</li></ul><p id="b0ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为设置相当复杂，所以本文将只关注设置publisher服务。</p><p id="bce9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤1:转到spring init.io并初始化一个项目。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kh"><img src="../Images/22808d78e25ed0d6000d72b9b62f28df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stEUPHgFtcJ0D7NYpSAZow.png"/></div></div></figure><p id="6823" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为项目选择“Maven项目”。另外，选择“Java”作为语言。</p><p id="1e0a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">选择2.5.0作为弹簧引导版本。对于项目元数据，可以放入com.exampleapi。我们将使用的包是一个jar，java版本应该是11。现在单击生成项目。</p><p id="89c3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">第2步:将它复制到pom.xml中。</p><p id="4382" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我们复制之前，您可能想知道pom.xml是什么。POM也称为项目对象模型文件，包含有关项目的信息，例如其java版本和项目运行所需的所有依赖项。</p><p id="b742" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在项目目录下找到pom.xml，并用以下内容替换其内容:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="ac1b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除了我们在文件顶部设置的属性之外，我们还包括项目所需的依赖项，例如Postgres(或其他数据库依赖项，取决于您使用的数据库)和spring boot starter web。</p><p id="a54b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤3:修改application.properties文件。</p><p id="4a5c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在项目目录下找到src/main/resources/application . properties，并用以下内容替换它们:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="e882" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们有一个spring.datasource.url。当你把Postgres安装到你的机器上时，它会自动托管在端口5432上。你可以阅读更多关于<a class="ae iu" href="https://blog.devgenius.io/how-to-get-a-spring-boot-server-running-via-jdbc-part-1-659d33a5e373" rel="noopener ugc nofollow" target="_blank">通过JDBC设置你自己的spring boot服务器第1部分|作者Michael Tong | Dev Genius </a>如何为数据库设置你的用户名和密码。</p><p id="ae67" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意我们也设置了弹簧。JPA . hibernate . DDL-自动更新。在我们问这个更新的值意味着什么之前，我们先来看看spring.jpa.hibernate.ddl-auto是什么。</p><p id="91ae" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">ddl-auto是一个特定于jpa的属性，hibernates使用它进行模式工具管理，以决定在启动应用程序时对数据库模式采取什么操作。这可能涉及自动创建表，当spring boot应用程序中的实体发生变化时自动更新表模式。阅读“4。使用Hibernate控制数据库创建”,了解更多信息，请访问<a class="ae iu" href="https://www.baeldung.com/spring-boot-data-sql-and-schema-sql" rel="noopener ugc nofollow" target="_blank">关于使用Spring Boot加载初始数据的指南| Baeldung </a>。</p><p id="ff76" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后需要知道的是server.port。默认情况下，它是8080。因为我们正在设置两个应用程序(发布者和消费者应用程序)，所以让我们将这个应用程序设置为4040。</p><p id="98fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤4:设置控制器、服务、模型和存储库包。</p><p id="9433" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在src/main/Java/com . example API . demo application下，分别创建四个包:</p><ul class=""><li id="4396" class="jt ju hi ix b iy iz jc jd jg jv jk jw jo jx js jy jz ka kb bi translated">控制器</li><li id="8ed0" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">服务</li><li id="90aa" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">模型</li><li id="4d96" class="jt ju hi ix b iy kc jc kd jg ke jk kf jo kg js jy jz ka kb bi translated">仓库</li></ul><p id="d221" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤5:在控制器包下，创建一个ToDoItemController，内容如下:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="bef6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我在这里不会说得太详细，但是这些端点为todo item实体提供了CRUD(创建、更新、删除和修改)操作，我稍后将对此进行讨论。</p><p id="0ab1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤6:在模型包下，创建一个ToDoItem.java，内容如下:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="7c69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这里，我们得到了一个实体，它表示当我们让消费者消费发布者的API服务时，我们将与之交互的数据结构。</p><p id="c9cb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤7:在存储库包下，创建一个包含以下内容的ToDoItemRepository.java:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="b8f1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看起来没有太多代码，但是这个存储库类将由我们的服务类自动连接。我们不需要深入细节，但是通过扩展JpaRepository，这个类可以访问JPA功能来执行CRUD(创建、更新、修改、删除数据库中的条目)操作。</p><p id="de69" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤8:在服务包下，创建一个ToDoItemService.java:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="4bb6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在在同一个包中添加一个ToDoItemServiceImpl.java:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="53f1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">对于服务类，我们利用JPA和hibernate执行的功能与数据库中的数据进行交互。</p><p id="4eb5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">步骤9:找到src/main/Java/com . example API . demo application/application并运行应用程序。该文件应该位于resources文件夹的正上方。打开此应用程序java文件，并用以下内容替换它:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="km kn l"/></div></figure><p id="32e1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">粘贴内容后，应该会有一个播放图标。单击该按钮运行应用程序。</p><p id="fb94" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你有它！这只是关于通过JPA设置该项目的发布者部分。你也可以遵循<a class="ae iu" href="https://blog.devgenius.io/how-to-get-a-spring-boot-server-running-via-jdbc-part-1-659d33a5e373?source=your_stories_page-------------------------------------" rel="noopener ugc nofollow" target="_blank">通过JDBC第1部分| Michael Tong | Dev Genius</a>设置你自己的spring boot服务器和<a class="ae iu" href="https://blog.devgenius.io/setting-your-own-spring-boot-server-via-jdbc-part-2-96763d67a310" rel="noopener ugc nofollow" target="_blank">通过JDBC第2部分| Michael Tong | Dev Genius</a>设置你自己的spring boot服务器以及设置你的publisher应用程序。</p><p id="90fd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">编码快乐！请参见本安装的第2部分！</p></div></div>    
</body>
</html>