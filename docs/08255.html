<html>
<head>
<title>Managing Images Programmatically with Cloudinary — iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cloudinary以编程方式管理映像— iOS</h1>
<blockquote>原文：<a href="https://medium.com/codex/ios-handling-images-3cf31fb1caf0?source=collection_archive---------6-----------------------#2022-07-27">https://medium.com/codex/ios-handling-images-3cf31fb1caf0?source=collection_archive---------6-----------------------#2022-07-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b0c896914b02ece1d469f000d02335bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-AvwUhsHEo4ufZ-GF5EIw.jpeg"/></div></div></figure><p id="fde7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗨！我是阿迪。我已经很久没写信了。几个月前换了工作，这占用了我大部分的能力，所以我无法写作。我加入了一家名为Cloudinary的大公司，这也是我写这篇博客的部分原因。所以让我们开始吧。</p><h1 id="3974" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">问题！</strong></h1><p id="2c73" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在我以前的一份工作中，我负责一个应用程序，允许你作为用户将图像下载到他们的手机中，并将它们设置为主屏幕、锁屏或两者的背景。<br/>这个应用程序需要拉所有图像信息的大JSON文件，每个图像有多个字段，如标题，网址，创建日期等…</p><p id="08c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在主屏幕上，我必须显示每个图像的缩略图(缩略图是大图像的小图像表示)。<br/>点击缩略图会将用户引导至全屏显示图像的屏幕。</p><p id="edbb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这两个屏幕已经需要同一图像的多个版本。因为你不能用缩略图呈现全屏图像，因为你会得到一个像素化的结果，产生一个糟糕的用户体验。另一方面，我们不希望在主屏幕上呈现全屏图像(我们在一个屏幕上显示许多图像)，因为这会导致屏幕的长时间加载。这又是一个糟糕的用户体验。</p><p id="84df" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除此之外，每个图像都有我们需要呈现的各种尺寸，我们不要忘记应用程序支持不同屏幕尺寸的多种设备，iPhones、iPads和iPods都需要不同尺寸的图像。</p><p id="7784" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">那么我们该如何处理呢？我们有一个图像，但我们需要它在许多不同的大小。我们可以在客户端使用它，并在设备上处理图像，但这样效率不高。</p><p id="78c5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以要求服务器端(如果有的话)为每张图片提供多个URL，但这会使JSON响应变得巨大而难以处理。</p><p id="a8cc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是Cloudinary的用武之地。</p><h1 id="a671" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">该解决了！</strong></h1><p id="fa71" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">正如你可能已经猜到的那样，这个解决方案将是模糊的</p><h1 id="2c83" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">什么是Cloudinary？</strong></h1><p id="7ccd" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Cloudinary是一个平台，允许您快速轻松地创建、管理和交付跨任何浏览器、设备和带宽的数字体验。</p><h1 id="3e3a" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">如何使用Cloudinary？</strong></h1><h2 id="3ae9" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">设置</strong></h2><p id="d927" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">你需要做的第一件事是去Cloudinary <a class="ae lf" href="http://www.cloudinary.com" rel="noopener ugc nofollow" target="_blank">网站</a>注册一个免费账户。你可以在这里找到iOS SDK的git库。要将Cloudinary集成到您的应用中，您可以使用:</p><p id="f9d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">椰子:</em></p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="3c2e" class="kr jp hi lm b fi lq lr l ls lt">pod 'Cloudinary', '~&gt; 3.0'</span></pre><p id="7f8f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">迦太基:</em></p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="8195" class="kr jp hi lm b fi lq lr l ls lt">github "cloudinary/cloudinary_ios" ~&gt; 3.0</span></pre><p id="e75f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg"> Swift包经理:</em></p><pre class="lh li lj lk fd ll lm ln lo aw lp bi"><span id="dc83" class="kr jp hi lm b fi lq lr l ls lt"><a class="ae lf" href="https://github.com/cloudinary/cloudinary_ios.git" rel="noopener ugc nofollow" target="_blank">https://github.com/cloudinary/cloudinary_ios.git</a></span></pre><h2 id="f0ef" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">配置</strong></h2><p id="4dc3" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">一旦包被集成，我们将需要设置我们的Cloudinary对象。<br/>您的API密钥和云名称将出现在您创建帐户的仪表盘中。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/251370f837025007a38977a0b04a3f49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-QjSexZhwANrrqi6qSoosQ.png"/></div></div></figure><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="889d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦我们设置好Cloudinary对象并准备好使用，这就是<strong class="is hj">魔法</strong>开始的地方。</p><h2 id="1618" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">上传您的资产</strong></h2><p id="c5f5" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">有多种方式将资产上传到您的云中，通过API或UI<br/>UI——就像拖放到您的云中一样简单。<br/> API —您可以通过代码上传:</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="a1e0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里我们唯一缺少的是<em class="lg">上传预置。</em>上传预置是我们需要通过UI设置的字段。您可以通过访问Cloudinary <a class="ae lf" href="http://www.cloudinary.com" rel="noopener ugc nofollow" target="_blank">网站</a>，登录并点击右上角的设置图标来完成此操作。点击上传选项，向下滚动并添加一个新的上传预设，有许多选项可以定制一个上传预设，但我不打算在这篇博客中深入探讨。查看<a class="ae lf" href="http://training.cloudinary.com" rel="noopener ugc nofollow" target="_blank"> Cloudinary Academy </a>以了解更多关于cloud inary API的可能性。</p><p id="724d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦<em class="lg">上传预置</em>被创建，确保将其名称输入到<code class="du lx ly lz lm b">upload</code>功能的上传预置字段中。是的，将资产上传到您的云中就这么简单，一旦映像存在，我们就可以开始使用转换了！<br/>转换是我们可以在资产(图像、视频等)上执行的操作。有许多转换，如果你想了解比我在这里展示的例子更多的内容，我建议你访问Cloudinary的<a class="ae lf" href="https://cloudinary.com/documentation/image_transformations" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="2ea4" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">转换</strong></h2><p id="3b69" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在本文的开始，我提出了一个问题，我们有一个资产，但是我们需要它有许多不同的大小和纵横比。让我们看看如何使用Cloudinary的转换轻松实现这一点:(我将使用一个名为sample的资产)</p><p id="f99a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">原始图像:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/b310b56fdc9e17edfd034bf4cb35e6ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iWMN4_20L1cEhSJP"/></div></div></figure><h2 id="3e1c" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">作物</strong></h2><p id="7c74" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们想为我们的主屏幕创建一个缩略图(250x250 ):</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="1636" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我来解释一下上面的代码行。我们正在使用之前创建的<code class="du lx ly lz lm b">cloudinary</code>对象，我们调用<code class="du lx ly lz lm b">createUrl()</code>函数并设置一个新的转换，在这里我们给出所有我们想要在图像中修改的参数。最后，我们用资产名称(示例)调用<code class="du lx ly lz lm b">generate</code>。<br/>这一行代码将产生下面的<a class="ae lf" href="https://res.cloudinary.com/test123/image/upload/c_crop,h_250,w_250/sample" rel="noopener ugc nofollow" target="_blank"> URL </a>:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/874e426957a0733d4a6a7aaec8b6272c.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/0*-SYnRiqtH-xDW6Sg"/></div></figure><p id="32db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所见，我们得到了我们想要的250x250的缩略图，但结果还可以改进。图像中最有趣的物体“蜜蜂”被切掉了。我们能做什么？哦！Cloudinary还有更多锦囊妙计！我们可以使用“重力”的另一个很酷的功能，我们可以要求Cloudinary专注于图像中最有趣的对象。</p><h2 id="3076" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">重力</strong></h2><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="6e89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">输出<a class="ae lf" href="https://res.cloudinary.com/test123/image/upload/c_crop,h_250,w_250,g_auto/sample" rel="noopener ugc nofollow" target="_blank">网址</a>:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/4fce4a4f14488ce1f45a312efb85682f.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/0*w5Wj8PZq8EiarvOM"/></div></figure><p id="cd20" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们所见，结果要好得多。重点是蜜蜂。</p><h2 id="6675" class="kr jp hi bd jq ks kt ku ju kv kw kx jy jb ky kz kc jf la lb kg jj lc ld kk le bi translated"><strong class="ak">品质</strong></h2><p id="44e3" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">让我们试试另一个场景。我们有一个2k的图像，这是一个相当大的文件，当我们在设备上呈现它时，我们不需要它的最佳形式。漫游不能总是处理大带宽。为了使图像更亮，我们可以使用Cloudinary“质量”功能。</p><p id="bdf7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是原始图像(它重5MB，这是一个相当大的文件)</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/da5c2e25c54b7b8142051e02093a6098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpUTrbn68UtT4QEEzwmcqQ.jpeg"/></div></div></figure><p id="aecb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">借助Cloudinary，我们可以做到以下几点:</p><figure class="lh li lj lk fd ij"><div class="bz dy l di"><div class="lv lw l"/></div></figure><p id="3b6c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这段代码将产生下面的<a class="ae lf" href="https://res.cloudinary.com/db0edm7to/image/upload/q_auto/big_image_sample" rel="noopener ugc nofollow" target="_blank"> URL </a>:</p><figure class="lh li lj lk fd ij er es paragraph-image"><div class="ab fe cl md"><img src="../Images/c55ce5533d9e12768155d9b029a9a839.png" data-original-src="https://miro.medium.com/v2/0*ey37aD3G8FKeWD1X"/></div></figure><p id="bab4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它的大小为626.56 KB。我们把尺寸缩小了很多，在移动设备上获取这张图片会更容易。</p><h1 id="5871" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">总结一下！</h1><p id="0a58" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">正如我们在博客中看到的，Cloudinary可以满足以多种大小和质量处理相同资产的需求。不仅如此，它还有许多其他功能！我鼓励您访问<a class="ae lf" href="https://cloudinary.com/documentation/" rel="noopener ugc nofollow" target="_blank">文档</a>网站，充分利用该平台。</p><p id="df07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Cloudinary SDK也可以在Android上找到，另外还有14种语言可以在Cloudinary的git上找到。</p></div></div>    
</body>
</html>