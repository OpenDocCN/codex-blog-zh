<html>
<head>
<title>Python: Version Management with Pyenv and Pyenv-Virtualenv (Linux)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python:使用Pyenv和Pyenv-Virtualenv进行版本管理(Linux)</h1>
<blockquote>原文：<a href="https://medium.com/codex/python-version-management-with-pyenv-and-pyenv-virtualenv-linux-ecd6578b7bbf?source=collection_archive---------1-----------------------#2022-01-06">https://medium.com/codex/python-version-management-with-pyenv-and-pyenv-virtualenv-linux-ecd6578b7bbf?source=collection_archive---------1-----------------------#2022-01-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/70cfe600dfc3d5e8d856f21b6497da65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GSwvJ6JJ36wTlWfD"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://unsplash.com/@fidpad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Fidias Cervantes </a>在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="798e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Pyenv是在您的开发环境中管理多个Python版本的最酷的工具之一。无论是新的机器学习项目还是成熟的产品开发项目，你都会发现<code class="du jt ju jv jw b">pyenv</code>非常方便快捷地设置你的Python环境。所以让我们直接开始吧。</p></div><div class="ab cl jx jy gp jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hb hc hd he hf"><h2 id="df21" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">设置Pyenv和安装Python</h2><p id="89cf" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">在这里，我将在运行Ubuntu 18.04的windows Linux子系统上设置<code class="du jt ju jv jw b">pyenv</code>，并安装最新版本的python，即<code class="du jt ju jv jw b">3.10.1</code>(截至创作日期的版本)。</p><ol class=""><li id="5706" class="le lf hi ix b iy iz jc jd jg lg jk lh jo li js lj lk ll lm bi translated"><strong class="ix hj">更新系统</strong></li></ol><p id="a3bc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你使用Ubuntu，这是你在安装任何新东西之前需要采取的第一个自然步骤。在您的shell中复制以下命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="d96e" class="ke kf hi jw b fi lv lw l lx ly">sudo apt update -y</span></pre><p id="640d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du jt ju jv jw b">sudo</code>是可选的，取决于帐户和系统对管理员访问的要求。</p><p id="c9ba" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">安装依赖关系</strong></p><p id="c26f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Pyenv需要以下依赖项，因此通过在shell中复制以下命令来安装它们。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="ba0f" class="ke kf hi jw b fi lv lw l lx ly">apt install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev python-openssl git</span></pre><p id="9285" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.<strong class="ix hj">获得Git回购</strong></p><p id="d623" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">克隆以下回购。这将让你从Github获得最新的<code class="du jt ju jv jw b">pyenv</code>版本。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="5f50" class="ke kf hi jw b fi lv lw l lx ly">git clone https://github.com/pyenv/pyenv.git ~/.pyenv</span></pre><p id="48a8" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">配置环境变量和环境</strong></p><p id="46ad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用以下命令设置Ubuntu的<code class="du jt ju jv jw b">.bashrc</code>文件中的<code class="du jt ju jv jw b">PYENV_ROOT</code>和<code class="du jt ju jv jw b">PATH</code>变量。其次设置<code class="du jt ju jv jw b">pyenv init</code>进行初始化。在您的shell中运行这三个命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="6c52" class="ke kf hi jw b fi lv lw l lx ly">echo 'export PYENV_ROOT="$HOME/.pyenv"' &gt;&gt; ~/.bashrc <br/>echo 'export PATH="$PYENV_ROOT/bin:$PATH"' &gt;&gt; ~/.bashrc <br/>echo -e 'if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\n eval "$(pyenv init -)"\nfi' &gt;&gt; ~/.bashrc</span></pre><p id="9aed" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.<strong class="ix hj">重启外壳</strong></p><p id="ed20" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您需要使用以下命令重启您的shell。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="0673" class="ke kf hi jw b fi lv lw l lx ly">exec bash</span></pre><p id="21b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="3d4b" class="ke kf hi jw b fi lv lw l lx ly">exec "$SHELL"</span></pre><p id="1c04" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你正在使用<code class="du jt ju jv jw b">zsh</code>，那么使用下面的命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="21aa" class="ke kf hi jw b fi lv lw l lx ly">exec zsh</span></pre><p id="bd0d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.<strong class="ix hj">确认Pyenv已安装</strong></p><p id="1d6d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用下面的命令<code class="du jt ju jv jw b">pyenv versions</code>检查您的<code class="du jt ju jv jw b">pyenv</code>是否安装正确，相应的输出如下所示。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="d754" class="ke kf hi jw b fi lv lw l lx ly">user@ubuntu:/mnt/c/Users/user$ pyenv versions<br/>* system</span></pre><p id="4d2f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它显示python的当前版本被选为默认版本。</p><p id="db35" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">7.<strong class="ix hj">安装Python </strong></p><p id="57d0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要列出要安装的python的所有可用版本，请使用以下命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="547b" class="ke kf hi jw b fi lv lw l lx ly">pyenv install --list</span></pre><p id="2e1c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在选择你想要的版本并安装。在这里，我正在安装可用的最新版本。该命令通常需要很长时间来运行，因为所选版本的python是从源代码构建的。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="5732" class="ke kf hi jw b fi lv lw l lx ly">pyenv install 3.10.1</span></pre><p id="01be" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">安装完成后，运行以下代码进行检查。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="a811" class="ke kf hi jw b fi lv lw l lx ly">user@ubuntu:/mnt/c/Users/user$ pyenv versions<br/>* system (set by /mnt/c/Users/user/.python-version)<br/>  3.10.1</span></pre><p id="0e85" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在你的<code class="du jt ju jv jw b">python 3.10.1</code>已经准备好了。现在让我们设置<code class="du jt ju jv jw b">pyenv-virtualenv</code>。</p><p id="2ce3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">安装Pyenv-virtualenv </strong></p><p id="2505" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们将安装<code class="du jt ju jv jw b">pyenv-virtualenv</code>,它帮助我们设置本地开发环境，而不会使python的全局安装变得肮脏。</p><ol class=""><li id="689a" class="le lf hi ix b iy iz jc jd jg lg jk lh jo li js lj lk ll lm bi translated"><strong class="ix hj">克隆Git回购</strong></li></ol><p id="85f5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们先克隆一下Github的<code class="du jt ju jv jw b">virtualenv</code> repo。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="c3d0" class="ke kf hi jw b fi lv lw l lx ly">git clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenv</span></pre><p id="7033" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">环境配置</strong></p><p id="ab49" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行以下命令，以便在shell运行时自动启用环境。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="8bc3" class="ke kf hi jw b fi lv lw l lx ly">echo 'eval "$(pyenv virtualenv-init -)"' &gt;&gt; ~/.bashrc</span></pre><p id="2a3b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.<strong class="ix hj">重启外壳</strong></p><p id="58a6" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，您需要使用以下命令重启您的shell。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="eb8f" class="ke kf hi jw b fi lv lw l lx ly">exec bash</span></pre><p id="3108" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="9c1f" class="ke kf hi jw b fi lv lw l lx ly">exec "$SHELL"</span></pre><p id="ee1c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你正在使用<code class="du jt ju jv jw b">zsh</code>，那么使用下面的命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="99fa" class="ke kf hi jw b fi lv lw l lx ly">exec zsh</span></pre><p id="db3e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.<strong class="ix hj">验证安装</strong></p><p id="677f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要验证<code class="du jt ju jv jw b">virtualenv</code>是否正确安装，运行以下命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="abbf" class="ke kf hi jw b fi lv lw l lx ly">user@ubuntu:/mnt/c/Users/user$ pyenv virtualenv --version<br/>pyenv-virtualenv 1.1.5 (python3.10 -m venv)</span></pre><p id="f636" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在您已经成功安装了<code class="du jt ju jv jw b">pyenv-virualenv</code>。</p><h2 id="600c" class="ke kf hi bd kg kh ki kj kk kl km kn ko jg kp kq kr jk ks kt ku jo kv kw kx ky bi translated">创建和使用Pyenv-Virtualenv</h2><p id="b2c5" class="pw-post-body-paragraph iv iw hi ix b iy kz ja jb jc la je jf jg lb ji jj jk lc jm jn jo ld jq jr js hb bi translated">现在让我们看看如何创建和使用<code class="du jt ju jv jw b">pyenv-virtualenv</code>。</p><ol class=""><li id="617a" class="le lf hi ix b iy iz jc jd jg lg jk lh jo li js lj lk ll lm bi translated"><strong class="ix hj">创建虚拟人</strong></li></ol><p id="2c16" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行以下命令创建一个新的<code class="du jt ju jv jw b">virtualenv</code>。为了创建环境，我们需要从系统中安装的python列表中提供python版本。已安装pythons的列表可以通过<code class="du jt ju jv jw b">pyenv versions</code>访问。第二个参数是虚拟环境的名称。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="831f" class="ke kf hi jw b fi lv lw l lx ly">pyenv virtualenv 3.10.1 venv-name-3.10.1</span></pre><p id="882e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在已经创建了<code class="du jt ju jv jw b">virtualenv</code>,通过运行以下命令检查它是否被正确创建。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="ae7e" class="ke kf hi jw b fi lv lw l lx ly">user@ubuntu:/mnt/c/Users/user$ pyenv versions<br/>* system (set by /mnt/c/Users/user/.python-version)<br/>  3.10.1<br/>  3.10.1/envs/venv-name  <br/>  venv-name</span></pre><p id="ae5f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.<strong class="ix hj">激活&amp;停用虚拟</strong></p><p id="11c0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">运行以下命令激活<code class="du jt ju jv jw b">virtualenv</code>。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="833d" class="ke kf hi jw b fi lv lw l lx ly">pyenv activate venv-name</span></pre><p id="00fe" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">若要停用，请运行以下命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="273a" class="ke kf hi jw b fi lv lw l lx ly">pyenv deactivate</span></pre><p id="b6ec" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要在进入项目的本地开发文件夹时自动激活本地env，请在文件夹中运行以下命令。</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="255c" class="ke kf hi jw b fi lv lw l lx ly">pyenv local venv-name</span></pre><p id="4b4d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，这应该会导致以下结果，</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="0ba8" class="ke kf hi jw b fi lv lw l lx ly">(venv-name) user@ubuntu:/mnt/c/Users/user/project-folder$</span></pre><p id="1e88" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，如果你离开当前文件夹，你会看到下面的内容</p><pre class="ln lo lp lq fd lr jw ls lt aw lu bi"><span id="6935" class="ke kf hi jw b fi lv lw l lx ly">(venv-name) user@ubuntu:/mnt/c/Users/user/project-folder$ cd..<br/>user@ubuntu:/mnt/c/Users/user$</span></pre></div><div class="ab cl jx jy gp jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="hb hc hd he hf"><p id="44e4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本教程中，你学习了如何安装<code class="du jt ju jv jw b">pyenv</code>，不同版本的python和<code class="du jt ju jv jw b">pyenv-virtualevn</code>。毫无争议地享受您的下一个python项目。</p><p id="0fbf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lz">我是一名在GCP、SQL和Python堆栈方面经验丰富的数据工程师，如果您需要帮助来为您的初创公司或下一个商业项目建立数据基础设施，请随时通过我的</em> <a class="ae iu" href="https://www.linkedin.com/in/yuvrender-gill/" rel="noopener ugc nofollow" target="_blank"> <em class="lz"> Linkedin </em> </a> <em class="lz">联系我。</em></p></div></div>    
</body>
</html>