<html>
<head>
<title>5 Ways To Share Data Between Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应用程序间共享数据的5种方式</h1>
<blockquote>原文：<a href="https://medium.com/codex/sending-data-between-applications-e08fb0028a71?source=collection_archive---------2-----------------------#2021-03-25">https://medium.com/codex/sending-data-between-applications-e08fb0028a71?source=collection_archive---------2-----------------------#2021-03-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="ccde" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><figure class="ev ex ip iq ir is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/53358696588ed9b3fec9ed6184ed8773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*igwM3QDjAxivM45b"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">由<a class="ae jd" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4cf8" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">定期在两个应用程序之间传输数据是一种常见的情况，例如，将采购订单数据从一个web应用程序发送到另一个web应用程序。本文介绍了两个web应用程序之间数据传输的几种常见方式。</p><h2 id="864f" class="kc kd hi bd ke kf kg kh ki kj kk kl km jp kn ko kp jt kq kr ks jx kt ku kv ho bi translated">API有效负载</h2><p id="361c" class="pw-post-body-paragraph je jf hi jg b jh kw jj jk jl kx jn jo jp ky jr js jt kz jv jw jx la jz ka kb hb bi translated">如果数据很小并且需要立即响应，最简单的方法是使用API。</p><p id="263f" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">例如，将采购订单数据从web应用程序发送到会计应用程序。会计应用程序公开一个REST API来接受采购订单。购买订单数据可以是base64编码的(安全地包含在有效负载中)，并与其他信息一起添加到POST有效负载中，然后发布到REST API。REST API将用一个200状态代码来响应，表示它已经接受了购买订单数据。</p><p id="dd34" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">这是一种流行而简单的方法。应用程序可以控制数据传输的全部流程:发送、接收、错误处理、重试等。</p><p id="2c5e" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">然而，REST API有效负载有一个大小限制，即128MB(实际上，无论如何您都不会想要发布接近这个大小的内容)。发布过程必须等待此API调用的响应，这可能会影响用户体验web应用程序的性能。这种方法并不是发送大量数据或突发数据的好选择。</p><h2 id="3355" class="kc kd hi bd ke kf kg kh ki kj kk kl km jp kn ko kp jt kq kr ks jx kt ku kv ho bi translated">信息排队</h2><p id="6f43" class="pw-post-body-paragraph je jf hi jg b jh kw jj jk jl kx jn jo jp ky jr js jt kz jv jw jx la jz ka kb hb bi translated">使用Rabbit MQ之类的消息队列服务是异步发送数据的一种优雅方式。</p><p id="41b3" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如果你想在<a class="ae jd" href="https://python.plainenglish.io/celery-task-queue-with-aws-sqs-dd51f350ae50" rel="noopener ugc nofollow" target="_blank">这里</a>用Python实现MQ，请看我的另一篇文章。</p><p id="9ac8" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">大小限制相当大(理论上是几GB，但实际上MQ中更倾向于较小的数据)。发送方不必等待响应(异步)，它只需在队列中注册消息。当队列空闲时，接收者从队列中获取消息。</p><p id="ad21" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">这适用于处理突发数据，或者当接收方需要一点时间来处理消息时。</p><p id="9680" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">例如，如果您的网站在短时间内收到大量采购订单，并且需要一些额外的处理，如生成收据PDF，您可以考虑使用MQ将这些订单数据卸载到另一个应用程序进行PDF处理。用户在下订单时不必等待整个过程结束。</p><p id="9f1d" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">但是请记住，MQ不为任务处理提供响应。要么忘记获得响应，要么您将不得不在您的应用程序中轮询响应/状态。您还需要小心队列中的阻塞任务，因为这将阻塞整个队列。</p><h2 id="0bc0" class="kc kd hi bd ke kf kg kh ki kj kk kl km jp kn ko kp jt kq kr ks jx kt ku kv ho bi translated">消息流</h2><p id="ee24" class="pw-post-body-paragraph je jf hi jg b jh kw jj jk jl kx jn jo jp ky jr js jt kz jv jw jx la jz ka kb hb bi translated">类似于MQ，但是为了处理更大数量的数据传输(更高的流量)并批量处理它们(而不是每个事件一条消息)，像AWS Kinesis、Apache Kafka这样的消息流服务可能更合适。</p><p id="92b0" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">它们通常用于实时数据分析和机器学习应用程序，例如Twitter tweets、用户评论等实时数据可以快速成批传输到应用程序进行分析。</p><h2 id="88b1" class="kc kd hi bd ke kf kg kh ki kj kk kl km jp kn ko kp jt kq kr ks jx kt ku kv ho bi translated"><strong class="ak"> S3桶(云存储)</strong></h2><p id="1703" class="pw-post-body-paragraph je jf hi jg b jh kw jj jk jl kx jn jo jp ky jr js jt kz jv jw jx la jz ka kb hb bi translated">大尺寸的数据最好存储在文件中(如果它是作为文件生成的，最好保持为文件)。</p><p id="8e56" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">例如，如果您的web应用程序生成一个PDF并需要将其发送到另一个应用程序进行处理。在这种情况下，web应用程序可以将它上传到AWS S3 bucket并存储在那里。另一个应用程序可以从S3桶中取出文件并处理它。</p><p id="0479" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">然而，S3桶本身并没有提供一个到达通知系统，也没有提供一种将文件作为队列来管理的方法。您的应用程序负责管理那里的文件，例如找出要处理的文件，完成后将其移动到已处理的文件夹等。</p><p id="0819" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">有了AWS，你可以用S3桶设置Kinesis流作为文件事件系统。当一个新文件上传到那里时，它将触发流中的一个事件，并启动一个AWS Lambda函数，因此该函数可以处理上传的文件。</p><h2 id="be25" class="kc kd hi bd ke kf kg kh ki kj kk kl km jp kn ko kp jt kq kr ks jx kt ku kv ho bi translated">共享数据库</h2><p id="512b" class="pw-post-body-paragraph je jf hi jg b jh kw jj jk jl kx jn jo jp ky jr js jt kz jv jw jx la jz ka kb hb bi translated">又名。又脏又快。在web应用程序和Lambda函数之间共享数据可能非常简单，只需让它们共享同一个数据库并从同一个数据表中读取数据。</p><p id="f6d2" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">但是要小心这里的含义，尤其是它们都在写入同一个数据库。当在一个应用程序上工作的开发人员不知道来自另一个应用程序的写操作时，这可能会导致混乱和问题。</p><p id="ac17" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">这也意味着应用程序代码很难处理/挂钩到消息接收过程。</p><h2 id="11dc" class="kc kd hi bd ke kf kg kh ki kj kk kl km jp kn ko kp jt kq kr ks jx kt ku kv ho bi translated">摘要</h2><p id="130a" class="pw-post-body-paragraph je jf hi jg b jh kw jj jk jl kx jn jo jp ky jr js jt kz jv jw jx la jz ka kb hb bi translated">本文介绍了在web应用程序中共享数据的几种常见方式。还有一些不太常见的方式我不会在这里介绍，比如RPC、RSS提要等等。</p><p id="0ea0" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">运动部件越少，东西就越不容易坏。使用适合你需要的策略。如果有任何问题，请告诉我。</p></div></div>    
</body>
</html>