<html>
<head>
<title>Free Hosting For .NET 6 Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">免费托管。净6个项目</h1>
<blockquote>原文：<a href="https://medium.com/codex/free-hosting-for-net-6-projects-f65f76f2b973?source=collection_archive---------6-----------------------#2022-06-18">https://medium.com/codex/free-hosting-for-net-6-projects-f65f76f2b973?source=collection_archive---------6-----------------------#2022-06-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="325c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">让项目走向世界的快速、简单和免费的方法</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d0075f17b82f9083fcd3c0d2bb60bcb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Deqsyn2ODqpPallJRKUkvw.png"/></div></div></figure></div><div class="ab cl jj jk gp jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="hb hc hd he hf"><h1 id="37b8" class="jq jr hi bd js jt ju jv jw jx jy jz ka io kb ip kc ir kd is ke iu kf iv kg kh bi translated">更新【2022年11月:</h1><blockquote class="ki kj kk"><p id="3722" class="kl km kn ko b kp kq ij kr ks kt im ku kv kw kx ky kz la lb lc ld le lf lg lh hb bi translated">从<strong class="ko hj">2022年11月28日</strong>，<strong class="ko hj">免费Heroku Dynos </strong>，<strong class="ko hj">免费Heroku Postgres </strong>，Redis免费Heroku数据<strong class="ko hj">将不再可用</strong>。</p></blockquote><p id="6008" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi">😢</p></div><div class="ab cl jj jk gp jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="hb hc hd he hf"><p id="748b" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">俗话说，“天下没有免费的午餐”。然而，看起来，可能只是有一种免费的小吃，这正是Heroku的免费等级，如果它是一顿饭的话。由于完全免费且非常容易安装，它是向全世界展示您的小爱好项目或快速制作概念证明的完美选择。</p><h2 id="af9a" class="ll jr hi bd js lm ln lo jw lp lq lr ka li ls lt kc lj lu lv ke lk lw lx kg ly bi translated">先决条件</h2><p id="a3f7" class="pw-post-body-paragraph kl km hi ko b kp lz ij kr ks ma im ku li mb kx ky lj mc lb lc lk md lf lg lh hb bi translated">在我们开始之前，您应该有以下内容:</p><ul class=""><li id="c779" class="me mf hi ko b kp kq ks kt li mg lj mh lk mi lh mj mk ml mm bi translated"><a class="ae mn" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> <strong class="ko hj"> Docker </strong> </a></li><li id="4311" class="me mf hi ko b kp mo ks mp li mq lj mr lk ms lh mj mk ml mm bi translated"><a class="ae mn" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ko hj">一个英雄帐</strong> </a></li><li id="2317" class="me mf hi ko b kp mo ks mp li mq lj mr lk ms lh mj mk ml mm bi translated"><a class="ae mn" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"><strong class="ko hj">Heroku CLI</strong>T23】</a></li></ul><p id="c3f5" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">所有这些设置都不应该超过5-10分钟。下载并安装了Docker和Heroku CLI并创建了一个Heroku帐户后，您就差不多准备好了。我想你已经有工作了。NET 6应用程序，但如果你没有，这里有一个来自微软的5分钟Hello World教程。</p><h2 id="299f" class="ll jr hi bd js lm ln lo jw lp lq lr ka li ls lt kc lj lu lv ke lk lw lx kg ly bi translated">创建Dockerfile文件</h2><p id="bbdc" class="pw-post-body-paragraph kl km hi ko b kp lz ij kr ks ma im ku li mb kx ky lj mc lb lc lk md lf lg lh hb bi translated">你可能已经猜到了，我们将使用<strong class="ko hj"> Docker </strong>将我们的应用程序部署到Heroku。如果你不熟悉Docker，简而言之，它是一个<strong class="ko hj">容器工具</strong>，使部署变得更加容易。它被广泛使用并且非常有用。如果你想知道更多，你可以在这里阅读<a class="ae mn" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="f821" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">导航到项目的根目录，创建一个名为“Dockerfile”的文件。它应该是这样的:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mt mu l"/></div><figcaption class="mv mw et er es mx my bd b be z dx translated">。用于部署到Heroku的. NET 6.0 Dockerfile文件</figcaption></figure><p id="b268" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">Dockerfile的第一步(构建)使用官方的<strong class="ko hj">。net 6.0 sdk </strong>镜像为基础构建app并保存在“out”文件夹中。</p><p id="34ac" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">第二步(运行)使用官方<strong class="ko hj">。net 6.0运行时</strong>镜像为基础，复制以前构建的文件并运行编译后的。net 6.0 dll。很明显，你应该用你的项目的名字替换“App”。</p><p id="1da5" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">注意最后一行。在运行应用程序之前，我们将<strong class="ko hj"> ASPNETCORE_URLS </strong> env变量设置为<a class="ae mn" href="http://*:$PORT" rel="noopener ugc nofollow" target="_blank">http://*:<strong class="ko hj">$ PORT</strong>T5】。这使得框架绑定到提供的url。</a></p><p id="4fbb" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">Heroku设置了<strong class="ko hj"> $PORT </strong> env变量，并为我们提供了托管应用程序的实例的公开端口。</p><h2 id="6ad9" class="ll jr hi bd js lm ln lo jw lp lq lr ka li ls lt kc lj lu lv ke lk lw lx kg ly bi translated">部署到Heroku</h2><p id="64fe" class="pw-post-body-paragraph kl km hi ko b kp lz ij kr ks ma im ku li mb kx ky lj mc lb lc lk md lf lg lh hb bi translated">现在我们已经准备好了Docker文件，您可以在项目的根目录(Docker文件所在的位置)打开一个shell。</p><p id="ac8a" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">首先，你需要登录Heroku。为此，执行以下命令，这将打开浏览器并允许您登录。</p><pre class="iy iz ja jb fd mz na nb nc aw nd bi"><span id="720c" class="ll jr hi na b fi ne nf l ng nh">heroku login</span></pre><p id="5acb" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">如果你遇到任何问题，或者，你可以使用“heroku登录-i”。登录后，执行以下命令:</p><pre class="iy iz ja jb fd mz na nb nc aw nd bi"><span id="6196" class="ll jr hi na b fi ne nf l ng nh">heroku create myapp --region eu<br/>heroku container:login<br/>heroku container:push -a myapp web<br/>heroku container:release -a myapp web</span></pre><p id="2d97" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">首先，我们创建heroku应用程序。请注意，应用程序的名称必须是唯一的和可用的，因此您将需要使用除“myapp”之外的名称。关于<strong class="ko hj">地区</strong>标志，可以在<strong class="ko hj">【欧盟】</strong><strong class="ko hj">【美国】</strong>中选择。</p><p id="9158" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">然后，我们登录容器注册表，<strong class="ko hj">使用我们创建的Docker文件构建</strong>Docker容器，<strong class="ko hj">将</strong>它推送到Heroku，最后，<strong class="ko hj">部署</strong>它。</p><p id="cc1f" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">如果一切顺利，你的应用程序应该已经启动并运行了。您可以使用以下命令在浏览器中打开它:</p><pre class="iy iz ja jb fd mz na nb nc aw nd bi"><span id="5076" class="ll jr hi na b fi ne nf l ng nh">heroku open -a myapp</span></pre><h2 id="d563" class="ll jr hi bd js lm ln lo jw lp lq lr ka li ls lt kc lj lu lv ke lk lw lx kg ly bi translated">添加数据库</h2><p id="bc5e" class="pw-post-body-paragraph kl km hi ko b kp lz ij kr ks ma im ku li mb kx ky lj mc lb lc lk md lf lg lh hb bi translated">你的应用可能需要一个数据库。幸运的是，使用Heroku，添加数据库并将其链接到您的应用程序非常容易。有许多免费选项可供选择。在本教程中，我们将使用<strong class="ko hj"> Heroku Postgres爱好发展</strong>T22】计划。要将其添加到您的Heroku应用程序，请运行以下命令:</p><pre class="iy iz ja jb fd mz na nb nc aw nd bi"><span id="ce0f" class="ll jr hi na b fi ne nf l ng nh">heroku addons:create heroku-postgresql:hobby-dev -a myapp</span></pre><p id="5fe1" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">当您添加Postgres附加组件时，连接的Heroku实例将有一个名为<strong class="ko hj"> DATABASE_URL </strong>的预设环境变量，其中包含访问数据库的URL。看起来是这样的:</p><pre class="iy iz ja jb fd mz na nb nc aw nd bi"><span id="05ea" class="ll jr hi na b fi ne nf l ng nh">postgres://{user}:{password}@{hostname}:{port}/{database-name}</span></pre><p id="dabc" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">对于您的应用程序，您可能需要一个标准的Postgres连接字符串。我们可以使用这个漂亮的方法将url解析成一个连接字符串:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="936b" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">如果您使用的是实体框架，您可能会有一个如下所示的扩展方法:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mt mu l"/></div></figure><p id="af75" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">您可以在配置服务时调用它，如下所示:</p><pre class="iy iz ja jb fd mz na nb nc aw nd bi"><span id="3143" class="ll jr hi na b fi ne nf l ng nh">builder.Services.SetupAndAddDbContext(builder.Configuration);</span></pre><h1 id="3a44" class="jq jr hi bd js jt ni jv jw jx nj jz ka io nk ip kc ir nl is ke iu nm iv kg kh bi translated">结论</h1><p id="5baa" class="pw-post-body-paragraph kl km hi ko b kp lz ij kr ks ma im ku li mb kx ky lj mc lb lc lk md lf lg lh hb bi translated">我已经向你展示了如何使用Heroku轻松、快速、零成本地部署你的应用和数据库。</p><p id="2bb1" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">显然，免费的heroku计划所能处理的有性能限制，包括“冷启动”,但我相信对于一个完全免费、易于设置的服务来说，这只是一个小小的不便。显然，它不是为生产应用程序设计的。</p><p id="c281" class="pw-post-body-paragraph kl km hi ko b kp kq ij kr ks kt im ku li kw kx ky lj la lb lc lk le lf lg lh hb bi translated">你遇到什么问题了吗？你对Heroku有什么想法吗？让我知道你的想法。</p></div></div>    
</body>
</html>