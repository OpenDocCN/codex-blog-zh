<html>
<head>
<title>Diplomacy in Declarative Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">声明式Swift中的外交</h1>
<blockquote>原文：<a href="https://medium.com/codex/declarative-diplomacy-in-swift-c32a07101c9f?source=collection_archive---------5-----------------------#2021-10-05">https://medium.com/codex/declarative-diplomacy-in-swift-c32a07101c9f?source=collection_archive---------5-----------------------#2021-10-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/c3a8f31fdddfc05dc950c97f8f002afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wLa0TA2nq5B7lObZq5IC4g.gif"/></div></div></figure><div class=""/><p id="5b11" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我想介绍一个精彩的游戏。这需要战略思维、勇气、心理、谈判技巧——以及偶尔的暗箭伤人。它被恰当地命名为外交。</p><p id="4aff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">故事发生在1901年的欧洲，是第一次世界大战的前奏。</p><p id="7a58" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">游戏的目标是占领至少一半的大陆领土。但是，在其他游戏引入掷骰子等随机选择的情况下，在外交中，任何举动的结果都完全取决于你的谈判技巧，因为在某一点上，你将不得不结成联盟——而在某些点上，这些联盟将在背叛中破裂。我想你不会感到惊讶，有些人把它描述为友谊黑仔。</p><p id="e010" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对于这篇文章，我想实现董事会和单位的运动。我们假设之前已经检查过这些动作的有效性，并且它们可以被执行——如果没有任何冲突的动作，这是正确的，因为外交的一个特点是，在给定的游戏赛季中，所有玩家的动作都在同一时间执行。</p><figure class="jp jq jr js fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es jo"><img src="../Images/ba5902e4134aa34a3edc1d642f7b2841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yNtu2_nr6PBqR5FoYcZ3hw.gif"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">外交委员会</figcaption></figure><p id="c046" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将实施陆上军队和海上舰队的运动。</p><p id="bfff" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用声明式编码风格，其中状态和所有模型都是100%不可变的——从数量上减少了可能的错误空间。事实上，我们的代码将只对以前使用过的变量进行一次重新分配——写入新生成的状态。</p><p id="ca8f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里的声明性意味着我们告诉计算机我们想要他做什么，而不是如何做——并且一遍又一遍地重复。</p><p id="b109" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">编程界面将非常类似于英语口语。</p><p id="5131" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们将把一支军队从德国的鲁尔区转移到荷兰和比利时(这听起来像是历史重演)，一支军队从柏林一直转移到君士坦丁堡(自1930年以来的伊斯坦布尔)，这是我希望有一天能进行的一次旅行——不过不是和一支军队，而是一辆旧的沃尔沃240。我们会看到一支舰队驶向爱琴海——来接我。</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="870a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">《外交》知道七个帝国有七个玩家，领土可以是<code class="du ka kb kc kd b">land</code>或<code class="du ka kb kc kd b">sea</code>类，可以被军队或舰队占领。</p><p id="e7bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">边界可以是陆地、海洋、陆地和海洋(沿海)之间，也可以是海峡，丹麦和基尔或君士坦丁堡的博斯普鲁斯海峡之间。</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="e305" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ka kb kc kd b">Board</code>掌握着领土和边境。<code class="du ka kb kc kd b">Board.Change</code>对可能的命令进行编码。我们将在<code class="du ka kb kc kd b">move</code>上看一看。在<code class="du ka kb kc kd b">execute</code>中，对<code class="du ka kb kc kd b">change</code>值进行评估，并通过对区域进行必要的更改并将其写回而进行相应的处理。唯一真正需要可变性的地方。只有当两个区域直接相连时，移动才是可能的。</p><p id="6672" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们创建领土。有一大堆，只是一些例子:</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">大不列颠</figcaption></figure><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div><figcaption class="jt ju et er es jv jw bd b be z dx translated">法国</figcaption></figure><p id="e92a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要根据地图通过建立边界来连接领土:</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="f36e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在让我们创建一个董事会，并作出一些举动！<br/> <code class="du ka kb kc kd b">.move( .army(of:.germany,from:bulgaria, to:constantinople) )</code> <br/>读起来难道不像自然的英语吗——如果你能忽略那些时髦的标点符号的话？</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="c41b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du ka kb kc kd b">print(board:)</code>移动前将输出</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="da67" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在...之后</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="jy jz l"/></div></figure><p id="cbb3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就是这样:德国已经通过比利时将军队转移到荷兰，并在此过程中征服了这两个国家。从柏林到君士坦丁堡的所有行动都顺利完成，舰队到达了阿吉昂海。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><h1 id="76d3" class="kl km ht bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">结论</h1><p id="bb19" class="pw-post-body-paragraph iq ir ht is b it lj iv iw ix lk iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hb bi translated">在大学期间，我和一些朋友玩过几次外交游戏。无论是作为一个经典的面对面的棋盘游戏还是在线游戏。从那以后的几年里，我不时地把游戏的一部分编码成一种<em class="jx">式的编码形式</em>——从来没有比这种声明式风格更令人愉快和简单的体验了。此外，仅用了大约100行代码来表达模型和电路板。这些代码即使对非编码人员也是可读的。我妈妈能理解是怎么回事——真的，我考验过她。它尽可能的不可变，减少了错误和崩溃的可能性。</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="14bd" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经在<a class="ae lo" href="https://gitlab.com/-/snippets/2185068" rel="noopener ugc nofollow" target="_blank"> gitlab </a>上传了故事板。阅读更多关于Khipu 的<a class="ae lo" href="https://decodemeester.medium.com/khipu-rapid-and-sustainable-software-creation-in-swift-using-engineering-and-science-principles-312a933cce57?sk=8359f48cc06571e53de156db8cbc005c" rel="noopener">，Khipu是一个使用相同语言元素并建立相同约束的通用应用程序架构。</a></p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="706c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一个伟大而有趣的外交入门:</p><figure class="jp jq jr js fd hk"><div class="bz dy l di"><div class="lp jz l"/></div></figure></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="ff53" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我的下一篇文章中——即将完成——我想向您介绍Swift中基于能力的设计，同样是完全不可变和声明性的。</p></div></div>    
</body>
</html>