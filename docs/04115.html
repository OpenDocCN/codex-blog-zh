<html>
<head>
<title>QuickELK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¿«é€Ÿéº‹é¹¿</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/quickelk-a65c7f5dfee0?source=collection_archive---------2-----------------------#2021-10-27">https://medium.com/codex/quickelk-a65c7f5dfee0?source=collection_archive---------2-----------------------#2021-10-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/261d6ace21ef5b8b47bf6604c991fab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3C2dWo2QbJtFWef0luLelw.jpeg"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><a class="ae hv" href="https://miro.medium.com/max/875/1*779CspzO_Tgeyywv5z8nag.jpeg" rel="noopener">https://miro . medium . com/max/875/1 * 779 cspzo _ tgeyyv5 z8 nag . JPEG</a></figcaption></figure><div class=""/><p id="d8b5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨Kubernetesæ§åˆ¶çš„Dockerå¹³å°ä¸Šéƒ¨ç½²ELK stack (Elasticsearchã€Logstashã€Kibana)å’Œæ”¯æŒæœåŠ¡çš„å¿«é€Ÿä»£ç ã€‚</p><p id="1dbe" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae hv" href="https://github.com/vvickky007/QuickELK" rel="noopener ugc nofollow" target="_blank">ç‚¹å‡»æ­¤å¤„</a>è·å–ä»£ç ã€‚</p><h2 id="1b46" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">å…ˆå†³æ¡ä»¶</h2><ul class=""><li id="245d" class="ko kp hy ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">Kubernetesé›†ç¾¤è‡³å°‘æœ‰3åå·¥ä½œäººå‘˜ï¼Œè´Ÿè´£ç®¡ç†3ä¸ªElasticsearchèŠ‚ç‚¹ã€‚</li><li id="b2e2" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">åŸºäºDockerçš„å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒã€‚</li><li id="350e" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Helmå·²å®‰è£…å¹¶é…ç½®ä¸ºè®¿é—®Kubernetesé›†ç¾¤ä¸»æœåŠ¡å™¨è¿›è¡Œéƒ¨ç½²ã€‚</li><li id="5820" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Ansibleå·²å®‰è£…å¹¶é…ç½®ä¸ºè¿è¡Œè¡ŒåŠ¨æ‰‹å†Œã€‚</li><li id="70f9" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Kubernetes workerä¸Šæœ‰è¶³å¤Ÿçš„èµ„æºç”¨äºæ•´ä¸ªéƒ¨ç½²ã€‚</li><li id="1a7b" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">éœ€è¦åœ¨Kubernetesä¸Šé…ç½®å¤–éƒ¨è´Ÿè½½å¹³è¡¡å™¨(å¦‚Metal LB ),ä»¥ä¾¿ä»è´Ÿè½½å¹³è¡¡å™¨æœåŠ¡è®¿é—®Kubernetes GUIã€‚</li></ul><h2 id="6ced" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">è€ƒè™‘</h2><p id="db36" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">æ‰˜ç®¡åœ¨å®˜æ–¹â€œDocker.elastic.coâ€ä¸Šçš„dockeræ˜ åƒæ˜¯æœ‰æ•ˆçš„ï¼Œç”¨äºELKéƒ¨ç½²ã€‚ä»¥ä¸‹æ˜¯docker repo:</p><ul class=""><li id="6fab" class="ko kp hy ix b iy iz jc jd jg lh jk li jo lj js kv kw kx ky bi translated">å¼¹æ€§æœç´¢:docker.elastic.co/elasticsearch/elasticsearch</li><li id="5172" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">åŸºå·´çº³:docker.elastic.co/kibana/kibana</li><li id="e6f8" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">docker.elastic.co/beats/filebeat</li><li id="9041" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">docker.elastic.co/logstash/logstash</li><li id="612c" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">metricbeat:docker.elastic.co/beats/metricbeat</li></ul><h2 id="7b78" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">ä½¿ç”¨çš„å·¥å…·å’ŒæŠ€æœ¯</h2><ul class=""><li id="edc5" class="ko kp hy ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">Kubernetes: Kubernetesï¼Œä¹Ÿç§°ä¸ºK8sï¼Œæ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„å¼€æºç³»ç»Ÿã€‚</li><li id="380a" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Docker: Dockeræ˜¯ä¸€ç»„å¹³å°å³æœåŠ¡äº§å“ï¼Œä½¿ç”¨æ“ä½œç³»ç»Ÿçº§è™šæ‹ŸåŒ–æ¥äº¤ä»˜ç§°ä¸ºå®¹å™¨çš„è½¯ä»¶åŒ…ä¸­çš„è½¯ä»¶ã€‚</li><li id="b152" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Ansible: Ansibleæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ä¾›åº”ã€é…ç½®ç®¡ç†å’Œåº”ç”¨ç¨‹åºéƒ¨ç½²å·¥å…·ï¼Œæ”¯æŒä»£ç å½¢å¼çš„åŸºç¡€è®¾æ–½ã€‚</li><li id="ccc1" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Helm: Helmå¸®åŠ©æ‚¨ç®¡ç†Kubernetesåº”ç”¨ç¨‹åºâ€”â€”Helm Chartså¸®åŠ©æ‚¨å®šä¹‰ã€å®‰è£…å’Œå‡çº§æœ€å¤æ‚çš„Kubernetesåº”ç”¨ç¨‹åºã€‚</li><li id="5f18" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Elasticsearch: Elasticsearchä¸ºæ‰€æœ‰ç±»å‹çš„æ•°æ®æä¾›è¿‘ä¹å®æ—¶çš„æœç´¢å’Œåˆ†æã€‚æ— è®ºæ‚¨æœ‰ç»“æ„åŒ–è¿˜æ˜¯éç»“æ„åŒ–çš„æ–‡æœ¬ã€æ•°å­—æ•°æ®æˆ–åœ°ç†ç©ºé—´æ•°æ®ï¼ŒElasticsearchéƒ½èƒ½ä»¥æ”¯æŒå¿«é€Ÿæœç´¢çš„æ–¹å¼é«˜æ•ˆåœ°å­˜å‚¨å’Œç´¢å¼•è¿™äº›æ•°æ®ã€‚</li><li id="8d8a" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Logstash: Logstashæ˜¯ä¸€ä¸ªå…è´¹å¼€æ”¾çš„æœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†ç®¡é“ï¼Œå®ƒä»å¤§é‡æ¥æºè·å–æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œç„¶åå°†å…¶å‘é€åˆ°Elasticsearchã€‚</li><li id="4295" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Kibana: Kibanaæ˜¯ä¸€ä¸ªå…è´¹å¼€æ”¾çš„ç”¨æˆ·ç•Œé¢ï¼Œå¯ä»¥è®©ä½ å¯è§†åŒ–ä½ çš„Elasticsearchæ•°æ®å¹¶æµè§ˆElastic Stackã€‚</li><li id="4325" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">æ— è®ºæ‚¨æ˜¯ä»å®‰å…¨è®¾å¤‡ã€äº‘ã€å®¹å™¨ã€ä¸»æœºè¿˜æ˜¯OTæ”¶é›†æ—¥å¿—ï¼ŒFilebeaté€šè¿‡æä¾›ä¸€ç§è½»é‡çº§çš„æ–¹æ³•æ¥è½¬å‘å’Œé›†ä¸­æ—¥å¿—å’Œæ–‡ä»¶ï¼Œå¸®åŠ©æ‚¨å°†ç®€å•çš„äº‹æƒ…å˜å¾—ç®€å•ã€‚</li><li id="cf82" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Metricbeat:è½»é‡çº§æŒ‡æ ‡è¿é€å™¨ä»æ‚¨çš„ç³»ç»Ÿå’ŒæœåŠ¡ä¸­æ”¶é›†æŒ‡æ ‡ã€‚ä»CPUåˆ°å†…å­˜ï¼Œä»Redisåˆ°NGINXï¼Œç­‰ç­‰ï¼ŒMetricbeatæ˜¯ä¸€ç§å‘é€ç³»ç»Ÿå’ŒæœåŠ¡ç»Ÿè®¡ä¿¡æ¯çš„è½»é‡çº§æ–¹å¼ã€‚</li><li id="5ff2" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Github: GitHubï¼ŒInc .æ˜¯ä¸€å®¶ä½¿ç”¨Gitè¿›è¡Œè½¯ä»¶å¼€å‘å’Œç‰ˆæœ¬æ§åˆ¶çš„äº’è”ç½‘æ‰˜ç®¡æä¾›å•†ã€‚å®ƒæä¾›äº†Gitçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å’Œæºä»£ç ç®¡ç†åŠŸèƒ½ï¼Œä»¥åŠå®ƒè‡ªå·±çš„ç‰¹æ€§ã€‚</li></ul><h2 id="9563" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">å®‰è£…å’Œä½¿ç”¨</h2><p id="a41a" class="pw-post-body-paragraph iv iw hy ix b iy kq ja jb jc kr je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated"><strong class="ix hz">ç›®æ ‡æ¶æ„å›¾</strong></p><figure class="ll lm ln lo fd hk er es paragraph-image"><div class="er es lk"><img src="../Images/8e39f76c912a15ae006189530c0efc29.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*HkoU850idc0H6PI9lrD5Mw.png"/></div><figcaption class="hr hs et er es ht hu bd b be z dx translated"><a class="ae hv" href="https://miro.medium.com/max/533/1*dfda68mO9NPtMg4CensGXw.png" rel="noopener">https://miro . medium . com/max/533/1 * dfda 68 mo 9 nptmg 4 censgxw . png</a></figcaption></figure><p id="ba89" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">é€šè¿‡Ansibleå®‰è£…</strong></p><p id="3d7a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å…‹éš†â€œQuickELKâ€é¡¹ç›®ï¼Œç¡®ä¿æ‰€æœ‰å…ˆå†³æ¡ä»¶éƒ½å·²åˆ°ä½ã€‚é€‰æ‹©éœ€è¦åˆ›å»ºæ­¤å †æ ˆçš„Kubernetesåç§°ç©ºé—´ã€‚å¦‚æœåç§°ç©ºé—´ä¸å­˜åœ¨ï¼Œå°†è‡ªåŠ¨åˆ›å»ºã€‚ä¸ºå †æ ˆé€‰æ‹©ä¸€ä¸ªèˆµéƒ¨ç½²åç§°ã€‚ä»å…‹éš†ç›®å½•å†…éƒ¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="3112" class="jt ju hy lq b fi lu lv l lw lx"># ansible-playbook main.yaml -e namespace=&lt;Namespace for Deployment&gt; -e stackname=&lt;Name of Stack&gt; -e chartpath=elk-stack<br/></span><span id="2b9f" class="jt ju hy lq b fi ly lv l lw lx">Example:<br/># ansible-playbook main.yaml -e namespace=ezsinam1 -e stackname=mystack -e chartpath=elk-stack</span><span id="c7a4" class="jt ju hy lq b fi ly lv l lw lx">Output: <br/> [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match â€˜allâ€™</span><span id="9995" class="jt ju hy lq b fi ly lv l lw lx">PLAY [localhost] *****************************************************************************************************************************************************</span><span id="8462" class="jt ju hy lq b fi ly lv l lw lx">TASK [Check the Namespace Exist.] ************************************************************************************************************************************<br/>fatal: [localhost]: FAILED! =&gt; {â€œchangedâ€: true, â€œcmdâ€: â€œkubectl get ns ezsinam1â€, â€œdeltaâ€: â€œ0:00:00.136403â€, â€œendâ€: â€œ2021â€“10â€“27 14:11:27.742760â€, â€œmsgâ€: â€œnon-zero return codeâ€, â€œrcâ€: 1, â€œstartâ€: â€œ2021â€“10â€“27 14:11:27.606357â€, â€œstderrâ€: â€œError from server (NotFound): namespaces \â€ezsinam1\â€ not foundâ€, â€œstderr_linesâ€: [â€œError from server (NotFound): namespaces \â€ezsinam1\â€ not foundâ€], â€œstdoutâ€: â€œâ€, â€œstdout_linesâ€: []}</span><span id="ba2f" class="jt ju hy lq b fi ly lv l lw lx">TASK [Create Namespace if NOT exists.] *******************************************************************************************************************************<br/>changed: [localhost]</span><span id="0e4d" class="jt ju hy lq b fi ly lv l lw lx">TASK [debug] *********************************************************************************************************************************************************<br/>ok: [localhost] =&gt; {<br/> â€œns.stdout_linesâ€: [<br/> â€œnamespace/ezsinam1 createdâ€<br/> ]<br/>}</span><span id="70bb" class="jt ju hy lq b fi ly lv l lw lx">TASK [Deploy the ELK Stack.] *****************************************************************************************************************************************<br/>changed: [localhost]</span><span id="c9f6" class="jt ju hy lq b fi ly lv l lw lx">TASK [debug] *********************************************************************************************************************************************************<br/>ok: [localhost] =&gt; {<br/> â€œchart.stdout_linesâ€: [<br/> â€œNAME: mystackâ€,<br/> â€œLAST DEPLOYED: Wed Oct 27 14:11:28 2021â€,<br/> â€œNAMESPACE: ezsinam1â€,<br/> â€œSTATUS: deployedâ€,<br/> â€œREVISION: 1â€,<br/> â€œNOTES:â€,<br/> â€œ1. Get the application URL by running these commands:â€<br/> ]<br/>}</span><span id="39d2" class="jt ju hy lq b fi ly lv l lw lx">PLAY RECAP ***********************************************************************************************************************************************************<br/>localhost : ok=4 changed=2 unreachable=0 failed=1<br/>0</span></pre><p id="aef9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">é€šè¿‡Helm </strong> <br/>å®‰è£…å…‹éš†â€œQuickELKâ€é¡¹ç›®ï¼Œç¡®ä¿æ‰€æœ‰å…ˆå†³æ¡ä»¶éƒ½å·²åˆ°ä½ã€‚é€‰æ‹©éœ€è¦åˆ›å»ºæ­¤å †æ ˆçš„Kubernetesåç§°ç©ºé—´ã€‚å¦‚æœåç§°ç©ºé—´ä¸å­˜åœ¨ï¼Œå°†è‡ªåŠ¨åˆ›å»ºã€‚ä¸ºå †æ ˆé€‰æ‹©ä¸€ä¸ªèˆµéƒ¨ç½²åç§°ã€‚ä»å…‹éš†ç›®å½•å†…éƒ¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="d4ec" class="jt ju hy lq b fi lu lv l lw lx"># helm install &lt;Stack Name&gt; elk-stack â€” namespace &lt;Namespace for Deployment&gt; â€” create-namespace</span></pre><p id="6037" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">é€šè¿‡Helm/Ansible </strong> <br/>å®‰è£…ç‰¹å®šçš„ELKæ ˆç‰ˆæœ¬ï¼Œæ›´æ–°æ–‡ä»¶â€œELK/elk-stack/Chart.yamlâ€ï¼Œé”®å€¼â€œappVersionâ€åˆ°ç‰¹å®šç‰ˆæœ¬çš„ELKæ ˆã€‚ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»ä»ç‰ˆæœ¬â€œ6.8.20â€é…ç½®äº†æ•´ä¸ªå †æ ˆå®‰è£…ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="231a" class="jt ju hy lq b fi lu lv l lw lx">apiVersion: v2<br/>appVersion: 6.8.20 # Update Specific version of ELK stack, Automatically all components will be installed with selected version.<br/>â€¦<br/>â€¦</span></pre><p id="aaff" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">é€šè¿‡Kubectl </strong> <br/>è¿›è¡Œå®‰è£…éªŒè¯è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œéƒ¨ç½²éªŒè¯ï¼Œæä¾›ä¸Šä¸€æ­¥ä¸­æä¾›çš„åç§°ç©ºé—´ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="cca7" class="jt ju hy lq b fi lu lv l lw lx"># kubectl get all -n &lt;Namespace for Deployment&gt;</span><span id="9d81" class="jt ju hy lq b fi ly lv l lw lx">Example:<br/># kubectl get all -n ezsinam1</span><span id="d60a" class="jt ju hy lq b fi ly lv l lw lx">Output:<br/>NAME READY STATUS RESTARTS AGE<br/>pod/elasticsearch-logging-0 1/1 Running 0 4m7s<br/>pod/elasticsearch-logging-1 1/1 Running 0 4m7s<br/>pod/elasticsearch-logging-2 1/1 Running 0 4m7s<br/>pod/filebeat-4kc6r 1/1 Running 0 4m7s<br/>pod/filebeat-5b9pz 1/1 Running 0 4m7s<br/>pod/filebeat-cxwpj 1/1 Running 0 4m7s<br/>pod/filebeat-fqth7 1/1 Running 0 4m7s<br/>pod/filebeat-mgtts 1/1 Running 0 4m7s<br/>pod/filebeat-rdgx8 1/1 Running 0 4m7s<br/>pod/filebeat-rgxmc 1/1 Running 0 4m7s<br/>pod/kibana-logging-58db4c758f-gbb6k 1/1 Running 2 4m7s<br/>pod/logstash-deployment-5b4879b9f7â€“4zwnr 1/1 Running 0 4m7s<br/>pod/metricbeat-6kp4k 1/1 Running 0 4m7s<br/>pod/metricbeat-dqf7c 1/1 Running 0 4m7s<br/>pod/metricbeat-gj78v 1/1 Running 0 4m7s<br/>pod/metricbeat-kgbfg 1/1 Running 0 4m7s<br/>pod/metricbeat-ngb9q 1/1 Running 0 4m7s<br/>pod/metricbeat-tw7zb 1/1 Running 0 4m7s<br/>pod/metricbeat-x4tv4 1/1 Running 0 4m7s</span><span id="8756" class="jt ju hy lq b fi ly lv l lw lx">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE<br/>service/elasticsearch-logging ClusterIP 10.108.33.4 &lt;none&gt; 9200/TCP 4m7s<br/>service/kibana-logging LoadBalancer 10.108.8.123 10.64.109.113 5601:30316/TCP 4m7s<br/>service/logstash-service ClusterIP 10.105.7.173 &lt;none&gt; 5044/TCP 4m7s</span><span id="f060" class="jt ju hy lq b fi ly lv l lw lx">NAME DESIRED CURRENT READY UP-TO-DATE AVAILABLE NODE SELECTOR AGE<br/>daemonset.apps/filebeat 7 7 7 7 7 &lt;none&gt; 4m7s<br/>daemonset.apps/metricbeat 7 7 7 7 7 &lt;none&gt; 4m7s</span><span id="ec24" class="jt ju hy lq b fi ly lv l lw lx">NAME READY UP-TO-DATE AVAILABLE AGE<br/>deployment.apps/kibana-logging 1/1 1 1 4m7s<br/>deployment.apps/logstash-deployment 1/1 1 1 4m7s</span><span id="752e" class="jt ju hy lq b fi ly lv l lw lx">NAME DESIRED CURRENT READY AGE<br/>replicaset.apps/kibana-logging-58db4c758f 1 1 1 4m7s<br/>replicaset.apps/logstash-deployment-5b4879b9f7 1 1 1 4m7s</span><span id="1f6a" class="jt ju hy lq b fi ly lv l lw lx">NAME READY AGE<br/>statefulset.apps/elasticsearch-logging 3/3 4m7s<br/></span></pre><p id="f20d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">é›†æˆéªŒè¯</strong> <br/>éªŒè¯ElasticSearchçš„ç´¢å¼•ï¼Œä»¥éªŒè¯ä¸filebeatã€logstashå’Œmetricbeatçš„é›†æˆã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="7aa9" class="jt ju hy lq b fi lu lv l lw lx"># curl &lt;elasticsearch-logging clsuetrIP Service IP&gt;:9200/_cat/indices</span><span id="dff4" class="jt ju hy lq b fi ly lv l lw lx">Example:<br/><br/># curl 10.108.33.4:9200/_cat/indices<br/>yellow open logstash-2021.07.08 sxXdBTWZSt6dIaDB4s_QLQ 5 1 218 0 388.2kb 388.2kb<br/>yellow open logstash-2021.08.05 H37edbWUT4enUQfF â€” -t_A 5 1 6 0 62.7kb 62.7kb<br/>yellow open logstash-2021.09.05 vuQnUkGMTLWy85c9LSr-SA 5 1 681 0 458.8kb 458.8kb<br/>yellow open logstash-2021.07.05 Im1jancJQlWfwUiC8h0vKw 5 1 717 0 773.6kb 773.6kb<br/>yellow open logstash-2021.07.02 b9AFqpcTTkW5nmqoqaCsig 5 1 27535 0 6.6mb 6.6mb<br/>yellow open metricbeat-6.8.20â€“2021.10.27 iiVkm-lMQwKT6ElVwpukGw 5 1 17020 0 12.9mb 12.9mb<br/>â€¦<br/>â€¦</span></pre><p id="bedf" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">MetricBeatå’ŒLogStashç´¢å¼•åº”è¯¥å¯è§ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªç´¢å¼•å¹¶ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æŸ¥æ•°æ®ã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="ac44" class="jt ju hy lq b fi lu lv l lw lx">Example:<br/># curl 10.108.33.4:9200/logstash-2021.07.08/_search</span></pre><p id="8189" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">å®‰è£…æ¸…ç†</strong> <br/>åˆ é™¤æ•´ä¸ªéƒ¨ç½²æä¾›åˆ›å»ºè¿™ä¸ªæ ˆçš„Kubernetesåç§°ç©ºé—´ã€‚è¯¥å‘½åç©ºé—´å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚æ­¤å¤–ï¼Œæä¾›åˆ›å»ºçš„å †æ ˆçš„helméƒ¨ç½²åç§°ã€‚</p><p id="588b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åœ¨å‘½ä»¤ä¸‹è¿è¡Œã€‚</p><pre class="ll lm ln lo fd lp lq lr ls aw lt bi"><span id="5a6c" class="jt ju hy lq b fi lu lv l lw lx"># ansible-playbook clean.yaml -e namespace=&lt;Namespace of Deployment&gt; -e stackname=&lt;Name of Deployed Stack&gt;<br/><br/>Example:<br/># ansible-playbook clean.yaml -e namespace=ezsinam1 -e stackname=mystack</span><span id="c75a" class="jt ju hy lq b fi ly lv l lw lx">Output:<br/> [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match â€˜allâ€™</span><span id="65ce" class="jt ju hy lq b fi ly lv l lw lx">PLAY [localhost] *****************************************************************************************************************************************************</span><span id="4cb0" class="jt ju hy lq b fi ly lv l lw lx">TASK [Remove the ELK Stack.] *****************************************************************************************************************************************<br/>changed: [localhost]</span><span id="540a" class="jt ju hy lq b fi ly lv l lw lx">TASK [debug] *********************************************************************************************************************************************************<br/>ok: [localhost] =&gt; {<br/> â€œchart.stdout_linesâ€: [<br/> â€œrelease \â€mystack\â€ uninstalledâ€<br/> ]<br/>}</span><span id="6273" class="jt ju hy lq b fi ly lv l lw lx">TASK [Delete the Namespace.] *****************************************************************************************************************************************<br/>ansible-playbook clean.yaml -e namespace=ezsinam1 -e stackname=mystackchanged: [localhost]</span><span id="88d7" class="jt ju hy lq b fi ly lv l lw lx">TASK [debug] *********************************************************************************************************************************************************<br/>ok: [localhost] =&gt; {<br/> â€œns.stdout_linesâ€: [<br/> â€œnamespace \â€ezsinam1\â€ deletedâ€<br/> ]<br/>}</span><span id="b29c" class="jt ju hy lq b fi ly lv l lw lx">PLAY RECAP ***********************************************************************************************************************************************************<br/>localhost : ok=4 changed=2 unreachable=0 failed=0</span></pre><h2 id="b0ea" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">å¤‡ä»½ç­–ç•¥</h2><ul class=""><li id="846e" class="ko kp hy ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">Elasticsearch: Snapshotæ˜¯ä»æ­£åœ¨è¿è¡Œçš„Elasticsearché›†ç¾¤ä¸­è·å–çš„å¤‡ä»½ã€‚æ‚¨å¯ä»¥æ‹æ‘„æ•´ä¸ªé›†ç¾¤çš„å¿«ç…§ï¼ŒåŒ…æ‹¬å…¶æ‰€æœ‰æ•°æ®æµå’Œç´¢å¼•ã€‚æ‚¨ä¹Ÿå¯ä»¥åªä¸ºé›†ç¾¤ä¸­çš„ç‰¹å®šæ•°æ®æµæˆ–ç´¢å¼•æ‹æ‘„å¿«ç…§ã€‚åœ¨åˆ›å»ºå¿«ç…§ä¹‹å‰ï¼Œæ‚¨å¿…é¡»æ³¨å†Œå¿«ç…§å­˜å‚¨åº“ã€‚å¿«ç…§å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°æˆ–è¿œç¨‹å­˜å‚¨åº“ä¸­ã€‚è¿œç¨‹å­˜å‚¨åº“å¯ä»¥é©»ç•™åœ¨äºšé©¬é€ŠS3ã€HDFSã€å¾®è½¯Azureã€è°·æ­Œäº‘å­˜å‚¨å’Œå…¶ä»–ç”±å­˜å‚¨åº“æ’ä»¶æ”¯æŒçš„å¹³å°ä¸Šã€‚</li><li id="b56f" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Kibana:ä»ªè¡¨æ¿å’Œé…ç½®å¯¹Kibanaæ¥è¯´å¾ˆé‡è¦ï¼Œä»ªè¡¨æ¿å¯ä»¥å¯¼å‡ºï¼Œæºä»£ç æ§åˆ¶å¯ä»¥ç®¡ç†ã€‚é…ç½®å¯ä»¥åœ¨PVæˆ–NFSä¸Šè¿›è¡Œå¤–éƒ¨å¤‡ä»½ã€‚å…¶ä½™çš„å®ä¾‹å¯ä»¥è¢«è§†ä¸ºCowã€‚</li><li id="6d1c" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Logstash: Logstashå°†å……å½“æ—¥å¿—æºå’Œå¼¹æ€§æœç´¢ä¹‹é—´çš„ä¸­é—´å±‚ï¼Œä¸éœ€è¦ç‰¹å®šçš„å¤‡ä»½æªæ–½ã€‚è¯·ä¿ç•™å…¶é…ç½®çš„å¤‡ä»½ã€‚å¯èƒ½ä¼šè¢«å½“æˆä¸€å¤´ç‰›ã€‚</li><li id="3a0a" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Metricbeat: Metricbeatå°†å……å½“åº¦é‡æºå’Œå¼¹æ€§æœç´¢ä¹‹é—´çš„ä¸­é—´å±‚ï¼Œä¸éœ€è¦ç‰¹å®šçš„å¤‡ä»½æªæ–½ã€‚è¯·ä¿ç•™å…¶é…ç½®çš„å¤‡ä»½ã€‚å¯èƒ½ä¼šè¢«å½“æˆä¸€å¤´ç‰›ã€‚</li><li id="d9fb" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Filebeat: Filebeatå°†å……å½“æ—¥å¿—æºå’Œå¼¹æ€§æœç´¢ä¹‹é—´çš„ä¸­é—´å±‚ï¼Œä¸éœ€è¦ç‰¹å®šçš„å¤‡ä»½æªæ–½ã€‚è¯·ä¿ç•™å…¶é…ç½®çš„å¤‡ä»½ã€‚å¯èƒ½ä¼šè¢«å½“æˆä¸€å¤´ç‰›ã€‚</li></ul><h2 id="e535" class="jt ju hy bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">éƒ¨ç½²é™åˆ¶</h2><ul class=""><li id="7131" class="ko kp hy ix b iy kq jc kr jg ks jk kt jo ku js kv kw kx ky bi translated">è¿™æ˜¯ä¸€ä¸ªPOCï¼Œä½èµ„æºè¢«åˆ†é…ç»™åœ¨æ­¤æ´»åŠ¨ä¸‹åˆ›å»ºçš„Kuberneteså¯¹è±¡ã€‚å¯¹äºå®æ—¶ç”Ÿäº§è®¾ç½®ï¼Œéœ€è¦å¢åŠ åˆ†é…ç»™Kuberneteså¯¹è±¡çš„èµ„æºä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</li><li id="88d3" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">æ­¤éƒ¨ç½²ä¸­æ²¡æœ‰ä½¿ç”¨PVCã€‚æˆ‘ä»¬å¯èƒ½éœ€è¦è¿æ¥PVCæ¥æé«˜å†—ä½™æ€§å’Œå¥å£®æ€§ã€‚</li><li id="3f77" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">å°±ç»ªæ€§å’Œæ´»è·ƒæ€§ä¹Ÿæ²¡æœ‰é›†æˆï¼Œå¯èƒ½ä¼šè€ƒè™‘åœ¨æœªæ¥çš„ç”Ÿäº§ä¸­æ¨å‡ºã€‚</li><li id="1bd4" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">Filebeat/MetricBeatå¯ä»¥é™„åŠ åˆ°ä»»ä½•åº”ç”¨ç¨‹åºå®¹å™¨ä¸Šï¼Œä½œä¸ºå°†æ—¥å¿—/æŒ‡æ ‡è½¬å‘ç»™å¼¹æ€§æœç´¢çš„è¾…åŠ©å·¥å…·ã€‚æœ¬æ¦‚å¿µéªŒè¯ä¸­æœªæ¶µç›–ã€‚</li><li id="1e08" class="ko kp hy ix b iy kz jc la jg lb jk lc jo ld js kv kw kx ky bi translated">è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„å­¦ä¹ ï¼Œåœ¨ä½ äº§å“åŒ–ä¹‹å‰ï¼ŒæŠŠå®ƒä½œä¸ºä½ åŸºæœ¬ç†è§£çš„å‚è€ƒã€‚</li></ul><figure class="ll lm ln lo fd hk er es paragraph-image"><a href="https://faun.to/bP1m5"><div class="er es lz"><img src="../Images/8f497a40fc9423af91397c9e53e5ff35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BCiLLad3dvZLwBa-B5cAVQ.png"/></div></a></figure><p id="3652" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">åŠ å…¥ç‰§ç¥:<a class="ae hv" href="https://faun.to/i9Pt9" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">ç½‘ç«™</strong> </a> <strong class="ix hz"> </strong>ğŸ’»<strong class="ix hz">|</strong>|<a class="ae hv" href="https://faun.dev/podcast" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">æ’­å®¢</strong></a><strong class="ix hz"/>ğŸ™ï¸<strong class="ix hz">|</strong><a class="ae hv" href="https://twitter.com/joinfaun" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">æ¨ç‰¹</strong> </a> <strong class="ix hz"> </strong>ğŸ¦<strong class="ix hz"> | </strong> <a class="ae hv" href="https://www.facebook.com/faun.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">è„¸ä¹¦</strong> </a> <strong class="ix hz"> </strong>ğŸ‘¥<strong class="ix hz">|</strong><a class="ae hv" href="https://instagram.com/fauncommunity/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">insta gram</strong></a><strong class="ix hz"/>ğŸ“·| <a class="ae hv" href="https://www.facebook.com/groups/364904580892967/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz"> Facebookç¾¤</strong></a><strong class="ix hz"/>ğŸ—£ï¸<strong class="ix hz">|</strong><a class="ae hv" href="https://www.linkedin.com/company/faundev" rel="noopener ugc nofollow" target="_blank"><strong class="ix hz">LinkedInç¾¤</strong> </a> <strong class="ix hz"> </strong>ğŸ’¬<strong class="ix hz"> | </strong> <a class="ae hv" href="https://faun.dev/chat" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">æ¾å¼›</strong> </a>ğŸ“±<strong class="ix hz"> | </strong> <a class="ae hv" href="https://thechief.io" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">äº‘åŸç”Ÿ</strong> <strong class="ix hz">æ–°é—»</strong> </a> <strong class="ix hz"> </strong>ğŸ“°<strong class="ix hz"> | </strong> <a class="ae hv" href="https://linktr.ee/faun.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">æ›´æœ‰</strong> </a> <strong class="ix hz">ã€‚ </strong></p><p id="3062" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">å¦‚æœè¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡»æ‹æ‰‹ğŸ‘æŒ‰é’®å‡ ä¸‹ï¼Œä»¥ç¤ºä½ å¯¹ä½œè€…çš„æ”¯æŒğŸ‘‡</p></div></div>    
</body>
</html>