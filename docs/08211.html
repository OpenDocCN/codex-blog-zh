<html>
<head>
<title>How React.js Context works (TypeScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React.jsä¸Šä¸‹æ–‡å¦‚ä½•å·¥ä½œ(TypeScript)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/how-react-js-context-works-typescript-72de02036f71?source=collection_archive---------3-----------------------#2022-07-24">https://medium.com/codex/how-react-js-context-works-typescript-72de02036f71?source=collection_archive---------3-----------------------#2022-07-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4da0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœæ‚¨çš„Reactåº”ç”¨ç¨‹åºä¸æ–­æ‰©å±•ï¼Œå®ƒæœ€ç»ˆä¼šè¾¾åˆ°éœ€è¦å…¨å±€çŠ¶æ€çš„æ—¶å€™ã€‚æœ‰è®¸å¤šå¯ç”¨çš„è§£å†³æ–¹æ¡ˆï¼›ç°åœ¨ï¼Œæˆ‘å°†æ¼”ç¤ºæœ€ç®€å•çš„ä¸€ä¸ªï¼Œå®ƒæ˜¯åœ¨Reactä¸­æœ‰æ„å¼€å‘çš„:Reactä¸Šä¸‹æ–‡</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/8320664c8fb98f45033baea39fa7dbe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgisRWrTc0JwXw9yLqovSQ.png"/></div></div></figure><p id="2415" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å‡è®¾æ‚¨æˆ–æ‚¨çš„å®¢æˆ·å¸Œæœ›å‡çº§åº”ç”¨ç¨‹åºï¼Œä»¥å…è®¸ç”¨æˆ·åœ¨äº®æš—æ¨¡å¼ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚è¿™æ„å‘³ç€æ‚¨å¿…é¡»ä»¥æŸç§æ–¹å¼ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºç»„ä»¶æä¾›å¯¹å®é™…ä¸»é¢˜ä¿¡æ¯çš„è®¿é—®ã€‚</p><p id="97be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¯¹äºåº”ç”¨ç¨‹åºä¸­æœ‰é™æ•°é‡çš„ç»„ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code class="du jp jq jr js b">props</code>æ¥å®ç°</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="9383" class="jx jy hi js b fi jz ka l kb kc">ğŸ‘ <strong class="js hj">IN A SMALL APPLICATION YOU CAN PASS ANY INFORMATION WITH PROPS</strong><br/>const Navbar = () =&gt; {<br/>  const theme = useMemo(() =&gt; {<br/>    return props.theme<br/>  }, [])<br/>  return(<br/>    &lt;div className={theme === 'light' ? 'light' : 'dark'}&gt;<br/>      ...<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>const Component = (props: { theme: string }) =&gt; {<br/>  const theme = useMemo(() =&gt; {<br/>    return props.theme<br/>  }, [])<br/>  return(<br/>    &lt;div className={theme === 'light' ? 'light' : 'dark'}&gt;<br/>      ...<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>const Main = () =&gt; {<br/>  return(<br/>    &lt;div&gt;<br/>      &lt;Navbar theme='light' /&gt;<br/>      &lt;Component theme='light' /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="414b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½ å¯ä»¥è¿™æ ·åšï¼Œä½†è¿™å®é™…ä¸Šæ˜¯å¤šä½™çš„ï¼Œè€Œä¸”ä¸€ç‚¹ä¹Ÿä¸é¼“åŠ±ã€‚æ›´ä¸ç”¨è¯´å¦‚æœä½ åœ¨è®¸å¤šä¸åŒçš„å±‚ä¸Šæœ‰è®¸å¤šç»„ä»¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»è·¨å¤šä¸ªçº§åˆ«æä¾›<code class="du jp jq jr js b">props</code>,è¿™äº›çº§åˆ«ä¸ä¸€å®šéœ€è¦çŸ¥é“ä¼ é€’ç»™ä½çº§ç»„ä»¶çš„ä¿¡æ¯ã€‚</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="3738" class="jx jy hi js b fi jz ka l kb kc">â›”ï¸ <strong class="js hj">YOU SHOULD AVOID SENDING PROPS THROUGH MANY LAYERS WHEN USING A LOT OF COMPONENTS</strong><br/>const Main = () =&gt; {<br/>  return(<br/>    &lt;div&gt;<br/>      &lt;Layout theme='light' /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>const Layout = (props: { theme: string }) =&gt; {<br/>  return(<br/>    &lt;div&gt;<br/>      &lt;Navbar theme={props.theme} /&gt;<br/>      &lt;Wrapper theme={props.theme} /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>const Wrapper = (props: { theme: string }) =&gt; {<br/>  ...<br/>}</span></pre><p id="ea05" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä½†æ˜¯ï¼Œå¦‚æœæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è®©æ‚¨çš„åº”ç”¨ç¨‹åºè®¿é—®å…¨å±€ä¸Šä¸‹æ–‡å‘¢ï¼Ÿè¿™å°†æ˜¯å¾ˆæ£’çš„ï¼Œå› ä¸ºä½ å¯ä»¥æä¾›å…¨çƒä¿¡æ¯ï¼Œè€Œä¸éœ€è¦é€šè¿‡<code class="du jp jq jr js b">props</code>åˆ°ä»»ä½•çº§åˆ«å’Œä»»ä½•ç»„ä»¶ã€‚</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kd"><img src="../Images/ac30e75f867852a7efeb1da755f50298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLg1-G2UAlaKpBopRnmCRg.png"/></div></div></figure><p id="bb28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ååº”ä¸Šä¸‹æ–‡æ˜¯ä½ æ‰€å¯»æ±‚çš„ã€‚è¿™ä¸€æ¬¡ï¼Œä¸éœ€è¦ä»»ä½•æ›´å¤šçš„åº“ä¾èµ–ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šç»å†å®‰è£…è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°†ä»ä¸€ä¸ªåä¸º<code class="du jp jq jr js b">contexts.ts</code>çš„<code class="du jp jq jr js b">src</code>æ–°æ–‡ä»¶å¼€å§‹</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="6ca6" class="jx jy hi js b fi jz ka l kb kc">ğŸ“ <strong class="js hj">CREATE A NEW FILE</strong><br/>src/contexts.tsx</span></pre><p id="5e27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸ºäº†ä¿æŒåœ¨åº”ç”¨ç¨‹åºä¸­æä¾›å®é™…ä¸»é¢˜ä¿¡æ¯çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŸºäº<code class="du jp jq jr js b">theme</code>çš„å‘½åçº¦å®šæ¥åˆ›å»ºä¸»é¢˜ä¿¡æ¯<code class="du jp jq jr js b">Context</code>å’Œä¸»é¢˜ä¿¡æ¯<code class="du jp jq jr js b">Provider</code></p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="6d02" class="jx jy hi js b fi jz ka l kb kc">ğŸ‘ <strong class="js hj">CREATE THE THEME CONTEXT AND THE INFORMATION PROVIDER</strong><br/>import React from 'react'<br/>export const ThemeContext = React.createContext('')<br/>export const ThemeProvider = ThemeContext.Provider</span></pre><p id="9f59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ä¸‹ä¸€æ­¥æ˜¯ç”¨<code class="du jp jq jr js b">Provider</code>åŒ…è£…<code class="du jp jq jr js b">Main</code>æˆ–<code class="du jp jq jr js b">App</code>ç»„ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª<code class="du jp jq jr js b">theme</code>çŠ¶æ€</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="5c99" class="jx jy hi js b fi jz ka l kb kc">ğŸŒ¯ <strong class="js hj">WRAP YOUR MAIN COMPONENT WITH THE PROVIDER AND CREATE A THEME STATE</strong><br/>import { ThemeProvider } from "../contexts";<br/>import { useState } from "react";<br/>const Main = () =&gt; {<br/>  <strong class="js hj">const [theme, setTheme] = useState&lt;'light' | 'dark'&gt;('light')</strong><br/>  return(<br/>    <strong class="js hj">&lt;ThemeProvider value={theme}&gt;</strong><br/>      &lt;Component /&gt;<br/>      &lt;button onClick={() =&gt; {setTheme('light')}}&gt;LIGHT&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; {setTheme('dark')}}&gt;DARK&lt;/button&gt;<br/>    <strong class="js hj">&lt;/ThemeProvider&gt;</strong><br/>  )<br/>}<br/>export default Main</span></pre><p id="ae13" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">èŠ±ç‚¹æ—¶é—´è°ˆè°ˆä¸Šé¢å‘ç”Ÿçš„äº‹ã€‚æ‚¨åˆ›å»ºäº†ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå¯èƒ½å€¼<code class="du jp jq jr js b">light</code>æˆ–<code class="du jp jq jr js b">dark</code>çš„<code class="du jp jq jr js b">theme</code>çŠ¶æ€ã€‚ä¹‹åï¼Œæ‚¨å°†è¿™ä¸ªçŠ¶æ€ä½œä¸ºä¸€ä¸ªå€¼ä¼ é€’ç»™äº†<code class="du jp jq jr js b">Provider</code>åŒ…è£…å™¨ã€‚è¿™æ„å‘³ç€å¦‚æœä½ ç‚¹å‡»å…¶ä¸­ä¸€ä¸ª<code class="du jp jq jr js b">button</code>åˆ°<code class="du jp jq jr js b">set</code>åˆ°<code class="du jp jq jr js b">theme</code>ï¼Œé‚£ä¹ˆ<code class="du jp jq jr js b">Provider</code>åŒ…è£…å™¨ä¸­çš„æ›´æ–°ä¿¡æ¯(å½“ç„¶è¿˜æœ‰<code class="du jp jq jr js b">Context</code>ä¸­çš„)ä¹Ÿä¼šæ”¹å˜ã€‚</p><p id="f5d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">åªå‰©ä¸‹ä¸€ä»¶äº‹ï¼Œè¿™ä¸ªæ•…äº‹çš„ä¸»è¦ç›®çš„:ç”¨<code class="du jp jq jr js b">useContext()</code>é’©å­åˆ©ç”¨ä½ çš„<code class="du jp jq jr js b">Component</code>ä¸­çš„è¿™ä¸ª<code class="du jp jq jr js b">theme</code>ä¿¡æ¯ä¸Šä¸‹æ–‡</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="abd4" class="jx jy hi js b fi jz ka l kb kc">ğŸš€ <strong class="js hj">USE THE THEME CONTEXT IN ANY COMPONENT THAT'S WRAPPED IN THE PROVIDER</strong><br/>import { useContext } from 'react';<br/>import { ThemeContext } from "../contexts";<br/>const Component = () =&gt; {<br/>  <strong class="js hj">const theme = useContext(ThemeContext)</strong><br/>  return(<br/>    <strong class="js hj">&lt;div className={theme === 'light' ? 'light' : 'dark'}&gt;</strong><br/>      ...<br/>    <strong class="js hj">&lt;/div&gt;</strong><br/>  )<br/>}<br/>export default Component</span></pre><p id="a058" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">è¿™æ„å‘³ç€æ‚¨å¯ä»¥ç®€å•åœ°ä½¿ç”¨<code class="du jp jq jr js b">useContext()</code>é’©å­ä»<code class="du jp jq jr js b">ThemeContext</code>ä¸­è·å–ä¸»é¢˜ä¿¡æ¯æ¥è®¾è®¡<code class="du jp jq jr js b">ThemeProvider</code>ä¸­åŒ…è£…çš„ä»»ä½•ç»„ä»¶ã€‚</p><p id="4065" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">æ­å–œæ‚¨ï¼Œæ‚¨å·²ç»æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„Reactåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼Œè€Œæ— éœ€å€ŸåŠ©Reduxç­‰æ›´å¤æ‚çš„å…¨å±€çŠ¶æ€ç®¡ç†å·¥å…·ï¼</p></div><div class="ab cl ke kf gp kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hb hc hd he hf"><p id="1910" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ‘‹æˆ‘å¸Œæœ›è¿™åœ¨ä½ å¯»æ‰¾æ–°çš„å­¦ä¹ ææ–™æ—¶å¯¹ä½ æœ‰ç”¨ã€‚<strong class="ih hj">æ„Ÿè°¢æ‚¨æŠ½å‡ºæ—¶é—´é˜…è¯»æœ¬æ–‡ï¼</strong></p><p id="d66f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">å¦‚æœä½ ä»æˆ‘çš„æ–‡ç« ä¸­æ›´å¥½åœ°ç†è§£äº†ä¸€äº›ä¸œè¥¿ï¼Œâ˜•ï¸ï¼Œä½ å¯ä»¥ç»™æˆ‘ä¹°æ¯å’–å•¡æ¥æ”¯æŒæˆ‘</p><p id="29ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ğŸ“¯<strong class="ih hj">è®¢é˜…æˆ‘çš„ç”µå­é‚®ä»¶åˆ—è¡¨</strong>ï¼Œå¦‚æœä½ æƒ³åœ¨æœªæ¥è¯»åˆ°æ›´å¤šè¿™æ ·çš„æ•…äº‹ï¼Œè¯·åœ¨è¿™é‡Œæˆ–åœ¨<a class="ae kl" href="https://twitter.com/daanwords" rel="noopener ugc nofollow" target="_blank"> Twitter </a> <strong class="ih hj">ä¸Šå…³æ³¨æˆ‘ï¼</strong></p></div></div>    
</body>
</html>