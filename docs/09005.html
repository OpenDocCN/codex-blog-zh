<html>
<head>
<title>Tips to master LookML code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握LookML代码的技巧</h1>
<blockquote>原文：<a href="https://medium.com/codex/tips-to-master-lookml-code-14cc93b91ded?source=collection_archive---------4-----------------------#2022-09-18">https://medium.com/codex/tips-to-master-lookml-code-14cc93b91ded?source=collection_archive---------4-----------------------#2022-09-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f0fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jd translated"><span class="l je jf jg bm jh ji jj jk jl di">一个</span>旺所有BI工具，个人认为，<a class="ae jm" href="https://www.looker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> Looker </strong> </a>是我最喜欢的一个。由于Looker在2019年被谷歌收购，现在是GCP(谷歌云平台)的一部分，其功能越来越实用。在这篇文章中，我将分享我的最佳技巧来提高<a class="ae jm" href="https://cloud.google.com/looker/docs/what-is-lookml#lookml_is_case-sensitive" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> LookML代码</strong> </a> <strong class="ih hj"> </strong>技能。让我们打开你的开发模式，检查你是否有这些做法。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jn"><img src="../Images/9d3d641de78701aeee6169d777c29dd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9zE7ANIxZ0tk-AAP"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">查看<a class="ae jm" href="https://cloud.google.com/looker/docs/what-is-lookml#lookml_is_case-sensitive" rel="noopener ugc nofollow" target="_blank">更多关于LookML </a>和<a class="ae jm" href="https://cloud.google.com/looker/docs/lookml-terms-and-concepts" rel="noopener ugc nofollow" target="_blank"> LookML概念</a>的基本信息</figcaption></figure><h1 id="6158" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> 1。仅建立有效的维度和度量</strong></h1><p id="66ab" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">Looker是一个自助工具。我们的目标是构建内部用户(我们的同事)可以轻松使用的最佳可视化工具。有时，数据(来自数据源的表)可能很大，但是，LookML开发人员的工作是确定哪些度量(维度和度量)是重要的。</p><blockquote class="lg lh li"><p id="131b" class="if ig lj ih b ii ij ik il im in io ip lk ir is it ll iv iw ix lm iz ja jb jc hb bi translated">总是问“这个尺寸(或度量)是必要的吗？”，“这是在别的地方出现的吗？”</p></blockquote><figure class="jo jp jq jr fd js er es paragraph-image"><div class="er es ln"><img src="../Images/913f7e54db91cef4ce4edadd2ddf67c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/0*MNmAVxQwGVDZN9II"/></div></figure><p id="52b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">明智选择维度的两大优势:</strong></p><ul class=""><li id="0e28" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">节省时间:当字段在同一个浏览器中多次出现时，我从内部用户那里得到了许多令人困惑的反馈。</li><li id="43d9" class="lo lp hi ih b ii lx im ly iq lz iu ma iy mb jc lt lu lv lw bi translated"><strong class="ih hj">节约成本:</strong>人有不同的方法可以得到相同的结果。当内部用户在不同的视图中使用相同的维度时，成本会高得多。</li></ul><p id="e316" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">比如我有2个表<strong class="ih hj">快照_用户</strong>和<strong class="ih hj">用户_日常</strong>。<strong class="ih hj"> Snapshot_user </strong>描述的是最近一次(今天)所有用户的信息，而<strong class="ih hj"> user_daily </strong>描述的是每天所有用户的信息(例如:同一个用户A周一消费了20美元，周二消费了30美元，周三消费了40美元)。</p><p id="96a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，两个视图都有用户的姓名和用户的出生日期。将会发生不同的查询(假设PII不是我示例中的一个因素):</p><blockquote class="lg lh li"><p id="ba0f" class="if ig lj ih b ii ij ik il im in io ip lk ir is it ll iv iw ix lm iz ja jb jc hb bi translated">从快照用户中选择用户名、用户名</p></blockquote><p id="05b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而有人可以用<strong class="ih hj">更高的查询成本</strong>得到相同的结果</p><blockquote class="lg lh li"><p id="c954" class="if ig lj ih b ii ij ik il im in io ip lk ir is it ll iv iw ix lm iz ja jb jc hb bi translated">选择用户。用户名，用户每日。用户出生日期</p><p id="029f" class="if ig lj ih b ii ij ik il im in io ip lk ir is it ll iv iw ix lm iz ja jb jc hb bi translated">从快照_用户作为用户</p><p id="a3b8" class="if ig lj ih b ii ij ik il im in io ip lk ir is it ll iv iw ix lm iz ja jb jc hb bi translated">LEFT JOIN user_daily USING(用户标识)</p></blockquote><h1 id="97f8" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> 2。构建您的视图和模型</strong></h1><p id="1c38" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">在编写LookML代码多年之后，我一直向我的团队建议的一个技巧是，当我们构建一个大视图(比如说大于50个维度和度量)时，最好从一开始就构建您的视图。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es mc"><img src="../Images/1b20b56fa2f34be6f9bcfaf04019e0ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*it3eEq21GmigER_A7TdWNQ.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">示例:申请人视图的结构</figcaption></figure><ul class=""><li id="e434" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">当其他开发人员阅读您的代码时，更容易查看大视图中的内容。</li><li id="526b" class="lo lp hi ih b ii lx im ly iq lz iu ma iy mb jc lt lu lv lw bi translated">另一方面，开发人员也更容易在关键部分搜索特定的维度或度量。假设我只想检查<strong class="ih hj"> 03。申请人风险评估</strong>，那么它<strong class="ih hj"> </strong>只会在视图中出现两次:( 1)在视图结构的开头,( 2)在代码的开头。</li></ul><h1 id="ab9e" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> 3。遵循LookML标准，并始终有描述！</strong></h1><p id="51a8" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">和前面的建议一样，在整理好你的视图结构后，一致性和标准是非常重要的实践。就个人而言，我对所有LookML开发者有两点强烈建议:</p><ul class=""><li id="4b1b" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">对每一个维度都要有描述，并测量你的体型。了解您的数据、指标的定义和使用情形是非常重要的。即使是显而易见的名称:“applicant_id”，有时，id也会由不同的提供者返回，并且会影响实际的结果。</li></ul><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es md"><img src="../Images/634c2df7831eeb64e3be4650f6c749ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jZKttAOZ3Hh9EgkH.jpeg"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">来源:查看布鲁克林数据的LookML样本指南<a class="ae jm" href="https://github.com/brooklyn-data/co/blob/main/looker_style_guide.md#general-guidelines" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><ul class=""><li id="3bc3" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">遵循Looker的标准指南。Looker包含许多关于<a class="ae jm" href="https://github.com/brooklyn-data/co/blob/main/looker_style_guide.md#models" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">组织模型文件</strong></a><strong class="ih hj"/><a class="ae jm" href="https://github.com/brooklyn-data/co/blob/main/looker_style_guide.md#aggregate-functions" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">命名聚合</strong></a><a class="ae jm" href="https://github.com/brooklyn-data/co/blob/main/looker_style_guide.md#ordering-dimension-and-measure-parameters" rel="noopener ugc nofollow" target="_blank"><strong class="ih hj">排序参数</strong> </a>的精彩训练。我相信这对自我练习非常有用。</li></ul><h1 id="eba0" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak"> 4。同行代码审查流程</strong></h1><p id="52bb" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">为了实现上面的三个实践，我建议团队总是有一个好的<strong class="ih hj">代码审查过程</strong>。开发人员有时可能会遗漏一些东西。分析工程师团队应该总是有一份好的<strong class="ih hj">指南清单</strong>，要么参考<a class="ae jm" href="https://cloud.google.com/looker/docs/lookml-validation" rel="noopener ugc nofollow" target="_blank">旁观者指南</a>，要么参考<a class="ae jm" href="https://github.com/brooklyn-data/co/blob/main/looker_style_guide.md#general-guidelines" rel="noopener ugc nofollow" target="_blank">经验</a>。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es me"><img src="../Images/b1336af7de04838c89e262ef149160ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mq5zD3owFj6E0DHk.png"/></div></div><figcaption class="jz ka et er es kb kc bd b be z dx translated">查看更多关于<a class="ae jm" href="https://www.spectacles.dev/post/lookml-code-reviews" rel="noopener ugc nofollow" target="_blank">有影响力的LookML代码评审</a></figcaption></figure><p id="decb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我推荐一些必备的清单:</p><ul class=""><li id="968b" class="lo lp hi ih b ii ij im in iq lq iu lr iy ls jc lt lu lv lw bi translated">维度/度量的目的</li><li id="c261" class="lo lp hi ih b ii lx im ly iq lz iu ma iy mb jc lt lu lv lw bi translated">检查<a class="ae jm" href="https://cloud.google.com/looker/docs/lookml-validation" rel="noopener ugc nofollow" target="_blank"> LookML验证</a></li><li id="eabe" class="lo lp hi ih b ii lx im ly iq lz iu ma iy mb jc lt lu lv lw bi translated">SQL<a class="ae jm" href="https://github.com/brooklyn-data/co/blob/main/sql_style_guide.md#brooklyn-data-co-sql-style-guide" rel="noopener ugc nofollow" target="_blank">是如何完成的——检查连接。如果有时您的SQL过于复杂，无法定义一个维度，而该指标可以多次使用，我们应该将它提交给</a><a class="ae jm" href="https://docs.getdbt.com/guides/legacy/best-practices" rel="noopener ugc nofollow" target="_blank"> DBT </a>(该链接将推荐最佳DBT实践)</li><li id="23c3" class="lo lp hi ih b ii lx im ly iq lz iu ma iy mb jc lt lu lv lw bi translated">描述和风格</li></ul><p id="b4d4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以上是我每天构建一个好的LookML代码的个人实践。也让我知道你的建议</p></div></div>    
</body>
</html>