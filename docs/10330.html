<html>
<head>
<title>The IoT Dog Collar Charm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">物联网狗项圈护身符</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-iot-dog-collar-charm-8e98a5b4cf2f?source=collection_archive---------10-----------------------#2022-12-21">https://medium.com/codex/the-iot-dog-collar-charm-8e98a5b4cf2f?source=collection_archive---------10-----------------------#2022-12-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1472" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我过去的一次互动中，我经历了一个物联网用例，当时我觉得非常有趣，我想与世界分享结果。请记住，有些技术可能会被废弃，有些想法可能会改变，但我相信主要思想仍然有效。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/8f319ae224a1d80e8d90a30a61696f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*zWNIWryjQ1VU0WcgjjLgmA.png"/></div></figure><h1 id="8d8a" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">假设</h1><ul class=""><li id="467d" class="kj kk hi ih b ii kl im km iq kn iu ko iy kp jc kq kr ks kt bi translated">来自dog collar的所有信息都以JSON文件/有效载荷的形式发送，以提供轻松展平这些文件并使用标准化工具(API、集成等)读取它们的能力。).</li><li id="de32" class="kj kk hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">用户可以使用移动或网络应用程序输入狗的信息。</li><li id="4c4d" class="kj kk hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">Dog的信息和基于历史信息计算的见解/KPI存储在关系数据库中，供ANSI SQL功能共同使用。</li><li id="bee1" class="kj kk hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">AWS IoT Greengrass不在此架构上使用，但可用于部署、配置和管理。</li><li id="bf54" class="kj kk hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">安全细节，如加密、设备网关、身份服务和注册表，在提出的架构中没有考虑。</li><li id="c4d0" class="kj kk hi ih b ii ku im kv iq kw iu kx iy ky jc kq kr ks kt bi translated">在这个体系结构中，没有对API/ESB技术的完整描述，它旨在提供在移动/web应用程序之间存储信息和层间通信的能力。</li></ul><h1 id="a911" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">高层架构</h1><p id="ae04" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">仅使用AWS云原生技术，定义的架构假装实现了一个物联网环境，它不仅包含数据环境和可能的见解推导，还包含在应用程序和物联网部分之间传递信息的集成层。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/eb49b8378dc73003c4aba7f298cc45d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFoz0vTK-2P_WizlKT1OJg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">基于高级AWS的物联网架构</figcaption></figure><p id="d054" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当时的目的是存储由dog collar输出的所有事件，并将它们保持在其原始格式下，允许快速实时分析，然后将这些事件处理成关系格式，以存档在数据仓库中，用于KPI分析。</p><h1 id="3f55" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">端到端序列图</h1><p id="e51e" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">下面的端到端图表旨在解释各种应用程序之间的数据流。狗主人、项圈、web应用和后端、存储之间的信息流，如何处理见解并将信息输入机器学习算法。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es ll"><img src="../Images/f90f24cb24f010ffaa774261d7b83ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhn3iR0OQ6I37FXR8hRnSg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">狗项圈的端到端序列图</figcaption></figure><h1 id="efa2" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">集成规范</h1><p id="510e" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">集成规范为物联网解决方案的成功实施提供了协议的高级视图。提供关于设备网关的消息协议和交换消息的有效负载示例的视图</p><h2 id="a4a0" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">设备网关</h2><p id="04a5" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">MQTT:使用发布/订阅方法。基本上包括在向MQTT代理发布数据时包含一个主题名。然后，这些主题负责为代理路由信息，需要来自每个想要接收该主题消息的客户端的订阅。代理保证将具有匹配主题的所有消息传递给客户端。<br/> HTTP:允许设备通过POST向网关推送消息。</p><h2 id="39a7" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">证明</h2><p id="2d5b" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">因为我们计划使用MQTT，所以我应该用X.509证书来认证消息。此外，使用相互TLS身份验证来验证客户端证书。因此，当使用X.509证书时，设备网关需要使用TLS。</p><h2 id="483c" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">HTTP POST的示例</h2><h2 id="683f" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">衣领信息示例:</h2><blockquote class="ma mb mc"><p id="589a" class="if ig md ih b ii ij ik il im in io ip me ir is it mf iv iw ix mg iz ja jb jc hb bi translated">{ " timestamp ":" 2021 07 01 T07:00:00 "，<br/> "device_id": "dogcollar123 "，<br/> "temperature": 38.2，"<br/>bark _ detected ":true "<br/>movement _ detected ":true "<br/>location ":lat ":33.406601，long ": 111.9075196}}</p></blockquote><h2 id="2d11" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">所有者消息示例:</h2><blockquote class="ma mb mc"><p id="5461" class="if ig md ih b ii ij ik il im in io ip me ir is it mf iv iw ix mg iz ja jb jc hb bi translated">{ " timestamp ":" 2021 07 01 T08:00:00 "，<br/> "dog_id ": 32，<br/> "notification_id ": 2134，<br/> "user_feedback ":"正"，}</p></blockquote><h1 id="6de2" class="jl jm hi bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">数据模型</h1><p id="7a82" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">为了以正确的方式存储信息，使用非关系数据库将符合目的，这意味着所有事件将以原始格式存储，并可以使用这种结构进行查询。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mh"><img src="../Images/459f6f2b03b4359ab894c6b51c6edd83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRZTFCugb85US5MheroyeQ.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">代表性ERD模型</figcaption></figure><p id="81ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ERD数据模型是事件的关系模型的表示，它有助于促进关系模型到非关系数据模型的转换。这样，它只是表和信息之间关系的图形表示。</p><h2 id="b5cf" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">DynamoDB数据模型</h2><p id="9e40" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">为此架构选择的存储是DynamoDB。这个数据库具有处理文档的优势，并且非常适合以原始格式存储JSON文件。该数据库将充当物联网领域事件的运营数据湖。</p><p id="d743" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了合理地存储信息，上图显示了一个表模式，该模式将存储狗项圈的所有事件，并提供狗主人、狗和狗项圈之间的联系。这个数据库将以一种更加高效和实时的方式为web应用程序提供信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mi"><img src="../Images/26a2c0e772df63e67a0a9ec4451582d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivjvkVxaYh7dQZzkcGhuLw.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">DynamoDB模型—单表表示</figcaption></figure><h2 id="31fb" class="lm jm hi bd jn ln lo lp jr lq lr ls jv iq lt lu jz iu lv lw kd iy lx ly kh lz bi translated">访问模式和全局二级索引</h2><p id="14e6" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kz is it iu la iw ix iy lb ja jb jc hb bi translated">使用Dynamo时，通常会定义最常见的访问模式。这些定义有助于创建全局二级索引，从而以更高效的方式读取Dynamo中的数据。尽管实施GSI的数量有限。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es mj"><img src="../Images/457b61e358853c308279da398a22f0ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRiWP_FDT26a_JBaj0MF0A.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx translated">全局二级索引的示例</figcaption></figure><p id="02b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">重要的是，所有的技术、方法、途径和想法都是观点，不应该被认为是绝对正确的。我完全接受讨论、意见甚至头脑风暴！</p></div></div>    
</body>
</html>