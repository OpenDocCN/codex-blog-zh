<html>
<head>
<title>Dealing with Large Data Files and Bad Git Commits</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理大型数据文件和糟糕的Git提交</h1>
<blockquote>原文：<a href="https://medium.com/codex/dealing-with-large-data-files-and-bad-git-commits-67e01d92fb03?source=collection_archive---------4-----------------------#2021-02-16">https://medium.com/codex/dealing-with-large-data-files-and-bad-git-commits-67e01d92fb03?source=collection_archive---------4-----------------------#2021-02-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="776f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">又名Git壁球</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/624470aa3eef552c553eb0cebf5d873d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xUdYgL-Mls04_R79"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">弗洛里安·奥利佛在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="861b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">随着我更深入地寻找工作，我开始了一个新的数据科学项目，以拓宽我的技能组合，并更好地与我的职业目标相关联。这个项目的主要目标是利用卫星图像和并行神经网络。更具体地说，我从Kaggle检索了数据，并将对云的类型进行分类，以便更好地了解天气模式。</p><p id="101a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我已经下载了一个数据集，我意识到它比我习惯使用的要大，并且在试图把它推送到GitHub时完全卡住了！</p><p id="70ea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我发现了这个问题，并认为其他人可能会在这里找到有帮助的书面解决方案。</p><p id="a980" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="kk">发生了什么:</em></p><p id="bc54" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在连接到Kaggle API并下载了超过5GB的数据集之后，我刚刚“git commit”了对我的新repo的第一次更改。</p><p id="535b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Git推送…</p><p id="f208" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我的终端让我想到了以下内容:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="bbfc" class="kq kr hi km b fi ks kt l ku kv">remote: <strong class="km hj">error</strong>: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.</span><span id="f0e5" class="kq kr hi km b fi kw kt l ku kv">remote: <strong class="km hj">error</strong>: See http://git.io/iEPt8g for more information.</span><span id="0c9d" class="kq kr hi km b fi kw kt l ku kv">To https://github.com/oac0de/Understanding_Cloud_Formations</span><span id="032f" class="kq kr hi km b fi kw kt l ku kv">! [remote rejected] main -&gt; main (pre-receive hook declined)</span><span id="b03b" class="kq kr hi km b fi kw kt l ku kv">error: failed to push some refs to 'https://github.com/oac0de/Understanding_Cloud_Formations'</span></pre><p id="a318" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在这一点上，我记得GitHub的标准数据传输限制是一个坚定的100 MB！我受够了。实际上Git已经提交了我的修改，但是GitHub网站限制了我的使用，原因很明显，是为了节省服务器空间。</p><p id="42fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我在这里能做什么？我以为我可以删除文件，重新提交更改，然后推送，对吗？没有。我仍然收到错误消息。</p><p id="df21" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">正如我不断学习的那样，当你‘git commit’某事时，你实际上是在git stone上蚀刻你的变化，直到永远。不完全是。但是您实际上是将所有的更改和提交保存到您的git历史中。这实际上是git如此强大的版本控制软件的原因之一。多亏了可信赖的StackExchange，有了一个变通办法。</p><p id="ee14" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在git推送问题上贴上创可贴，这样你至少可以上传你的代码，删除你的大文件。</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="7996" class="kq kr hi km b fi ks kt l ku kv">git rm --cached [your_large_file_name]</span></pre><p id="2f2c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">接下来，你执行GitHub 所说的“挤压”,将你最近提交的git压缩成一个。这里我们将挤压最后两次提交，因为我已经搞砸了第二次。</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="09a4" class="kq kr hi km b fi ks kt l ku kv">git reset --soft HEAD~2</span></pre><p id="a877" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">压扁了！现在只需为组合提交输入一条消息:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="ed2f" class="kq kr hi km b fi ks kt l ku kv">git commit -m "New message for the combined commit"<br/>git push</span></pre><p id="7a9e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">瞧。我们的代码被推送到我们的远程存储库，只是没有我们的大数据文件。</p><p id="dac0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了避免将来出现这些问题，最佳做法是将数据集(如果大于100MB)实际添加到。gitignore文件。为此，如果您还没有. gitignore文件，可以从终端创建一个:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="966f" class="kq kr hi km b fi ks kt l ku kv">touch .gitignore</span></pre><p id="5f15" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后打开它。gitignore文件:</p><pre class="iy iz ja jb fd kl km kn ko aw kp bi"><span id="6fe5" class="kq kr hi km b fi ks kt l ku kv">open .gitignore</span></pre><p id="df1f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这将调出您的。gitignore在一些文本编辑器中取决于你的操作系统。GitHub 上有一个很好的<a class="ae jn" href="https://github.com/github/gitignore/blob/master/Python.gitignore" rel="noopener ugc nofollow" target="_blank">模板，用于Python项目，处理日常事务。只需将所有这些内容复制并粘贴到您打开的。gitignore文件。</a></p><p id="5dcd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您还需要为大型数据文件添加额外的行。只需包含文件的路径和文件名，就可以开始了！</p><p id="f27a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我试验和研究得越多，就越发现更好地了解Git的内部工作方式真的可以节省很多时间。但是，当未知类型的问题出现时，我们真的应该感谢无私的专业编码人员，他们为我们这些StackExchange和StackOverflow的新手贡献了专业知识。救命恩人！</p></div></div>    
</body>
</html>