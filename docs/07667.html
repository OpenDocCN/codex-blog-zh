<html>
<head>
<title>The Trading Glitch, which cost Knight Capital $440 Million</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交易故障让骑士资本损失了4.4亿美元</h1>
<blockquote>原文：<a href="https://medium.com/codex/chapter-7-the-trading-glitch-which-cost-knight-capital-440-million-f397a0241401?source=collection_archive---------13-----------------------#2022-06-21">https://medium.com/codex/chapter-7-the-trading-glitch-which-cost-knight-capital-440-million-f397a0241401?source=collection_archive---------13-----------------------#2022-06-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2a2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">软件测试从骑士资本2012年的惨败中吸取的教训—第1部分</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/571d81d6b4d404078a47e46af463afea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDDmjkw_ikYasKqV4jxAnw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">骑士资本@纽约证券交易所</figcaption></figure><p id="7595" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">八月一日</p><p id="c358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">美国东部时间上午08:01—Knight Capital的员工收到97封电子邮件，描述8号服务器禁用了一个特定的交易算法。这些电子邮件提到SMARS是一个问题。</p><blockquote class="jt ju jv"><p id="8846" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">SMARS代表Smart Market Access Routing System，它每秒能够执行数千个订单，在不到一秒的时间内比较几十个不同交易事件的价格。</p></blockquote><p id="58d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这些内部消息既不是为高优先级警报设计的，工作人员通常也不会实时查看它们。因此，Knight Capital错过了在开市前发现并解决这一问题的机会。</p><p id="31fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">美国东部时间上午9:30——美国证券交易所(NYSE &amp; Nasdaq)准时开盘，Knight Capital开始收到来自经纪自营商的大量每日订单。SMARS将接下来的工作分配给了总共8台服务器。前七个服务器正确地处理了订单。然而，发送到第8台服务器的订单有这个有缺陷的交易算法，这导致了一个小时前的警报。</p><p id="6940" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上午9点32分——8号服务器立即开始为每个传入的母订单发送大量子订单，而没有检查其他交易场所的确认执行情况。</p><blockquote class="jt ju jv"><p id="ea8a" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated"><strong class="ih hj">子订单&amp;母订单:</strong>SMARS的一个核心特点是从Knight交易平台的其他上游组件接收订单(“母”订单)，然后根据可用流动性和价格的需要，将一个或多个代表性(“子”)订单发送到下游的外部地点执行。</p></blockquote><p id="81dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">结果是灾难性的:对于8号服务器的212个带有错误代码的母订单，SMARS-router在大约45分钟内对154只股票的超过3.97亿股执行了400万次。这些交易量占Knight交易量的50%以上。</p><blockquote class="jt ju jv"><p id="6663" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">交易量——公司/私人用于日常交易的流动现金量。对于低风险，交易员建议接近安全的风险敞口为10%。</p></blockquote><p id="b4c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上午9:34——纽约证券交易所的计算机分析师注意到市场交易量是平均水平的两倍，并追踪交易量飙升到骑士资本。纽约证券交易所的主席试图给奈特公司的首席执行官乔伊斯打电话，但乔伊斯仍在家中从膝盖手术中恢复。</p><p id="621d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">纽交所随后通知了Knight的首席信息官，后者召集了该公司的顶级IT人员；大多数交易店会在算法中触发一个关闭开关，或者干脆关闭系统。但是，Knight没有记录事件响应的程序。因此，他们继续在黑暗中摸索了20分钟，下一步决定问题是8号服务器上的不同代码</p><p id="1fd7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Knight在讨论中误导性地将服务器上受损的代码恢复为旧版本，并将其重新安装在其他服务器上。事实证明，这是最糟糕的决定，因为现在所有八台服务器都激活了有缺陷的代码，并且在没有节流的情况下执行。</p><p id="b4b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">直到上午09:58，Knight工程师才确定了根本原因，并关闭了所有服务器上的SMARS然而，损害已经很严重了。154只股票的400万笔交易总计超过3.97亿股，其中80只股票的净多头头寸约为35亿美元，74只股票的净空头头寸约为31.5亿美元。</p><blockquote class="jt ju jv"><p id="d2ae" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated"><strong class="ih hj">多头&amp;空头:</strong>多头是对股票的正面押注。如果股票价格上涨，人们就会获利。空头头寸是对股票的负面押注。如果股价下跌，一方获利。</p></blockquote><p id="3d92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">高盛介入，以骑士<strong class="ih hj">4亿美元</strong>的价格收购了骑士不想要的位置——这是一个惊人的打击，但其中一家公司可能会吸收。如果Knight破产，除了Knight的股东，唯一的受害者将是高盛自己。</p><p id="0bc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">到2013年夏天，Knight Capital被其竞争对手Getco LLC收购。</p><blockquote class="jt ju jv"><p id="c5eb" class="if ig jw ih b ii ij ik il im in io ip jx ir is it jy iv iw ix jz iz ja jb jc hb bi translated">LLC——有限责任公司，是美国特有的私人有限公司形式，提供合伙企业的转嫁税模式，并保护公司提供的个人资产。</p></blockquote><p id="5005" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">是什么导致了这次惨败？下一章再查！</p><p id="dd1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jw">参考文献:</em></p><p id="cb76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ka" href="https://www.henricodolfing.com/2019/06/project-failure-case-study-knight-capital.html" rel="noopener ugc nofollow" target="_blank"><em class="jw">https://www . henrico dolfing . com/2019/06/project-failure-case-study-knight-capital . html</em></a></p></div></div>    
</body>
</html>