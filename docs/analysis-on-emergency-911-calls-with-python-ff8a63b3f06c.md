# 用 PYTHON 分析紧急事件— 911 电话

> 原文：<https://medium.com/codex/analysis-on-emergency-911-calls-with-python-ff8a63b3f06c?source=collection_archive---------25----------------------->

![](img/a21981fd754db2a459d7ae4d845bb189.png)

关于项目
众所周知，紧急情况是指无法预见或突然发生的事情，需要立即采取补救措施或行动。在某些时候，我们倾向于更多地考虑为什么会有一些紧急呼叫，这是我决定对 911 呼叫数据集进行一些分析的主要原因。

**获取数据**
对于这个项目，我将分析来自宾夕法尼亚州蒙哥马利郡[卡格尔](https://drive.google.com/file/d/1nZdt9ShDU02rRmVVjP6QVSF4D-3CgSbs/view?usp=drivesdk)的一些 911(紧急呼叫)数据。该数据包含以下字段:

lat:字符串变量，纬度

lng:字符串变量，经度 desc:字符串变量，紧急呼叫的描述

zip:字符串变量，邮政编码

标题:字符串变量，标题

时间戳:字符串变量，YYYY-MM-DD HH:MM:SS

twp:字符串变量，城镇

addr:字符串变量，地址

e:字符串变量、虚拟变量(始终为 1)

**PYTHON 库导入**
一个库，它是我们包含在 PYTHON 代码中的函数集合，在需要时调用。使用库，可以导入预先存在的函数，这将有效地扩展代码性能。对于这个项目，我将导入以下库 pandas，numpy，matplotlib，seaborn，sklearn e.t.c .然后设置%matplotlib inline，因为我使用的是 Jupiter 笔记本

![](img/640b2dec849a35b241df5d40b1ab00ee.png)

**程序**
采取了很多程序，我将逐一讨论它们。

1. ***读入-911 将数据集称为一个名为“df”的数据帧***
读入文件有几种方法。在这个项目中，我使用了熊猫图书馆。它允许您读取带有多个分隔符的文件，并使用 info()方法返回有关数据帧的基本信息。

![](img/303465c1c9a61103d9546b1ee724370f.png)

2. ***检查数据集的头部***
head()函数是熊猫库中的一个函数。它用于获取数据帧的前 n 行。这对于测试对象中是否有正确的数据类型很有用。

![](img/79b12606f20d190fa13745a4920a8840.png)

**回答一些基本问题**

1. ***拨打 911 电话的前 5 位邮编***

![](img/26ce2e73eedd5d9825eebbf22cd9f50e.png)

2.***【Twp】911 来电前 5 名乡镇***

![](img/99209da808f2e1a4ccc428d2962a858f.png)

**创建新特征**
在标题栏中，标题代码前有指定的“原因/部门”。这些是紧急医疗服务，消防和交通。我会用。使用自定义 lambda 表达式 apply()创建包含该字符串值的名为“Reason”的新列。
例如，如果“标题”列值为“EMS:背痛/受伤”,则“原因”列值为“EMS”。

![](img/9736c834ffd16b486443a72f698c997c.png)

3.基于这个新专栏的 911 报警电话最常见的原因是什么？

![](img/78cc9eb681e9c074a6b270cbbf5cb627.png)

4.现在使用 seaborn 创建一个 911 电话的原因计数图。

![](img/6964a94de33ffc5874a133e9a28594dc.png)

5.我将查看 911 电话发生的时间，但首先，让我们将时间戳列的数据类型从字符串更改为日间。

![](img/22e3326d04d410a8f1d78c36192ce529.png)

6.既然时间戳列实际上是 DateTime 对象，那么使用。apply()创建 3 个名为小时、月和星期几的新列。您将基于时间戳列创建这些列。

注意星期几是一个 0-6 的整数。使用。map()使用此字典将实际的字符串名称映射到一周中的某一天:
dmap = {0:'Mon '，1:'Tue '，2:'Wed '，3:'Thu '，4:'Fri '，5:'Sat '，6:'Sun'}

![](img/45e1f8854551c3d3a2917181f328fa6e.png)

7.我使用 seaborn 创建了一个星期几列的计数图，其色调基于原因列。

![](img/198720bfc101adac2988e5141f072394.png)

8.我使用 seaborn 创建了一个月列的计数图，其色调基于原因列。

![](img/b0afdb15f1cd736a8b7d410ed26276e0.png)

9. ***你有没有注意到剧情有些奇怪？***
你应该已经注意到它丢失了几个月，让我们看看我们是否可以通过以另一种方式绘制信息来填充这些信息，可能是一个简单的填充丢失月份的线图，为了做到这一点，我们需要做一些关于熊猫的工作。
现在创建一个名为 byMonth 的 gropuby 对象，在这里您按照 Month 列对 DataFrame 进行分组，并使用 count()方法进行聚合。对这个返回的数据帧使用 head()方法。

![](img/6b96e8b01122be5b093bb26ef26c5331.png)

10.现在在数据框上画一个简单的图表，显示每月的通话次数。可能是任何列。

![](img/5075ad0436b058fe04bd83af9755de4b.png)

11.我使用 seaborn 的 lmplot()对每月的通话次数进行了线性拟合。请记住，您可能需要将索引重置为列。

![](img/1d53f36f64aecf7f4ac23bf457130f7f.png)

12.创建一个名为“Date”的新列，其中包含时间戳列中的日期。您需要将 apply 与。date()方法。

![](img/b3cbface8669cbd2211d5dd59e76d4a3.png)

现在用 count()聚合 groupby 这个日期列，并创建一个 911 呼叫计数图。

![](img/51de6934ff2d706979605f0165464ceb.png)

13.现在，我将重新创建上述三个独立的图，每个图代表拨打 911 电话的一个原因。

![](img/acf91e85aab2e1223bd068e0735c988c.png)![](img/d3662f11e57798f2e8bcd815b17e2070.png)![](img/5cae0726c0eaf214bbe19376dfc83396.png)

现在让我们继续用 seaborn 和我们的数据创建热图。我们首先需要重构数据帧，使列变成小时，索引变成星期几。有很多方法可以做到这一点，但我建议尝试将 groupby 与 unstack 方法结合使用。

![](img/82acbf48054231523b068e67371ed565.png)

14.然后，我使用这个新的数据框架创建了一个热图。

![](img/32b825bd3e5480b8283a9c06117fda2f.png)

15.我还重复了上面的绘图和操作，得到了一个以月份为列的数据帧。

![](img/42f4b3213d162676f4cb261e1199c8c6.png)![](img/fb9c57b46444d0a838792c85bb4fd618.png)

**结论**

从目前的分析中，我已经能够发现一些真知灼见，包括:
。Lower Merion 是 911 报警电话最多的城镇，大约有 8443 个报警电话

EMS 是拨打 911 的常见原因，其次是交通原因

在一周的几天中，注意到周日因交通原因拨打 911 的情况较少，而周二因同样原因拨打 911 的情况最多。在一周的所有日子里，911 呼叫最常见的原因是 EMS，而最少的原因是火灾。

就交通原因而言，一月份的 911 电话最多，而十二月份最少。

就火灾原因而言，7 月份拨打的 911 电话最多，12 月份最少。

就 EMS 原因而言，一月份的 911 电话最多，而十二月份最少。

从对数据进行的分析来看，12 月因各种原因拨打的 911 电话最少。因此，这意味着年底无论什么原因打来的 911 电话都会减少。

感谢您浏览我的项目，非常感谢您的意见和建议，您可以在评论环节留下您的意见，直接给我发电子邮件[ [此处](http://usangajonah@gmail.com) ]或通过下面我的其他社交媒体平台联系我。

[领英](https://www.linkedin.com/in/jonahusanga)

[推特](https://twitter.com/Jobenofficial?t=F06epko9lD5L8p3-VkkT9w&s=09)

[Github](https://github.com/Usangajonah)

[数据集](https://drive.google.com/file/d/1nZdt9ShDU02rRmVVjP6QVSF4D-3CgSbs/view?usp=drivesdk)

[完整代码](https://github.com/Usangajonah/ANALYSIS-ON-EMERGENCY-911-CALLS/blob/main/Analysis%20on%20911%20calls%20.ipynb)