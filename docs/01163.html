<html>
<head>
<title>GnuPG Encryption Cheat Sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GnuPG加密备忘单</h1>
<blockquote>原文：<a href="https://medium.com/codex/gnupg-encryption-cheat-sheet-75efcac33b63?source=collection_archive---------2-----------------------#2021-04-08">https://medium.com/codex/gnupg-encryption-cheat-sheet-75efcac33b63?source=collection_archive---------2-----------------------#2021-04-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d1884716693527554d94724eb4c7c4a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GE0KXc2ii-Ee1lrJ_oganw.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片作者<a class="ae iu" href="https://pixabay.com/ru/users/mabelamber-1377835/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1600617" rel="noopener ugc nofollow" target="_blank">👀梅布尔·安珀，她将有一天从<a class="ae iu" href="https://pixabay.com/ru/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=1600617" rel="noopener ugc nofollow" target="_blank">变成</a>的</a></figcaption></figure><p id="eff2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">GnuPG(gpg)是一个很棒的工具，通常在Linux和Mac上都可以使用。它可用于<strong class="ix hj">生成加密和签名密钥，并使用它们来加密和解密您的敏感数据</strong>。这里有一个基本使用场景的快速备忘单。</p><h1 id="8cb9" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">生成新密钥</h1><p id="c937" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">生成新的gpg密钥:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="95d7" class="lf ju hi lb b fi lg lh l li lj">gpg --full-generate-key</span></pre><p id="46da" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">该实用程序会询问一些问题，对于大多数问题，缺省值是合适的:</p><ul class=""><li id="02a2" class="lk ll hi ix b iy iz jc jd jg lm jk ln jo lo js lp lq lr ls bi translated">你想要什么样的钥匙？(RSA和RSA)</li><li id="531f" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">你想要什么尺寸的钥匙？(3072)</li><li id="e62e" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">密钥的有效期应该有多长？(密钥不会过期)</li><li id="1769" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">实名？(输入名称以识别密钥)</li><li id="bc65" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">邮箱地址？(输入您希望与密钥相关联的电子邮件地址)</li><li id="c77d" class="lk ll hi ix b iy lt jc lu jg lv jk lw jo lx js lp lq lr ls bi translated">保护密钥的密码。</li></ul><p id="83af" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">确保您记住了密码并将其存储在安全的地方</strong>，否则您将无法访问密钥，从而无法访问加密文件。下面提供了一个生成输出的示例。</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="eacb" class="lf ju hi lb b fi lg lh l li lj">$ gpg --full-generate-key<br/>gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc.<br/>This is free software: you are free to change and redistribute it.<br/>There is NO WARRANTY, to the extent permitted by law.</span><span id="0004" class="lf ju hi lb b fi ly lh l li lj">Please select what kind of key you want:<br/>   (1) RSA and RSA (default)<br/>   (2) DSA and Elgamal<br/>   (3) DSA (sign only)<br/>   (4) RSA (sign only)<br/>  (14) Existing key from card<br/>Your selection? 1</span><span id="4c75" class="lf ju hi lb b fi ly lh l li lj">RSA keys may be between 1024 and 4096 bits long.<br/>What keysize do you want? (3072) 4096<br/>Requested keysize is 4096 bits</span><span id="9966" class="lf ju hi lb b fi ly lh l li lj">Please specify how long the key should be valid.<br/>         0 = key does not expire<br/>      &lt;n&gt;  = key expires in n days<br/>      &lt;n&gt;w = key expires in n weeks<br/>      &lt;n&gt;m = key expires in n months<br/>      &lt;n&gt;y = key expires in n years<br/>Key is valid for? (0) 0<br/>Key does not expire at all<br/>Is this correct? (y/N) y</span><span id="432f" class="lf ju hi lb b fi ly lh l li lj">GnuPG needs to construct a user ID to identify your key.</span><span id="49a4" class="lf ju hi lb b fi ly lh l li lj">Real name: forketyfork<br/>Email address: <a class="ae iu" href="mailto:forketyfork@example.com" rel="noopener ugc nofollow" target="_blank">forketyfork@example.com</a><br/>Comment: <br/>You selected this USER-ID:<br/>    "forketyfork &lt;<a class="ae iu" href="mailto:forketyfork@example.com" rel="noopener ugc nofollow" target="_blank">forketyfork@example.com</a>&gt;"</span><span id="a19a" class="lf ju hi lb b fi ly lh l li lj">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o</span><span id="1e45" class="lf ju hi lb b fi ly lh l li lj">We need to generate a lot of random bytes. It is a good idea to perform<br/>some other action (type on the keyboard, move the mouse, utilize the<br/>disks) during the prime generation; this gives the random number<br/>generator a better chance to gain enough entropy.</span><span id="fe81" class="lf ju hi lb b fi ly lh l li lj">gpg: key 2338E8E84DC0810C marked as ultimately trusted<br/>gpg: revocation certificate stored as '/home/user/.gnupg/openpgp-revocs.d/ABCDEF0123456789ABCDEF0123456789ABCDEF01.rev'<br/>public and secret key created and signed.</span><span id="f0c7" class="lf ju hi lb b fi ly lh l li lj">pub   rsa4096 2021-04-08 [SC]<br/>      ABCDEF0123456789ABCDEF0123456789ABCDEF01<br/>uid                      forketyfork &lt;<a class="ae iu" href="mailto:forketyfork@example.com" rel="noopener ugc nofollow" target="_blank">forketyfork@example.com</a>&gt;<br/>sub   rsa4096 2021-04-08 [E]</span></pre><p id="a2b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">gpg文件，包括密钥，位于<code class="du lz ma mb lb b">~/.gnupg</code>目录中。</p><p id="829f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是如何<strong class="ix hj">列出现有的键</strong>:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="cfe9" class="lf ju hi lb b fi lg lh l li lj">$ gpg --list-secret-keys<br/>/home/user/.gnupg/pubring.kbx<br/>-------------------------------------------------------<br/>sec   rsa2048 2021-04-06 [SCEA]<br/>      ABCDEF0123456789ABCDEF0123456789ABCDEF01<br/>uid           [ultimate] forketyfork &lt;<a class="ae iu" href="mailto:forketyfork@example.com" rel="noopener ugc nofollow" target="_blank">forketyfork@example.com</a>&gt;<br/>ssb   rsa2048 2021-04-06 [SEA]</span></pre><p id="7cc3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">注意这条线<code class="du lz ma mb lb b">[ultimate] forketyfork &lt;forketyfork@example.com&gt;</code>。在这里，<code class="du lz ma mb lb b">forketyfork</code>是关键名称。它的前面是<code class="du lz ma mb lb b">[ultimate]</code>信任级别，后面是与密钥相关的电子邮件。</p><h1 id="d5e3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">备份和导入密钥</h1><p id="7e1b" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">你可能想把关键文件转移到另一台机器上。以下是如何创建密钥的安全备份:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="4442" class="lf ju hi lb b fi lg lh l li lj">gpg --output backupkeys.pgp --armor --export-secret-keys --export-options export-backup "forketyfork"</span></pre><p id="63a4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">文件<code class="du lz ma mb lb b">backupkeys.pgp</code>将被创建。你应该把它存放在一个安全的地方。选项<code class="du lz ma mb lb b">--armor</code>允许创建一个文本文件，而不是二进制文件，所以这样的文件应该是任何文本编辑器可读的。</p><p id="206e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">你可以用这个备份文件<strong class="ix hj">导入另一台机器</strong>上的密钥。以下是如何从备份中导入密钥:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="2e7c" class="lf ju hi lb b fi lg lh l li lj">gpg --import backupkeys.pgp</span></pre><p id="fdfb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当您列出密钥时，您会看到新导入的密钥的信任级别是<code class="du lz ma mb lb b">[unknown]</code>:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="e986" class="lf ju hi lb b fi lg lh l li lj">$ gpg --list-keys<br/>/home/user/.gnupg/pubring.kbx<br/>-------------------------------------------------------</span><span id="8be9" class="lf ju hi lb b fi ly lh l li lj">pub   rsa4096 2021-04-08 [SC]<br/>      ABCDEF0123456789ABCDEF0123456789ABCDEF01<br/>uid           [unknown] forketyfork &lt;<a class="ae iu" href="mailto:forketyfork@example.com" rel="noopener ugc nofollow" target="_blank">forketyfork@example.com</a>&gt;<br/>sub   rsa4096 2021-04-08 [E]</span></pre><p id="ad4e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，您还需要<strong class="ix hj">为导入的密钥</strong>设置信任级别——对于您自己的密钥，您可以在被询问时通过选择“我最终信任”将其设置为<code class="du lz ma mb lb b">ultimate</code>:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="fa03" class="lf ju hi lb b fi lg lh l li lj">gpg --edit-key "forketyfork"<br/>gpg&gt; trust<br/>gpg&gt; save</span></pre><p id="f54a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在信任级别应该是<code class="du lz ma mb lb b">[ultimate]</code>:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="0cfb" class="lf ju hi lb b fi lg lh l li lj">$ gpg --list-keys<br/>/home/user/.gnupg/pubring.kbx<br/>-------------------------------------------------------</span><span id="a8fb" class="lf ju hi lb b fi ly lh l li lj">pub   rsa4096 2021-04-08 [SC]<br/>      ABCDEF0123456789ABCDEF0123456789ABCDEF01<br/>uid           [ultimate] forketyfork &lt;<a class="ae iu" href="mailto:forketyfork@example.com" rel="noopener ugc nofollow" target="_blank">forketyfork@example.com</a>&gt;<br/>sub   rsa4096 2021-04-08 [E]</span></pre><h1 id="8586" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">加密和解密文件</h1><p id="10df" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><strong class="ix hj">加密和签名</strong>一个文件<code class="du lz ma mb lb b">filename</code>并将结果存储在<code class="du lz ma mb lb b">filename.gpg</code>中就像:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="7277" class="lf ju hi lb b fi lg lh l li lj">gpg --encrypt --sign --recipient "forketyfork" --output filename.gpg filename</span></pre><p id="4dc2" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者更简短的版本:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="dcc7" class="lf ju hi lb b fi lg lh l li lj">gpg -esr "forketyfork" -o filename.gpg filename</span></pre><p id="6117" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">解密</strong>文件<code class="du lz ma mb lb b">filename.gpg</code>到<code class="du lz ma mb lb b">filename</code>:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="1ad3" class="lf ju hi lb b fi lg lh l li lj">gpg --decrypt --output filename filename.gpg</span></pre><p id="7698" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">或者更简短的版本:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="5b4b" class="lf ju hi lb b fi lg lh l li lj">gpg -do filename filename.gpg</span></pre><p id="4faa" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">归档文件或整个目录</strong>，签名和加密，作为一行程序:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="6ed6" class="lf ju hi lb b fi lg lh l li lj">tar cz directory | gpg -esr "forketyfork" directory.tar.gz.gpg</span></pre></div></div>    
</body>
</html>