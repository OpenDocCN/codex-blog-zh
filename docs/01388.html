<html>
<head>
<title>Introduction to Apache Airflow: get started in 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Airflow简介:5分钟内开始</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-apache-airflow-get-started-in-5-minutes-3c9e24f12888?source=collection_archive---------6-----------------------#2021-04-23">https://medium.com/codex/introduction-to-apache-airflow-get-started-in-5-minutes-3c9e24f12888?source=collection_archive---------6-----------------------#2021-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ee8c36f436c6d048ce30a93576d10705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3-UWmeWA8C-0LnyDJjd3oA.png"/></div></div></figure><p id="ef4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您从事大数据工作，您很可能听说过Apache Airflow。它始于2014年Airbnb的一个开源项目，旨在帮助该公司处理其批量数据管道。从那时起，它已经成为数据工程领域最受欢迎的开源工作流管理平台之一，接受来自Lyft、沃尔玛和彭博等组织的公共贡献。</p><p id="db11" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Apache Airflow是用Python编写的，这实现了灵活性和健壮性。其功能强大、装备精良的用户界面简化了工作流管理任务，如跟踪作业和配置平台。由于它依赖代码来定义其工作流程，用户可以编写他们希望在流程的每一步执行的代码。Apache Airflow不会对您如何安排工作流施加限制，从而提供非常可定制和令人满意的体验。</p><p id="e941" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">成千上万的公司使用Apache Airflow，而且这个数字还在继续增长。今天，我们将探索这一流行工具的基础知识。我们还将讨论您可以开始的第一步。</p><p id="f091" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">我们将介绍:</strong></p><ul class=""><li id="de12" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">什么是阿帕奇气流？</li><li id="b6c1" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">为什么要用阿帕奇气流？</li><li id="a6e7" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">阿帕奇气流的基本原理</li><li id="5d1f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">阿帕奇气流是如何工作的？</li><li id="ea7b" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用Apache Airflow的第一步</li></ul><h1 id="7fc7" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是阿帕奇气流？</h1><p id="8e6c" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">Apache Airflow是一个<strong class="is hj">健壮的调度器</strong>，用于以编程方式创作、调度和监控工作流。它旨在处理和编排复杂的数据管道。最初开发它是为了解决与长期cron任务和大量脚本相对应的问题，但它已经发展成为市场上最强大的数据管道平台之一。</p><p id="6980" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以将气流描述为定义、执行和监控工作流的<strong class="is hj">平台</strong>。我们可以将<em class="lf">工作流</em>定义为你为实现特定目标而采取的任何一系列步骤。成长中的大数据团队面临的一个常见问题是，在端到端工作流中整合相关作业的能力有限。在Airflow之前，有Oozie，但它有许多限制，但Airflow在复杂的工作流方面已经超过了它。</p><p id="ce5d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Airflow也是一个<strong class="is hj">代码优先的平台</strong>，其设计理念是数据管道最好用代码来表达。它是可扩展的，有可用的插件，允许与许多常见的外部系统进行交互，如果你愿意，还可以使用这个平台来创建自己的平台。它能够每天运行数千个不同的任务，简化工作流管理。</p><p id="c324" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">气流用于很多行业:</strong></p><ul class=""><li id="24a1" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">大数据</li><li id="5147" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">机器学习</li><li id="7382" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">计算机软件</li><li id="f3ca" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">金融服务</li><li id="30ec" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">信息技术服务</li><li id="6724" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">银行业务</li><li id="f218" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">等等。</li></ul><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lg"><img src="../Images/8065118f21c3debd2366e1315d2b75b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a_0-pMut7vMd7qPWr_RRsg.png"/></div></div></figure><h1 id="aeb2" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">阿帕奇气流有什么不同？</h1><p id="9786" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">下面列出了Airflow和其他工作流管理平台之间的一些差异。</p><ul class=""><li id="3928" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">有向无环图(Dag)是用Python写的，学习曲线平滑，比Oozie用的Java应用更广泛。</li><li id="a6be" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">有一个很大的社区为Airflow做出了贡献，这使得为主要服务和云提供商找到集成解决方案变得很容易。</li><li id="82fd" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">Airflow功能多样，富有表现力，专为创建复杂的工作流程而打造。它提供了关于工作流的高级指标。</li><li id="e68f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">与其他工作流管理平台相比，Airflow拥有丰富的API和直观的用户界面。</li><li id="d564" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">它对Jinja模板的使用允许引用与DAG运行日期相对应的文件名等用例。</li><li id="82e7" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">有托管气流云服务，比如Google Composer和天文学家. io。</li></ul><h1 id="1ed9" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">为什么要用阿帕奇气流？</h1><p id="b53e" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在这一节中，我们将看看气流的一些优点和缺点，以及一些值得注意的用例。</p><p id="02d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">优点:</strong></p><ul class=""><li id="2f8c" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">开源:</strong>你可以下载Airflow并立即开始使用，还可以与社区中的同行一起工作。</li><li id="bf68" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">与云的集成:</strong>气流在云环境中运行良好，给你很多选择。</li><li id="4501" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">可伸缩:</strong>气流上下高度可伸缩。它可以部署在单台服务器上，也可以扩展到具有大量节点的大型部署。</li><li id="d4d4" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">灵活且可定制:</strong> Airflow被构建为与大多数软件开发环境的标准架构一起工作，但是它的灵活性允许许多定制机会。</li><li id="8006" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">监控能力:</strong>气流支持多种监控方式。例如，您可以从用户界面查看任务的状态。</li><li id="a825" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">代码优先平台:</strong>这种对代码的依赖让你可以自由地编写你想在流水线的每一步执行的代码。</li><li id="3e60" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">社区:</strong> Airflow庞大而活跃的社区有助于扩展信息，并提供与同行交流的机会。</li></ul><p id="b92b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">缺点:</strong></p><ul class=""><li id="890c" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">对Python的依赖:</strong>虽然许多人认为Airflow如此依赖Python代码是件好事，但那些没有多少Python工作经验的人可能会有一个更陡峭的学习曲线。</li><li id="562e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">故障:</strong>虽然气流通常是可靠的，但像任何产品一样，也会有故障。</li></ul><p id="97a6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">使用案例</strong></p><p id="3895" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Airflow可以用于几乎所有的批量数据管道，有许多不同的记录在案的用例，最常见的是大数据相关项目。以下是Airflow的Github资源库中列出的一些用例示例:</p><ul class=""><li id="d286" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">使用Google BigQuery的气流来驱动Data Studio仪表板</li><li id="e927" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用气流帮助构建和治理AWS上的数据湖</li><li id="df84" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">利用气流解决生产升级问题，同时最大限度地减少停机时间</li></ul><h1 id="06c7" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">阿帕奇气流的基本原理</h1><p id="9035" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">现在，我们已经讨论了气流的基础知识以及优势和使用案例，让我们深入了解这一强大平台的基础知识。</p><h1 id="2a13" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">有向无环图</h1><p id="7cca" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">工作流是使用有向无环图(Dag)定义的，它由要执行的任务及其连接的依赖关系组成。每个DAG <strong class="is hj">代表一组您想要运行的任务</strong>，它们在Apache Airflow的用户界面中显示任务之间的关系。让我们来分解首字母缩写词:</p><ul class=""><li id="3f7f" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">定向:</strong>如果您有多个具有相关性的任务，每个任务至少需要一个指定的上游或下游任务。</li><li id="7954" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">非循环:</strong>任务不允许产生自引用的数据。这避免了产生无限循环的可能性。</li><li id="9bae" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">图:</strong>任务是一个逻辑结构，具有清晰定义的流程和与其他任务的关系。例如，我们可以使用DAG来表示三个任务之间的关系:X、Y和Z。我们可以说:“只有在X执行之后才执行Y，但是Z可以在任何时候独立执行。”我们可以定义额外的约束，比如失败任务的重试次数和开始任务的时间。</li></ul><blockquote class="ll lm ln"><p id="a422" class="iq ir lf is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated"><strong class="is hj"> <em class="hi">注意:</em></strong><em class="hi">DAG定义了如何执行任务，但没有定义特定的任务做什么。</em></p></blockquote><p id="cf07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以通过实例化<code class="du lr ls lt lu b">airflow.models.dag.DAG</code>的对象来指定DAG，如下例所示。DAG将在web服务器的UI中显示为“Example1 ”,并将运行一次。</p><pre class="lh li lj lk fd lv lu lw lx aw ly bi"><span id="823a" class="lz kd hi lu b fi ma mb l mc md">dag = DAG('Example1',</span><span id="4ded" class="lz kd hi lu b fi me mb l mc md">          schedule_interval='@once',</span><span id="f098" class="lz kd hi lu b fi me mb l mc md">          start_date=days_ago(1),)</span></pre><h1 id="b570" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">DAG运行</h1><p id="2931" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated"><strong class="is hj">当一个DAG被执行时，它被称为<em class="lf"> DAG运行</em> </strong>。假设您计划每小时运行一次DAG。DAG每个实例化建立一个DAG运行。可以有多个DAG运行连接到同时运行的DAG。</p><h1 id="58b8" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">任务</h1><p id="39cf" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">任务是操作符的实例，它们的复杂性各不相同。您可以将它们想象成由DAG中的节点表示的工作单元。他们<strong class="is hj">描绘了在你工作流程的每一步所做的工作</strong>，他们所描绘的实际工作是由操作员定义的。</p><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mf"><img src="../Images/9b72fcadb08b30f04803c33a61f20c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*24uu9KQ1qYKAMsdIfKbR9g.png"/></div></div></figure><h1 id="57d6" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">经营者</h1><p id="abc7" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">Dag定义工作流程，<strong class="is hj">操作员定义工作</strong>。操作符就像执行特定任务的模板或类。所有操作符都源于<code class="du lr ls lt lu b">BaseOperator</code>。许多常规任务都有操作符，例如:</p><ul class=""><li id="af07" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">PythonOperator</code></li><li id="71d6" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">MySqlOperator</code></li><li id="bbe9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">EmailOperator</code></li><li id="3b48" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">BashOperator</code></li></ul><p id="99af" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些操作符用于指定要在Python、MySQL、email或bash中执行的操作。</p><p id="908a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有三种主要类型的操作符:</p><ol class=""><li id="7e2b" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn mg ju jv jw bi translated">执行操作或请求不同系统执行操作的操作员</li><li id="4c39" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn mg ju jv jw bi translated">将数据从一个系统转移到另一个系统的操作员</li><li id="b27a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn mg ju jv jw bi translated">在满足特定条件之前一直运行的运算符</li></ol><h1 id="df35" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">钩住</h1><p id="dd1a" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">挂钩允许气流<strong class="is hj">与第三方系统</strong>连接。使用钩子，可以连接到外部数据库和API，比如MySQL、Hive、GCS等等。他们就像运营商的积木。钩子中不包含任何安全信息。它存储在Airflow的加密元数据数据库中。</p><blockquote class="ll lm ln"><p id="62a2" class="iq ir lf is b it iu iv iw ix iy iz ja lo jc jd je lp jg jh ji lq jk jl jm jn hb bi translated"><strong class="is hj"> <em class="hi">注:</em> </strong> <em class="hi"> Apache Airflow有社区维护的包，包括核心的</em> <code class="du lr ls lt lu b"><em class="hi">operators</em></code> <em class="hi">和</em> <code class="du lr ls lt lu b"><em class="hi">hooks</em></code> <em class="hi">用于Google和Amazon等服务。这些可以直接安装在您的气流环境中。</em></p></blockquote><h1 id="e033" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">关系</h1><p id="fd70" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">Airflow在定义任务之间的复杂关系方面超过了。假设我们想要指定任务<code class="du lr ls lt lu b">t1</code>在任务<code class="du lr ls lt lu b">t2</code>之前执行。我们可以用四种不同的陈述来定义这种确切的关系:</p><pre class="lh li lj lk fd lv lu lw lx aw ly bi"><span id="db00" class="lz kd hi lu b fi ma mb l mc md">1. t2.set_upstream(t1)</span><span id="d741" class="lz kd hi lu b fi me mb l mc md">2. t1.set_downstream(t2)</span><span id="131d" class="lz kd hi lu b fi me mb l mc md">3. t1 &gt;&gt; t2</span><span id="223d" class="lz kd hi lu b fi me mb l mc md">4. t2 &lt;&lt; t1</span></pre><h1 id="c6c8" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">阿帕奇气流是如何工作的？</h1><figure class="lh li lj lk fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/90d13cb7896985feddfad47cc4127350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nGt96_U37FzJdW8tCqBw0Q.png"/></div></div></figure><p id="6f9d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个健壮且可扩展的工作流调度平台由四个主要组件组成:</p><ol class=""><li id="6be0" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn mg ju jv jw bi translated"><strong class="is hj">调度器:</strong>调度器监控所有Dag及其相关任务。当满足任务的相关性时，调度程序将启动该任务。它定期检查要启动的活动任务。</li><li id="eb0a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn mg ju jv jw bi translated"><strong class="is hj"> Web服务器:</strong>Web服务器是Airflow的用户界面。它显示作业的状态，并允许用户与数据库进行交互，并从远程文件存储中读取日志文件，如S3、谷歌云存储、微软Azure blobs等。</li><li id="6c13" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn mg ju jv jw bi translated"><strong class="is hj">数据库:</strong>Dag及其相关任务的状态保存在数据库中，以确保调度记住元数据信息。Airflow使用SQLAlchemy和对象关系映射(ORM)来连接元数据数据库。调度器检查所有Dag并存储相关信息，如调度间隔、每次运行的统计数据和任务实例。</li><li id="d716" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn mg ju jv jw bi translated">执行者:执行者决定如何完成工作。不同的用例有不同类型的执行器。</li></ol><p id="77c7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">遗嘱执行人示例:</p><ul class=""><li id="d2a1" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">SequentialExecutor</code>:这个执行程序可以在任何给定的时间运行单个任务。它不能并行运行任务。这在测试或调试情况下很有帮助。</li><li id="ac19" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">LocalExecutor</code>:该执行器支持并行和超线程。它非常适合在本地机器或单个节点上运行气流。</li><li id="6ec3" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">CeleryExecutor</code>:这个执行器是运行分布式气流集群的首选方式。</li><li id="d03d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><code class="du lr ls lt lu b">KubernetesExecutor</code>:这个执行器调用Kubernetes API为每个要运行的任务实例创建临时pod。</li></ul><p id="3907" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lf">那么，气流是如何工作的呢？</em></p><p id="c047" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">气流在某个时间段检查背景中的所有Dag。该周期使用<code class="du lr ls lt lu b">processor_poll_interval</code>配置进行设置，等于一秒。检查DAG文件后，将根据计划参数运行DAG。为需要执行的任务实例化任务实例，并在元数据数据库中将其状态设置为<code class="du lr ls lt lu b">SCHEDULED</code>。</p><p id="4aa5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">调度查询数据库，检索处于<code class="du lr ls lt lu b">SCHEDULED</code>状态的任务，并将它们分发给执行器。然后，任务的状态变为<code class="du lr ls lt lu b">QUEUED</code>。那些排队的任务由执行它们的工作者从队列中取出。当这种情况发生时，任务状态变为<code class="du lr ls lt lu b">RUNNING</code>。</p><p id="01f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当一个任务完成时，worker会将其标记为<em class="lf">失败</em>或<em class="lf">完成</em>，然后调度器在元数据数据库中更新最终状态。</p><h1 id="6bda" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用Apache Airflow的第一步</h1><p id="6c1c" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">现在，您已经了解了Apache Airflow的基础知识，可以开始了！学习这个工具的一个很好的方法是用它来构建一些东西。下载Airflow后，你可以<strong class="is hj">设计自己的项目或者在线贡献给一个开源项目</strong>。</p><p id="60d4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一些有趣的开源项目:</p><ul class=""><li id="4204" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">允许您在浏览器中编辑Dag的插件</li><li id="0a8d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">Docker阿帕奇气流</li><li id="ac41" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">从YAML配置文件动态生成Dag</li><li id="d0d2" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">更多</li></ul><p id="6619" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于气流还有很多东西要学。接下来推荐的主题包括:</p><ul class=""><li id="a52c" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">子标签</li><li id="cc52" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">SLA</li><li id="88d4" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">气流传感器</li></ul><p id="7fac" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lf">快乐学习！</em></p></div></div>    
</body>
</html>