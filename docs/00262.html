<html>
<head>
<title>How to Build a Modern Data Lake with MinIO</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用MinIO构建现代数据湖</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-build-a-modern-data-lake-with-minio-db0455eec053?source=collection_archive---------2-----------------------#2021-01-10">https://medium.com/codex/how-to-build-a-modern-data-lake-with-minio-db0455eec053?source=collection_archive---------2-----------------------#2021-01-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="9df4" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="https://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><p id="610e" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">在本文中，重点是仅使用开源技术构建一个现代数据湖。我将一步一步地演示我们如何利用S3兼容的对象存储(<a class="ae jm" href="https://min.io/" rel="noopener ugc nofollow" target="_blank"> MinIO </a>)和分布式SQL查询引擎(<a class="ae jm" href="https://trino.io/" rel="noopener ugc nofollow" target="_blank"> Trino </a>)来实现这一点。数据工程师和开发人员可以使用这种设置进行开发。我在这里讨论的方法也可以扩展到在您组织的分布式生产环境中部署。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es jn"><img src="../Images/48ae57361d7f24cc35cdba4865f03cdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x34kpls1wPa8kHVmR2L77Q.jpeg"/></div></div></figure><h1 id="e382" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">先决条件</h1><ol class=""><li id="e025" class="kx ky hi iq b ir kz iv la iz lb jd lc jh ld jl le lf lg lh bi translated">Linux操作系统(64位)</li><li id="8281" class="kx ky hi iq b ir li iv lj iz lk jd ll jh lm jl le lf lg lh bi translated">Python 2.6.x、2.7.x或3.x</li><li id="daf6" class="kx ky hi iq b ir li iv lj iz lk jd ll jh lm jl le lf lg lh bi translated">爪哇JDK</li></ol><h1 id="d8c1" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤1:下载MinIO和MinIO客户端</h1><p id="5a6f" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">让我们使用<strong class="iq hs"> wget </strong>从MinIO下载可执行文件，并使用以下命令使这些文件可执行。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="9ea9" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ wget</strong> <a class="ae jm" href="https://dl.min.io/server/minio/release/linux-amd64/minio" rel="noopener ugc nofollow" target="_blank">https<strong class="lr hs">://</strong>dl.min.io<strong class="lr hs">/</strong>server<strong class="lr hs">/</strong>minio<strong class="lr hs">/</strong>release<strong class="lr hs">/</strong>linux-amd64<strong class="lr hs">/</strong>minio</a><br/><strong class="lr hs">$ chmod</strong> <strong class="lr hs">+x</strong> minio<strong class="lr hs"><br/>$ wget</strong> <a class="ae jm" href="https://dl.min.io/client/mc/release/linux-amd64/mc" rel="noopener ugc nofollow" target="_blank">https<strong class="lr hs">://</strong>dl.min.io<strong class="lr hs">/</strong>client<strong class="lr hs">/</strong>mc<strong class="lr hs">/</strong>release<strong class="lr hs">/</strong>linux-amd64<strong class="lr hs">/</strong>mc</a><br/>$ <strong class="lr hs">chmod</strong> <strong class="lr hs">+x</strong> mc</span></pre><h1 id="0ee7" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤2:创建存储并启动MinIO服务器</h1><p id="32b5" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">为了让MinIO工作，需要一个本地目录来存储数据。让我们在本地文件系统中创建一个目录，并启动指向该本地目录的MinIO服务器。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="8e97" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ mkdir</strong> minio_storage<strong class="lr hs"><br/>$ ./minio server</strong> /home/demo/minio_storage</span></pre><p id="9f16" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">一旦执行了上面的命令，您应该会在终端中看到如下所示的输出。请记下端点IP地址、AccessKey和SecretKey，以便通过web浏览器访问MinIO。让我们让这个终端窗口保持打开，这样MinIO服务器就可以继续运行，我们可以在剩下的步骤中使用它。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es ma"><img src="../Images/a2980a76efad33fbd14bef8bfaf5dcd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJGuLPyCXOFz_l-spEokmA.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">MinIO服务器终端输出</figcaption></figure><h1 id="45b7" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤3:访问Web用户界面</h1><p id="6f84" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">您应该能够使用上一步中的端点IP地址访问MinIO Web UI。这证实了我们的MinIO实例已经启动并正在运行。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es mf"><img src="../Images/3213cc3dbbada9bfbce2ee4da3744da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M69BYlKKfsS-NDe2RgF_eg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">MinIO Web UI登录页面</figcaption></figure><p id="d032" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">一旦您在登录页面提交了您的访问密钥和秘密密钥，您应该可以访问MinIO主页，在这里您可以创建新的存储桶和上传新的文件。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es mg"><img src="../Images/04a5789eb02775f9f1cbf4646018994e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VjE7ZTNPyB3drUnuHu-uDQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx translated">MinIO登录页面</figcaption></figure><p id="7cf6" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我们不通过Web UI创建bucket，而是看一下我们在步骤1中下载的MinIO客户端，我们将利用它从那里创建一个bucket。</p><h1 id="ac71" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤4:使用MinIO客户端为MinIO设置一个别名</h1><p id="ee98" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">在我们开始与我们的MinIO实例交互之前，为它设置一个别名是很重要的。MinIO别名会很有帮助，尤其是当你使用MinIO客户端的时候。让我们在一个新的终端窗口中执行以下命令，为我们的minio实例创建一个名为“myminio”的别名。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="502f" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ ./mc config host add</strong> myminio <a class="ae jm" href="http://127.0.0.1:9000" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:9000</a> minioadmin minioadmin</span></pre><p id="60c2" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">一旦您执行了上面的命令，您应该会得到下面的成功消息“<strong class="iq hs">成功地添加了‘myminio’</strong>”。</p><h1 id="efb7" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤5:在MinIO中创建一个S3桶</h1><p id="7c39" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">让我们利用MinIO客户端来创建您的第一个名为“<strong class="iq hs"> datalake </strong>”的S3存储桶。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="65e1" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ ./mc mb</strong> myminio/datalake</span></pre><p id="6ff0" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">让我们通过执行以下命令来确认您的S3存储桶已经成功创建:</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="fc8d" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ ./mc ls</strong> myminio</span></pre><p id="50e6" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">您应该在列表中看到一个“数据湖”作为您的S3对象。您也可以使用MinIO web控制台通过导航到<a class="ae jm" href="http://127.0.0.1:9000" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:9000 </a>来确认这一点。</p><figure class="jo jp jq jr fd js er es paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="er es mh"><img src="../Images/50e8ee2d1cad43ae242797b0020ef93f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghMTbcnMeBCNepZdgPzuUg.png"/></div></div></figure><p id="58ee" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">MinIO client还有许多其他命令，这些命令有助于管理您的环境。您可以参考<a class="ae jm" href="https://docs.min.io/docs/minio-client-complete-guide.html" rel="noopener ugc nofollow" target="_blank"> MinIO客户端文档</a>中可用命令的完整列表。</p><p id="1634" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">耶！MinIO服务已启动并正在运行。如果您需要在分布式模式下设置MinIO，请参考此<a class="ae jm" href="https://docs.min.io/docs/distributed-minio-quickstart-guide.html" rel="noopener ugc nofollow" target="_blank">文档</a>。我们的数据湖设置已经完成了一半。我们只需要再设置一个工具— Trino(以前称为PrestoSQL)，它将使我们能够与我们刚刚创建的MinIO环境进行交互。</p><h1 id="4829" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤6:下载Trino服务器</h1><p id="ce9a" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">为了更好地组织，让我们用下面的命令创建一个名为trino的父文件夹。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="11a1" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ cd</strong> /opt<br/><strong class="lr hs">$ mkdir</strong> trino<strong class="lr hs"><br/>$ cd trino</strong></span></pre><p id="0c95" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">让我们获取Trino服务器文件并解压缩它。为了方便起见，我喜欢将版本从文件夹中删除。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="bcfe" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ wget</strong> <a class="ae jm" href="https://repo1.maven.org/maven2/io/trino/trino-server/351/trino-server-351.tar.gz" rel="noopener ugc nofollow" target="_blank">https://repo1.maven.org/maven2/io/trino/trino-server/351/trino-server-351.tar.gz</a><br/><strong class="lr hs">$ tar xvf</strong> trino-server-351.tar.gz<br/><strong class="lr hs">$ mv</strong> trino-server-351 server</span></pre><h1 id="d989" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤6:配置Trino服务器</h1><p id="17ae" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">Trino需要一个数据目录来存储日志等。Trino建议在安装目录之外创建一个数据目录，这样可以在升级Trino时轻松保存。所以让我们在/opt/trino文件夹下创建一个数据目录。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="06da" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ mkdir</strong> data</span></pre><p id="8997" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">在/opt/trino/server文件夹下创建以下两个目录来保存配置文件。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="7a19" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ mkdir</strong> etc <strong class="lr hs"><br/>$ mkdir</strong> catalog</span></pre><p id="7322" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">现在我们需要创建四个新文件，如下所示:</p><ul class=""><li id="2afb" class="kx ky hi iq b ir is iv iw iz mi jd mj jh mk jl ml lf lg lh bi translated"><strong class="iq hs"> etc/node.properties </strong>:针对每个节点的环境配置</li><li id="d56d" class="kx ky hi iq b ir li iv lj iz lk jd ll jh lm jl ml lf lg lh bi translated"><strong class="iq hs">etc/JVM . config</strong>:JVM的命令行选项</li><li id="884a" class="kx ky hi iq b ir li iv lj iz lk jd ll jh lm jl ml lf lg lh bi translated"><strong class="iq hs">etc/config . properties</strong>:Trino服务器配置</li><li id="f533" class="kx ky hi iq b ir li iv lj iz lk jd ll jh lm jl ml lf lg lh bi translated"><strong class="iq hs">catalog/data lake . properties</strong>:MinIO数据源配置</li><li id="69db" class="kx ky hi iq b ir li iv lj iz lk jd ll jh lm jl ml lf lg lh bi translated"><strong class="iq hs">catalog/MySQL . properties</strong>:MySQL的配置(此文件不是必需的。添加这个只是为了演示数据湖的用法。您可以为不同的数据库创建自己的配置。关于<a class="ae jm" href="https://trino.io/docs/current/connector.html" rel="noopener ugc nofollow" target="_blank">支持的连接器</a>，请参考Trino文档。)</li></ul><p id="9b4b" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">节点属性:</strong></p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="35a4" class="lv ka hi lr b fi lw lx l ly lz">node.environment=development<br/>node.id=0bc6c957-0404-490f-8f6a-8db6e8f3cf2b<br/>node.data-dir=/opt/trino/data</span></pre><p id="83b2" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs"> <em class="mm">注意:</em> </strong> <em class="mm">你可以为node.environment取任何你喜欢的名字，对于node.id，你可以使用uuidgen工具生成你自己的uuid。</em></p><p id="b6ba" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs">配置属性:</strong></p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="7746" class="lv ka hi lr b fi lw lx l ly lz">coordinator=true<br/>node-scheduler.include-coordinator=true<br/>http-server.http.port=8080<br/>query.max-memory=1GB<br/>query.max-memory-per-node=1GB<br/>query.max-total-memory-per-node=2GB<br/>discovery-server.enabled=true<br/>discovery.uri=http://127.0.0.1:8080<br/>http-server.authentication.type=PASSWORD</span></pre><p id="43e9" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs"> jvm.config: </strong></p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="b35e" class="lv ka hi lr b fi lw lx l ly lz">-server<br/>-Xmx16G<br/>-XX:-UseBiasedLocking<br/>-XX:+UseG1GC<br/>-XX:G1HeapRegionSize=32M<br/>-XX:+ExplicitGCInvokesConcurrent<br/>-XX:+ExitOnOutOfMemoryError<br/>-XX:+HeapDumpOnOutOfMemoryError<br/>-XX:ReservedCodeCacheSize=512M<br/>-XX:PerMethodRecompilationCutoff=10000<br/>-XX:PerBytecodeRecompilationCutoff=10000<br/>-Djdk.attach.allowAttachSelf=true<br/>-Djdk.nio.maxCachedBufferSize=2000000</span></pre><p id="6b91" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs"> datalake.properties: </strong></p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="57c9" class="lv ka hi lr b fi lw lx l ly lz">connector.name=hive-hadoop2<br/>hive.metastore=file<br/>hive.s3-file-system-type=TRINO<br/>hive.metastore.catalog.dir=s3://datalake/<br/>hive.s3.aws-access-key=minioadmin<br/>hive.s3.aws-secret-key=minioadmin<br/>hive.s3.endpoint=127.0.0.1:9000<br/>hive.s3.path-style-access=true<br/>hive.s3select-pushdown.enabled=true<br/>hive.s3.ssl.enabled=false</span></pre><p id="9a3e" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated"><strong class="iq hs"> mysql.properties: </strong></p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="21e1" class="lv ka hi lr b fi lw lx l ly lz">connector.name=mysql<br/>connection-url=jdbc:mysql://192.168.254.210:3306<br/>connection-user=myuser<br/>connection-password=mypassword<br/>case-insensitive-name-matching=true</span></pre><p id="e99d" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">有关所有配置选项，请参考<a class="ae jm" href="https://trino.io/docs/current/index.html" rel="noopener ugc nofollow" target="_blank"> Trino文档</a>。</p><h1 id="b6cc" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">步骤7:运行Trino服务器</h1><p id="7ec4" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">如果一切都配置正确，您应该能够从/opt/presto/server目录执行以下命令。如果您在启动Trino服务器时遇到任何问题，请检查您的配置文件。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="3d25" class="lv ka hi lr b fi lw lx l ly lz">bin/launcher run</span></pre><h1 id="fbbf" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">第8步:测试我们的数据湖</strong></h1><p id="3d33" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">我们将需要一个Trino命令行客户机来运行查询和测试我们的数据湖，所以让我们下载它。打开一个新的终端，从/opt/trino文件夹运行以下命令。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="1750" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ wget</strong> <a class="ae jm" href="https://repo1.maven.org/maven2/io/trino/trino-cli/351/trino-cli-351-executable.jar" rel="noopener ugc nofollow" target="_blank">https://repo1.maven.org/maven2/io/trino/trino-cli/351/trino-cli-351-executable.jar</a></span></pre><p id="eba9" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">运行以下命令连接到Trino。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="5fdf" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">$ java -jar</strong> trino-cli-351-executable.jar</span></pre><p id="7b95" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">您现在应该在Trino控制台中，您可以键入show catalogs，您应该看到三个目录名:datalake、mysql和system。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="dceb" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">trino&gt;</strong> SHOW CATALOGS;<br/> Catalog  <br/>----------<br/> datalake <br/> mysql    <br/> system   <br/>(3 rows)</span></pre><p id="b71d" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">在我们开始在数据湖中创建任何东西之前，我们需要创建一个模式。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="3f53" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">trino&gt;</strong> CREATE SCHEMA datalake.myschema;<br/>CREATE SCHEMA</span></pre><p id="4c4f" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">现在我们已经创建了模式，让我们只使用一条SQL语句将一个表从MySQL复制到我们的数据湖。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="d89b" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">trino&gt;</strong> CREATE TABLE datalake.myschema.category AS SELECT * FROM mysql.homedb.category;<br/>CREATE TABLE: 22 rows</span></pre><p id="d325" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">我们刚刚用一条普通的SQL语句在数据湖中创建了一个表。我们不需要任何ETL工具，也不需要编写任何Python或Java代码。让我们确认数据湖中的数据是可用的。</p><pre class="jo jp jq jr fd lq lr ls lt aw lu bi"><span id="6166" class="lv ka hi lr b fi lw lx l ly lz"><strong class="lr hs">trino&gt;</strong> SELECT * FROM datalake.myschema.category;<br/>  id   |            name            <br/>-------+----------------------------<br/>  1900 | Beer                       <br/>  1901 | Beverages                  <br/>  1902 | Deli                       <br/>  1903 | Floral                     <br/>  1904 | Health and Beauty Care     <br/>  1905 | Delivered Fresh Daily      <br/>  1906 | From Our Kitchen           <br/>  1907 | Meal Makers                <br/>  1908 | Canned goods &amp; Soup        <br/>  1909 | Pet care                   <br/>  1910 | Condiments Spices &amp; Baking <br/>  1911 | Baby                       <br/>  1912 | Dairy Eggs &amp; Cheese        <br/>  1913 | Paper Cleaning &amp; Home      <br/>  1914 | Cookies Snacks &amp; Candy     <br/>  1915 | Breakfast &amp; Cereal         <br/>  1916 | General merchandise        <br/>  1917 | Bread &amp; Bakery             <br/>  4628 | Meat                       <br/>  4629 | Seafood                    <br/>  4630 | Produce                    <br/>  4634 | Frozen food                <br/>(22 rows)</span></pre><h1 id="e78a" class="jz ka hi bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">结论</h1><p id="36e4" class="pw-post-body-paragraph io ip hi iq b ir kz it iu iv la ix iy iz ln jb jc jd lo jf jg jh lp jj jk jl hb bi translated">在本文中，我解释了如何在本地机器或虚拟机上快速建立数据湖。这种设置可以扩展到在您的组织中部署一个本地数据湖，而不需要像AWS或GCP这样的第三方供应商。MinIO和Trino都是可扩展的解决方案，它们在其网站上提供了全面的文档。</p><p id="d6dd" class="pw-post-body-paragraph io ip hi iq b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl hb bi translated">如果你想了解更多关于Trino和MinIO的信息，你可以阅读我的文章<a class="ae jm" href="https://tmarvadi.medium.com/modern-data-platform-using-open-source-technologies-212ba8273eab" rel="noopener">使用开源技术的现代数据平台</a>。希望这篇文章对你有用。请在下面留下你对这篇文章的评论。</p></div></div>    
</body>
</html>