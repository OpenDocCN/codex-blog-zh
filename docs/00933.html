<html>
<head>
<title>Build a better React Native form with Formik and Yup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Formik和Yup构建一个更好的反应原生形态</h1>
<blockquote>原文：<a href="https://medium.com/codex/build-a-better-react-native-form-with-formik-and-yup-6ffcd6136dc?source=collection_archive---------5-----------------------#2021-03-26">https://medium.com/codex/build-a-better-react-native-form-with-formik-and-yup-6ffcd6136dc?source=collection_archive---------5-----------------------#2021-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/cb4ba7c932c9c07fa076f4821e6986a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*15DoCDPKneqGYuYIuV8Afw.png"/></div></div></figure><p id="0ab1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">"在《无泪反应》中塑造形象."考虑到在每个表单变量的所有独立状态中输入会带来的所有眼泪，Formik没有用他们的标语撒谎。本文将介绍如何在React Native和Yup中以更具反应性的方式构建Formik表单以进行验证。</p><p id="7e40" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">到本文结束时，您将拥有一个使用最佳代码实践的基本的可重用注册表单。为了实现这一目标，我们将经历以下步骤:</p><ol class=""><li id="c7a4" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">创建新的react-native项目</li><li id="1f0d" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">安装Formik和Yup依赖项</li><li id="1251" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">构建注册表单</li><li id="5f2a" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">向文本输入添加验证和传递属性</li><li id="2485" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">重构字段组件</li><li id="670e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">重构表单组件</li></ol></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="0a59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">项目设置</em> <br/> </strong>我们将使用Typescript模板为本文创建一个新的react-native项目。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="913f" class="kt ku hi kp b fi kv kw l kx ky"><strong class="kp hj">Example</strong><br/>npx react-native init MyApp --template react-native-template-typescript<br/><strong class="kp hj">MyCode<br/></strong>npx react-native init DemoSignUpForm --template react-native-template-typescript</span></pre><p id="6f2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">完成之后，您可以简单地将cd放入项目文件夹，或者直接从VsCode(或者您正在使用的任何代码编辑器)中打开该文件夹。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="9e1a" class="kt ku hi kp b fi kv kw l kx ky">cd DemoSignUpForm <br/><strong class="kp hj">OR</strong><br/>cd .\DemoSignUpForm\</span></pre><p id="08c1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在一个终端中点击yarn start，在Android或iOS上启动应用程序。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="ddf4" class="kt ku hi kp b fi kv kw l kx ky"><strong class="kp hj">Terminal 1<br/></strong>yarn start<br/><strong class="kp hj">Terminal 2 <em class="kj">(for running on virtual android emulator)<br/></em></strong>npx react-native run-android</span></pre><p id="bb25" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">酷，我们已经完成了基本的react本地项目。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="5fe9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">安装Formik和Yup </em> </strong></p><p id="f13d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们需要安装两个依赖项:</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="8f2e" class="kt ku hi kp b fi kv kw l kx ky"><strong class="kp hj">Formik<br/></strong>yarn add formik<br/><strong class="kp hj">Yup<br/></strong>yarn add yup</span></pre><p id="f979" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">轻松点。现在，让我们开始构建表单。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="7467" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">构建注册表单<br/> </em> </strong>我们将从一些功能性的东西开始，没有你想在项目演示中展示的东西，但我们也将达到目的。</p><p id="6ca1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先创建一个src文件夹(如果还没有),然后在src中创建一个components文件夹。这将包含我们的SignUpForm.tsx，以及稍后重构的表单组件。</p><figure class="kk kl km kn fd ij er es paragraph-image"><div class="er es kz"><img src="../Images/2834ab42e256e74464f083d57aaba91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*li7lglI-u3UVvgYHpE1l_A.png"/></div></figure><p id="c03f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在图中，我们还可以看到组件内部的一个表单文件夹。我们稍后将回到这一点。</p><p id="8a6f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，将以下代码添加到SignUpForm.tsx中。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="9c1c" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="0712" class="kt ku hi kp b fi la kw l kx ky">import {Button, Text, TextInput, View} from 'react-native';</span><span id="92dc" class="kt ku hi kp b fi la kw l kx ky">import {Formik} from 'formik';</span><span id="261e" class="kt ku hi kp b fi la kw l kx ky">const SignUpForm = () =&gt; {</span><span id="5a5d" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="0b7c" class="kt ku hi kp b fi la kw l kx ky">&lt;&gt;</span><span id="f891" class="kt ku hi kp b fi la kw l kx ky">&lt;Text&gt;Sign Up&lt;/Text&gt;</span><span id="a463" class="kt ku hi kp b fi la kw l kx ky">&lt;Formik</span><span id="1332" class="kt ku hi kp b fi la kw l kx ky">initialValues={{name: '', email: '', password: ''}}</span><span id="3501" class="kt ku hi kp b fi la kw l kx ky">onSubmit={<em class="kj">values</em> =&gt; console.log(values)}&gt;</span><span id="9af6" class="kt ku hi kp b fi la kw l kx ky">{({</span><span id="ca6a" class="kt ku hi kp b fi la kw l kx ky">handleChange,</span><span id="7cd1" class="kt ku hi kp b fi la kw l kx ky">handleBlur,</span><span id="03dc" class="kt ku hi kp b fi la kw l kx ky">handleSubmit,</span><span id="1c8f" class="kt ku hi kp b fi la kw l kx ky">values,</span><span id="1c19" class="kt ku hi kp b fi la kw l kx ky">errors,</span><span id="2578" class="kt ku hi kp b fi la kw l kx ky">touched,</span><span id="4be4" class="kt ku hi kp b fi la kw l kx ky">})</span><span id="9e12" class="kt ku hi kp b fi la kw l kx ky">=&gt; (</span><span id="4d4a" class="kt ku hi kp b fi la kw l kx ky">&lt;View&gt;</span><span id="c77b" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="b105" class="kt ku hi kp b fi la kw l kx ky">placeholder="Name"</span><span id="7374" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('name')}</span><span id="0c77" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('name')}</span><span id="4957" class="kt ku hi kp b fi la kw l kx ky">value={values.name}</span><span id="2033" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="92af" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="e240" class="kt ku hi kp b fi la kw l kx ky">placeholder="Email"</span><span id="5348" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('email')}</span><span id="73f5" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('email')}</span><span id="d5e5" class="kt ku hi kp b fi la kw l kx ky">value={values.email}</span><span id="28c3" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="b939" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="d67a" class="kt ku hi kp b fi la kw l kx ky">placeholder="Password"</span><span id="4fcc" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('password')}</span><span id="034c" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('password')}</span><span id="4a2b" class="kt ku hi kp b fi la kw l kx ky">value={values.password}</span><span id="11b3" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="ccf7" class="kt ku hi kp b fi la kw l kx ky">&lt;Button onPress={handleSubmit} title="Submit" /&gt;</span><span id="67dc" class="kt ku hi kp b fi la kw l kx ky">&lt;/View&gt;</span><span id="9f25" class="kt ku hi kp b fi la kw l kx ky">)}</span><span id="b4b2" class="kt ku hi kp b fi la kw l kx ky">&lt;/Formik&gt;</span><span id="bd17" class="kt ku hi kp b fi la kw l kx ky">&lt;/&gt;</span><span id="6a58" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="7938" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="067c" class="kt ku hi kp b fi la kw l kx ky">export default SignUpForm;</span></pre><p id="7924" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，我们将删减App.tsx，只显示注册表单。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="93d3" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="cad2" class="kt ku hi kp b fi la kw l kx ky">import {SafeAreaView} from 'react-native';</span><span id="4354" class="kt ku hi kp b fi la kw l kx ky">import SignUpForm from './src/components/SignUpForm';</span><span id="fc6d" class="kt ku hi kp b fi la kw l kx ky">const App = () =&gt; {</span><span id="b659" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="d253" class="kt ku hi kp b fi la kw l kx ky">&lt;SafeAreaView&gt;</span><span id="86d8" class="kt ku hi kp b fi la kw l kx ky">&lt;SignUpForm /&gt;</span><span id="fe2f" class="kt ku hi kp b fi la kw l kx ky">&lt;/SafeAreaView&gt;</span><span id="997f" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="a76a" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="7d64" class="kt ku hi kp b fi la kw l kx ky">export default App;</span></pre><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/eb2c480fa80dbfbd8632678aa52910cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epNm9hKjWFYI2APKb7N8bA.png"/></div></div></figure><p id="67de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嘣！我们有表格。现在让我们添加一些验证。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="f230" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">添加验证和文本输入属性<br/> </em> </strong>我们现在添加了一些字段，所以让我们为每个字段设置一些验证逻辑。</p><p id="b8b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从导入Yep开始。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="5d19" class="kt ku hi kp b fi kv kw l kx ky">import * as Yup from 'yup';</span></pre><p id="611f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在SignUpForm函数之外编写一个验证模式。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="5740" class="kt ku hi kp b fi kv kw l kx ky">const validationSchema = Yup.object().shape({</span><span id="1ffb" class="kt ku hi kp b fi la kw l kx ky">name: Yup.string().required('Name is required').label('Name'),</span><span id="74a2" class="kt ku hi kp b fi la kw l kx ky">email: Yup.string()</span><span id="455b" class="kt ku hi kp b fi la kw l kx ky">.email('Please enter valid email')</span><span id="10be" class="kt ku hi kp b fi la kw l kx ky">.required('Email is required')</span><span id="324e" class="kt ku hi kp b fi la kw l kx ky">.label('Email'),</span><span id="da24" class="kt ku hi kp b fi la kw l kx ky">password: Yup.string()</span><span id="4c65" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[a-z]\w*/, 'Password must have a small letter')</span><span id="ca30" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[A-Z]\w*/, 'Password must have a capital letter')</span><span id="0ee9" class="kt ku hi kp b fi la kw l kx ky">.matches(/\d/, 'Password must have a number')</span><span id="a674" class="kt ku hi kp b fi la kw l kx ky">.min(8, ({<em class="kj">min</em>}) =&gt; `Password must be at least ${min} characters`)</span><span id="0487" class="kt ku hi kp b fi la kw l kx ky">.required('Password is required')</span><span id="1ee4" class="kt ku hi kp b fi la kw l kx ky">.label('Password'),</span><span id="f9ed" class="kt ku hi kp b fi la kw l kx ky">});</span></pre><p id="af98" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">yup docs(<a class="ae lc" href="https://www.npmjs.com/package/yup" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/yup</a>)将有助于更好地理解上面的代码块。简而言之，yup的优点是让我们编写一个规则和一条消息，如果不符合规则，就显示给用户。</p><p id="d518" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，我们继续将Yup与Formik结合使用。首先，将validationSchema传递给Formik的validationSchema prop。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="3cd7" class="kt ku hi kp b fi kv kw l kx ky">&lt;Formik</span><span id="e8a6" class="kt ku hi kp b fi la kw l kx ky">initialValues={{name: '', email: '', password: ''}}</span><span id="7beb" class="kt ku hi kp b fi la kw l kx ky">validationSchema={validationSchema}</span><span id="4dc4" class="kt ku hi kp b fi la kw l kx ky">onSubmit={<em class="kj">values</em> =&gt; console.log(values)}&gt;</span></pre><p id="0ff0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们将使用“错误”属性显示错误消息。现在，让我们在每个字段后添加一个<text>组件。</text></p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="65f5" class="kt ku hi kp b fi kv kw l kx ky">&lt;TextInput</span><span id="6634" class="kt ku hi kp b fi la kw l kx ky">placeholder="Name"</span><span id="11dd" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('name')}</span><span id="58d2" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('name')}</span><span id="e550" class="kt ku hi kp b fi la kw l kx ky">value={values.name}</span><span id="5cf2" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="38b6" class="kt ku hi kp b fi la kw l kx ky">&lt;Text style={{color: 'red'}}&gt;{errors.name}&lt;/Text&gt;</span></pre><p id="816d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对每个领域都这样做，我们应该有这样的东西。</p><figure class="kk kl km kn fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/2223849c93bf043bb482ee4be6ac7f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tcS3JEtKFsu9aOonhE73iw.png"/></div></div></figure><p id="dabf" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，我们不希望每次都显示这些错误，只有在出现错误和字段被触及时才会显示。我们将使用一些ES6代码包装我们的文本组件，并且仅在满足前面提到的条件时才呈现它。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="6a9e" class="kt ku hi kp b fi kv kw l kx ky">{errors.name &amp;&amp; touched.name &amp;&amp; (</span><span id="ddd3" class="kt ku hi kp b fi la kw l kx ky">&lt;Text style={{color: 'red'}}&gt;{errors.name}&lt;/Text&gt;</span><span id="392d" class="kt ku hi kp b fi la kw l kx ky">)}</span></pre><p id="2be2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">验证已经完成。现在，你可能会注意到，密码并没有像我们预期的那样隐藏起来。为此，我们需要将secureTextEntry属性传递给TextInput。我们还将传递一些其他的道具，以便我们的TextInput能够正确地运行。</p><p id="a76e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">SignUpForm.tsx最后会是这样的。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="b1e6" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="50d5" class="kt ku hi kp b fi la kw l kx ky">import {Button, Text, TextInput, View} from 'react-native';</span><span id="23e7" class="kt ku hi kp b fi la kw l kx ky">import {Formik, Field} from 'formik';</span><span id="9dbe" class="kt ku hi kp b fi la kw l kx ky">import * as Yup from 'yup';</span><span id="138a" class="kt ku hi kp b fi la kw l kx ky">const validationSchema = Yup.object().shape({</span><span id="087d" class="kt ku hi kp b fi la kw l kx ky">name: Yup.string().required('Name is required').label('Name'),</span><span id="d676" class="kt ku hi kp b fi la kw l kx ky">email: Yup.string()</span><span id="7500" class="kt ku hi kp b fi la kw l kx ky">.email('Please enter valid email')</span><span id="e4da" class="kt ku hi kp b fi la kw l kx ky">.required('Email is required')</span><span id="9f18" class="kt ku hi kp b fi la kw l kx ky">.label('Email'),</span><span id="4afd" class="kt ku hi kp b fi la kw l kx ky">password: Yup.string()</span><span id="f4d2" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[a-z]\w*/, 'Password must have a small letter')</span><span id="9f4c" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[A-Z]\w*/, 'Password must have a capital letter')</span><span id="fbfc" class="kt ku hi kp b fi la kw l kx ky">.matches(/\d/, 'Password must have a number')</span><span id="1239" class="kt ku hi kp b fi la kw l kx ky">.min(8, ({<em class="kj">min</em>}) =&gt; `Password must be at least ${min} characters`)</span><span id="4876" class="kt ku hi kp b fi la kw l kx ky">.required('Password is required')</span><span id="048c" class="kt ku hi kp b fi la kw l kx ky">.label('Password'),</span><span id="b982" class="kt ku hi kp b fi la kw l kx ky">});</span><span id="bdce" class="kt ku hi kp b fi la kw l kx ky">const SignUpForm = () =&gt; {</span><span id="b091" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="d87f" class="kt ku hi kp b fi la kw l kx ky">&lt;&gt;</span><span id="90e2" class="kt ku hi kp b fi la kw l kx ky">&lt;Text&gt;Sign Up&lt;/Text&gt;</span><span id="6d28" class="kt ku hi kp b fi la kw l kx ky">&lt;Formik</span><span id="b04f" class="kt ku hi kp b fi la kw l kx ky">initialValues={{name: '', email: '', password: ''}}</span><span id="1fc3" class="kt ku hi kp b fi la kw l kx ky">validationSchema={validationSchema}</span><span id="bfa8" class="kt ku hi kp b fi la kw l kx ky">onSubmit={<em class="kj">values</em> =&gt; console.log(values)}&gt;</span><span id="67dd" class="kt ku hi kp b fi la kw l kx ky">{({</span><span id="3259" class="kt ku hi kp b fi la kw l kx ky">handleChange,</span><span id="b112" class="kt ku hi kp b fi la kw l kx ky">handleBlur,</span><span id="8932" class="kt ku hi kp b fi la kw l kx ky">handleSubmit,</span><span id="08cd" class="kt ku hi kp b fi la kw l kx ky">values,</span><span id="5d18" class="kt ku hi kp b fi la kw l kx ky">errors,</span><span id="3d56" class="kt ku hi kp b fi la kw l kx ky">touched,</span><span id="5b9b" class="kt ku hi kp b fi la kw l kx ky">}) =&gt; (</span><span id="1f8f" class="kt ku hi kp b fi la kw l kx ky">&lt;View&gt;</span><span id="bdf9" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="dc1c" class="kt ku hi kp b fi la kw l kx ky">placeholder="Name"</span><span id="de65" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('name')}</span><span id="4b64" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('name')}</span><span id="f67e" class="kt ku hi kp b fi la kw l kx ky">value={values.name}</span><span id="36af" class="kt ku hi kp b fi la kw l kx ky">autoCorrect={false}</span><span id="0a2c" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="9062" class="kt ku hi kp b fi la kw l kx ky">{errors.name &amp;&amp; touched.name &amp;&amp; (</span><span id="d496" class="kt ku hi kp b fi la kw l kx ky">&lt;Text style={{color: 'red'}}&gt;{errors.name}&lt;/Text&gt;</span><span id="0625" class="kt ku hi kp b fi la kw l kx ky">)}</span><span id="d52f" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="452f" class="kt ku hi kp b fi la kw l kx ky">placeholder="Email"</span><span id="7d52" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('email')}</span><span id="046c" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('email')}</span><span id="8215" class="kt ku hi kp b fi la kw l kx ky">autoCapitalize="none"</span><span id="10a1" class="kt ku hi kp b fi la kw l kx ky">autoCompleteType="email"</span><span id="1eda" class="kt ku hi kp b fi la kw l kx ky">autoCorrect={false}</span><span id="27ad" class="kt ku hi kp b fi la kw l kx ky">keyboardType="email-address"</span><span id="1f46" class="kt ku hi kp b fi la kw l kx ky">textContentType="emailAddress"</span><span id="ae53" class="kt ku hi kp b fi la kw l kx ky">value={values.email}</span><span id="575f" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="9c85" class="kt ku hi kp b fi la kw l kx ky">{errors.email &amp;&amp; touched.email &amp;&amp; (</span><span id="0b3b" class="kt ku hi kp b fi la kw l kx ky">&lt;Text style={{color: 'red'}}&gt;{errors.email}&lt;/Text&gt;</span><span id="314c" class="kt ku hi kp b fi la kw l kx ky">)}</span><span id="a3c6" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="e507" class="kt ku hi kp b fi la kw l kx ky">placeholder="Password"</span><span id="c36e" class="kt ku hi kp b fi la kw l kx ky">onChangeText={handleChange('password')}</span><span id="61a6" class="kt ku hi kp b fi la kw l kx ky">onBlur={handleBlur('password')}</span><span id="b841" class="kt ku hi kp b fi la kw l kx ky">autoCapitalize="none"</span><span id="4bf5" class="kt ku hi kp b fi la kw l kx ky">secureTextEntry</span><span id="5eab" class="kt ku hi kp b fi la kw l kx ky">textContentType="password"</span><span id="9215" class="kt ku hi kp b fi la kw l kx ky">value={values.password}</span><span id="f862" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="7733" class="kt ku hi kp b fi la kw l kx ky">{errors.password &amp;&amp; touched.password &amp;&amp; (</span><span id="4c08" class="kt ku hi kp b fi la kw l kx ky">&lt;Text style={{color: 'red'}}&gt;{errors.password}&lt;/Text&gt;</span><span id="89b3" class="kt ku hi kp b fi la kw l kx ky">)}</span><span id="06ba" class="kt ku hi kp b fi la kw l kx ky">&lt;Button onPress={handleSubmit} title="Submit" /&gt;</span><span id="160e" class="kt ku hi kp b fi la kw l kx ky">&lt;/View&gt;</span><span id="054f" class="kt ku hi kp b fi la kw l kx ky">)}</span><span id="7b9c" class="kt ku hi kp b fi la kw l kx ky">&lt;/Formik&gt;</span><span id="ab9a" class="kt ku hi kp b fi la kw l kx ky">&lt;/&gt;</span><span id="fd84" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="386e" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="decb" class="kt ku hi kp b fi la kw l kx ky">export default SignUpForm;</span></pre><p id="5f50" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们有一个全功能的表单，但是代码仍然不符合标准。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="f8d5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">重构字段组件<br/> </em> </strong>我们将使用一些React magic和Formik的字段组件来删除任何重复的代码并对其进行修整。</p><p id="e7f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们从前面的表单文件夹中创建一个新的AppFormField组件开始。我们将从一个字段组件中复制所有内容并粘贴到那里。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="8d82" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="c7f7" class="kt ku hi kp b fi la kw l kx ky">import {Text, TextInput} from 'react-native';</span><span id="0ab8" class="kt ku hi kp b fi la kw l kx ky">const AppFormField = (<em class="kj">props</em>: any) =&gt; {</span><span id="dc72" class="kt ku hi kp b fi la kw l kx ky">const {</span><span id="ebdc" class="kt ku hi kp b fi la kw l kx ky">placeholder,</span><span id="ec33" class="kt ku hi kp b fi la kw l kx ky">field: {name, onBlur, onChange, value},</span><span id="381b" class="kt ku hi kp b fi la kw l kx ky">form: {errors, touched, setFieldTouched},</span><span id="5f80" class="kt ku hi kp b fi la kw l kx ky">...inputProps</span><span id="1f6b" class="kt ku hi kp b fi la kw l kx ky">} = props;</span><span id="7273" class="kt ku hi kp b fi la kw l kx ky">const hasError = errors[name] &amp;&amp; touched[name];</span><span id="4581" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="e6ae" class="kt ku hi kp b fi la kw l kx ky">&lt;&gt;</span><span id="1a39" class="kt ku hi kp b fi la kw l kx ky">&lt;TextInput</span><span id="97c1" class="kt ku hi kp b fi la kw l kx ky">placeholder={placeholder}</span><span id="05fe" class="kt ku hi kp b fi la kw l kx ky">onChangeText={<em class="kj">text</em> =&gt; onChange(name)(text)}</span><span id="785b" class="kt ku hi kp b fi la kw l kx ky">onBlur={() =&gt; {</span><span id="c602" class="kt ku hi kp b fi la kw l kx ky">setFieldTouched(name);</span><span id="291d" class="kt ku hi kp b fi la kw l kx ky">onBlur(name);</span><span id="6d99" class="kt ku hi kp b fi la kw l kx ky">}}</span><span id="ce82" class="kt ku hi kp b fi la kw l kx ky">autoCapitalize="none"</span><span id="f240" class="kt ku hi kp b fi la kw l kx ky">autoCorrect={false}</span><span id="c893" class="kt ku hi kp b fi la kw l kx ky">value={value}</span><span id="cf53" class="kt ku hi kp b fi la kw l kx ky">{...inputProps}</span><span id="d0e6" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="8478" class="kt ku hi kp b fi la kw l kx ky">{hasError &amp;&amp; &lt;Text style={{color: 'red'}}&gt;{errors[name]}&lt;/Text&gt;}</span><span id="15e7" class="kt ku hi kp b fi la kw l kx ky">&lt;/&gt;</span><span id="618c" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="077e" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="9f89" class="kt ku hi kp b fi la kw l kx ky">export default AppFormField;</span></pre><p id="1e16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好吧，我要解释一下。您看到的道具是由Formik的Field组件提供的，稍后我们将添加该组件。它允许我们使用之前使用的formik功能(详细信息，参见<a class="ae lc" href="https://formik.org/docs/api/field" rel="noopener ugc nofollow" target="_blank">https://formik.org/docs/api/field</a>)。您会注意到我们有inputProps，它包含了我们之前添加到TextInput的属性，现在我们将把它传递给Field组件。</p><p id="4c1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">将此添加到formik导入中。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="fef8" class="kt ku hi kp b fi kv kw l kx ky">import {Formik, Field} from 'formik';</span></pre><p id="460b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将把我们的自定义AppFormField组件传递给Field组件，得到类似这样的结果。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="0bbc" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="aa34" class="kt ku hi kp b fi la kw l kx ky">import {Button, Text, TextInput, View} from 'react-native';</span><span id="54f1" class="kt ku hi kp b fi la kw l kx ky">import {Formik, Field} from 'formik';</span><span id="f1ae" class="kt ku hi kp b fi la kw l kx ky">import * as Yup from 'yup';</span><span id="9de8" class="kt ku hi kp b fi la kw l kx ky">import AppFormField from './Form/AppFormField';</span><span id="f8f2" class="kt ku hi kp b fi la kw l kx ky">const validationSchema = Yup.object().shape({</span><span id="ccb7" class="kt ku hi kp b fi la kw l kx ky">name: Yup.string().required('Name is required').label('Name'),</span><span id="3f3c" class="kt ku hi kp b fi la kw l kx ky">email: Yup.string()</span><span id="9d5f" class="kt ku hi kp b fi la kw l kx ky">.email('Please enter valid email')</span><span id="7895" class="kt ku hi kp b fi la kw l kx ky">.required('Email is required')</span><span id="aab3" class="kt ku hi kp b fi la kw l kx ky">.label('Email'),</span><span id="b598" class="kt ku hi kp b fi la kw l kx ky">password: Yup.string()</span><span id="99d3" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[a-z]\w*/, 'Password must have a small letter')</span><span id="f344" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[A-Z]\w*/, 'Password must have a capital letter')</span><span id="d7ed" class="kt ku hi kp b fi la kw l kx ky">.matches(/\d/, 'Password must have a number')</span><span id="d185" class="kt ku hi kp b fi la kw l kx ky">.min(8, ({<em class="kj">min</em>}) =&gt; `Password must be at least ${min} characters`)</span><span id="8539" class="kt ku hi kp b fi la kw l kx ky">.required('Password is required')</span><span id="7c90" class="kt ku hi kp b fi la kw l kx ky">.label('Password'),</span><span id="7c1a" class="kt ku hi kp b fi la kw l kx ky">});</span><span id="cf34" class="kt ku hi kp b fi la kw l kx ky">const SignUpForm = () =&gt; {</span><span id="dcd7" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="2c52" class="kt ku hi kp b fi la kw l kx ky">&lt;&gt;</span><span id="4ab6" class="kt ku hi kp b fi la kw l kx ky">&lt;Text&gt;Sign Up&lt;/Text&gt;</span><span id="e067" class="kt ku hi kp b fi la kw l kx ky">&lt;Formik</span><span id="d247" class="kt ku hi kp b fi la kw l kx ky">initialValues={{name: '', email: '', password: ''}}</span><span id="7e73" class="kt ku hi kp b fi la kw l kx ky">validationSchema={validationSchema}</span><span id="1bbe" class="kt ku hi kp b fi la kw l kx ky">onSubmit={<em class="kj">values</em> =&gt; console.log(values)}&gt;</span><span id="ce73" class="kt ku hi kp b fi la kw l kx ky">{({</span><span id="bb90" class="kt ku hi kp b fi la kw l kx ky">handleChange,</span><span id="fdb8" class="kt ku hi kp b fi la kw l kx ky">handleBlur,</span><span id="f99e" class="kt ku hi kp b fi la kw l kx ky">handleSubmit,</span><span id="56df" class="kt ku hi kp b fi la kw l kx ky">values,</span><span id="536f" class="kt ku hi kp b fi la kw l kx ky">errors,</span><span id="30b8" class="kt ku hi kp b fi la kw l kx ky">touched,</span><span id="e656" class="kt ku hi kp b fi la kw l kx ky">}) =&gt; (</span><span id="cc9e" class="kt ku hi kp b fi la kw l kx ky">&lt;View&gt;</span><span id="83b8" class="kt ku hi kp b fi la kw l kx ky">&lt;Field component={AppFormField} name="name" placeholder="Name" /&gt;</span><span id="985a" class="kt ku hi kp b fi la kw l kx ky">&lt;Field</span><span id="fbb9" class="kt ku hi kp b fi la kw l kx ky">component={AppFormField}</span><span id="3a47" class="kt ku hi kp b fi la kw l kx ky">name="email"</span><span id="3602" class="kt ku hi kp b fi la kw l kx ky">placeholder="Email"</span><span id="ba9b" class="kt ku hi kp b fi la kw l kx ky">autoCompleteType="email"</span><span id="35bc" class="kt ku hi kp b fi la kw l kx ky">keyboardType="email-address"</span><span id="b534" class="kt ku hi kp b fi la kw l kx ky">textContentType="emailAddress"</span><span id="575d" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="2e91" class="kt ku hi kp b fi la kw l kx ky">&lt;Field</span><span id="d875" class="kt ku hi kp b fi la kw l kx ky">component={AppFormField}</span><span id="e905" class="kt ku hi kp b fi la kw l kx ky">name="password"</span><span id="c90b" class="kt ku hi kp b fi la kw l kx ky">placeholder="Password"</span><span id="bd6f" class="kt ku hi kp b fi la kw l kx ky">secureTextEntry</span><span id="1c1c" class="kt ku hi kp b fi la kw l kx ky">textContentType="password"</span><span id="9bab" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="25d6" class="kt ku hi kp b fi la kw l kx ky">&lt;Button onPress={handleSubmit} title="Submit" /&gt;</span><span id="d879" class="kt ku hi kp b fi la kw l kx ky">&lt;/View&gt;</span><span id="db69" class="kt ku hi kp b fi la kw l kx ky">)}</span><span id="75b5" class="kt ku hi kp b fi la kw l kx ky">&lt;/Formik&gt;</span><span id="1e19" class="kt ku hi kp b fi la kw l kx ky">&lt;/&gt;</span><span id="5fe3" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="b2d7" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="5505" class="kt ku hi kp b fi la kw l kx ky">export default SignUpForm;</span></pre><p id="f185" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">看，好多了。这也消除了对福米克道具的需求。你会看到除了handleSubmit以外的所有道具都是灰显的。我们也可以摆脱它。</p><p id="1b03" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请在Form文件夹中创建一个新文件，并将其命名为AppFormSubmitButton.tsx。我们将把组件复制到该文件中，我们还将使用Formik hook来访问handleSubmit函数。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="767b" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="fecd" class="kt ku hi kp b fi la kw l kx ky">import {Button} from 'react-native';</span><span id="619e" class="kt ku hi kp b fi la kw l kx ky">import {useFormikContext} from 'formik';</span><span id="ce64" class="kt ku hi kp b fi la kw l kx ky">interface AppFormSubmitButtonProps {</span><span id="1415" class="kt ku hi kp b fi la kw l kx ky">title: string;</span><span id="8260" class="kt ku hi kp b fi la kw l kx ky">}</span><span id="6cd8" class="kt ku hi kp b fi la kw l kx ky">const AppFormSubmitButton = ({<em class="kj">title</em>}: AppFormSubmitButtonProps) =&gt; {</span><span id="5e69" class="kt ku hi kp b fi la kw l kx ky">const {handleSubmit, isValid} = useFormikContext();</span><span id="7dd7" class="kt ku hi kp b fi la kw l kx ky">return &lt;Button onPress={handleSubmit} title={title} disabled={!isValid} /&gt;;</span><span id="67eb" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="9953" class="kt ku hi kp b fi la kw l kx ky">export default AppFormSubmitButton;</span></pre><p id="75cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们甚至使用isValid属性禁用按钮，直到所有用户输入都有效，并使标题动态化。用我们新的AppFormSubmitButton替换以前的按钮组件，我们将不再需要任何Formik道具！</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="fe3d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">重构表单<br/> </em> </strong>现在让我们开始移除怪异的Formik语法。</p><p id="8be0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是我所说的。</p><figure class="kk kl km kn fd ij er es paragraph-image"><div class="er es le"><img src="../Images/81cb3a621b19057a9321069226607fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*rpZk2L1K3BJdMyegJbXpjA.png"/></div></figure><p id="8df5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以很容易地移除它，因为我们不使用任何Formik道具。</p><p id="a039" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们在表单文件夹中创建另一个文件，并将其命名为AppForm。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="9a22" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="e10c" class="kt ku hi kp b fi la kw l kx ky">import {Formik} from 'formik';</span><span id="bd77" class="kt ku hi kp b fi la kw l kx ky">const AppForm = ({</span><span id="0dca" class="kt ku hi kp b fi la kw l kx ky">initialValues,</span><span id="bc0e" class="kt ku hi kp b fi la kw l kx ky">onSubmit,</span><span id="7c70" class="kt ku hi kp b fi la kw l kx ky">validationSchema,</span><span id="5eef" class="kt ku hi kp b fi la kw l kx ky">children,</span><span id="15fb" class="kt ku hi kp b fi la kw l kx ky">}: any) =&gt; {</span><span id="dfdd" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="469a" class="kt ku hi kp b fi la kw l kx ky">&lt;Formik</span><span id="1f08" class="kt ku hi kp b fi la kw l kx ky">initialValues={initialValues}</span><span id="c7cf" class="kt ku hi kp b fi la kw l kx ky">onSubmit={onSubmit}</span><span id="46e4" class="kt ku hi kp b fi la kw l kx ky">validationSchema={validationSchema}&gt;</span><span id="fdd3" class="kt ku hi kp b fi la kw l kx ky">{() =&gt; &lt;&gt;{children}&lt;/&gt;}</span><span id="44d0" class="kt ku hi kp b fi la kw l kx ky">&lt;/Formik&gt;</span><span id="e32b" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="dd37" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="b1b8" class="kt ku hi kp b fi la kw l kx ky">export default AppForm;</span></pre><p id="e87d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样做的好处是，下次我们需要制作表单时，我们需要向这个包装器提供initialValues、onSubmit函数和验证逻辑作为道具，然后在其中添加任何字段。</p><p id="499c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们添加一个新的字段Confirm Password，看看我们的新表单组件有多简单和简洁。</p><p id="cde4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们新的SignUpForm.tsx现在将是这样的。</p><pre class="kk kl km kn fd ko kp kq kr aw ks bi"><span id="251c" class="kt ku hi kp b fi kv kw l kx ky">import React from 'react';</span><span id="bfc6" class="kt ku hi kp b fi la kw l kx ky">import {Text} from 'react-native';</span><span id="eb75" class="kt ku hi kp b fi la kw l kx ky">import {Field} from 'formik';</span><span id="29af" class="kt ku hi kp b fi la kw l kx ky">import * as Yup from 'yup';</span><span id="bbd9" class="kt ku hi kp b fi la kw l kx ky">import AppFormField from './Form/AppFormField';</span><span id="7fb4" class="kt ku hi kp b fi la kw l kx ky">import AppFormSubmitButton from './Form/AppFormSubmitButton';</span><span id="d4d4" class="kt ku hi kp b fi la kw l kx ky">import AppForm from './Form/AppForm';</span><span id="9686" class="kt ku hi kp b fi la kw l kx ky">const validationSchema = Yup.object().shape({</span><span id="b7a8" class="kt ku hi kp b fi la kw l kx ky">name: Yup.string().required('Name is required').label('Name'),</span><span id="44a8" class="kt ku hi kp b fi la kw l kx ky">email: Yup.string()</span><span id="bf44" class="kt ku hi kp b fi la kw l kx ky">.email('Please enter valid email')</span><span id="9c50" class="kt ku hi kp b fi la kw l kx ky">.required('Email is required')</span><span id="e50f" class="kt ku hi kp b fi la kw l kx ky">.label('Email'),</span><span id="80cc" class="kt ku hi kp b fi la kw l kx ky">password: Yup.string()</span><span id="bc1d" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[a-z]\w*/, 'Password must have a small letter')</span><span id="0beb" class="kt ku hi kp b fi la kw l kx ky">.matches(/\w*[A-Z]\w*/, 'Password must have a capital letter')</span><span id="c7dd" class="kt ku hi kp b fi la kw l kx ky">.matches(/\d/, 'Password must have a number')</span><span id="d4e2" class="kt ku hi kp b fi la kw l kx ky">.min(8, ({<em class="kj">min</em>}) =&gt; `Password must be at least ${min} characters`)</span><span id="3408" class="kt ku hi kp b fi la kw l kx ky">.required('Password is required')</span><span id="25eb" class="kt ku hi kp b fi la kw l kx ky">.label('Password'),</span><span id="0396" class="kt ku hi kp b fi la kw l kx ky">confirmPassword: Yup.string()</span><span id="f259" class="kt ku hi kp b fi la kw l kx ky">.oneOf([Yup.ref('password')], 'Passwords do not match')</span><span id="33b5" class="kt ku hi kp b fi la kw l kx ky">.required('Confirm password is required')</span><span id="791a" class="kt ku hi kp b fi la kw l kx ky">.label('Confirm Password'),</span><span id="662d" class="kt ku hi kp b fi la kw l kx ky">});</span><span id="8f5d" class="kt ku hi kp b fi la kw l kx ky">const SignUpForm = () =&gt; {</span><span id="8840" class="kt ku hi kp b fi la kw l kx ky">return (</span><span id="7dd9" class="kt ku hi kp b fi la kw l kx ky">&lt;&gt;</span><span id="134e" class="kt ku hi kp b fi la kw l kx ky">&lt;Text&gt;Sign Up&lt;/Text&gt;</span><span id="cc14" class="kt ku hi kp b fi la kw l kx ky">&lt;AppForm</span><span id="db86" class="kt ku hi kp b fi la kw l kx ky">initialValues={{name: '', email: '', password: '', confirmPassword: ''}}</span><span id="772c" class="kt ku hi kp b fi la kw l kx ky">validationSchema={validationSchema}</span><span id="f1ba" class="kt ku hi kp b fi la kw l kx ky">onSubmit={(<em class="kj">values</em>: any) =&gt; console.log(values)}&gt;</span><span id="693f" class="kt ku hi kp b fi la kw l kx ky">&lt;Field component={AppFormField} name="name" placeholder="Name" /&gt;</span><span id="f896" class="kt ku hi kp b fi la kw l kx ky">&lt;Field</span><span id="d329" class="kt ku hi kp b fi la kw l kx ky">component={AppFormField}</span><span id="5e31" class="kt ku hi kp b fi la kw l kx ky">name="email"</span><span id="ba08" class="kt ku hi kp b fi la kw l kx ky">placeholder="Email"</span><span id="2e94" class="kt ku hi kp b fi la kw l kx ky">autoCompleteType="email"</span><span id="fe02" class="kt ku hi kp b fi la kw l kx ky">keyboardType="email-address"</span><span id="73fb" class="kt ku hi kp b fi la kw l kx ky">textContentType="emailAddress"</span><span id="8dee" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="94f9" class="kt ku hi kp b fi la kw l kx ky">&lt;Field</span><span id="710c" class="kt ku hi kp b fi la kw l kx ky">component={AppFormField}</span><span id="8a9b" class="kt ku hi kp b fi la kw l kx ky">name="password"</span><span id="b406" class="kt ku hi kp b fi la kw l kx ky">placeholder="Password"</span><span id="4edc" class="kt ku hi kp b fi la kw l kx ky">secureTextEntry</span><span id="84fd" class="kt ku hi kp b fi la kw l kx ky">textContentType="password"</span><span id="0dcb" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="5c96" class="kt ku hi kp b fi la kw l kx ky">&lt;Field</span><span id="32c6" class="kt ku hi kp b fi la kw l kx ky">component={AppFormField}</span><span id="ccd3" class="kt ku hi kp b fi la kw l kx ky">name="confirmPassword"</span><span id="798f" class="kt ku hi kp b fi la kw l kx ky">placeholder="Confirm Password"</span><span id="8dd9" class="kt ku hi kp b fi la kw l kx ky">secureTextEntry</span><span id="3357" class="kt ku hi kp b fi la kw l kx ky">textContentType="password"</span><span id="f249" class="kt ku hi kp b fi la kw l kx ky">/&gt;</span><span id="ad15" class="kt ku hi kp b fi la kw l kx ky">&lt;AppFormSubmitButton title="Submit" /&gt;</span><span id="e25a" class="kt ku hi kp b fi la kw l kx ky">&lt;/AppForm&gt;</span><span id="5afb" class="kt ku hi kp b fi la kw l kx ky">&lt;/&gt;</span><span id="c85a" class="kt ku hi kp b fi la kw l kx ky">);</span><span id="228d" class="kt ku hi kp b fi la kw l kx ky">};</span><span id="c422" class="kt ku hi kp b fi la kw l kx ky">export default SignUpForm;</span></pre><p id="2f23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们现在有了函数形式和简洁的代码。现在，您可以轻松自定义表单的外观。</p><p id="d281" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在这里找到迄今为止的所有代码= &gt;<a class="ae lc" href="https://github.com/shresthaprince/rnsignupdemo" rel="noopener ugc nofollow" target="_blank">https://github.com/shresthaprince/rnsignupdemo</a>(在主分支)</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><p id="cc26" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="kj">让我知道你是如何找到这个教程的，如果你想让我就某个特定的主题再做一个。</em> </strong></p></div></div>    
</body>
</html>