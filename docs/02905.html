<html>
<head>
<title>Using the Right Performance Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用正确的绩效指标</h1>
<blockquote>原文：<a href="https://medium.com/codex/using-the-right-performance-metrics-3708ef765fe?source=collection_archive---------15-----------------------#2021-08-10">https://medium.com/codex/using-the-right-performance-metrics-3708ef765fe?source=collection_archive---------15-----------------------#2021-08-10</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="147b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一些最广泛使用的性能指标是准确度、召回率、精确度和F1分数。</p><p id="4f7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">准确性是最广为人知的度量标准，是在实例总数中正确预测的观察值的数量。然而，计算准确度并不总是评估你的机器学习模型的最佳方式，让我们看看为什么。</p><h1 id="9f43" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">准确性并不总是可靠的</h1><p id="46b9" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们的机器学习任务是预测某人是否患有心脏病。</p><p id="8c6a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该模型最终给出了99.5%的准确率。印象深刻吧。但无心脏病者995人，有心脏病者5人。在这种情况下，如果模型被设计为仅预测负面实例，那么它将获得99.5%的相同准确度。当数据集不平衡时，使用精度来评估模型并不是一个好主意。在这里，我们可以使用精确度和召回率作为可靠的性能指标。</p><h1 id="0ea7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">什么是精度和召回率？</h1><p id="15ac" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">为了理解什么是精确和召回，让我们观察一个混淆矩阵。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/ecb758646c8d65ff244f1ea4e6b859fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zEaG2B6OX8P3_QimqBwMg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">作者图片</figcaption></figure><p id="fa09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在混淆矩阵中，有以下值:</p><ul class=""><li id="d0b6" class="kw kx hi ih b ii ij im in iq ky iu kz iy la jc lb lc ld le bi translated">真阳性:患者实际上有心脏病，并且模型预测患者有心脏病</li><li id="476f" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">假阳性:病人没有心脏病，但是模型预测病人有心脏病</li><li id="97d1" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">真正的否定:病人没有心脏病，模型预测病人没有心脏病</li><li id="5e3e" class="kw kx hi ih b ii lf im lg iq lh iu li iy lj jc lb lc ld le bi translated">假阴性:病人实际上有心脏病，但是模型预测病人没有心脏病</li></ul><p id="0152" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当数据集不平衡时，精确度和召回率提供了一种评估模型性能的方法。精度，也称为正预测值，是正预测总数中正确预测的正观测值。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lk"><img src="../Images/b1032bd3feb8fced06f11c687a3f7b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*GziJgNbyFaP7if-NPUdtXA.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">作者图片</figcaption></figure><p id="f8b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据Will Koehrsen的“超越准确性:精确度和召回”,精确度是相关案例的数量超过我们的模型所说的相关案例的数量</p><p id="c831" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">召回，也称为敏感度，是在真阳性值的总数中正确预测的阳性的数量。Koehresn指出，召回率是数据集中所有相关案例的比例。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ll"><img src="../Images/a9d0ef9384b9cadae9fdf399e2450d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*0CoElcjbnl9uQgdtBUlSkw.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">作者图片</figcaption></figure><h1 id="bc8f" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">精确度和召回率之间的权衡</h1><p id="2687" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">存在一个问题:随着召回率的增加，精确度将降低，反之亦然。由于这个原因，在精确度和召回率之间有一个折衷。基于我们的模型试图解决的问题，我们可能想要更高的召回率和更低的精确度，或者更高的精确度和更低的召回率。</p><p id="12d8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们回头看看我们的心脏病例子。我们希望我们的模型尽量减少假阴性的数量，因为我们希望避免将患者诊断为健康，即使他们可能患有心脏病。这样，我们的病人可以尽快接受治疗。在这种情况下，我们希望最大限度地提高查全率，因为我们希望在数据集中找到所有相关的病例(心脏病患者)。</p><p id="dd24" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，如果我们想将电子邮件归类为垃圾邮件或“垃圾邮件”呢？在这个例子中，我们希望我们的模型避免将“垃圾”邮件归类为垃圾邮件，以防止重要邮件丢失。因此，我们认为正确预测的“垃圾”邮件的数量比“垃圾”邮件的总数更重要。因此，对我们来说，精确度比召回更重要，因为我们希望尽量减少误报。</p><h1 id="0a22" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">F1分数</h1><p id="c273" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">对于大多数机器学习模型来说，你希望找到精确度和召回率之间的平衡。F1分数，另一个性能指标，可以告诉我们准确率和召回率之间的平衡程度。为了计算F1分数，你要取精确和回忆的调和平均值，因为这将惩罚异常值。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lm"><img src="../Images/a8702edfcbbdc95c9c237753a8a8cfd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYBMluKsdgVCLobazVrhVQ.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">作者图片</figcaption></figure><p id="2e5c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">回到我们的心脏病模型，如果我们的分类器预测所有患者患有心脏病，我们的召回率将是1，我们的精确度将是0。这将导致F1分数等于0。要获得1分的F1值，精确度和召回率都必须等于1。</p><h1 id="3fa3" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">受试者工作特征曲线</h1><p id="1610" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我们还可以通过绘制ROC曲线(接收操作特性曲线)来找到精确度和召回率之间的完美平衡。ROC曲线的想法是可视化当模型使用不同的阈值时，精确度和召回率如何变化。阈值类似于一个截止标记，该示例将被认为是积极的。例如，在心脏病分类问题中，阈值0.3将表明任何具有0.3或更大可能性患有心脏病的患者将被我们的模型分类为阳性。默认阈值为0.5。较低的阈值增加了召回率，而较高的阈值增加了精确度，因此导致了折衷。较低的阈值允许我们最小化假阴性，而较高的阈值允许我们最小化假阳性。</p><p id="2a39" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个ROC曲线的例子:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/d1653f73bc5eae7e3ae7891e3054ee6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTUkq1Hv5YeNJs0ATgGrbg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">作者图片</figcaption></figure><p id="984b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ROC曲线比较了真阳性率和假阳性率。</p><p id="5705" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">根据上图，0.2和0.4之间的阈值似乎是合理的，因为真阳性率大于假阳性率。</p><p id="7f88" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">图中的黄色阴影位置代表AUC(曲线下面积),面积越大表示性能越好。红色线比黑色虚线有更好的AUC分数。黑色虚线的AUC值为0.5。</p><h1 id="08df" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">结论</h1><p id="1fb0" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">根据机器学习问题，最好决定最大化哪个性能指标，无论是精度、召回率还是准确度。如果您正在寻找精确度和召回率之间的平衡，利用F1分数和ROC图也是一个好主意。</p><p id="5a15" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章能够让您对这些重要的评估指标有所了解。</p><p id="0ef4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:我建议查看以下文章，了解更多详细信息:</p><p id="0ffe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">https://towards data science . com/beyond-accuracy-precision-and-recall-3da 06 bea 9f 6c #:~:text = The % 20 idea % 20 is % 20 relative % 20 simple，a % 20 positive % 20 in % 20 our % 20 model。&amp;text = By % 20 altering % 20 threshold % 2C % 20 we，right % 20 precision % 20 vs % 20 recall % 20 balance。</p><p id="b963" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae lo" href="https://towardsdatascience.com/accuracy-precision-recall-or-f1-331fb37c5cb9" rel="noopener" target="_blank">https://towards data science . com/accuracy-precision-recall-or-f1-331 FB 37 C5 CB 9</a></p></div></div>    
</body>
</html>