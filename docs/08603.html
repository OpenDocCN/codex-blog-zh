<html>
<head>
<title>Data Engineering with Bash Script and MySQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Bash脚本和MySQL的数据工程</h1>
<blockquote>原文：<a href="https://medium.com/codex/etl-using-bash-script-and-mysql-bc2b08b89bbb?source=collection_archive---------4-----------------------#2022-08-20">https://medium.com/codex/etl-using-bash-script-and-mysql-bc2b08b89bbb?source=collection_archive---------4-----------------------#2022-08-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3e40" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">通过学习Bash脚本，提高您的数据加载和ETL(提取、转换和加载)技能。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/44a11b0f334c6a4f666bad1cd8f09828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGHkpxzlnzwfR6yBG1JgWw.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">凯文·Ku在<a class="ae jn" href="https://unsplash.com/s/photos/database?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="1548" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated"><strong class="ak">问题陈述</strong></h1><p id="3a3c" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我们先来了解一下问题陈述。假设来自不同源系统的数据作为CSV文件被提供到一个公共目录中。您的工作是创建表，从目录中读取数据，如果是满负载，则截断表，如果是增量负载，则只将数据加载到MySQL数据库中。进行一些基本的转换，并将数据加载到转换表中。将转换表上传为CSV格式的业务文件，并将源文件存档。并且每天安排工作。</p></div><div class="ab cl lc ld gp le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="hb hc hd he hf"><h1 id="1e80" class="jo jp hi bd jq jr lj jt ju jv lk jx jy io ll ip ka ir lm is kc iu ln iv ke kf bi translated">使用Bash脚本的ETL</h1><p id="7886" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我们将使用<strong class="ki hj">产品(P_ID，产品名称，描述)</strong>主数据、<strong class="ki hj">客户(C_ID，客户名称，年龄)</strong>主数据和<strong class="ki hj">销售(S_ID，C_ID，P_ID，数量，金额)</strong>交易数据。假设PRODUCT.csv文件共享在/home/user/PRODUCT目录中，CUSTOMER.csv文件共享在/home/user/CUSTOMER目录中，SALES.csv文件共享在/home/user/SALES目录中。</p><p id="6664" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">让我们将PRODUCT.csv文件加载到数据库中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="bbf0" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">加载CUSTOMER.csv文件的步骤相同</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="3ac0" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">对于SLAES.csv文件，我们将遵循类似的步骤，只是我们不会截断该表，因为它是一个事务表。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="207d" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">现在所有的数据都被加载到MySQL数据库中。现在，我们将开发一个存储过程来填充转换表，并从脚本中运行SP。SP的目的是用客户名称、产品名称、数量和金额填充转换表。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="9d75" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">现在，我们将从脚本中调用存储过程，从转换表中生成一个文件，并上传业务文件，然后将其从目录中删除。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="b77a" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">现在我们需要编写一个cronjob来定期调度任务。该任务现在将在每天下午23:59运行。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="fee0" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">我们已经使用bash脚本完成了ETL之旅。</p><p id="a3e8" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">感谢您的阅读！</p><p id="1b53" class="pw-post-body-paragraph kg kh hi ki b kj lo ij kl km lp im ko kp lq kr ks kt lr kv kw kx ls kz la lb hb bi translated">敬请关注更多内容。</p></div></div>    
</body>
</html>