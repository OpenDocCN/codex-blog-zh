<html>
<head>
<title>5 Advanced Code snippets for your Python programs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python程序的5个高级代码片段</h1>
<blockquote>原文：<a href="https://medium.com/codex/5-advanced-code-snippets-for-your-python-programs-3377baa3d544?source=collection_archive---------1-----------------------#2021-12-19">https://medium.com/codex/5-advanced-code-snippets-for-your-python-programs-3377baa3d544?source=collection_archive---------1-----------------------#2021-12-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="b82c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用它们，让人们惊奇</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/2b2fa09f0582ef4987f298b44c3e9c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iPbAYnsgpHSZJ6pA"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">乔·耶茨在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="77fe" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">今天，我将与您分享《Python技巧:这本书》中的一些片段。这本书有很多关于我们日常使用的一些片段的深入信息，帮助你理解它们是如何工作的。</p><p id="7586" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我建议你读完这篇文章后自己看看。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="8bff" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">1.使用__repr__ &amp; __str__方法可以更好地表示类对象</h1><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="c90b" class="lo ks hi lk b fi lp lq l lr ls">&gt;&gt;&gt; class Glass:<br/>...     def __init__(self, reflct):<br/>...             self.reflct = reflct<br/>...</span><span id="42ec" class="lo ks hi lk b fi lt lq l lr ls">&gt;&gt;&gt; Glass('MIRROR')</span><span id="0878" class="lo ks hi lk b fi lt lq l lr ls">&gt;&gt;&gt; glass = Glass('MIRROR')<br/>&gt;&gt;&gt; glass</span><span id="8ade" class="lo ks hi lk b fi lt lq l lr ls">#OUTPUT<br/><strong class="lk hj">&lt;__main__.Glass object at 0x0000028D48967550&gt;</strong></span><span id="2df8" class="lo ks hi lk b fi lt lq l lr ls">&gt;&gt;&gt; print(glass)</span><span id="026f" class="lo ks hi lk b fi lt lq l lr ls">#OUTPUT<br/><strong class="lk hj">&lt;__main__.Glass object at 0x0000028D48967550&gt;</strong></span></pre><p id="b122" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对象的字符串表示没有被覆盖，这就是你看到这个的原因。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="6d66" class="lo ks hi lk b fi lp lq l lr ls">&gt;&gt;&gt; class Glass:<br/>...<br/>...     def __init__(self, reflct):<br/>...         self.reflct = reflct<br/>...<br/>...     def __str__(self):<br/>...         print('inside __str__ method')<br/>...<br/>...     def __repr__(self):<br/>...         print('inside __repr__ method')<br/>...</span><span id="6dfe" class="lo ks hi lk b fi lt lq l lr ls">&gt;&gt;&gt; glass = Glass('MIRROR')</span><span id="a518" class="lo ks hi lk b fi lt lq l lr ls"># This will all statements will use class __str__ method<br/>&gt;&gt;&gt; '{}'.format(glass)<br/>&gt;&gt;&gt; str(glass)<br/>&gt;&gt;&gt; print(glass)</span><span id="d887" class="lo ks hi lk b fi lt lq l lr ls">#OUTPUT<br/>inside __str__ method</span><span id="a99a" class="lo ks hi lk b fi lt lq l lr ls"># This will use __repr__ method<br/>&gt;&gt;&gt; glass</span><span id="2ef8" class="lo ks hi lk b fi lt lq l lr ls">#OUTPUT<br/>inside __repr__ method</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="8444" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">2.在Python中克隆对象</h1><p id="db60" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">在Python中，赋值语句不创建对象的副本，它们只将名称绑定到一个对象。</p><h2 id="8e18" class="lo ks hi bd kt lz ma mb kx mc md me lb jx mf mg ld kb mh mi lf kf mj mk lh ml bi translated">浅拷贝</h2><p id="66e0" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">它创建一个新的集合对象，然后用在原始。因此，不会创建子对象本身的副本。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="59e5" class="lo ks hi lk b fi lp lq l lr ls">a = [[1, 2, 3], [4, 3, 5]]<br/>b = list(a) # makes a shallow copy<br/>a[0][0] = 'x'</span><span id="6d5b" class="lo ks hi lk b fi lt lq l lr ls">#OUTPUT<br/><strong class="lk hj">Before</strong><br/>[[1, 2, 3], [4, 3, 5]]<br/>[[1, 2, 3], [4, 3, 5]]<br/><strong class="lk hj">After</strong><br/>[['x', 2, 3], [4, 3, 5]]<br/>[['x', 2, 3], [4, 3, 5]]</span></pre><h2 id="30be" class="lo ks hi bd kt lz ma mb kx mc md me lb jx mf mg ld kb mh mi lf kf mj mk lh ml bi translated">深层拷贝</h2><p id="19c1" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">它创建一个新的集合对象，然后用原始集合中找到的子对象的副本递归地填充它。这样，它会创建原始对象及其所有子对象的完全独立的克隆。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="b438" class="lo ks hi lk b fi lp lq l lr ls">import copy</span><span id="9a29" class="lo ks hi lk b fi lt lq l lr ls">a = [[1, 2, 3], [4, 3, 5]]<br/>b = copy.deepcopy(a)</span><span id="0334" class="lo ks hi lk b fi lt lq l lr ls">a[0][0] = 'x'</span><span id="4616" class="lo ks hi lk b fi lt lq l lr ls">#OUTPUT<br/><strong class="lk hj">Before</strong><br/>[[1, 2, 3], [4, 3, 5]]<br/>[[1, 2, 3], [4, 3, 5]]<br/><strong class="lk hj">After</strong><br/>[['x', 2, 3], [4, 3, 5]]<br/>[[1, 2, 3], [4, 3, 5]]</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="fae6" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">3.内嵌列表理解</h1><p id="67a3" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">以Pythonic方式填充列表的最佳方式是只添加表达式和循环。</p><p id="03fd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您是c或c++开发人员，这种一行程序一开始很难理解，但是在Python中，一旦您习惯了这种语言，一行程序就非常易读。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="0d37" class="lo ks hi lk b fi lp lq l lr ls">values = [expression for item in collection]</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="d5b8" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">3.获取列表中第N大或第N小的元素</h1><p id="87d1" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">这个代码片段在日常场景中可能没什么用，但是有时候你可能需要列表中第N个最大/最小的元素，你可能认为你必须从头开始编写逻辑，但是害怕没有内置模块来拯救你。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="d4ef" class="lo ks hi lk b fi lp lq l lr ls">import heapq<br/><br/>scores = [1, 10, 11, 2, 5, 6]<br/><br/>print(heapq.nlargest(3, scores))  # [11, 10, 6]<br/>print(heapq.nsmallest(5, scores))  # [1, 2, 5, 6, 10]</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="e230" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">4.像专业人士一样使用装修工！</h1><p id="15eb" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated">现在，在深入装饰者的概念之前，将是一个极好的时机来刷新您对Python中的<em class="mm">一级</em>函数的属性的记忆。</p><div class="mn mo ez fb mp mq"><a href="https://python.plainenglish.io/you-would-have-never-used-function-this-way-32374b7df8ba" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">你能用Python函数做什么</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">Python函数太疯狂了！</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">python .平原英语. io</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jh mq"/></div></div></a></div><p id="ec4e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Decorators一开始很复杂，但却是非常有用的特性，你会在第三方框架和Python标准库中经常遇到。</p><p id="6aad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Decorators允许您定义可重用的构建块，这些构建块可以改变或扩展其他功能的行为。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="caf8" class="lo ks hi lk b fi lp lq l lr ls">def uppercase(func):<br/>    def wrapper():<br/>        originalResult = func()<br/>        modifiedResult = originalResult.upper()<br/>        return modifiedResult<br/>    return wrapper</span><span id="c7c2" class="lo ks hi lk b fi lt lq l lr ls"><a class="ae jn" href="http://twitter.com/uppercase" rel="noopener ugc nofollow" target="_blank">@uppercase</a><br/>def greet():<br/>    return 'Hello World!'</span><span id="b343" class="lo ks hi lk b fi lt lq l lr ls">print(greet())</span><span id="2ce5" class="lo ks hi lk b fi lt lq l lr ls"># OUTPUT <br/>HELLO WORLD!</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="12f0" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">5.链式映射:将多个字典作为单个映射进行搜索</h1><p id="a63a" class="pw-post-body-paragraph jo jp hi jq b jr lu ij jt ju lv im jw jx lw jz ka kb lx kd ke kf ly kh ki kj hb bi translated"><em class="mm">系列。ChainMap </em>数据结构将多个字典组合成一个映射。</p><p id="7768" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">查找逐个搜索底层映射，直到找到一个键。</p><p id="e7b2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">插入、更新和删除仅影响添加到链中的第一个映射。</p><pre class="iy iz ja jb fd lj lk ll lm aw ln bi"><span id="9583" class="lo ks hi lk b fi lp lq l lr ls">from collections import ChainMap<br/>d1 = { 'a': 1, 'b': 2 }<br/>d2 = { 'c': 3, 'd': 4 }<br/>chain = ChainMap(d1, d2)</span><span id="cb6e" class="lo ks hi lk b fi lt lq l lr ls"># ChainMap searches each collection in the chain<br/># from left to right until it finds the key (or fails):<br/>print(chain)</span><span id="dbd6" class="lo ks hi lk b fi lt lq l lr ls"># OUTPUT <br/>ChainMap({'a': 1, 'b': 2}, {'c': 3, 'd': 4})</span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="7aa2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您喜欢这篇文章，并且想了解更多关于Python的内容，请查看这些文章。</p><div class="mn mo ez fb mp mq"><a href="https://python.plainenglish.io/python-functions-that-make-life-easier-9d0c41b986a8" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">让生活更简单的5个Python函数</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">让生活更简单的Python函数列表。</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">python .平原英语. io</p></div></div><div class="mz l"><div class="nf l nb nc nd mz ne jh mq"/></div></div></a></div><div class="mn mo ez fb mp mq"><a href="https://python.plainenglish.io/if-you-are-using-assert-you-must-read-this-7256e46dc816" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">停止使用Assert进行数据验证</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">对于那些使用断言操作进行数据验证的人来说，这是一篇必读的文章。</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">python .平原英语. io</p></div></div><div class="mz l"><div class="ng l nb nc nd mz ne jh mq"/></div></div></a></div><div class="mn mo ez fb mp mq"><a href="https://python.plainenglish.io/top-python-guides-books-github-repositories-a397a59a4f52" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">顶级Python指南、书籍和GitHub知识库</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">学习Python的指南、书籍和GitHub库列表。</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">python .平原英语. io</p></div></div><div class="mz l"><div class="nh l nb nc nd mz ne jh mq"/></div></div></a></div></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="4269" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可以在我的个人资料中找到更多这样的内容。</p><div class="mn mo ez fb mp mq"><a rel="noopener follow" target="_blank" href="/@rahulbhatt1899"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">拉胡尔·布哈特-中等</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">阅读媒体上的拉胡尔·布哈特作品。Python，JS，满足好奇心的编码打包文章。少数游戏…</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">medium.com</p></div></div><div class="mz l"><div class="ni l nb nc nd mz ne jh mq"/></div></div></a></div></div></div>    
</body>
</html>