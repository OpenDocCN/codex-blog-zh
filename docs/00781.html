<html>
<head>
<title>Walk-through on IBM DB2 Schema</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IBM DB2模式演练</h1>
<blockquote>原文：<a href="https://medium.com/codex/walk-through-on-ibm-db2-schema-97aa428f9f32?source=collection_archive---------6-----------------------#2021-03-18">https://medium.com/codex/walk-through-on-ibm-db2-schema-97aa428f9f32?source=collection_archive---------6-----------------------#2021-03-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/4c16cb7f4629c24b190b3ef770417177.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/0*1wCzQr7YMgEiZAMB.png"/></div></figure><p id="2f7d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">IBM Db2是一种混合数据管理产品，它提供了一大套由人工智能驱动的特性，用于处理内部以及私有和公共云环境中的结构化和非结构化数据。Db2构建在一个智能的公共SQL引擎上，侧重于可伸缩性和灵活性。因此，数据库管理人员和数据科学家都会被IBM DB2迷住。</p><h1 id="2943" class="jk jl hi bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">什么是图式？</h1><p id="029e" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">模式是数据库对象的集合，包括表、视图、触发器、函数和索引，它提供了一种对几个对象使用相同自然名称的方法，并防止对这些对象的模糊引用。一个模式与一个用户名相关联，该用户名称为模式所有者，是逻辑上相关的数据库对象的所有者。简单地说，我们可以说模式本身就是一个数据库对象。</p><h2 id="0813" class="kn jl hi bd jm ko kp kq jq kr ks kt ju ix ku kv jy jb kw kx kc jf ky kz kg la bi translated"><strong class="ak">创建模式</strong></h2><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="3435" class="kn jl hi lg b fi lk ll l lm ln"><strong class="lg hj">CREATE SCHEMA</strong> schema_name <strong class="lg hj">AUTHORIZATION</strong>[AUTHORIZATION owner_name]</span></pre><p id="2412" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用CREATE SCHEMA语句创建模式，将当前用户或指定的授权ID记录为模式所有者。</p><p id="0223" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当一个新的数据库被创建时，PUBLIC被赋予<strong class="io hj"> <em class="lo"> IMPLICIT_SCHEMA </em> </strong>数据库权限。<br/> 1。具有隐式模式权限的用户可以通过创建对象并指定不存在的模式名称来定义模式。<br/> 2。隐式创建的模式的所有者是SYSIBM，PUBLIC被授予在其中构造对象的权限。<br/> 3。隐式创建模式时，会授予CREATEIN权限，允许任何用户在该模式中创建其他对象。</p><p id="1ecb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">要控制谁可以隐式创建数据库所需的模式对象，必须使用指定的<strong class="io hj"> <em class="lo">限制性</em> </strong>选项创建数据库。当数据库是限制性的时，PUBLIC在模式上没有CREATEIN特权。</p><p id="d6db" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">具有ACCESSCTRL或SECADM权限的用户可以更改用户对任何模式拥有的特权。一些架构名称被保留。比如内置函数属于SYSIBM模式，预装的用户自定义函数属于SYSFUN模式。</p><p id="7d7c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">为了更好地理解，我们可以放在一起，因为创建模式对象只有三种方式:</p><ul class=""><li id="69ad" class="lp lq hi io b ip iq it iu ix lr jb ls jf lt jj lu lv lw lx bi translated">任何用户都可以在CREATE SCHEMA语句中用自己的授权名创建模式。</li><li id="707f" class="lp lq hi io b ip ly it lz ix ma jb mb jf mc jj lu lv lw lx bi translated">任何具有DBADM权限的用户都可以直接创建任何不存在的模式，并可以选择将另一个用户指定为该模式的所有者。</li><li id="2ad8" class="lp lq hi io b ip ly it lz ix ma jb mb jf mc jj lu lv lw lx bi translated">任何具有DBADM授权的用户都拥有隐式模式数据库权限，这允许他们在创建其他数据库对象时使用任何名称创建模式。</li></ul><h2 id="ada0" class="kn jl hi bd jm ko kp kq jq kr ks kt ju ix ku kv jy jb kw kx kc jf ky kz kg la bi translated"><strong class="ak">复制模式</strong></h2><p id="be20" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">一旦一个模型模式被创建，我们就可以用它作为创建新版本的原型。这可以通过两种方式实现:</p><ol class=""><li id="7182" class="lp lq hi io b ip iq it iu ix lr jb ls jf lt jj md lv lw lx bi translated">ADMIN_COPY_SCHEMA过程—在同一数据库中复制单个模式。</li></ol><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="b7d5" class="kn jl hi lg b fi lk ll l lm ln">CALL SYSPROC.ADMIN_COPY_SCHEMA('SOURCE_SCHEMA', 'TARGET_SCHEMA',     'COPY', NULL, 'SOURCETS1 , SOURCETS2', 'TARGETTS1, TARGETTS2, SYS_ANY', 'ERRORSCHEMA', 'ERRORNAME')</span></pre><p id="9ff1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">2 <strong class="io hj">。带有<strong class="io hj"> -co COPY </strong>动作的db2move </strong>实用程序——将一个或多个模式从源数据库复制到新模式下的目标数据库。</p><p id="896f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下面的<strong class="io hj"> db2move </strong> <strong class="io hj"> -co COPY </strong>选项示例将模式<strong class="io hj"> ABC </strong>从示例数据库复制到目标数据库，并将其重命名为<strong class="io hj"> XYZ </strong>:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="4651" class="kn jl hi lg b fi lk ll l lm ln">db2move sample COPY -sn BAR -co target_db  target schema_map <br/>      "((ABC,XYZ))" -u userid -p password</span></pre><h2 id="43e7" class="kn jl hi bd jm ko kp kq jq kr ks kt ju ix ku kv jy jb kw kx kc jf ky kz kg la bi translated">删除模式</h2><p id="9ef3" class="pw-post-body-paragraph im in hi io b ip ki ir is it kj iv iw ix kk iz ja jb kl jd je jf km jh ji jj hb bi translated">在删除一个模式中的所有对象之前，必须将其删除或转移到另一个模式。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="7c9b" class="kn jl hi lg b fi lk ll l lm ln">DROP SCHEMA name RESTRICT</span></pre><p id="b96d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">RESTRICT关键字规定了一条规则，即不能在从数据库中删除的模式中指定任何对象。关键字RESTRICT不是可选的。</p><p id="3703" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">参考:<a class="ae me" href="https://www.ibm.com/in-en/analytics/db2" rel="noopener ugc nofollow" target="_blank">https://www.ibm.com/in-en/analytics/db2</a></p></div></div>    
</body>
</html>