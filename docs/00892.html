<html>
<head>
<title>Android UI testing with magical tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用神奇的技巧测试Android用户界面</h1>
<blockquote>原文：<a href="https://medium.com/codex/android-ui-testing-for-beginners-e775b4eb692e?source=collection_archive---------14-----------------------#2021-03-23">https://medium.com/codex/android-ui-testing-for-beginners-e775b4eb692e?source=collection_archive---------14-----------------------#2021-03-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="8a6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个开发者和一个高效的开发者有很大的区别。一个开发人员可以编写一个有效的代码，但是一个高效的开发人员不仅要编写一个有效的代码，还要使用强大的工具来提高工作的整体质量和相关人员的效率。有这么多强大的工具，开发人员可以通过它们在很大程度上减少繁重的工作，但是如果你不知道这些工具，你只是在浪费时间做你不应该做的事情。</p><p id="d230" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为一名优秀的开发人员，你的代码应该足够健壮，QA/测试团队应该能够通过构建，而不会出现任何问题。可能吗？？？是的，毫无疑问，甚至在一些公司根本没有QA/测试团队，他们相信开发人员就是QA，QA就是开发人员。所以问题是他们是如何管理的？这样的开发(开发人员做QA)花了这么多时间来发布吗？因此，为了回答这个问题，让我明确地告诉你，这些开发人员是高效的开发人员，他们知道增强他们工作的工具和框架。</p><p id="af7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">移动平台开发人员应该知道哪些覆盖测试用例和UI测试的工具或框架？</p><p id="2774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们谈谈android，如果你正在使用Java或Kotlin开发Android应用程序，那么有一些测试框架可以处理单元测试和工具测试，即<strong class="ih hj"> Junit </strong>、<strong class="ih hj"> espresso等</strong>。现在，当你知道你将要开发的特性的细节时，千万不要马上跳到编码上，首先通过思考你应该如何编写函数来计划你的代码，这样你就可以将它们包含在你的单元测试中。在单元测试不可预见的代码中包含单元测试变得非常困难，然后开发人员开始重新编写他们的代码来支持单元测试或结束编写不值得使用的单元测试。</p><p id="925e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你知道<strong class="ih hj"> Espresso测试插件，在android中使用<strong class="ih hj"> espresso </strong>进行仪器测试要快得多。</strong>编写仪器测试有两种选择，一种是自己编写完整的代码，这需要很长时间，而如果使用Espresso测试插件，则只需要几分钟。对我来说，编写覆盖用户旅程的UI测试花了2天时间，而当我使用这个<strong class="ih hj"> Espresso测试插件</strong>来记录我的测试时，花了大约30-35分钟。</p><p id="9a00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">如何在Android中使用Espresso进行单元测试和仪器测试？</strong></p><p id="3942" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在应用程序的build.gradle文件中进行以下更改:</p><p id="f85c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj">默认配置</strong>中进行以下更改:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f018" class="jm jn hi ji b fi jo jp l jq jr">defaultConfig {<br/>  ...</span><span id="3d05" class="jm jn hi ji b fi js jp l jq jr">testInstrumentationRunner <strong class="ji hj">"android.support.test.runner.AndroidJUnitRunner"</strong></span><span id="2bf2" class="jm jn hi ji b fi js jp l jq jr"><strong class="ji hj">..<br/> <br/></strong>}</span></pre><p id="3d2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在您的<strong class="ih hj">依赖关系中</strong>进行这些更改:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e4f6" class="jm jn hi ji b fi jo jp l jq jr">dependencies {<br/>...<br/><strong class="ji hj"><br/>    </strong>testImplementation <strong class="ji hj">'junit:junit:4.12'<br/>    </strong>androidTestImplementation <strong class="ji hj">'com.android.support.test:runner:1.0.2'</strong></span><span id="2b25" class="jm jn hi ji b fi js jp l jq jr">androidTestImplementation <strong class="ji hj">'com.android.support.test:rules:1.0.2'<br/> <br/></strong>androidTestImplementation <strong class="ji hj">'com.android.support.test.espresso:espresso-core:3.0.2'<br/><br/><br/></strong>}</span></pre><p id="9f73" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您已经为运行您的单元和仪器测试做好了准备。在物理设备或模拟器上清理、构建和运行您的android项目。现在，通过进入首选项&gt;插件并搜索<strong class="ih hj">测试记录器</strong>来启用测试记录器插件，然后启用它。参考下面的截图:</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es jt"><img src="../Images/78be95bb5967b65c3f97c564018b79ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*II9Mp30EDruu1EgG_x2WMg.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">启用测试记录器插件</figcaption></figure><h1 id="d6a3" class="kf jn hi bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">神奇的提示</h1><p id="107d" class="pw-post-body-paragraph if ig hi ih b ii lc ik il im ld io ip iq le is it iu lf iw ix iy lg ja jb jc hb bi translated">在Record espresso test的帮助下，当用户通过交互使用你的应用程序时，你将能够模仿你的应用程序。</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es lh"><img src="../Images/0faeaa0dd84116a247bbe9dbf056ec4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKF7ABtypDRSZprn94asZQ.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">记录浓缩咖啡测试</figcaption></figure><p id="b8e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面提到的步骤会自动为你的项目生成代码，无论是Java还是Kotlin。</p><figure class="jd je jf jg fd ju er es paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="er es li"><img src="../Images/10d39667c432440aadc3755b87e3e822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o36mPpoDJqvbzwAebVBQHQ.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">启用记录espresso测试后自动生成的Java代码</figcaption></figure><p id="ac69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">蛋糕尖上的樱桃</strong></p><p id="0a52" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为你在模仿你的应用程序，所以你在两次交互之间的等待时间或暂停没有被注册或记录，所以你需要在你的代码中提供一些等待时间，在任何performClick之前或之后。因此，如果您的操作需要一些等待时间，如等待api调用的结果或动画过渡时间，那么您需要手动提供等待时间来查看实际行为。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1bb4" class="jm jn hi ji b fi jo jp l jq jr">appCompatButton.perform(<em class="lj">click</em>());</span><span id="aec6" class="jm jn hi ji b fi js jp l jq jr">Thread.sleep(1000);<br/>//Adding thread.sleep will wait 1 second before clicking back button and it will be visible to your eyes </span><span id="117a" class="jm jn hi ji b fi js jp l jq jr"><em class="lj">pressBack</em>();<br/></span></pre></div></div>    
</body>
</html>