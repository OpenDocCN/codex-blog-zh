<html>
<head>
<title>Life Expectancy Calculation: learn to take ownership over data constructions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预期寿命计算:学会掌控数据构造</h1>
<blockquote>原文：<a href="https://medium.com/codex/life-expectancy-calculation-learn-to-take-ownership-over-data-constructions-4fee8fde9fd8?source=collection_archive---------8-----------------------#2021-08-30">https://medium.com/codex/life-expectancy-calculation-learn-to-take-ownership-over-data-constructions-4fee8fde9fd8?source=collection_archive---------8-----------------------#2021-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="9cdd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为害羞而不敢开始的人介绍数据挖掘</p><h1 id="f6d3" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">介绍</h1><p id="b253" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">暑期和假期给了你更多的自由时间，也给了你更多的机会去质疑一年中你所收到的所有信息。我的一个朋友想知道预期寿命是如何计算的。因为我目前正在学习数据挖掘，所以我决定拿这个话题做个练习。这个计算似乎是某种平均值，所以应该很容易。然后开始了这一旅程…我现在能够回答我的朋友，但我决定创建这个职位，以帮助那些不满意没有解释的数据结构的人。我认为质疑信息是好的，我们不应该不使用原始数据来得出我们自己的答案。本文档试图帮助人们迈出数据探索的第一步，解释如何用很少的计算技能从零开始计算预期寿命。</p><h1 id="8539" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">关于预期寿命</h1><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/fcd7874a20595a5af21fbd04997878dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K9iyp2GW8IEHj421mkn8wA.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">生命周期</figcaption></figure><p id="eb38" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预期寿命是由国家统计局提供的一个众所周知的指标，它显示了每个国家和每一年从特定年龄开始你可以预期活的时间。通常你会得到某一年出生时的预期寿命，并且趋势是按性别划分的。一个典型的趋势是这样的:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kw"><img src="../Images/288dd410d8a7ca64fa68b431ddea4889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5-t3ysfUh12FHz-N9mFfg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">出生时预期寿命的典型趋势</figcaption></figure><p id="6aaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这一信息的第一个用途是显示预期寿命随着医疗和技术的进步而增长，以及女性比男性长寿。但是是怎么算出来的呢？</p><h1 id="2a3a" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">直觉并不总是好主意</h1><p id="15be" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我的第一个直觉是，他们正在追踪特定年份出生的人口的死亡情况，并且他们正在计算人们死亡时的平均年龄:问题解决了。</p><p id="af3b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法的问题在于，你必须等待特定年份出生的所有人都死去。我出生于1975年，所以我必须等到2090年左右才能知道我的预期寿命是多少。这里有一个主要问题:我也必须等到死了才能计算它。当我们展望遥远的过去时，我天真的直觉是正确的，但预测我从现在开始还能活多少年似乎是低效的。</p><h1 id="fc37" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">基础研究往往令人沮丧</h1><p id="55cd" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">从法语的<a class="ae kx" href="https://fr.wikipedia.org/wiki/Esp%C3%A9rance_de_vie_humaine#Calcul" rel="noopener ugc nofollow" target="_blank">维基百科</a>开始(我是法国人，根据你的语言，你可能有另一个公式)我有这个公式:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ky"><img src="../Images/a09cc2a11d05f60f3e5587b7437c0403.png" data-original-src="https://miro.medium.com/v2/resize:fit:224/format:webp/1*k3KbCjj8XQ6JfJuAX7jZpw.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">预期寿命计算</figcaption></figure><p id="fae6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kz"> pi </em>是年龄I时的生存概率</p><p id="7424" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你不习惯数学，你可能会在这个阶段放弃:这似乎太理论化了，我们应该能够找到一种更实用的方法来计算预期寿命。然后我上了INSEE的网站，这是我们国家统计和经济研究所的网站。他们提供了大量关于人口统计学的数据。数据很容易找到，您可以将结果可视化并下载为趋势或表格。但是他们是如何得到这些数据的就更复杂了。他们提供了许多关于方法论的文件，很难找到数据预测和创建它的计算之间的关系。</p><h1 id="c004" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">找例子:一个切入点？</h1><p id="56a3" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我开始了一项关于预期寿命的研究，使用“如何做”、“举例”或“教程”作为关键词:它给了我更好的结果。我找到一份文件，解释了美国人实际上是如何计算预期寿命的。</p><p id="3421" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是文件的链接:【https://www.cdc.gov/nchs/data/nvsr/nvsr61/nvsr61_03.pdfT2】</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="la lb l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">2008年美国生命表</figcaption></figure><p id="241c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文档中，我学到了新的重要关键词:</p><ul class=""><li id="03c4" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">死亡率表</li><li id="f846" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">致死率</li></ul><p id="6798" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我还理解了以下几点:当你想计算某一年的预期寿命时，你需要关注那一年发生的死亡人数。由于这些人口数量庞大，每年都会有大量的人死亡，从0岁到100岁甚至更大年龄的人都会死亡。您可以开始创建一个表格，显示每年在该年龄死亡的人数。预期寿命是从死者身上推算出来的一年:它并不代表现实，而是一种统计估计。这似乎不是很直观，你可能会怀疑它的有效性。在实践中，统计估计通常会给出一个你可以预期的好主意。这里有一个例子:如果你掷骰子，你数1000次你得到6的次数，你会得到一个接近167的数字(如果你的骰子是标准的)。将这个数除以1000，你掷骰子时很有可能得到6。你掷的骰子越多，你的结果就越准确。将生命表比作骰子，不同的死亡年龄是骰子的不同数字(骰子上大约有120个不同的数字)，每个年龄的死亡人数除以一年的总死亡人数将代表在该年龄死亡的概率。</p><p id="1c57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，这种预测不能预测未来，你必须考虑到情况不会改变。年复一年地追踪这些信息有助于理解这一预测的演变。</p><p id="68cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这一点上，我对这个问题有了更好的理解，但是在试图理解生命表时，我发现了一个名为<code class="du lq lr ls lt b">qx</code>的关键列，它被描述为:</p><p id="6d11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kz">第二栏。死亡概率(qx) </em> —显示年龄x到x + 1之间的死亡概率。例如，对于20-21岁年龄段的男性，死亡概率为0.001225(表2)。这一栏是生命表的基础；所有后续列都是从它派生的。</p><p id="a5bf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个定义没有给出任何关于它是如何被计算出来的指示。我需要更深入地搜索…</p><h1 id="da5e" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">使用新的关键词进一步挖掘</h1><p id="030c" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我在网上搜索的时候把栏目的名字作为关键词:类似于“如何计算生命表的<code class="du lq lr ls lt b">qx</code>栏”。</p><p id="268d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是我如何想出一个新的文件，给出了如何创建生命表的新线索。</p><p id="a86e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个重要的教训:在一项研究的开始，你没有正确的关键词:你的第一个问题不会帮助你找到答案，但解锁关键词。</p><p id="7ebc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是链接:<a class="ae kx" href="https://faculty.weber.edu/jcavitt/WildlifeManagementMaterials/Lab/Life%20Table%20Construction.pdf" rel="noopener ugc nofollow" target="_blank">https://faculty . Weber . edu/JCA vitt/wildlifemanagementsmaterials/Lab/Life % 20 table % 20 construction . pdf</a></p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="la lb l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">生命表构造</figcaption></figure><p id="3cad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该文件有一个建立生命表的协议:</p><ul class=""><li id="81b4" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">您首先需要一个表，其中包含每个年龄(或一年中的一段时间)的一行，以及特定年份中该年龄的死亡人数</li><li id="067e" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">然后，您可以构建一个新列，包含每个年龄活到特定年龄的人:从您的表中添加一个名为<code class="du lq lr ls lt b">surviving</code>的列。从生命表的最后一行开始，你设定存活的人数等于那一年的死亡人数(下一年没有人会活着)。然后你回到过去，爬上你的桌子，把一个时代的死亡人数加到下一个时代的存活人数上。当你到了0岁，你的存活数将会是那一年死亡数的总和</li><li id="275a" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><code class="du lq lr ls lt b">surviving</code>列现在表示在每个年龄减少的虚拟人口，直到所有人口消失</li><li id="e2db" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">您现在可以向生命表中添加一个<code class="du lq lr ls lt b">qx</code>列，该列将计算每个年龄的死亡率，用每个年龄的死亡人数除以存活人数</li><li id="4696" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">您还可以创建一个<code class="du lq lr ls lt b">px</code>列，其中包含每个年龄的存活人口除以初始人口。你会得到一个从1到0的数字，代表仍然生活在x岁的人的比例</li><li id="cc2a" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">使用<code class="du lq lr ls lt b">px</code>列，您现在可以表示一个创建了<code class="du lq lr ls lt b">lx</code>列的标准化总体(在生命表中，他们通常使用100000的总体)。使用数字100000可以更容易地读取数据，并确保每年都有相同的人口样本，这样就可以很容易地将生命表与其他生命表进行比较</li></ul><p id="4acf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lq lr ls lt b">qx</code>列是计算所有其他列的关键元素。我们现在需要从那一栏计算预期寿命。</p><h1 id="416c" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">计算预期寿命</h1><p id="9892" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated"><strong class="ih hj">注:</strong>本段旨在解释计算背后的逻辑。这可能比帮助更令人困惑。不要担心:当我们在一个真实的用例中使用它时，它会变得更加清晰。</p><p id="5e6b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">预期寿命(名为<code class="du lq lr ls lt b">ex</code>)是根据死亡率计算出来的。但是如果我们看看我们不同的知识来源:</p><ul class=""><li id="e1f8" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">维基百科(法语):<code class="du lq lr ls lt b">ex</code>对于一个年龄来说，x是每个年龄的生存概率(1-qx)从x到k (k是一个从0到最老的年龄)的乘积之和(我们将在后面看到如何计算)</li><li id="ab8e" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">“国家生命统计报告”:<code class="du lq lr ls lt b">ex</code>是存活x岁的人所活的总人年数除以x岁时的存活人口数。<em class="kz"> ex = Tx/lx </em></li><li id="6f03" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">“生命表构建”:<code class="du lq lr ls lt b">ex</code>使用与“国家人口动态统计报告”相同的计算方法，但<code class="du lq lr ls lt b">Tx</code>的计算方法不同。</li></ul><p id="e13d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用同一数据源计算预期寿命的这3种方法将给出3种不同的结果。这是一个重要的发现:当你处理数据构造时，方法论总是会对结果产生影响。方法论通常是隐藏的，代表相同概念的不同结构可以共存，增加了混淆和误解。</p><h2 id="a0d9" class="lu je hi bd jf lv lw lx jj ly lz ma jn iq mb mc jr iu md me jv iy mf mg jz mh bi translated">维基百科计算</h2><ul class=""><li id="00ee" class="lc ld hi ih b ii kb im kc iq mi iu mj iy mk jc lh li lj lk bi translated">从死亡率的列<code class="du lq lr ls lt b">qx</code>中，我们可以创建一个新的列<code class="du lq lr ls lt b">plx</code>，包含活到x岁的概率，其中<em class="kz"> plx = 1- qx。</em>这代表等式中的变量<em class="kz"> pi </em></li><li id="567a" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">然后我们可以创建一个列<code class="du lq lr ls lt b">prod_plx</code>，它是从plx(0)到plx(x)的<code class="du lq lr ls lt b">plx</code>值的乘积。举例:<em class="kz"> prod_plx(0) = plx(0) </em>当<em class="kz">prod _ plx(20)= plx(0)* plx(1)* plx(2)*…* plx(20)</em>。这表示等式中π从0到k的乘积</li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ml"><img src="../Images/2e190155b1553d0ec8946607b9731a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:140/format:webp/1*EcMb-0JIg_q906gAxnQ2ww.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">从P0到Pk的圆周率乘积</figcaption></figure><ul class=""><li id="58a0" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">从<code class="du lq lr ls lt b">prod_plx</code>我们现在可以创建列<code class="du lq lr ls lt b">ex</code>，它将计算从x到表中最老年龄的每个prod_plx的总和。举例:<em class="kz">ex(0)= prod _ plx(0)+prod _ plx(1)+prod _ plx(2)+…prod _ plx(117)</em>(其中117是表的最老年龄)当<em class="kz">ex(20)= prod _ plx(20)+prod _ plx(21)+prod _ plx(22)+…prod _ plx(117)</em>。这表示π从k到无穷大的乘积之和</li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mm"><img src="../Images/5e650c27c22e5de7492f16776d846545.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*b24p7D5pZhqIMo4HDJybpA.png"/></div></figure><h2 id="b470" class="lu je hi bd jf lv lw lx jj ly lz ma jn iq mb mc jr iu md me jv iy mf mg jz mh bi translated">“生命表构建”计算</h2><ul class=""><li id="6306" class="lc ld hi ih b ii kb im kc iq mi iu mj iy mk jc lh li lj lk bi translated">从列<code class="du lq lr ls lt b">lx</code>(标准化存活人口)中，我们创建了列<code class="du lq lr ls lt b">Tx</code>，它是当年龄大于或等于x时lx值的总和。通过示例<em class="kz">Tx(0)= LX(0)+LX(1)+LX(2)+…+LX(117)</em>(其中117是表中最老的年龄)当<em class="kz">Tx(20)= Tx(20)+Tx(21)+Tx(22)+…+Tx(117)时</em></li><li id="bfdd" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">通过计算<em class="kz"> ex = Tx/lx </em>创建列<code class="du lq lr ls lt b">ex</code></li></ul><h2 id="5e45" class="lu je hi bd jf lv lw lx jj ly lz ma jn iq mb mc jr iu md me jv iy mf mg jz mh bi translated">“国家生命统计报告”的计算</h2><p id="ff44" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated"><code class="du lq lr ls lt b">ex</code>的计算需要另一个信息源。他们使用名为<code class="du lq lr ls lt b">Lx</code>的列，其定义为:</p><p id="f2e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kz">第五栏。人-年寿命(Lx) </em> —显示在x到x + 1的年龄区间内，假设寿命表群组的人-年寿命数。第5栏中的每个数字代表所有到达较早生日的人在两个指定生日之间的总寿命(以年计)。”</p><p id="5491" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我不明白这一列是如何计算的，我不得不使用Lx计算作为关键字进行另一次搜索。</p><p id="034e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是提供答案的来源:</p><p id="3406" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kx" href="https://www.ssa.gov/OACT/HistEst/CohLifeTables/LifeTableDefinitions.pdf" rel="noopener ugc nofollow" target="_blank">https://www . SSA . gov/OACT/HistEst/CohLifeTables/life table definitions . pdf</a></p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="la lb l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">生命表函数的定义</figcaption></figure><p id="0821" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lq lr ls lt b">Lx</code>列代表某一年龄x的存活人口的总寿命。一些在x岁死亡的人将在x岁零364天死亡，但相反的其他人将在x岁零1天死亡。为了有一个更好的估计，科学家认为一半在x岁死亡的人活不到6个月，另一半活超过6个月。他们创建了Lx列，将在x岁时死亡、生日后存活超过6个月的人纳入预期寿命。则公式为Lx(x) = lx(x)-( 0.5*dx(x))，其中dx是在x岁时死亡的人数。对于第一年，计算另一个值来表示存活超过6个月的婴儿的平均值。因为婴儿的死亡大多发生在前6个月，所以Lx(0)应该低于其他年份的正常分布。我不知道这个公式(可能基于出生月份的平均值)，但是在“国家生命统计报告”文件中，这个公式大约是<em class="kz"> Lx(0) = lx(0)-(0.87*dx(0)) </em>。</p><ul class=""><li id="5172" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">一旦列<code class="du lq lr ls lt b">Lx</code>被计算出来，<code class="du lq lr ls lt b">Tx</code>的计算方式与“生命表构建”中的相同，但是<code class="du lq lr ls lt b">Lx</code>值被求和，而不是<code class="du lq lr ls lt b">lx</code>值。</li><li id="fdd7" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><code class="du lq lr ls lt b">ex</code>的计算方法如下:<em class="kz"> ex = Tx/lx </em>与“生命表构建”中的方法完全相同</li></ul><p id="a1d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你还在吗？</p><p id="aa6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">至少我们可以肯定地知道，计算并不那么困难，但仍然需要一个复杂的协议，它似乎会随着文化的变化而变化。似乎不同来源提供的预期寿命会导致不同的结果，只是因为方法不同。</p><p id="6e66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">嗯，这很有趣，但我们想发表自己的意见。让我们用这些新知识在真实数据上进行测试！</p><h1 id="20b9" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">运用理论:用原始数据计算我们自己的预期寿命</h1><h2 id="8ffb" class="lu je hi bd jf lv lw lx jj ly lz ma jn iq mb mc jr iu md me jv iy mf mg jz mh bi translated">从原始数据中提取有用信息</h2><p id="ecae" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">为了构建一个生命表来帮助我们计算特定年份的预期寿命，我们需要该特定年份的所有死亡人数。我们可以在哪里找到数据？在法国，政府通过统计和人口研究所向公众提供数据。搜索“法国疾病数据”会找到这个网站:</p><div class="mn mo ez fb mp mq"><a href="https://www.data.gouv.fr/en/datasets/fichier-des-personnes-decedees/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hj fi z dy mv ea eb mw ed ef hh bi translated">被拘留者的小说- data.gouv.fr</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">作家的名字从没出现过...</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">www.data.gouv.fr</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne kq mq"/></div></div></a></div><p id="3766" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以找到每年的各种文本文件，包含一年中登记的所有病例。文件的每一行都包含死者的姓名、出生日期、死亡日期和位置信息。我们从那些文件中需要的只是死亡年龄，而这是没有提供的。我们必须提取死亡年份并减去出生日期，然后按年龄对每个死亡进行分组，计算每个年龄的死亡人数，并按年龄从低值(0)到高值(最大死亡年龄)排序。这部分涉及到一个令人恐惧的技能:编码！有人可能认为这太复杂了。幸运的是，有一些语言和框架对操纵数据很有帮助。一种非常受数据科学家欢迎的语言是Python，它有许多在线解释器和许多处理数据的工具。文档和样本是巨大的:带着许多好奇心和一点毅力(或者相反？)我们可以很容易地用几行代码来完成这项工作。这里不会有任何教程，但我将复制我用来证明我们想要实现的不需要很多技能的代码。</p><p id="d01e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我下载了法国2008年的deceases文件，名为“deces-2008.txt ”,然后用Python运行以下代码(使用pandas模块):</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es nf"><img src="../Images/6a5b50037387c8d957cfa35640037f1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPpufRh6sUOZrnRCq0itrg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">Python代码生成3个生命表(总数、男性、女性)</figcaption></figure><p id="8003" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码是从法国人口统计数据的原始文件生成生命表所需要的全部内容。</p><ul class=""><li id="b8ac" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">文件被读取</li><li id="a96f" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">提取性别列(1为男性，2为女性) :提取信息来自数据提供者文档</li><li id="681c" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">出生年份被提取为一个数字</li><li id="8ae5" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">死亡年份被提取为一个数字</li><li id="f709" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">死亡年龄的计算方法是用出生年份减去死亡年份</li><li id="2ed5" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">创建全人口的生命表，按年龄分组行(每一行是一个死亡数):对分组行进行计数，生成<code class="du lq lr ls lt b">deaths</code>列</li><li id="8339" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">与生命表的操作相同，但按性别过滤数据以创建基于性别(男性和女性)的生命表</li><li id="ad1a" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">生命表作为文本文件保存，可以用任何电子表格打开</li></ul><p id="923f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>我们可以使用Python代码来计算整个生命表，但我更喜欢使用电子表格来计算预期寿命，这对大多数人来说更容易处理。</p><p id="6c85" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您有兴趣开始编码:</p><ul class=""><li id="b737" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">Python:开始处理数据的好语言:<a class="ae kx" href="https://www.python.org/about/gettingstarted/" rel="noopener ugc nofollow" target="_blank">https://www.python.org/about/gettingstarted/</a></li><li id="f097" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">Google Colab:一个很好的在线代码解释器(可以让你不用安装任何东西就能运行python代码):<a class="ae kx" href="https://colab.research.google.com/notebooks/intro.ipynb?utm_source=scs-index" rel="noopener ugc nofollow" target="_blank">https://colab.research.google.com/notebooks/intro.ipynb?utm_source=scs-index </a></li><li id="53fe" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">熊猫:一个重要的数据api(可以为你实现读取数据、保存数据、过滤等大量数据任务的代码模块……):<a class="ae kx" href="https://colab.research.google.com/github/google/eng-edu/blob/master/ml/cc/exercises/pandas_dataframe_ultraquick_tutorial.ipynb" rel="noopener ugc nofollow" target="_blank">https://colab . research . Google . com/github/Google/eng-edu/blob/master/ml/cc/exercises/pandas _ data frame _ ultra quick _ tutorial . ipynb</a></li><li id="8286" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">熊猫文献网站:<a class="ae kx" href="https://pandas.pydata.org/docs/" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/docs/</a></li></ul><h2 id="0d08" class="lu je hi bd jf lv lw lx jj ly lz ma jn iq mb mc jr iu md me jv iy mf mg jz mh bi translated">使用电子表格进行计算</h2><p id="408d" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">现在我有了csv (csv表示逗号分隔值)文件，我可以在电子表格中打开它们。请注意，我最终得到了3个文件，但我将只使用第一个文件来演示计算。男性和女性生命表的处理方式完全相同。</p><p id="d3fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下是我在电子表格中导入csv生命表时得到的结果:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ng"><img src="../Images/d1d7d1a9441598909e10f7be676dec0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*L0DFCHoKnn70Pqi8tEVr3g.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">原始数据生命表</figcaption></figure><p id="24c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以看到12岁。这可能是登记死亡日期时的错误。我会把这条线从桌子上拿掉。</p><p id="5912" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文件的结尾我有:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es nh"><img src="../Images/d10d8f95c0fda0d9e1b3dc3badd41998.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*4m6Lfe4umReA3qfdntFn4g.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">寿命表的终点</figcaption></figure><p id="7acb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2008年去世的最老的人是117岁(干得好！).没有人在114、115和116岁时死亡(所有其他年龄都有人死亡):我将手动添加这些行以保持一致，在这些行的死亡列中设置0。</p><p id="c726" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">注意:</strong>处理原始数据时出现错误或意外结果是完全正常和常见的。获得正确的数据是最耗时的任务，这可能是他们称之为数据挖掘的原因。</p><p id="ca7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我现在可以建立一个虚拟的人口，其中所有人都在同一年出生，并在117年后灭绝(人们逐渐死亡，没有孩子，没有人来自外部或离开人口)。</p><p id="e4f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将从117岁开始，那时有一个人死亡:我在那个年龄存活的人口只有一个人。</p><p id="996c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我116岁、115岁和114岁时，我的人口仍然是1，但在我113岁时，幸存的人口中有2个人:一个死于那一年，另一个死于117岁。往上走，用每个年龄的死亡人数，我可以用规则计算人口:<em class="kz">存活(x) =存活(x+1) +死亡(x) </em></p><p id="beac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我们使用自动计算得到的结果。从117岁开始:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ni"><img src="../Images/108daf9c9187d549e4017563242be284.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*LzYU6qFqQy5ffAfNFPUsOA.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">正在创建幸存列</figcaption></figure><p id="8976" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">至0岁:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es nj"><img src="../Images/91b68875a6a76047f8dd9889f32021f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*WT-hyRjfu2-t7DW0pDW1GA.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">存活时间为0的列</figcaption></figure><p id="5302" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在0岁时，人口是完整的:553111是2008年法国的死亡人数(根据我的档案)。根据这个数字，我们创建了一个553111人的虚拟人口，他们出生在同一年。每年都会有一些人死去。预期寿命是根据人口中一个人预期能活多少年来计算的。这个投影代表了这个数据样本的统计分布。</p><p id="525c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用规则创建列<code class="du lq lr ls lt b">qx</code>:<em class="kz">qx(x)=死亡数(x)/存活数(x) </em>:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es nk"><img src="../Images/34b8ada6fa310abeaaae17ef39007417.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*Vbezi5aV_uxuYS-2XBmpPw.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">计算qx</figcaption></figure><p id="9583" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用规则创建列<code class="du lq lr ls lt b">px</code>:<em class="kz">px(x)= surviving(x)/surviving(0)</em>:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es nl"><img src="../Images/bb7f93bde0bc69c4cbd21fa0f301434e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*W1UOIOyccLzWqACu3AdTNg.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">计算px</figcaption></figure><p id="37fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lq lr ls lt b">px</code>列很有趣:它表示活到特定年龄的人口百分比。你可以通过例子观察到，80%的人活到64岁，但是只有48%的人活到82岁。18%的人口年龄仍在90岁。这个百分比也可以用来创建100000的标准化总体，以确保每年都有相同的引用。</p><p id="cebd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">列<code class="du lq lr ls lt b">lx</code>使用以下规则计算:<em class="kz">LX(x)= round(px(x)* 100000)</em>:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es nm"><img src="../Images/bfca7ca8945edc3a53acd302722db8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*9l0HkikTATYlTlsjrIf2jg.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">计算lx</figcaption></figure><p id="a622" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们可以使用上面的3个公式计算预期寿命:</p><ol class=""><li id="4547" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc nn li lj lk bi translated">维基百科的公式不需要任何人口。它只使用<code class="du lq lr ls lt b">qx</code>来计算<code class="du lq lr ls lt b">plx</code>然后<code class="du lq lr ls lt b">prod_plx</code>然后<code class="du lq lr ls lt b">ex_wiki</code>:</li></ol><ul class=""><li id="f7d4" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated"><em class="kz"> plx(x) = 1-qx(x) </em></li><li id="783e" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><em class="kz">prod _ plx(x+1)= prod _ plx(x)* plx with prod _ plx(0)= plx(0)</em></li><li id="9df8" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><em class="kz">ex _ wiki(x)= sum(prod _ plx(x):prod _ plx(117))</em></li></ul><p id="5444" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du lq lr ls lt b">ex_wiki</code>是使用维基百科法语公式计算的预期寿命。</p><p id="d360" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ex_wiki(x) =当你在x岁时，你预期能活的年数</p><p id="c8c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你出生时，你可以预期活76.6岁，但是如果你到了80岁，你仍然可以预期活4.4年。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es no"><img src="../Images/2e4961e048a681a6c4dfa1e165c554ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ynvX0Qnu3494Ola-gfTd6Q.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">来自维基百科的寿命预期</figcaption></figure><p id="ef0c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.“生命表构建”方法是先创建<code class="du lq lr ls lt b">Tx</code>再计算<code class="du lq lr ls lt b">ex</code>。</p><ul class=""><li id="7630" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated"><em class="kz">Tx(x)= sum(LX(x):LX(117))</em></li><li id="dcf9" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><em class="kz"> ex_2(x) = Tx(x)/lx(x) </em></li></ul><p id="dc5a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我看来<em class="kz">Tx(x)= sum(LX(x):LX(117))</em>有问题</p><p id="5574" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应该是<em class="kz">Tx(x)= sum(LX(x+1):LX(117))</em>:Tx代表一年幸存者的年数总和。0岁时的lx是整个种群，但不是所有的种群都存活到了那个年龄。我的观点得到了以下事实的支持:如果我们使用1作为lx的偏移量来计算ex，则ex_2和ex_wiki成比例:</p><p id="685a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kz">ex _ wiki(x)=(ex _ 2(x))* px(x)</em></p><p id="e027" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我创建了一个专栏ex_test来演示这一点。</p><p id="055d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我选择使用<em class="kz">Tx(x)= sum(LX(x+1):LX(117))</em>而不是遵循“生命表构建”协议进行Tx计算。</p><p id="7fb4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记住px是各年龄段存活人口的比例。这意味着维基百科的计算是将Tx(x)除以整个人口，而不是LX(x ), LX(x)是x岁时的存活人口。</p><p id="70ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是电子表格中的结果:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es np"><img src="../Images/abd6cd5d695f4566809e02f7c8dfd2f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q4u-QDz4GQveS3dhVs1oEA.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">“生命表创建”中的计算实例</figcaption></figure><p id="a016" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ex_2和ex_wiki在0岁时的预期寿命相同，但在80岁时，预期寿命变为8.1，而不是4.4。随着年龄的增长，你可能会有想知道哪种计算最准确的冲动！</p><p id="c64c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.最后但并非最不重要的是“国家生命统计报告”方法。首先计算Lx，去除每个lx(x)的一半死亡，但lx(0)除外，它使用87%的死亡。Tx_2是通过求和lx而不是Lx建立的，ex_3是用Tx(x)除以lx(x)计算的</p><ul class=""><li id="d047" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated"><em class="kz">Lx(x)= Lx(x)-(0.5 *(Lx(x)-Lx(x+1))</em>同<em class="kz">Lx(0)= Lx(0)-(0.87 *(Lx(0)-Lx(1))</em></li><li id="44c7" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><em class="kz">Tx _ 2(x)= sum(Lx(x):Lx(117))</em></li><li id="027c" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><em class="kz">ex _ 3(x)= tx2(x)/LX(x)</em></li></ul><p id="d680" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为Lx有更大的数字，这个计算的预期寿命更乐观。当我们变老时，Tx的部分是存活的人口，而不是整个人口，我们可以预期活得更长。</p><p id="419a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我很乐观，所以我倾向于选择第三种方法。</p><p id="3c4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是电子表格中的结果:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es nq"><img src="../Images/eac371bba52ad951af20815220c405f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gYeEbA0Y8qGzjxoSkUvnJg.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">根据“国家人口动态统计报告”计算ex</figcaption></figure><h1 id="e418" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">了解不同的方法</h1><p id="4c06" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">如果您有兴趣了解3种计算方法的区别:</p><p id="1753" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">维基百科的方法不使用人口，只使用存活率(1-死亡率),但仍然有一个结果。这怎么可能？</p><p id="fb75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你看看lx是怎么计算的:lx(x+1) = lx(x) * qx(x)</p><p id="d474" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你把之前存活的人口数乘以死亡率。另一种描述方式是考虑在x岁存活的人必须从0到x每年存活。lx(x)可以计算为初始人口(lx(0))乘以从0到x的所有存活率(plx)的乘积。</p><p id="f01b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kz">LX(x+1)= LX(0)* plx(0)* plx(1)* plx(2)*…* plx(x)</em></p><p id="2c44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">as<em class="kz">prod _ plx(x)= plx(0)* plx(1)* plx(2)*…* plx(x)</em></p><p id="feaf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以写成lx(x+1) = prod_plx(x) * lx(0)</p><p id="154a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的档案中:</p><ul class=""><li id="529a" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated"><em class="kz">ex _ wiki(x)= sum(prod _ plx(x):prod _ plx(117))</em>从x到最老年龄的所有plx乘积的总和</li><li id="bed8" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated"><em class="kz">Tx(x)= sum(LX(x+1):LX(117))</em></li><li id="f8a9" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">ex_2(x) = Tx(x)/lx(x)</li></ul><p id="354b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为<em class="kz">LX(x+1)= prod _ plx(x)* LX(0)</em></p><p id="8923" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以写成<em class="kz">Tx(x)= LX(0)* sum(prod _ plx(x):prod _ plx(117))</em></p><p id="fc4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并且<em class="kz"> Tx(x) = lx(0) * ex_wiki(x) </em></p><p id="06b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">又如<em class="kz"> ex_2(x) = T(x)/lx(x) </em></p><p id="28d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以写成<em class="kz">ex _ 2(x)= LX(0)* ex _ wiki/LX(x)</em></p><p id="0e40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">又因为<em class="kz"> lx(0)/lx(x) = 1/px(x) </em>由定义</p><p id="216e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="kz">ex _ 2(x)= ex _ wiki(x)/px(x)</em></p><p id="f10b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ex_2和ex_wiki之间的唯一区别是，对于ex_wiki，我们将存活率的乘积之和与初始人口进行比较，而在ex_2中，我们将其与每个年龄的存活人口进行比较。</p><p id="af23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，第三种方法建议考虑一半在x岁死亡的人应该被视为活了x+1年，因为他们接近x+1岁。</p><h1 id="6bfd" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">将我的计算与官方数据进行比较</h1><p id="33d3" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">我对男女生命表进行了同样的计算(使用最乐观的方法),得出了这些数字:</p><ul class=""><li id="84cf" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">2008年法国男性出生时的预期寿命:73.2岁</li><li id="8d24" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">2008年法国女性出生时的预期寿命:81.2岁</li></ul><p id="b439" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">看着<a class="ae kx" href="https://www.insee.fr/fr/statistiques/2416631" rel="noopener ugc nofollow" target="_blank">https://www.insee.fr/fr/statistiques/2416631</a>，我发现了这些结果:</p><ul class=""><li id="240f" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">男性77.6岁</li><li id="613c" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">女性为84.3</li></ul><p id="a7a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">他们的结果比我最好的结果更乐观。</p><p id="0b50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对此有许多可能的原因:</p><ul class=""><li id="561e" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">我在某个地方犯了一个错误</li><li id="16e6" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">我没有使用相同的数据源</li><li id="38cf" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">他们正在做其他的计算</li><li id="fd07" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi">…</li></ul><p id="f70d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仔细查看原始数据，我发现文件中的许多死亡数据来自2007年和更早的时间，我发现从2008年到2018年的文件中有申报的死亡数据..即使只使用2008年的数据，我也没有得到同样的结果。我试图在方法论中寻找答案，发现他们试图将移民考虑在内，因为人口不是静态的，人们在生活或到来。他们还进行了一些计算，包括财政申报，并使用5年死亡人数的平均值进行计算。</p><p id="146a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，我发现当你试图面对现实世界的预测时，你会意识到由于偏见，你不得不考虑很多参数。</p><h1 id="9bc7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">结论</h1><p id="e3d7" class="pw-post-body-paragraph if ig hi ih b ii kb ik il im kc io ip iq kd is it iu ke iw ix iy kf ja jb jc hb bi translated">从每年计算的单个数据指标(例如性别)开始，并试图理解它代表什么，我自己计算教会了我很多东西:</p><ul class=""><li id="6437" class="lc ld hi ih b ii ij im in iq le iu lf iy lg jc lh li lj lk bi translated">我对这些数据的直觉很差</li><li id="f2e9" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">我发现有不同的方法来计算它</li><li id="106c" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">我了解到了关于预期寿命的新预测(例如活到一定年龄的人口比例)</li><li id="cdcb" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">原始数据没有直接的答案:你必须转换它</li><li id="bcbc" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">完成一个基本的计算并用一些真实的数据进行测试也相对较快(几个小时)。但是当我将我的结果与官方结果进行比较时，我意识到现实世界需要仔细考虑这些参数，并在这上面花费更多的时间</li><li id="1e64" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">找到一个结果很容易，但是找到导致这个结果的方法或公式要困难得多</li><li id="a988" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">对问题有更好的理解可能会导致你不同意某个方法论(以“生命表构建”中的Tx计算为例)</li><li id="47e4" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">公众可以获得许多有趣的原始数据</li><li id="5b25" class="lc ld hi ih b ii ll im lm iq ln iu lo iy lp jc lh li lj lk bi translated">数据挖掘变得非常非常混乱</li></ul><p id="557e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望你喜欢这次数据之旅，就像我喜欢分享它一样，并且你现在已经准备好开始你自己的数据调查了。</p><p id="c43b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">祝你生活愉快！</p></div></div>    
</body>
</html>