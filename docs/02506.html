<html>
<head>
<title>AWS EC2 Hands-on</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS EC2实践</h1>
<blockquote>原文：<a href="https://medium.com/codex/aws-ec2-hands-on-fa851006f355?source=collection_archive---------14-----------------------#2021-07-23">https://medium.com/codex/aws-ec2-hands-on-fa851006f355?source=collection_archive---------14-----------------------#2021-07-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="80fc" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">在我们下面的博客中阅读什么是EC2、可用的类型及其定价模型。</h2></div><p id="cd3d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><a class="ae jt" href="https://yogendrahj.medium.com/429f92f6ed8b" rel="noopener">https://yogendrahj.medium.com/429f92f6ed8b</a></p><p id="dee9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在本文中，我们将对EC2的创建、使用EC2时要考虑的技术方面、不同类型、OS支持的AMI (Amazon机器映像)和快照进行纯实践操作。我们开始吧！</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/52b0c428f2eafbc5ca55f7aaa2150a1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LHy1IztvmSI3-EhAAQBEPw.png"/></div></div></figure><p id="f857" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">EC2实例可以多种方式启动，例如使用控制台(这是一种基本方法),另一种方式是使用CLI命令，或者使用Lambda (API函数),还有一种方式是使用基础设施作为代码服务，即云信息服务。</p><p id="87f9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您的EC2实例可以有两种类型，一种是公共实例，另一种是私有实例。</p><p id="07b3" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">公共实例具有公共IP，可以从您的网络外部访问，而私有实例只有私有IP，无法从您定义的网络外部访问。当您停止和启动公共实例时，其IP地址将会更改，而在私有实例中，其IP地址保持不变。</p><h2 id="2cf1" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated"><strong class="ak"> <em class="lb">下面是使用控制台启动一台亚马逊Linux EC2机器的步骤。</em> </strong></h2><ol class=""><li id="1b01" class="lc ld hi iz b ja le jd lf jg lg jk lh jo li js lj lk ll lm bi translated">登录到控制台，选择EC2向导，然后单击启动实例。这里，我们选择的是亚马逊Linux 2 AMI。</li></ol><p id="240d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">AMI是包含启动实例所需的软件配置(操作系统、应用服务器和应用程序)的模板。您可以选择AWS、用户社区或AWS Marketplace提供的AMI。或者您可以选择一个自己的ami。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ln"><img src="../Images/b403114fd4f8d8fc0bcf2480a5571f11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4s1n5_U2-mZONV9JSspRw.jpeg"/></div></div></figure><p id="ce30" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.选择所需的实例类型(实例类型将在我们的另一篇文章中讨论)。这里，我们选择t2.micro通用实例，因为它在免费层中可用。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ln"><img src="../Images/230c9549df2dc1c62d6b9bddf720e431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6klvT7V7jEZVlAMjvqnj9w.jpeg"/></div></div></figure><p id="3dba" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.此步骤允许您配置实例详细信息，如VPC、子网、公共IP、IAM角色和其他一些预定义的参数。这里，我们将1个t2.micro实例启动到默认VPC和公共子网中。(我们将在接下来的博客中详细讨论VPC)。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lo"><img src="../Images/b865f289513ded1bf1c6a1793a3ba0ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dgm3SfHB683IrPpshnVLSA.jpeg"/></div></div></figure><p id="9d15" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.在这一步中，我们将选择所需的存储容量以及卷类型。一般来说，Linux机器的根卷将是“/dev/xvda”，对于Windows，它将是“/dev/sda”。如果需要，我们可以添加额外的存储以及数据加密。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lp"><img src="../Images/2f14a07394aea7c1e5a03d25b6b77fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nbfDx6_a7SlG0tpPyXuChw.jpeg"/></div></div></figure><p id="bb1f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.按照遵循的标准添加标签。标记由区分大小写的键值对组成。当您基于标签定义任何API函数时，这些非常有用。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lq"><img src="../Images/fac1d85af4601a8596c2d81d7d8bb4c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cNG1ksDhQsKv_KDGta68dg.jpeg"/></div></div></figure><p id="7759" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.安全组是一组控制实例流量的防火墙规则。在此页面上，您可以添加规则以允许特定流量到达您的实例。您可以选择现有安全组，也可以定义自己的安全组。我们在这里使用默认值，因为端口22是允许从互联网连接的，这足以连接到这台机器。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es lr"><img src="../Images/653ee2bce2d0cf78dc9c20d48ab5b459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFa7yOZJcDvDGBXOOGv_FQ.jpeg"/></div></div></figure><p id="aa48" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">7.在这一步中，我们将验证所有参数，并选择连接到该实例的密钥对。</p><p id="d620" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个密钥对由AWS存储的<strong class="iz hj">公钥</strong>和您存储的<strong class="iz hj">私钥文件</strong>组成。它们一起允许您安全地连接到您的实例。对于Windows AMIs，需要私钥文件来获取用于登录实例的密码。对于Linux AMIs，私有密钥文件允许您安全地SSH到您的实例。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ls"><img src="../Images/f29bf1b0389c886c7c854e7c8ae534ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1A5W4sVNuhl7JXrnfHXM2w.jpeg"/></div></div></figure><p id="2309" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">8.单击启动后，您的实例将在不到一分钟的时间内启动并准备好连接。</p><h2 id="efdf" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated"><strong class="ak">如何皈依。pem ssh密钥。ppk格式？</strong></h2><ol class=""><li id="f27d" class="lc ld hi iz b ja le jd lf jg lg jk lh jo li js lj lk ll lm bi translated">当您在启动实例的最后阶段创建密钥对时，该密钥将被创建为。pem文件，您需要将其转换为。ppk文件来连接您的实例。</li><li id="a789" class="lc ld hi iz b ja lt jd lu jg lv jk lw jo lx js lj lk ll lm bi translated">单击加载并找到您的。pem文件，一旦您选择它，密钥将被导入，并单击保存私钥，现在将被转换为。您需要用来连接实例的ppk格式。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ly"><img src="../Images/41fb4b68bda5729c5c1f26d0fc89442b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ULA_C3Wd8LEIjULie6mWLA.jpeg"/></div></div></figure><h2 id="d1aa" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">如何使用putty和？ppk文件？</h2><ol class=""><li id="db4c" class="lc ld hi iz b ja le jd lf jg lg jk lh jo li js lj lk ll lm bi translated">启动putty会话，并输入该实例的用户名和公共IP。默认情况下，用户名为“ec2-user ”,例如ec2-user@publicip。</li><li id="ee3f" class="lc ld hi iz b ja lt jd lu jg lv jk lw jo lx js lj lk ll lm bi translated">现在选择“ssh”&gt;“Auth”并浏览您的。ppk文件。</li></ol><figure class="jv jw jx jy fd jz er es paragraph-image"><div class="er es lz"><img src="../Images/7b396f4c59cb21e0b22f2f69f3e458fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*0-1cN3KdJeVVYwLRINbOYw.jpeg"/></div></figure><p id="7e27" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.单击open并选择yes以连接到您的实例。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ma"><img src="../Images/cf1069cd444d73a4b66038f307b77217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AzDTTQX4O4OpwDHyIwARpw.jpeg"/></div></div></figure><h2 id="c1b1" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">启动时在Linux实例上运行命令</h2><p id="5994" class="pw-post-body-paragraph ix iy hi iz b ja le ij jc jd lf im jf jg mb ji jj jk mc jm jn jo md jq jr js hb bi translated">当您在Amazon EC2中启动一个实例时，您可以选择将用户数据传递给实例，这些数据可用于执行常见的自动化配置任务，甚至在实例启动后运行脚本。您可以向Amazon EC2传递两种类型的用户数据:shell脚本和cloud-init指令。您还可以将这些数据以纯文本、文件(这对于使用命令行工具启动实例很有用)或base64编码的文本(对于API调用)的形式传递到启动向导中。</p><p id="bf4a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它有一个先决条件，即您的实例应该有一个可以从internet访问的公共DNS名称。您还必须配置您的安全组，以允许SSH(端口22)、HTTP(端口80)和HTTPS(端口443)连接。</p><p id="8109" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以在启动实例时指定实例用户数据。如果实例的根卷是EBS卷，您还可以停止实例并更新其用户数据。</p><p id="580d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在AWS官方页面阅读更多关于用户数据的信息。</p><div class="me mf ez fb mg mh"><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">启动时在Linux实例上运行命令</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">当您在Amazon EC2中启动一个实例时，您可以选择将用户数据传递给该实例，这些数据可用于…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">docs.aws.amazon.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ke mh"/></div></div></a></div><ul class=""><li id="381b" class="lc ld hi iz b ja jb jd je jg mw jk mx jo my js mz lk ll lm bi translated">使用CLI启动EC2实例-</li></ul><p id="8719" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="na">" AWS ec2 run-instances-image-id ami-xxxxx-count 1-instance-type T2 . micro-key-name&lt;&lt;mykey pair&gt;&gt;-security-group-ids SG-xxxxx-subnet-id subnet-xxxxx "</em></p><ul class=""><li id="b3da" class="lc ld hi iz b ja jb jd je jg mw jk mx jo my js mz lk ll lm bi translated">显示您的AWS EC2密钥对-</li></ul><p id="f087" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="na">“AWS ec2 describe-key-pairs-key-name mykey pair”</em></p><ul class=""><li id="0cec" class="lc ld hi iz b ja jb jd je jg mw jk mx jo my js mz lk ll lm bi translated">删除您的密钥对-</li></ul><p id="3e33" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="na">“AWS ec2 delete-key-pair-key-name mykey pair”</em></p><h2 id="d7ac" class="kg kh hi bd ki kj kk kl km kn ko kp kq jg kr ks kt jk ku kv kw jo kx ky kz la bi translated">结论</h2><p id="3347" class="pw-post-body-paragraph ix iy hi iz b ja le ij jc jd lf im jf jg mb ji jj jk mc jm jn jo md jq jr js hb bi translated">AWS弹性计算云(EC2)为我们提供了最简单快捷的方式来启动虚拟服务器和主机应用程序或网站，从而在最短的时间内运营我们的业务。其种类繁多的实例类型和可行的定价模型是业界最好的，可以选择以满足从小型到企业级业务的要求。</p></div></div>    
</body>
</html>