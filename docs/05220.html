<html>
<head>
<title>Building a Wordle Solver With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python构建Wordle求解器</h1>
<blockquote>原文：<a href="https://medium.com/codex/building-a-wordle-solver-with-python-77e3c2388d63?source=collection_archive---------2-----------------------#2022-02-09">https://medium.com/codex/building-a-wordle-solver-with-python-77e3c2388d63?source=collection_archive---------2-----------------------#2022-02-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="82ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">解决率超过99%！</p><p id="eaca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">鉴于我写的最后一件事是用Python 创建一个<a class="ae jd" rel="noopener" href="/codex/building-a-simple-sudoku-solver-in-python-with-numpy-1a8ea6f5bff5">数独解算器，并且我的Wordle分数在过去几天里受到了打击——我萌生了建造一个“Wordle机器人”的想法，看看它是否能被击败。</a></p><p id="51d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在我的笔记本<a class="ae jd" href="https://github.com/jack-cook-repo/wordle-solver/blob/main/Wordle%20solver%20-%20exploration.ipynb" rel="noopener ugc nofollow" target="_blank">这里</a>跟随任何代码，我计划做一个后续的工作，我会把它移动到<a class="ae jd" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank"> Streamlit </a>应用程序(一个用于构建简单应用程序的Python库)——如果我这样做，我会把代码移动到Python文件中。</p><h1 id="0168" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">沃尔多是什么？</h1><p id="337d" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">对于外行人来说，Wordle是一款基于浏览器的免费游戏,自去年10月发布以来已经在社交媒体上掀起了风暴。</p><p id="2e30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它甚至被《纽约时报》以7位数的价格收购。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es kh"><img src="../Images/99f156b5b3fd2c21683104e385098da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FhCrAYTQZb4pnmsTRgOUiQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">Wordle变得比COVID更受欢迎，来源:<a class="ae jd" href="https://trends.google.com/trends/explore?date=today%203-m&amp;geo=GB&amp;q=wordle,covid" rel="noopener ugc nofollow" target="_blank">谷歌趋势</a></figcaption></figure><p id="08c7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">游戏本身足够简单。你有6次机会猜测一个5个字母的单词，每次你猜的字母被涂上如下颜色:</p><ul class=""><li id="7754" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated"><strong class="ih hj">绿色</strong>:正确的字母，正确的位置</li><li id="3a95" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">黄色:</strong>字母不对，位置不对</li><li id="bb8a" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">无颜色</strong>:字母错误</li></ul><p id="efe0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个示例游戏可能是这样的:</p><figure class="ki kj kk kl fd km er es paragraph-image"><div class="er es ll"><img src="../Images/cbe8f79af1ebb60160a8a89de705b013.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/0*dAD6KOaPuH67VpRL.png"/></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">猜单词4个回合，<a class="ae jd" href="https://en.wikipedia.org/wiki/Wordle" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="6845" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正如你所想象的，不同的5个字母的单词有很多种可能，但是一定有一些逻辑可以帮助我们解决这个问题。</p></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><h1 id="1249" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">获取数据</h1><p id="567f" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">第一步是获得一个可能的5个字母单词的列表，这些单词可以用作答案。</p><p id="a3cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">幸运的是，在对stackexchange上的<a class="ae jd" href="https://puzzling.stackexchange.com/a/114518" rel="noopener ugc nofollow" target="_blank">这个宝石</a>进行了一番挖掘和摸索之后，我发现Wordle应用程序本身使用了两个单词列表:</p><ul class=""><li id="bea5" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">2315个可能的5个字母的列表<strong class="ih hj">答案</strong>单词</li><li id="8c85" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">一个包含10，657个可能的5个字母的参考单词的列表(没有一个用于回答，但是可以用作猜测)</li></ul><p id="8c42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这两个列表背后的逻辑似乎是，前者是一个更“常见”的单词列表，更有理由期待人们去猜测。</p><p id="3be5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">10，657列表是从答案中排除的“有效”5个字母单词的剩余部分。</p><p id="5c7b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">无论哪种方式，你都可以在这里找到这两个列表<a class="ae jd" href="https://www.powerlanguage.co.uk/wordle/main.e65ce0a5.js" rel="noopener ugc nofollow" target="_blank">。对于这一点，不出所料，我们将使用</a><a class="ae jd" href="https://github.com/jack-cook-repo/wordle-solver/blob/main/answers.txt" rel="noopener ugc nofollow" target="_blank">2315个单词列表</a>作为我们的潜在猜测列表(列表<code class="du ly lz ma mb b">var La</code>)。</p></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><h1 id="61fe" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">一个策略</h1><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mc"><img src="../Images/6ffe101a2b1a3ff34f34809b864e6852.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R-roHWaxZKp6y-eY"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">马库斯·温克勒在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="b8a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们开始编写游戏和策略之前，我们需要一个计划。乱猜单词没那么有帮助，那么我们的策略应该是什么呢？</p><p id="d4f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们要猜单词<strong class="ih hj">排除尽可能多的错误答案</strong>。我们可以通过数字母来做到这一点。</p><p id="724e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">[正如我在开始时提到的，你可以用我的笔记本<a class="ae jd" href="https://github.com/jack-cook-repo/wordle-solver/blob/main/Wordle%20solver%20-%20exploration.ipynb" rel="noopener ugc nofollow" target="_blank">跟随本文中的所有代码，或者只是跟随截图]</a></p><p id="b8b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们从可能的答案集中的单词开始，找出每个位置的字母。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es md"><img src="../Images/a2d8aa55200c6a7e4ca44d47a15ea943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IlXSZ_cEN4ctTitfZtjcA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="f8a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了消除位置1中尽可能多的错误字母，我们想知道字母在列1中出现的频率，并选择我们猜测中最常见的一个。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es me"><img src="../Images/745b083870bb5046adbc5178946118b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FtRqHCg_pq4vKrwF49yCCQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="3dd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以对于位置1，字母‘A’出现了141次，字母‘B’出现了173次。因此，要缩小位置1的范围，以字母“B”开头的单词比“A”更合适。</p><p id="d8eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了通过猜测消除尽可能多的错误<em class="mf">答案</em>，您需要选择一个单词来消除<strong class="ih hj">所有</strong>位置上尽可能多的字母。</p><p id="60a0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了做到这一点，我们的策略是计算每个位置的字母数量，并选择所有位置中字母出现频率最高的单词。</p><p id="c09b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用上述逻辑，Wordle的最佳初始猜测是<strong class="ih hj">‘SLATE’</strong>，5个位置的组合频率为1，437。</p><p id="e14a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法并不完美，因为它会重复计算频繁出现的字母(例如，位置4和5是“ER”，4中“E”和5中“R”的频率会分别计入我们的频率)。但是，正如我们将在后面看到的，这种方法已经足够好了。</p></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><h1 id="823c" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">编码第1部分:Game()类</h1><p id="a021" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">足够的计划。现在我们可以开始编码了！</p><p id="ea65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我们希望能够使用Python类创建一个<strong class="ih hj">游戏</strong>。</p><p id="78ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于那些不熟悉类的人来说，它们是Python中面向对象编程(OOP)的基石。在<em class="mf">非常高的层次上，它们是可以拥有属性(特性)和功能(方法)的“事物”。</em></p><p id="8abd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">举个例子Python中的“Dog”类可以有高度/颜色/重量属性和一个<code class="du ly lz ma mb b">bark()</code>方法。</p><p id="c107" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于我们的用例，我们希望能够创建一个<strong class="ih hj">游戏</strong>类。</p><h2 id="776a" class="mg jf hi bd jg mh mi mj jk mk ml mm jo iq mn mo js iu mp mq jw iy mr ms ka mt bi translated">那么我们的游戏类应该包含什么呢？</h2><p id="2d51" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">如果我们远离这个Python问题，我们希望在我们的Wordle游戏中的任何给定时间知道这些事情:</p><ul class=""><li id="bb2e" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">哪些字母我们猜对了，在什么位置</li><li id="74ad" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">字母表中的哪些字母我们还能猜出来(排除任何不正确的猜测之后)</li><li id="c366" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">哪些字母放错了位置(正确的字母，错误的位置—突出显示的黄色)</li><li id="358a" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">还有哪些可能的5个字母答案</li><li id="14a2" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">对于剩余的5个可能的字母答案，字母在5个位置中的出现频率(让我们猜测)</li></ul><p id="e233" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过我们的<strong class="ih hj">构造函数</strong>或者众所周知的<code class="du ly lz ma mb b">__init__</code>来实现。这只是一个奇特的函数，当我们使用游戏类创建一个对象时，它会设置属性。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mu"><img src="../Images/611efe28aa3eacc678745a34d9ee7e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OgUky96fCUIs6Q6jMMwYrg.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="15bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们可以简单地通过调用<code class="du ly lz ma mb b">MyGame = Game(df_words_5l)</code>来创建我们的类(使用我们之前创建的数据框架)。</p><p id="c873" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你试一下，然后试一下<code class="du ly lz ma mb b">MyGame.possible_letters</code>，你应该会看到字母表中所有字母的列表，因为我们还没有删除任何一个！</p><h2 id="b350" class="mg jf hi bd jg mh mi mj jk mk ml mm jo iq mn mo js iu mp mq jw iy mr ms ka mt bi translated">这些功能</h2><p id="bd31" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">正如我之前提到的，我将在这里分享截图，但是你可以在笔记本的<a class="ae jd" href="https://github.com/jack-cook-repo/wordle-solver/blob/main/Wordle%20solver%20-%20exploration.ipynb" rel="noopener ugc nofollow" target="_blank">中看到任何源代码。</a></p><p id="fa76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你还记得我们上面的策略部分，我们需要能够根据可能单词的数据框架中的5个位置中的每一个位置有多少个字母来计算每个单词的“频率分数”。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mv"><img src="../Images/d149a2d510f0b7b4b24898d5469f2719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dy8AN80Uj_TbwobNMFI-Vw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="b9e9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以得分了！我们可以用这个来猜测。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mw"><img src="../Images/215e8b6ebfb84870fd14e00b83929867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLbDWLEEHUgarxTtRHTCJQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="8b29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该数据帧的顶行可以用作我们每回合的猜词，因为它具有最高的频率分数。</p><p id="2b78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从我们的可能单词列表中筛选出包含正确字母的单词(例如位置1中的“S”)非常简单。过滤那些不包含不正确字母的<strong class="ih hj">和</strong>也很简单。然而，过滤放错位置的字母要复杂得多。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mx"><img src="../Images/4e4d5a66ea0dbc92400b55a696a5b888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XAnCXlwu3c_UD1KLDX8zw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="5867" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该功能依赖于我们首先过滤可能答案的数据帧以得到正确答案，并过滤出放错位置的字母——过滤出字母出现在放错位置的行。希望文档能清楚地说明这一点！</p><p id="36cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们游戏类的最后一个难题是<strong class="ih hj">如何根据猜测更新属性，以及结果</strong>。</p><p id="05b7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以下代码来自<code class="du ly lz ma mb b">update</code>函数，该函数采用以下参数:</p><ul class=""><li id="abcd" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated"><strong class="ih hj">猜:</strong> 5个字母的字符串</li><li id="1090" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">结果:</strong>以[N，N，N，N，N]的格式列出，其中0是不正确的，1是放错了位置，2是正确的，相对于我们的猜测</li></ul><p id="388a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这第一块处理我们的输入，然后处理正确的答案。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es my"><img src="../Images/904912dcf94c841c93ffb715849277b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5XKVfJ0FBX4GGgf7d7QEug.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="38b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了获得正确答案，我们要删除任何之前放错位置、现在已经被正确猜测的字母(例如，猜测1中位置3的“E”是黄色的，而猜测2中位置2的“E”是绿色的)。我们还想过滤可能答案的数据框架。</p><p id="345b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二块有点棘手。放错的信需要:</p><ul class=""><li id="cb4b" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">在可能的答案数据帧中筛选出在错误位置包含错误字母的单词</li><li id="be94" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">计算</strong>以处理我们可能有&gt; 1个相同字母放错位置的情况(例如2个放错位置的‘E’)！</li></ul><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es mz"><img src="../Images/a4293ce10bacce399b872fcc9cbd09f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AawK3rEorx9CxZdQkqFUnA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="f336" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><code class="du ly lz ma mb b">numpy.vectorize</code>在数据帧上运行函数比标准数据帧快得多。apply(有过惨痛的教训)。</p><p id="df18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住，我们的<code class="du ly lz ma mb b">check_misplaced_letters</code>功能只是检查数据帧中的剩余单词是否包含至少<strong class="ih hj">相同数量的错位字母。</strong></p><p id="d004" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个函数的最后一部分处理不正确的字母，将它们从可能猜测的字母列表中删除，然后相应地过滤可能答案的数据框架。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es na"><img src="../Images/13a4a4c715a21ea2bbc2a47e126d16e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3A8r1J0Ff3ngGrDxd4OA5Q.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="b71b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">*一个警告是，一封信可能是“不正确的”，但仍然是我们有效信件列表的一部分。</p><p id="d7e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果答案是“珍珠”,而我们的猜测是“输入”,我们猜测中的第一个“E”将显示为黄色(放错了位置),但第二个不会突出显示(不正确)。</p><p id="382e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这只说明单词中没有2个E，并不是说E是不正确的字母！所以我们在筛选可能的字母列表时必须小心。</p><h2 id="edf8" class="mg jf hi bd jg mh mi mj jk mk ml mm jo iq mn mo js iu mp mq jw iy mr ms ka mt bi translated">快速测试</h2><p id="d55a" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在我们着手构建一些可以为我们玩游戏的东西之前，让我们在今天(2022年2月9日)的世界里尝试一下使用我们的新类。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es nb"><img src="../Images/7ed7468420607dff9ecae99a4d93e309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ljMMNad3ouHnT7YE3oNOpQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="74f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">还不错！虽然我是英国人，但我不确定我是否同意幽默的拼写..</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es nc"><img src="../Images/887d95b093a57628fb7d0f6d89c7a308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dqO2c8N7iBqPmEP_ZM7BYw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">证明！</figcaption></figure></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><h1 id="67cf" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">编码第2部分:游戏功能</h1><p id="1d63" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">现在我们有游戏了！为了验证上述内容不是偶然的，我们需要一些可以:</p><ul class=""><li id="dc34" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">为我们创建一个Game()的实例(一个“实例”就是当你设置一些东西时，例如<code class="du ly lz ma mb b">MyGame = Game(dataframe)</code>)</li><li id="c330" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">取一个目标词，根据该目标词评估一个猜测，给我们一个结果列表</li><li id="a3df" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">将结果反馈给我们的Game()实例，并计算我们的下一个猜测</li><li id="3098" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">循环上面的步骤，直到所有的字母都正确(结果= <code class="du ly lz ma mb b">[2,2,2,2,2]</code>)，或者猜对了6次</li></ul><p id="f35c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来的代码部分摘自<a class="ae jd" href="https://github.com/jack-cook-repo/wordle-solver/blob/main/Wordle%20solver%20-%20exploration.ipynb" rel="noopener ugc nofollow" target="_blank">本本</a>中的<code class="du ly lz ma mb b">play_game</code>函数，整篇文章中都有链接。这个函数接受<code class="du ly lz ma mb b">target_word</code>、<code class="du ly lz ma mb b">df_possible_words</code>(用于构造我们的游戏类)和<code class="du ly lz ma mb b">debug</code>的参数，我将在后面介绍。</p><p id="0966" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们首先初始化游戏，然后猜一猜。然后，我们首先检查正确的字母，因为这些字母最容易处理。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es nd"><img src="../Images/2442fa373bd5d6138bca84ce955f4bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pLiBbY0DG9wwYG0JsE0dg.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="f565" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">函数中的下一段代码查看剩余的字母(位置)。如果没有剩余的位置(正确的猜测)，我们可以在这里打破循环，或者继续玩。</p><p id="3da6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们检查剩余的目标字母，并检查我们的猜测字母是否在目标单词中至少出现一次。</p><p id="9a4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设我们猜的是‘东西’，目标是‘图表’。' h '是正确的，所以我们排除位置2，留下' T_ING '和' C_ART '。我们希望在猜测中用1标记T，其余的用0标记。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ne"><img src="../Images/443127b969f91019aec172f5daa8ca9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RILpPRuhyzE0dbhbiG22DA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="bb5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种复杂性的部分原因是由于双字母。如果我们猜测“GREET ”,而目标是“STAGE ”,我们希望将第一个<strong class="ih hj">标记为“放错位置”( 1 ),而将第二个标记为“不正确”( 0)。</strong></p><p id="7a9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将把函数的最后一部分留在这里，因为它主要是调试或输出相关的，通过它的使用可以更好地显示出来。</p><p id="7f4d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">设置<code class="du ly lz ma mb b">debug=True</code>打印每轮的猜测和结果，而设置<code class="du ly lz ma mb b">debug=False</code>则在游戏结束后返回2个结果(正确的猜测或6轮通过)——目标单词和回合数。</p><p id="fd3a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们用<code class="du ly lz ma mb b">debug=True</code>试一试。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es nf"><img src="../Images/a503f489fa84c4e95eb3698528ec8aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dkDYzPr7upBVDGai-1aKFw.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">到目前为止一切顺利　‘</figcaption></figure><p id="1d64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，为了真正刺激这种方法，我们想在所有的<em class="mf">2315个可能的答案上进行测试，看看效果如何。这是<code class="du ly lz ma mb b">debug=False</code>的工作。</em></p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ng"><img src="../Images/1a116775ca0471363974ebedb02e11ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADgGIqWm01g7R0IujhYAdQ.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">循环所有单词</figcaption></figure><p id="3774" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想使用数据帧可能会减慢这个速度。可能有更有效的方式来运行我的代码，但是一次性2分钟也不错！</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es nh"><img src="../Images/791121f3cba30371fcad8a1e17eb28c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3oQkoricOg85r159WtUUqA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">作者图片</figcaption></figure><p id="6282" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好消息——我们平均只需<em class="mf">超过</em>3.5圈就能解决<strong class="ih hj">任何</strong>字谜！</p><p id="a01e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">坏消息是——我们有13个单词打败了我们的工具。</p><figure class="ki kj kk kl fd km er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ni"><img src="../Images/da647b89a40de4f26959d3a4325e05ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hl3gP4_sOfjhxN6TByKPwA.png"/></div></div><figcaption class="kt ku et er es kv kw bd b be z dx translated">那些逃走的人</figcaption></figure><p id="710e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在花了一些时间一步一步地挖掘这些之后，似乎这些都是我们的工具不能处理的不幸的边缘情况。</p><p id="31ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我想有一种方法可以改善这一点——也许排除或降低过去Wordle答案的权重可能会有所帮助——但2302/2315 (99.4%)的命中率已经相当不错了！</p></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><h1 id="aed0" class="je jf hi bd jg jh lt jj jk jl lu jn jo jp lv jr js jt lw jv jw jx lx jz ka kb bi translated">结论</h1><p id="6f07" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">我们能够建造一些相当成功的东西！</p><p id="536e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你对如何击败前13名或任何其他改进有任何想法，请告诉我。</p><p id="7524" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为下一步，我可能会将它构建成一个Streamlit应用程序，使它更具交互性。</p><p id="0950" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的所有代码都是从<a class="ae jd" href="https://github.com/jack-cook-repo/wordle-solver/blob/main/Wordle%20solver%20-%20exploration.ipynb" rel="noopener ugc nofollow" target="_blank">的这个笔记本</a>中摘录的。感谢阅读！</p></div></div>    
</body>
</html>