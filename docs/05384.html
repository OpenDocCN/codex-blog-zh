<html>
<head>
<title>Stripe payment gateway integration with Laravel 5.8.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">条带支付网关与Laravel 5.8集成。</h1>
<blockquote>原文：<a href="https://medium.com/codex/stripe-payment-gateway-integration-with-laravel-5-8-c274bba7df51?source=collection_archive---------10-----------------------#2022-02-23">https://medium.com/codex/stripe-payment-gateway-integration-with-laravel-5-8-c274bba7df51?source=collection_archive---------10-----------------------#2022-02-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div class="er es hg"><img src="../Images/18ea2c2c8e79a59ccce342d5ec6b42a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*odLy_dkWt6IOYZUPTH5k9g.jpeg"/></div></figure><div class=""/><p id="6b3a" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">问候大家，我是Shivasish Dey。在本文中，我们将了解如何将<strong class="io hq"> Stripe支付网关</strong>与Laravel 5.8项目集成。</p><p id="531e" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们先来简单了解一下<strong class="io hq">条纹</strong>。它允许企业主在全球范围内接受信用卡和借记卡支付，并处理这些支付。企业也可以接受来自手机钱包的支付，现在购买，以后支付服务。Stripe还提供了一种测试模式，开发人员可以使用这种模式进行测试。</p><h1 id="795f" class="jk jl hp bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">要求</strong></h1><ol class=""><li id="dba4" class="ki kj hp io b ip kk it kl ix km jb kn jf ko jj kp kq kr ks bi translated">开发人员的Stripe帐户。</li><li id="c4e3" class="ki kj hp io b ip kt it ku ix kv jb kw jf kx jj kp kq kr ks bi translated">可发布密钥和秘密密钥，您可以在登录后在主页选项卡中获得。</li></ol><p id="d3cc" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">第一步:安装Laravel 5.8 </strong></p><p id="ee04" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">让我们从头开始，为了安装Laravel 5.8，我们将使用下面的命令。打开命令提示符，导航到“htdocs”文件夹。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="47d6" class="lh jl hp ld b fi li lj l lk ll">composer create-project — prefer-dist laravel/laravel blog</span></pre><p id="e206" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">第二步:安装stripe-php包</strong></p><p id="17aa" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">使用composer包管理器，我们必须运行下面的命令来安装stripe-php包。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="7622" class="lh jl hp ld b fi li lj l lk ll">composer require stripe/stripe-php</span></pre><p id="5e05" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">步骤3:设置条纹可公开密钥和秘密密钥</strong></p><p id="5259" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们必须设置可发布密钥和秘密密钥。登录Stripe网站后，我们可以在主页上找到可公开密钥和秘密密钥。</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="07bd" class="lh jl hp ld b fi li lj l lk ll">STRIPE_KEY=pk_test_txxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br/>STRIPE_SECRET=sk_test_exxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></pre><p id="8660" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">将上述两个键复制粘贴到“<strong class="io hq">”中。env </strong>文件。</p><p id="efd1" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">步骤4:创建路线</strong></p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="abf5" class="lh jl hp ld b fi li lj l lk ll">Route::get('stripe', 'StripePaymentController@stripe');<br/>Route::post('stripe', 'StripePaymentController@stripePost')-&gt;name('stripe.post');</span></pre><p id="bc97" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">第五步:创建控制器</strong></p><p id="f7ee" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我建议您为Stripe创建一个单独的控制器文件，以避免进一步的混淆。</p><p id="308e" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="lm">app/Http/Controllers/stripepaymentcontroller . PHP</em></p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="7705" class="lh jl hp ld b fi li lj l lk ll"><strong class="ld hq">namespace</strong> App\Http\Controllers;</span><span id="28f4" class="lh jl hp ld b fi ln lj l lk ll"><strong class="ld hq">use</strong> Illuminate\Http\Request;<br/><strong class="ld hq">use</strong> Session;<br/><strong class="ld hq">use</strong> Stripe;</span><span id="dd02" class="lh jl hp ld b fi ln lj l lk ll"><strong class="ld hq">class</strong> StripePaymentController <strong class="ld hq">extends</strong> Controller{</span><span id="e01c" class="lh jl hp ld b fi ln lj l lk ll">   /**<br/>   * success response method.<br/>   *<br/>   * @return \Illuminate\Http\Response<br/>   */</span><span id="b23c" class="lh jl hp ld b fi ln lj l lk ll"><strong class="ld hq">   public</strong> <strong class="ld hq">function</strong> stripe(){</span><span id="78cd" class="lh jl hp ld b fi ln lj l lk ll">      <strong class="ld hq">return</strong> view('stripe');</span><span id="550d" class="lh jl hp ld b fi ln lj l lk ll">   }</span><span id="bae9" class="lh jl hp ld b fi ln lj l lk ll">   /**<br/>   * success response method.<br/>   *<br/>   * @return \Illuminate\Http\Response<br/>   */</span><span id="fa7f" class="lh jl hp ld b fi ln lj l lk ll"><strong class="ld hq">   public</strong> <strong class="ld hq">function</strong> stripePost(Request $request){</span><span id="8c7b" class="lh jl hp ld b fi ln lj l lk ll">      Stripe\Stripe::setApiKey(env('STRIPE_SECRET'));</span><span id="1869" class="lh jl hp ld b fi ln lj l lk ll">      Stripe\Charge::create ([</span><span id="e270" class="lh jl hp ld b fi ln lj l lk ll">         "amount" =&gt; 100 * 100,<br/>         "currency" =&gt; "usd",<br/>         "source" =&gt; $request-&gt;stripeToken,<br/>         "description" =&gt; "Test payment from itsolutionstuff.com."<br/>   <br/>      ]);</span><span id="3cf2" class="lh jl hp ld b fi ln lj l lk ll">      Session::flash('success', 'Payment successful!');<br/>   <br/>      <strong class="ld hq">return</strong> back();<br/>   }</span><span id="0696" class="lh jl hp ld b fi ln lj l lk ll">}</span></pre><p id="9932" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">步骤6:在前端工作(刀片文件)</strong></p><p id="c080" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们的前端文件将包含从Stripe获取令牌的jQuery。</p><p id="34c6" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><em class="lm">resources/views/stripe . blade . PHP</em></p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="8a18" class="lh jl hp ld b fi li lj l lk ll">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/> &lt;title&gt;Laravel 5 - Stripe Payment Gateway Integration Example - ItSolutionStuff.com&lt;/title&gt;<br/> &lt;link rel="stylesheet" href="<a class="ae lo" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css</a>" /&gt;<br/>    &lt;script src="<a class="ae lo" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js</a>"&gt;&lt;/script&gt;<br/>    &lt;style type="text/css"&gt;<br/>        .panel-title {<br/>        display: inline;<br/>        font-weight: bold;<br/>        }<br/>        .display-table {<br/>            display: table;<br/>        }<br/>        .display-tr {<br/>            display: table-row;<br/>        }<br/>        .display-td {<br/>            display: table-cell;<br/>            vertical-align: middle;<br/>            width: 61%;<br/>        }<br/>    &lt;/style&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  <br/>&lt;div class="container"&gt;<br/>  <br/>    &lt;div class="row"&gt;<br/>        &lt;div class="col-md-6 col-md-offset-3"&gt;<br/>            &lt;div class="panel panel-default credit-card-box"&gt;<br/>                &lt;div class="panel-heading display-table" &gt;<br/>                    &lt;div class="row display-tr" &gt;<br/>                        &lt;h3 class="panel-title display-td" &gt;Payment Details&lt;/h3&gt;<br/>                        &lt;div class="display-td" &gt;                            <br/>                            &lt;img class="img-responsive pull-right" src="<a class="ae lo" href="https://openjournalsystems.com/file/2017/07/payment-success.png" rel="noopener ugc nofollow" target="_blank">https://openjournalsystems.com/file/2017/07/payment-success.png</a>"&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;                    <br/>                &lt;/div&gt;<br/>                &lt;div class="panel-body"&gt;<br/>  <br/>                    <a class="ae lo" href="http://twitter.com/if" rel="noopener ugc nofollow" target="_blank">@if</a> (Session::has('success'))<br/>                        &lt;div class="alert alert-success text-center"&gt;<br/>                            &lt;a href="#" class="close" data-dismiss="alert" aria-label="close"&gt;×&lt;/a&gt;<br/>                            &lt;p&gt;{{ Session::get('success') }}&lt;/p&gt;<br/>                        &lt;/div&gt;<br/>                    <a class="ae lo" href="http://twitter.com/endif" rel="noopener ugc nofollow" target="_blank">@endif</a><br/>  <br/>                    &lt;form role="form" action="{{ route('stripe.post') }}" method="post" class="require-validation"<br/>                                                     data-cc-on-file="false"<br/>                                                    data-stripe-publishable-key="{{ env('STRIPE_KEY') }}"<br/>                                                    id="payment-form"&gt;<br/>                        <a class="ae lo" href="http://twitter.com/csrf" rel="noopener ugc nofollow" target="_blank">@csrf</a><br/>  <br/>                        &lt;div class='form-row row'&gt;<br/>                            &lt;div class='col-xs-12 form-group required'&gt;<br/>                                &lt;label class='control-label'&gt;Name on Card&lt;/label&gt; &lt;input<br/>                                    class='form-control' size='4' type='text'&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>  <br/>                        &lt;div class='form-row row'&gt;<br/>                            &lt;div class='col-xs-12 form-group card required'&gt;<br/>                                &lt;label class='control-label'&gt;Card Number&lt;/label&gt; &lt;input<br/>                                    autocomplete='off' class='form-control card-number' size='20'<br/>                                    type='text'&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>  <br/>                        &lt;div class='form-row row'&gt;<br/>                            &lt;div class='col-xs-12 col-md-4 form-group cvc required'&gt;<br/>                                &lt;label class='control-label'&gt;CVC&lt;/label&gt; &lt;input autocomplete='off'<br/>                                    class='form-control card-cvc' placeholder='ex. 311' size='4'<br/>                                    type='text'&gt;<br/>                            &lt;/div&gt;<br/>                            &lt;div class='col-xs-12 col-md-4 form-group expiration required'&gt;<br/>                                &lt;label class='control-label'&gt;Expiration Month&lt;/label&gt; &lt;input<br/>                                    class='form-control card-expiry-month' placeholder='MM' size='2'<br/>                                    type='text'&gt;<br/>                            &lt;/div&gt;<br/>                            &lt;div class='col-xs-12 col-md-4 form-group expiration required'&gt;<br/>                                &lt;label class='control-label'&gt;Expiration Year&lt;/label&gt; &lt;input<br/>                                    class='form-control card-expiry-year' placeholder='YYYY' size='4'<br/>                                    type='text'&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>  <br/>                        &lt;div class='form-row row'&gt;<br/>                            &lt;div class='col-md-12 error form-group hide'&gt;<br/>                                &lt;div class='alert-danger alert'&gt;Please correct the errors and try<br/>                                    again.&lt;/div&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>  <br/>                        &lt;div class="row"&gt;<br/>                            &lt;div class="col-xs-12"&gt;<br/>                                &lt;button class="btn btn-primary btn-lg btn-block" type="submit"&gt;Pay Now ($100)&lt;/button&gt;<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>                          <br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;        <br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>      <br/>&lt;/div&gt;<br/>  <br/>&lt;/body&gt;<br/>  <br/>&lt;script type="text/javascript" src="<a class="ae lo" href="https://js.stripe.com/v2/" rel="noopener ugc nofollow" target="_blank">https://js.stripe.com/v2/</a>"&gt;&lt;/script&gt;<br/>  <br/>&lt;script type="text/javascript"&gt;<br/>$(function() {<br/>    var $form         = $(".require-validation");<br/>  $('form.require-validation').bind('submit', function(e) {<br/>    var $form         = $(".require-validation"),<br/>        inputSelector = ['input[type=email]', 'input[type=password]',<br/>                         'input[type=text]', 'input[type=file]',<br/>                         'textarea'].join(', '),<br/>        $inputs       = $form.find('.required').find(inputSelector),<br/>        $errorMessage = $form.find('div.error'),<br/>        valid         = true;<br/>        $errorMessage.addClass('hide');<br/> <br/>        $('.has-error').removeClass('has-error');<br/>    $inputs.each(function(i, el) {<br/>      var $input = $(el);<br/>      if ($input.val() === '') {<br/>        $input.parent().addClass('has-error');<br/>        $errorMessage.removeClass('hide');<br/>        e.preventDefault();<br/>      }<br/>    });<br/>  <br/>    if (!$form.data('cc-on-file')) {<br/>      e.preventDefault();<br/>      Stripe.setPublishableKey($form.data('stripe-publishable-key'));<br/>      Stripe.createToken({<br/>        number: $('.card-number').val(),<br/>        cvc: $('.card-cvc').val(),<br/>        exp_month: $('.card-expiry-month').val(),<br/>        exp_year: $('.card-expiry-year').val()<br/>      }, stripeResponseHandler);<br/>    }<br/>  <br/>  });<br/>  <br/>  function stripeResponseHandler(status, response) {<br/>        if (response.error) {<br/>            $('.error')<br/>                .removeClass('hide')<br/>                .find('.alert')<br/>                .text(response.error.message);<br/>        } else {<br/>            <br/>            var token = response['id'];<br/>            <br/>            $form.find('input[type=text]').empty();<br/>            $form.append("&lt;input type='hidden' name='stripeToken' value='" + token + "'/&gt;");<br/>            $form.get(0).submit();<br/>        }<br/>    }<br/>  <br/>});<br/>&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="0a95" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hq">第七步:测试数据</strong></p><p id="8096" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">名称:<your name=""/></p><p id="b45a" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">卡号:4242 4242 4242 4242</p><p id="2283" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">CVV: 123人</p><p id="5451" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">到期月份:12</p><p id="b943" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">有效期:2024年</p></div><div class="ab cl lp lq gp lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="hb hc hd he hf"><p id="c582" class="pw-post-body-paragraph im in hp io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">祝你好运👍</p></div></div>    
</body>
</html>