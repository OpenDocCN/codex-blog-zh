<html>
<head>
<title>How to Do Testing with Postman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Postman进行测试</h1>
<blockquote>原文：<a href="https://medium.com/codex/testing-with-postman-527e844eefb?source=collection_archive---------13-----------------------#2022-07-29">https://medium.com/codex/testing-with-postman-527e844eefb?source=collection_archive---------13-----------------------#2022-07-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="fa18" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">每个API的安全测试</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/7d0b7ea322abc45c657a3b4f8a10b5c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Hw0v73Gg5d0x5e-q.jpg"/></div></div></figure><p id="dec0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我是尼科，</p><p id="0fdb" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我是伦敦一家票务经纪公司的高级工程师。</p><p id="7480" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从办公室！是我每天(几乎)都会写的日志，记录我在日常办公室生活中所做的科技事情。</p><h1 id="3c69" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">故事</h1><p id="9a4c" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">如果你已经在web开发环境中呆了一段时间，你肯定会遇到“重构”这个词。</p><p id="b210" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个词的意思仅仅是改善代码的当前状态，而不对其结果做任何实质性的改变。</p><p id="6a01" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我刚刚换了工作，我在新工作场所的主要任务是使用PHP 8将旧的Silex API替换为一个全新的闪亮的现代Symfony 6应用程序。</p><p id="ac89" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">首先，如果你在阅读这篇文章的时候没有停下来谷歌一下Silex是什么，那么恭喜你！你真的在这个街区待了很长时间了。</p><p id="e234" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在就来说编码吧！</p><p id="e44b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">我最初面临的问题是，我正在处理的代码是遗留代码。</strong></p><p id="d8ba" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我指的遗留代码不是Michael Feathers在他的书《有效使用遗留代码》中描述的那种代码</p><blockquote class="lc"><p id="527d" class="ld le hi bd lf lg lh li lj lk ll ke dx translated">对我来说，遗留代码就是没有测试的代码。</p></blockquote><p id="ce02" class="pw-post-body-paragraph jj jk hi jl b jm lm ij jo jp ln im jr js lo ju jv jw lp jy jz ka lq kc kd ke hb bi translated">我的意思是实际上遗留，遗留代码！</p><p id="2b35" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">还记得需要用array()构造来设置数组的那一天吗？</p><p id="4147" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">是的，遗留代码！</p><p id="7bbc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">当然，代码的测试覆盖率为0%,而且非常复杂、棘手、精细、复杂、繁琐、庞大，是的，它们都是同义词，只是为了让你更清楚地了解情况。</p><h1 id="b5a2" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">问题是</h1><p id="b762" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">对我来说，重构的第一步是编写代码，集成，然后是单元测试，这样我就可以确定，如果我移动一些代码或者创建新的类、接口等等，我不会破坏任何东西。</p><p id="6f84" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里的问题是，我面前有12年，如果不是更多年，由1200到3000行组成的文件都链接到一个管理一切的应用程序/应用程序类。</p><p id="0b66" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从数据库连接到检索会话到检查用户的权限和产品等。</p><p id="276c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一切。</p><p id="1357" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">我不可能在不破坏某些东西的情况下接触那些代码，很可能是商业核心的东西。</strong></p><h1 id="2fb0" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">解决方案</h1><p id="9856" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">我很确定我们以前都听说过自动化测试。</p><p id="272e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">有很多测试库，PHPUnit，Mockery是最流行的。</p><p id="69af" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这很好，但这都是代码内测试。</p><p id="4be8" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">作为一个社区，我们没有充分讨论的是代码外测试。</p><p id="38ea" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">…介绍邮递员…</p><h1 id="bb7b" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">邮递员是什么？</h1><p id="bde0" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">Postman是一个构建和使用API的平台。</p><p id="101b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它是这个领域的主要产品，有很多令人惊讶的特性，比如API客户端、模拟服务器、运行程序、监视器以及测试。</p><p id="be12" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这就是我们在这篇文章中要谈论的内容</p><h1 id="a32d" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">为什么要进行邮递员测试？</h1><p id="c800" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">进行测试是确保API按预期运行、服务可靠以及任何更改都不会破坏现有功能的基础。</p><p id="e7e5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Postman允许您为每个请求编写测试脚本。</p><p id="8c2a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">万一你的项目出了问题，测试也可以作为一个调试过程。</p><p id="8c79" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">测试可以添加到单个请求、集合或整个文件夹中。</p><p id="9cfc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它还有一个名为Newman的命令行工具。</p><p id="6796" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">你知道这意味着什么吗？</p><p id="8508" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">实际上，您可以在CI/CD系统上的管道中运行命令，并测试您的API，而无需更改一行代码或向脆弱的项目添加PHPUnit。</p><p id="f264" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">太棒了。</p><h1 id="903b" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">如何邮寄测试</h1><p id="1cf2" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">在给定请求的主邮递员页面上，您会发现几个选项卡。</p><p id="feec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">参数、授权、主体、设置等</p><p id="91ff" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们感兴趣的是测试。</p><p id="3323" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">该屏幕分为两部分。</p><p id="7f60" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">左边的主要部分包含您正在运行的实际测试，较小的部分包含一些您可以尝试的测试的小示例片段。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lr"><img src="../Images/02887f2c9db683dd63ce24b626255b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WiAl5MrVJd2O3L-V.jpg"/></div></div></figure><p id="7c40" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如前所述，编写这些测试的语言是普通的JavaScript，这种语言非常流行，我相信你使用它不会有任何问题。</p><blockquote class="ls lt lu"><p id="1571" class="jj jk lv jl b jm jn ij jo jp jq im jr lw jt ju jv lx jx jy jz ly kb kc kd ke hb bi translated">“任何可以用JavaScript编写的应用程序，最终都会用JavaScript来编写”——杰夫·阿特伍德提到了阿特伍德定律</p></blockquote><p id="0f88" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">以下是一些例子:</p><pre class="iy iz ja jb fd lz ma mb mc aw md bi"><span id="9946" class="me kg hi ma b fi mf mg l mh mi">pm.test("Status test", function () {<br/>    pm.response.to.have.status(200);<br/>});<br/>// where pm stands for the Postman object and the test is checking for a 200 HTTP response</span><span id="2718" class="me kg hi ma b fi mj mg l mh mi">pm.test("response should be okay to process", function () {<br/>    pm.response.to.not.be.error;<br/>    pm.response.to.have.jsonBody("");<br/>    pm.response.to.not.have.jsonBody("error");<br/>});</span><span id="a2b5" class="me kg hi ma b fi mj mg l mh mi">// Well, those are quite straighforward, aren't they?</span></pre><p id="fb55" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">测试时的另一个重要特性是收集运行器。</strong></p><p id="1458" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它使您能够以特定的顺序运行集合中的请求。</p><p id="024e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">它记录您的请求测试结果，并可以使用脚本在请求之间传输数据，还可以调整工作流。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mk"><img src="../Images/9cb7aa08af2b91a2bcb0421f0d1cabfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OC3ydVkCJ2cpe9ly.jpg"/></div></div></figure><p id="4602" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">尽管这些不是真正的单元测试，但是当处理一个如此微妙的项目时，我相信这是最好的方法。</p><p id="3c10" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后，当端点被测试后，在新域上复制测试并检查是否每一个都通过是非常简单的<strong class="jl hj">。</strong></p><h1 id="cb7c" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">你的观点是什么？</h1><p id="3cf8" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">你如何看待库外测试？</p><p id="d2a5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在你的日常实践中加入这些测试值得吗？</p><p id="623e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此外，如何重构真正的旧代码？</p><p id="3a01" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在下面的评论中写下你的想法。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ml"><img src="../Images/b416d3a2fd7b97fc207e1c01ae3969b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*auxtTCGOOBPQH18GSkEKhA.png"/></div></div></figure><h1 id="ecde" class="kf kg hi bd kh ki kj kk kl km kn ko kp io kq ip kr ir ks is kt iu ku iv kv kw bi translated">结论</h1><p id="9c9f" class="pw-post-body-paragraph jj jk hi jl b jm kx ij jo jp ky im jr js kz ju jv jw la jy jz ka lb kc kd ke hb bi translated">我已经做了将近十年的网页开发员了。</p><p id="f577" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">与位于伦敦市中心的世界级企业和屡获殊荣的营销机构合作。</p><p id="7df2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">此外，我在我的博客和在线社区上写文章和教程，并帮助企业在网上建立他们的存在。</p><p id="393e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><a class="ae mm" href="https://anastasionico.uk/blog" rel="noopener ugc nofollow" target="_blank">点击这里阅读我100多篇博文</a></p></div></div>    
</body>
</html>