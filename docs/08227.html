<html>
<head>
<title>Getting started with Aerokube Selenoid on AWS EC2 Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS EC2 Linux上的Aerokube Selenoid入门</h1>
<blockquote>原文：<a href="https://medium.com/codex/getting-started-with-aerokube-selenoid-on-amazon-aws-linux-416901bd2fe?source=collection_archive---------7-----------------------#2022-07-25">https://medium.com/codex/getting-started-with-aerokube-selenoid-on-amazon-aws-linux-416901bd2fe?source=collection_archive---------7-----------------------#2022-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d51b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Selenoid是原Selenium hub代码的一个强大的Golang实现。它使用Docker来启动浏览器。</p><p id="8bf6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在这里阅读更多关于Selenoid的信息</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/cd7503dc0145f82df433de6092a28887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OIvBym29mKlkR-5DHj_AiQ.png"/></div></div></figure><p id="7e26" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将主要探讨如何在Amazon EC2 Linux实例中安装Selenoid，并在AWS中为您的跨浏览器兼容性测试设置selenio网格，让我们开始吧。</p><h2 id="0db4" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated"><strong class="ak">步骤1:创建一个AWS EC2 Linux实例</strong></h2><p id="8077" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">先决条件:你需要一个AWS帐户，你可以导航到<a class="ae jd" href="https://portal.aws.amazon.com/billing/signup#/start/email" rel="noopener ugc nofollow" target="_blank">注册</a>页面创建一个帐户。</p><p id="bda1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注册后，登录AWS管理控制台并导航到AWS EC2，这是一项可用于创建虚拟机的计算服务。它们提供了从Linux、Ubuntu、Windows和macOS开始的广泛选择。在我们的例子中，我们将使用一个基于Linux的实例。需要注意的一点是，EC2实例是区域性服务，您可以在单个区域或跨区域创建多个实例。您可以根据控制台页面上的下拉列表检查您当前选择的区域。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/40ab75528ec9c4ef026167f5dc22951c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u_c6ZzljuqzOB1VjZvRWnA.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">AWS EC2仪表板</figcaption></figure><p id="93f8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以选择一个靠近您的地理位置的地区，然后继续创建EC2实例。</p><div class="ku kv ez fb kw kx"><a href="https://aws.amazon.com/about-aws/global-infrastructure/regions_az/" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab dw"><div class="kz ab la cl cj lb"><h2 class="bd hj fi z dy lc ea eb ld ed ef hh bi translated">全球基础设施区域和az</h2><div class="le l"><h3 class="bd b fi z dy lc ea eb ld ed ef dx translated">AWS有一个区域的概念，它是我们在世界各地聚集数据中心的物理位置。我们称之为…</h3></div><div class="lf l"><p class="bd b fp z dy lc ea eb ld ed ef dx translated">aws.amazon.com</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll jo kx"/></div></div></a></div><p id="750b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击EC2仪表板上的“启动实例”按钮，您将被导航到下面的页面。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/e63dae3eccc1cf25d417b0a3e3639f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y3r8vqfUwJ_WJ2RCnbGdDw.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">使用AMIs创建EC2实例</figcaption></figure><p id="68a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于演示目的，我们将选择任何可用的“Amazon Linux 2 AMI”机器，这将把我们重定向到“选择实例类型”页面。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lm"><img src="../Images/42c8dcb3f6b4beaa6dac9f1b02e0ba1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mxLyVihxpoQa-uTVTOTmA.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">选择实例类型</figcaption></figure><p id="0553" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们的例子中，我们将继续选择t2.medium实例类型。安装完成后，您可以终止t2.medium实例，这样就不会产生太多的成本。由于这些是按需实例，您将根据使用情况付费，一般来说，您的口袋不会太重。我们还可以选择“符合空闲层条件”的t2.micro实例类型，但您可能会注意到使用此实例类型时速度有些慢，因为vCPUs的数量和内存大小相对小于其他实例。</p><p id="668e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">点击“配置实例详细信息”按钮，在此页面中您可以选择默认选项，默认情况下AWS将为您分配一个VPC(虚拟私有云)、子网等。您可以单击添加存储移至下一页。</p><p id="82a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在“Add Storage”页面上，您可以将默认存储值保留为8gb，也可以将其略微增加到10或12gb。由于Selenoid将为Firefox、Chrome和Opera浏览器提取许多docker图像，这会占用相当多的空间。因此，如果您针对实例类型相应地调整存储以避免任何空间问题，效果会更好。在我的情况下，我一直保持在10吉卜。</p><p id="c482" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，您可以添加或跳过“添加标记”页面，转到“配置安全组”页面。</p><p id="da83" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安全组:这是需要正确更新的最重要的步骤，以便您访问您的Selenoid Hub URL &amp; Selenoid UI页面。</p><p id="1435" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以创建一个新的安全组，并根据添加的快照添加下述规则。请注意，我已经编辑了该图像以删除我的IP详细信息，在您的情况下，如果您选择“Source”下的“My IP”下拉选项，您的IP详细信息将会自动填充。如果您希望您的实例可以从任何IP访问，您也可以选择Source:“Anywhere”</p><p id="c0ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要为Selenoid公开以下端口:</p><p id="dcae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">22 —用于连接EC2实例<br/> 4444的SSH端口—这是Selenium HUB URL端口<br/> 8080 —您可以通过该端口访问Selenoid UI</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ln"><img src="../Images/f9a20494a766ca409a7568fa537e46a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G05mNBKOv-FHc5D29DZLZQ.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">配置安全组</figcaption></figure><p id="48a2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以选择为您的安全组提供名称和描述，这将有助于将来创建任何新实例，因为您还可以选择以前创建的安全组。</p><p id="8293" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们是实例创建的最后一步，您需要单击按钮“Review and Launch”。这将打开“Review”页面，您可以验证并确认所选的详细信息和选项，发布后您可以单击“Launch”按钮来启动EC2实例。</p><p id="a068" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击启动按钮，您将看到如下所示的“选择或创建新的密钥对”窗口。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lo"><img src="../Images/41f7c4bf9161f8754e5819e739f3f594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oyacxQ1THPPrNrP33FQlbQ.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">选择或创建EC2密钥对</figcaption></figure><p id="076e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于这是一个全新的设置，您可以在第一个下拉菜单中选择“创建新的密钥对”选项。在文本框中提供一些相关的“密钥对名称”,然后单击下载密钥对按钮。这将下载一个. pem文件，该文件可用于SSH并登录到您的EC2实例。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lp"><img src="../Images/41ee0f9f1a3de4d9d8866415933a97f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NR5MqER9OV5zrbR7fKzIOw.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">下载密钥对并启动实例</figcaption></figure><p id="5e06" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">单击“启动实例”按钮，这将启动您的AWS EC2 Linux实例。您需要等待几分钟，让实例完全启动并运行。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lq"><img src="../Images/2488a160a201c35686dd7dec2a495028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*qyeQfTsMwjG0m2cwlLSpjQ.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">EC2运行状态</figcaption></figure><h2 id="a9c6" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated"><strong class="ak">步骤2:连接到创建的AWS EC2实例</strong></h2><p id="3bef" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">登录EC2实例有多种方式，在本文中，我们将使用下载的。pem文件登录并访问我们的EC2实例。</p><ol class=""><li id="110d" class="lr ls hi ih b ii ij im in iq lt iu lu iy lv jc lw lx ly lz bi translated">打开命令提示符窗口或mac终端，将命令cd所在的目录更改为下载。pem文件。就我而言。pem文件存储在下载文件夹中，所以我将只执行</li></ol><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="4b25" class="jq jr hi mb b fi mf mg l mh mi">cd Downloads</span></pre><p id="641f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">2.接下来，为了对实例执行SSH，我们可以参考下面的命令模板</p><blockquote class="mj mk ml"><p id="f904" class="if ig mm ih b ii ij ik il im in io ip mn ir is it mo iv iw ix mp iz ja jb jc hb bi translated">ssh -i文件名. pem ec2-user@ec2-public-ip</p></blockquote><p id="3f51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">作为我的。pem文件命名为:Selenoid_Key.pem，我的ec2-public-ip是43.205.128.212，我需要执行的命令应该如下所示。<em class="mm">(注:这将根据您的设置而变化。pem文件名和公共IP地址将不同)</em></p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="df01" class="jq jr hi mb b fi mf mg l mh mi">ssh -i Selenoid_Key.pem ec2-user@43.205.128.212</span></pre><p id="2571" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">3.输入上述命令并按ENTER后，将显示一个问题提示，要求将主机添加到您的known_hosts文件中。只需键入yes并按回车键。您应该登录到您的实例。</p><p id="d213" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">登录到EC2实例后，您需要执行的第一个命令是更新机器中所有可用的现有依赖项和库。您可以使用下面的命令来完成。</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="0fb5" class="jq jr hi mb b fi mf mg l mh mi">sudo yum update -y</span></pre><h2 id="8093" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤3:在AWS EC2实例中安装Docker</h2><p id="549f" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">验证docker是否已经安装在您的EC2实例中，只需键入“Docker”并按回车键，如果您得到一大堆细节，如下面的快照，这意味着Docker已经安装在您的EC2实例中。您可以跳过Docker安装步骤，继续前进。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/65cc8a7256c980d3202d32310c758248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*imovxwiDy7ZAqRI5HA1-nQ.png"/></div></div></figure><p id="fef7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">否则，您可能需要使用以下命令安装Docker:</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="636e" class="jq jr hi mb b fi mf mg l mh mi">sudo yum install docker -y</span></pre><p id="d31e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装后，您可能需要启动Docker服务，您可以执行下面的命令来启动Docker服务。</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="9d38" class="jq jr hi mb b fi mf mg l mh mi">sudo systemctl start docker</span></pre><p id="ea3f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以使用下面的命令来验证Docker是否正在运行，您应该能够看到Active(正在运行)</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="2508" class="jq jr hi mb b fi mf mg l mh mi">sudo systemctl status docker</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/d9db75ffd45affdcd30224e20f2a2afa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YTSZIb819FylvNmEuTQjSA.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">Docker服务激活</figcaption></figure><h2 id="5834" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤4:安装Selenoid和Selenoid UI</h2><p id="c606" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">首先，我们需要下载配置管理器，这里我用的是Linux版本1 . 8 . 1<a class="ae jd" href="https://github.com/aerokube/cm/releases/latest" rel="noopener ugc nofollow" target="_blank">发布</a></p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="6ba6" class="jq jr hi mb b fi mf mg l mh mi">sudo wget “<a class="ae jd" href="https://github.com/aerokube/cm/releases/download/1.8.1/cm_linux_amd64" rel="noopener ugc nofollow" target="_blank">https://github.com/aerokube/cm/releases/download/1.8.1/cm_linux_amd64</a>”</span></pre><p id="54e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们将不得不对使用wget命令下载的配置管理器二进制文件授予执行权限。</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="9653" class="jq jr hi mb b fi mf mg l mh mi">sudo chmod +x cm_linux_amd64</span></pre><p id="427f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用以下命令启动Selenoid，这可能需要几分钟，因为它将下载所有相关的selenoid图像和不同的浏览器图像Chrome、Firefox和Opera。</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="27d3" class="jq jr hi mb b fi mf mg l mh mi">sudo ./cm_linux_amd64 selenoid start –vnc</span></pre><p id="e5e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将ec2用户添加到Docker组</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="5bb2" class="jq jr hi mb b fi mf mg l mh mi">usermod -aG docker ec2-user</span></pre><p id="78cd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">启动Selenoid UI</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="bd3d" class="jq jr hi mb b fi mf mg l mh mi">./cm_linux_amd64 selenoid-ui start</span></pre><p id="ded7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Post，执行所有上述命令您可以使用下面的命令来验证是否所有的图像都已被成功拉入。</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="070d" class="jq jr hi mb b fi mf mg l mh mi">docker images</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mq"><img src="../Images/20323eb020f558c3c548c694e0fca9b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qL7VylbLyl8y7SE5vtH45A.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">拉出来的月形图像</figcaption></figure><p id="7886" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了aerokube/selenoid、aerokube/selenoid-ui、selenoid/ video-recorder图像之外，您还应该能够看到以下浏览器图像:带有不同标签或版本的Firefox、Chrome和Opera。</p><p id="0011" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用下面的命令检查所有正在运行的容器</p><pre class="jf jg jh ji fd ma mb mc md aw me bi"><span id="3f67" class="jq jr hi mb b fi mf mg l mh mi">docker ps</span></pre><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/9e00764a245ebdeec9b7cbe0e930bda4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFcfGzOF8oJkkP_-GcjLVg.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">月形容器</figcaption></figure><h2 id="c0c3" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤5:从浏览器访问Selenoid UI</h2><p id="8f7a" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">你可以从你的浏览器访问Selenoid用户界面，为此你需要导航到网址:http://43.205.128.212:8080</p><p id="f6f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里的IP地址:43.205.128.212是我创建的EC2实例的公共IP，在您的情况下，公共IP将会不同。在EC2安全组中，我们通过添加TCP规则允许端口8080上的流量，因此我们应该能够使用公共IP地址和端口8080访问Selenoid UI。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/d486f0978c7ad725b928a82f1a855ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSQzkI_9E7ISDGaHTaW_PA.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">Selenoid UI</figcaption></figure><h2 id="1b55" class="jq jr hi bd js jt ju jv jw jx jy jz ka iq kb kc kd iu ke kf kg iy kh ki kj kk bi translated">步骤6:在Selenoid网格中执行测试脚本</h2><p id="6601" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">终于，我们到达终点了！！我们需要使用Selenium Grid concept:desired capabilities和RemoteWebDriver类，其中我们需要传入所有适用的功能和Selenoid grid hub URL详细信息，这些信息将用于在Selenoid中可用的相应浏览器容器中连接和运行Selenium WebDriver测试。</p><p id="d911" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个带有Chrome版本102.0的Java的DesiredCapabilities示例，可以从Selenoid UI页面引用。在浏览器设置期间，我们需要在测试自动化脚本中配置类似的东西。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/ea827fc572d89182cba3a8999190da25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGfq7M1MqtzYfOYbRnrmWA.png"/></div></div></figure><p id="0ddf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个非常简单的方法，我们可以在我们的设置脚本中配置细节，浏览器和版本细节是从TestNG参数传递的。目前，我只是使用TestNG BeforeMethod注释来初始化和设置Selenoid测试的所有浏览器功能。</p><p id="545f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于我们已经将enableVNC和enableVideo的功能设置为true，我们应该能够在Selenoid UI中查看正在运行的测试，并获得所有测试执行的视频输出文件，这非常有用。</p><p id="17e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所有请求都应该传递到我们的Selenoid Hub URL，在我们的例子中是<a class="ae jd" href="http://43.205.128.212:4444/wd/hub" rel="noopener ugc nofollow" target="_blank">http://43.205.128.212:4444/wd/hub</a>(在您的例子中，您可以用您的ec2实例公共IP地址替换IP地址)。端口4444暴露在EC2安全组中。从hub，节点请求将根据传递的功能被重定向到适当的浏览器。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mr"><img src="../Images/29e82c322b33a19cd47c17c1fdf30502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26Qal10il9Vtmb6s1cGToQ.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">样本测试类</figcaption></figure><p id="6962" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">查看在Selenoid中执行的测试脚本</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ms"><img src="../Images/43b105b28f0162ebb37a7805cafa9695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vtaYtp0HDStOYlOTvlrrLw.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">Selenoid UI —执行</figcaption></figure><p id="981d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以单击相应的浏览器会话来查看正在执行的脚本。执行后，容器将被处理掉。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mt"><img src="../Images/023662e99a5f925501996cc1af362aa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FhScT8h9VX3rSHR02e8EAQ.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx translated">VNC进行测试</figcaption></figure><p id="9e02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">视频还将在视频部分生成，可用于日志记录、收集证据或调试目的。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mu"><img src="../Images/101ec971e666c4f26b3db9ba889ab1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0Rv1LBlPQNg6_bJeT0v9w.png"/></div></div></figure><p id="2e7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际操作之后，一定要确保终止正在运行的EC2实例，方法是转到Actions并选择“实例状态”下的terminate选项，以避免对您的帐户收取过多的费用。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mv"><img src="../Images/4877eecdb7d2bd698c4591b6bb072452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*5c8zBeF4UUw0OUyAXl1L2Q.png"/></div></div></figure><p id="7522" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望本文对您在AWS EC2实例中设置Selenoid和Selenoid UI有所帮助，如果您有任何问题或疑问，请告诉我。</p><p id="150a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读！！干杯！！</p></div></div>    
</body>
</html>