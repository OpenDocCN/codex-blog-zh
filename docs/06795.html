<html>
<head>
<title>STOP doing this in your Compose Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在您的撰写项目中停止这样做</h1>
<blockquote>原文：<a href="https://medium.com/codex/stop-doing-this-in-your-compose-project-4382f2d3b768?source=collection_archive---------11-----------------------#2022-05-13">https://medium.com/codex/stop-doing-this-in-your-compose-project-4382f2d3b768?source=collection_archive---------11-----------------------#2022-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/64d8c57504d45117e4187d70e9a9771e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/0*9uhvXrvyGfv7-g7C.png"/></div></figure><p id="c7e7" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">您正在创建一个非常棒的可组合函数。它有一个复杂的用户界面，有吸引人的动画和大量的定制空间。你花了几个小时在这个功能上，试图使它完美。但是，哦，它有太多的定制参数。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="a43a" class="jt ju hi jp b fi jv jw l jx jy">@Composable<br/>fun MyFancyComponent(<br/>  value: Int,<br/>  onValueChanged: (Int) -&gt; Unit,<br/>  modifier: Modifier = Modifier,<br/>  primaryColor: Color = Color.Black,<br/>  accentColor: Color = Color.Red,<br/>  itemSpacing: Dp = 8.dp,<br/>  componentStyle: ComponentStyle = ComponentStyle.Normal,<br/>  [...]<br/>) {...}</span></pre><p id="663f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">虽然有些人更喜欢对他们的组件使用这种方法，并使用命名的参数调用函数，但有些人不喜欢让他们的参数列表变得臃肿，而是希望找到一种替代方法。类似的工作方式。</p><p id="604d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><code class="du jz ka kb jp b">Modifier</code>是一个接口，您可以在其中链接您希望布局可组合的属性，以满足您的设计。让我们尝试将这种技术用于<code class="du jz ka kb jp b">MyFancyComponent</code>功能。</p><p id="0bed" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在您的项目中，让我们创建一个类并将其命名为<code class="du jz ka kb jp b">MyFancyComponentAttributes</code>。这将具有您需要的可组合函数的所有属性。对于您希望添加的每个属性，用一个默认值和一个私有setter保持它的公共属性，并添加一个与属性同名的函数。</p><p id="4268" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">例如，我们已经创建了类，我们想添加<code class="du jz ka kb jp b">primaryColor</code>属性，我们可以写，</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="4cc0" class="jt ju hi jp b fi jv jw l jx jy">class MyFancyComponentAttributes {</span><span id="06c2" class="jt ju hi jp b fi kc jw l jx jy">  var primaryColor: Color = Color.Black<br/>    priavte set</span><span id="06ab" class="jt ju hi jp b fi kc jw l jx jy">  fun primaryColor(value: Color) = <br/>    apply {<br/>      primaryColor = value<br/>    }</span><span id="7f33" class="jt ju hi jp b fi kc jw l jx jy">  [...]<br/>}</span></pre><p id="e8e6" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">该函数将接受一个颜色作为参数，并返回具有修改属性的相同对象。对所有属性继续这样做。</p><p id="0a57" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在将可组合函数改为</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="0e03" class="jt ju hi jp b fi jv jw l jx jy">/* in your composable file */<br/>@Composable<br/>fun MyFancyComponent(<br/>  value: Int,<br/>  onValueChanged: (Int) -&gt; Unit,<br/>  modifier: Modifier = Modifier,<br/>  attrs: MyFancyComponentAttributes = MyFancyComponentAttributes()<br/>) {<br/>  // Access properties by attrs.primaryColor, etc<br/>}</span><span id="0db8" class="jt ju hi jp b fi kc jw l jx jy">/* while calling the composable function */<br/>MyFancyComponent(<br/>  value = number,<br/>  onValueChanged = { number = it},<br/>  modifier = Modifier<br/>    .padding(horizontal = 16.dp),<br/>  attrs = MyFancyComponentAttributes()<br/>    .primaryColor(Color.White)<br/>    .accentColor(Color.Purple)<br/>    .itemSpacing(12.dp)<br/>)</span></pre><p id="5da8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是一种简单而强大的方法，可以将必要的属性从阻塞的函数定义中分离出来，并且与Google提供的<code class="du jz ka kb jp b">Modifier</code>模式一致。</p></div></div>    
</body>
</html>