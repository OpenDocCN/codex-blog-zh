# 你可能不知道的 Java 关键词

> 原文：<https://medium.com/codex/java-keywords-you-might-not-know-e96fe5b3333b?source=collection_archive---------13----------------------->

![](img/9c1cc69bc074de5d350151663c6c9c7e.png)

来自 [Unsplash](https://unsplash.com/photos/9SoCnyQmkzI) 的 Jefferson Santos

Java 语言提供了许多不同的关键字。关键字是具有预定义含义的保留字。因此，它不能用作变量、方法或类的名称。然而，有一个例外，这篇文章中涉及了一些不为人知的关键字。

# 例外情况

## 转到

如果你是 Windows 用户或 C/C++开发人员，那么你可能会遇到一次“ **goto** 关键字。您可以使用 goto 定义的标识符跳转到批处理脚本或 C/C++代码中的特定位置。

虽然在许多情况下，关键字使代码更难阅读，但它值得存在。许多开发人员仍然不时地在他们的代码中使用它，至少在 Java 中不再使用了。在 Java 中，“goto”是一个没有任何功能的关键字。甲骨文前段时间把它去掉了。

> *Java 没有 goto 语句。研究表明，goto 经常被(错误地)使用，而不仅仅是“因为它在那里”。取消 goto 导致了语言的简化——例如，没有关于在 for 语句中间 goto 的效果的规则。对大约 100，000 行 C 代码的研究确定，大约 90%的 goto 语句纯粹用于获得跳出嵌套循环的效果。如上所述，多级 break 和 continue 删除了大部分 goto 语句。*

Goto 是多余的，会引发难以辨认、不可维护的代码。这就是为什么它在 Java 中是一个保留的关键字，但没有赋予它任何功能的原因之一——现在你不应该在任何地方使用它。

## 常数

在 Java 中，这仍然是一个关键字，用它可以定义常量。但是，由于“ **goto** ”关键字不再使用，开发人员应该使用“ **final** ”关键字。

Oracle 无法在不破坏兼容性的情况下实现" **const** "关键字。如果许多 Java 程序仅仅因为一个关键字而失败，那将是一场噩梦。

> 兼容性是 JDK 的一个非常重要的特点。可以说，应该修改集合类以表明元素是常量。这将要求所有现有的实现以同样的方式更新，有效地打破了集合接口的所有现有的非 JDK 实现。类似地，hashCode 必须是 const，打破了 String 的当前实现。"

# 断言

Java 有函数断言，比如带有“ **assert** ”关键字的编程语言 Dart，这对于调试来说是极好的。

提供一个布尔值，当该布尔值为假时，将引发 AssertionError。

从理论上讲，您可以捕获断言错误，但是有一个很好的理由不这样做。Java 中的错误是不应该被捕获的，因为它们代表了某件事情的严重失败。
另一个例子是，当你的程序耗尽内存时，它应该崩溃并告诉用户有问题。所以，如果一个程序最终不需要工作，就不要捕捉错误。

一般来说，断言是保证程序正常工作的一种很好的方式，但是在 Java 中，它们只有在您选择使用启动参数“-ea”时才有效，该参数代表“启用断言”。如果您不这样做，那么断言将不起作用，并将被忽略。

# 同步的

当编写一个关键的程序时，比如对一个用户的账户进行交易或计算视图数，你的程序可能会遇到问题，这取决于你如何实现某些事情。

假设您同时收到两个请求。例如，两个用户同时查看一个页面，后端现在将更新计数。您的方法被调用，获取当前视图计数，加 1，并将该数字存储在数据库中。
因为请求是同时到来的，所以两种方法获取相同的视图计数，加 1，并在数据库中存储相同的数量。换句话说，一个视图丢失了。

1.  线程 A:检索视图；获得值 0
2.  线程 B:检索视图；获得值 0
3.  线程 A:递增检索到的值；结果是 1。
4.  线程 B:递增检索值；结果是 1。
5.  线程 A:将结果存储在视图中；视图现在为 1。
6.  线程 B:将结果存储在视图中；视图现在为 1。

“ **synchronized** ”关键字可以防止这种情况的发生，它让对视图进行计数的方法不要一次运行多次。如果一个线程试图运行它，而另一个线程执行该方法，JRE 将阻塞该调用，直到另一个线程完成执行。对于较小的页面，这是合适的解决方案，直到它们获得巨大的访问量。然后，“队列”一次只能处理一个请求，这可能是一个弱点。想象一下每分钟获得数百万次浏览——队列无法满足要求。

# 短暂的

“ **transient** ”关键字用于类中的字段。它定义了一个字段不属于对象持久化的状态，因此不应该被序列化。换句话说，瞬态场被忽略，例如使用 GSON。

如果我们使用 GSON 将这个类转换成 JSON，那么字段`ignored`将不会包含在我们的 JSON 字符串中。

为了说明问题，持久数据是指在程序完成执行后，别有用心地存在的数据。例如，如果你玩一个视频游戏，并创建一个保存游戏，你写了一些东西到硬盘上。这些数据是持久的，在你关闭游戏后还会继续“活着”。你只关心你的保存游戏中的某些事情，例如，玩家位置，库存等。调试信息或短期数据并不重要，所以这些字段是暂时的，不会被保存。

# 结论

本文讨论了为什么 **goto** 和 **const** 在 Java 中只作为保留关键字存在的原因。除此之外，你还学习了一些关于**同步**和**瞬态**以及如何使用它们的知识。