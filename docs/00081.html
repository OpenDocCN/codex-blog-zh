<html>
<head>
<title>Changes in dict implementation from python 3.7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python 3.7中dict实现的变化</h1>
<blockquote>原文：<a href="https://medium.com/codex/rename-the-keys-of-a-python-dictionary-in-8929922479a3?source=collection_archive---------5-----------------------#2020-06-28">https://medium.com/codex/rename-the-keys-of-a-python-dictionary-in-8929922479a3?source=collection_archive---------5-----------------------#2020-06-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="d9c5" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">重命名Python字典的所有关键字，<a class="ae ge" href="http://medium.com/codex" rel="noopener"> CODEX </a></h2><div class=""/><div class=""><h2 id="77be" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">如何在python 3.7及以上版本中修改字典的键而不改变其值</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/b9f9ecdb0e4299483b84cffefa0d3ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QZgaLHhOxkx0UEr5"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">在<a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jw" href="https://unsplash.com/@hiteshchoudhary?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Hitesh Choudhary </a>拍摄的照片</figcaption></figure><p id="0f97" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><strong class="jz hs">注:本文还有</strong><a class="ae jw" href="https://dineshkumarkb.com/tech/change-python-dictionary-keys-without-changing-its-values/" rel="noopener ugc nofollow" target="_blank"><strong class="jz hs">https://dineshkumarkb . com/tech/change-python-dictionary-keys-without-changing-its-values/</strong></a></p><p id="7892" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在本文中，我们将研究如何通过利用python 3.7中的字典实现变化来改变字典的键而不改变其值。</p><p id="ef00" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">从python 3.7和更高版本开始，字典将按照<a class="ae jw" href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" rel="noopener ugc nofollow" target="_blank"> python-dev </a>邮件列表保留插入顺序。字典顺序保证是插入顺序。这种行为是CPython 3.6的一个实现细节。</p><p id="1147" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">让我们利用上述行为来重命名这些键，如下所示。</p><h2 id="b386" class="kt ku hi bd kv kw kx ky kz la lb lc ld kg le lf lg kk lh li lj ko lk ll lm ho bi translated">Python 3.7及以上版本</h2><pre class="jh ji jj jk fd ln lo lp lq aw lr bi"><span id="897d" class="kt ku hi lo b fi ls lt l lu lv">&gt;&gt;&gt; new_keys = [<strong class="lo hs">"</strong>user_name<strong class="lo hs">"</strong>,<strong class="lo hs">"</strong>user_id<strong class="lo hs">"</strong>,<strong class="lo hs">"</strong>user_email<strong class="lo hs">"</strong>]<br/>&gt;&gt;&gt; old_dict = {<strong class="lo hs">"</strong>name<strong class="lo hs">"</strong>:<strong class="lo hs">"</strong>testname<strong class="lo hs">"</strong>,<br/>            <strong class="lo hs">"</strong>id<strong class="lo hs">"</strong>:123,<br/>            <strong class="lo hs">"</strong>email<strong class="lo hs">"</strong>:<strong class="lo hs">"</strong>test@example.com<strong class="lo hs">"</strong>}<br/><br/>&gt;&gt;&gt; print(dict(zip(new_keys,old_dict.values())))</span><span id="4989" class="kt ku hi lo b fi lw lt l lu lv">Output:<br/>{'user_name': 'testname', 'user_id': 123, 'user_email': '<a class="ae jw" href="mailto:test@example.com" rel="noopener ugc nofollow" target="_blank">test@example.com</a>'}</span></pre><h2 id="5ce4" class="kt ku hi bd kv kw kx ky kz la lb lc ld kg le lf lg kk lh li lj ko lk ll lm ho bi translated">这里发生了什么？</h2><p id="b012" class="pw-post-body-paragraph jx jy hi jz b ka lx is kc kd ly iv kf kg lz ki kj kk ma km kn ko mb kq kr ks hb bi translated">在上面的输出中，所有的键都被重命名，同时保留了值。</p><p id="5cf3" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">old_dict.values()按照插入顺序提供old_dict字典中的值列表，即姓名、id和电子邮件。</p><p id="d5fc" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">我们使用zip函数将旧字典中的值与new_keys列表中的键合并，new _ keys列表返回一个zip对象，最终可以转换为dict。</p><p id="f7de" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><a class="ae jw" href="https://docs.python.org/3/library/functions.html#zip" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/functions.html#zip</a></p><blockquote class="mc md me"><p id="d349" class="jx jy mf jz b ka kb is kc kd ke iv kf mg kh ki kj mh kl km kn mi kp kq kr ks hb bi translated">注意:上述代码也适用于低于3.7的python版本。然而，字典条目的检索顺序是任意的。所以秩序无法保证。</p></blockquote><p id="932f" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在python 3.7和更高版本中，由于插入顺序被保留，我们可以保证插入顺序。</p></div></div>    
</body>
</html>