<html>
<head>
<title>Make yourself a perfect blogging platform with Ghost and Gatsby</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Ghost和Gatsby让自己成为一个完美的博客平台</h1>
<blockquote>原文：<a href="https://medium.com/codex/gatsby-ghost-d7ba70dd4664?source=collection_archive---------0-----------------------#2020-12-04">https://medium.com/codex/gatsby-ghost-d7ba70dd4664?source=collection_archive---------0-----------------------#2020-12-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="88ba" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><figure class="ev ex ip iq ir is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/396e7e3194ba3cf5abb04a576653e970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tjYWgicgWfsxJV2k"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">安内特·lūsiņa在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b8b1" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">你想拥有一个既美观又易于管理的博客平台吗？在过去，你受限于笨拙的Wordpress或者简洁但不那么用户友好的静态站点生成器。然而，最近，盖茨比和幽灵的结合终于带来了一场革命，我们需要将个人博客提升到一个新的水平。</p><h1 id="1030" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">盖茨比（姓）</h1><figure class="lb lc ld le fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es la"><img src="../Images/299be3823714e59b1fc317b8180b6b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WMpQ1T9ZTx-ZE-ok.png"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">Gatsby的命令行界面生成静态HTMLs(图片由作者提供)</figcaption></figure><p id="3530" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated"><a class="ae jd" href="https://www.gatsbyjs.com/" rel="noopener ugc nofollow" target="_blank"> Gatsby </a>基本上是一个静态站点生成器。经常被拿来和<a class="ae jd" href="https://jekyllrb.com/" rel="noopener ugc nofollow" target="_blank">杰基尔</a>和<a class="ae jd" href="https://gohugo.io/" rel="noopener ugc nofollow" target="_blank">雨果</a>比较。主要的区别是他们被写的语言。Gatsby是使用React库用JavaScript编写的。所以，如果你是React开发者，这是最容易上手的。</p><p id="debc" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">这些站点生成的共同点是它们都采用某种格式的源文件(例如Markdown)并将它们预渲染成HTML和CSS。结果是一个高度优化的网站，是为速度和搜索引擎优化(搜索引擎优化)而建。</p><p id="a31d" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">有什么大不了的？你可能会问。编写HTML非常简单。然而，考虑一下这个，如果你的网站提供任何图片的话。您会希望优化您的图像，使它们在任何大小的设备上都看起来最好。现在，你正在进入<a class="ae jd" href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images" rel="noopener ugc nofollow" target="_blank">响应图像</a>的领域，这不是为心脏虚弱的人准备的。盖茨比为你做了一切！🎉</p><p id="e0dc" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">我使用盖茨比已经两年多了，我对它又爱又恨。一方面，它非常方便，并创造了良好的效果。另一方面，它在管理能力方面欠缺很多。你基本上是在处理Markdown文件和JavaScript文件。也没有一篇文章的生命周期的概念(即草稿对预定的对已发表的)。</p><h1 id="2b16" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">《人鬼情未了》</h1><figure class="lb lc ld le fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es lg"><img src="../Images/dd8a173acfff48893614a493bb7054b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mETFQ7V3ruDWvm74.png"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">Ghost的帖子管理屏幕(图片由作者提供)</figcaption></figure><p id="49b6" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">Ghost是一个提供托管服务的现代出版平台。把它想成个人<a class="ae jd" rel="noopener" href="/">媒介</a>。要使用他们的托管解决方案，你必须付费。然而，慷慨的Ghost社区免费提供源代码，最近，他们发布了一个改变游戏规则的新功能，重塑了个人博客。这个<a class="ae jd" href="https://ghost.org/docs/concepts/front-end/" rel="noopener ugc nofollow" target="_blank"> Ghost前端</a>可以让你在保留自己喜欢的前端(即静态站点生成器)的同时，将Ghost作为一个无头CMS来使用。</p><p id="8361" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在本文的剩余部分，我将讨论这种集成。</p><h1 id="0df1" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">整合盖茨比和幽灵</h1><figure class="lb lc ld le fd is er es paragraph-image"><div class="er es lh"><img src="../Images/d33e675ed8d9ed85a286429c738fbc90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*paxoRVNB_HA1h4Z8.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">盖茨比与幽灵的融合(作者图片)</figcaption></figure><p id="210d" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在这个图表中，你可以看到不同系统之间的关系。每个组件都提供了重要的功能。我的设置如下所示，其中<code class="du li lj lk ll b">go-rest-repeat</code>是我的存储库的根。</p><figure class="lb lc ld le fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es lm"><img src="../Images/59ff28e5ef958888f718cffc66dca86e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UoLrG49wvCJM-x96.png"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">盖茨比和幽灵整合文件夹结构(图片由作者提供)</figcaption></figure><h1 id="cef1" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">《人鬼情未了》</h1><p id="fe92" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">要在本地安装Ghost服务器，请使用以下命令:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="8b57" class="lw kd hi ll b fi lx ly l lz ma">$ npm install ghost-cli@latest -g</span></pre><p id="ff1d" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">然后在一个空文件夹中(在我的例子中是<code class="du li lj lk ll b">ghost</code>)，输入:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="1189" class="lw kd hi ll b fi lx ly l lz ma">$ ghost install local</span></pre><p id="39e7" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">这将在文件夹下安装当前版本的Ghost。转到URL:<a class="ae jd" href="http://localhost:2368/ghost" rel="noopener ugc nofollow" target="_blank">http://localhost:2368/ghost</a>继续您的设置。我建议现在进行最小的设置，因为我们还在构建系统。</p><p id="a422" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">当您在那里时，请确保您还创建了一个定制的集成点，以便您获得内容API密钥和管理API密钥。</p><figure class="lb lc ld le fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mb"><img src="../Images/8d7b5e0f54e6d5fedf9f29b48279154f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wx2g4xQwYrKNeoKM.png"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">Ghost的自定义集成点。使用它来生成内容API密钥和管理API密钥(图片由作者提供)</figcaption></figure><p id="c05e" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">我们现在可以进入盖茨比场景了。</p><h1 id="5bca" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">盖茨比（姓）</h1><p id="c929" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">由于我们使用Ghost服务器作为一个无头CMS，我们的预渲染网站的外观和感觉实际上与Ghost本身是分离的。为了尽可能多地保留卡斯珀的主题，我选择了《T2》作为开胃菜。在我的回购协议的<em class="lf">根</em>处，我输入:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="2c6e" class="lw kd hi ll b fi lx ly l lz ma">$ git clone https://github.com/styxlab/gatsby-starter-try-ghost.git gatsby</span></pre><h2 id="1a02" class="lw kd hi bd ke mc md me ki mf mg mh km jp mi mj kq jt mk ml ku jx mm mn ky ho bi translated">API键</h2><p id="6088" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">starter设置为使用一些GraphQL从Ghost检索内容。要设置Ghost服务器的位置，请修改<code class="du li lj lk ll b">.ghost.json</code>文件以包含您刚刚生成的API密钥:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="b65a" class="lw kd hi ll b fi lx ly l lz ma">{<br/>   "development": {<br/>     "apiUrl": "http://localhost:2368",<br/>     "contentApiKey": "86b94101df2a031b9aaacb0ab9"<br/>   },<br/>   "production": {<br/>     "apiUrl": "http://localhost:2368",<br/>     "contentApiKey": "86b94101df2a031b9aaacb0ab9"<br/>   }<br/>}</span></pre><h2 id="967e" class="lw kd hi bd ke mc md me ki mf mg mh km jp mi mj kq jt mk ml ku jx mm mn ky ho bi translated">成员插件</h2><p id="4cec" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">由于我们不是在Ghost基础架构上运行，所以我们没有成员功能。因此，我们需要删除成员插件:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="7e95" class="lw kd hi ll b fi lx ly l lz ma">$ npm uninstall gatsby-theme-ghost-members</span></pre><p id="4956" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在<code class="du li lj lk ll b">gatsby-config.js</code>文件中注释掉相同的插件。</p><h2 id="f86a" class="lw kd hi bd ke mc md me ki mf mg mh km jp mi mj kq jt mk ml ku jx mm mn ky ho bi translated">图像插件</h2><p id="35c9" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">要保存你自己的图片，你需要使用<code class="du li lj lk ll b">gatsby-rehype-inline-images</code>插件。使用以下命令安装它:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="8410" class="lw kd hi ll b fi lx ly l lz ma">$ npm install gatsby-rehype-inline-images</span></pre><p id="b42f" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">然后，将插件添加到您的<code class="du li lj lk ll b">gatsby-config.js</code>文件中:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="abde" class="lw kd hi ll b fi lx ly l lz ma">plugins: [<br/>    {<br/>        resolve: `gatsby-transformer-rehype`,<br/>        options: {<br/>            filter: node =&gt; (<br/>                node.internal.type === `GhostPost` ||<br/>                node.internal.type === `GhostPage`<br/>            ),<br/>            plugins: [<br/>                {<br/>                    resolve: `gatsby-rehype-ghost-links`,<br/>                },<br/>                {<br/>                    resolve: `gatsby-rehype-prismjs`,<br/>                },<br/>                {<br/>                    resolve: `gatsby-rehype-inline-images`,<br/>                },<br/>            ],<br/>        },<br/>    },    <br/>]</span></pre><p id="e372" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">这就是你所需要的关于盖茨比的一切。当您下次运行<code class="du li lj lk ll b">gatsby build</code>或<code class="du li lj lk ll b">gatsby develop</code>时，它将查询Ghost服务器，检索所有帖子，下载图像，并将静态HTMLs预渲染到<code class="du li lj lk ll b">/public</code>文件夹中。</p><h1 id="e6b4" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">网络生活</h1><p id="b636" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">最后但同样重要的是，我们将把我们闪亮的网站部署到CDN上。我们很感激Netlify免费托管我们的内容。首先，让我们安装Netlify命令行界面:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="32de" class="lw kd hi ll b fi lx ly l lz ma">$ npm -g install netlify-cli</span></pre><p id="e211" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">当您在项目文件夹中时，使用以下信息登录Netlify:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="dee3" class="lw kd hi ll b fi lx ly l lz ma">$ netlify login</span></pre><p id="dc47" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">最后，部署到Netlify ( <code class="du li lj lk ll b">-p</code>意为生产):</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="6503" class="lw kd hi ll b fi lx ly l lz ma">$ netlify deploy -p</span></pre><p id="c108" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">Netlify会问你几个问题。一旦您回答完毕，您的网站将被上传并可在互联网上访问。</p><h1 id="580b" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">技巧</h1><h2 id="4833" class="lw kd hi bd ke mc md me ki mf mg mh km jp mi mj kq jt mk ml ku jx mm mn ky ho bi translated">移除未使用的图像</h2><p id="1b94" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">Ghost会累积上传的图像，即使它们没有被使用。因此，在我备份之前，我运行<code class="du li lj lk ll b">ghost-purge-images</code>命令来删除未使用的映像。您可以使用以下方式安装此工具:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="3a5b" class="lw kd hi ll b fi lx ly l lz ma">$ npm install -g ghost-purge-images</span></pre><p id="79e6" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">使用以下命令清除这些未使用的图像:</p><pre class="lb lc ld le fd ls ll lt lu aw lv bi"><span id="0b2a" class="lw kd hi ll b fi lx ly l lz ma">$ ghost-purge-images purge --content-key=&lt;content API Key&gt; --admin-key=&lt;Admin API Key&gt;</span></pre><h2 id="8080" class="lw kd hi bd ke mc md me ki mf mg mh km jp mi mj kq jt mk ml ku jx mm mn ky ho bi translated">备份您的工作</h2><p id="414c" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">万一你的公司出了问题，你不想失去你的努力。确保<code class="du li lj lk ll b">ghost/content</code>文件夹下的所有内容都包含在您的备份解决方案中。我只是确保它包含在我的存储库中。</p><h1 id="9d2d" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="4646" class="pw-post-body-paragraph je jf hi jg b jh ln jj jk jl lo jn jo jp lp jr js jt lq jv jw jx lr jz ka kb hb bi translated">盖茨比、幽灵和Netlify的结合提供了一个免费的个人博客平台。易用性超过了少量的前期设置时间。对于想要完全控制的博客作者来说，他们害怕锁定幽灵数据库。然而，对于我们其他人来说，这可能是一个完美的设置。</p><p id="9ef2" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">ps。要查看这个设置的样本，请访问我的个人网页:<a class="ae jd" href="https://www.gorestrepeat.com" rel="noopener ugc nofollow" target="_blank">https://www.gorestrepeat.com</a></p></div></div>    
</body>
</html>