<html>
<head>
<title>You’ll Never Believe What UICollectionView Can Teach Us About Code Design</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你永远也不会相信UICollectionView能教给我们什么样的代码设计</h1>
<blockquote>原文：<a href="https://medium.com/codex/youll-never-believe-what-uicollectionview-can-teach-us-about-code-design-72d340d87535?source=collection_archive---------0-----------------------#2020-12-18">https://medium.com/codex/youll-never-believe-what-uicollectionview-can-teach-us-about-code-design-72d340d87535?source=collection_archive---------0-----------------------#2020-12-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/6a2dda92287d5b95387f725fb4ea9a65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FGKhwy7VJQxxV0aScV1OVg.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="731f" class="pw-subtitle-paragraph iq hs ht bd b ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh dx translated">UICollectionView和UIViewControllerTransitionDelegate可以教会我们很多如何在代码中设计重要的分离</h2></div><h1 id="13f3" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">介绍</h1><p id="eb43" class="pw-post-body-paragraph ka kb ht kc b kd ke iu kf kg kh ix ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">UICollectionView和UIViewControllerTransitionDelegate已经存在很长时间了。他们都解决了iOS开发在用户体验的灵活性和定制化方面的一些关键问题。</p><p id="d1f6" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">更有趣的是，它们都提供了一个很好的例子，说明如何创建一个灵活的设计模式，让我们可以做几乎任何我们可以想象的事情</p><h1 id="3be4" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">为了理解这一点，我们需要回到许多年前的历史。</h1><p id="c6e6" class="pw-post-body-paragraph ka kb ht kc b kd ke iu kf kg kh ix ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">多少年了？嗯，我们说的是2012年。在移动开发方面，它意味着古老的历史。</p><p id="067c" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">作为iOS开发者，我们唯一拥有的UI元素集合是UITableView。</p><p id="3efd" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">UITableView是一个优秀的组件，可以帮助我们显示项目列表。但是开发人员最需要的组件之一是显示项目网格的能力，或者至少垂直显示它们。</p><p id="dbf5" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">但苹果没有为UITableView提供垂直的选项，而是给了我们UICollectionView，它将布局逻辑委托给开发人员，让他选择如何处理它。</p><p id="5e68" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">为什么会令人印象深刻或“戏剧性”？让我们看看。</p><h1 id="3c68" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">关注点分离</h1><p id="548c" class="pw-post-body-paragraph ka kb ht kc b kd ke iu kf kg kh ix ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">我们都知道SOC(关注点分离)原则。在讨论设计模式时，我们总是谈论它(尤其是在的求职面试中)。</p><p id="6acc" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">然而，我们并不总是<strong class="kc hu">遵循这个原则</strong>，并深刻理解它意味着什么，为什么它是必不可少的。</p><p id="d9e7" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">让我们来看看UICollectionView这样的组件的职责列表:</p><p id="a12b" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">-作为细胞循环的一部分，添加和移除细胞的机制。</p><p id="f76b" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">-提供细胞。</p><p id="47fe" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">-提供装修视图。</p><p id="ab71" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">-处理触摸和其他用户事件。</p><p id="1345" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">-处理布局(任何类型的布局)计算。</p><p id="c7b6" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">哇，这个小小的组件承担了这么多的责任！</p><p id="c328" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">如果仔细观察，您会发现这些职责中的任何一个都属于不同的对象/部分。</p><p id="d9c4" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">添加和删除单元格是集合视图的责任。</p><p id="d51b" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">提供单元格是其数据源的一部分。</p><p id="2a89" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">装饰是从外部设置的，触摸和其他用户事件是集合视图委托的一部分。</p><p id="54ef" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">并且布局是其UICollectionViewLayout的一部分(大部分时候，流布局)。</p><p id="526a" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">最后一个是关键。</p><p id="6033" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">在UITableView中，布局责任是表视图本身的一部分。</p><p id="e702" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">在UICollectionView中去掉它是苹果的一个戏剧性的举动，给了我们开发者一个机会去创造我们想要的任何布局。</p><h1 id="06d5" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">他们也在UIViewControllerTransitionDelegate中这样做了</h1><p id="d089" class="pw-post-body-paragraph ka kb ht kc b kd ke iu kf kg kh ix ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">确实如此。</p><p id="895b" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">我们都知道UIViewController是一种奇怪的生物。它在MVC中的角色很尴尬，多年来，我们所有人都成为了寻找减少其臃肿大小的方法的大师(MVC —“怪物”视图控制器)。</p><p id="71f6" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">问题就在墙上——UIViewController包含许多不同的职责，其中一些职责彼此之间没有任何关系。</p><p id="4064" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">因此，苹果公司决定移除视图控制器之外的演示转换逻辑，并给我们以我们想要的方式定制它，这并不是巧合。</p><p id="b19c" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">这就引出了我们可以从SOC学到的另一件事(同样，“关注点分离”，你们应该已经记住了)—</p><p id="c183" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">当我们将我们的关注点分离到不同的组件中时，它给了我们创建一个接口的选择，其他开发人员可以使用我们的优秀代码，并快速适应他们的需求。</p><p id="9253" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">当创建一个库或SDK时是这样，但是当我们想要修改它来满足我们的需求时，对于我们自己的项目也是这样。</p><h1 id="4522" class="ji jj ht bd jk jl jm jn jo jp jq jr js iz jt ja ju jc jv jd jw jf jx jg jy jz bi translated">让我们总结一下</h1><p id="d1e5" class="pw-post-body-paragraph ka kb ht kc b kd ke iu kf kg kh ix ki kj kk kl km kn ko kp kq kr ks kt ku kv hb bi translated">SOC(看上面是什么意思，我不打算告诉你)很重要，但是要真正理解我为什么给出UICollectionView这个很好的例子。</p><p id="b0bf" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">我认为UICollectionView是一个非凡的设计。它真正宣告了一个好的API应该是什么样子，就我个人而言，这些年来我从它身上学到了很多。</p><p id="585e" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">关注点的分离有助于我们轻松地维护不同的组件，将行为委托给其他对象，并提供灵活性和健壮的代码。</p><p id="1ee8" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">当我们可以不同地测试每个组件时，这是一个很好的测试我们代码的方法。</p><p id="b431" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">此外，SOC创建更小的代码片段，从而帮助我们轻松调试代码。</p><p id="6c91" class="pw-post-body-paragraph ka kb ht kc b kd kw iu kf kg kx ix ki kj ky kl km kn kz kp kq kr la kt ku kv hb bi translated">这并不是说苹果在他们的SDK里做的任何事情都是令人惊叹的设计(我之前提到过UIViewController)，但是如果我们可以借鉴好的部分，为什么不呢？</p></div></div>    
</body>
</html>