<html>
<head>
<title>Complete Guide on Sending Push Notifications on Android - Using Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase在Android上发送推送通知的完整指南</h1>
<blockquote>原文：<a href="https://medium.com/codex/complete-guide-on-sending-push-notifications-on-android-using-firebase-82a4c2f7f3a7?source=collection_archive---------0-----------------------#2021-01-14">https://medium.com/codex/complete-guide-on-sending-push-notifications-on-android-using-firebase-82a4c2f7f3a7?source=collection_archive---------0-----------------------#2021-01-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="2ef7" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">药典</h2><div class=""/><figure class="ev ex ip iq ir is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/b5f99c1805ad0f3c4178ccd2e0d23d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1RqaiFlekoX5YD3lG8zXg.png"/></div></div></figure><p id="d398" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">你好。👋，我将解释如何使用<code class="du jx jy jz ka b">Firebase Cloud Messaging</code>在android上发送推送通知。</p><p id="121c" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">推送通知是在用户设备上弹出的消息。用户不必在应用程序上就可以看到这些通知。这对用户的保留很重要。</p><p id="14a0" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">我们正在建造什么</strong></p><p id="a032" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">我们只是要构建一个应用程序，让用户输入一条消息，并向该用户发送包含该消息的推送通知。简单！😄</p><p id="d9eb" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这是最终应用程序的样子</p><figure class="kb kc kd ke fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/b5f99c1805ad0f3c4178ccd2e0d23d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1RqaiFlekoX5YD3lG8zXg.png"/></div></div></figure><p id="0d5b" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">点击那个按钮的</p><ul class=""><li id="577f" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">推送通知会发送给用户，其中包含您输入的消息</li></ul><figure class="kb kc kd ke fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es ko"><img src="../Images/4a8951d8f6655f49ba9d56c4896dc5ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3gegevvmh3SYcWaNLb6KBA.jpeg"/></div></div></figure><p id="28b1" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">使用的技术</strong></p><ol class=""><li id="d2d0" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kp kl km kn bi translated">Firebase(云消息)</li><li id="b90d" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kp kl km kn bi translated">Kotlin(适用于Android)</li><li id="58f2" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kp kl km kn bi translated">节点(后端)</li><li id="58a0" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kp kl km kn bi translated">Android Studio IDE</li></ol><p id="6847" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">步骤</strong></p><ul class=""><li id="c55f" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">设置android studio</li><li id="8834" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">建立firebase项目</li><li id="a234" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">添加依赖关系</li><li id="c541" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">设置刀柄和翻新</li><li id="e354" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">设置Firebase云消息传递</li><li id="a911" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">构建视图</li><li id="a2b6" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">设置存储库视图模型和视图</li><li id="d67c" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">用NodeJS设置我们的后端</li></ul><p id="1144" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">好的，让我们一个一个的看</p><p id="f5d7" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">建立ANDROID工作室</strong></p><p id="f576" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">创建项目</strong></p><ul class=""><li id="d89d" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">首先下载android studio并安装。</li><li id="31cf" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">创建新项目—选择<code class="du jx jy jz ka b">Empty Activity</code></li><li id="d5a7" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">给你的项目起任何名字，我给我的命名为<code class="du jx jy jz ka b">Firebase Notification Android</code></li><li id="2ba3" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">点击<code class="du jx jy jz ka b">Finish</code></li></ul><p id="e59b" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">结构工程</strong></p><p id="64ff" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">我们正在为这个项目使用MVVM建筑模式</p><ul class=""><li id="4a97" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">创建<strong class="jb hs"> 7 </strong> <code class="du jx jy jz ka b">new packages</code>给它们命名——<code class="du jx jy jz ka b">di</code>、<code class="du jx jy jz ka b">firebase</code>、<code class="du jx jy jz ka b">helper</code>、<code class="du jx jy jz ka b">model</code>、<code class="du jx jy jz ka b">view</code>、<code class="du jx jy jz ka b">viewmodel</code>、<code class="du jx jy jz ka b">network</code></li><li id="1005" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">将<code class="du jx jy jz ka b">MainActivity</code>移至<code class="du jx jy jz ka b">view</code>包装</li></ul><p id="17f7" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">设置FIREBASE项目</strong></p><ul class=""><li id="bf90" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">转到<a class="ae kv" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.firebase.google.com/</a></li><li id="9422" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">登录并点击<code class="du jx jy jz ka b">Add Project</code></li><li id="970b" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">输入项目的名称——随便取什么名字，</li><li id="cf8a" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">点击<code class="du jx jy jz ka b">Continue</code></li><li id="fa88" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">在谷歌分析页面，点击<code class="du jx jy jz ka b">Continue</code></li><li id="18d9" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">选择一个Google帐户—选择<code class="du jx jy jz ka b">Default Account For Firebase</code></li><li id="4708" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">点击<code class="du jx jy jz ka b">Create Project</code></li><li id="f4f7" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">你会看到——“<code class="du jx jy jz ka b">Your new project is ready</code>”</li><li id="ad98" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">点击<code class="du jx jy jz ka b">Continue</code></li></ul><p id="584c" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">恭喜你，你已经成功创建了一个firebase项目。现在，让我们把这个项目和我们的android应用程序联系起来</p><p id="6b9a" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">连接Firebase和Android </strong></p><ul class=""><li id="d61b" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在您的控制台主页上，单击Android徽标</li></ul><figure class="kb kc kd ke fd is er es paragraph-image"><div class="er es kw"><img src="../Images/b561ca86592af8505be5da832af70c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*oLJjt7XriaCnStlYRTzDwQ.png"/></div></figure><ul class=""><li id="f31a" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">安卓包名——去你的<code class="du jx jy jz ka b">Manifest.xml</code>，把<code class="du jx jy jz ka b">package</code>复制粘贴在那里，应该是这样的——<code class="du jx jy jz ka b">com.name.firebasenotificationandroid</code></li><li id="a4ef" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">应用昵称—放入任何内容</li><li id="a28d" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">调试签名证书—转到<code class="du jx jy jz ka b">Android Studio</code>，点击<code class="du jx jy jz ka b">gradle</code>—<code class="du jx jy jz ka b">Tasks</code>—<code class="du jx jy jz ka b"> Android</code>—<code class="du jx jy jz ka b">signingReport</code>—复制SHA-1密钥并粘贴</li></ul><figure class="kb kc kd ke fd is er es paragraph-image"><div class="er es kx"><img src="../Images/240f825e79960cd1f4b1e039054b6e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*KhNntL6wIKsmbPf7nijsdw.jpeg"/></div></figure><ul class=""><li id="70cb" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">点击<code class="du jx jy jz ka b">Register App</code></li><li id="cdd7" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">下载<code class="du jx jy jz ka b">google-services.json</code>并粘贴到你的<code class="du jx jy jz ka b">project</code>文件夹<code class="du jx jy jz ka b">app directory</code></li></ul><figure class="kb kc kd ke fd is er es paragraph-image"><div class="er es ky"><img src="../Images/e4eaa754a81e0af0b127c42d69d3253e.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*W4Dei8AJ_zuZCTVx2TgBEQ@2x.png"/></div></figure><ul class=""><li id="7759" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">添加所有必需的firebase依赖项</li><li id="25fa" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">同步项目，你就完成了👏</li></ul><p id="bcb0" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">添加依赖关系</strong></p><p id="819e" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这个应用程序利用协程，刀柄，翻新，云消息等。</p><ul class=""><li id="89d9" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">打开您的<code class="du jx jy jz ka b">build.gradle(app)</code>文件并添加它们</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="fb33" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">打开<code class="du jx jy jz ka b"> build.gradle(project)</code>添加刀柄类路径</p><pre class="kb kc kd ke fd lb ka lc ld aw le bi"><span id="49bd" class="lf lg hi ka b fi lh li l lj lk">.........</span><span id="2a4f" class="lf lg hi ka b fi ll li l lj lk">dependencies <em class="lm">{<br/>    ........</em></span><span id="634a" class="lf lg hi ka b fi ll li l lj lk"><em class="lm">    </em>//firebase<br/>    classpath 'com.google.gms:google-services:4.3.4'<br/><br/>    //hilt<br/>    classpath 'com.google.dagger:hilt-android-gradle-plugin:2.28-alpha'<br/>}<br/>............</span></pre><p id="7a65" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">刀柄</strong></p><ul class=""><li id="dd23" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在<code class="du jx jy jz ka b">di</code>包下创建<strong class="jb hs"> 2 </strong>新类，命名为<code class="du jx jy jz ka b">AppModule</code>和<code class="du jx jy jz ka b">MyApplication</code></li><li id="dede" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated"><strong class="jb hs"> AppModule </strong> —该类用于执行注入类型，例如我们不拥有的外部库的接口和类，例如翻新。</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><ul class=""><li id="93e4" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated"><strong class="jb hs"> MyApplication — </strong>这个类扩展了Application类。这将生成所有需要的句柄代码，并作为一个依赖容器。应该是这样的。</li></ul><pre class="kb kc kd ke fd lb ka lc ld aw le bi"><span id="0654" class="lf lg hi ka b fi lh li l lj lk">//Make sure you add this<br/>@HiltAndroidApp<br/>class MyApplication: Application<em class="lm">() {<br/><br/>}</em></span></pre><ul class=""><li id="c410" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">最后，转到您的Manifest.xml文件，在<code class="du jx jy jz ka b">application</code>标记中添加<code class="du jx jy jz ka b">android:name=”.di.MyApplication”</code></li></ul><p id="625d" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">改装</strong></p><ul class=""><li id="7e09" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在<code class="du jx jy jz ka b">helper</code>包下，创建一个名为<code class="du jx jy jz ka b">EndPoints</code>的类</li></ul><p id="5440" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">端点— </strong>我们的基本url和所有api调用端点所在的类</p><pre class="kb kc kd ke fd lb ka lc ld aw le bi"><span id="e5ee" class="lf lg hi ka b fi lh li l lj lk">class EndPoints <em class="lm">{<br/><br/>    </em>companion object <em class="lm">{<br/><br/>        </em>//BASE<br/>        const val BASE_URL = "https://put-your-base-url-here/"<br/><br/>        //SAVE_TOKEN<br/>        const val SAVE_TOKEN = "save"<br/><br/>    <em class="lm">}<br/><br/>}</em></span></pre><ul class=""><li id="a5df" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在<code class="du jx jy jz ka b">model</code>包下，创建一个类名<code class="du jx jy jz ka b">AuthResponse<br/></code> <strong class="jb hs"> AuthResponse — </strong>的类，该类模拟从服务器获得的响应，以便我们可以采取适当的行动</li></ul><pre class="kb kc kd ke fd lb ka lc ld aw le bi"><span id="bd23" class="lf lg hi ka b fi lh li l lj lk">data class AuthResponse<em class="lm">(<br/>    </em>val message: String,<br/>    val status: String<br/><em class="lm">)</em></span></pre><ul class=""><li id="4c05" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在<code class="du jx jy jz ka b">network</code>包下，创建一个名为<code class="du jx jy jz ka b">ApiService</code>的<code class="du jx jy jz ka b">interface</code>和两个新类，分别命名为<code class="du jx jy jz ka b">ApiDataSource</code>、<code class="du jx jy jz ka b">BaseDataSource</code></li></ul><p id="af34" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs"> ApiService - </strong> An <code class="du jx jy jz ka b">interface</code>，在这里我们将对我们的服务器发出一个<code class="du jx jy jz ka b">Post Request</code>来保存用户名和通知令牌。</p><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="61d9" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs"> ApiDataSource- </strong>一个公开了<code class="du jx jy jz ka b">ApiService</code>的类，这样我们就可以在我们的存储库中使用它</p><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="c7c8" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">我们完成了改造和刀柄。</p><p id="ed86" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">设置FIREBASE云消息传递</strong></p><ul class=""><li id="7301" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在<code class="du jx jy jz ka b">firebase</code>包下，创建一个新的类——<strong class="jb hs">myfirebasemesagingservice——</strong>这个<strong class="jb hs"> </strong>类扩展了<code class="du jx jy jz ka b">FirebaseMessagingService</code>，处理消息，在前台接收通知，接收数据负载，发送流消息</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><ul class=""><li id="b59e" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">在<code class="du jx jy jz ka b">helper</code>下创建一个<code class="du jx jy jz ka b">object</code> — <code class="du jx jy jz ka b">Utility<br/></code> <strong class="jb hs">实用程序</strong>——一个具有构建我们的通知功能的实用程序类——处理诸如——当用户点击通知时的动作，定制通知的外观等等</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><ul class=""><li id="854d" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">打开<code class="du jx jy jz ka b">Manifest.xlm</code>，在关闭应用程序标签之前，添加此</li></ul><pre class="kb kc kd ke fd lb ka lc ld aw le bi"><span id="12f9" class="lf lg hi ka b fi lh li l lj lk"><em class="lm">&lt;</em>service<br/>    android:name=".firebase.MyFirebaseMessagingService"<br/>    android:exported="false"<em class="lm">&gt;<br/>    &lt;</em>intent-filter<em class="lm">&gt;<br/>        &lt;</em>action android:name="com.google.firebase.MESSAGING_EVENT"<em class="lm">/&gt;<br/>    &lt;/</em>intent-filter<em class="lm">&gt;<br/>&lt;/</em>service<em class="lm">&gt;<br/>...<br/>&lt;/application&gt;</em></span></pre><ul class=""><li id="9aeb" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">添加默认的通知图标、颜色和通道，添加到<code class="du jx jy jz ka b">application</code>标签内的<code class="du jx jy jz ka b">manifest.xml</code></li></ul><pre class="kb kc kd ke fd lb ka lc ld aw le bi"><span id="f797" class="lf lg hi ka b fi lh li l lj lk"><em class="lm">&lt;</em>meta-data  android:name="com.google.firebase.messaging.default_notification_icon"<br/>    android:resource="@drawable/ic_bell" <em class="lm">/&gt;<br/><br/>&lt;</em>meta-data<br/>    android:name="com.google.firebase.messaging.default_notification_color"<br/>    android:resource="@color/colorAccent" <em class="lm">/&gt;</em></span><span id="2c4d" class="lf lg hi ka b fi ll li l lj lk"><em class="lm">&lt;</em>meta-data<br/>android:name="com.google.firebase.messaging.default_notification_channel_id"<br/>android:value="@string/default_notification_channel_id" <em class="lm">/&gt;</em></span></pre><p id="0287" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这应该就是配置云消息的全部内容</p><p id="a0d2" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">构建视图/布局</strong></p><p id="4ae0" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">打开<code class="du jx jy jz ka b">main_activity.xml</code>并使用该代码</p><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="a944" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">好了，现在我们有了并不漂亮的视图，一切都设置好了，现在让我们设置我们的存储库和视图模型。</p><h2 id="27c7" class="lf lg hi bd ln lo lp lq lr ls lt lu lv jk lw lx ly jo lz ma mb js mc md me ho bi translated"><strong class="ak">设置存储库、视图模型和视图</strong></h2><ul class=""><li id="9f63" class="kf kg hi jb b jc mf jg mg jk mh jo mi js mj jw kk kl km kn bi translated">打开<code class="du jx jy jz ka b">viewmodel</code>包，创建<strong class="jb hs"> 2 </strong>新类— <code class="du jx jy jz ka b">MainRepo</code>和<code class="du jx jy jz ka b">MainViewModel<br/></code> <strong class="jb hs"> MainRepo — </strong>这个类作为我们的viewModel使用的数据源。</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="d1da" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs"> MainViewModel — </strong>这个类与存储库通信，api调用的结果作为LiveData(生命周期感知)返回，然后由我们的视图(MainActivity)观察</p><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><ul class=""><li id="a415" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">打开<code class="du jx jy jz ka b">MainActivity</code></li></ul><p id="61c2" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这是这门课的内容</p><ul class=""><li id="49d2" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">通过ViewBinding获取视图</li><li id="6320" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">初始化视图</li><li id="d58e" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">听按钮上的咔哒声</li><li id="e05a" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">与viewModel通信以注册用户</li><li id="8e15" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">观察视图模型中的数据，并显示适当的消息</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="a673" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">设置NODEJS后端</strong></p><ul class=""><li id="5641" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">到你的firebase控制台，点击<code class="du jx jy jz ka b">settings icon</code>-&gt;-<code class="du jx jy jz ka b">Project settings</code></li></ul><figure class="kb kc kd ke fd is er es paragraph-image"><div class="er es mk"><img src="../Images/631c0c34a09f89ae911f81aecdebe2cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ac9HGrROsSJ8yyzDSq928A.png"/></div></figure><ul class=""><li id="f63d" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">切换到<code class="du jx jy jz ka b">Service Account</code>选项卡，点击<code class="du jx jy jz ka b">Generate new private key</code></li><li id="0ce8" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">确认并下载它</li><li id="1aee" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">现在，在您的pc中创建一个文件夹，用您的终端导航到该文件夹</li><li id="d2e4" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated"><code class="du jx jy jz ka b">npm init</code> <strong class="jb hs"> </strong>并填写所有必需的详细信息。这将创建一个package.json文件</li><li id="594a" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated"><code class="du jx jy jz ka b">npm i firebase-admin</code> <strong class="jb hs"> <em class="lm"> </em> </strong>在您的终端上安装firebase依赖项</li><li id="6465" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">亦作<code class="du jx jy jz ka b">npm i express </code>和<strong class="jb hs"> </strong> <code class="du jx jy jz ka b">npm i bodyparser</code></li><li id="0098" class="kf kg hi jb b jc kq jg kr jk ks jo kt js ku jw kk kl km kn bi translated">创建配置文件</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><ul class=""><li id="2979" class="kf kg hi jb b jc jd jg jh jk kh jo ki js kj jw kk kl km kn bi translated">创建index.js文件</li></ul><figure class="kb kc kd ke fd is"><div class="bz dy l di"><div class="kz la l"/></div></figure><p id="01ad" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">好了，我们结束了。深呼吸！😫</p><p id="5a70" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这是完整项目的链接，请查看</p><div class="ml mm ez fb mn mo"><a href="https://github.com/ibrajix/FirebaseNotificationAndroid" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hs fi z dy mt ea eb mu ed ef hr bi translated">ibrajix/firebase notification Android</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">通过在GitHub上创建帐户，为ibrajix/firebasenotification Android开发做出贡献。</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ix mo"/></div></div></a></div><p id="fb70" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">您可以更进一步，首先将针对用户的通知令牌存储在users表中，以针对特定用户。</p><p id="9a63" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">此外，可以使用“主题”向一组用户发送通知</p><div class="ml mm ez fb mn mo"><a href="https://firebase.google.com/docs/cloud-messaging/android/device-group" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hs fi z dy mt ea eb mu ed ef hr bi translated">向Android | Firebase上的设备组发送消息</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">设备组消息允许您将多个设备添加到一个组中。这类似于主题消息，但是…</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">firebase.google.com</p></div></div></div></a></div><p id="c1a2" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">谢谢大家！</p><p id="2ba8" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><strong class="jb hs">联系我</strong></p><p id="a15d" class="pw-post-body-paragraph iz ja hi jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated"><a class="ae kv" href="https://linktr.ee/ibrajix" rel="noopener ugc nofollow" target="_blank">https://linktr.ee/ibrajix</a></p></div></div>    
</body>
</html>