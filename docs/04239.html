<html>
<head>
<title>Extracting Financial News seamlessly using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python无缝提取金融新闻</h1>
<blockquote>原文：<a href="https://medium.com/codex/extracting-financial-news-seamlessly-using-python-4dcc732d9ff1?source=collection_archive---------0-----------------------#2021-11-12">https://medium.com/codex/extracting-financial-news-seamlessly-using-python-4dcc732d9ff1?source=collection_archive---------0-----------------------#2021-11-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="a390" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">关于使用EOD历史数据的API进行金融新闻的实践教程</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/68ad61d8ff1ab6de1e3894de58fb71a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CH1Z0L8fDPpVSt-r"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">罗马卡夫在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="4b2b" class="jt ju hi jp b fi jv jw l jx jy"><strong class="jp hj">Table of Contents:<br/>- </strong><a class="ae jn" href="#0cfe" rel="noopener ugc nofollow">Introduction</a><br/><strong class="jp hj">-</strong> <a class="ae jn" href="#ab29" rel="noopener ugc nofollow">Extracting Financial News with Python</a><br/>    -- <a class="ae jn" href="#c4f8" rel="noopener ugc nofollow">Importing Packages</a><br/>    -- <a class="ae jn" href="#2685" rel="noopener ugc nofollow">Basic Program for Extracting Financial News</a><br/>    -- <a class="ae jn" href="#6be7" rel="noopener ugc nofollow">Advanced Program for Extracting Financial News</a><br/><strong class="jp hj">-</strong> <a class="ae jn" href="#3ebe" rel="noopener ugc nofollow">Closing Notes</a></span></pre><p id="0cfe" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">对投资者来说，为了获得最大的利益，保持对市场的了解是很重要的。专门从事金融和投资的标准报纸是一个很好的来源，对于长期投资者或投资于市场的人来说绰绰有余。但是，在激烈的竞争环境下，日内交易者必须实时了解周围发生的事情。</p><p id="e1d5" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">尽管有很多实时新闻资源，但要么价格昂贵，要么缺乏定制。因此，在我看来，最好的方法是使用API用Python来自动化这个过程，但问题是，所有的API都不可靠。但是EOD历史数据公司用他们强大的金融新闻API来拯救我们，这些API是灵活的，更重要的是可靠的。在这篇文章中。我将向您展示使用EOD历史数据公司的API和Python提取金融新闻的整个过程。让我们开始吧！</p><blockquote class="kv kw kx"><p id="8c04" class="jz ka ky kb b kc kd ij ke kf kg im kh kz kj kk kl la kn ko kp lb kr ks kt ku hb bi translated"><strong class="kb hj">注</strong>:本文强烈基于<a class="ae jn" href="https://eodhistoricaldata.com/?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=extracting_financial_news_seamlessly_using_python" rel="noopener ugc nofollow" target="_blank"> EOD史料</a>提供的API。因此，为了顺利地跟进即将到来的内容，请确保您拥有自己的帐户，因为它使您能够访问您的私有API密钥。您可以在 处使用<a class="ae jn" href="https://eodhistoricaldata.com/register?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=extracting_financial_news_seamlessly_using_python" rel="noopener ugc nofollow" target="_blank"> <strong class="kb hj">链接创建账户。此外，并非本文中提到的所有API都是免费提供的，但需要订阅。点击</strong> </a>查看所有套餐的价格，并选择最适合您的套餐。</p></blockquote><h1 id="ab29" class="lc ju hi bd ld le lf lg lh li lj lk ll io lm ip ln ir lo is lp iu lq iv lr ls bi translated">用Python提取金融新闻</h1><h2 id="c4f8" class="jt ju hi bd ld lt lu lv lh lw lx ly ll ki lz ma ln km mb mc lp kq md me lr mf bi translated">1.导入包</h2><p id="57b7" class="pw-post-body-paragraph jz ka hi kb b kc mg ij ke kf mh im kh ki mi kk kl km mj ko kp kq mk ks kt ku hb bi translated">让我们首先将所需的包导入到我们的python环境中，因为这是任何编程项目中最重要的过程。本文中我们需要的唯一包是进行API调用的请求和用于字体或文本定制的Termcolor。如果您尚未安装这两个软件包，请在命令行中输入以下代码行:</p><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="7356" class="jt ju hi jp b fi jv jw l jx jy">pip install requests<br/>pip install termcolor</span></pre><p id="305e" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">安装完包后，我们现在可以使用下面的代码将它们导入到我们的python环境中:</p><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="6e28" class="jt ju hi jp b fi jv jw l jx jy">import requests<br/>from termcolor import colored as cl</span><span id="d811" class="jt ju hi jp b fi ml jw l jx jy">api_key = 'YOUR API KEY'</span></pre><p id="0ba1" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">现在，我们已经成功地将基本包导入到我们的环境中，并将API键存储到<code class="du mm mn mo jp b">api_key</code>变量中。</p><h2 id="2685" class="jt ju hi bd ld lt lu lv lh lw lx ly ll ki lz ma ln km mb mc lp kq md me lr mf bi translated">2.提取金融新闻的基本程序</h2><p id="8080" class="pw-post-body-paragraph jz ka hi kb b kc mg ij ke kf mh im kh ki mi kk kl km mj ko kp kq mk ks kt ku hb bi translated">在本节中，我们将构建一个非常简单的Python程序来提取金融新闻，本节的目标不是构建完美的程序，而是了解EOD历史数据提供的金融新闻API。以下代码片段是一个基本程序，它将根据给定的输入提取新闻:</p><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="9552" class="jt ju hi jp b fi jv jw l jx jy">def get_stock_news(stock, api_key):<br/>    url = f'https://eodhistoricaldata.com/api/news?api_token={api_key}&amp;s={stock}'<br/>    news_json = requests.get(url).json()<br/>    <br/>    news = []<br/>    <br/>    for i in range(10):<br/>        title = news_json[-i]['title']<br/>        news.append(title)<br/>        print(cl('{}. '.format(i+1), attrs = ['bold']), '{}'.format(title))<br/>    <br/>    return news<br/><br/>amzn_news = get_stock_news('AMZN', api_key)</span></pre><p id="05aa" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">在上面的代码中，我们首先定义了一个名为<code class="du mm mn mo jp b">get_stock_news</code>的函数，该函数将我们想要获取新闻的股票的符号(<code class="du mm mn mo jp b">symbol</code>)和API键(<code class="du mm mn mo jp b">api_key</code>)作为参数。在函数内部，我们基于给定的输入(股票的符号和API键)创建API URL，并将其存储到<code class="du mm mn mo jp b">url</code>变量中。现在让我们花一些时间来分解API URL的结构。以下是网址:</p><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="92b6" class="jt ju hi jp b fi jv jw l jx jy">https://eodhistoricaldata.com/api/news?api_token={api_key}&amp;s={stock}</span></pre><p id="2373" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">上述URL的第一个参数是<code class="du mm mn mo jp b">api_token</code>参数，我们在这里指定API键，下一个参数是<code class="du mm mn mo jp b">s</code>，它将股票的符号作为输入。这两个参数是主要的或强制的参数，但是仍然有许多辅助参数可用于调优和定制。</p><p id="277c" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">接下来是代码，在存储了API URL之后，我们使用Requests包提供的<code class="du mm mn mo jp b">get</code>函数来调用API，最后将API响应以JSON格式存储到<code class="du mm mn mo jp b">news_json</code>变量中。接下来的几行代码主要是以一种有意义的方式表示提取的数据，这是可选的，但是非常有用。</p><p id="bfe9" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">因此，在提取了金融新闻之后，我们创建了一个for循环，其基本思想是打印出最近十条关于股票的新闻的标题，并将标题附加到<code class="du mm mn mo jp b">news</code>列表中。最后，我们返回<code class="du mm mn mo jp b">news</code>并调用创建的函数来提取关于亚马逊的十条最新新闻，输出如下:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mp"><img src="../Images/26bae1c7bec34901181ef660c3720632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IfjE82uJP73qIrr7TBfnqQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><h2 id="6be7" class="jt ju hi bd ld lt lu lv lh lw lx ly ll ki lz ma ln km mb mc lp kq md me lr mf bi translated">3.提取金融新闻的高级程序</h2><p id="92a5" class="pw-post-body-paragraph jz ka hi kb b kc mg ij ke kf mh im kh ki mi kk kl km mj ko kp kq mk ks kt ku hb bi translated">在上一节中，我们的目标只是创建一个基本程序，但现在让我们向前迈出这一步，构建一个高级程序来定制API以满足我们的需求。与前一节相比，除了API URL的变化之外，代码不会有太大的不同。也就是说，代码应该是这样的:</p><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="3b6f" class="jt ju hi jp b fi jv jw l jx jy">def get_customized_news(stock, start_date, end_date, n_news, api_key, offset = 0):<br/>    url = f'https://eodhistoricaldata.com/api/news?api_token={api_key}&amp;s={stock}&amp;limit={n_news}&amp;offset={offset}&amp;from={start_date}&amp;to={end_date}'<br/>    news_json = requests.get(url).json()<br/>    <br/>    news = []<br/>    <br/>    for i in range(len(news_json)):<br/>        title = news_json[-i]['title']<br/>        news.append(title)<br/>        print(cl('{}. '.format(i+1), attrs = ['bold']), '{}'.format(title))<br/>    <br/>    return news<br/><br/>tsla_news = get_customized_news('TSLA', '2021-11-09', '2021-11-11', 15, api_key, 0)</span></pre><p id="d6f1" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">就像我之前说的，代码的结构或多或少类似于上一节，但是这里我们在玩API的其他参数。在上面的代码中，我们定义的函数有五个主要参数，分别是股票的符号(<code class="du mm mn mo jp b">symbol</code>)、新闻提要的开始日期(<code class="du mm mn mo jp b">start_date</code>)、新闻提要的结束日期(<code class="du mm mn mo jp b">end_date</code>)、我们希望输出的新闻数量(<code class="du mm mn mo jp b">n_news</code>)、API键(<code class="du mm mn mo jp b">api_key</code>)和一个可选参数(<code class="du mm mn mo jp b">offset</code>)。</p><p id="5c73" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">就像我们在上一节中如何检查API URL一样，让我们在这一节中也做同样的事情，因为我们已经做了一些修改。以下是网址:</p><pre class="iy iz ja jb fd jo jp jq jr aw js bi"><span id="73dc" class="jt ju hi jp b fi jv jw l jx jy">https://eodhistoricaldata.com/api/news?api_token={api_key}&amp;s={stock}&amp;limit={n_news}&amp;offset={offset}&amp;from={start_date}&amp;to={end_date}</span></pre><p id="536f" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">URL的前两个参数与我们之前看到的相同，分别是<code class="du mm mn mo jp b">api_token</code>和<code class="du mm mn mo jp b">s</code>参数。然后我们有了<code class="du mm mn mo jp b">limit</code>参数，这里我们必须提到输出的长度(最小值为1，最大值为1000)。接下来是<code class="du mm mn mo jp b">from</code>和<code class="du mm mn mo jp b">to</code>参数，它们的名称不言自明。在这两者之间是<code class="du mm mn mo jp b">offset</code>参数，其默认值为0，但如果需要可以更改。</p><p id="a799" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">回到代码中，我们使用for-loop来表示提取的数据，我们正在做与之前相同的事情，最后，我们将返回值并调用创建的函数来获得Tesla的定制新闻提要。代码的输出是如下所示的列表:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/a1df191c79dc6b8e6c2f1daab8c44e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a2q9j_gnCYO1zQtmdvDx6g.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="ea7c" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><strong class="kb hj">注意:</strong>财经新闻API的输出可能会有一些延迟。</p><h1 id="3ebe" class="lc ju hi bd ld le lf lg lh li lj lk ll io lm ip ln ir lo is lp iu lq iv lr ls bi translated">结束语</h1><p id="657e" class="pw-post-body-paragraph jz ka hi kb b kc mg ij ke kf mh im kh ki mi kk kl km mj ko kp kq mk ks kt ku hb bi translated">在本文中，我们已经了解了EOD历史数据公司的金融新闻API，以及如何使用它来创建基本程序和定制的高级程序，以便根据我们的需求在Python中提取新闻。</p><p id="c9d8" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">现在我们来谈谈需要改进的地方。这篇文章只能被认为是EOD历史数据的金融新闻API的应用的一瞥，可以通过几种不同的方式进入下一个层次。一种有趣的方法是构建一个情感分析应用程序，该应用程序将分析使用API提取的新闻提要，并揭示其状态是好、坏还是中性。人们可以使用这个应用程序来记录股票的当前趋势，并据此做出投资决策。</p><p id="8ee3" class="pw-post-body-paragraph jz ka hi kb b kc kd ij ke kf kg im kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">总之，新闻是市场最大的影响者之一，拥有强大优势的人只能在其他人中取得成功。令人欣慰的是，过去人们不可能获得大量股票的实时新闻，但由于EOD历史数据公司提供的金融新闻API等资源，现在任何地方的任何人都能够做到这一点。也就是说，你已经阅读完了这篇文章，希望你能从中学到一些新的有用的东西。</p><blockquote class="kv kw kx"><p id="8c34" class="jz ka ky kb b kc kd ij ke kf kg im kh kz kj kk kl la kn ko kp lb kr ks kt ku hb bi translated">完整文档:<a class="ae jn" href="https://eodhistoricaldata.com/financial-apis/financial-news-api?utm_source=medium&amp;utm_medium=post&amp;utm_campaign=extracting_financial_news_seamlessly_using_python" rel="noopener ugc nofollow" target="_blank">https://eodhistoricaldata . com/financial-APIs/financial-news-API/</a></p></blockquote></div></div>    
</body>
</html>