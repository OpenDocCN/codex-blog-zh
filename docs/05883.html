<html>
<head>
<title>How to embed a UIKit Alert with Text Field in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在SwiftUI中嵌入带有文本字段的UIKit警报</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-embed-a-uikit-alert-with-text-field-in-swiftui-8547afaa1fc?source=collection_archive---------3-----------------------#2022-04-01">https://medium.com/codex/how-to-embed-a-uikit-alert-with-text-field-in-swiftui-8547afaa1fc?source=collection_archive---------3-----------------------#2022-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="08e0" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何使用UIViewControllerRepresentable的快速指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a7ef3eb3f442dcf25f6a2d9fc99309ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2FjhpD8zGAxnUIb63Jg09Q.jpeg"/></div></div></figure><p id="c9a2" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="kf">与</em> <a class="kg kh ge" href="https://medium.com/u/7a4361f94887?source=post_page-----8547afaa1fc--------------------------------" rel="noopener" target="_blank"> <em class="kf">合写的Alessia Andrisani </em> </a> <em class="kf">。</em></p><p id="fcf7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你在这里，你可能对SwiftUI比对UIKit更熟悉。如果你不知道，SwiftUI是苹果在2019年推出的新框架，而UIKit是它在2008年诞生的哥哥。</p><p id="d977" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">也许你在问自己，为什么我应该使用UIKit，而不是完全依赖新的、更容易学习的SwiftUI？答案是，不幸的是，仍然有许多组件只存在于UIKit中，而其他组件在SwiftUI中的可定制性不如UIKit。您可能想在SwiftUI中直接创建这种自定义视图，但正如您将看到的那样，结果永远不会与原始视图完全一样，并且您将会失去一些原生视图免费提供给您的功能。</p><p id="2fc5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在本文中，我们将解释如何在SwiftUI项目中使用带有文本字段的警报，但我们在此应用的相同步骤和原则也适用于其他UIKit组件。</p><h2 id="3a66" class="ki kj hi bd kk kl km kn ko kp kq kr ks js kt ku kv jw kw kx ky ka kz la lb lc bi translated">1.设置项目</h2><p id="17fa" class="pw-post-body-paragraph jj jk hi jl b jm ld ij jo jp le im jr js lf ju jv jw lg jy jz ka lh kc kd ke hb bi translated">首先创建一个新项目，注意选择SwiftUI作为语言。创建一个新的SwiftUIView文件，并将其命名为<code class="du li lj lk ll b">AlertControllerView</code>。删除或评论预览，因为我们在这里不需要它。现在，重要的部分是:结构需要符合协议<code class="du li lj lk ll b">UIViewControllerRepresentable</code>。</p><p id="ef55" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这个协议是做什么的？该协议用于在SwiftUI界面中创建和管理UIKit视图控制器对象。</p><p id="9df1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">为了符合该协议，需要两个功能:</p><ul class=""><li id="b18d" class="lm ln hi jl b jm jn jp jq js lo jw lp ka lq ke lr ls lt lu bi translated"><code class="du li lj lk ll b">makeUIViewController</code></li><li id="e3af" class="lm ln hi jl b jm lv jp lw js lx jw ly ka lz ke lr ls lt lu bi translated"><code class="du li lj lk ll b">updateUIViewController</code></li></ul><p id="f80a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这些函数是不言自明的:第一个函数创建了<code class="du li lj lk ll b">UIViewController</code>，第二个函数用于将数据从SwiftUI发送到UIKit。现在将这些函数添加到您的结构中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="0a08" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">SwiftUI中的警报需要一些变量和绑定，以便在<code class="du li lj lk ll b">SwiftUIView</code>中正确显示。将这些变量和这些绑定添加到结构中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><h2 id="a6b0" class="ki kj hi bd kk kl km kn ko kp kq kr ks js kt ku kv jw kw kx ky ka kz la lb lc bi translated">2.协调者</h2><p id="dba9" class="pw-post-body-paragraph jj jk hi jl b jm ld ij jo jp le im jr js lf ju jv jw lg jy jz ka lh kc kd ke hb bi translated">下一步是添加一个<code class="du li lj lk ll b">Coordinator</code>类，它将协调我们的视图控制器和SwiftUI视图，使我们能够响应变化。这个协调器是必需的，因为否则您的<code class="du li lj lk ll b">UIViewController</code>将无法响应视图中发生的变化。</p><p id="7b48" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要创建一个协调器，我们需要函数<code class="du li lj lk ll b">makeCoordinator</code>，该函数创建自定义实例，您可以使用该实例将视图中的更改传达给SwiftUI界面的其他部分。将这个函数添加到您的代码中，然后添加<code class="du li lj lk ll b">Coordinator</code>类。协调者需要符合<code class="du li lj lk ll b">NSObject</code>(大多数Objective-C类层次结构的根类)和<code class="du li lj lk ll b">UITextFieldDelegate</code>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="b247" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><strong class="jl hj">委托</strong>是一个对象，当另一个对象在程序中遇到事件时，它代表该对象或与该对象协作。我们刚刚创建的协调员将是我们的文本字段的代表。</p><p id="2401" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">然后，让我们通过添加这两个变量<code class="du li lj lk ll b">alert</code>和<code class="du li lj lk ll b">control</code>以及初始化器来完成我们的协调器。下一步是添加这个函数，它将文本字段的内容链接到绑定变量<code class="du li lj lk ll b">textfieldText</code>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><h2 id="8747" class="ki kj hi bd kk kl km kn ko kp kq kr ks js kt ku kv jw kw kx ky ka kz la lb lc bi translated">3.UpdateUIViewController</h2><p id="43ce" class="pw-post-body-paragraph jj jk hi jl b jm ld ij jo jp le im jr js lf ju jv jw lg jy jz ka lh kc kd ke hb bi translated">现在让我们转到警报的逻辑实现。我们将在<code class="du li lj lk ll b">updateUIViewController</code>函数中工作。让我们检查在视图的主体被重新呈现后，Alert实例是否存在。之后，添加这段代码来创建一个将出现在<code class="du li lj lk ll b">UIViewController</code>上的<code class="du li lj lk ll b">UIAlertController</code>实例。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="5cdf" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在让我们创建文本字段，并确保协调员是它的代表。我们现在要做的是将按钮添加到我们的警报中。我们将添加一个<code class="du li lj lk ll b">"OK"</code>按钮来确认和消除，并添加一个<code class="du li lj lk ll b">”Cancel"</code>按钮来消除警告。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="e11f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">要完成<code class="du li lj lk ll b">AlertControllerView</code>您必须做的最后一件事是添加该方法来呈现警告，并在完成时消除它(当您点击其中一个按钮时)。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="ea08" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">小心点！该方法需要在主线程上被调度<strong class="jl hj">，否则警报可能不会出现，并且您可能会在控制台中得到该消息。</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/db6bc7ccddc6a0240cd816679aa1eb64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwzmqdQaXyacuWdtsowYzA.jpeg"/></div></div></figure><h2 id="01a6" class="ki kj hi bd kk kl km kn ko kp kq kr ks js kt ku kv jw kw kx ky ka kz la lb lc bi translated">4.警报正在使用中</h2><p id="8033" class="pw-post-body-paragraph jj jk hi jl b jm ld ij jo jp le im jr js lf ju jv jw lg jy jz ka lh kc kd ke hb bi translated">现在终于到了使用我们刚刚在SwiftUI中创建的警报的时候了。这里有一个简单的例子来说明它是如何工作的。好好享受吧！</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/8cef9677a0142be5f3f2ceb22bcabcd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3nW4lqdI_pGCEod9n9Nkqw.gif"/></div></div></figure></div><div class="ab cl me mf gp mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hb hc hd he hf"><p id="97f0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如果你想在一个简单的项目中看到这个带有文本字段的警告，请访问GitHub。</p><div class="ml mm ez fb mn mo"><a href="https://github.com/alessia-andrisani/UIKit-SwiftUI" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hj fi z dy mt ea eb mu ed ef hh bi translated">GitHub-alessia-andrisani/ui kit-swift ui</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc jh mo"/></div></div></a></div><pre class="iy iz ja jb fd nd ll ne nf aw ng bi"><span id="5ed7" class="ki kj hi ll b fi nh ni l nj nk"><strong class="ll hj">Discord Contacts: <br/></strong>Alessia Andrisani #7384<br/>Vito Gallo #2837</span></pre></div></div>    
</body>
</html>