<html>
<head>
<title>The Ultimate Combine Framework guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">终极组合框架指南</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-ultimate-combine-framework-guide-e17ba0601bc?source=collection_archive---------6-----------------------#2022-05-26">https://medium.com/codex/the-ultimate-combine-framework-guide-e17ba0601bc?source=collection_archive---------6-----------------------#2022-05-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="548e" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">结合框架解释得最直白。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/52bd0830f0309c77317b3820e46601d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0s2jtFaSRLqpAW32FMriQ.png"/></div></div></figure><p id="112a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Combine框架为应用程序如何处理事件提供了一种声明性的方法。例如，您可以为给定的事件源创建单个处理链，而不是潜在地实现多个委托回调或完成处理程序闭包。</p><p id="be32" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">Combine凭借其两大支柱<code class="du kf kg kh ki b">Publishers</code>和<code class="du kf kg kh ki b">Subscribers</code> <br/>屹立不倒，在很多方面，Combine与RxSwift非常相似，具有等同的概念、类型和方法。如果你不熟悉我的故事，你可以在这里找到我的RxSwift故事。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="8ce1" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">下面描述了发布者和订阅者的相互作用。这是联合收割机的核心。这是理解联合框架所需要的基础。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es kr"><img src="../Images/50aa0104c34f56ffe5869a0f64d286b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Gpg2XKFI-MCH64M3Cvs4w.png"/></div></div></figure><p id="a8b5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">这里有一只<code class="du kf kg kh ki b">Publisher</code>和一只<code class="du kf kg kh ki b">Subscriber</code>。<br/> 1。这里的<code class="du kf kg kh ki b">Subscriber</code>订阅了<code class="du kf kg kh ki b">Publisher</code>的<br/> 2。<code class="du kf kg kh ki b">Publisher</code>创建一个<code class="du kf kg kh ki b">Subscription</code>并将其交给<code class="du kf kg kh ki b">Subscriber</code>T20】3。<code class="du kf kg kh ki b">Subscriber</code>请求值<br/> 4。<code class="du kf kg kh ki b">Publisher</code>发送数值<br/> 5。<code class="du kf kg kh ki b">Publisher</code>发送完成信息</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="6b39" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，我们将尝试了解我们之前讨论的这些发布者和订阅者是什么</p><h2 id="aee7" class="ks kt hi bd ku kv kw kx ky kz la lb lc js ld le lf jw lg lh li ka lj lk ll lm bi translated">出版商</h2><p id="58e7" class="pw-post-body-paragraph jj jk hi jl b jm ln ij jo jp lo im jr js lp ju jv jw lq jy jz ka lr kc kd ke hb bi translated">发布者与RxSwift中的Observables非常相似。出版商是那些有能力随着时间的推移释放价值的人。</p><p id="11ef" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">发布器可以发出零个或多个输出值，如果它成功或失败地完成了，它将不会发出任何其他事件。发布者有一个<code class="du kf kg kh ki b">Failure</code>类型，决定了一个发布者实际上是如何失败的。对于没有失败的发布者，我们简单地使用<code class="du kf kg kh ki b">Never</code>它的失败类型。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ls"><img src="../Images/0c293a5cf1b0d8c9a1530a1c40d8a1de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRB3KHWsnE_rQwHgM23mng.png"/></div></div></figure><p id="0902" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">从1到6的方框表示在给定时间发出的值。数字代表发出的值。右端的垂直线表示时间线的终点。这里的值是整数类型，因为发布者在这里发送了整数类型<code class="du kf kg kh ki b">Publisher&lt;Int, Never&gt;</code></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">发布者定义</figcaption></figure><p id="e924" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">解码上面的发布者定义片段，我们可以理解<br/>发布者将元素交付给一个或多个<code class="du kf kg kh ki b">Subscriber</code>实例。订阅者的<code class="du kf kg kh ki b">Input</code>和<code class="du kf kg kh ki b">Failure</code>关联类型必须与发布者声明的<code class="du kf kg kh ki b">Output</code>和<code class="du kf kg kh ki b">Failure</code>类型相匹配。发布者实现<code class="du kf kg kh ki b">receive(subscriber:)</code>方法来接受订阅者。</p><p id="0ac5" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">如何创建发布者的示例:<br/> <code class="du kf kg kh ki b">let publisher = [1, 2, 3, 4, 5, 6].publisher</code></p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h2 id="48c3" class="ks kt hi bd ku kv kw kx ky kz la lb lc js ld le lf jw lg lh li ka lj lk ll lm bi translated">订阅者</h2><p id="58e3" class="pw-post-body-paragraph jj jk hi jl b jm ln ij jo jp lo im jr js lp ju jv jw lq jy jz ka lr kc kd ke hb bi translated">订阅者与RxSwift中的观察者非常相似。与订户的词义相同。订阅者是要求发布者将值发送给它的人。发布者发出值，订阅者接收这些值。</p><p id="b22a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一个<code class="du kf kg kh ki b">Subscriber</code>实例从一个<code class="du kf kg kh ki b">Publisher</code>接收元素流，以及描述它们之间关系变化的生命周期事件。给定订阅者的<code class="du kf kg kh ki b">Input</code>和<code class="du kf kg kh ki b">Failure</code>关联类型必须与其对应发布者的<code class="du kf kg kh ki b">Output</code>和<code class="du kf kg kh ki b">Failure</code>相匹配。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lz"><img src="../Images/4a7fbd5753e6c5b56fbec44132b45837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boUA7gDPYp22i46tNQUM9w.png"/></div></div></figure><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">订户辩护</figcaption></figure><p id="3c74" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">解码上面的订阅者定义片段我们可以理解，<code class="du kf kg kh ki b">Publisher</code>接收<code class="du kf kg kh ki b">Subscriber</code>并可以直接发送<code class="du kf kg kh ki b">Input</code>值或<code class="du kf kg kh ki b">Completion</code>事件给所有已知的<code class="du kf kg kh ki b">Subscribers</code>。发布者的任何变化都将调用订阅。</p><p id="404e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">现在，什么是<strong class="jl hj">订阅</strong>？</p><p id="cca7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">一个<code class="du kf kg kh ki b">Subscription</code>是当你订阅时创建的东西。订阅保留对所有必要资源的引用，并且可以使用其<code class="du kf kg kh ki b">Cancellable</code>协议随时取消(类似于<code class="du kf kg kh ki b">dispose</code> is RxSwift)</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="21ac" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">联合收割机有一些内置用户:<br/> - <strong class="jl hj"> Sink <br/> - Assign </strong></p><h2 id="c40e" class="ks kt hi bd ku kv kw kx ky kz la lb lc js ld le lf jw lg lh li ka lj lk ll lm bi translated"><strong class="ak">水槽</strong></h2><p id="7a1f" class="pw-post-body-paragraph jj jk hi jl b jm ln ij jo jp lo im jr js lp ju jv jw lq jy jz ka lr kc kd ke hb bi translated">接收器订阅者用于观察发布者收到的值。这个操作符只能在流没有失败的时候使用，也就是发布者的<code class="du kf kg kh ki b">Failure</code>类型是<code class="du kf kg kh ki b">Never</code>的时候。<br/>举例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><h2 id="785a" class="ks kt hi bd ku kv kw kx ky kz la lb lc js ld le lf jw lg lh li ka lj lk ll lm bi translated"><strong class="ak">分配</strong></h2><p id="b54c" class="pw-post-body-paragraph jj jk hi jl b jm ln ij jo jp lo im jr js lp ju jv jw lq jy jz ka lr kc kd ke hb bi translated">当您希望在每次发布者生成值时设置给定属性时，可以使用分配订阅者。<br/>举例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="b36f" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">在上面的代码中，你可以看到我们有一个<code class="du kf kg kh ki b">publisher</code> <code class="du kf kg kh ki b">Just("Snow")</code>并且<code class="du kf kg kh ki b">publisher</code>被赋予了狗对象的名字。最后，当我们打印<code class="du kf kg kh ki b">dog.name</code>时，我们可以看到<code class="du kf kg kh ki b">Snow</code>打印在控制台上。</p><p id="eeb7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我们将在这里结束这个故事。我将在接下来的故事中简要介绍操作符。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><blockquote class="ma mb mc"><p id="55b8" class="jj jk md jl b jm jn ij jo jp jq im jr me jt ju jv mf jx jy jz mg kb kc kd ke hb bi translated">给所有新开发人员的一个个人提示:<strong class="jl hj"> <em class="hi">构建您的肌肉记忆</em> <br/> </strong> <em class="hi">不要坐着计划使用什么消息/数据传递接口来完成您的任务，只需简单地编写一个发布程序并订阅该发布程序并解决您的问题。这将有助于您轻松破解合并，而不是依赖于常规的委托和完成回调。多练习一下，你会自动开始为每件事写出版商和订户。</em></p></blockquote></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="2cdd" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">我希望你明白联合框架是如何工作的，什么是<code class="du kf kg kh ki b">Publishers</code>和<code class="du kf kg kh ki b">Subscribers</code>。如果你有任何疑问或建议，请告诉我。感谢你阅读❤</p></div></div>    
</body>
</html>