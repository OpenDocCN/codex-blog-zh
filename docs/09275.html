<html>
<head>
<title>LINQ — How to avoid nested loops in C#</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">LINQ——如何避免C#中的嵌套循环</h1>
<blockquote>原文：<a href="https://medium.com/codex/linq-how-to-avoid-nested-loops-in-c-ed4ae19886e4?source=collection_archive---------2-----------------------#2022-10-09">https://medium.com/codex/linq-how-to-avoid-nested-loops-in-c-ed4ae19886e4?source=collection_archive---------2-----------------------#2022-10-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="0bf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">编写代码可能非常令人兴奋，但如果您的代码是基于嵌套循环的，也会非常令人沮丧。迭代仍然是编码中最重要的部分之一。那么我们如何避免在代码中使用难看的嵌套循环呢？</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/edbe1e5566c8948d5d8ede0ee8168a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OXJR5wLBhpVKkWk2iFPL6w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated"><a class="ae jt" href="https://unsplash.com/photos/9-dkDEXWGzI" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/9-dkDEXWGzI</a></figcaption></figure><h1 id="2891" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">LINQ —语言综合查询</h1><p id="927b" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">微软语言开发人员提供了一种直接用他们的语言表达查询的方法。LINQ通过添加类似于SQL查询的查询表达式扩展了该语言。</p><p id="3597" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> LINQ语法通常不如foreach循环</strong>有效。在使用LINQ时，最好能意识到任何可能发生的性能折衷。另一方面，这是提高代码可读性的最有效的方法。</p><h1 id="6f9e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用LINQ的好处</h1><ul class=""><li id="b63f" class="kx ky hi ih b ii ks im kt iq kz iu la iy lb jc lc ld le lf bi translated"><strong class="ih hj">开发者可以在不了解新技术的情况下接触到它们</strong></li><li id="624d" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">LINQ提供了一种基于对象的、语言集成的方式来查询数据，不管数据来自哪里。所以通过LINQ，我们可以查询数据库、XML以及集合。</li><li id="e671" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">用更少的代码创建完整的应用</strong></li><li id="18ab" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">用更少的时间和更少的错误开发应用</strong></li><li id="5031" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">组合数据源，无需借助奇怪的编程技巧</strong></li><li id="e5a9" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">让新开发人员更快地工作</strong></li><li id="8e17" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">编译时语法检查</strong></li><li id="42cf" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><strong class="ih hj">允许您使用应用程序的本地语言(如VB或C#)查询数组、可枚举类等集合，就像使用SQL查询数据库一样</strong></li></ul><blockquote class="ll lm ln"><p id="d4ac" class="if ig lo ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">“也许LINQ最重要的方面，也是我希望其他API设计者采纳的方面，就是复杂的查询是如何由许多小构件构建而成的。它的特别之处在于，应用每个构建块的结果不会因为您之后对它做的任何事情而改变。</p><p id="66e2" class="if ig lo ih b ii ij ik il im in io ip lp ir is it lq iv iw ix lr iz ja jb jc hb bi translated">当然，LINQ没有强制不变性——你可以从一个可变列表开始，并在任何时候改变它的内容，例如，或者改变其中引用的一个对象的属性，或者传入一个有副作用的委托——但是<em class="hi"> LINQ本身</em>不会引入副作用。"(双向飞碟，2018年3月)</p></blockquote><h1 id="507b" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">方法:</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/80bbe9e66549410fe0dc36b0a9851a32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-UtZ-tD4IERd5oZf8XWxiw.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/187cb1ec17548a553ff79ef1d425abc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZY0MrVvntHhOaN6ywuGEjA.jpeg"/></div></div></figure><h1 id="b3fe" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用索引循环</h1><p id="68e4" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">使用LINQ最常见的错误之一是，开发人员认为不可能替换基于索引调用方法的for循环。这里有一些例子来说明如何做。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="238c" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用Linq的嵌套循环</h1><h2 id="0ceb" class="lw jv hi bd jw lx ly lz ka ma mb mc ke iq md me ki iu mf mg km iy mh mi kq mj bi translated">第一个例子大约有17行。第二个只有3。</h2><p id="d649" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">假设我们需要使用EPPlus在Excelworksheet中导航。使用循环访问每个单元总是非常昂贵。这里经常使用嵌套的for-loops，占用了大量的空间，使得阅读变得复杂。让我们看看如何避免嵌套循环:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="46d4" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="5c99" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">总而言之，Linq利大于弊。速度的损失与清晰的可读性、更快的编写速度以及基于SQL的语言的应用表明，使用Linq-expressions为开发人员提供了强大的优势。</p><h1 id="b754" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">更多示例:</h1><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="9c4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里您可以找到一些其他的例子:</p><div class="mk ml ez fb mm mn"><a href="https://www.tutorialsteacher.com/linq/sample-linq-queries" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">LINQ查询示例</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">在本节中，您将学习一些复杂的LINQ查询。我们将使用以下学生和标准集合…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">www.tutorialsteacher.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb jn mn"/></div></div></a></div><h1 id="6277" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">请查看我的其他文章:</h1><ul class=""><li id="16cd" class="kx ky hi ih b ii ks im kt iq kz iu la iy lb jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/dev-genius/net-c-clean-architecture-dependency-inversion-principle-7ea64f586c58">。Net C# —干净的架构&amp;依赖倒置原则</a></li><li id="ac7c" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/dev-genius/programming-paradigms-a-very-short-brief-5324908640bd">编程范例——简介</a></li><li id="8ae1" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/codex/c-object-oriented-programming-oop-2d92a5cd336f"> C# —面向对象编程</a></li><li id="d258" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/@sebastianstreng96/c-single-responsibility-easily-explained-e3fabbf0d877">c#——简单解释的单一责任</a></li><li id="6694" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/@sebastianstreng96/ocp-what-really-matters-610159d600dc">OCP——真正重要的是什么</a></li><li id="495a" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/@sebastianstreng96/top-8-tips-to-improve-your-motivation-as-programmer-be63b2baaf7e">提高程序员积极性的8大技巧</a></li><li id="01cb" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/codex/a-brief-insight-into-networks-2171f1e9aea1">对网络的简要了解</a></li><li id="335f" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/codex/send-receive-the-7-layer-osi-model-e475829b999">发送&amp;接收—7层OSI模型</a></li><li id="5cf3" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated"><a class="ae jt" rel="noopener" href="/@sebastianstreng96/7-layer-network-protocols-easily-explained-e11e3e09f34d">七层网络协议浅显易懂</a></li></ul><h2 id="75c4" class="lw jv hi bd jw lx ly lz ka ma mb mc ke iq md me ki iu mf mg km iy mh mi kq mj bi translated">来源:</h2><div class="mk ml ez fb mm mn"><a href="https://en.wikipedia.org/wiki/Language_Integrated_Query" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">语言综合查询-维基百科</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">编辑描述</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">en.wikipedia.org</p></div></div><div class="mw l"><div class="nc l my mz na mw nb jn mn"/></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://learn.microsoft.com/en-us/dotnet/csharp/linq/" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">C#中的语言集成查询(LINQ)</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">语言集成查询(LINQ)是一组基于查询功能集成的技术的名称…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">learn.microsoft.com</p></div></div><div class="mw l"><div class="nd l my mz na mw nb jn mn"/></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://www.cio.com/article/276569/net-five-things-the-boss-should-know-about-microsoft-s-linq.html" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">老板应该知道的关于微软LINQ的五件事</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">你可能没听说过微软的新创意，语言集成查询(LINQ)。如果你真的听说了…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">www.cio.com</p></div></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://codeblog.jonskeet.uk/category/edulinq/" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">Edulinq - Jon Skeet的编码博客</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">我很高兴地宣布，我已经第一次把美味系列的博客文章转换成电子书了…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">codeblog.jonskeet.uk</p></div></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://www.c-sharpcorner.com/UploadFile/72d20e/concept-of-linq-with-C-Sharp/" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">C#中的LINQ</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">C#中的LINQ用于处理来自对象、数据集、SQL Server和XML等源的数据访问。LINQ站在…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">www.c-sharpcorner.com</p></div></div><div class="mw l"><div class="ne l my mz na mw nb jn mn"/></div></div></a></div><div class="mk ml ez fb mm mn"><a href="https://www.jetbrains.com/help/resharper/LoopCanBeConvertedToQuery.html" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab dw"><div class="mp ab mq cl cj mr"><h2 class="bd hj fi z dy ms ea eb mt ed ef hh bi translated">代码检查:循环可以转换成LINQ表达式| ReSharper</h2><div class="mu l"><h3 class="bd b fi z dy ms ea eb mt ed ef dx translated">您可以抑制此检查以忽略特定问题，更改其严重性级别以使问题更少或更多…</h3></div><div class="mv l"><p class="bd b fp z dy ms ea eb mt ed ef dx translated">www.jetbrains.com</p></div></div><div class="mw l"><div class="nf l my mz na mw nb jn mn"/></div></div></a></div></div></div>    
</body>
</html>