<html>
<head>
<title>Hack the Boo: Juggling Facts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客嘘声:玩弄事实</h1>
<blockquote>原文：<a href="https://medium.com/codex/hack-the-boo-juggling-facts-fb79f2224ec1?source=collection_archive---------23-----------------------#2022-10-29">https://medium.com/codex/hack-the-boo-juggling-facts-fb79f2224ec1?source=collection_archive---------23-----------------------#2022-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/d5c961d91c78186c833554e22e735ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*Q5sk7RcM_1QmAiu_9iSNHA.png"/></div></figure><p id="4419" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是我写的关于黑客的嘘声CTF的杂耍事实网络开发挑战。在这个挑战中，我们需要从网页中恢复一个秘密，他们给我们源代码来分析它，寻找漏洞来利用。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jk"><img src="../Images/1f809602462aa30b95ef84360bea9d22.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*c3AvzEsMYzMaxCJmgBu6tA.png"/></div></figure><p id="c66d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我们下载文件并查看内容；我们可以看到PHP代码和docker文件来在本地启动应用程序。现在，我们观察应用程序定义的路由。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jp"><img src="../Images/beb2993f88120d03cc5a4dc935b5ef5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ny6NcxyPMRghFbIVPwsZoQ.png"/></div></div></figure><p id="68c4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以看到有两条路径，一条用于API的POST，一条用于主页面的get两者调用同一个控制器，让我们深入研究控制器的代码。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ju"><img src="../Images/e813a607da5d6a36beca1e39fbdf6644.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TcanE2kerQuqVmwWHnrwow.png"/></div></div></figure><p id="4ced" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们有两个函数，GET请求的index和POST请求的getfacts。GET为我们提供了索引视图；POST有一个更复杂的逻辑，它检查发送的JSON。首先，它检查该类型是否在应用程序支持的类型中，如果该类型是secret，它检查请求是否来自localhost。然后，它使用一个开关来呈现所请求的内容。</p><p id="226f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这里的问题是switch函数使用弱(无类型)比较进行检查，而secret类型检查是使用严格的“===”比较来完成的。</p><p id="e667" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在这种情况下，我们可以利用这些被称为类型杂耍的比较(这就是挑战的名称)，并传递一个满足以下条件的值:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jv"><img src="../Images/873c185aa25ced18eeb33ca88ec725aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*g0IvyCkfdufL7yoEtcU0pQ.png"/></div></figure><p id="b802" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这可以通过在类型值中发送一个布尔值(true)来实现，如下面的请求所示:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jw"><img src="../Images/d6a28375b15717af49d7fb35c1def84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNP35oqqnuBp0LbM3ZoX1g.png"/></div></div></figure><p id="52a2" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我希望你喜欢这篇文章，并了解一些新的:D</p></div></div>    
</body>
</html>