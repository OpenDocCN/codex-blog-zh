<html>
<head>
<title>I Was Stuck in the Past Until I Discovered This</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在我发现这个之前，我一直停留在过去</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-match-expression-from-the-office-d1ada86071eb?source=collection_archive---------19-----------------------#2022-08-01">https://medium.com/codex/the-match-expression-from-the-office-d1ada86071eb?source=collection_archive---------19-----------------------#2022-08-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="11cd" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">2022年写条件的新方法</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a2f0756388149dd97719d5d2fd541fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qU41n7cQG87UZa1u"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">肖恩·西姆在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="bb35" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">为什么是PHP 8？</h1><p id="9d41" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">2020年11月26日，核心PHP团队发布了该语言最新、最快、更好的版本。</p><p id="88c4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在所有令人惊叹的新特性和关键字中，比如<strong class="ki hj">构造函数属性提升、Nullsafe操作符</strong>等等，有一个对大多数开发人员来说非常突出。</p><p id="d719" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我说的是比赛表情</p><h1 id="9694" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">匹配表达式</h1><p id="2876" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">可以把匹配表达式看作是switch语句的一种发展。</p><p id="927d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">它所做的是<strong class="ki hj">评估一个主题表达式，并根据情况，分支到不同的块或代码或语句</strong>。</p><p id="cecb" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">与switch不同，这种比较是一种身份检查(===)，而不是弱相等检查(==)。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="10e8" class="lm jp hi li b fi ln lo l lp lq">$food = 'cake';<br/><br/>$returnValue = match ($food) {<br/>    'apple' =&gt; 'This food is an apple',<br/>    'bar' =&gt; 'This food is a bar',<br/>    'cake' =&gt; 'This food is a cake',<br/>};<br/><br/>var_dump($returnValue);<br/>// string(19) "This food is a cake"</span></pre><h1 id="bf44" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">为什么要用？</h1><p id="4575" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">使用这种语言的新特性有许多积极的方面。</p><p id="474d" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">例如，使用switch语句最烦人的事情之一就是我们不能忘记使用来中断代码块。</p><p id="a275" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">不再休息！</p><p id="9ad6" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果我们不这样做，代码将在下面的情况下继续运行。</p><p id="7ca4" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这当然会导致错误和意想不到的结果。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="c53d" class="lm jp hi li b fi ln lo l lp lq">$i = 0;</span><span id="6a8e" class="lm jp hi li b fi lr lo l lp lq">switch ($i) {<br/>    case 0:<br/>        echo "i equals 0";       <br/>    case 1:<br/>        echo "i equals 1";<br/>        break;<br/>    case 2:<br/>        echo "i equals 2";<br/>        break;<br/>}</span><span id="8c2a" class="lm jp hi li b fi lr lo l lp lq">"i equals 0"<br/>"i equals 1"</span></pre><p id="06f5" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">匹配表达式返回值:</p><p id="662e" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在上面的例子中你已经看到了，match块的内部看起来像一个经典数组，<strong class="ki hj">匹配条件的值是实际返回到变量</strong>中的值。</p><p id="841b" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">只要条件表达式为真，匹配表达式也可以处理非同一性条件情况。</p><p id="a85c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">这里有一个例子。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="1b39" class="lm jp hi li b fi ln lo l lp lq">$result = match (true) {<br/>    $age &gt;= 65 =&gt; 'senior',<br/>    $age &gt;= 25 =&gt; 'adult',<br/>    $age &gt;= 18 =&gt; 'young adult',<br/>    default =&gt; 'kid',<br/>};</span></pre><p id="b632" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">像开关一样，任何臂都可以包含由逗号分隔的多个表达式。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="cf49" class="lm jp hi li b fi ln lo l lp lq">$result = match ($x) {<br/>    // This match arm:<br/>    $a, $b, $c =&gt; 5,<br/>    // Is equivalent to these three match arms:<br/>    $a =&gt; 5,<br/>    $b =&gt; 5,<br/>    $c =&gt; 5,<br/>};</span></pre><p id="dddf" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">从开关继承的另一个特性是默认情况。</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="5f3f" class="lm jp hi li b fi ln lo l lp lq">$expressionResult = match ($condition) {<br/>    1, 3 =&gt; getFromEvens(),<br/>    2, 4 =&gt; getFromOdds(),<br/>    default =&gt; GetAll(),<br/>};</span></pre><p id="9f68" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">如果条件与之前的任何情况(1、2、3或4)都不相同，那么只有在那时才会调用函数<code class="du ls lt lu li b">GetAll()</code>。</p><p id="0333" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">不要放入多个默认条件，因为它会抛出一个错误！</p><p id="ad09" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">处理这个问题的一个更好的方法是将表达式包装在一个try-catch块中</p><pre class="iy iz ja jb fd lh li lj lk aw ll bi"><span id="808f" class="lm jp hi li b fi ln lo l lp lq">$condition = 5;<br/><br/>try {<br/>    match ($condition) {<br/>        1, 2 =&gt; foo(),<br/>        3, 4 =&gt; bar(),<br/>    };<br/>} catch (UnhandledMatchError $e) {<br/>    var_dump($e);<br/>}</span></pre><h1 id="089c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">骗局</h1><p id="7504" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">使用它并没有什么坏处。</p><p id="a3db" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在我看来，该语法比switch语句中的语法更干净，并且它以更优雅的方式处理结果。</p><p id="daff" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">我不使用它的唯一原因是万一我只需要两三箱。</p><p id="3f0c" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在这种情况下，我可能会选择几个单一的if语句。</p><h1 id="be7c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">你的观点是什么？</h1><p id="9d01" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">你已经使用匹配表达式了吗？</p><p id="5186" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">它的使用案例是什么？</p><p id="d4e2" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">在下面的评论中展示你的例子。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/b416d3a2fd7b97fc207e1c01ae3969b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*auxtTCGOOBPQH18GSkEKhA.png"/></div></div></figure><h1 id="5489" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">结论</h1><p id="b37a" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">我已经做了将近十年的网页开发员了。</p><p id="58ce" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">与位于伦敦市中心的世界级企业和屡获殊荣的营销机构合作。</p><p id="c328" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated">此外，我在我的博客和在线社区上写文章和教程，并帮助企业在网上建立他们的存在。</p><p id="2ae9" class="pw-post-body-paragraph kg kh hi ki b kj lc ij kl km ld im ko kp le kr ks kt lf kv kw kx lg kz la lb hb bi translated"><a class="ae jn" href="https://anastasionico.uk/blog" rel="noopener ugc nofollow" target="_blank">点击这里阅读超过100+的我的博文</a></p></div></div>    
</body>
</html>