<html>
<head>
<title>5 Minutes Introduction to Composer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作曲家简介5分钟</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-composer-installation-and-components-5c9b14df8c73?source=collection_archive---------0-----------------------#2020-07-17">https://medium.com/codex/introduction-to-composer-installation-and-components-5c9b14df8c73?source=collection_archive---------0-----------------------#2020-07-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="658f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何做更多的事情</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/66100ec55251966d005fa413fcf09a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a_p2UwnXNDr79-Y2"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated"><a class="ae jn" href="https://unsplash.com/@fempreneurstyledstock?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莱昂·温特</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d11e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你曾经使用过PHP，你可能会遇到Composer这个词。</p><p id="96e1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Composer是一个工具，让世界各地的PHP开发人员声明他们的项目需要的库，并为您管理它们。</p><p id="d1ae" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你想成为一名专业的PHP开发人员，这无疑是你必须学习的三大工具之一。</p><p id="fa9c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，我们将介绍它是什么以及如何使用它的基本知识。</p><p id="3b02" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">开始吧！</p><p id="aa0d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">开发Composer的人首先要做的事情之一就是指定它不是一个包管理器</p><p id="977a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">即使这个工具处理包(或库)，它也是根据它们所习惯的项目来管理它们的。</p><p id="dda8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您可以将Composer更多地视为一个依赖管理器。</p><p id="7c22" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Composer将它们安装在您的项目中的一个目录下，这些包将只在该项目上工作。</p><p id="fe8c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">(它也支持全球项目，但这是另外一个话题)。</p><h1 id="3b3f" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">要求和安装</h1><p id="0600" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">成为PHP的依赖管理器意味着你的系统中需要有PHP。</p><p id="4370" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我知道这令人震惊。</p><p id="9f47" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它工作所需的PHP最低版本是5.3.2。</p><p id="6c1a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我真的希望没有人在读它的时候还在运行低于7的PHP版本。</p><p id="c925" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果是这样，请停止阅读，去更新你的PHP。</p><p id="8cc2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你回来了？凉爽的</p><p id="cbb3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们看看如何在您的机器上安装Composer。</p><p id="aca4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Composer是多平台的，开发者试图让它尽可能的工作</p><p id="b60a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">目前，事实上，你可以在Windows、Linux和macOS上安装它。</p><h1 id="2b43" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">在Linux、Unix或macOS上安装Composer</h1><p id="6943" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Composer有一个安装程序，您可以从命令行使用。</p><p id="043e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您正在使用一个类似Unix的系统，这可能意味着您可以轻松地使用它。</p><p id="ad1b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有两种方法可以安装这个工具，</p><ul class=""><li id="071a" class="lh li hi jq b jr js ju jv jx lj kb lk kf ll kj lm ln lo lp bi translated"><strong class="jq hj">本地</strong>在您的项目中</li><li id="dba6" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated"><strong class="jq hj">全局</strong>作为一个可执行程序存在于整个系统中</li></ul><p id="0969" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要在本地安装Composer，您必须从您的目录中运行安装程序，查看<a class="ae jn" href="https://getcomposer.org/download/" rel="noopener ugc nofollow" target="_blank">下载页面</a>。</p><p id="054f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">幕后将会发生的是，安装程序将<strong class="jq hj">检查一些PHP设置并将名为composer.phar的文件下载到您的目录中。</strong></p><p id="fc7c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个文件的格式是PHP档案，</p><p id="199d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要运行Composer，你只需要运行PHP composer.phar。</p><p id="1200" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您也可以使用下面的命令并用标志<code class="du lv lw lx ly b"><em class="lz">— install-bin</em></code>指定目录</p><p id="0da7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这里有一个例子:</p><p id="86ea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">php composer-setup.php --install-dir=bin --filename=composer</code></p><p id="9a27" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您想全局安装Composer，那么您必须将phar文件放在您的路径中的一个目录中。</p><p id="1817" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">运行安装程序后，您可以将文件移动到<code class="du lv lw lx ly b">local/bin</code>目录。</p><p id="47e5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面是要使用的命令:</p><p id="218c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">mv composer.phar /usr/local/bin/composer</code></p><p id="7b21" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这样做之后，你可以简单地运行<code class="du lv lw lx ly b">composer</code>而不是使用命令<code class="du lv lw lx ly b">php composer.phar</code></p><h2 id="4d4c" class="ma kl hi bd km mb mc md kq me mf mg ku jx mh mi kw kb mj mk ky kf ml mm la mn bi translated">Windows操作系统</h2><p id="9588" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在window机器上安装Composer甚至更简单，</p><p id="c2de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你需要做的只是下载并执行<a class="ae jn" href="https://getcomposer.org/Composer-Setup.exe" rel="noopener ugc nofollow" target="_blank"> composer-setup文件</a>。</p><p id="6553" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该可执行文件将更新路径本身，因此您只需在终端上运行composer即可。</p><h1 id="26ec" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">基本用法</h1><p id="9af0" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">为了在你的项目中使用Composer，你必须要有一个JSON文件。</p><p id="58a2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这个文件将详细描述所有需要的依赖项，它还包含其他有用的元数据。</p><p id="a6a2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">composer.json中需要的最重要的东西是必需的键。</p><p id="6f52" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在官方文档中，他们使用<a class="ae jn" href="https://github.com/Seldaek/monolog" rel="noopener ugc nofollow" target="_blank">独白包</a>。</p><p id="2147" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它所做的是将日志发送到文件、套接字、收件箱、数据库和各种web服务。</p><p id="4348" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">所需的键接受一个对象(由其名称表示)和版本。</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="3fd9" class="ma kl hi ly b fi ms mt l mu mv">{</span><span id="aa03" class="ma kl hi ly b fi mw mt l mu mv">    "require": {</span><span id="a865" class="ma kl hi ly b fi mw mt l mu mv">        "monolog/monolog": "1.0.*"</span><span id="f398" class="ma kl hi ly b fi mw mt l mu mv">    }</span><span id="646e" class="ma kl hi ly b fi mw mt l mu mv">}</span></pre><p id="c5b8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">Composer所做的是检查正确的文件，这些文件不仅匹配包的名称，还匹配版本。</strong></p><p id="1522" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">包名</strong>由两部分组成，厂商名称和项目名称，在上面的独白中两者是相同的。</p><p id="8c5d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们需要两者的原因是两个供应商可能以相同的方式调用他们的包，并且指定供应商的名称可以避免冲突错误。</p><p id="536a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">简单对吗？</p><p id="8594" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">关于版本的价值，规范稍微复杂一点。</p><p id="b93c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在上面的例子中，需要的是大于或等于1.0且小于1.1的monolog包的任何版本(注意*通配符)。</p><p id="b776" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您还可以指定标签、分支和所需的最低稳定性，Composer的人实际上创建了一个完整的关于<a class="ae jn" href="https://getcomposer.org/doc/articles/versions.md" rel="noopener ugc nofollow" target="_blank">版本和约束</a>的博客，您可以阅读。</p><p id="db18" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一旦您在JSON文件<strong class="jq hj">中指定了项目所需的包，您只需运行</strong> <code class="du lv lw lx ly b"><strong class="jq hj">composer install</strong></code> <strong class="jq hj">命令，这些文件就会神奇地出现在项目目录中的vendor文件夹中。</strong></p><p id="207e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本例中，您将有一个文件夹<code class="du lv lw lx ly b">vendor/monolog/monolog/</code>，如果monolog有自己的依赖项，它们也会列在vendor文件夹中。</p><p id="3396" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">一旦安装完成，就会创建一个包含所有依赖项及其项目版本的<code class="du lv lw lx ly b">composer.lock</code>文件。</p><p id="9a51" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">将<code class="du lv lw lx ly b">composer.lock</code>提交给项目的回购协议是一个很好的做法，这样其他从事该项目的PHP开发人员就被锁定了，必须使用相同的版本。</p><p id="3cf9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这一点很重要！</p><p id="6a9d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">原因是，如果在项目已经有composer.log的情况下用新版本更新JSON文件，然后运行composer install命令，那么两个文件之间的包版本将会不同。</p><p id="7ee8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是由设计决定的，您和您的合作者希望维护所有包的相似版本，而不能更新版本以确保您的项目不会因为一个或多个依赖项的更改而中断。</p><p id="f1ab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如何更新依赖关系？</p><p id="cf79" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">您知道在您的存储库中拥有<code class="du lv lw lx ly b">composer.lock</code>文件会阻止您的依赖项的任何新版本被更新。</p><p id="358c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">如果您确实想更新它们，一个解决方案是删除锁文件并再次运行composer install命令。</strong></p><p id="212f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是可行的，但是你可以想象这不是处理这个问题的最好方法。</p><p id="a61a" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">更好的方法是使用命令<code class="du lv lw lx ly b">composer update</code>。</p><p id="68df" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这将获取composer.json文件中所需的依赖项的最新匹配版本，并用新版本更新锁文件。</p><p id="b553" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果需要，还可以通过指定一个，</p><p id="d3eb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">需要举例吗？</p><p id="00b1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这将起作用:</p><p id="4ae3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">composer update monolog/monolog</code></p><h1 id="1a81" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">包装和自动装载</h1><p id="01c0" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">网上有一些Composer库，这些是软件包源，可以描述为一个网站，你可以从那里获得软件包。</p><p id="841b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最流行的，也是我建议你使用的是<a class="ae jn" href="https://packagist.org/" rel="noopener ugc nofollow" target="_blank"> Packagist </a>。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mx"><img src="../Images/6a4478fb77a6b4046b3703baff5fc93d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*vpzb4nQRyRmWwNGr.jpg"/></div></figure><p id="6a94" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您有一个使用Composer的开源项目，强烈建议在Packagist上发布您的包。</p><p id="a5f1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">尽管这不是必需的或强制性的，但在那里发布一个库将增加被发现的可能性，从而被其他开发人员采用。</p><p id="e780" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Composer的一个不常见但非常有趣的地方是它有平台包。</p><p id="27e2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">这些是安装在系统上但Composer无法安装的功能的虚拟包。</strong></p><p id="9518" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要获得这些软件包的完整列表，您必须在安装Composer后键入以下命令</p><p id="020d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">composer show --platform</code></p><p id="1037" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，</p><p id="734f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">现在您已经安装了Composer，并且已经需要了您喜欢的组件，您可能还想在您的项目中使用它们。</p><p id="6c88" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为此，通常的做法是利用<code class="du lv lw lx ly b">vendor/autoload.php</code>文件。</p><p id="dbc0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">Composer会自动生成这个文件，我们所能做的就是包含这个文件并使用所需的类。</p><p id="83b1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">下面是一个自动加载实现的代码片段</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="cf1e" class="ma kl hi ly b fi ms mt l mu mv">require<!-- --> <!-- -->__DIR__ . '/vendor/autoload.php';</span><span id="ccdd" class="ma kl hi ly b fi mw mt l mu mv">$log<!-- --> <!-- -->= new<!-- --> <!-- -->Monolog\Logger('name');</span><span id="d652" class="ma kl hi ly b fi mw mt l mu mv">$log-&gt;pushHandler(new<!-- --> <!-- -->Monolog\Handler\StreamHandler('app.log', Monolog\Logger::WARNING));</span><span id="26da" class="ma kl hi ly b fi mw mt l mu mv">$log-&gt;addWarning('Foo');</span></pre><p id="c751" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">也可以将我们自己的代码添加到自动加载程序中。</p><p id="cefb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以通过更新<em class="lz"> composer.json. </em>的<em class="lz">自动加载</em>部分来做到这一点</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="05e9" class="ma kl hi ly b fi ms mt l mu mv">{<br/>   "autoload": {<br/>       "psr-4": {"Acme\Foo": "src/Foo.php"}<br/>    }<!-- --> <br/>}</span></pre><p id="804f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如你所见，它将注册一个<a class="ae jn" href="http://www.php-fig.org/psr/psr-4/" rel="noopener ugc nofollow" target="_blank"> PSR-4 </a>自动加载器</p><p id="8c5e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">此外，它需要一个带有键和值的对象，键是类的名称空间，而值是文件名。</p><p id="bdb6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">更新之后，您需要重新生成自动加载文件</p><p id="7a61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们将使用命令来完成此操作</p><p id="d0ea" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">composer dump-autoload</code></p><p id="9ece" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">或者</p><p id="52da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">composer dumpautoload</code></p><p id="6bb1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">值得注意的是，Composer也支持PSR-0、类别映射和文件自动加载。有关更多信息，请参见自动加载参考。</p><p id="b8af" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">前往<a class="ae jn" href="https://getcomposer.org/doc/04-schema.md#autoload" rel="noopener ugc nofollow" target="_blank">自动加载页面</a>了解更多信息。</p><h1 id="b13f" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">图书馆</h1><p id="0fd3" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">您应该了解的是，Composer将每个具有<code class="du lv lw lx ly b">composer.json</code>文件的项目都视为一个包。</p><p id="0a6e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您的应用程序有composer.json包，</p><p id="abbc" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您需要JSON文件中的某个包，那么您的应用程序就是一个需要其他包的包。</p><p id="cea6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">唯一的区别是，目前你的项目(也就是你的包)没有名字。</p><p id="52e8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们来解决这个问题！</p><p id="2d03" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">添加名称的方法是在JSON文件中指定键名，然后添加供应商的名称和包的名称。</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="fb31" class="ma kl hi ly b fi ms mt l mu mv">{</span><span id="6e73" class="ma kl hi ly b fi mw mt l mu mv">    "name": "acme/hello-world",</span><span id="c5b3" class="ma kl hi ly b fi mw mt l mu mv">    "require": {</span><span id="333d" class="ma kl hi ly b fi mw mt l mu mv">        "monolog/monolog": "1.0.*"</span><span id="e58d" class="ma kl hi ly b fi mw mt l mu mv">    }</span><span id="6db0" class="ma kl hi ly b fi mw mt l mu mv">}</span></pre><p id="1bf3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">通常，当你为一个项目编码时，你会创建不同的版本，</p><p id="80e6" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在大多数情况下，Composer能够从您的版本控制系统中提取版本，并且您不需要在JSON文件中指定它。</p><p id="1b0b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是，如果您自己维护没有VCS的项目，您必须通过在composer.json文件中添加版本值来明确指定版本。</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="0347" class="ma kl hi ly b fi ms mt l mu mv">{<br/>    "version": "1.0.0"<br/>}</span></pre><p id="9c24" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">很可能您最喜欢的VCS也支持标记和分支特性。</p><p id="ec3d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">它的工作方式是Composer检查您的标签和分支，并将它们放入一个选项列表中，然后根据您提供的版本约束进行匹配。</p><p id="fec9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">官方手册的<a class="ae jn" href="https://getcomposer.org/doc/articles/versions.md" rel="noopener ugc nofollow" target="_blank">版本和约束页面</a>中有更多相关信息。</p><h1 id="eba7" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">发布您的项目</h1><p id="06f5" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">如果您有一个包含composer.json文件的存储库，那么就可以安装这个库了。</p><p id="41de" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们创建一个新项目(比如说一个博客)并在上面安装<code class="du lv lw lx ly b">acme/hello-world</code>。</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="3583" class="ma kl hi ly b fi ms mt l mu mv">// acme/blogProject/composer.json</span><span id="96f0" class="ma kl hi ly b fi mw mt l mu mv">{<br/>    "require": {<br/>        "acme/hello-world": "dev-master"<br/>    }<br/>}</span></pre><p id="db27" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如您所见，因为我们不想发布这个项目，所以不需要这个名字。</p><p id="f047" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们需要的是描述在哪里可以找到hello-world依赖项。</p><p id="a6b1" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们可以通过给对象添加<code class="du lv lw lx ly b">repositories</code> <em class="lz"> </em>键来做到这一点。</p><pre class="iy iz ja jb fd mo ly mp mq aw mr bi"><span id="f07e" class="ma kl hi ly b fi ms mt l mu mv">{</span><span id="e191" class="ma kl hi ly b fi mw mt l mu mv">    "repositories": [<!-- --> </span><span id="1c66" class="ma kl hi ly b fi mw mt l mu mv">        {</span><span id="6cfd" class="ma kl hi ly b fi mw mt l mu mv">            "type": "vcs",</span><span id="661b" class="ma kl hi ly b fi mw mt l mu mv">            "url": "<a class="ae jn" href="https://github.com/acme/hello-world" rel="noopener ugc nofollow" target="_blank">https://github.com/acme/hello-world</a>"</span><span id="45c9" class="ma kl hi ly b fi mw mt l mu mv">        }</span><span id="bcba" class="ma kl hi ly b fi mw mt l mu mv">    ],</span><span id="ed09" class="ma kl hi ly b fi mw mt l mu mv">    "require": {</span><span id="0462" class="ma kl hi ly b fi mw mt l mu mv">        "acme/hello-world": "dev-master"</span><span id="1902" class="ma kl hi ly b fi mw mt l mu mv">    }</span><span id="417c" class="ma kl hi ly b fi mw mt l mu mv">}</span></pre><p id="d604" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">要使用hello-world和monolog，您只需使用以下命令</p><p id="5852" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du lv lw lx ly b">composer install</code></p><p id="8623" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你有没有注意到我们没有为monolog指定一个包存储库？</p><p id="2b0b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">原因是monolog是在Packagist </strong>上发布的，在那个包库中发布的任何东西都可以通过Composer自动获得</p><p id="0bf5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">由于Monolog在Packagist上，我们可以依赖它，而不必指定任何额外的存储库。</p><p id="4df2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果您想通过Packagist共享<code class="du lv lw lx ly b">acme/hello-world</code>，您只需访问<a class="ae jn" href="https://packagist.org/" rel="noopener ugc nofollow" target="_blank"> Packagist </a>并点击“提交”按钮</p><h1 id="26f7" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论</h1><p id="50f0" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">我怎么强调都不为过，</p><p id="247d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你梦想成为一名PHP开发人员，Composer是最重要的工具之一。</p><p id="b46d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从框架到自动化测试工具，您需要的一切都可以通过Composer获得。</p><p id="5ee5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">很好地掌握它的功能和工作原理是非常重要的。</p><p id="60fb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">在本文中，您学习了Composer的基础知识。</strong></p><p id="0e60" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你现在知道它是如何工作的，最重要的是它是做什么的。</p><p id="5733" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">现在，您应该能够将软件包安装到您的存储库中，并将您的how软件包发布到VCS和打包程序中。</strong></p><p id="b44c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在下面的文章中，我们将深入研究这个命令和composer.json模式，所以如果您想在新文章发布时得到通知，请订阅时事通讯。</p><p id="1cd3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">同时，既然你已经知道了如何分享你的PHP包，那么温习一下如何编写令人惊叹的PHP可能是个好主意，你可以通过阅读PHP基础知识来学习如何做。</p><p id="46cb" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">否则，学习如何使用<a class="ae jn" href="https://anastasionico.uk/blog/domain-driven-design-quickest-the-basics" rel="noopener ugc nofollow" target="_blank">领域驱动设计</a>开发复杂的应用程序可能会让你感兴趣。</p></div></div>    
</body>
</html>