<html>
<head>
<title>User Case: China Unicom Digital Technology - Ensuring Stability, Efficiency, and Replicability at Scale</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用户案例:中国联通数字技术-确保稳定、高效和可复制性</h1>
<blockquote>原文：<a href="https://medium.com/codex/user-case-shardingsphere-x-china-unicom-digital-technology-fffd1980c443?source=collection_archive---------20-----------------------#2022-07-20">https://medium.com/codex/user-case-shardingsphere-x-china-unicom-digital-technology-fffd1980c443?source=collection_archive---------20-----------------------#2022-07-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="687c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">中国联通数码科技是中国联通的子公司，中国联通是全球领先的电信运营商，截至2021年拥有超过3.1亿用户。</p><p id="1bb3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">公司整合了中国联通的云计算、大数据、物联网、人工智能、区块链、安全等能力，涉及智慧城市、工业互联网、生态保护、文化旅游等领域。</p><p id="1aef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">联通数码科技积累了大量的行业标杆案例，成功地为客户提供了多样化、专业化的产品和服务。</p><h2 id="ddad" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">背景</h2><p id="bb39" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">近年来，在联通数码科技的帮助下，数十个服务热线平台已经开通，旨在改善企业和政府服务。</p><p id="8422" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务热线的特点是高并发、大数据量。每次我们拨打热线，都会生成一个工作订单记录。疫情期间一条热线的业务量比以往翻了几番。</p><p id="9593" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在政府或应急服务热线工单模块中，为满足海量数据和高稳定性的业务需求，联通数码科技采用<a class="ae jd" href="https://shardingsphere.apache.org" rel="noopener ugc nofollow" target="_blank">分片域</a>进行工单信息的分片和存储。</p><h2 id="eb31" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">业务挑战</h2><p id="fb66" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">政府服务热线是政府与企业和公众互动的主要渠道。它通过一个电话号码为公众提供24/7的服务。</p><p id="7f57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了处理工单，还涉及话务、Wiki、语音聊天等服务。</p><p id="1c1f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在系统规划阶段，数据库层是业务系统的基石，因此技术选择过程至关重要。系统稳定性是硬指标，其次是性能，直接影响热线的服务能力。</p><p id="c60c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">同时，它应该允许容易的维护和管理，并促进系统升级和后端维护。</p><p id="39a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热线服务对数据库架构选择提出了以下要求:</p><ul class=""><li id="8832" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">成熟和稳定</li><li id="b790" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">高性能</li><li id="63d4" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">易于维护</li><li id="a45f" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated">业务代码的低耦合</li></ul><h2 id="e0b8" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">联通数码科技为什么选择ShardingSphere？</h2><p id="e747" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">技术团队从稳定性、特性、访问方式、产品性能等方面进行了多轮研究和测试，最终选择了“ShardingSphere + <a class="ae jd" href="https://www.mysql.com/" rel="noopener ugc nofollow" target="_blank">、MySQL </a>”分布式数据库解决方案。</p><ul class=""><li id="6866" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">高级概念</strong></li></ul><p id="e3d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">越来越多的应用场景加剧了数据库碎片化。<a class="ae jd" href="https://faun.pub/whats-the-database-plus-concepand-what-challenges-can-it-solve-715920ba65aa" rel="noopener ugc nofollow" target="_blank"> Database Plus </a>旨在碎片化的异构数据库之上构建一个生态系统，并为数据库提供增强功能。</p><p id="17a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，它可以防止数据库绑定，实现独立控制，向原始数据库添加更多功能，并提高数据基础架构的整体功能上限。</p><ul class=""><li id="7622" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">成熟与稳定</strong></li></ul><p id="dc8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ShardingSphere项目始于2016年。经过多年的R&amp;D和迭代，该项目已经得到了完善，并在多个互联网场景中证明了其稳定性、成熟度和可靠性。</p><ul class=""><li id="4ba6" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">综合特性</strong></li></ul><p id="b746" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了分片功能，ShardingSphere还支持数据加密和解密以及影子数据库，这些也是技术团队的评估指标。</p><p id="6e51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安全和压力测试的场景需求可以通过一组技术栈来满足。ShardingSphere的功能为热线系统的构建和架构扩展提供了更好的支持。</p><ul class=""><li id="5427" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">高兼容性/易于访问</strong></li></ul><p id="814c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ShardingSphere与MySQL协议兼容，支持多种语法。在开发过程中，几乎不需要担心SQL的访问，因为它真的很方便。</p><ul class=""><li id="e024" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">高性能</strong></li></ul><p id="f38d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热线占线时，数千名值班话务员在线。工单记录包括数千万条记录，这就产生了一定的性能需求。</p><p id="1bb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">ShardingSphere-JDBC定位为轻量级Java框架，具有理想的压力测试结果和数据，能够满足政府系统服务能力的要求。</p><ul class=""><li id="5325" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">简化操作&amp;维护</strong></li></ul><p id="e95a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基于JDBC的高性能，ShardingSphere还提供了一个对运营团队友好的代理，可以使用通用客户端直接访问。</p><p id="6ed5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了上述五个关键考虑因素的权衡之外，还考虑了其他数据库中间件产品。下表显示了ShardingSphere和<a class="ae jd" href="http://mycat.sourceforge.net" rel="noopener ugc nofollow" target="_blank"> MyCat </a>之间的比较。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/b4e35b87b7f3bf6bdfb97c0e9e1a736f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EVpEQPtZu3olUOH_ASeGTw.png"/></div></div></figure><h2 id="e482" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">解决方法</h2><p id="d868" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">由于“ShardingSphere+MySQL”确保了稳定性、易用性和终极性能，该配置已被复制并用于联通数码科技的许多政府和企业服务热线项目中。</p><ul class=""><li id="a9c1" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">部署模式</strong></li></ul><p id="3471" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://shardingsphere.apache.org/document/current/en/overview/#shardingsphere-jdbc" rel="noopener ugc nofollow" target="_blank">分片球-JDBC </a>和<a class="ae jd" href="https://shardingsphere.apache.org/document/current/en/quick-start/shardingsphere-proxy-quick-start/" rel="noopener ugc nofollow" target="_blank">分片球-代理</a>的结合确保了系统的性能和可维护性。</p><ul class=""><li id="c57a" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">分片密钥/分片算法</strong></li></ul><p id="cbec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热线服务的工单表比较大，逻辑简单好用。因此，选择工单ID作为分片键，通过哈希算法分发数据。</p><ul class=""><li id="e88f" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">迁移</strong></li></ul><p id="53a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">新项目不涉及历史数据，不需要考虑数据迁移过程，上线就可以直接使用。</p><ul class=""><li id="714a" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">实施流程</strong></li></ul><p id="c12c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于技术方案的综合评估和多份方案，实施过程是顺利的。</p><ul class=""><li id="5d93" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">系统架构</strong></li></ul><p id="80b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热线服务模块采用微服务架构</p><p id="6972" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">热线服务的业务模块采用微服务架构，节点从十个到几十个不等，视具体省市规模而定。在数据库层，物理机用于部署三节点MHA。每个热线系统一般需要四套MHA。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es le"><img src="../Images/664e9757b47b4f6da5fe493ea83dc5c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KtRaiZcIytsU5tK8"/></div></div></figure><h2 id="43c7" class="je jf hi bd jg jh ji jj jk jl jm jn jo iq jp jq jr iu js jt ju iy jv jw jx jy bi translated">优势</h2><blockquote class="lf lg lh"><p id="f187" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated">商业</p></blockquote><ul class=""><li id="46ae" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">支持客户端模式。</strong>最大程度保证政府热线的性能要求。</li><li id="b936" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated"><strong class="ih hj">系统稳定性</strong>为业务连续性提供强有力的支持。</li></ul><blockquote class="lf lg lh"><p id="86ac" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj"> R &amp; D </strong></p></blockquote><ul class=""><li id="b97c" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated"><strong class="ih hj">兼容性极佳</strong>。兼容主流数据库SQL语法，对接后即可使用。</li><li id="a886" class="ke kf hi ih b ii kn im ko iq kp iu kq iy kr jc kj kk kl km bi translated"><strong class="ih hj">综合特征</strong>。支持读写拆分、数据加密、全链路压力测试，系统扩展性强。</li></ul><blockquote class="lf lg lh"><p id="9fae" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj"> OPS </strong></p></blockquote><ul class=""><li id="36cf" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">支持代理模式，为Ops团队提供<strong class="ih hj">易维护</strong>。</li></ul><blockquote class="lf lg lh"><p id="4404" class="if ig li ih b ii ij ik il im in io ip lj ir is it lk iv iw ix ll iz ja jb jc hb bi translated"><strong class="ih hj">技术选择</strong></p></blockquote><ul class=""><li id="6eef" class="ke kf hi ih b ii ij im in iq kg iu kh iy ki jc kj kk kl km bi translated">它防止了数据库绑定，并为将来的升级提供了足够的灵活性。</li></ul><h1 id="a9b5" class="lm jf hi bd jg ln lo lp jk lq lr ls jo lt lu lv jr lw lx ly ju lz ma mb jx mc bi translated">结论</h1><p id="d5ce" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated">中国联通数码科技的热线服务案例验证了ShardingSphere支持政府服务场景的能力，进一步证明了ShardingSphere可以应用于任何行业。</p><h1 id="55da" class="lm jf hi bd jg ln lo lp jk lq lr ls jo lt lu lv jr lw lx ly ju lz ma mb jx mc bi translated">项目链接:</h1><p id="16d3" class="pw-post-body-paragraph if ig hi ih b ii jz ik il im ka io ip iq kb is it iu kc iw ix iy kd ja jb jc hb bi translated"><a class="ae jd" href="https://github.com/apache/shardingsphere/issues?page=1&amp;q=is%3Aopen+is%3Aissue+label%3A%22project%3A+OpenForce+2022%22" rel="noopener ugc nofollow" target="_blank"> ShardingSphere Github </a></p><p id="dffe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://twitter.com/ShardingSphere" rel="noopener ugc nofollow" target="_blank"> ShardingSphere Twitter </a></p><p id="84d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://join.slack.com/t/apacheshardingsphere/shared_invite/zt-sbdde7ie-SjDqo9~I4rYcR18bq0SYTg" rel="noopener ugc nofollow" target="_blank">切割球松弛度</a></p><p id="9ebe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://shardingsphere.apache.org/community/cn/contribute/" rel="noopener ugc nofollow" target="_blank">投稿指南</a></p></div></div>    
</body>
</html>