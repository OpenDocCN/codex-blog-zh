<html>
<head>
<title>Open Source Big Data Studio Application Development: Apache DolphinScheduler + Notebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开源大数据工作室应用开发:Apache dolphin scheduler+Notebook</h1>
<blockquote>原文：<a href="https://medium.com/codex/open-source-big-data-studio-application-development-apache-dolphinscheduler-notebook-101bbe2e952e?source=collection_archive---------9-----------------------#2022-07-21">https://medium.com/codex/open-source-big-data-studio-application-development-apache-dolphinscheduler-notebook-101bbe2e952e?source=collection_archive---------9-----------------------#2022-07-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/1e013812d632233d946f3292c1db1c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9gpOeUDDNizAc_-G"/></div></div></figure><blockquote class="iq ir is"><p id="1653" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我今天分享的话题是如何搭建一个<strong class="iw hj"> <em class="hi">大数据开发工作室。</em> </strong>我们将使用<strong class="iw hj"><em class="hi">Apache dolphin scheduler</em></strong>和两款开源的交互笔记本<strong class="iw hj"> <em class="hi"> Apache Zeppelin </em> </strong>和<strong class="iw hj"> <em class="hi"> Jupyter </em> </strong>组装成一个<strong class="iw hj"><em class="hi"/></strong>大数据开发工作室，提供在线开发/调试能力，避免因开发环境不一致而导致的不可预知问题，提升效率，显著改善大数据任务开发和调度的体验。</p></blockquote><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es js"><img src="../Images/8117a42ad1e1dd5f79f2c5e22267db1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*docLYNBje-H2_keU"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">高楚锋</figcaption></figure><p id="e6e5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">Github ID: EricGao888 </p><p id="2f0e" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj">阿里云基础平台开发工程师</strong></p><p id="b6e4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">我获得了上海交通大学信息工程学士学位，普渡大学MSCS学位，目前在阿里云EMR数据开发团队工作。作为Apache Dolphin Scheduler、Apache Zeppelin和Apache Airflow的撰稿人，我对提高大数据开发的效率有着浓厚的兴趣。非常欢迎您在<a class="ae ke" href="https://github.com/EricGao888" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">https://github.com/EricGao888</strong></a>的<strong class="iw hj"> GitHub上关注我</strong></p><p id="a736" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">今天的演示将重点关注大数据开发的用户体验，包括以下主题:</p><ul class=""><li id="a203" class="kf kg hi iw b ix iy jb jc kb kh kc ki kd kj jr kk kl km kn bi translated">大数据开发中的难题</li><li id="d6f3" class="kf kg hi iw b ix ko jb kp kb kq kc kr kd ks jr kk kl km kn bi translated">DS+Zeppelin &amp; Jupyter笔记本</li><li id="fbb8" class="kf kg hi iw b ix ko jb kp kb kq kc kr kd ks jr kk kl km kn bi translated">Studio的云部署解决方案和体验优化</li><li id="a49f" class="kf kg hi iw b ix ko jb kp kb kq kc kr kd ks jr kk kl km kn bi translated">演示</li></ul><h1 id="5875" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">大数据开发中的01个难题</h1><p id="d32e" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">对于大数据开发工程师来说，开发过程中有很多硬骨头要啃。我们不想浪费太多时间来配置环境。我们的理想环境是DevOps团队搭建了一个准备好的平台，大数据工程师可以直接使用编辑器或笔记本开发大数据任务，比如Hive、Spark、Flink等。目前，许多大数据工程师更喜欢使用本地IDE进行开发和调试，这可能导致开发环境与在线环境不一致，损害开发效率。此外，如果调度的工作流在prod环境下运行时不一致导致一些bug，将会给公司带来巨大的损失。</p><p id="010e" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">针对开发环境不一致、作业配置复杂繁琐、开发效率低、代码迭代慢、在线行为不可预测等问题，我们提出了相应的解决方案。那就是用两个或两个以上的大数据开源工具组装一个大数据开发工作室。我们使用Apache DolphinScheduler，它为调度提供了一个方便的Web UI，两个交互式笔记本——Apache Zeppelin和Jupyter用于任务开发和调试。Zeppelin广泛用于开发大数据任务，Jupyter非常适合人工智能或其他python相关的任务。</p><p id="d38d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">这个解决方案是完全开源的，自然是松耦合的。我们通过任务插件将DolphinScheduler与笔记本整合，构建了大数据开发工作室。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/f1fe49bb08fcf80399f4cbf64b5ed7fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OXPoz0LZk-MitC5R"/></div></div></figure><p id="3af2" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">DS任务插件，连接DS和笔记本的桥梁</p><h1 id="8afa" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">02 DS+Zeppelin &amp; Jupyter笔记本</h1><h2 id="4513" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">01齐柏林飞艇简介</h2><p id="3261" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">接下来我简单介绍一下齐柏林和朱庇特。Zeppelin是一款面向大数据开发的笔记本，可以提供良好的交互开发体验，以及快速反馈的在线调试能力。Zeppelin拥有丰富的引擎支持，包括Hive、Spark、Flink等。当在Zeppelin中运行交互式流Flink作业时，用户可以动态地看到数据流。稍后，我会给出一些关于DS Zeppelin任务插件的详细信息，包括它是如何实现的，以及它如何简化我们的工作。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/87fbbb26e0d7b4a4bf818d9fb1801264.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LwfZoTsOj9Ep_vP7"/></div></div></figure><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mm"><img src="../Images/e87d7d5550deb72831c84b8d02bc45b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gkw4bI0RJ8KdrlgU"/></div></div></figure><p id="6924" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">上图左侧是Zeppelin接口。最小的执行单位是段落，也叫单元。每个单元都可以交互调试，并输出相应的结果。同时，Zeppelin还将提供强大的BI功能，即大数据开发完成后，可以使用BI功能生成各种类型的图表。</p><h1 id="f3f2" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">02齐柏林建筑</h1><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/65d234fe527ec798667281c3efad78e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CnTQL4Y4dyt-o4oy"/></div></div></figure><p id="b3c8" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">我们可以看到在前端，有一个笔记本向Zeppelin服务器发送请求，Zeppelin服务器和解释器之间会有一个双向的交互。此外，Zeppelin的解释器是可扩展的。</p><h2 id="8201" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">丰富的引擎支持</h2><p id="af31" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">Zeppelin拥有丰富的引擎支持，包括Spark、JDBC (PostgreSQL、MYSQL、MariaDB、Hive)、Flink、Python、Shell、HDFS、Hbase等。如果你是一个Zeppelin用户，你只需要开发自己的Zeppelin作业，然后使用DolphinScheduler Zeppelin插件一键调度它们，这将大大降低开发成本。</p><h2 id="2366" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">03 DS齐柏林飞船任务插件</h2><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/b1b5f6312e2ca1bd65bbbb2a9fd4114a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bj37H5Ee5gr7-_uD"/></div></div></figure><p id="b813" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">这是DS Zeppelin的网页界面。在工作流定义页面中，我们可以拖动Zeppelin任务插件缩略图来创建一个Zeppelin任务实例。我们只需要填写齐柏林音符ID和齐柏林休息端点。如果你想安排一个特定的段落而不是整个笔记，你可以填充paragraphId，DS只会触发那个段落。参数被映射到Zeppelin的<strong class="iw hj"> <em class="iv">动态形式</em> </strong>，您可以使用它来传入动态参数。此外，还支持DS内置的时间相关参数。</p><h2 id="fab3" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">04 Jypyter笔记本简介</h2><p id="3b40" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">开发者可能比Zeppelin更熟悉Jypyter Notebook，它拥有非常丰富的开源生态系统和庞大的用户群，主要面向AI工程师、数据科学家和数据分析师。这个工具可能很多人都用过。下面是Jupyter注的截图:</p><p id="06e4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">通过DS Jupyter任务插件，我们在这两个开源项目之间架起了一座桥梁，加强了它们之间的联系。我还会介绍DS Jupyter任务插件(papermill)的一些实现，配置，参数化，分布式环境下的python依赖管理等。</p><h2 id="50c9" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">05 Jupyter建筑和造纸厂</h2><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e4161b7ec9ec564744f9075e9f19b4e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-BDANEGeYudMuVhk"/></div></div></figure><p id="6306" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">我们使用DS Jupyter任务插件中的<strong class="iw hj"> <em class="iv"> Papermill </em> </strong>来执行<strong class="iw hj"> <em class="iv"> Jypyter </em> </strong>注意。</p><p id="5e70" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">架构方面，前端也是笔记本UI，类似于Zeppelin，后端是笔记本服务器，取这些笔记，传给内核执行，最后返回结果给用户。</p><p id="f49f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="iv"> Papermill </em> </strong>独立于<strong class="iw hj"> <em class="iv"> Jupyter Lab </em> </strong>或<strong class="iw hj"><em class="iv">Jupyter Notebook</em></strong>，从而不需要依赖<strong class="iw hj"> <em class="iv"> Jupyter </em> </strong>服务器，即使你没有<strong class="iw hj"> <em class="iv"> Jupyter </em> </strong>服务器在后台运行。你可以扩展你的<strong class="iw hj"> <em class="iv"> Papermill </em> </strong>来执行位于你远程存储的笔记(比如<strong class="iw hj"> <em class="iv"> AWS S3、阿里云OSS、Azure Blob等)。</em> </strong>)</p><h2 id="4a43" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">06 DS Jupyter任务插件</h2><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/492ec2f5062f7aba1dba3ec193d610e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MPF-eBbWdSgCbMd5"/></div></div></figure><p id="8092" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">如图，你需要填写的是<strong class="iw hj"> <em class="iv">康达环境名称</em></strong><strong class="iw hj"><em class="iv">笔记本输入路径</em></strong><strong class="iw hj"><em class="iv">输出路径</em> </strong>。如果便笺位于您的本地系统中，只需填写本地路径。如果您的笔记位于像<strong class="iw hj"><em class="iv">【S3】</em></strong>这样的远程存储器中，您需要填写相应的对象键。</p><p id="e1e0" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="iv"> Jupyter </em> </strong>任务插件支持参数化。您可以为<strong class="iw hj"> <em class="iv">笔记本</em> </strong>中的<strong class="iw hj"> <em class="iv">单元格</em> </strong>设置不同的输入参数，运行批量调度作业，并动态传入参数。它将使用您传入的不同参数评估源模板，并批量生成和执行多个目标注释。</p><h2 id="5e5e" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">07分布式环境中的Python依赖管理</h2><p id="722b" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">为了在分布式环境中管理<strong class="iw hj"> <em class="iv"> Jupyter </em> </strong>任务的python依赖，DS <strong class="iw hj"> <em class="iv"> Jupyter </em> </strong>任务插件为用户提供了几个选项:</p><p id="8dd1" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="iv">第一种方法:</em> </strong>手动/通过shell任务安装conda环境，并在创建jupyter任务时切换相应的conda名称。</p><p id="1138" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="iv">第二种方法:</em> </strong>使用打包的conda环境tarball——使用<strong class="iw hj"> <em class="iv"> conda pack </em> </strong>生成虚拟环境tarball，并将打包的环境上传到<strong class="iw hj"><em class="iv"/></strong>资源中心，创建jupyter任务时切换打包的conda环境名称。</p><p id="3884" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="iv">第三种方法:</em> </strong>从<strong class="iw hj"><em class="iv">requirements . txt</em></strong>—上传<strong class="iw hj"><em class="iv">requirements . txt</em></strong>到<strong class="iw hj">资源中心</strong>，切换<strong class="iw hj"> <em class="iv">需求</em> </strong>文件，在创建<strong class="iw hj"> <em class="iv"> jupyter </em> </strong>任务时构造不同的依赖关系。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mn"><img src="../Images/3b0bf97af1993b6021d4ced6754f6515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Pfp5cja1e_r_TAFd"/></div></div></figure><p id="180b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">上图显示了如何管理<strong class="iw hj"> <em class="iv"> jupyter </em> </strong>任务的python依赖关系。你可以选择这个tarball或者requirements.txt文件，<strong class="iw hj"> <em class="iv"> jupyter </em> </strong>任务插件会根据后缀自动检测并处理你选择的依赖管理方式。它使您能够专注于任务，并将您从复杂的环境管理中解放出来。</p><h1 id="e59e" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">03云解决方案和优化</h1><h2 id="0a2c" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">01云之解<strong class="ak"> <em class="mo">工作室</em> </strong></h2><p id="44f1" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">因为Studio有两三个组件，DolphinScheduler和两个笔记本，所以我们可以使用LDAP &amp; Apache Knox组合进行身份验证和SSO。</p><p id="9751" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">在云中部署<strong class="iw hj"> <em class="iv"> Studio </em> </strong>时，可能会遇到将任务调度到多个集群的场景。尽管Dolphin Scheduler本身能够进行环境管理，但是您仍然需要执行一些定制开发。您可以构建一个工具，将目标集群上的libs/confs与您的工作室所在的环境同步。另一种方法是为每个集群设置一个Zeppelin实例，并通过Zeppelin任务插件连接到不同的Zeppelin服务器。</p><p id="83c7" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">对于元数据持久性，您可以使用本地MySQL、PostgreSQL或云中的一些分布式数据库。</p><p id="8c72" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="iv">资源中心</em> </strong>可以连接到远程对象存储器。DolphinScheduler自带对HDFS和一些实现<strong class="iw hj"> <em class="iv"> s3fs </em> </strong>的对象存储系统的支持，比如<strong class="iw hj"> <em class="iv"> AWS S3 </em> </strong>和<strong class="iw hj"> <em class="iv">阿里云OSS </em> </strong>，这可以确保你所有的资源在云中都是可管理的，避免集群被拆除时的资源损失。</p><p id="4ba6" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">日志也可以存储在远程对象存储中，但是这个特性仍然在社区中讨论。目前还没有实现将接口抽象为连接到云中的远程对象存储(比如s3或oss)。目前这个功能只能自己搭建。</p><p id="3ee0" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">对于监视和警戒来说，普罗米修斯和格拉夫纳是<strong class="iw hj"> <em class="iv">工作室</em> </strong>的绝佳搭档。这两个组件都是开源工具。DS社区目前正在制定指标，我们已经完成了基础工作。现在中英文文档都有了，查看这里:<a class="ae ke" href="https://dolphinscheduler.apache.org/zh-cn/docs/dev/user_doc/guide/metrics/metrics.html" rel="noopener ugc nofollow" target="_blank">https://dolphin scheduler . Apache . org/zh-cn/docs/dev/user _ doc/guide/metrics/metrics . html</a>了解更多详情。</p><p id="8b6d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">当然，除了自己在集群模式下部署<strong class="iw hj"> <em class="iv"> Studio </em> </strong>之外，你也可以考虑使用云提供商的解决方案，比如<strong class="iw hj"> <em class="iv"> AWS </em> </strong>或者<strong class="iw hj"> <em class="iv">阿里云的EMR Studio </em> </strong>。</p><p id="8386" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">### 02云解决方案架构<strong class="iw hj"> <em class="iv">工作室</em> </strong></p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/b243428fc0547241a8766c54943c48b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iBUDx0Md1TMPsgNe"/></div></div></figure><p id="081a" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">您可以在集群中部署DolphinScheduler和Zeppelin，仅用于数据开发和调度。然后，将工作流和任务调度到计算集群。那些集群应该和你的<strong class="iw hj"> <em class="iv">工作室</em> </strong>集群部署在同一个<strong class="iw hj"> <em class="iv"> VPC </em> </strong>下。如果没有，就需要花额外的力气连接网络。</p><p id="541b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">上图显示了<strong class="iw hj"> <em class="iv"> Zeppelin </em> </strong>中的一个定制功能，使用户能够选择和绑定不同的计算集群来执行笔记。</p><h2 id="b677" class="lx ku hi bd kv ly lz ma kz mb mc md ld kb me mf lh kc mg mh ll kd mi mj lp mk bi translated">03优化</h2><p id="f9bf" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">这种解决方案并不完美，还有改进的空间，因为Apache Zeppelin和Jupyter这两种笔记本最初都不是为生产中的大规模调度而设计的。因此，我们需要增加笔记本的稳定性。例如，一个潜在的改进是在UI上添加一个锁。如果某个便笺正在计划中，则应将其锁定，不允许用户对其进行修改。Zeppelin任务插件的另一个改进是为执行生成目标笔记的副本，并在完成后删除副本。通过这种方式，我们可以避免在日程安排过程中由于修改注释而导致的不一致。</p><p id="e15b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">另一方面，我们可以降低从DS触发注释到解释器执行注释的复杂性，以减少意外的错误。</p><p id="671b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">在DS方面，我们可以改进任务UI以获得更好的用户体验。例如，在用户填写了笔记本ID和段落ID之后，可以自动生成一个链接，一旦用户被点击，就可以将用户重定向到相应的笔记本页面。在这种情况下，当开发或调试任务时，用户在两个ui之间切换将更加方便。</p><h1 id="94a5" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">04演示分享</h1><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mp"><img src="../Images/43d9b95fc0ac2a6515a559f2ccca37ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y1jYYAbczaftNFvl"/></div></div></figure><p id="ed29" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">首先，让我们来看看一个简单的齐柏林音符。这是一个ETL工作，第一段是一个markdown，让我们运行它。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mq"><img src="../Images/930371ec54d47fad783f9327f2a00c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8_cwFBd4MmKvTyYZ"/></div></div></figure><p id="ba51" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">然后，我们生成一些数据，并将其传递到Hive表中。我们可以看到操作有求必应，交互方便，方便我们调试。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mr"><img src="../Images/58a29724ab4bc0354b10a879c19e59ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pbSjtNVJEPF-cDQk"/></div></div></figure><p id="9145" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">接下来，我们可以将生成的<strong class="iw hj"> <em class="iv"> CSV </em> </strong>转换成<strong class="iw hj"> <em class="iv">拼花</em> </strong>格式。这一步可能不稳定，因为环境是为演示而临时构建的。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ms"><img src="../Images/b80426a8a0ae1525e5dc29af516bdb9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5i87t_dz6zbwSAt3"/></div></div></figure><p id="efb0" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">转换完成后，我们可以在这里查询新数据。它刺激了ETL工作的开发过程。</p><p id="05d7" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">既然我们可以通过一个交互式的笔记本轻松地完成这个ETL任务的开发阶段，那么我们如何在DolphinScheduler中只需点击一下鼠标就可以安排它呢？</p><p id="9d76" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">让我们在DS上创建一个演示项目。工作流定义—创建工作流。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mt"><img src="../Images/1840a774766e8da66f7805732da29c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oML9m8y7LKExGC84"/></div></div></figure><p id="d48a" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">这里我们拖动齐柏林飞艇任务。我们只需要从Zeppelin获取目标笔记id，它是笔记页面URL的最后一段。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mu"><img src="../Images/de4a4c293fe9921da92ffd2f16841726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ys_aZAir3tA9Gn1J"/></div></div></figure><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mv"><img src="../Images/de3d9ab21bad63a82bcb280a72e8ffdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*68bb5gsictxapwH4"/></div></div></figure><p id="1dc8" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">然后我们可以在Zeppelin和DS端查看任务的运行进度。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es mw"><img src="../Images/61733a9d9d634d80d1f9ff08a97a2739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/0*W78UpTFhJqo_sNev"/></div></figure><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es mx"><img src="../Images/5d24a16ab99bacd35b6963b36082ebf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/0*iXhUV8bWYDDStaPx"/></div></figure><p id="e3ac" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">这里是<strong class="iw hj"> <em class="iv"> Jupyter实验室</em> </strong>。启动后，我们可以看到一个笔记本用户界面。</p><p id="3594" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">在本笔记中，我们从远程服务器(https://openweathermap.org/)请求一些天气数据，对其进行分析，绘制温度和降水趋势图，最终生成天气预报报告。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div class="er es my"><img src="../Images/3dd0a6d889cf892bea015a28aed94402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/0*FU8eh_g767WxuDd9"/></div></figure><p id="dc1d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">在这里，我们可以定义一些参数。例如，如果我想同时生成多个城市的天气预报，我们可以从这里传入参数。当在DS上调度它时，我们可以在一个工作流中定义多个Jupyter任务，然后传入不同的参数。这样我们就可以同时批量生成不同城市的天气预报。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mz"><img src="../Images/3a6ac1e445b1c09e5a1e002c8e6150a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qKQRVL2YnnVrDasy"/></div></div></figure><p id="b143" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">对于参数化，这个单元格用<strong class="iw hj"> <em class="iv">参数</em> </strong>标记，我们可以通过<strong class="iw hj"> <em class="iv"> Papermill </em> </strong>将参数传入其中。</p><figure class="jt ju jv jw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/2aeb8a52ee1c6659b568c5897d0c05c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*82WAgqs9iWn46scN"/></div></div></figure><p id="f118" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">这是我们刚刚生成的HTML文件。对了，<strong class="iw hj"> <em class="iv"> Jypyter </em> </strong>任务插件的一个好处就是，即使你本地的jupyter-lab死了，也不会影响调度，因为<strong class="iw hj"> <em class="iv"> papermill </em> </strong>在执行notes的时候并不依赖于jupyter-lab。</p><p id="c591" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">感谢大家的聆听，今天的分享到此结束。</p><h1 id="4824" class="kt ku hi bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">加入社区</h1><p id="cee6" class="pw-post-body-paragraph it iu hi iw b ix lr iz ja jb ls jd je kb lt jh ji kc lu jl jm kd lv jp jq jr hb bi translated">参与DolphinScheduler社区并为其做出贡献的方式有很多，包括:</p><p id="4a4d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">文件、翻译、Q &amp; A、测试、代码、文章、主题演讲等。</p><p id="626c" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">我们假设第一个PR(文档、代码)是简单的，应该用来熟悉提交过程和社区协作风格。</p><p id="0b05" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">所以社区整理了以下适合新手的问题列表:<a class="ae ke" href="https://github.com/apache/dolphinscheduler/issues/5689" rel="noopener ugc nofollow" target="_blank">https://github.com/apache/dolphinscheduler/issues/5689</a></p><p id="f549" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">非新手问题列表:<a class="ae ke" href="https://github.com/apache/dolphinscheduler/issues?q=is%3Aopen+is%3Aissue+label%3A%22volunteer+wanted%22" rel="noopener ugc nofollow" target="_blank">https://github.com/apache/dolphinscheduler/issues?q = is % 3A open+is % 3A issue+label % 3A % 22 volunteer+wanted % 22</a></p><p id="c267" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">如何参与投稿:<a class="ae ke" href="https://dolphinscheduler.apache.org/en-us/community/development/contribute.html" rel="noopener ugc nofollow" target="_blank">https://dolphin scheduler . Apache . org/en-us/community/development/contribute . html</a></p><p id="ac7b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj"> GitHub代码库:</strong>T26】https://github.com/apache/dolphinscheduler</p><p id="9fc5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj">官网</strong>:https://dolphin scheduler . Apache . org/</p><p id="506d" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">:dev@dolphinscheduler@apache.org的邮件列表</p><p id="95a6" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj">推特</strong>:@海豚时间表</p><p id="08c8" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">https://www.youtube.com/channel/UCmrPmeE7dVqo8DYhSLHa0vA</p><p id="fb51" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">松弛:https://s.apache.org/dolphinscheduler-slack</p><p id="e5ee" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated"><strong class="iw hj">投稿指南:</strong>https://dolphin scheduler . Apache . org/en-us/community/index . html</p><p id="0d06" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je kb jg jh ji kc jk jl jm kd jo jp jq jr hb bi translated">你的项目之星很重要，不要犹豫为Apache DolphinScheduler亮出一颗星:<a class="ae ke" href="https://github.com/apache/dolphinscheduler" rel="noopener ugc nofollow" target="_blank">https://github.com/apache/dolphinscheduler</a>❤️</p></div></div>    
</body>
</html>