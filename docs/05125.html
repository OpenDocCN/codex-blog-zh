<html>
<head>
<title>Introduction to Continuous Integration and Continuous Delivery with Python Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python Flask持续集成和持续交付简介</h1>
<blockquote>原文：<a href="https://medium.com/codex/introduction-to-continuous-integration-and-continuous-delivery-with-python-flask-a2fa1d48db6c?source=collection_archive---------5-----------------------#2022-02-02">https://medium.com/codex/introduction-to-continuous-integration-and-continuous-delivery-with-python-flask-a2fa1d48db6c?source=collection_archive---------5-----------------------#2022-02-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1dcc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS Cloud9、AWS EC2、Makefile、GitHub Action、谷歌云应用引擎、谷歌云构建</p><p id="9bd8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你好。在这个故事中，我们将尝试做一个关于CI &amp; CD的介绍。我们将介绍CI和CD是什么，我们如何使用GitHub Action，它是什么，以及我们如何将Flask应用程序部署到Google Cloud App Engine。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/4efef8b2d0450d901447d67c521aeef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q8K-XMttUsmtqSn4km_t_g.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">由<a class="ae jt" href="https://unsplash.com/@billy_huy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">比利·胡恩</a>在<a class="ae jt" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b086" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将跟随我创建的回购来体验这个故事的主题。您可以使用下面的链接访问回购。</p><div class="ju jv ez fb jw jx"><a href="https://github.com/mebaysan/IntroductionToCloudComputingCI_CD" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hj fi z dy kc ea eb kd ed ef hh bi translated">GitHub-mebaysan/IntroductionToCloudComputingCI _ CD:我创建这个repo是为了完成给定的任务…</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">我创建这个repo是为了完成杜克大学的Noah Gift交给我的构建云计算解决方案的任务…</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">github.com</p></div></div><div class="kg l"><div class="kh l ki kj kk kg kl jn jx"/></div></div></a></div><p id="4018" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们将使用AWS的Cloud9服务运行并查看我们代码的输出。别担心，我们不会编码。我已经为你准备好了一切。我们将使用Cloud9来查看我们从<code class="du km kn ko kp b">Makefile</code>等获取的一些输出。你可以在下面看到我刚刚为这个故事创造的环境。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/985505036f77a5ece4ab6d9585806372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6rikAHekcgNmUA6goxNqbw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><h1 id="7510" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">关键术语</h1><p id="045f" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">在我们开始编码之前，我将写一些关键术语。</p><h2 id="b683" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">生成文件</h2><p id="90e1" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们可以说这个文件是执行我们代码的一个诀窍。Makefile可以在基于Linux的系统上工作。它简化了必要的步骤。</p><h2 id="3981" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">连续累计</h2><p id="f0d1" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">它提供了以下内容:</p><ul class=""><li id="bfaa" class="mi mj hi ih b ii ij im in iq mk iu ml iy mm jc mn mo mp mq bi translated">我们可以知道我们的软件是否在工作。事实真相</li><li id="758f" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">它节省了我们的时间</li></ul><h2 id="8ace" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">连续交货</h2><p id="ba2c" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们可以提供始终处于可部署状态的代码。</p><h2 id="f2fa" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">GitHub操作</h2><p id="bd1f" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们可以通过使用GitHub动作来自动化一些过程。我们使用YAML文件来创建动作。</p><h2 id="4d66" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">云9(自动气象站)</h2><p id="1dd4" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">Cloud9是一个基于云的IDE。</p><h2 id="b0f2" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">应用引擎(谷歌云平台)</h2><p id="20dd" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们可以通过使用该服务来部署我们的web应用程序。</p><h2 id="c758" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">云构建(谷歌云平台)</h2><p id="d504" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们可以通过使用该服务提供持续交付，并在我们项目的GitHub repos上创建事件。当分支上发生一些动作时，我们可以自动拉出最新版本的代码。</p><h1 id="1c31" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">准备环境</h1><p id="6dd5" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我为此创建了一个新的Cloud9服务实例。我没有改变默认设置。它自动为我创建了一个新的EC2服务实例。我们将在这个EC2上工作，并在Cloud9服务上编码。我连接到了我的Cloud9实例。</p></div><div class="ab cl mw mx gp my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="hb hc hd he hf"><p id="a4ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将执行<code class="du km kn ko kp b">ssh-keygen -t rsa</code>来获得一个ssh密钥。我将把这个密钥保存到我的GitHub帐户中，以便从环境中直接访问我的GitHub。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nd"><img src="../Images/310b0ff09e1c80456f38d8bcfe85cfd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kx4G1ZLf4gsBme_76txDsg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="4cb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我将把我的公钥复制到我的GitHub中。我可以用这个命令<code class="du km kn ko kp b">cat /home/ec2-user/.ssh/id_rsa.pub</code>得到。文件路径可能因您的环境而异。不用担心共享这个公钥。它没有私钥重要。我把这个公钥加到了我的GitHub账户里。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/be1ff116d14e4eaad4c7594e2c33e3d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Hta-PncIga73VZqgqBe2g.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="4281" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将把回购拉到我的Cloud9环境中。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="a714" class="lu ks hi kp b fi ni nj l nk nl">git clone <a class="ae jt" href="https://github.com/mebaysan/IntroductionToCloudComputingCI_CD.git" rel="noopener ugc nofollow" target="_blank">https://github.com/mebaysan/IntroductionToCloudComputingCI_CD.git</a></span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nm"><img src="../Images/d04d1c00d45fb8c1bd063b805699db90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GERgx_ipqX52fiXnX7d7Iw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="6211" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我需要创建一个虚拟环境。为此，我将在终端中执行下面的代码。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="5cbd" class="lu ks hi kp b fi ni nj l nk nl">cd IntroductionToCloudComputingCI_CD/</span><span id="37e3" class="lu ks hi kp b fi nn nj l nk nl">python3 -m virtualenv venv</span></pre><p id="feaa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过使用下面的代码来激活虚拟环境。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="5eee" class="lu ks hi kp b fi ni nj l nk nl">source venv/bin/activate</span></pre><p id="c5f9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经成功地在Cloud9上准备了我们的工作环境。现在我们可以用实例来解释关键术语。</p><h1 id="0bb4" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">带Makefile的配方</h1><p id="6abd" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">如上所述，我们可以说Makefile的“配方”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es no"><img src="../Images/d39497f011ad158c6fa163842ccdf78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*c-GLqf_EUfPsPrt0G09bEg.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="2639" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在Makefile中设置步骤，我们可以像这样轻松地使用它们<code class="du km kn ko kp b">make &lt;step_name&gt;</code>。</p><p id="e7a9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将在我们上面创建的虚拟环境中安装所有依赖项。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="07f7" class="lu ks hi kp b fi ni nj l nk nl">make install</span></pre><p id="7460" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">基本上，Makefile完成了这项工作；为每个步骤应用命令。如果您想确定它是否安装了软件包，您可以使用下面的命令进行检查。它将返回您的虚拟环境中所有已安装的软件包。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="a92c" class="lu ks hi kp b fi ni nj l nk nl">pip freeze</span></pre><h2 id="4e66" class="lu ks hi bd kt lv lw lx kx ly lz ma lb iq mb mc lf iu md me lj iy mf mg ln mh bi translated">EC2和安全组简介</h2><p id="f835" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">为了看到一个新的例子，我将执行这个:<code class="du km kn ko kp b">make run</code>。它将运行Flask应用程序。当你点击(在预览中打开)HTTP地址时，你会看到下面的结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/81e0542721f5891663e77c9a26a6ee26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ELUSQMQgSd0Zjq_aARIuQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="a207" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这种情况下，我们需要在我们的应用程序使用它的EC2实例上设置一个端口。我将创建一个新的安全组。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/87215a89c0375fafbeacf75ab27546c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXK_zGyEt53ZxVbHo4T_jQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">您可以从EC2服务页面访问此页面</figcaption></figure><p id="7504" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我创建了一个新角色“introductiontocicdgroup”并设置了8080端口。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/c8787f10196f89ceac4a34cd214c5d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L3mLZJz9B_LdSUw6LSW24w.png"/></div></div></figure><p id="c14f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们必须将这个新组添加到EC2实例的组中。我将转到EC2实例的详细信息页面，并更改安全组。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/ce7a0975334ea4cbc6f085a9906db60e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDSTjuuKk_s8bUAcaC1Wtg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">您可以使用“更改安全组”按钮。这就是“新EC2体验”。</figcaption></figure><p id="a8ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将重启我的Flask应用程序，并使用8080端口访问我的EC2实例的公共IP。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/0408e034674a65bb84e5945ccd8ccf54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mkwxydjvozIeC8bpVAohmQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片作者:http:// <publicip> :8080</publicip></figcaption></figure><h1 id="5f8c" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">与GitHub动作的持续集成</h1><p id="cbe2" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们说过CI让我们对代码有了深入的了解。我们可以使用GitHub动作来CI。您可以从GitHub repo的Actions部分创建新的操作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/c62d358a912b0b1f1a634a8bd7ff77fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EEVRgywda907YU2mjGO12A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="17fc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简而言之，当我们在GitHub上触发一个事件时，GitHub动作执行我们设置的步骤。例如，当我在主分支上推送最新的代码时，我希望看到pylint结果。我可以通过使用GitHub动作来实现。我们以YAML的方式设定行动。我们需要将这些文件放入repo中的<code class="du km kn ko kp b">.github/workflows/</code>。您可以通过使用<a class="ae jt" href="https://github.com/mebaysan/IntroductionToCloudComputingCI_CD/blob/main/.github/workflows/main.yaml" rel="noopener ugc nofollow" target="_blank">此链接</a>来访问示例动作文件。</p><p id="11ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在下面看到一个YAML行动文件的例子。它说，当我在主分支上推动更改时，它会自动应用这些步骤。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/a03fa469a153564455e3f3923054750c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ds1DhHDpK7n-ivf8cbOsg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="cc8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到所有的工作流程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/6c7c0114fbfb2879c71efeeb51304480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lhatjShGF25WliCaOqoJcQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="7e51" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以看到工作流程的细节。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/f477fe745930d08504c3dac9644b3a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GAwE-1M48OT89096oMN0-A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="61be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">长话短说，我们可以保持代码稳定。我们可以知道在什么情况下我们的代码通过了所有的测试？等等。</p><h1 id="97cf" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">将应用程序部署到GCP应用程序引擎</h1><p id="6e38" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们可以使用App Engine轻松部署我们的应用。我们将把我们的Flask应用程序部署到GCP。</p><p id="422c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，我要去<a class="ae jt" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a>。然后，我正在使用谷歌云壳创建一个新项目。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="ddac" class="lu ks hi kp b fi ni nj l nk nl">gcloud projects create cicdformedium</span></pre><p id="ab3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用应用引擎时，我们必须有<code class="du km kn ko kp b">app.yaml</code>文件。您可以看到我为我们的场景创建的文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/5c85630bc027e4846b138964aa16ad02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E7BmoF3d-7LzGEA9gOyo-Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="0ff3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我将把GitHub repo克隆到我的Google Cloud Shell环境中，并执行我们在上面使用Cloud9时执行的相同步骤。</p><ul class=""><li id="7aab" class="mi mj hi ih b ii ij im in iq mk iu ml iy mm jc mn mo mp mq bi translated">克隆回购</li><li id="da5b" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">创建新的虚拟环境</li><li id="abbb" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">安装需求</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/7ae41465df22ba821493ffcb6b055fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E-9zvgOvYv_m5VQU1gG-Qw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="c752" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将创建一个新的应用引擎实例。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="ba3e" class="lu ks hi kp b fi ni nj l nk nl">gcloud app create</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/caa513cc0428741c2b56903888eabb95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Ab8SnW-asleuZ4X0R9_oQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="9cc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我可以执行下面的代码了。这里注意，这一步我们要有<code class="du km kn ko kp b">app.yaml</code>文件。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="4f2b" class="lu ks hi kp b fi ni nj l nk nl">gcloud app deploy</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/849caa8d3e20dedcc458d145eb7d1c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcyVsBaHidMBeHs5XSLAKw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="6253" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可能会得到如下所示的错误。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/b8099ff926be9223f696edd27b5cfb1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jpCGFCattcrz0cM1Necz6w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="0260" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们得到它是因为我们的回购文件夹中有<code class="du km kn ko kp b">cloudbuild.yaml</code>文件。我们需要在我们的项目中启用这些服务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/1f527f9ce503844cb100a9574270d4c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfFhe3kZBVYYCy0SmEIzug.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="ff61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我再次执行代码进行部署。</p><pre class="je jf jg jh fd ne kp nf ng aw nh bi"><span id="1d1c" class="lu ks hi kp b fi ni nj l nk nl">gcloud app deploy</span></pre><p id="1259" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在解决了。我可以通过使用<code class="du km kn ko kp b">gcloud app browse</code>在浏览器上看到我的项目。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/2f7b1ed0db1f824fb48f41301699d649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gHQ36nY3VThC0AbkbQ5LMw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><h1 id="a810" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">通过GCP云构建实现持续交付</h1><p id="f1cd" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">在本节中，我们将使用云构建创建一个触发器来跟踪GitHub repo上的事件。</p><p id="f8ac" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我将转到云构建的控制面板。我将创建一个新的触发器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/7d36ed1589a8240a568b6162a854f521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*61uIKcfFKL-yeZzvgyDXbw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="ffd0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我点击“创建触发器”按钮，开始创建一个事件。我需要授予Cloud Build权限才能访问我的GitHub repos。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/19fd79a18f6cde26dc40865cf947564c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-EUpPLh3pLPER59UQVvn1Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="f028" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在回购上做了一个触发器。现在，我将在Cloud9上添加一个新的repo路径。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/91a1dd3fe1c4150aab9f61eb8d284888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCIjlPP-ImAHyy7mqK6OIQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="9417" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们可以通过使用GitHub操作创建的CI工作流来检查是否有任何错误。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/2cee2872c4450ab57826ddf10158e3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3sXyqhN0MLWLFOLJ9MJrcQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="ad3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您试图查看CD过程的详细信息时，您将得到一个新的错误。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/a2a64db81da509904f4b4696dd55535d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4rOXwXtMvx6uq22UA113w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="08f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以通过在云构建上启用一些服务来解决这个问题。我点击了位于左侧栏的设置按钮。然后我启用了两个服务，我们可以在下面看到。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/a6c49d2667e5c1d33a1a58f1767a55ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VAewQEiswyMy8sPyGQ56VQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="3114" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我将对我们创建的新路线做一点更改，以模拟此CD流程。我把新的变化推给了回购。</p><p id="9493" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以看到下面的成功结果。Cloud Build会自动将最新代码下载到我们的应用引擎中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/e0e23fa1371498f53ce01758d2631be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rNox9yxPJEU6cXXI8jGnTA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><p id="5ace" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可以肯定的是，我要测试新路线。我看到了新路线的结果。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es np"><img src="../Images/9f841879e1db4041a599e895de62969e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fThx1m180YJS8Tjf_pFsFg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">作者图片</figcaption></figure><h1 id="d569" class="kr ks hi bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">最后</h1><p id="f631" class="pw-post-body-paragraph if ig hi ih b ii lp ik il im lq io ip iq lr is it iu ls iw ix iy lt ja jb jc hb bi translated">我们在这个故事中指出了以下主题:</p><ul class=""><li id="4fd0" class="mi mj hi ih b ii ij im in iq mk iu ml iy mm jc mn mo mp mq bi translated">什么是CI和CD？</li><li id="5287" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">什么是Makefile？</li><li id="838d" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">什么是GitHub动作？</li><li id="c7c3" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">什么是Cloud9？</li><li id="a197" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">EC2是什么？</li><li id="96a2" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">什么是App Engine？</li><li id="a952" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">什么是云构建？</li><li id="f96b" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">具有GitHub操作的配置项</li><li id="ca66" class="mi mj hi ih b ii mr im ms iq mt iu mu iy mv jc mn mo mp mq bi translated">具有云构建的CD</li></ul><p id="987f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">希望您喜欢这个故事，它有助于您了解CI &amp; CD的基本概念和最受欢迎的云提供商的功能。你可以通过下面的链接获得我们在这个故事中使用的所有代码。</p><div class="ju jv ez fb jw jx"><a href="https://github.com/mebaysan/IntroductionToCloudComputingCI_CD" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hj fi z dy kc ea eb kd ed ef hh bi translated">GitHub-mebaysan/IntroductionToCloudComputingCI _ CD:我创建这个repo是为了完成给定的任务…</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">我创建这个repo是为了完成杜克大学的Noah Gift交给我的构建云计算解决方案的任务…</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">github.com</p></div></div><div class="kg l"><div class="nq l ki kj kk kg kl jn jx"/></div></div></a></div><p id="7858" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">问候。</p></div></div>    
</body>
</html>