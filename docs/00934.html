<html>
<head>
<title>Running GUI Applications in Docker — Firefox, Nautilus File Manager.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Docker中运行GUI应用程序——Firefox，Nautilus文件管理器。</h1>
<blockquote>原文：<a href="https://medium.com/codex/running-gui-applications-in-docker-firefox-nautilus-file-manager-5424694104ec?source=collection_archive---------6-----------------------#2021-03-26">https://medium.com/codex/running-gui-applications-in-docker-firefox-nautilus-file-manager-5424694104ec?source=collection_archive---------6-----------------------#2021-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="f311" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">药典</h2><div class=""/><figure class="ev ex ip iq ir is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/16f3fce3c00bc362700248f89b460c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FQoZTjgtEZmzzs5s.jpeg"/></div></div></figure><h1 id="68c0" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">Docker是什么？</h1><p id="55a2" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">Docker是一个工具，旨在通过使用容器来简化应用程序的创建、部署和运行。容器允许开发人员将应用程序与它需要的所有部分打包在一起，比如库和其他依赖项，并作为一个包进行部署。通过这样做，由于有了容器，开发人员可以放心，应用程序将在任何其他Linux机器上运行，而不管该机器的任何定制设置可能与用于编写和测试代码的机器不同。</p><p id="ecd9" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">在某种程度上，Docker有点像虚拟机。但与虚拟机不同的是，Docker不是创建一个完整的虚拟操作系统，而是允许应用程序使用与运行它们的系统相同的Linux内核，并且只要求应用程序附带主机上尚未运行的东西。这极大地提高了性能，并减小了应用程序的大小。</p><h1 id="566d" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">可以容器化的应用程序类型(通常是服务):</h1><ul class=""><li id="b061" class="la lb hi jz b ka kb ke kf ki lc km ld kq le ku lf lg lh li bi translated">作为后台服务运行的应用程序(如数据库、web服务器等)</li><li id="c7da" class="la lb hi jz b ka lj ke lk ki ll km lm kq ln ku lf lg lh li bi translated">在前台运行的GUI应用程序。</li></ul><p id="da6f" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">今天，我们将看到第二种选择:</p><h1 id="d480" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">X窗口系统/ X:</h1><p id="e0c8" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated">X11是当前版本的<a class="ae lo" href="http://www.linfo.org/x.html" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> X视窗系统</em> </a>。</p><figure class="lr ls lt lu fd is er es paragraph-image"><div class="er es lq"><img src="../Images/367017ba4a241bf509e9a72709d6be53.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/0*XQfRd6PhNSFPo2bM.png"/></div></figure><p id="8dc1" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">x为GUI环境提供了基本框架:在显示设备上绘制和移动窗口，以及与鼠标和键盘交互。x不强制用户界面——这是由单独的程序处理的。因此，基于X的环境的视觉风格变化很大；不同的程序可能呈现出完全不同的界面。在类似于Unix的操作系统上。</p><figure class="lr ls lt lu fd is er es paragraph-image"><div class="er es lv"><img src="../Images/9d6721752df73f064ef148e12ec85ca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/0*KXX2EJDsKxI4_ZTX.png"/></div></figure><p id="dead" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">为了运行GUI应用程序，我们需要一个XServer，它可以作为每个Linux桌面环境的一部分。</p><p id="0d68" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">运行以下命令，查看运行在您的Linux机器上的X服务器和X客户机:</p><p id="8977" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ ps -aux | grep X</code></p><figure class="lr ls lt lu fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es ma"><img src="../Images/fb8b493491a2105ab3f5a86900c9996d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AuQEb7f5E-aUBvnm.jpeg"/></div></div></figure><p id="1a80" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><em class="lp">对于Windows，可以使用</em><a class="ae lo" href="https://sourceforge.net/projects/xming/" rel="noopener ugc nofollow" target="_blank"><em class="lp">Xming</em></a><em class="lp">。</em></p><p id="ebd3" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><em class="lp">对于OSX，可以用</em><a class="ae lo" href="https://www.xquartz.org/" rel="noopener ugc nofollow" target="_blank"><em class="lp">Xquarkz</em></a><em class="lp">。</em></p><p id="b1da" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">但是在容器中，我们没有任何x server——所以我们将:</p><ul class=""><li id="07ab" class="la lb hi jz b ka kv ke kw ki mb km mc kq md ku lf lg lh li bi translated">将本地机器上<code class="du lw lx ly lz b">/tmp/.X11-unix</code>中的<code class="du lw lx ly lz b">X11</code>插座安装到容器中的<code class="du lw lx ly lz b">/tmp/.X11-unix</code>中。</li></ul><p id="c0df" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">-v /tmp/.X11-unix:/tmp/.X11-unix</code></p><ul class=""><li id="764a" class="la lb hi jz b ka kv ke kw ki mb km mc kq md ku lf lg lh li bi translated">将主机的<strong class="jz hs">显示</strong>环境变量共享给容器</li></ul><p id="2b58" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">-e DISPLAY=$DISPLAY</code></p><ul class=""><li id="bcb6" class="la lb hi jz b ka kv ke kw ki mb km mc kq md ku lf lg lh li bi translated">用主机<strong class="jz hs">运行容器</strong>网络驱动程序</li></ul><p id="418a" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">--net=host</code></p><h1 id="6741" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">示例1:使用示例GUI应用程序(Firefox)构建图像的Dockerfile:</h1><p id="4a78" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ cat Dockerfile</code></p><figure class="lr ls lt lu fd is"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="c3b5" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ sudo docker build -t mtabishk/firefox .</code></p><figure class="lr ls lt lu fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mg"><img src="../Images/40284a05aa42d6e48d11dd6101f3cf2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RHKbo_Rv45JC2s21.jpeg"/></div></div></figure><p id="c98c" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">码头中心:<a class="ae lo" href="https://hub.docker.com/repository/docker/mtabishk/firefox" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/repository/docker/mtabishk/firefox</a></p><p id="0a56" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ sudo docker run -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix --net=host mtabishk/firefox:v1.0.0</code></p><figure class="lr ls lt lu fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mh"><img src="../Images/8b83f68c5ec9f44300ab49673ec86975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Nz-IwMWLpqhGTMGH.jpeg"/></div></div></figure><p id="c333" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">您应该会看到firefox GUI应用程序现在显示在您的主机操作系统桌面上。</p><h1 id="bc84" class="iz ja hi bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">示例2:使用示例GUI应用程序(Nautilus文件管理器)构建图像的Dockerfile:</h1><p id="9c56" class="pw-post-body-paragraph jx jy hi jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ cat Dockerfile</code></p><figure class="lr ls lt lu fd is"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="75db" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ sudo docker build -t mtabishk/nautilus-ubuntu .</code></p><figure class="lr ls lt lu fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mi"><img src="../Images/0fa1fcf91f7869eccbdffa273d811d46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5ptFtLWJx0lS0bTB.jpeg"/></div></div></figure><p id="44b9" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">docker Hub:<a class="ae lo" href="https://hub.docker.com/repository/docker/mtabishk/nautilus-ubuntu" rel="noopener ugc nofollow" target="_blank">https://Hub . docker . com/repository/docker/mtabishk/nautilus-Ubuntu</a></p><p id="6e5a" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated"><code class="du lw lx ly lz b">$ sudo docker run -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix mtabishk/nautilus-ubuntu</code></p><figure class="lr ls lt lu fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mh"><img src="../Images/5a5b02ec99658e191c47d09f1531f2de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pGlv93TE2zAiXkWY.jpeg"/></div></div></figure><figure class="lr ls lt lu fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mh"><img src="../Images/22987cd39afc65b252b46c26cda48418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mJFBJ5SSjW1HnKIi.jpeg"/></div></div></figure><p id="8df2" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">您应该会看到Nautilus GUI应用程序现在显示在您的主机操作系统桌面上。</p></div><div class="ab cl mj mk gp ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="hb hc hd he hf"><p id="3b15" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">今天就到这里吧！我很快会带一些新文章回来，谢谢！🤗</p><p id="252d" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">穆罕默德·塔比什·坎戴</p><p id="ecff" class="pw-post-body-paragraph jx jy hi jz b ka kv kc kd ke kw kg kh ki kx kk kl km ky ko kp kq kz ks kt ku hb bi translated">领英:<a class="ae lo" href="https://www.linkedin.com/in/mtabishk/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/mtabishk/</a></p></div></div>    
</body>
</html>