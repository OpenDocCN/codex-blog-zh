<html>
<head>
<title>Add a Translation Feature to Your Next.JS App Part 3: Add language-specific URL in next-i18next package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的下一个添加翻译功能。JS应用程序第3部分:在next-i18next包中添加特定于语言的URL</h1>
<blockquote>原文：<a href="https://medium.com/codex/add-a-translation-feature-to-your-next-js-app-part-3-add-language-specific-url-3b22e492a363?source=collection_archive---------2-----------------------#2021-02-21">https://medium.com/codex/add-a-translation-feature-to-your-next-js-app-part-3-add-language-specific-url-3b22e492a363?source=collection_archive---------2-----------------------#2021-02-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="577a" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><figure class="ev ex it iu iv iw er es paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="er es is"><img src="../Images/64739fd521f65a3f5e91d954c8978578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WWXJ0w6YByfPA9KKmDx2Ug.jpeg"/></div></div></figure><h1 id="edf7" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">看完这篇文章你能做什么</h1><p id="47fb" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">本文将讨论如何在next.js应用程序中添加特定于语言的URL。例如，<code class="du io ip iq ir b">myblog.com/en</code>将引导您进入英文版网站，而<code class="du io ip iq ir b">myblog.com/zh</code>将引导您进入中文版网站，等等。</p><h1 id="a509" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">基本设置参考</h1><p id="dcb6" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">首先，为了设置这个特性，我已经在<strong class="kd hs">我以前的文章中解释过了:</strong></p><ol class=""><li id="542c" class="kz la hi kd b ke lb ki lc km ld kq le ku lf ky lg lh li lj bi translated"><a class="ae lk" rel="noopener" href="/javascript-in-plain-english/add-a-translation-feature-to-your-next-js-app-part-1-set-up-the-next-i18next-package-4a4788cb98ba">为你的Next.js应用程序添加翻译功能第1部分:设置</a> <code class="du io ip iq ir b"><a class="ae lk" rel="noopener" href="/javascript-in-plain-english/add-a-translation-feature-to-your-next-js-app-part-1-set-up-the-next-i18next-package-4a4788cb98ba">next-i18next package</a></code></li><li id="9b24" class="kz la hi kd b ke ll ki lm km ln kq lo ku lp ky lg lh li lj bi translated"><a class="ae lk" rel="noopener" href="/swlh/add-a-translation-feature-to-your-next-js-app-part-2-manually-switch-languages-e308b1ec576a">为您的下一个添加翻译功能。JS App第2部分:手动切换语言</a></li></ol><p id="909a" class="pw-post-body-paragraph kb kc hi kd b ke lb kg kh ki lc kk kl km lq ko kp kq lr ks kt ku ls kw kx ky hb bi translated">因此，在您完成这些教程后，我假设您的应用程序能够从相应的语言脚本中获取不同的脚本，并有一个按钮能够在应用程序中为您更改语言。</p><p id="707a" class="pw-post-body-paragraph kb kc hi kd b ke lb kg kh ki lc kk kl km lq ko kp kq lr ks kt ku ls kw kx ky hb bi translated">此外，我构建了一个回购协议来演示这一点，所以可以随意访问并使用它。</p><h1 id="5d8d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">TL；大卫:怎么做？</h1><p id="350e" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">为了实现这个特定于语言的URL特性，我们需要使用<code class="du io ip iq ir b">localSubpath</code>选项，这是一个键/值对，我们在初始化时传递给了<code class="du io ip iq ir b">NextI18Next</code>实例。你可以在<a class="ae lk" href="https://github.com/isaachinman/next-i18next#5-locale-subpaths" rel="noopener ugc nofollow" target="_blank">文档</a>中找到更多信息。</p><p id="f512" class="pw-post-body-paragraph kb kc hi kd b ke lb kg kh ki lc kk kl km lq ko kp kq lr ks kt ku ls kw kx ky hb bi translated">基本上，你只需要做三个简单的步骤:</p><h2 id="bb14" class="lt je hi bd jf lu lv lw jj lx ly lz jn km ma mb jr kq mc md jv ku me mf jz ho bi translated">1.创建一个<code class="du io ip iq ir b">next.config.js</code>来设置<code class="du io ip iq ir b">localSubpath</code></h2><p id="1d25" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">只需在根目录下创建一个名为<code class="du io ip iq ir b">next.config.js</code>的文件(与放置<code class="du io ip iq ir b">i18n.js</code>的目录相同)，并放置以下代码:</p><pre class="mg mh mi mj fd mk ir ml mm aw mn bi"><span id="5232" class="lt je hi ir b fi mo mp l mq mr">#next.config.js</span><span id="525b" class="lt je hi ir b fi ms mp l mq mr">const { nextI18NextRewrites } = require('next-i18next/rewrites')</span><span id="8403" class="lt je hi ir b fi ms mp l mq mr">const localeSubpaths = {<br/>    zh: "zh", // or whichever other languages you are looking for<br/>    en: "en"<br/>}</span><span id="ceaf" class="lt je hi ir b fi ms mp l mq mr">module.exports = {<br/>  rewrites: async () =&gt; nextI18NextRewrites(localeSubpaths),<br/>  publicRuntimeConfig: {<br/>    localeSubpaths,<br/>  },<br/>}</span></pre><h2 id="e549" class="lt je hi bd jf lu lv lw jj lx ly lz jn km ma mb jr kq mc md jv ku me mf jz ho bi translated">2.修改<code class="du io ip iq ir b">i18n.js</code>以访问<code class="du io ip iq ir b">localSubpath</code></h2><pre class="mg mh mi mj fd mk ir ml mm aw mn bi"><span id="7c7d" class="lt je hi ir b fi mo mp l mq mr">// i18n.js</span><span id="dc67" class="lt je hi ir b fi ms mp l mq mr">const NextI18Next = require('next-i18next').default</span><span id="a2cf" class="lt je hi ir b fi ms mp l mq mr">//New added!!<br/>const { localeSubpaths } = require('next/config').default().publicRuntimeConfig</span><span id="fa6d" class="lt je hi ir b fi ms mp l mq mr">const path = require('path')</span><span id="067b" class="lt je hi ir b fi ms mp l mq mr">module.exports = new NextI18Next({<br/>  defaultLanguage:'en',<br/>  otherLanguages: ['zh'],</span><span id="326e" class="lt je hi ir b fi ms mp l mq mr">// New added!!<br/>  localeSubpaths,</span><span id="78e9" class="lt je hi ir b fi ms mp l mq mr">  localePath: path.resolve('./public/static/locales')<br/>})</span></pre><h2 id="2bef" class="lt je hi bd jf lu lv lw jj lx ly lz jn km ma mb jr kq mc md jv ku me mf jz ho bi translated">3.使用来自<code class="du io ip iq ir b">NextI18Next</code>实例的<code class="du io ip iq ir b">Link</code>，而不是来自<code class="du io ip iq ir b">next</code></h2><p id="bed7" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">如果你的应用有一个以上的内部链接(那是很有可能的！)，那么你可能也想再做一个小的设置。当您的代码中有一个链接时，不要使用next中的链接，而是使用我们在另一个文件中创建的i18实例中的<code class="du io ip iq ir b">Link</code>。</p><p id="ef38" class="pw-post-body-paragraph kb kc hi kd b ke lb kg kh ki lc kk kl km lq ko kp kq lr ks kt ku ls kw kx ky hb bi translated">所以这样用<code class="du io ip iq ir b">Link</code>:</p><pre class="mg mh mi mj fd mk ir ml mm aw mn bi"><span id="6334" class="lt je hi ir b fi mo mp l mq mr">import { withTranslation, i18n, Link } from "../i18n"</span><span id="b4b7" class="lt je hi ir b fi ms mp l mq mr">...</span><span id="df48" class="lt je hi ir b fi ms mp l mq mr">&lt;Link href="/second-page"&gt;</span><span id="b69f" class="lt je hi ir b fi ms mp l mq mr">   &lt;p&gt;{t('secondFile:second')}&lt;/p&gt;</span><span id="f4a8" class="lt je hi ir b fi ms mp l mq mr">&lt;/Link&gt;</span></pre><p id="0890" class="pw-post-body-paragraph kb kc hi kd b ke lb kg kh ki lc kk kl km lq ko kp kq lr ks kt ku ls kw kx ky hb bi translated">为什么？因为当你使用<code class="du io ip iq ir b">NextI18Next</code>实例中的那个，当你被重定向到<code class="du io ip iq ir b">/second-page</code>时，网址就会变成<code class="du io ip iq ir b"><a class="ae lk" href="http://localhost:3010/second-page" rel="noopener ugc nofollow" target="_blank">/en/second-page</a></code>或者用户现在正在使用的任何语言，比如<code class="du io ip iq ir b"><a class="ae lk" href="http://localhost:3010/second-page" rel="noopener ugc nofollow" target="_blank">/zh/second-page</a></code>，这不是很酷吗？</p><h1 id="0d43" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">结束</h1><p id="41af" class="pw-post-body-paragraph kb kc hi kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky hb bi translated">这个系列就说到这里吧！感谢阅读！</p><h1 id="20f9" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">资源:</h1><ol class=""><li id="2de7" class="kz la hi kd b ke kf ki kj km mt kq mu ku mv ky lg lh li lj bi translated"><a class="ae lk" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank">下一个-i18下一个</a>包</li><li id="4d26" class="kz la hi kd b ke ll ki lm km ln kq lo ku lp ky lg lh li lj bi translated"><a class="ae lk" href="https://github.com/yingqi-chen/next-translation-demo" rel="noopener ugc nofollow" target="_blank">我的回购示例</a></li><li id="661c" class="kz la hi kd b ke ll ki lm km ln kq lo ku lp ky lg lh li lj bi translated"><a class="ae lk" rel="noopener" href="/@chanwingkeihaha/add-a-translation-feature-to-your-next-js-app-part-1-set-up-the-next-i18next-package-4a4788cb98ba">为您的Next.js应用程序添加翻译功能第1部分:设置next-i18next包</a></li><li id="65e7" class="kz la hi kd b ke ll ki lm km ln kq lo ku lp ky lg lh li lj bi translated"><a class="ae lk" rel="noopener" href="/swlh/add-a-translation-feature-to-your-next-js-app-part-2-manually-switch-languages-e308b1ec576a">为您的下一个添加翻译功能。JS App第2部分:手动切换语言</a></li></ol></div></div>    
</body>
</html>