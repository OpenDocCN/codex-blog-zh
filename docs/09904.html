<html>
<head>
<title>Matplotlib Tutorial — 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Matplotlib教程— 2</h1>
<blockquote>原文：<a href="https://medium.com/codex/matplotlib-tutorial-2-6297e7ad9fa7?source=collection_archive---------10-----------------------#2022-11-18">https://medium.com/codex/matplotlib-tutorial-2-6297e7ad9fa7?source=collection_archive---------10-----------------------#2022-11-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="d7ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本教程将涵盖条形图和分析CSV数据。</p><p id="2633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上一个教程中，我们使用示例数据创建了一个绘图，但如果我们想以条形图格式表示数据，我们可以使用bar方法，下面是代码。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="b335" class="jm jn hi ji b be jo jp l jq jr">from matplotlib import pyplot as plt<br/>plt.style.use('fivethirtyeight')<br/>dev_x = [25,26,27,28,29,30,31,32,33,34,35]<br/>dev_y = [30123,40589,50445,558889,67454,70555,751122,80456,87456,92000,97585]<br/><br/>plt.bar(dev_x,dev_y, label = 'All Dev Salaries')<br/>plt.xlabel('Ages')<br/>plt.ylabel('Salaries')<br/>plt.title('Median Salary by Age')<br/>plt.legend()<br/>plt.tight_layout()<br/>plt.show()</span></pre><p id="ee9e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们已经用条形图代替了绘图法，它将为相同的数据生成一个条形图。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es js"><img src="../Images/69f71e219cb05487f8af40b34f42a85b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x4pz_KaqGFU4TKm8-3E55Q.png"/></div></div></figure><p id="3a40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但如果我们有两个或两个以上的数据相似的图，如果我们用条形图的方法生成条形图，我们会得到一些意想不到的结果。让我们检查一下，然后我们将介绍解决方案。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="ed4f" class="jm jn hi ji b be jo jp l jq jr">from matplotlib import pyplot as plt<br/>plt.style.use('fivethirtyeight')<br/>dev_x = [25,26,27,28,29,30,31,32,33,34,35]<br/>dev_y = [30123,40589,50445,558889,67454,70555,751122,80456,87456,92000,97585]<br/><br/>python_y = [40123,50589,60445,758889,77454,70555,851122,90456,97456,102000,117585]<br/>plt.bar(dev_x,python_y, label =  'Python Dev Salaries')<br/><br/>plt.bar(dev_x,dev_y, label = 'All Dev Salaries')<br/>plt.xlabel('Ages')<br/>plt.ylabel('Salaries')<br/>plt.title('Median Salary by Age')<br/>plt.legend()<br/>plt.tight_layout()<br/>plt.show()<br/><br/>python_y = [40123,50589,60445,758889,77454,70555,851122,90456,97456,102000,117585]<br/>plt.plot(dev_x,python_y, label =  'Python Dev Salaries')</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es ka"><img src="../Images/77b1333d75d86c793fa61e017f1ac6b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsbS-DXons-o7sZXDpAGoA.png"/></div></div></figure><p id="40f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，结果是重叠的，我们没有得到每个数据单独的条形图，这是我们以前用绘图方法得到的。</p><p id="7347" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分离条形图有点棘手，首先，我们需要导入NumPy模块，并将X轴值转换为NumPy列表。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="3e8b" class="jm jn hi ji b be jo jp l jq jr">from matplotlib import pyplot as plt<br/>import numpy as np<br/>plt.style.use('fivethirtyeight')<br/>dev_x = [25,26,27,28,29,30,31,32,33,34,35]<br/>dev_y = [30123,40589,50445,558889,67454,70555,751122,80456,87456,92000,97585]<br/><br/>x_indexs = np.arange(len(dev_x))</span></pre><p id="5901" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在每个条形都有了自己的宽度，所以我们必须定义一个自定义的宽度，然后用x_indexs值加上或减去该宽度，以向左或向右移动条形图。让我们检查下面的代码。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="823a" class="jm jn hi ji b be jo jp l jq jr">from matplotlib import pyplot as plt<br/>import numpy as np<br/>plt.style.use('fivethirtyeight')<br/>dev_x = [25,26,27,28,29,30,31,32,33,34,35]<br/>dev_y = [30123,40589,50445,558889,67454,70555,751122,80456,87456,92000,97585]<br/><br/>x_indexs = np.arange(len(dev_x))<br/>width = 0.25<br/>python_y = [40123,50589,60445,758889,77454,70555,851122,90456,97456,102000,117585]<br/>plt.bar(x_indexs,python_y,width = width, label =  'Python Dev Salaries')<br/><br/>plt.bar(x_indexs + width,dev_y,width = width, label = 'All Dev Salaries')<br/>plt.xlabel('Ages')<br/>plt.ylabel('Salaries')<br/>plt.title('Median Salary by Age')<br/>plt.legend()<br/>plt.tight_layout()<br/>plt.show()<br/><br/></span></pre><p id="4a3d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里，我们将自定义宽度定义为0.25，在第二个图形中，我们添加了宽度和x轴值，以向左移动第二个条形。</p><p id="f4e1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我们还向bar方法添加了一个参数宽度，并传递了自定义宽度值。现在它将生成预期的条形图。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kb"><img src="../Images/6b7b1e1a5f0cccd856d4e454f0b6d854.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*liegTW9eA0dAVsa7qwTnwg.png"/></div></div></figure><p id="69be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当可以使用x-ticks方法并将年龄作为参数传递时，更正X轴中的标签。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="ec3e" class="jm jn hi ji b be jo jp l jq jr">plt.xticks(ticks=x_indexs,label= dev_x)</span></pre><p id="3e14" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们将看到如何创建大型数据表示的水平条形图，我有一个data.csv文件，它有两列，一列有响应id，另一列有langauge_work_with。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kc"><img src="../Images/c96eccec4b760f302431daedaef24af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RsI5Y6RkVC5Y4QhYPaxuGA.png"/></div></div></figure><p id="e094" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，首先我们将使用熊猫导入文件数据并打印出来。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="edde" class="jm jn hi ji b be jo jp l jq jr">import pandas as pd<br/><br/>data = pd.read_csv('data.csv')<br/><br/>respondant = data['Responder_id']<br/>langauge = data['LanguagesWorkedWith']<br/><br/>print(respondant)<br/>print(langauge)</span></pre><p id="7193" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们已经加载了数据，我们需要每种语言的计数，所以我们可以在我们的绘图中使用它，所以我们将在这里使用counter函数，并计算语言出现的次数。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="e296" class="jm jn hi ji b be jo jp l jq jr">from builtins import print<br/>from collections import Counter<br/><br/>import pandas as pd<br/>data = pd.read_csv('data.csv')<br/>respondant = data['Responder_id']<br/>langauges = data['LanguagesWorkedWith']<br/><br/>langaugecounter = Counter()<br/>for row in langauges:<br/>    langaugecounter.update(row.split(';'))<br/><br/>print(langaugecounter)<br/><br/>Output-<br/>Counter({'JavaScript': 59219, 'HTML/CSS': 55466, 'SQL': 47544, 'Python': 36443, 'Java': 35917, 'Bash/Shell/PowerShell': 31991, 'C#': 27097, 'PHP': 23030, 'C++': 20524, 'TypeScript': 18523, 'C': 18017, 'Other(s):': 7920, 'Ruby': 7331, 'Go': 7201, 'Assembly': 5833, 'Swift': 5744, 'Kotlin': 5620, 'R': 5048, 'VBA': 4781, 'Objective-C': 4191, 'Scala': 3309, 'Rust': 2794, 'Dart': 1683, 'Elixir': 1260, 'Clojure': 1254, 'WebAssembly': 1015, 'F#': 973, 'Erlang': 777})</span></pre><p id="fd93" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们有了条形图的数据，让我们将这些数据分成两个列表，一个用于x轴，一个用于y轴，然后我们将使用barh创建水平条形图。</p><pre class="jd je jf jg fd jh ji jj bn jk jl bi"><span id="3a6f" class="jm jn hi ji b be jo jp l jq jr">from builtins import print<br/>from collections import Counter<br/>from matplotlib import pyplot as plt<br/>import pandas as pd<br/><br/>plt.style.use('fivethirtyeight')<br/><br/>data = pd.read_csv('data.csv')<br/>respondant = data['Responder_id']<br/>langauges = data['LanguagesWorkedWith']<br/><br/>langaugecounter = Counter()<br/>for row in langauges:<br/>    langaugecounter.update(row.split(';'))<br/><br/>langauge = []<br/>popularity  = []<br/><br/>for row in langaugecounter.most_common(15):<br/>    langauge.append(row[0])<br/>    popularity.append((row[1]))<br/><br/>plt.barh(langauge,popularity)<br/>plt.xlabel('Popularity')<br/>plt.title('Langauge Popularity')<br/>plt.legend()<br/>plt.tight_layout()<br/>plt.show()</span></pre><p id="a507" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们将语言和流行数据分为两个列表，并使用barh方法创建水平条形图。此外，我们还使用了已经在counter中出现的最常用的方法，并提供了最常用的结果，在这里，我们为这个条形图使用了15种更常用的语言。</p><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="ju jv di jw bf jx"><div class="er es kd"><img src="../Images/e48808a22b6b4bc99af6ff228fdc7e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTkwATRrf9HhW9DI6Nxtww.png"/></div></div></figure><p id="6448" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一篇教程中，我们将介绍如何使用Matplotlib制作饼状图。</p></div></div>    
</body>
</html>