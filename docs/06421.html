<html>
<head>
<title>Docker Series Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker系列第2部分</h1>
<blockquote>原文：<a href="https://medium.com/codex/docker-series-part-2-13f85b9cd444?source=collection_archive---------9-----------------------#2022-04-23">https://medium.com/codex/docker-series-part-2-13f85b9cd444?source=collection_archive---------9-----------------------#2022-04-23</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e38e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" rel="noopener" href="/codex/docker-series-part-1-88c649c532d2"> <strong class="ih hj"> <em class="je"> Docker系列第一部</em> </strong> </a></p><h1 id="715e" class="jf jg hi bd jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc bi translated">Docker命令</h1><p id="33e4" class="pw-post-body-paragraph if ig hi ih b ii kd ik il im ke io ip iq kf is it iu kg iw ix iy kh ja jb jc hb bi translated">Docker run命令用于从映像创建和运行容器。</p><ul class=""><li id="db58" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"> <em class="je"> docker运行镜像名称</em> </strong></li></ul><p id="681b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该命令的一个细微变化是</p><ul class=""><li id="9eac" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"> <em class="je"> docker运行图像-名称覆盖-命令</em> </strong></li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div class="er es kr"><img src="../Images/caca282d28394c575b9fbb3427c9f798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*bbt9LcLrpjDICuC5KvspUA.png"/></div></figure><p id="c75d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="je">注意:</em> </strong> <em class="je">被覆盖的命令应该是针对镜像的文件系统，否则会显示错误。我们不能在hello-world映像上运行ls或Linux命令，因为它只是一个用特定编程语言编写的程序。</em></p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/147bed57f32626115ccfcf5529aa6254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2mQ0bIinmu3n98dhsL4bw.png"/></div></div></figure><p id="2d67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Docker run命令是docker create和docker start两个命令的组合。</p><ul class=""><li id="5aef" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker create image-name→</em></strong>这将创建一个图像的容器并返回容器Id。</li><li id="4a4c" class="ki kj hi ih b ii le im lf iq lg iu lh iy li jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker start container Id</em></strong>→这将启动具有给定容器Id的容器，但不会在屏幕上显示该容器生成的任何输出。</li></ul><p id="1442" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们更好地理解docker创建并从这个图像开始:</p><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lj"><img src="../Images/c122c08b63d6f0897ca6320a5de11462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G9DrVltpEmMrHeU7nGhvhw.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">容器创建</figcaption></figure><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lj"><img src="../Images/863fe4219f83482488fbfbd26be94dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w9A5hpnIBQoCkQ-eCqEmaA.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">集装箱起点</figcaption></figure><ul class=""><li id="6b55" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker start-a container Id→</em></strong>这将使用给定的容器Id启动容器，并打印容器中运行映像的输出。</li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lo"><img src="../Images/ee94fc3f80b2508efa138decca3559da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZ-6Eo00SRUd7e09SYD-ZA.png"/></div></div></figure><ul class=""><li id="4866" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"> <em class="je"> docker ps → </em> </strong>该命令列出了所有当前正在运行的容器</li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lp"><img src="../Images/60debe8e39801154b9358b565801affb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AjovKyOg3OwIGT1V3-OBkA.png"/></div></div></figure><ul class=""><li id="c3dd" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker PS--all→</em></strong>该命令列出了系统上所有最新的流道容器。</li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lq"><img src="../Images/e160d594b85b96f02c31a4bfa46bfaec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MBLuPn-HXWgZihdn7E2QoQ.png"/></div></div></figure><p id="3a2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="je">注意→</em></strong><em class="je">PS命令输出中最重要的部分是容器Id，因为我们经常喜欢使用单个容器。</em></p><p id="e5ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">退出的容器可以再次启动。这些容器没有被删除，它们仍然存在；退出的是这些容器中正在运行的进程。可以使用带有容器Id的docker start命令重新启动这些容器。</p><p id="80b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="je">注意:</em> </strong> <em class="je">当我们重新启动这些容器时，最初创建这些容器时使用的命令不能被覆盖。</em></p><ul class=""><li id="f96c" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"> <em class="je"> docker系统prune → </em> </strong>退出的容器也会占用磁盘空间，所以最好在没用的时候清理掉。该命令还将删除所有容器和本地构建的图像缓存。</li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lr"><img src="../Images/a460c2d9fdef5e202b29865090101d16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JiihbML8iL6JIg6AkItPXA.png"/></div></div></figure><ul class=""><li id="0de0" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker logs container id→</em></strong>该命令将在启动后打印特定容器的所有日志。</li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ls"><img src="../Images/2a3b12725b43fdc2c711f442ab55d67e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z4_-5HHgXx7a935hGh0O5Q.png"/></div></div></figure><p id="1f1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两个命令用于停止容器</p><ul class=""><li id="b08f" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker stop container id→</em></strong>该命令通过给docker容器10秒钟的宽限期来停止它，在此期间它可以进行一些清理，保存一些文件，然后自行停止，但如果容器在10秒钟内没有停止，则会自动执行docker kill命令。这个命令向容器进程发送一个SIGTERM消息。</li><li id="36a1" class="ki kj hi ih b ii le im lf iq lg iu lh iy li jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker kill container id→</em></strong>该命令向容器进程发送SIGKILL消息。这个命令立即停止docker容器。</li></ul><p id="30e4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时我们想向一个容器发出多个命令。在处理Redis容器时，我们可能希望打开Redis服务器和Redis CLI；然后，我们必须向正在运行的Redis容器发出多个命令。</p><ul class=""><li id="1c85" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker exec-it container id命令→ </em> </strong>这个命令帮助我们在一个容器内运行多个命令。</li></ul><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lt"><img src="../Images/7f1ae64c53a483d839a1dea0bd58f2ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSbYRDH4KbbthaiuG1zClg.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">Redis服务器</figcaption></figure><figure class="ks kt ku kv fd kw er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lu"><img src="../Images/91c4a1387f408e0329af8e4b73bad906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_Blxh18Kx7GcSEyvtfUsQ.png"/></div></div><figcaption class="lk ll et er es lm ln bd b be z dx translated">Redis-CLI</figcaption></figure><p id="68ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在上面的docker exec命令中使用了-it标志；我们来了解一下它的用途。Linux环境中的每个进程都有三个通道STDIN接受标准输入，STDOUT和STDERR在屏幕上显示预期的输出。-it标志是两个标志-i和-t的组合，用于crux中的STDIN和-t的-i标志以更格式化的方式显示输入的文本。</p><p id="497a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">docker exec是一个强大的命令，它的一个更常见、更强大的用途是打开容器的终端或外壳。</p><ul class=""><li id="f0f4" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj"><em class="je">docker exec-it container id sh</em></strong></li></ul><p id="a4ee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个具有相同效果的命令是:</p><ul class=""><li id="7475" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><strong class="ih hj">T17】docker run-it image-name shT19】</strong></li></ul></div></div>    
</body>
</html>