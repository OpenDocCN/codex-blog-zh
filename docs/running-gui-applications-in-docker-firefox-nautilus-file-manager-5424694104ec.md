# åœ¨ Docker ä¸­è¿è¡Œ GUI åº”ç”¨ç¨‹åºâ€”â€”Firefoxï¼ŒNautilus æ–‡ä»¶ç®¡ç†å™¨ã€‚

> åŸæ–‡ï¼š<https://medium.com/codex/running-gui-applications-in-docker-firefox-nautilus-file-manager-5424694104ec?source=collection_archive---------6----------------------->

## è¯å…¸

![](img/16f3fce3c00bc362700248f89b460c85.png)

# Docker æ˜¯ä»€ä¹ˆï¼Ÿ

Docker æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ—¨åœ¨é€šè¿‡ä½¿ç”¨å®¹å™¨æ¥ç®€åŒ–åº”ç”¨ç¨‹åºçš„åˆ›å»ºã€éƒ¨ç½²å’Œè¿è¡Œã€‚å®¹å™¨å…è®¸å¼€å‘äººå‘˜å°†åº”ç”¨ç¨‹åºä¸å®ƒéœ€è¦çš„æ‰€æœ‰éƒ¨åˆ†æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ¯”å¦‚åº“å’Œå…¶ä»–ä¾èµ–é¡¹ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªåŒ…è¿›è¡Œéƒ¨ç½²ã€‚é€šè¿‡è¿™æ ·åšï¼Œç”±äºæœ‰äº†å®¹å™¨ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ”¾å¿ƒï¼Œåº”ç”¨ç¨‹åºå°†åœ¨ä»»ä½•å…¶ä»– Linux æœºå™¨ä¸Šè¿è¡Œï¼Œè€Œä¸ç®¡è¯¥æœºå™¨çš„ä»»ä½•å®šåˆ¶è®¾ç½®å¯èƒ½ä¸ç”¨äºç¼–å†™å’Œæµ‹è¯•ä»£ç çš„æœºå™¨ä¸åŒã€‚

åœ¨æŸç§ç¨‹åº¦ä¸Šï¼ŒDocker æœ‰ç‚¹åƒè™šæ‹Ÿæœºã€‚ä½†ä¸è™šæ‹Ÿæœºä¸åŒçš„æ˜¯ï¼ŒDocker ä¸æ˜¯åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„è™šæ‹Ÿæ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨ä¸è¿è¡Œå®ƒä»¬çš„ç³»ç»Ÿç›¸åŒçš„ Linux å†…æ ¸ï¼Œå¹¶ä¸”åªè¦æ±‚åº”ç”¨ç¨‹åºé™„å¸¦ä¸»æœºä¸Šå°šæœªè¿è¡Œçš„ä¸œè¥¿ã€‚è¿™æå¤§åœ°æé«˜äº†æ€§èƒ½ï¼Œå¹¶å‡å°äº†åº”ç”¨ç¨‹åºçš„å¤§å°ã€‚

# å¯ä»¥å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºç±»å‹(é€šå¸¸æ˜¯æœåŠ¡):

*   ä½œä¸ºåå°æœåŠ¡è¿è¡Œçš„åº”ç”¨ç¨‹åº(å¦‚æ•°æ®åº“ã€web æœåŠ¡å™¨ç­‰)
*   åœ¨å‰å°è¿è¡Œçš„ GUI åº”ç”¨ç¨‹åºã€‚

ä»Šå¤©ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ç¬¬äºŒç§é€‰æ‹©:

# X çª—å£ç³»ç»Ÿ/ X:

X11 æ˜¯å½“å‰ç‰ˆæœ¬çš„ [*X è§†çª—ç³»ç»Ÿ*](http://www.linfo.org/x.html) ã€‚

![](img/367017ba4a241bf509e9a72709d6be53.png)

x ä¸º GUI ç¯å¢ƒæä¾›äº†åŸºæœ¬æ¡†æ¶:åœ¨æ˜¾ç¤ºè®¾å¤‡ä¸Šç»˜åˆ¶å’Œç§»åŠ¨çª—å£ï¼Œä»¥åŠä¸é¼ æ ‡å’Œé”®ç›˜äº¤äº’ã€‚x ä¸å¼ºåˆ¶ç”¨æˆ·ç•Œé¢â€”â€”è¿™æ˜¯ç”±å•ç‹¬çš„ç¨‹åºå¤„ç†çš„ã€‚å› æ­¤ï¼ŒåŸºäº X çš„ç¯å¢ƒçš„è§†è§‰é£æ ¼å˜åŒ–å¾ˆå¤§ï¼›ä¸åŒçš„ç¨‹åºå¯èƒ½å‘ˆç°å‡ºå®Œå…¨ä¸åŒçš„ç•Œé¢ã€‚åœ¨ç±»ä¼¼äº Unix çš„æ“ä½œç³»ç»Ÿä¸Šã€‚

![](img/9d6721752df73f064ef148e12ec85ca4.png)

ä¸ºäº†è¿è¡Œ GUI åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª XServerï¼Œå®ƒå¯ä»¥ä½œä¸ºæ¯ä¸ª Linux æ¡Œé¢ç¯å¢ƒçš„ä¸€éƒ¨åˆ†ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹è¿è¡Œåœ¨æ‚¨çš„ Linux æœºå™¨ä¸Šçš„ X æœåŠ¡å™¨å’Œ X å®¢æˆ·æœº:

`$ ps -aux | grep X`

![](img/fb8b493491a2105ab3f5a86900c9996d.png)

*å¯¹äº Windowsï¼Œå¯ä»¥ä½¿ç”¨*[*Xming*](https://sourceforge.net/projects/xming/)*ã€‚*

*å¯¹äº OSXï¼Œå¯ä»¥ç”¨*[*Xquarkz*](https://www.xquartz.org/)*ã€‚*

ä½†æ˜¯åœ¨å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½• x serverâ€”â€”æ‰€ä»¥æˆ‘ä»¬å°†:

*   å°†æœ¬åœ°æœºå™¨ä¸Š`/tmp/.X11-unix`ä¸­çš„`X11`æ’åº§å®‰è£…åˆ°å®¹å™¨ä¸­çš„`/tmp/.X11-unix`ä¸­ã€‚

`-v /tmp/.X11-unix:/tmp/.X11-unix`

*   å°†ä¸»æœºçš„**æ˜¾ç¤º**ç¯å¢ƒå˜é‡å…±äº«ç»™å®¹å™¨

`-e DISPLAY=$DISPLAY`

*   ç”¨ä¸»æœº**è¿è¡Œå®¹å™¨**ç½‘ç»œé©±åŠ¨ç¨‹åº

`--net=host`

# ç¤ºä¾‹ 1:ä½¿ç”¨ç¤ºä¾‹ GUI åº”ç”¨ç¨‹åº(Firefox)æ„å»ºå›¾åƒçš„ Dockerfile:

`$ cat Dockerfile`

`$ sudo docker build -t mtabishk/firefox .`

![](img/40284a05aa42d6e48d11dd6101f3cf2a.png)

ç å¤´ä¸­å¿ƒ:[https://hub.docker.com/repository/docker/mtabishk/firefox](https://hub.docker.com/repository/docker/mtabishk/firefox)

`$ sudo docker run -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix --net=host mtabishk/firefox:v1.0.0`

![](img/8b83f68c5ec9f44300ab49673ec86975.png)

æ‚¨åº”è¯¥ä¼šçœ‹åˆ° firefox GUI åº”ç”¨ç¨‹åºç°åœ¨æ˜¾ç¤ºåœ¨æ‚¨çš„ä¸»æœºæ“ä½œç³»ç»Ÿæ¡Œé¢ä¸Šã€‚

# ç¤ºä¾‹ 2:ä½¿ç”¨ç¤ºä¾‹ GUI åº”ç”¨ç¨‹åº(Nautilus æ–‡ä»¶ç®¡ç†å™¨)æ„å»ºå›¾åƒçš„ Dockerfile:

`$ cat Dockerfile`

`$ sudo docker build -t mtabishk/nautilus-ubuntu .`

![](img/0fa1fcf91f7869eccbdffa273d811d46.png)

docker Hub:[https://Hub . docker . com/repository/docker/mtabishk/nautilus-Ubuntu](https://hub.docker.com/repository/docker/mtabishk/nautilus-ubuntu)

`$ sudo docker run -it --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix mtabishk/nautilus-ubuntu`

![](img/5a5b02ec99658e191c47d09f1531f2de.png)![](img/22987cd39afc65b252b46c26cda48418.png)

æ‚¨åº”è¯¥ä¼šçœ‹åˆ° Nautilus GUI åº”ç”¨ç¨‹åºç°åœ¨æ˜¾ç¤ºåœ¨æ‚¨çš„ä¸»æœºæ“ä½œç³»ç»Ÿæ¡Œé¢ä¸Šã€‚

ä»Šå¤©å°±åˆ°è¿™é‡Œå§ï¼æˆ‘å¾ˆå¿«ä¼šå¸¦ä¸€äº›æ–°æ–‡ç« å›æ¥ï¼Œè°¢è°¢ï¼ğŸ¤—

ç©†ç½•é»˜å¾·Â·å¡”æ¯”ä»€Â·åæˆ´

é¢†è‹±:[https://www.linkedin.com/in/mtabishk/](https://www.linkedin.com/in/mtabishk/)