<html>
<head>
<title>Welcome to pl-decorator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">欢迎来到pl-decorator</h1>
<blockquote>原文：<a href="https://medium.com/codex/welcome-to-pl-decorator-40442b512f96?source=collection_archive---------8-----------------------#2022-06-08">https://medium.com/codex/welcome-to-pl-decorator-40442b512f96?source=collection_archive---------8-----------------------#2022-06-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/687ad0e117f20136af228e2aa19bd41e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*XNdH_8BXlCf0FFnf.png"/></div></figure><p id="b31b" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">pl-decorator 是一个decorator集合，支持开发人员在低时间开销下开发解决方案</p></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h1 id="9ad5" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">装置</h1><p id="0597" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">用npm安装pl-decorator</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="d01c" class="ld js hi kz b fi le lf l lg lh">npm install pl-decorator</span></pre></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h1 id="3ee0" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">特征</h1><p id="2ebb" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">在这个版本中，有非常实用的装饰类，属性，类的属性和其他</p><p id="9fe4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">装饰类:</p><ul class=""><li id="59c4" class="li lj hi io b ip iq it iu ix lk jb ll jf lm jj ln lo lp lq bi translated"><strong class="io hj"> @Singleton() </strong></li><li id="e058" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj ln lo lp lq bi translated"><strong class="io hj">@可注射()</strong></li></ul><p id="fd0f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">装饰方法:</p><ul class=""><li id="b4ca" class="li lj hi io b ip iq it iu ix lk jb ll jf lm jj ln lo lp lq bi translated"><strong class="io hj"> @Log </strong>(模式:" Log " | " debug " | " info " | " warn " = " Log ")</li><li id="1140" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj ln lo lp lq bi translated"><strong class="io hj">@ try catch</strong>(error handle:new()=&gt;error handle)</li><li id="2d69" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj ln lo lp lq bi translated"><strong class="io hj">@延迟</strong>(毫秒)</li></ul><p id="bcc9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">属性类的装饰器:</p><ul class=""><li id="7b4c" class="li lj hi io b ip iq it iu ix lk jb ll jf lm jj ln lo lp lq bi translated"><strong class="io hj">@ format date</strong>(format:string = " DD/MM/yyyy HH:MM:ss "，localeId = "it ")</li><li id="d7cd" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj ln lo lp lq bi translated"><strong class="io hj"> @FormatNumber </strong>(格式:string | string[] = FORMAT_NUMBER。它，选项？:国际。NumberFormatOptions)</li><li id="42ee" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj ln lo lp lq bi translated"><strong class="io hj"> @Inject </strong>(类型:类)</li></ul></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h1 id="a248" class="jr js hi bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">用法/示例</h1><h2 id="9127" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@日志</h2><p id="1e39" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">该注释负责包装带注释的函数，并插入开始和结束函数日志。日志报告输入参数和返回值，以防函数返回值</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="60b7" class="ld js hi kz b fi le lf l lg lh">import { Log  } from "pl-decorator"</span><span id="59f2" class="ld js hi kz b fi mj lf l lg lh">export class Test {</span><span id="e1f5" class="ld js hi kz b fi mj lf l lg lh">  <br/>  public time:Date = null;</span><span id="6b93" class="ld js hi kz b fi mj lf l lg lh">  constructor() {<br/>    this.time=new Date()<br/>  }</span><span id="049c" class="ld js hi kz b fi mj lf l lg lh">  @Log()<br/>  getDate() {<br/>    return this.time<br/>  }<br/>}</span></pre></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h2 id="f549" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@TryCatch()</h2><p id="1e4a" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">该注释包装了方法，添加了tye catch块，并将所有异常抛出集中在HandlerError中。该注释在输入中接收任何实现herrorhandler接口的类，以便传递遇到的异常的结果，从而集中处理错误。</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="0acf" class="ld js hi kz b fi le lf l lg lh">@Singleton<br/>    export class MyErrorHandler implements ErrorHandle {<br/>        constructor() {</span><span id="5d49" class="ld js hi kz b fi mj lf l lg lh">        }<br/>        handleError(error: Error, propertyKey: string) {<br/>        console.log(`Exception from  method ${propertyKey}`);<br/>        }<br/>    }</span><span id="e164" class="ld js hi kz b fi mj lf l lg lh">    export class Test { <br/>        public time: string = "";<br/>        constructor() { }</span><span id="08a2" class="ld js hi kz b fi mj lf l lg lh">        @TryCatch(MyErrorHandler)<br/>        throwExceptionTest(n) {<br/>            throw new Error("a")<br/>        }<br/>    }</span></pre></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h2 id="954f" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@单身</h2><p id="7d4c" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">这个注释实现了类的单例模式。通过用这个注释来注释一个类，在构造该类的时候，它先前创建的实例被返回，如果它不可用，一个新的类被创建并且该实例被保存以使它以后可用。</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="5b5d" class="ld js hi kz b fi le lf l lg lh">@Singleton<br/>    export class MyErrorHandler implements ErrorHandle {<br/>        constructor() {  }<br/>        handleError(error: Error, propertyKey: string) {<br/>        	console.log(`Exception from  method ${propertyKey}`);<br/>        }<br/>    }</span></pre></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h2 id="bbc5" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@FormatDate</h2><p id="f5a2" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">这个注释负责按照我们喜欢的方式格式化日期。允许的值是根据此格式计算的。</p><ol class=""><li id="4642" class="li lj hi io b ip iq it iu ix lk jb ll jf lm jj mk lo lp lq bi translated">YYYY: 4位数年份“2019”</li><li id="2c60" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">YY:两位数年份“19”</li><li id="63f1" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">MMMM:完整的月份“六月”</li><li id="44e2" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">嗯:3个字符的月份“六月”</li><li id="3929" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">一年中的某个月，用零填充的“06”</li><li id="5b56" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">m:一年中的月份“6”</li><li id="5dfb" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">DD:一个月中的某一天，用零填充的“01”</li><li id="b508" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">d:一月中的某一天“1”</li><li id="59e7" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">Do:一个月中的第几天，数字序数缩写为“1”</li><li id="8356" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">HH:一天中的小时，从0到24，用零填充，“14”</li><li id="7ca6" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">h:一天中的小时，从0到24，“14”</li><li id="6ca2" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">hh:12小时制中的一天中的小时，用零填充，“02”</li><li id="0a11" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">h:12小时制中的一天中的某个时间，“2”</li><li id="6455" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">分钟，零填充，“04”</li><li id="8305" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">男:分钟，“4”</li><li id="5bc7" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">ss:第二，零填充</li><li id="95bb" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">斯:第二</li><li id="9dda" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">答:上午或下午</li><li id="93b8" class="li lj hi io b ip lr it ls ix lt jb lu jf lv jj mk lo lp lq bi translated">答:上午或下午</li></ol><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="a3d4" class="ld js hi kz b fi le lf l lg lh">export class Test {<br/>        @FormatDate("HH:mm:ss a")<br/>        public time: Date = null;</span><span id="f5cf" class="ld js hi kz b fi mj lf l lg lh">        constructor() { this.time=new Date()}</span><span id="0e32" class="ld js hi kz b fi mj lf l lg lh">        getTime() {<br/>            return this.time;<br/>        }<br/>    }</span></pre></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h2 id="1a3f" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@格式编号</h2><p id="2e08" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">这个注释负责按照我们喜欢的方式格式化数字，例如，按照货币或其他方式</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="5851" class="ld js hi kz b fi le lf l lg lh">export class Test {<br/>        @FormatNumber(FORMAT_NUMBER.DE, {<br/>            style: 'currency',<br/>            currency: 'GBP'<br/>        })<br/>        public value= 123234345334454;</span><span id="9d20" class="ld js hi kz b fi mj lf l lg lh">        constructor() {  }</span><span id="178b" class="ld js hi kz b fi mj lf l lg lh">        getValue() {<br/>            return this.value;<br/>        }<br/>    }</span></pre><p id="7a51" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">当我们打印变量值时，它是用DE和GBP货币格式化的..这是可选的，在casi中是默认的</p></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h2 id="efb8" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@延迟</h2><p id="6ce5" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">这个注释负责scedue执行函数，它在输入时运行</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="d34c" class="ld js hi kz b fi le lf l lg lh">export class Test {</span><span id="8cb3" class="ld js hi kz b fi mj lf l lg lh">        public time: Date = null;</span><span id="73ef" class="ld js hi kz b fi mj lf l lg lh">        constructor() { this.time=new Date()}</span><span id="a5ce" class="ld js hi kz b fi mj lf l lg lh">        @Delay(5000)<br/>        getTime() {<br/>            return this.time;<br/>        }<br/>    }</span></pre><p id="0eb8" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">对于调用方法<strong class="io hj"> getTime()，</strong>需要运行await声明，</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="8a8b" class="ld js hi kz b fi le lf l lg lh">public async method() {<br/>	let t1 = new Test();<br/>	let response = <strong class="kz hj">await </strong>t1.getTime();<br/>	console.log(response);<br/>}</span></pre></div><div class="ab cl jk jl gp jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="hb hc hd he hf"><h2 id="4321" class="ld js hi bd jt lw lx ly jx lz ma mb kb ix mc md kf jb me mf kj jf mg mh kn mi bi translated">@可注射@注射</h2><p id="5380" class="pw-post-body-paragraph im in hi io b ip kp ir is it kq iv iw ix kr iz ja jb ks jd je jf kt jh ji jj hb bi translated">这些注释必须一个放在要注入的类上，一个放在类属性上，在同一个注释中声明的类将被注入。</p><p id="9b0a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">只有当该类被标记为@Injectable时，它才会被注入，否则将会抛出一个错误，指示该类不能被注入。</p><pre class="ku kv kw kx fd ky kz la lb aw lc bi"><span id="e029" class="ld js hi kz b fi le lf l lg lh">@Injectable<br/>    export class Test {<br/>        public time: Date = null;<br/>        constructor() { this.time=new Date()}<br/>        getTime() {<br/>            return this.time;<br/>        }<br/>    }</span><span id="13ab" class="ld js hi kz b fi mj lf l lg lh">    @Injectable<br/>    export class Test2 {<br/>        @Inject(Test1) test1:Test1;<br/>        console.log(this.test1.time);<br/>        public time: Date = null;<br/>        constructor() { this.time=new Date()}<br/>        getTime() {<br/>            return this.time;<br/>        }<br/>    }</span><span id="9757" class="ld js hi kz b fi mj lf l lg lh">    export class main {<br/>        @Inject(Test1) test1:Test1;<br/>        @Inject(Test2) test2:Test2;</span><span id="8c4b" class="ld js hi kz b fi mj lf l lg lh">        console.log(this.test2.time);<br/>        console.log(this.test1.time);</span><span id="477d" class="ld js hi kz b fi mj lf l lg lh">        //in this case, test1 will be created at runtime with injection system because test1 is marked Inject(..) in Test2 class<br/>        console.log(this.test2.test1.time);<br/>    }</span></pre><p id="7c8d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">所有标有@Inject(…)的属性都是自动创建的，并且将处于单例模式</p><p id="f9ac" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">感谢观看</p></div></div>    
</body>
</html>