<html>
<head>
<title>💪Deploy PostgreSQL using Infrastructure-As-Code(Azure Bicep)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">💪使用基础设施即代码(Azure Bicep)部署PostgreSQL</h1>
<blockquote>原文：<a href="https://medium.com/codex/deploy-postgresql-using-infrastructure-as-code-azure-bicep-3b563dc6427f?source=collection_archive---------4-----------------------#2021-11-06">https://medium.com/codex/deploy-postgresql-using-infrastructure-as-code-azure-bicep-3b563dc6427f?source=collection_archive---------4-----------------------#2021-11-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="7a74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用Azure Bicep部署带有PostgreSQL的Ubuntu虚拟机</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/8bd255cdf1d4d58bbee67f580b4306a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fteTPxETzxP4g4tMxDGOtQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用基础设施即代码(Azure Bicep)部署PostgreSQL</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="564d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文将展示如何使用Azure Bicep部署带有PostgreSQL的Ubuntu虚拟机，这是一种用于声明式部署Azure资源的领域特定语言(DSL)。</p><p id="be2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将利用Azure Linux CustomScript扩展在Ubuntu虚拟机中安装PostgreSQL服务器。</p><h1 id="ae29" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">先决条件</h1><ul class=""><li id="506c" class="ky kz hi ih b ii la im lb iq lc iu ld iy le jc lf lg lh li bi translated">一个活跃的Azure账户:你可以<a class="ae lj" href="https://azure.microsoft.com/free/" rel="noopener ugc nofollow" target="_blank">免费</a>创建一个账户。</li><li id="7766" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated"><a class="ae lj" href="https://github.com/azure/bicep" rel="noopener ugc nofollow" target="_blank"> Azure二头肌</a>安装在你的本地机器上。</li><li id="921b" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated">Azure PowerShell。参见:<a class="ae lj" href="https://docs.microsoft.com/en-us/powershell/azure/install-az-ps" rel="noopener ugc nofollow" target="_blank">安装Azure PowerShell </a>。</li><li id="7d95" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated">Azure订阅中的资源组</li></ul><p id="c8a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><h1 id="7227" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">解决方案概述</h1><p id="50bf" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">我们将创建一个Bicep模板来创建Ubuntu VM，并使用Azure Linux CustomScript扩展来安装PostgreSQL服务器，版本:9.3.5。</p><p id="6f20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">安装包括:</p><ul class=""><li id="786d" class="ky kz hi ih b ii ij im in iq ls iu lt iy lu jc lf lg lh li bi translated">港口:1999年，</li><li id="15b5" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated">数据目录:m/opt/pgsql_data，</li><li id="9d6e" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated">安装目录:/opt/pgsql，</li><li id="efcb" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated">用户:postgres</li></ul><p id="af76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该解决方案将包括以下文件:</p><ul class=""><li id="4e27" class="ky kz hi ih b ii ij im in iq ls iu lt iy lu jc lf lg lh li bi translated"><strong class="ih hj">📄<em class="lv"> main.bicep </em> </strong>:这是二头肌模板</li><li id="0b3d" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated"><strong class="ih hj">📄<em class="lv">azure deploy . parameters . JSON</em></strong>:这个参数文件包含用于部署Bicep模板的值。</li><li id="308e" class="ky kz hi ih b ii lk im ll iq lm iu ln iy lo jc lf lg lh li bi translated">📁工件:该文件夹将包含一个名为'<em class="lv"> install_postgresql.sh </em>'的脚本。</li></ul><p id="4613" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该模板还提供安装所需的存储帐户、虚拟网络、公共IP地址和网络接口。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/a5a6096dc170bed2982bf102a1f0a7fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8J6BLcfzvx3MeUlOjA63jg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">部署的资源</figcaption></figure><h1 id="3754" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">1.创建SSH密钥对</h1><p id="ac4b" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">第一步是创建一个SSH密钥对；您可以查看以下关于如何在Azure中为Linux虚拟机创建SSH密钥对的文章—<a class="ae lj" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/mac-create-ssh-keys" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/Azure/virtual-machines/Linux/MAC-create-SSH-keys</a></p><p id="545d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本例中，我们将使用Azure Bash控制台创建一个SSH密钥对。在Azure门户中，请求一个新的控制台，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lx"><img src="../Images/e5ec6fc191c5c7ecb85419bd1c9f4502.png" data-original-src="https://miro.medium.com/v2/resize:fit:90/0*ieKfXhLBpPiB3hna"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ly"><img src="../Images/5de2e52fb42c507978aadf40698ddb66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/0*HOGO6g0BB85N-aM_.png"/></div></figure><p id="29e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云壳— Azure门户</p><p id="bc82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们将使用下面的命令生成一个SSH密钥:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="a25e" class="me kb hi ma b fi mf mg l mh mi">ssh-keygen \<br/>    -m PEM \<br/>    -t rsa \<br/>    -b 4096 \<br/>    -C "postgresql" \<br/>    -f ~/.ssh/postgresql-key \<br/>    -N yourpasshphrase</span></pre><p id="d888" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在文件共享中的SSH目录下生成密钥。</p><p id="1a1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不熟悉SSH公钥的格式，可以使用下面的cat命令显示您的公钥，替换'<em class="lv"> ~/。如果需要，ssh/id_rsa.pub </em>'带有您自己的公钥文件的路径和文件名:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="ef3e" class="me kb hi ma b fi mf mg l mh mi">cat ~/.ssh/postgresql-key.pub</span></pre><p id="45fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的命令将在控制台中显示SSH公钥。我们将在部署期间需要它，所以请将它放在手边。</p><p id="e74a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">酷！现在我们有了SSH密钥对。我们将在参数文件中传递这个SSH密钥的值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/e903e1b3b796c9ca83d82ec58f5561ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJCoe-rqngV_t9T2LOXCgw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">SSH密钥</figcaption></figure><p id="4915" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是准备工件的位置。你有两个选择:一个选择是在Azure中创建一个存储帐户，然后创建一个名为‘artifacts’的容器。然后在该容器中上传以下文件。</p><p id="a485" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第二个选项是将工件(名为'<em class="lv"> install_postgresql.sh </em>'的脚本)存储在公共存储库中。在本例中，我们将使用该选项。</p><p id="6313" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lv">注意</em> </strong> <em class="lv">:如果您喜欢使用第一个选项，请确保您生成了正确的共享访问令牌(sa ),以便在部署期间可以访问文件/工件。传递两个参数值:SAS令牌和位置(工件位置的URL)。</em></p><h1 id="94ad" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">2.Azure二头肌模板-参数</h1><p id="3b13" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">在您的工作目录中创建一个新文件，并将其命名为'<em class="lv"> main.bicep </em>'。我们将定义以下参数:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="c4c6" class="me kb hi ma b fi mf mg l mh mi">@description('User name for the Virtual Machine.')<br/>param adminUsername string</span><span id="7182" class="me kb hi ma b fi mk mg l mh mi">@description('DNS Name for the publicly accessible node. Must be lowercase. It should match with the following regular expression: ^[a-z][a-z0-9-]{1,61}[a-z0-9]$ or it will raise an error.')<br/>param dnsNamePrefix string</span><span id="713f" class="me kb hi ma b fi mk mg l mh mi">@description('The size of the virtual machines used when provisioning')<br/>param VmSize string = 'Standard_B2s'</span><span id="cb52" class="me kb hi ma b fi mk mg l mh mi">@allowed([<br/>  '18.04-LTS'<br/>  '16.04.0-LTS'<br/>  '14.04.5-LTS'<br/>])<br/>@description('The Ubuntu version for the VM. This will pick a fully patched image of this given Ubuntu version.')<br/>param ubuntuOSVersion string = '18.04-LTS'</span><span id="81d6" class="me kb hi ma b fi mk mg l mh mi">@description('Location for all resources.')<br/>param location string = resourceGroup().location</span><span id="c19c" class="me kb hi ma b fi mk mg l mh mi">@allowed([<br/>  'sshPublicKey'<br/>  'password'<br/>])<br/>@description('Type of authentication to use on the Virtual Machine. SSH key is recommended.')<br/>param authenticationType string = 'sshPublicKey'</span><span id="f59f" class="me kb hi ma b fi mk mg l mh mi">@description('SSH Key or password for the Virtual Machine. SSH key is recommended.')<br/>@secure()<br/>param adminPasswordOrKey string</span><span id="4f9f" class="me kb hi ma b fi mk mg l mh mi">// @description('The base URI where artifacts required by this template are located. When the template is deployed using the accompanying scripts, a private location in the subscription will be used and this value will be automatically generated.')<br/>// param artifactsLocation string = 'https://gist.githubusercontent.com/daveRendon/35f78e47ce268bbd580e0fbad81f1678/raw/14885ade2ef5b91a85056c039f6ed2af5a480457/install_postgresql.sh'</span><span id="b9ca" class="me kb hi ma b fi mk mg l mh mi">// @description('The sasToken required to access _artifactsLocation.  When the template is deployed using the accompanying scripts, a sasToken will be automatically generated.')<br/>//@secure()<br/>//param artifactsLocationSasToken string = ''</span></pre><p id="bb8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意，我们将脚本存储在一个公共存储库中，以便在部署时访问它。作为最佳实践，您可以部署存储帐户，然后将脚本存储在存储帐户中，并生成SAS令牌以在部署时访问脚本。</p><h1 id="bbe4" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">3.Azure二头肌模板-变量</h1><p id="9020" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">我们将定义以下变量:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="be9e" class="me kb hi ma b fi mf mg l mh mi">var imagePublisher = 'Canonical'<br/>var imageOffer = 'UbuntuServer'<br/>var nicName_var = 'ubuntuVmNic'<br/>var addressPrefix = '10.0.0.0/16'<br/>var subnetName = 'Subnet'<br/>var subnetPrefix = '10.0.0.0/24'<br/>var publicIPAddressName_var = 'myPublicIP'<br/>var publicIPAddressType = 'Dynamic'<br/>var vmName_var = 'MyUbuntuVM'<br/>var virtualNetworkName_var = 'MyVNET'<br/>var subnetRef = resourceId('Microsoft.Network/virtualNetworks/subnets', virtualNetworkName_var, subnetName)<br/>var linuxConfiguration = {<br/>  disablePasswordAuthentication: true<br/>  ssh: {<br/>    publicKeys: [<br/>      {<br/>        path: '/home/${adminUsername}/.ssh/authorized_keys'<br/>        keyData: adminPasswordOrKey<br/>      }<br/>    ]<br/>  }<br/>}</span></pre><h1 id="01a9" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">4.Azure二头肌模板—资源</h1><p id="008d" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">我们将定义以下资源:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="7799" class="me kb hi ma b fi mf mg l mh mi">resource pip 'Microsoft.Network/publicIPAddresses@2021-02-01' = {<br/>  name: publicIPAddressName_var<br/>  location: location<br/>  properties: {<br/>    publicIPAllocationMethod: publicIPAddressType<br/>    dnsSettings: {<br/>      domainNameLabel: dnsNamePrefix<br/>    }<br/>  }<br/>}</span><span id="9aec" class="me kb hi ma b fi mk mg l mh mi">resource virtualNetworkName 'Microsoft.Network/virtualNetworks@2020-07-01' = {<br/>  name: virtualNetworkName_var<br/>  location: location<br/>  properties: {<br/>    addressSpace: {<br/>      addressPrefixes: [<br/>        addressPrefix<br/>      ]<br/>    }<br/>    subnets: [<br/>      {<br/>        name: subnetName<br/>        properties: {<br/>          addressPrefix: subnetPrefix<br/>        }<br/>      }<br/>    ]<br/>  }<br/>}</span><span id="24d0" class="me kb hi ma b fi mk mg l mh mi">resource nicName 'Microsoft.Network/networkInterfaces@2020-07-01' = {<br/>  name: nicName_var<br/>  location: location<br/>  properties: {<br/>    ipConfigurations: [<br/>      {<br/>        name: 'ipconfig1'<br/>        properties: {<br/>          privateIPAllocationMethod: 'Dynamic'<br/>          publicIPAddress: {<br/>            id: pip.id<br/>          }<br/>          subnet: {<br/>            id: subnetRef<br/>          }<br/>        }<br/>      }<br/>    ]<br/>  }<br/>  dependsOn: [<br/>    virtualNetworkName<br/>  ]<br/>}</span><span id="ce4b" class="me kb hi ma b fi mk mg l mh mi">resource vmName 'Microsoft.Compute/virtualMachines@2020-12-01' = {<br/>  name: vmName_var<br/>  location: location<br/>  properties: {<br/>    hardwareProfile: {<br/>      vmSize: VmSize<br/>    }<br/>    osProfile: {<br/>      computerName: vmName_var<br/>      adminUsername: adminUsername<br/>      adminPassword: adminPasswordOrKey<br/>      linuxConfiguration: ((authenticationType == 'password') ? json('null') : linuxConfiguration)<br/>    }<br/>    storageProfile: {<br/>      imageReference: {<br/>        publisher: imagePublisher<br/>        offer: imageOffer<br/>        sku: ubuntuOSVersion<br/>        version: 'latest'<br/>      }<br/>      osDisk: {<br/>        name: '${vmName_var}_OSDisk'<br/>        caching: 'ReadWrite'<br/>        createOption: 'FromImage'<br/>      }<br/>    }<br/>    networkProfile: {<br/>      networkInterfaces: [<br/>        {<br/>          id: nicName.id<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</span><span id="6179" class="me kb hi ma b fi mk mg l mh mi">resource vmName_newuserscript 'Microsoft.Compute/virtualMachines/extensions@2020-12-01' = {<br/>  parent: vmName<br/>  name: 'newuserscript'<br/>  location: location<br/>  properties: {<br/>    publisher: 'Microsoft.Azure.Extensions'<br/>    type: 'CustomScript'<br/>    typeHandlerVersion: '2.0'<br/>    autoUpgradeMinorVersion: true<br/>    settings: {<br/>      fileUris: [<br/>        '<a class="ae lj" href="https://gist.githubusercontent.com/daveRendon/35f78e47ce268bbd580e0fbad81f1678/raw/14885ade2ef5b91a85056c039f6ed2af5a480457/install_postgresql.sh'" rel="noopener ugc nofollow" target="_blank">https://gist.githubusercontent.com/daveRendon/35f78e47ce268bbd580e0fbad81f1678/raw/14885ade2ef5b91a85056c039f6ed2af5a480457/install_postgresql.sh'</a><br/>      ]<br/>      commandToExecute: 'bash install_postgresql.sh'<br/>    }<br/>  }<br/>}</span></pre><p id="d275" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意我们使用Azure Linux CustomScript扩展来部署PostgreSQL服务器。</p><h1 id="ea79" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">5.参数文件</h1><p id="07c7" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">创建一个名为“<em class="lv">azure deploy . parameters . JSON</em>”的新文件。下面的代码显示了参数文件的定义:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="7c6a" class="me kb hi ma b fi mf mg l mh mi">{<br/>    "$schema": "<a class="ae lj" href="https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#" rel="noopener ugc nofollow" target="_blank">https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#</a>",<br/>    "contentVersion": "1.0.0.0",<br/>    "parameters": {<br/>      "adminUsername": {<br/>        "value": "GEN-UNIQUE"<br/>      },<br/>      "dnsNamePrefix": {<br/>        "value": "GEN-UNIQUE"<br/>      },<br/>      "adminPasswordOrKey": {<br/>        "value": "GEN-SSH-PUB-KEY"<br/>      }<br/>    }<br/>  }</span></pre><h1 id="33fa" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">6.Azure Bicep模板-部署</h1><p id="4fe2" class="pw-post-body-paragraph if ig hi ih b ii la ik il im lb io ip iq lp is it iu lq iw ix iy lr ja jb jc hb bi translated">我们将使用下面的命令来部署我们的二头肌模板:</p><pre class="je jf jg jh fd lz ma mb mc aw md bi"><span id="00af" class="me kb hi ma b fi mf mg l mh mi">$date = Get-Date -Format "MM-dd-yyyy"<br/>$deploymentName = "AzInsiderDeployment"+"$date"</span><span id="7589" class="me kb hi ma b fi mk mg l mh mi">New-AzResourceGroupDeployment -Name $deploymentName -ResourceGroupName azinsider_demo -TemplateFile .\main.bicep -TemplateParameterFile .\azuredeploy.parameters.json -c</span></pre><p id="69d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了部署的预览:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/dc180e535754dad6e537fd81a3198830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O4sfn84sLsCqvyYw-Ubelg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用假设分析进行部署预览</figcaption></figure><p id="67a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们将执行部署。下图显示了部署输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/2a963767297b3e30d107c5c777c04d4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49ZXtBGgPjMUrou-K-fgUA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">部署输出—使用Azure Bicep的PostgreSQL</figcaption></figure><p id="3cc7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以SSH到虚拟机。您可以使用相同的Azure Cloud Shell SSH到虚拟机。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/33e1c3cc19b16153a7a18bfe6940a5db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QXruRK9E3JarR7dpHXP2LQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用Azure云外壳SSH到Azure上的Ubuntu VM</figcaption></figure><p id="0373" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">进入虚拟机后，您可以验证部署</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mo"><img src="../Images/fa410f9c15fac94253b6dc4bd443f839.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xjaTvtVlLyQaz9_oPPS_QQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">一种数据库系统</figcaption></figure><p id="e9b4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在下面的URL中找到这个解决方案的代码，请随意投稿！</p><div class="mp mq ez fb mr ms"><a href="https://github.com/daveRendon/azinsider/tree/main/application-workloads/postgresql-on-ubuntu" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hj fi z dy mx ea eb my ed ef hh bi translated">azin sider/应用程序工作负载/postgresql-on-ubuntu，位于主daveRendon/azinsider</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">在GitHub上创建一个帐户，为daveRendon/azinsider开发做出贡献。</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">github.com</p></div></div></div></a></div><p id="a719" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">👉<a class="ae lj" href="http://eepurl.com/gKmLdf" rel="noopener ugc nofollow" target="_blank"> <em class="lv">在此加入</em><strong class="ih hj"><em class="lv">azin sider</em></strong><em class="lv">邮件列表。</em> </a></p><p id="4ca6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="lv">-戴夫·r·</em></p></div></div>    
</body>
</html>