<html>
<head>
<title>Web Scraping The New York Times Articles with Python : Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python web抓取纽约时报的文章:第一部分</h1>
<blockquote>原文：<a href="https://medium.com/codex/web-scraping-the-new-york-times-articles-with-python-part-i-e2d6fc02d4e0?source=collection_archive---------2-----------------------#2022-04-05">https://medium.com/codex/web-scraping-the-new-york-times-articles-with-python-part-i-e2d6fc02d4e0?source=collection_archive---------2-----------------------#2022-04-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6ca4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在数字时代，你可能会在互联网上找到大量的公共信息，你可以利用这些信息为自己谋利。您可以手动将数据复制粘贴到一个新文档中来检索这些信息，但这可能非常耗时；然而，网络抓取是在相对较短的时间内提取<strong class="ih hj"><em class="jd"/></strong>大量数据的理想方式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/fbfede67c3f7c1b6ef234ebcc2b0ec7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skCruiXWmH_VSB-m4OJC-w.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">照片由<a class="ae ju" href="https://unsplash.com/@sarahshull?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">莎拉·舒尔</a>在<a class="ae ju" href="https://unsplash.com/s/photos/the-new-york-times?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="480c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Web抓取是使用软件程序从网站获取数据的自动<strong class="ih hj"> <em class="jd">过程，该软件程序通过手动利用HTTP协议或在应用程序中集成浏览器来复制人类web导航。</em></strong></p><p id="c15b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Web抓取被广泛使用，并且具有多种应用:</p><p id="24fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">营销和销售公司可以通过使用web抓取来定位其受众或跟踪行业趋势，从而获得与销售线索相关的信息。</p><p id="99c9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网络搜集对于寻找新项目、转售房产等信息的房地产公司很有帮助。</p><p id="9192" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Trivago等价格比较公司严重依赖网络抓取从各种电子商务网站收集产品和价格信息，以便为客户提供最佳酒店价格。</p><p id="44f2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">网络抓取Twitter数据通常用于在即将到来的选举中产生有见地的信息。</p><p id="a28e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">求职者可以从各种网站自动抓取招聘信息，并将其整合到一个数据源中。</p><p id="58c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="jd">是不是很神奇？</em></p><p id="df56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本帖将是<strong class="ih hj"> <em class="jd"> 3系列</em> </strong>的第一部分。我将带您了解如何从《纽约时报》收集文章，对它们进行预处理，删除标点符号和停用词，以及应用标记化、词条化和搭配。最后，我们将使用<strong class="ih hj"> <em class="jd"> LDA </em> </strong>进行主题发现，使用<strong class="ih hj"> <em class="jd"> TextBlob </em> </strong>进行情感分析。</p><p id="66d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我将提供关于如何抓取纽约时报文章的说明。 为了能够使用他们的API，你需要按照下面的说明创建一个开发者账户:</p><p id="1ec5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" href="https://developer.nytimes.com/get-started" rel="noopener ugc nofollow" target="_blank">https://developer.nytimes.com/get-started</a></p><p id="43fa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注册帐户时，必须注册一个应用程序，并选择要激活的API。一些选项是文章搜索API、热门故事API和存档API，但也包括电影评论或书籍API。您可以启用多个。一旦您创建了一个应用程序，您将获得您的API密钥，您将使用它与您选择的API进行交互。</p><p id="2789" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要了解如何请求文章搜索API，您可以查看概述:</p><p id="d8a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" href="https://developer.nytimes.com/docs/articlesearch-product/1/overview" rel="noopener ugc nofollow" target="_blank">https://developer . nytimes . com/docs/articlesearch-product/1/overview</a></p><p id="578b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">开始吧！</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="1dba" class="ka kb hi jw b fi kc kd l ke kf">import requests as req<br/>import time<br/>API_KEY='YOR_API_KEY' # your API key<br/>TOPIC='Technology' # keyword</span></pre><p id="c998" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在文章搜索概述中，您可以找到可用主题的列表。<br/>其中包括艺术、商业、教育、科学、时尚、健康、政治等等。</p><p id="711a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">url调用示例:</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="386a" class="ka kb hi jw b fi kc kd l ke kf">https://api.nytimes.com/svc/search/v2/articlesearch.json?q=technology&amp;api-key=yourkey</span></pre><p id="a7c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想搜索多个关键词，你可以使用news_desk。<br/>FQ = news _ desk:(“Technology”“Science”)用于技术和科学文章。<br/>除此之外，你还可以使用诸如出版日期、出版年份、来源、材料类型和星期几等字段来限制你的文章。</p><p id="13fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">文章搜索API一次最多返回10个结果。请记住，每个API有一个请求限制:每分钟10个请求，每天4000个请求。<br/>这里我们收集了1200篇文章，并将使用time.sleep()来避免达到API的每分钟请求限制。sleep函数在给定的秒数内暂停执行。</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="ce22" class="ka kb hi jw b fi kc kd l ke kf">for i in range(120):<br/>  url='<a class="ae ju" href="https://api.nytimes.com/svc/search/v2/articlesearch.json?q='+TOPIC+'&amp;api-key='+API_KEY+'&amp;page='+str(i)" rel="noopener ugc nofollow" target="_blank">https://api.nytimes.com/svc/search/v2/articlesearch.json?q='+TOPIC+'&amp;api-key='+API_KEY+'&amp;page='+str(i)</a><br/>  response = req.get(url).json()<br/>  time.sleep(6)<br/>response</span></pre><p id="0394" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的响应是JSON格式的，看起来像这样:</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="febc" class="ka kb hi jw b fi kc kd l ke kf">{'status': 'OK',<br/> 'copyright': 'Copyright (c) 2022 The New York Times Company. All Rights Reserved.',<br/> '<strong class="jw hj"><em class="jd">response</em></strong>': {'docs': [{'<strong class="jw hj"><em class="jd">abstract</em></strong>': 'Concerns that popular social media platforms can expose children to posts that are sexualized, hurt their body image or are violent have escalated in recent years.',<br/>    'web_url': '<a class="ae ju" href="https://www.nytimes.com/2022/03/29/technology/snapchat-tiktok-parental-control.html" rel="noopener ugc nofollow" target="_blank">https://www.nytimes.com/2022/03/29/technology/snapchat-tiktok-parental-control.html</a>',<br/>    'snippet': 'Concerns that popular social media platforms can expose children to posts that are sexualized, hurt their body image or are violent have escalated in recent years.',<br/>    '<strong class="jw hj"><em class="jd">lead_paragraph</em></strong>': 'A group of attorneys general on Tuesday asked Snap and TikTok to work more closely with parental control apps and to apply more scrutiny to inappropriate content on their platforms, the latest salvo in a growing fight over child protection between governments and social media companies.',<br/>    'source': 'The New York Times',<br/>    'multimedia': [],<br/>    '<strong class="jw hj"><em class="jd">headline</em></strong>': {'<strong class="jw hj"><em class="jd">main</em></strong>': 'State attorneys general ask Snap and TikTok to give parents more control over apps.',<br/>     'kicker': None,<br/>     'content_kicker': None</span></pre><p id="c454" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仔细查看回复，我们将提取摘要、标题和lead_paragraph(我只是为了更好地可视化而突出显示了它们)并创建一个文章列表。</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="121f" class="ka kb hi jw b fi kc kd l ke kf"># Extract the necessary fields from the response.<br/>articles = []<br/>docs = response['response']['docs']<br/>for doc in docs:<br/>        filteredDoc = {}<br/>        filteredDoc['title'] = doc['headline']['main']<br/>        filteredDoc['abstract'] = doc['abstract']<br/>        filteredDoc['paragraph']=doc['lead_paragraph']<br/>        articles.append(filteredDoc)<br/>articles[:10]</span></pre><p id="22dd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里我们可以看到输出的样子:</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="1e90" class="ka kb hi jw b fi kc kd l ke kf">[{'title': 'State attorneys general ask Snap and TikTok to give parents more control over apps.',<br/>  'abstract': 'Concerns that popular social media platforms can expose children to posts that are sexualized, hurt their body image or are violent have escalated in recent years.',<br/>  'paragraph': 'A group of attorneys general on Tuesday asked Snap and TikTok to work more closely with parental control apps and to apply more scrutiny to inappropriate content on their platforms, the latest salvo in a growing fight over child protection between governments and social media companies.'},<br/> {'title': 'Ben McKenzie Would Like a Word With the Crypto Bros',<br/>  'abstract': 'The actor, best known for his starring role in “The O.C.,” has become an outspoken critic of a volatile market driven by speculation. Who’s listening?',<br/>  'paragraph': 'ROCKDALE, Texas — Ben McKenzie was driving his father’s silver Subaru through Texas farmland, talking in breathless bursts about money: who has it, who needs it, what makes it real or fake. He detailed the perils of cryptocurrency exchanges, the online brokers that sell Bitcoin and Ether to speculators, then delivered a glowing endorsement of “Capital in the Twenty-First Century,” a 700-page book by the economist Thomas Piketty about income inequality and the power of wealthy capitalists.'},<br/> {'title': 'How Robots Can Assist Students With Disabilities',<br/>  'abstract': 'New tools use artificial intelligence to assist students with autism and dyslexia and address accessibility for those who are blind or deaf.',<br/>  'paragraph': 'This article is part of a limited series on how artificial intelligence has the potential to solve everyday problems.'},</span></pre><p id="21d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">瞧啊。既然我们已经使用纽约时报API收集了文章，我们将创建一个熊猫数据帧，并将其保存为CSV文件以供以后使用。</p><pre class="jf jg jh ji fd jv jw jx jy aw jz bi"><span id="85f0" class="ka kb hi jw b fi kc kd l ke kf">import pandas as pd<br/>df = pd.DataFrame(data=articles)<br/>df.to_csv('TechArticles.csv')</span></pre><p id="ef8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在下一篇文章中，我们将讨论数据预处理。我们将移除停用词，并应用标记化、词条化和搭配来为主题发现和情感分析做准备。</p><h2 id="9fa5" class="ka kb hi bd kg kh ki kj kk kl km kn ko iq kp kq kr iu ks kt ku iy kv kw kx ky bi translated">结论</h2><p id="62d2" class="pw-post-body-paragraph if ig hi ih b ii kz ik il im la io ip iq lb is it iu lc iw ix iy ld ja jb jc hb bi translated">Web抓取是一种从网站自动收集数据的有效方法。网络抓取可以跟踪价格、产生线索、改进营销技术、自动提取图像等。然而，你必须谨慎行事，以避免沉溺于不道德的行为。</p><p id="42c5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">参考资料:</p><p id="1e77" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" href="https://developer.nytimes.com/" rel="noopener ugc nofollow" target="_blank">纽约时报开发者网络</a></p><p id="7cdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Jupyter笔记本的详细代码可以在这里找到:</p><p id="3218" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae ju" href="https://github.com/sivosevic/NYTimesNLP/blob/main/NYTimesTechDataCollection.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/sivosevic/NYTimesNLP/blob/main/nytimestechdatacollection . ipynb</a></p><p id="5dd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您觉得这篇文章内容丰富、引人入胜，请务必关注我，以获得关于未来文章和教程的通知。</p><p id="d4d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以查看我的其他作品:<a class="ae ju" rel="noopener" href="/@eellaaivo">https://medium.com/@eellaaivo</a></p><p id="07e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读，敬请期待<a class="ae ju" rel="noopener" href="/@eellaaivo/analyzing-the-new-york-times-articles-with-python-part-ii-text-data-preprocessing-a-1cf7425acb86">的下一篇文章！</a></p></div></div>    
</body>
</html>