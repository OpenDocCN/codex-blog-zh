<html>
<head>
<title>Alpha Vantage: An Introduction to a Highly Efficient Free Stock API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Alpha Vantage:一个高效免费API的介绍</h1>
<blockquote>原文：<a href="https://medium.com/codex/alpha-vantage-an-introduction-to-a-highly-efficient-free-stock-api-6d17f4481bf?source=collection_archive---------1-----------------------#2021-04-20">https://medium.com/codex/alpha-vantage-an-introduction-to-a-highly-efficient-free-stock-api-6d17f4481bf?source=collection_archive---------1-----------------------#2021-04-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f7f9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用Python中的Alpha Vantage股票API提取股票数据的完整指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/0b8166047c353b644fbcb9af14d51a6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u-2txMbtL3KGyEiH"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">沙哈达特·拉赫曼在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="29d0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">从网站上手动提取股票数据是一项繁琐的任务。找到可靠的数据就更难了。对于初学者来说，这种情况很难处理。这个问题的解决方案是自动化提取数据的过程。我们如何做到这一点？答案很简单，借助股票API。</p><h1 id="4a51" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">什么和为什么要使用库存API？</h1><p id="1cfc" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated"><strong class="jq hj">什么:</strong>股票API是一个托管在云中的数据库，提供实时股票更新、当天数据、历史数据等等。</p><p id="26ed" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">原因:</strong>最近几天，几乎每个金融机构都在使用股票API进行交易和研究，因为它有助于减少直接从交易所购买股票数据的费用(这需要花费大量资金)。其次，借助编程，很容易与股票API进行交互，获取想要的信息。最后，我们可以使用高度可定制的功能访问各种类型的数据。</p><h2 id="77be" class="lh kl hi bd km li lj lk kq ll lm ln ku jx lo lp kw kb lq lr ky kf ls lt la lu bi translated"><strong class="ak">关于Alpha Vantage的一个说明:</strong></h2><p id="2974" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Alpha Vantage提供免费的股票API，用户可以通过这些API访问各种数据，如股票、货币和加密货币的实时更新和历史数据。</p><h1 id="ddbf" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">我们要做什么？</h1><p id="68de" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在本文中，我们将使用python与Alpha Vantage提供的股票API进行交互，以提取三种类型的股票数据:日内数据、历史数据和股票的最新更新或信息。在进入编码部分之前，用户必须在Alpha Vantage(<a class="ae jn" href="https://www.alphavantage.co/support/#api-key" rel="noopener ugc nofollow" target="_blank">https://www.alphavantage.co/support/#api-key</a>)上创建一个开发者账户，只有这样，才可以访问API密钥(API的重要部分)来提取数据。</p><h1 id="7abc" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">导入包</h1><p id="ecf8" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在这篇文章中，我们将只使用两个包:熊猫和请求。Pandas包用于执行大量的数据操作和处理，Requests包提供了从API提取数据的功能。</p><p id="3ec0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> Python实现:</strong></p><pre class="iy iz ja jb fd lv lw lx ly aw lz bi"><span id="6c22" class="lh kl hi lw b fi ma mb l mc md">import pandas as pd<br/>import requests</span></pre><p id="7e2f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">既然我们已经将所需的包导入到python环境中。所以，让我们开始提取一些数据！</p><h1 id="9d28" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">提取当天数据</h1><p id="6794" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">这部分我们要用Alpha Vantage提供的股票API来拉特斯拉股票的日内数据。强烈建议将这个特定的API用于短期图表或交易策略开发。</p><p id="2be0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> Python实现:</strong></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="46db" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">输出:</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/cc3774e216584922498dd727eb0847c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NInOALwIWZt_XZds1UVJSA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">TSLA日内数据(图片由作者提供)</figcaption></figure><p id="2190" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码解释:</strong>首先，我们定义一个名为“get_intraday_data”的函数，它以股票的符号(“symbol”)和数据点之间的时间间隔(“interval”)作为参数。在函数内部，我们首先将Alpha Vantage提供的秘密API密钥(不应该泄露)存储到‘API _ key’变量中。接下来，我们定义一个变量‘api _ url’来存储API的URL，以提取当天数据。在requests包提供的“get”函数的帮助下，我们以JSON格式将数据提取并存储到“raw_df”变量中。在做了一些数据处理和操作后，我们以清晰的格式返回当天的数据。最后，我们正在调用我们创建的函数，以1分钟的时间间隔拉特斯拉股票的日内数据。</p><p id="23ab" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本文中，我使用1分钟作为时间间隔只是为了举例说明，这样做没有任何特定的原因。除了选择1分钟之外，还有其他选项，如5分钟、15分钟、30分钟和60分钟。</p><h1 id="a80b" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">提取历史数据</h1><p id="f1c5" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">这部分是使用Alpha Vantage提供的股票API具体提取给定股票的历史数据。</p><p id="37bd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> Python实现:</strong></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="f09e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">输出:</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mh"><img src="../Images/6f40c1bb80a5ef21eca06c052a99ab7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXDvz4-MWXeawqZbwHdFRg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">MSFT的历史资料(图片由作者提供)</figcaption></figure><p id="c5a0" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码解释:</strong>我们做的第一件事是定义一个名为‘get _ historical _ data’的函数，该函数将股票的符号(‘symbol’)作为必需参数，将历史数据的开始日期(‘start _ date’)作为可选参数。像我们在前面的函数中所做的一样，我们定义了API键和URL，并将它们存储到各自的变量中。接下来，我们使用“get”函数提取JSON格式的历史数据，并将其存储到“raw_df”变量中。在对原始JSON数据进行清理和格式化之后，我们将以干净的Pandas数据帧的形式返回它。最后，我们调用创建的函数来提取微软从2020年开始的历史数据，并将其存储到' msft_hist '变量中。</p><h1 id="2302" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">获取最新更新</h1><p id="ec58" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在这一步，我们将使用Alpha Vantage提供的股票API提取给定股票的最新更新和信息。这一步非常有用，因为我们将要创建的函数会不断地、无缝地用最新的数据更新自己。</p><p id="ec4e" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj"> Python实现:</strong></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="164b" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">输出:</strong></p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mi"><img src="../Images/0aa3a2b03736d1a318ab54c9f225445a.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*Zeq53cgtGYLOBGXoAPzd2A.png"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">IBM最新更新(作者图片)</figcaption></figure><p id="82c5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><strong class="jq hj">代码说明:</strong>该函数的代码结构或格式与我们之前创建的函数基本相似，但是API的URL发生了变化。在这个函数中，涉及数据处理的步骤稍微有点复杂，因为提取的原始JSON数据相对比较混乱。从所表示的输出数据框架中，我们可以观察到股票的几乎每一个基本信息都被揭示了。</p><h1 id="cd2e" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">最后的想法！</h1><p id="2116" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在本文中，我们学习了使用Alpha Vantage提供的股票API提取股票的日内数据、历史数据和最新信息。我们只是探索了Alpha Vantage的大量库存API，以执行各种任务。此外，我们在定义API的URL时保留了默认的API参数，但是API附带了许多灵活且可定制的参数。因此，强烈建议尝试使用我们用不同的API参数创建的函数。就这样！我们最终使用自由库存API自动完成了金融领域的一项艰巨任务。希望你在本文中找到一些有用的东西。</p></div></div>    
</body>
</html>