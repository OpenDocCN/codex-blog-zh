<html>
<head>
<title>Piping in Linux/Unix: A Quick Guide.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Linux/Unix中的管道:快速指南。</h1>
<blockquote>原文：<a href="https://medium.com/codex/piping-in-linux-unix-a-quick-guide-c1d79d4e90a9?source=collection_archive---------8-----------------------#2021-08-21">https://medium.com/codex/piping-in-linux-unix-a-quick-guide-c1d79d4e90a9?source=collection_archive---------8-----------------------#2021-08-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dcf73b65cf159f8518d4049fb55ceb53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CuWINAWldfuOlFh34HeaIA.jpeg"/></div></div></figure><p id="a607" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">管道基本上是重定向的一种形式，其中一个CL程序的标准输出作为输入发送到linux和类似linux的操作系统中的另一个CL程序。管道决定了多个程序如何相互关联，其中一个程序需要另一个程序的输入。命令由管道字符“|”分隔，它告诉shell链接输入和输出。</p><p id="2dc6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能会问，重定向和管道有什么不同。嗯，<em class="jo">重定向</em>意在将<em class="jo"> stdout/stderr </em>写到一个文件或者从一个文件中读取<em class="jo"> stdin </em>。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="fafb" class="jy jz hi ju b fi ka kb l kc kd">ls -l &gt;list.txt</span><span id="1fbf" class="jy jz hi ju b fi ke kb l kc kd">ls wefefwf 2&gt; error.txt #assuming "wefefwf" doesn't exist. </span></pre><p id="e668" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo">管道</em>不同于重定向，因为管道将两个或多个命令连接成一个相关的组件，其中一个命令负责提供另一个命令期望的输入。</p><p id="407a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">考虑下面的例子:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="f281" class="jy jz hi ju b fi ka kb l kc kd">ls -l | less</span></pre><p id="9358" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> less </em>命令需要一个文件名来提取要显示的内容。但是通过将它与<em class="jo"> ls </em>命令连接在一起，可以将<em class="jo"> ls </em>提供的输出转储为<em class="jo"> less </em>进行显示。</p><p id="549a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是利用管道的几种情况。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="a17b" class="jy jz hi ju b fi ka kb l kc kd">ls -l | wc -l</span></pre><p id="94db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在上述命令中，'<em class="jo"> wc -l </em>'用于计算行数。与左半部分的'<em class="jo"> ls -l </em>'一起，结合“|”，可以用来统计<em class="jo"> ls </em>命令提供的<em class="jo"> stdout </em>的行数。</p><p id="99d3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果需要，我们可以在上面的例子中添加重定向，将行数存储到一个文件中。它看起来会像这样:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="f756" class="jy jz hi ju b fi ka kb l kc kd">ls -l | wc -l &gt; count.txt</span></pre><p id="8666" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上面的命令将创建一个<em class="jo"> count.txt </em>文件，以防它不存在，并将输出写入其中。但是如果<em class="jo"> count.txt </em>文件存在，它将覆盖文件中存在的计数。如果你想把计数添加到文件中，你可以添加一个额外的“&gt;”来实现。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="3334" class="jy jz hi ju b fi ka kb l kc kd">ls -l | wc -l &gt;&gt; count.txt</span></pre><p id="ae77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下面的例子中，<em class="jo">文件1 </em>、<em class="jo">文件1 </em>和<em class="jo">文件3 </em>的内容被连接起来，组合输出被发送到<em class="jo"> wc </em>命令以计算字数。</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="62da" class="jy jz hi ju b fi ka kb l kc kd">cat file1 file2 file3 | wc -w</span></pre></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><h1 id="e151" class="km jz hi bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak">三通命令。</strong></h1><p id="7075" class="pw-post-body-paragraph iq ir hi is b it lj iv iw ix lk iz ja jb ll jd je jf lm jh ji jj ln jl jm jn hb bi translated">在上一个例子中，我们看到了如何使用管道来获得连接在一起的3个不同文件的字数。但是如果我们想将连接的结果保存到一个新文件中呢？您可能会认为我们可以通过执行以下命令来做到这一点:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="8e32" class="jy jz hi ju b fi ka kb l kc kd">cat file1 file2 file3 &gt; new.txt  | wc -w</span></pre><p id="fa90" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">惊喜惊喜！这个命令不起作用。因为<em class="jo"> wc </em>命令期望<em class="jo"> stdout </em>而不是一个文件。通过执行上面的命令，连接结果已经被发送到一个文件中，对于<em class="jo"> wc </em>命令来说没有什么剩余。那么，怎样才能得到我们想要的结果呢？</p><p id="0166" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是"<em class="jo"> tee </em>"命令的用武之地。Tee程序使得使用一个<em class="jo"> stdout </em>来实现我们两个的意图成为可能。<em class="jo"> tee </em>命令的一般形式如下:</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="e6f5" class="jy jz hi ju b fi ka kb l kc kd">&lt;command1&gt; | tee file.txt | &lt;command2&gt;</span></pre><p id="e402" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="jo"> tee </em>程序读取标准输入，并将标准输出和一个文件复制到<em class="jo">。这个命令非常有用，因为它使我们能够在不妨碍整个管道流的情况下捕获中间信息。</em></p><p id="c96c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，如果我们映射这些知识来从上面的例子中得到我们想要的东西，所需的命令将是，</p><pre class="jp jq jr js fd jt ju jv jw aw jx bi"><span id="71ce" class="jy jz hi ju b fi ka kb l kc kd">cat file1 file2 file3 | tee  new.txt  | wc -w</span></pre></div><div class="ab cl kf kg gp kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="hb hc hd he hf"><p id="88e8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗯，这是一个超级短的管道介绍。我希望你对管道的影响有个基本的概念。下次见！</p></div></div>    
</body>
</html>