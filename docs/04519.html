<html>
<head>
<title>Got Logging?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有伐木吗？</h1>
<blockquote>原文：<a href="https://medium.com/codex/got-logging-dd36935fc870?source=collection_archive---------10-----------------------#2021-12-08">https://medium.com/codex/got-logging-dd36935fc870?source=collection_archive---------10-----------------------#2021-12-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f32b4092869b020b90deba26e3a2dad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwKe_hmoOZ5MzGhSI48Dow.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">作者图片</figcaption></figure><p id="bc5b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您的Python项目中集成了日志记录功能吗？我不会试图让你相信拥有这样的功能的重要性；我会让你试一试再决定。</p><p id="b9ff" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hj"> <em class="js">日志</em> </strong>模块是标准Python库的一部分，如果设置得当，它可以帮助您调试代码，对代码的运行时特征进行分析，和/或收集代码执行过程中的信息。</p><p id="9ced" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">有很多有用的资源解释了如何使用<strong class="iw hj"> <em class="js">日志</em> </strong>模块。可以先参考<a class="ae jt" href="https://realpython.com/python-logging/" rel="noopener ugc nofollow" target="_blank"> Real Python </a>的或者<a class="ae jt" href="https://www.digitalocean.com/community/tutorials/how-to-use-logging-in-python-3" rel="noopener ugc nofollow" target="_blank">数字海洋</a>的；最后可以参考Python库网页中的<a class="ae jt" href="https://docs.python.org/3/library/logging.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="9fb2" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我想和你分享一个我经常使用的实现。</p><h1 id="e7ee" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">密码</h1><p id="fa49" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">让我们从导入所需的包开始。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="05a6" class="lg jv hi lc b fi lh li l lj lk"># import packages<br/>import logging<br/>from datetime import datetime</span></pre><p id="53b7" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们定义类和类中的函数。</p><figure class="kx ky kz la fd ij"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="c030" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们假设你已经用文件名<strong class="iw hj"><em class="js">manageprojectlogging . py</em></strong>保存了这个类。从那时起，你需要做的就是初始化这个类并调用类中的函数。</p><p id="6116" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是这个类中可用的函数及其用途。</p><ul class=""><li id="2ef5" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated"><strong class="iw hj"><em class="js">configureProjectLogging:</em></strong>此功能让您配置您的记录器对象名、日志文件名和日志级别；你可以在这里阅读更多关于不同级别的日志<a class="ae jt" href="https://docs.python.org/3/howto/logging.html" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="f39f" class="ln lo hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated"><strong class="iw hj"> <em class="js"> logMessage: </em> </strong>这个函数让你在执行代码时记录重要的信息。您可以将此函数与<strong class="iw hj"><em class="js">configureProjectLogging</em></strong>一起嵌入到代码中的关键位置。例如，当你执行你的代码时，你想跟踪什么样的异常发生；您需要做的就是放置configureProjectLogging和logMessage函数</li><li id="f1db" class="ln lo hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated"><strong class="iw hj"><em class="js">resetProjectLogs:</em></strong>此功能永久删除之前会话的所有日志条目。</li></ul><p id="87be" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们看看如何调用这些函数。您需要注意日志记录的不同级别，日志的重要性从左到右依次增加:调试、信息、警告、错误、严重。例如，<strong class="iw hj">如果您将记录器配置为信息记录级别，并命令记录器在调试级别记录消息，则记录器不会这样做</strong>；发生这种情况是因为您将记录器配置为只记录信息或更高重要级别的消息。当您调用如下所示的函数时，</p><ul class=""><li id="c6d2" class="ln lo hi iw b ix iy jb jc jf lp jj lq jn lr jr ls lt lu lv bi translated">根据您传递给<strong class="iw hj"> <em class="js"> loggerFile </em> </strong>参数的名称自动生成一个日志文件，</li><li id="3398" class="ln lo hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">您可以先使用<strong class="iw hj"><em class="js">configureProjectLogging</em></strong>配置记录器，然后调用<strong class="iw hj"> <em class="js"> logMessage </em> </strong>，</li><li id="f59c" class="ln lo hi iw b ix lw jb lx jf ly jj lz jn ma jr ls lt lu lv bi translated">您需要确保<strong class="iw hj"> <em class="js"> loggingLevel </em> </strong>参数在两个函数上设置为相同的级别，或者在<strong class="iw hj"><em class="js">configureProjectLogging</em></strong>中设置为最低级别(您希望为您的项目记录日志),在您调用<strong class="iw hj"> <em class="js"> logMessage </em> </strong>时为消息定义不同的更高级别。</li></ul><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="39b2" class="lg jv hi lc b fi lh li l lj lk">from manageProjectLogging import manageProjectLogging</span><span id="6ed9" class="lg jv hi lc b fi mb li l lj lk"># initialize the class<br/>logger = manageProjectLogging()</span><span id="975a" class="lg jv hi lc b fi mb li l lj lk"># construct message<br/>_message = '** construct your message here **'</span><span id="ef98" class="lg jv hi lc b fi mb li l lj lk"># configure logger<br/>logger.configureProjectLogging(loggerName = 'myProjectLogger',<br/>                               loggerFile = 'myProjectLogs.log',<br/>                               loggingLevel = 'INFO',<br/>                               debugConfiguration = False)</span><span id="6b7b" class="lg jv hi lc b fi mb li l lj lk"><br/># log message<br/>logger.logMessage(message = _message,<br/>                  loggingLevel = 'INFO',<br/>                  printBool = False)</span></pre><p id="4e17" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在开始下一次执行代码之前，让我们看看如何重置日志文件以删除以前收集的日志条目。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="7baa" class="lg jv hi lc b fi lh li l lj lk">from manageProjectLogging import manageProjectLogging</span><span id="69ce" class="lg jv hi lc b fi mb li l lj lk"># initialize the class<br/>logger = manageProjectLogging()</span><span id="6b9c" class="lg jv hi lc b fi mb li l lj lk"># reset log file<br/>logger.resetProjectLogs()</span></pre><p id="ee21" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">除了以上所有内容，您有时可能会发现日志文件中的一些日志条目来自第三方包。您可能会发现配置这些第三方包的记录器并防止它们在您定制的项目日志中生成条目是很有用的。让我们看看如何为一个通常被称为<strong class="iw hj"> <em class="js"> matplotlib </em> </strong>的第三方包实现这一点。</p><pre class="kx ky kz la fd lb lc ld le aw lf bi"><span id="0bcc" class="lg jv hi lc b fi lh li l lj lk"># configure third party package logging - matplotlib<br/>logging.getLogger('matplotlib').setLevel(logging.CRITICAL + 1)<br/>logging.getLogger('matplotlib').propagate = False</span></pre><p id="f41f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这样，您定制的项目日志记录程序的日志文件就不会包含来自其他包/模块的日志条目。</p><p id="00fc" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以在GitHub 上找到这个<a class="ae jt" href="https://gist.github.com/troymyname/83d74999b06bbe5ba4f705303f41f1ec" rel="noopener ugc nofollow" target="_blank">要点中的所有代码。</a></p><h1 id="f6b2" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">结论</h1><p id="a7a0" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">在这篇文章中，您了解了如何为您的项目设置日志系统，如何配置日志系统，以及如何永久删除以前的日志条目。此外，您还了解了如何“静音”来自第三方包的日志条目。</p><p id="d626" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我希望你在读完这篇文章后能学到一些重要的技巧。如果你想支持我，让我产生更多这样的内容，你可以<a class="ae jt" href="https://www.buymeacoffee.com/tonmoyroy" rel="noopener ugc nofollow" target="_blank">给我买杯咖啡</a>。谢谢大家！</p><h1 id="c9c1" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">参考</h1><p id="acfb" class="pw-post-body-paragraph iu iv hi iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr hb bi translated">[1] Python。(未注明)。<em class="js">日志记录Python的日志记录工具</em>。<a class="ae jt" href="https://docs.python.org/3/library/logging.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/3/library/logging.html</a></p><p id="1e9b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">[2] Ajitsaria，Abhinav。(未注明)。<em class="js">登录Python </em>。真正的Python。https://realpython.com/python-logging/<a class="ae jt" href="https://realpython.com/python-logging/" rel="noopener ugc nofollow" target="_blank"/></p><p id="293f" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">[3]塔利亚费里，丽莎。(2017年5月2日)。<em class="js">如何在Python 3中使用日志记录</em>。数字海洋。<a class="ae jt" href="https://www.digitalocean.com/community/tutorials/how-to-use-logging-in-python-3" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-use-log in-python-3</a></p></div></div>    
</body>
</html>