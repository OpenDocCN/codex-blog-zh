<html>
<head>
<title>Debugging Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调试Node.js</h1>
<blockquote>原文：<a href="https://medium.com/codex/debugging-node-js-4544262349e1?source=collection_archive---------5-----------------------#2021-12-24">https://medium.com/codex/debugging-node-js-4544262349e1?source=collection_archive---------5-----------------------#2021-12-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/362c29ce400a5ea5cf3ce6a247aae0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcPykAdbPjB03dTwzsNiNw.png"/></div></div></figure><p id="4226" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">bug总是开发不可避免的一部分。你永远不知道你的程序什么时候会崩溃，在屏幕上抛出一个大错误。这就是为什么在本文中，我们将探索Node.js中的各种调试方法，以便您可以更快地摆脱困境，继续开发您的应用程序。</p><p id="162d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我看来，客户端Javascript(浏览器JS)调试起来容易多了，因为有‘开发工具’什么的。我们大多数人都有花哨的编辑器，让我们尽可能轻松、无痛苦地进行调试。</p><p id="292f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在，对于服务器端JavaScript AKA Node.js，情况并非总是如此。尽管现代IDE和编辑器提供了不可否认的支持，但有些情况可能会令人沮丧。</p><p id="f847" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Node.js中有很多调试方法，在本文中，我们将学习几种最流行的方法。当然，还有许多其他方式可以是编辑器自带的特定于IDE/代码编辑器的方式。另一方面，不管您使用什么编辑器，也有一些通用的调试方法。</p><h1 id="74a4" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">“臭名昭著”的console.log()</h1><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kn"><img src="../Images/69541f9bb23b8f0fe926678281e82b53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*upHDaGfJsIh5q8_RekdICQ.jpeg"/></div></div></figure><p id="b962" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我想说这是最受批评的调试方式，因为它的基本性质。但是尽管如此，在很多情况下，一个简单的“console.log()”可以跟踪代码中的错误，并帮助您更快地修复它。</p><p id="dbf7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">考虑下面的代码片段:</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/d36a7ec3558b3108cd868776c85a699b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kd-QdYZuniDCdWIZtiuFQw.jpeg"/></div></div></figure><p id="5f08" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你运行这段代码，你会得到这样的结果，即使数组中没有偶数。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/428ef5208adc56b5fec6163520381458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4-nVyqrMyy4WhmiNUIChA.jpeg"/></div></div></figure><p id="b1fc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗯，这是因为我有'<strong class="is hj"> <em class="jo">误把</em> </strong>'取模时用了<strong class="is hj"> 1而不是2 </strong>。每个数字都可以被1整除，所以测试通过了，将每个数字过滤到新数组中。这使得它的长度为0，因此“我们发现偶数NUMS”被打印出来，尽管实际上每个数字都是奇数。</p><p id="d275" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个例子很简单，你可以在一瞬间看到我们哪里出错了。<strong class="is hj">但是</strong>想象一下，这是一大块代码在做十几件事，很难跟踪代码出错的地方。您可以做的是，您可以定位打印结果的位置，然后您可以查看'<em class="jo"> evens </em>'数组由什么组成，以通过控制台日志记录' evens '数组产生这样的输出。</p><pre class="ko kp kq kr fd ku kv kw kx aw ky bi"><span id="699c" class="kz jq hi kv b fi la lb l lc ld">console.log(evens)</span></pre><p id="9c7d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您将获得以下输出:</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/22476360b8b025ee900d0fe7dcf5ad2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*amx8-6zQRkzrviyI_R7AZQ.jpeg"/></div></div></figure><p id="f898" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在你可以很快到达“啊哈”时刻，因为你可以看到整个数组被打印出来，尽管并不均匀。你知道这是你的逻辑有问题，你可以在一个例子中纠正它。</p><p id="ad53" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">"<em class="jo"> console.log()" </em>可以帮助你将变量值转储到控制台，这样你就可以看看你的逻辑哪里出错了。希望您能在调试时看到简单的“<em class="jo"> console.log() </em>”语句的潜力。没问题的..继续下一个！</p><h1 id="bcdd" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">节点调试器</h1><p id="8d71" class="pw-post-body-paragraph iq ir hi is b it le iv iw ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn hb bi translated">这是调试影院的下一部分。添加一两个<em class="jo"> console.logs </em>来找到自己的路就可以了。但是当开发大型应用程序时(不像我愚蠢的<em class="jo"> checkEvens </em>例子，这可能会很快失控，并且随着你不断在各处添加<em class="jo"> console.logs </em>而变得越来越令人讨厌。</p><p id="6516" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">嗯，这正是<strong class="is hj">节点的内置调试器</strong>派上用场的时候。你可以很容易地使用你的浏览器(Chrome)，它是建立在<strong class="is hj"> <em class="jo"> v8 JavaScript引擎</em> </strong>之上的。是的，你没听错。您<em class="jo">可以借助浏览器</em>调试节点！</p><p id="0501" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步是将'<em class="jo">调试器</em>'关键字放在有问题的代码中任何有意义的地方。理想情况下，这应该在决策之前。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lj"><img src="../Images/862a4e43d8ab889ed16e6028ed755d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_SH5jr8Weib-bDRAdDSBYA.jpeg"/></div></div></figure><p id="b534" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，照常运行应用程序，但是使用'<em class="jo"> inspect </em>'参数。</p><pre class="ko kp kq kr fd ku kv kw kx aw ky bi"><span id="b8a0" class="kz jq hi kv b fi la lb l lc ld">node inspect app.js</span></pre><p id="96ad" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它应该让你这样，</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/31b4ceed2b83693f192d87c709aba7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NZ7W9BuOhglqCBZo9vP7yQ.jpeg"/></div></div></figure><p id="3eeb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下一步是打开chrome，进入'<strong class="is hj"> chrome://inspect </strong>'。如果您正确地完成了前面的所有步骤，那么您得到的页面应该类似于下面这样，</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/b1937a92aa2a27e95e9a8ded4929802f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*brr-9Bv8-nTgEAeEVFmS2w.jpeg"/></div></div></figure><p id="9f1e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在<em class="jo">远程目标</em>下，您将看到您刚刚在终端中运行的进程。点击相关目标下的“<em class="jo">检查</em>链接，将在“<em class="jo">开发工具</em>中打开您的文件。但是如果您的文件夹/文件没有被打开，您可以通过进入<strong class="is hj">文件系统- &gt;将文件夹添加到工作区</strong>来打开它。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kt"><img src="../Images/c18a80d0d1d4b0606c370681c4b2640b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYpF190PW8CxhCwpnE8rrw.jpeg"/></div></div></figure><p id="3492" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切就绪，可以单击右上角的play按钮，进入调试过程的下一步。在这种情况下，当遇到代码中的“debugger”关键字时，单击play按钮将立即冻结执行。从那里，您可以很容易地从右侧面板检查变量的值。</p><figure class="ko kp kq kr fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/576d15db3d643b5e312ca362ebad94f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1wgyaT8iRhklTi8SqW2IrA.jpeg"/></div></div></figure><p id="f4ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从上面的截图可以看出，在检查变量执行的值时，这种方式更容易、更快，并且可伸缩。您还可以添加断点，以便在您感兴趣的特定点停止执行。</p><p id="6950" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果需要进一步澄清，可以参考<a class="ae ll" href="https://nodejs.org/en/docs/guides/debugging-getting-started/" rel="noopener ugc nofollow" target="_blank">官方Node.js关于调试的指南</a>。</p></div><div class="ab cl lm ln gp lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="hb hc hd he hf"><p id="c7b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所以你有它！下次当你面临那些可怕的错误时，尝试使用这些方法。下次见！</p></div></div>    
</body>
</html>