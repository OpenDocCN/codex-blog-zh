<html>
<head>
<title>REST APIs Explained in 5 mins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5分钟内讲解REST APIs</h1>
<blockquote>原文：<a href="https://medium.com/codex/rest-apis-explained-in-5-mins-b8f83399c6cf?source=collection_archive---------6-----------------------#2021-06-19">https://medium.com/codex/rest-apis-explained-in-5-mins-b8f83399c6cf?source=collection_archive---------6-----------------------#2021-06-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3be0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于什么是REST API，已经有了这么多的技术定义。但是，大多数定义都不太好理解。这篇帖子试图用简单的英语解释什么是REST API，它解决了什么痛点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/5610ae7def51e6e2c65714e7fb168e36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*9mhEcbqWgKRMGu47Jeh7mQ.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">web应用程序的基本架构</figcaption></figure><h1 id="ca0a" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">背景</h1><p id="4383" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">使任何web应用程序工作的一种方法是在服务器端创建数据嵌入UI，并将整个UI以HTML的形式传递给客户端。人们可以使用像EJS或PUG这样的模板语言在后端服务器上生成HTML代码。</p><p id="47ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，并不是每个客户端都希望得到HTML模板形式的响应。想想不使用HTML的移动应用程序。我们可能希望像谷歌地图那样为第三方应用程序创建服务API。人们对他们的用户界面一无所知。一个人只需要数据，客户端被期望在自己生成的接口中填充这些数据。</p><p id="56ce" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">移动应用程序可能想使用Java、Swift、Objective C等不同的库。Web应用程序可能想要使用Angular.js、Vue.js或React.js，因此，在后端决定UI可能不是一个好的决定。此外，第三方应用程序的服务API不需要用户界面，它们只需要数据。</p><p id="fa59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，现在SPAs(单页应用程序)也在客户端使用。他们不期望URL会因为UI的改变而改变。这使得用户体验很差。他们只需要使用浏览器呈现的javascript来改变UI。你四处点击，然后你不要等待页面刷新。数据交互和填充在后台进行。</p><p id="c2eb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，到目前为止，我们所理解的问题是UI和数据需要解耦，以便数据可以跨多个客户端平台使用。</p><p id="94f4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">后端需要不同类型的响应。我们需要传输数据而不是UI。我们让客户端(移动设备、SPA、第三方应用程序)来处理数据。</p></div><div class="ab cl ks kt gp ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hb hc hd he hf"><h1 id="f70a" class="jp jq hi bd jr js kz ju jv jw la jy jz ka lb kc kd ke lc kg kh ki ld kk kl km bi translated">REST(表象状态转移)。</h1><p id="aa20" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">客户机-服务器体系结构由请求、响应和资源组成。资源是请求操作的HTTP请求的目标。它可以是数据库中的条目、图像、文档或任何东西。客户端通过HTTP请求对资源进行操作，并期望得到一个响应，给出关于在资源上执行所需操作的信息。</p><p id="02ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，以哪种格式期待来自服务器的数据。下图显示了不同类型的数据格式，这些数据格式可以通过具有其独特特征的API响应来呈现。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/3977b7a723ca325b3460a140f584d7ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fZLg8UFzm67yyNsAd2NLGw.png"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">不同类型的数据格式</figcaption></figure><p id="860b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最适合REST APIs的数据格式是JSON (Javascript对象符号)。这使得人们可以获得简洁的结构化数据，并且易于机器和人阅读。此外，它可以很容易地转换成JS对象，JS最终会在浏览器中运行。</p><p id="4aff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们从之前的知识中知道，什么是API(应用编程接口)。它是信息提供者和信息使用者之间的契约，有一套定义和协议。换句话说，如果你想与计算机或系统交互以检索信息或执行某项功能，API可以帮助你传达你希望系统做什么，以便它能够理解并完成请求。</p><p id="73a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们理解什么是API端点。API端点是HTTP URL和HTTP动词的组合。HTTP动词定义了请求的性质。请求会给资源带来什么变化？它只是获取资源、创建资源、修改资源、替换资源等等吗？</p><p id="9675" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由此，得到<a class="ae lj" href="https://example.com?user_id=1" rel="noopener ugc nofollow" target="_blank">https://example.com？user_id=1 </a>是一个端点。它表示我们想从代表example.com服务器的url中获取user_id为1的资源。<br/>下面的信息图展示了不同的HTTP动词及其用例。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lk"><img src="../Images/bb729029bb8bf891c8b5d3223eae1b6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*dM8X90R27RPKASaMYxalJw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">HTTP动词</figcaption></figure><p id="a7fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用正确的动词使API端点更容易预测。虽然，这只是惯例问题。您可以使用任何动词，并在服务器上执行您选择的代码。您可以发出GET请求，在数据库中创建一个条目。这是完全可能的。但是这只会给客户造成混乱，因为他无法预测API端点的行为。</p><p id="64d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们来定义一下。当客户端通过RESTful API发出请求时，它会将资源状态的<em class="ll">表示从客户端传输到服务器。状态可以表示关于客户的信息，即客户是谁，他被授权做什么，他请求在服务器上获得或改变哪个资源，他想要在服务器上做什么改变等等。</em></p><p id="2c78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务器事先不知道客户是谁，何时请求任何资源。每个请求都与前一个请求断开连接，并且在服务器端不维护任何用户会话。在维护与用户相关的信息(尤其是与用户身份相关的信息)至关重要的情况下，客户端会在auth报头中使用JWT令牌来对自身进行认证和授权。令牌再次存储在客户端，而不是服务器。服务器只生成或验证令牌，但从不存储它。因此，REST API完全是无状态的。</p><p id="f218" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">REST约定充分利用头部来传输关于资源的元数据。所有的授权令牌、在条款或格式方面期望什么样的响应等都通过请求和响应报头来传递。</p><p id="9784" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后总结一下，以下是REST架构的主要原则:</p><ul class=""><li id="6bd1" class="lm ln hi ih b ii ij im in iq lo iu lp iy lq jc lr ls lt lu bi translated">由客户机、服务器和资源组成的客户机-服务器体系结构，通过HTTP管理请求</li><li id="ff80" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated"><a class="ae lj" href="https://www.redhat.com/en/topics/cloud-native-apps/stateful-vs-stateless" rel="noopener ugc nofollow" target="_blank">无状态</a>客户端-服务器通信，这意味着get请求之间不存储任何客户端信息，每个请求都是独立的，互不关联的。</li><li id="948d" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">统一接口:明确定义的API端点，以及请求和响应数据结构。人们能够在客户机请求中准确地定义资源的状态。</li><li id="9849" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">分层系统:服务器可能会将HTTP请求转发给其他服务器，而客户端对此没有可见性</li><li id="42cc" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">简化客户端-服务器交互的可缓存数据。服务器发送给客户端的数据可以被缓存，一旦过期，可以再次请求该数据</li><li id="fd18" class="lm ln hi ih b ii lv im lw iq lx iu ly iy lz jc lr ls lt lu bi translated">按需编码(可选):在请求时从服务器向客户机发送可执行代码的能力，扩展了客户机的功能。然而，它很少被使用。</li></ul><h1 id="230b" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结论</h1><p id="86a0" class="pw-post-body-paragraph if ig hi ih b ii kn ik il im ko io ip iq kp is it iu kq iw ix iy kr ja jb jc hb bi translated">宁静的建筑是当今最受欢迎的建筑。很多人使用，很多人谈论，但是现在很好理解。这篇文章试图用最简单的语言解释REST原则。如果你喜欢这篇文章，并发现它是相关的，请在媒体上给一些掌声，并与相关人士分享。非常感谢你阅读这篇文章！！</p></div></div>    
</body>
</html>