<html>
<head>
<title>Calculator: Learn How to build a modern Calculator using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计算器:学习如何使用JavaScript构建一个现代计算器</h1>
<blockquote>原文：<a href="https://medium.com/codex/calculator-learn-how-to-build-a-modern-calculator-using-javascript-9f0bda18ff8e?source=collection_archive---------6-----------------------#2022-06-12">https://medium.com/codex/calculator-learn-how-to-build-a-modern-calculator-using-javascript-9f0bda18ff8e?source=collection_archive---------6-----------------------#2022-06-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/b638f36a3b42df2f2a3a85996c98794b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8pF4LCzIyakqqJ8SIRGhDw.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">用JS(Kebean)制作的现代计算器</figcaption></figure><div class=""/><p id="0487" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可能听说过，要想做得更好，你需要更多的练习。这是真的，因为通过有意识的练习，你发展了肌肉记忆。这就是<strong class="iw hy">项目</strong>出手的地方。项目是学习<strong class="iw hy"> JavaScript </strong>的最好方式，计算器是最好的选择项目之一。计算器涵盖了与<strong class="iw hy"> UI </strong>和<strong class="iw hy"> JavaScript </strong>的所有复杂交互。</p><p id="1743" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在这篇文章中，我将带你浏览使用<strong class="iw hy">普通JavaScript </strong>最佳实践和<strong class="iw hy">现代ES6 </strong>实践构建一个完全现代的计算器的步骤</p><p id="12e4" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">该计算器将能够:</p><ul class=""><li id="1cd5" class="js jt hx iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">加、乘、除和减运算</li><li id="f242" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">删除操作</li><li id="c5be" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">清除所有操作</li><li id="4d53" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">使用十进制数</li><li id="ed7d" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">连锁经营</li></ul><p id="e156" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">我们开始吧</strong></p><p id="673e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">项目设置</strong> : <em class="kg">如何设置您的项目</em></p><p id="2997" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">按照以下步骤设置您的项目:</p><ul class=""><li id="5a8c" class="js jt hx iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">创建一个名为“<strong class="iw hy"> <em class="kg">项目</em> </strong>的新文件夹，并打开你的代码编辑器(例如:visual studio code)</li><li id="3111" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">创建<strong class="iw hy"><em class="kg"/></strong><strong class="iw hy"><em class="kg">styles . CSS</em></strong>和<strong class="iw hy"> <em class="kg"> index.js </em> </strong></li><li id="421b" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">链接HTML中的文件</li></ul><h1 id="482e" class="kh ki hx bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">超文本标记语言</h1><p id="880e" class="pw-post-body-paragraph iu iv hx iw b ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr hb bi translated">用一个类创建一个<strong class="iw hy"> div </strong>。<strong class="iw hy">计算器</strong>会将所有东西包装在body标签内。</p><p id="23ee" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您还需要创建另一个带有类<strong class="iw hy">的<strong class="iw hy"> div </strong>。带有两个嵌套的<strong class="iw hy"> div </strong>的输出</strong>带有类<strong class="iw hy">。前一操作数</strong>和<strong class="iw hy">当前操作数</strong>分别在计算器屏幕<br/>中显示前一操作数和当前操作数，如下所示:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="0966" class="lt ki hx lp b fi lu lv l lw lx">&lt;div class="calculator"&gt;<br/>  &lt;div class = "output"&gt;<br/>     &lt;div class="previous-operand"&gt;&lt;/div&gt;<br/>     &lt;div class="current-operand"&gt;&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="247d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，创建计算器上从“<strong class="iw hy"> AC </strong>”到“<strong class="iw hy"> = </strong>”按钮的所有按钮</p><p id="f596" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="71d7" class="lt ki hx lp b fi lu lv l lw lx">&lt;div class="calculator"&gt;<br/>   &lt;div class="output"&gt;<br/>     &lt;div class="previous-operand"&gt;&lt;/div&gt;<br/>     &lt;div class="current-operand"&gt;&lt;/div&gt;<br/>   &lt;/div&gt;<br/>   &lt;button class="span-two"&gt;AC&lt;/button&gt;<br/>   &lt;button&gt;DEL&lt;/button&gt;<br/>   &lt;button&gt;÷&lt;/button&gt;<br/>   &lt;button&gt;1&lt;/button&gt;<br/>   &lt;button&gt;2&lt;/button&gt;<br/>   &lt;button&gt;3&lt;/button&gt;<br/>   &lt;button&gt;*&lt;/button&gt;<br/>   &lt;button&gt;4&lt;/button&gt;<br/>   &lt;button&gt;5&lt;/button&gt;<br/>   &lt;button&gt;6&lt;/button&gt;<br/>   &lt;button&gt;+&lt;/button&gt;<br/>   &lt;button&gt;7&lt;/button&gt;<br/>   &lt;button&gt;8&lt;/button&gt;<br/>   &lt;button&gt;9&lt;/button&gt;<br/>   &lt;button&gt;-&lt;/button&gt;<br/>   &lt;button&gt;.&lt;/button&gt;<br/>   &lt;button&gt;0&lt;/button&gt;<br/>   &lt;button class="span-two"&gt;=&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="7998" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Ps:记住，你得包含<strong class="iw hy">这个类。span-在“<strong class="iw hy"> AC </strong>”和“<strong class="iw hy"> = </strong>”按钮上的两个</strong>，使它们稍后跨越两列。</p><p id="1b69" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">注意，你可能很难得到“+”这个符号。如果是这样，你可以谷歌一下这个符号，复制粘贴。</p><p id="2aa8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">到目前为止一切顺利。</p><p id="a907" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">HTML部分到此为止，让我们跳转到<strong class="iw hy"> styles.css </strong>并开始设置计算器的样式，让它看起来更漂亮。</p><h1 id="d671" class="kh ki hx bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">半铸钢ˌ钢性铸铁(Cast Semi-Steel)</h1><p id="ea92" class="pw-post-body-paragraph iu iv hx iw b ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr hb bi translated">在这里，您将添加<em class="kg"> CSS </em>来样式化计算器。首先，让我们通过执行以下操作来移除默认的<em class="kg">浏览器样式</em>:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="a6c9" class="lt ki hx lp b fi lu lv l lw lx">/** changing default styles of the browser **/<br/>*{<br/>    margin:0;<br/>    padding:0;<br/>    box-sizing:border-box;<br/>}</span></pre><p id="f796" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，您需要更改body元素的样式:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="81f4" class="lt ki hx lp b fi lu lv l lw lx">body{<br/>   font-weight:normal;<br/>   font-family:Gotham Rounded, sans-serif;<br/>   background: linear-gradient(to right, rgb(0, 0, 0),rgb(0, 110, 255));<br/>}</span></pre><p id="6383" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，您需要通过选择<strong class="iw hy">来设置屏幕样式。计算器</strong>(包装所有不同的按钮和元素)类和样式</p><p id="554d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="f161" class="lt ki hx lp b fi lu lv l lw lx">.calculator{<br/>    display:grid;<br/>    align-content:center;<br/>    justify-content:center;<br/>}</span></pre><p id="2077" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">哎呀！！好像不是垂直居中！！你可以通过给出<strong class="iw hy">来解决这个问题。计算器</strong>将整个高度分类，这意味着它将一直填充<em class="kg">高度的100% </em>:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="50c9" class="lt ki hx lp b fi lu lv l lw lx">.calculator{<br/>    /** previously written code **/<br/>   min-height: 100vh;<br/>}</span></pre><p id="9756" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">好吧！！解决了这个问题，让我们继续设计<strong class="iw hy">。计算器</strong>类。为了让按钮看起来像计算器的按钮，你需要在这种情况下使用<strong class="iw hy">网格模板行</strong>和<strong class="iw hy">网格模板列</strong>。因此，我们让<em class="kg">列</em>重复4次，同时给它们100像素宽。<em class="kg">行</em>重复5次，同时给它们100像素宽，给它们120像素高的初始最小值，但最大值是auto(本质上说；大到适合任何东西)</p><p id="443a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="65c9" class="lt ki hx lp b fi lu lv l lw lx">.calculator{<br/>    display:grid;<br/>    align-content:center;<br/>    justify-content:center;<br/>    min-height:100vh;<br/>    grid-template-rows:minmax(120px, auto) repeat(5,100px);<br/>    grid-template-columns:repeat(4,100px);<br/>}</span></pre><p id="6ca6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">然后，要正确定位按钮，您需要选择它们并添加以下样式:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="e65a" class="lt ki hx lp b fi lu lv l lw lx">.calculator-grid &gt; button {<br/>    outline: none;<br/>    background-color:rgba(255, 255, 255, .75);<br/>    font-size: 2rem;<br/>    border: 1px solid #fff;<br/>    cursor: pointer;<br/>}</span></pre><p id="f971" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">添加悬停效果:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="c312" class="lt ki hx lp b fi lu lv l lw lx">.calculator-grid &gt; button:hover {<br/>       /** previously written code **/<br/>    background-color:rgba(255, 255, 255, .9)<br/>}</span></pre><p id="5052" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们来设计一下<strong class="iw hy">的样式。span-两个</strong>类使“<strong class="iw hy"> AC </strong>”和“<strong class="iw hy"> = </strong>”按钮横跨两列:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="b485" class="lt ki hx lp b fi lu lv l lw lx">.span-two{<br/>    grid-column: span 2;<br/>}</span></pre><p id="0d99" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">到目前为止还不错，但正如你在浏览器中看到的，<strong class="iw hy">。输出</strong>部分样式不正确。</p><p id="75ec" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了解决这个问题，您需要对实际的<strong class="iw hy">进行样式化。使用此技巧整体输出</strong>:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="a8af" class="lt ki hx lp b fi lu lv l lw lx">.output{<br/>    background-color: rgba(0, 0, 0, .75);<br/>    grid-column: 1 / -1;<br/>    display: flex;<br/>    justify-content: space-around;<br/>    align-items: flex-end;<br/>    flex-direction: column;<br/>    padding: 9px;<br/>    word-wrap: break-word;<br/>    word-break: break-all;<br/>}</span></pre><p id="d34c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">关于CSS的最后一件事是设计操作数的样式。前一操作数和<strong class="iw hy">。当前操作数</strong>。你能做到的</p><p id="1302" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="1c9d" class="lt ki hx lp b fi lu lv l lw lx">.output .previous-operand {<br/>    font-size : 1.5rem;<br/>    color: rgba(255, 255, 255, .75);<br/>}</span><span id="a2fc" class="lt ki hx lp b fi ly lv l lw lx">.output .current-operand{<br/>    font-size: 2.5rem;<br/>    color: #fff;<br/>}</span></pre><p id="5356" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">恭喜你。！你已经完成了CSS。请休息一会儿，然后回来看有趣的部分，那就是JavaScript。</p><h1 id="644f" class="kh ki hx bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">Java Script语言</h1><p id="01ef" class="pw-post-body-paragraph iu iv hx iw b ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr hb bi translated">好吧！！让我们从最有趣的部分开始，编写JavaScript代码。要开始，首先你需要选择所有不同的数字，操作数和所有的按钮(清除按钮，删除按钮等)。为了更容易，您需要在<strong class="iw hy"> HTML </strong>中添加<strong class="iw hy">属性</strong>，以便于选择。这很重要，因为你不需要用javaScript设计类的样式。这样做的代码片段是这样的:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="96fd" class="lt ki hx lp b fi lu lv l lw lx">&lt;!-- Modifying the HTML by adding attributes to be able to select by. --&gt;<br/><br/><br/>&lt;div class="calculator"&gt;<br/>   &lt;div class="output"&gt;<br/>     &lt;div data-previous-operand class="previous-operand"&gt;&lt;/div&gt;<br/>     &lt;div data-current-operand class="current-operand"&gt;&lt;/div&gt;<br/>   &lt;/div&gt;<br/>   &lt;button data-all-clear class="span-two"&gt;AC&lt;/button&gt;<br/>   &lt;button data-delete&gt;DEL&lt;/button&gt;<br/>   &lt;button data-operation&gt;÷&lt;/button&gt;<br/>   &lt;button data-number&gt;1&lt;/button&gt;<br/>   &lt;button data-number&gt;2&lt;/button&gt;<br/>   &lt;button data-number&gt;3&lt;/button&gt;<br/>   &lt;button data-operation&gt;*&lt;/button&gt;<br/>   &lt;button data-number&gt;4&lt;/button&gt;<br/>   &lt;button data-number&gt;5&lt;/button&gt;<br/>   &lt;button data-number&gt;6&lt;/button&gt;<br/>   &lt;button data-operation&gt;+&lt;/button&gt;<br/>   &lt;button data-number&gt;7&lt;/button&gt;<br/>   &lt;button data-number&gt;8&lt;/button&gt;<br/>   &lt;button data-number&gt;9&lt;/button&gt;<br/>   &lt;button data-operation&gt;-&lt;/button&gt;<br/>   &lt;button data-number&gt;.&lt;/button&gt;<br/>   &lt;button data-number&gt;0&lt;/button&gt;<br/>   &lt;button data-equals class="span-two"&gt;=&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="c9c2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">给你。既然您已经添加了<strong class="iw hy">属性</strong>来选择HTML元素，那么您可以使用JavaSript来选择它们</p><p id="089d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="04cc" class="lt ki hx lp b fi lu lv l lw lx">const currentOperandElement = document.querySelector('[data-current-operand]');<br/>const previousOperandElement = document.querySelector('[data-previous-operand]');<br/>const numberButtons = document.querySelectorAll('[data-number]');<br/>const operationButtons = document.querySelectorAll('[data-operation]');<br/>const equalsButton = document.querySelector('[data-equals]');<br/>const deleteButton = document.querySelector('[data-delete]');<br/>const allClearButton = document.querySelector('[data-all-clear]');</span></pre><p id="2227" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在一切都被选中了，让我们看看如何使用JavaScript让计算器像普通计算器一样工作。你需要考虑的第一件事是如何存储用户输入的数字的所有信息。最简单的方法就是使用一个<strong class="iw hy">类</strong>就可以了</p><p id="6c10" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="af56" class="lt ki hx lp b fi lu lv l lw lx">class Calculator {<br/>  constructor(previousOperandElement, currentOperandElement) {<br/>    this.previousOperandElement = previousOperand,<br/>    this.currentOperandElement = currentOperand<br/>  }<br/><br/>delete() {<br/><br/>  } <br/><br/>appendNumber(number) {<br/><br/>  }<br/><br/>clear() {<br/><br/>  }<br/><br/>chooseOperation(operation) {<br/><br/>  }<br/><br/>compute() {<br/><br/>  }<br/><br/>updateDisplay() {<br/><br/>  }<br/><br/>}</span></pre><p id="1ab1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">那么，目前情况如何？上面我们已经创建了一个<strong class="iw hy">计算器*类</strong>，它保存了<strong class="iw hy">构造器</strong>。这个<strong class="iw hy">构造器</strong>将接受用户将要输入的所有输入，以及计算器的所有<em class="kg">函数</em>。这些职能将是:</p><ul class=""><li id="e3d1" class="js jt hx iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated"><strong class="iw hy"><em class="kg">【delete()】</em></strong>:此功能将删除一个单号。</li><li id="c6c3" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hy"><em class="kg">【append number()</em></strong>:该功能将在用户每次选择该数字时添加该数字。</li><li id="4b70" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hy"> <em class="kg"> Clear() </em> </strong>:该功能将清除所有不同的变量。</li><li id="1fd8" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hy"><em class="kg">choose operation()</em></strong>:该功能让用户选择使用哪个操作并使其有效运行。</li><li id="4d91" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hy"><em class="kg">【compute()</em></strong>:该函数将获取计算器内的所有值，并计算出我们需要在屏幕上显示的单个值。</li><li id="cd50" class="js jt hx iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated"><strong class="iw hy"><em class="kg">【update display()</em></strong>:该函数将更新输出内部的值。</li></ul><p id="18cb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们考虑计算器需要存储的不同属性。首先，你需要知道用户正在操作的<em class="kg">当前操作数</em>，用户输入的<em class="kg">前一个操作数</em>，以及他们选择的操作(如果有的话)。所以你需要能够移除所有这些值，这可以在一个清晰的函数中完成</p><p id="37f1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="c4d5" class="lt ki hx lp b fi lu lv l lw lx">class Calculator {<br/>  constructor(previousOperandElement, currentOperandElement) {<br/>    this.previousOperandElement = previousOperand,<br/>    this.currentOperandElement = currentOperand<br/>    this.clear()<br/>  }<br/><br/>clear() {<br/>    this.previousOperand = "";<br/>    this.currentOperand = "";<br/>    this.operation = undefined;<br/>  } <br/><br/>}</span></pre><p id="1b80" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">注意:记住，我们一创建我们的<strong class="iw hy"> <em class="kg">计算器</em> </strong>，就需要调用<strong class="iw hy"> clear() </strong>函数，如上图。这是因为一旦我们创建了一个新的<strong class="iw hy"> <em class="kg">计算器</em> </strong>，我们就需要清除所有的输入来将它们设置为默认值。</p><p id="2343" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在我们已经知道了计算器将使用的所有函数，让我们让之前创建的所有变量对计算器对象进行如下操作:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="252e" class="lt ki hx lp b fi lu lv l lw lx">const calculator = new Calculator(previousOperandElement, currentOperandElement);</span></pre><p id="e748" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们制作<strong class="iw hy"> <em class="kg">数字按钮</em> </strong>功能</p><p id="dc8e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="e619" class="lt ki hx lp b fi lu lv l lw lx">numberButtons.forEach(button =&gt; {<br/>  button.addEventListener('click', () =&gt; {<br/>    calculator.appendNumber(button.innerText)<br/>    calculator.updateDisplay()<br/>  })<br/>})</span></pre><p id="f788" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，您需要编写<strong class="iw hy"><em class="kg">appendNumber()</em></strong>和<strong class="iw hy"><em class="kg">update display()</em></strong>函数来使它们工作</p><p id="52bf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="87e1" class="lt ki hx lp b fi lu lv l lw lx">class Calculator {<br/>  /** previously written code **/<br/><br/>    appendNumber(number){<br/>     if (number === "." &amp;&amp; this.currentOperand.includes(".")) return<br/>     this.currentOperand = this.currentOperand.toString() + number.toString()<br/>   }<br/>    updateDisplay(){<br/>     this.currentOperandElement.innerText = this.currentOperand;<br/>     this.previousOperandElement.innerText = this.previousOperand;<br/>   }<br/><br/>}</span></pre><p id="fbac" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们让<strong class="iw hy"> <em class="kg">操作按钮</em> </strong>也起作用:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="633e" class="lt ki hx lp b fi lu lv l lw lx">operationButtons.forEach(button =&gt; {<br/>  button.addEventListener('click', () =&gt; {<br/>    calculator.chooseOperation(button.innerText)<br/>    calculator.updateDisplay()<br/>  })<br/>})</span></pre><p id="8eff" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，你需要编写<strong class="iw hy"> <em class="kg">选择操作</em> </strong>函数来使其工作</p><p id="3558" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="59b4" class="lt ki hx lp b fi lu lv l lw lx">class Calculator {<br/><br/>    /** previously written code **/<br/><br/>    chooseOperation(operation) {<br/>      if (this.currentOperand === "") return<br/>      if(this.previousOperand != "") {<br/>        this.compute()<br/>      }<br/>      this.operation = operation;<br/>      this.previousOperand = this.currentOperand;<br/>      this.currentOperand = "";<br/>  }<br/><br/>}</span></pre><p id="cc18" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，我们让<strong class="iw hy"> <em class="kg">等于按钮</em> </strong>功能也:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="17c7" class="lt ki hx lp b fi lu lv l lw lx">equalsButton.addEventListener('click', button =&gt; {<br/>  calculator.compute()<br/>  calculator.updateDisplay()<br/>})</span></pre><p id="7556" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们来实现<strong class="iw hy"> <em class="kg"> compute() </em> </strong>函数:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="6d56" class="lt ki hx lp b fi lu lv l lw lx">class Calculator {<br/><br/>    /** previously written code **/<br/><br/>    compute() {<br/>    let computation<br/>    const prev = parseFloat(this.previousOperand)<br/>    const current = parseFloat(this.currentOperand)<br/>    if (isNaN(prev) || isNaN(current)) return<br/>    switch (this.operation) {<br/>      case '+':<br/>        computation = prev + current<br/>        break;<br/>      case '-':<br/>        computation = prev - current<br/>        break;<br/>      case '*':<br/>        computation = prev * current<br/>        break;<br/>      case '÷':<br/>        computation = prev / current<br/>        break;<br/>      default:<br/>        return<br/>    }<br/>    this.currentOperand = computation;<br/>    this.operation = undefined;<br/>    this.previousOperand = '';<br/>  }<br/><br/>}</span></pre><p id="139a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们让<strong class="iw hy"><em class="kg">all clear button</em></strong>的功能也一样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="5aeb" class="lt ki hx lp b fi lu lv l lw lx">allClearButton.addEventListener('click', button =&gt; {<br/>  calculator.clear()<br/>  calculator.updateDisplay()<br/>})</span></pre><p id="4691" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">接下来，让我们使<strong class="iw hy"> <em class="kg">删除按钮</em> </strong>功能也:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="9aa2" class="lt ki hx lp b fi lu lv l lw lx">deleteButton.addEventListener('click', button =&gt; {<br/>  calculator.delete()<br/>  calculator.updateDisplay()<br/>})</span></pre><p id="f93e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在，让我们来实现<strong class="iw hy"> <em class="kg"> delete() </em> </strong>函数，但是这里您需要使用<strong class="iw hy"> slice </strong>方法从<strong class="iw hy">字符串</strong>中获取最后一个值并将其删除</p><p id="02e8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="a219" class="lt ki hx lp b fi lu lv l lw lx">class Calculator {<br/><br/>  /** previously written code **/<br/><br/>    delete() {<br/>    this.currentOperand = this.currentOperand.toString().slice(0, -1);<br/>  }<br/>}</span></pre><p id="42ce" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">恭喜你。！现在，计算器在基础值上完全起作用，但是我们的计算器的实际显示不是那么好！！我们在数字之间没有逗号，操作数没有显示在前面的操作数中，所以需要修正。只有几行代码。首先我们需要修改<strong class="iw hy"><em class="kg">update display()</em></strong>函数和创建<strong class="iw hy"><em class="kg">get display number()</em></strong>函数来用逗号分隔数字</p><p id="bdba" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">像这样:</p><pre class="lk ll lm ln fd lo lp lq lr aw ls bi"><span id="2faa" class="lt ki hx lp b fi lu lv l lw lx">/** previously written code here **/<br/>updateDisplay() {<br/>    this.currentOperandElement.innerText =<br/>      this.getDisplayNumber(this.currentOperand)<br/>    if (this.operation != null) {<br/>      this.previousOperandElement.innerText =<br/>        `${this.getDisplayNumber(this.previousOperand)} ${this.operation}`<br/>    } else {<br/>      this.previousOperandElement.innerText = ''<br/>    }<br/>  }<br/><br/>/** getDisplayNumber acting like a helper function to delimit numbers with commas **/<br/>getDisplayNumber(number) {<br/>    const stringNumber = number.toString() // for splitting on decimal characters inside it.<br/>    const integerDigits = parseFloat(stringNumber.split('.')[0]) // turning a string to an array.<br/>    const decimalDigits = stringNumber.split('.')[1] // getting second portion out of the array, which is number after decimal place.<br/>    let integerDisplay<br/>    if (isNaN(integerDigits)) {<br/>      integerDisplay = ''<br/>    } else {<br/>      integerDisplay = integerDigits.toLocaleString('en', { maximumFractionDigits: 0 }) // "en" in the localeString means : english.<br/>    }<br/>    if (decimalDigits != null) {<br/>      return `${integerDisplay}.${decimalDigits}`<br/>    } else {<br/>      return integerDisplay<br/>    }<br/>  }</span></pre><p id="7e15" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是项目的最终版本:</p><figure class="lk ll lm ln fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es lz"><img src="../Images/69a8ca0ac6513967dbf8befa5b79a5db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*moQRFXRuGSHErY05xMt_RA.png"/></div></div></figure><p id="2eeb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">结论:</strong></p><p id="08c0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">既然您已经完成了这个项目，那么您就拥有了一个可以在浏览器中运行的功能完整的现代JavaScript计算器。如果你觉得这篇文章有帮助，请给它一个大拇指。编码快乐！！</p></div></div>    
</body>
</html>