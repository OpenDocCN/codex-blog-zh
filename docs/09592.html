<html>
<head>
<title>Core Web Application functionality using Java Spring MVC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Java Spring MVC的核心Web应用程序功能</h1>
<blockquote>原文：<a href="https://medium.com/codex/core-web-application-functionality-using-java-spring-mvc-db827e7378b2?source=collection_archive---------22-----------------------#2022-10-28">https://medium.com/codex/core-web-application-functionality-using-java-spring-mvc-db827e7378b2?source=collection_archive---------22-----------------------#2022-10-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/c972bceba03949ea21308539e1f44b34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJJYlWFozntjBrBIHsIJ1Q.png"/></div></div></figure><div class=""/><p id="7cb3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">客户关系管理，人力资源管理，企业资源规划是一些应用程序的例子，利用行政过程。这些流程通过自动处理或用户交互来保持业务运行。今天，这些类型的软件大多作为基于网络的应用程序运行。</p><p id="4200" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用web应用程序框架时，编写web应用程序更容易。这些框架提供了快速的应用程序开发。</p><p id="d784" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一些最好的java框架</p><ul class=""><li id="895e" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">春天</li><li id="33b7" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">JSF (Java服务器接口)</li><li id="2e13" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">GWT(谷歌网络工具包)</li><li id="a482" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">支杆</li><li id="5772" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">瓦丁</li></ul><p id="c834" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下面来说说<a class="ae kc" href="https://spring.io/why-spring" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">弹簧框架</strong> </a> <strong class="is hu"> </strong>！</p><blockquote class="kd ke kf"><p id="d2a5" class="iq ir kg is b it iu iv iw ix iy iz ja kh jc jd je ki jg jh ji kj jk jl jm jn hb bi translated">“Spring使构建web应用程序变得快速而简单。通过删除大量与web开发相关的样板代码和配置，您将获得一个现代化的web编程模型，它简化了服务器端HTML应用程序、REST APIs和双向的、基于事件的系统的开发。”</p></blockquote><h1 id="49e7" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">春天MVC和Spring Boot</h1><p id="192a" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">Spring MVC 是一个模型-视图-控制器框架。它用于创建可伸缩的企业web应用程序。设置和配置比Spring Boot更复杂。如果配置需要更大的灵活性，这是最好的选择。</p><p id="03cb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Spring Boot是建立在Spring MVC之上的。它最小化了配置的复杂性和Spring MVC需要的样板代码。它有内置的Jetty或Tomcat web服务器。它主要用于快速构建微服务应用程序。与Spring MVC不同，它使用的层是表示层、数据访问层、服务层和集成层。</p><h1 id="67f5" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">构建基于web的应用后台系统</h1><h1 id="ffaa" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">问题是</h1><p id="5c85" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">但是如何构建一个web应用程序呢？组成系统的构件是什么？</p><h1 id="ab09" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">崩溃了</h1><p id="37e1" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">要解决这个问题，我们必须将解决方案分成最基本的部分。</p><ul class=""><li id="45f9" class="jo jp ht is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">建筑设计</li><li id="d330" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">身份验证-授权-审核日志</li><li id="ec02" class="jo jp ht is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">用户界面</li></ul><h1 id="e295" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated"><strong class="ak">建筑设计</strong></h1><p id="f35f" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">作为MVC框架，Spring使用了<strong class="is hu">模型</strong>、<strong class="is hu">视图</strong>和<strong class="is hu">控制器的设计方法</strong>。<strong class="is hu">模型</strong>是组成系统的所有实体、数据、规则和逻辑的组合。<strong class="is hu">视图</strong>代表HTML、JSP页面等用户界面……当然还有<strong class="is hu">控制器</strong>，它接受输入并将其转换为<strong class="is hu">模型</strong>的命令或<strong class="is hu">视图</strong>的有意义的用户数据。</p><p id="95d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了进一步扩展代码的可读性和可维护性，我们将结合MVC设计使用<a class="ae kc" href="https://patroclosdev.medium.com/solid-the-5-principles-of-object-oriented-design-676095960598" rel="noopener">域驱动设计</a>。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ln"><img src="../Images/4a4fb2a075d95304998e7f1fee910b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LK88xUlOPuJpC5BHwFjpiA.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">DDD建筑的层次</figcaption></figure><p id="19a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从底部开始，一步一步向上，让我们看看<strong class="is hu"> <em class="kg">畴层</em> </strong>将驻留的<strong class="is hu">模型</strong>。“最低级别”类将是实体，它代表数据库中的一行。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es lw"><img src="../Images/dad2f263c1fd716cdb693bd87c8fb104.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*8tZR8NM5xQGKmOOHHg6t4A.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">扩展了BaseO 类<strong class="bd km">的<strong class="bd km"> Article </strong>实体类的例子。<strong class="bd km"> BaseO </strong>类扩展了<strong class="bd km"> BaseEntity </strong>类</strong></figcaption></figure><p id="ee9b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">所有实体都扩展父抽象类<strong class="is hu"> <em class="kg"> BaseO </em> </strong>和<strong class="is hu"> <em class="kg"> BaseEntity </em> </strong>，它们持有全局‘父’属性。请注意<strong class="is hu"> <em class="kg"> BaseO </em> </strong>和<strong class="is hu"> <em class="kg"> BaseEntity </em> </strong>作为抽象类，不能也不应该被实例化。</p><p id="12a3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在下一个“上层”中，<strong class="is hu"> <em class="kg"> ArticleBO </em> </strong>将保存实体的行为和业务逻辑。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es lx"><img src="../Images/e425cedcadf4cc3102ac7d23f8a39e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*osDHO8N3MdMn36G07ma28w.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">扩展抽象库类<strong class="bd km">的<strong class="bd km"> ArticleBO </strong>的例子</strong></figcaption></figure><p id="adc1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">业务对象</strong>类，扩展抽象<strong class="is hu"> <em class="kg"> BaseBO </em> </strong>类以便继承CRUD行为load | save | delete ( <em class="kg"> save方法用于创建和插入操作</em>)。</p><p id="25b4" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意<strong class="is hu"> <em class="kg"> BaseBO </em> </strong>类中的两个具体方法<strong class="is hu"> loadBaseO() </strong>和<strong class="is hu"> saveBaseO() </strong>。这两种方法都具有将实体加载和持久化到数据库中的基本功能。这两种方法都调用全局<strong class="is hu"> <em class="kg"> IRepository </em> </strong>接口，该接口负责加载/保存ORM (Hibernate)功能。这样我们就满足了<a class="ae kc" href="https://patroclosdev.medium.com/solid-the-5-principles-of-object-oriented-design-676095960598" rel="noopener"> <strong class="is hu">单一责任原则</strong> </a> ⁴和<a class="ae kc" href="https://patroclosdev.medium.com/solid-the-5-principles-of-object-oriented-design-676095960598" rel="noopener"> <strong class="is hu">从属倒置原则</strong> </a> ⁴</p><p id="1867" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们将有<strong class="is hu"> <em class="kg">服务(应用)层</em> </strong>。这一层编排较低级别的对象业务逻辑。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es ly"><img src="../Images/1a73e5fda2f0f7551d49c84f108c55f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*FuEB652K1cB7VzMqPjOLJA.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">示例<strong class="bd km"> CRUDService </strong>类，它扩展了<strong class="bd km"> BaseService </strong>类</figcaption></figure><pre class="lo lp lq lr fd lz ma mb mc aw md bi"><span id="0aa8" class="me kl ht ma b fi mf mg l mh mi">r@Transactional<br/>public void save(BaseDTO input) throws Exception {<br/>   save(input, false);<br/>}</span><span id="f93e" class="me kl ht ma b fi mj mg l mh mi">public BaseDTO load(long id, Class&lt;? extends BaseDTO&gt; classType) throws Exception {<br/>   BaseBO baseBo = getBussinessBeanFromClassType(classType);<br/>   BaseO o = baseBo.load(id,    CustomModelMapper.mapDTOClassToModelClass(classType));<br/>   if (o != null &amp;&amp; o.getIsDeleted() == 1) return null;<br/>   return CustomModelMapper.mapModeltoDTO(o, classType);<br/>}</span></pre><p id="43d7" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">请注意save()方法将DTO(数据传输对象)作为输入，因为这是一个<strong class="is hu"> <em class="kg">服务(应用)层</em> </strong> <em class="kg">。</em> Load()方法以实体Id为参数，返回转换为d to的实体。</p><p id="bb70" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设，系统将有复杂的业务规则和逻辑，让我们使用<a class="ae kc" href="https://patroclosdev.medium.com/design-patterns-facade-8d768f95f2cc" rel="noopener"> Facade </a>设计模式，并提供更高级别的编排和抽象。</p><pre class="lo lp lq lr fd lz ma mb mc aw md bi"><span id="6b71" class="me kl ht ma b fi mf mg l mh mi">@Component<br/>public class Facade  {</span><span id="a84a" class="me kl ht ma b fi mj mg l mh mi">@Autowired<br/>private IProcessManager processManager;</span><span id="566e" class="me kl ht ma b fi mj mg l mh mi">@Autowired<br/>private CRUDProcess CRUDProcess;</span><span id="2554" class="me kl ht ma b fi mj mg l mh mi">public &lt;T&gt; Object load(long id, Class&lt;? extends BaseDTO&gt; inputType) throws Exception{<br/>IProcess&lt;?, ?, ?&gt; process = b -&gt; CRUDProcess.load(id, inputType);<br/>return processManager.runProcess(process, inputType, id, CRUDProcess.PROCESS_NAME_READ);<br/>}</span><span id="352e" class="me kl ht ma b fi mj mg l mh mi">public Object delete(BaseDTO input) throws Exception{<br/>IProcess&lt;?, ?, ?&gt; process = b -&gt; CRUDProcess.delete(input);<br/>return processManager.runProcess(process, input, CRUDProcess.PROCESS_NAME_DELETE);<br/>}</span><span id="0cba" class="me kl ht ma b fi mj mg l mh mi">public Object saveNew(BaseDTO input) throws Exception{<br/>IProcess&lt;?, ?, ?&gt; process = b -&gt; CRUDProcess.saveNew(input);<br/>return processManager.runProcess(process, input, CRUDProcess.PROCESS_NAME_CREATE);<br/>}</span><span id="1f90" class="me kl ht ma b fi mj mg l mh mi">public Object saveUpdate(BaseDTO input) throws Exception{<br/>IProcess&lt;?, ?, ?&gt; process = b -&gt; CRUDProcess.saveUpdate(input);<br/>return processManager.runProcess(process, input, CRUDProcess.PROCESS_NAME_UPDATE);<br/>}</span><span id="6488" class="me kl ht ma b fi mj mg l mh mi">}</span></pre><p id="4bd6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">可以看到，<strong class="is hu"> Facade </strong>类通过调用<strong class="is hu">process manager . run process()</strong>方法，实现CRUD函数，并与相应的<strong class="is hu"> <em class="kg">服务(应用)层</em> </strong> CRUD函数交互。</p><pre class="lo lp lq lr fd lz ma mb mc aw md bi"><span id="237e" class="me kl ht ma b fi mf mg l mh mi">@Component<br/>public class ProcessManager implements IProcessManager {</span><span id="aeb3" class="me kl ht ma b fi mj mg l mh mi">@Autowired<br/>private ActivityProcess ActivityProcess;</span><span id="c873" class="me kl ht ma b fi mj mg l mh mi">@Autowired<br/>private IAuthenticationService AuthenticationService;</span><span id="b4de" class="me kl ht ma b fi mj mg l mh mi">@Autowired<br/>private UserService UserService;</span><span id="2006" class="me kl ht ma b fi mj mg l mh mi">public Object runProcess(IProcess&lt;?, ?, ?&gt; process, Class&lt;? extends BaseDTO&gt; inputType, BaseDTO input, Long id, String processName) throws Exception{</span><span id="05df" class="me kl ht ma b fi mj mg l mh mi">Object result = null;</span><span id="7a45" class="me kl ht ma b fi mj mg l mh mi">if (processName == null )<br/>{<br/>   throw new SystemException("ProcessName not defined");<br/>}</span><span id="3312" class="me kl ht ma b fi mj mg l mh mi">var loggedUser = AuthenticationService.getLoggedDbUserDTO();</span><span id="498c" class="me kl ht ma b fi mj mg l mh mi">if (loggedUser.getIsDeleted() == 1) {<br/>   throw new SystemException("Process authorization failed. User is deleted");<br/>}</span><span id="65a6" class="me kl ht ma b fi mj mg l mh mi">if (loggedUser.getEnabled() != 1) {<br/>   throw new SystemException("Process authorization failed. User is not enabled");<br/>}</span><span id="b78a" class="me kl ht ma b fi mj mg l mh mi">if(loggedUser.getRoles() == null) {<br/>    throw new SystemException("Process authorization failed. User has no defined roles");<br/>}</span><span id="cd07" class="me kl ht ma b fi mj mg l mh mi">var authorities = UserService.getUserAuthorities(loggedUser);</span><span id="a841" class="me kl ht ma b fi mj mg l mh mi">if (authorities == null) {<br/>    throw new SystemException("Process authorization failed. No access permissions found");<br/>}</span><span id="16b7" class="me kl ht ma b fi mj mg l mh mi">var authoritiesList = authorities.stream().map(a -&gt; a.getAuthority()).collect(Collectors.toList());</span><span id="ebf6" class="me kl ht ma b fi mj mg l mh mi">if (!authoritiesList.contains(processName)) {<br/>  throw new SystemException("Process authorization failed. User has no access to this process. No access permissions found");<br/>}</span><span id="208a" class="me kl ht ma b fi mj mg l mh mi">boolean isProcessSuccess = false;<br/>String processError = "";<br/>String processId = ProcessUtil.getActivityProcessId();</span><span id="ff22" class="me kl ht ma b fi mj mg l mh mi">try<br/>{<br/>Thread.currentThread().setName(processId);<br/>result = process.run(input);<br/>isProcessSuccess = true;<br/>}<br/>catch (Exception e){</span><span id="7929" class="me kl ht ma b fi mj mg l mh mi">processError = e.getMessage();</span><span id="2de3" class="me kl ht ma b fi mj mg l mh mi">if (e.getCause() != null) processError = e.getCause().getMessage();<br/>  throw new SystemException(e);<br/>}</span><span id="3241" class="me kl ht ma b fi mj mg l mh mi">finally {<br/>//Handle process failure code ...</span><span id="13e8" class="me kl ht ma b fi mj mg l mh mi">//reset thread's name after process and activity log insert is complete</span><span id="bf0f" class="me kl ht ma b fi mj mg l mh mi">Thread.currentThread().setName("");</span><span id="5f5e" class="me kl ht ma b fi mj mg l mh mi">}</span><span id="d894" class="me kl ht ma b fi mj mg l mh mi">return  result;</span><span id="4f97" class="me kl ht ma b fi mj mg l mh mi">}</span><span id="4407" class="me kl ht ma b fi mj mg l mh mi">}</span></pre><p id="4be3" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">问题</strong></p><p id="b857" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从<strong class="is hu"> Facade </strong>调用的每个流程都需要<strong class="is hu">授权</strong>并处理，不管成功还是失败，在所有应用程序中都是一样的。</p><p id="e4f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么不直接调用<strong class="is hu">服务(应用)层</strong>类方法呢？</p><p id="1f3c" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">每次向<strong class="is hu"> Facade </strong>类添加新流程时，我们都需要编写额外的重复代码，这可能会导致开发人员方面的实现不一致。另外，我们会有不必要的样板代码。</p><p id="06f2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">解决方案</strong></p><p id="9e28" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用<a class="ae kc" href="https://refactoring.guru/design-patterns/strategy" rel="noopener ugc nofollow" target="_blank">战略模式</a> ⁶</p><p id="31e5" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从上面的<strong class="is hu"> ProcessManager </strong>类，我们可以在runProcess方法()中传递流程实现(<strong class="is hu"> IProcess </strong>)。</p><p id="2cb1" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">流程实施</p><pre class="lo lp lq lr fd lz ma mb mc aw md bi"><span id="723f" class="me kl ht ma b fi mf mg l mh mi">@Component<br/>public class CRUDProcess extends BaseProcess {</span><span id="679b" class="me kl ht ma b fi mj mg l mh mi">@Autowired<br/>private CRUDService CRUDService;</span><span id="780e" class="me kl ht ma b fi mj mg l mh mi">public final String PROCESS_NAME_CREATE = "CREATE";<br/>public final String PROCESS_NAME_READ = "READ";<br/>public final String PROCESS_NAME_UPDATE = "UPDATE";<br/>public final String PROCESS_NAME_DELETE = "DELETE";<br/>public final String PROCESS_NAME_CANCEL = "CANCEL";</span><span id="05e8" class="me kl ht ma b fi mj mg l mh mi">public BaseDTO load(long id, Class&lt;? extends BaseDTO&gt; input) throws Exception {<br/>   BaseDTO dto = CRUDService.load(id, input);<br/>   return dto;<br/>}</span><span id="44c9" class="me kl ht ma b fi mj mg l mh mi">public Object delete(BaseDTO input) throws Exception {<br/>   CRUDService.delete(input);<br/>   return input;<br/>}</span><span id="c14d" class="me kl ht ma b fi mj mg l mh mi">public Object saveNew(BaseDTO input) throws Exception {<br/>   return save(input);<br/>}</span><span id="ea38" class="me kl ht ma b fi mj mg l mh mi">public Object saveUpdate(BaseDTO input) throws Exception {<br/>   return save(input);<br/>}</span><span id="42ba" class="me kl ht ma b fi mj mg l mh mi">public Object save(BaseDTO input) throws Exception {<br/>  CRUDService.save(input);<br/>  return CRUDService.load(input.getId(), input.getClass());<br/>}</span><span id="2bdb" class="me kl ht ma b fi mj mg l mh mi">public Object cancel(BaseDTO input) {<br/>  return input;<br/>}</span><span id="99c7" class="me kl ht ma b fi mj mg l mh mi">}</span></pre><p id="b643" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从<strong class="is hu"> Facade </strong>调用的每个进程都被授权和处理，无论成功或失败，在整个应用程序中都是一样的。这样我们就满足了<a class="ae kc" href="https://patroclosdev.medium.com/solid-the-5-principles-of-object-oriented-design-676095960598" rel="noopener"> <strong class="is hu">开闭原则</strong> </a> ⁴也是如此。此外，对于<strong class="is hu">流程管理器</strong>中需要的任何更改，都很容易实现，因为我们只需要在一个地方修改代码。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mk"><img src="../Images/8d845f2e8f9b781946f48e8a6633524f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W3hPvdVRWoJe3m8kKbGHFw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">加载文章DTO时的示例详细页</figcaption></figure><h1 id="d2c1" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated"><strong class="ak">认证—授权—审计日志</strong></h1><p id="da55" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated">对于认证，使用Spring安全配置</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ml"><img src="../Images/88f2a08b470a4a861818e1e51c7bad59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wJAt2-gJj9ps1JgQ2yaGyg.png"/></div></div></figure><p id="36b2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="kg">示例安全配置</em> <strong class="is hu"> <em class="kg">安全过滤链</em> </strong> <em class="kg"> Bean </em></p><pre class="lo lp lq lr fd lz ma mb mc aw md bi"><span id="bc08" class="me kl ht ma b fi mf mg l mh mi">@EnableWebSecurity<br/>@Configuration<br/>public class SecurityConfiguration {</span><span id="c180" class="me kl ht ma b fi mj mg l mh mi">@Bean<br/>public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {</span><span id="eecc" class="me kl ht ma b fi mj mg l mh mi">http.authorizeRequests()</span><span id="6096" class="me kl ht ma b fi mj mg l mh mi">.antMatchers("/login", "/signup", "/signupconfirm").permitAll()<br/>.antMatchers("/**", "/index**").access("hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')")<br/>.and()<br/>.formLogin().loginPage("/login").defaultSuccessUrl("/index?page=dashboard").successHandler(authenticationSuccessHandler())<br/>.failureHandler(authenticationFailureHandler())<br/>.and()<br/>.logout().logoutUrl("/logout").logoutSuccessHandler(logoutSuccessHandler()).invalidateHttpSession(true).deleteCookies("JSESSIONID")<br/>.and()<br/>.sessionManagement(session -&gt; session<br/>.maximumSessions(1) //set maximum concurrent user logins<br/>.maxSessionsPreventsLogin(true) //second login will be prevented<br/>)</span><span id="d2ba" class="me kl ht ma b fi mj mg l mh mi">.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED).sessionFixation().migrateSession(); //on authentication create a new session to avoid session fixation attack</span><span id="507f" class="me kl ht ma b fi mj mg l mh mi">http.csrf();</span><span id="7596" class="me kl ht ma b fi mj mg l mh mi">http.headers()<br/>.frameOptions()<br/>.sameOrigin()<br/>.xssProtection().block(false);</span><span id="6710" class="me kl ht ma b fi mj mg l mh mi">return http.build();</span><span id="c8c2" class="me kl ht ma b fi mj mg l mh mi">}</span><span id="d300" class="me kl ht ma b fi mj mg l mh mi">}</span></pre><p id="6adc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">正如我们前面解释的，<strong class="is hu">进程管理器</strong>正在授权每个用户执行一个进程的权限。</p><p id="4b66" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，从<strong class="is hu">流程管理器中，为每个流程调用生成审计日志</strong>。</p><p id="6619" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">另外，使用<a class="ae kc" href="https://hibernate.org/orm/envers/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu"> Hibernate Envers </strong> </a>来保存历史审计表，其中包含修改后的实体字段的信息。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/73ef4f7286ba2714fd696255cbffdfb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8eE4zk6upnaw6jlgISbExw.png"/></div></div></figure><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mn"><img src="../Images/79964c99e4cf41b490489a212b33e01e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lyD8t5ikh4uSelVPbuRqOw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">用户1对文章实体所做编辑的审计日志示例</figcaption></figure><h1 id="bb97" class="kk kl ht bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated"><strong class="ak">用户界面</strong></h1><p id="c5df" class="pw-post-body-paragraph iq ir ht is b it li iv iw ix lj iz ja jb lk jd je jf ll jh ji jj lm jl jm jn hb bi translated"><a class="ae kc" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"><strong class="is hu">Bootstrap</strong></a><strong class="is hu"/>版本5用于页面的前端开发。<a class="ae kc" href="https://www.thymeleaf.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hu">百里叶</strong> </a> <strong class="is hu"> </strong>是本项目中首选的模板引擎。</p><blockquote class="kd ke kf"><p id="a29f" class="iq ir kg is b it iu iv iw ix iy iz ja kh jc jd je ki jg jh ji kj jk jl jm jn hb bi translated"><strong class="is hu"> Thymeleaf </strong>是一个现代的服务器端Java模板引擎，适用于web和独立环境。Thymeleaf的主要目标是为您的开发工作流程带来优雅的自然模板——可以在浏览器中正确显示的HTML，也可以作为静态原型工作，允许开发团队中更强的协作。⁵ </p></blockquote><p id="fe43" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为用户界面的高级解释，应用程序由<strong class="is hu"><em class="kg"/></strong>和<strong class="is hu"> <em class="kg">详细</em> </strong>页面组成。</p><p id="b8bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">搜索页面</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mo"><img src="../Images/3667bbc9b566746536b72f85f43ba250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7IavB2W-smhvPxwzcejETw.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">文章搜索页面示例</figcaption></figure><p id="e0cb" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">详细页面</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mp"><img src="../Images/097e9e1a5a46a97199e251165bbdf297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3lMAfmRYn-xMSMTFoIHJpQ.png"/></div></div><figcaption class="ls lt et er es lu lv bd b be z dx translated">文章详细信息页面示例</figcaption></figure><p id="84b9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">问题</strong></p><p id="e8d8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">搜索和细节页面需要保持一致，并且在开发新页面时尽量减少样板代码。标准组件HTML代码生成，因此可以毫不费力地修改它们。</p><p id="3567" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">解决方案</strong></p><p id="823b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">创建一个<strong class="is hu">masterlayout.html</strong>页面，作为所有页面的父-母版页。这个页面将包括UI使用的所有的css和javascripts。</p><p id="887a" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在extend中，为了标准化搜索页面，我们创建了一个<strong class="is hu">summarylayout.html</strong>页面，作为搜索页面的父-主页面。这也是使用上面的masterlayout.html的<strong class="is hu">作为父布局。</strong></p><p id="cfb8" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">此外，为了使详细页面标准化，我们创建了一个<strong class="is hu">pagelayout.html</strong>页面，它被用作搜索页面的父页面。这也是使用上述<strong class="is hu">masterlayout.html</strong>作为父布局。</p><p id="3aed" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">控制器，</strong>扩展父类，如下面的<strong class="is hu">文章控制器(文章搜索页面)</strong>的例子。</p><figure class="lo lp lq lr fd hk er es paragraph-image"><div class="er es mq"><img src="../Images/f17e99f38781f761fbeca4979ba70e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*o1iXlL4YPYOhBimUXkz2MA.png"/></div><figcaption class="ls lt et er es lu lv bd b be z dx translated"><strong class="bd km">物品控制器</strong>扩展<strong class="bd km">概要控制器</strong>扩展<strong class="bd km">基本控制器</strong>的例子</figcaption></figure><p id="6c27" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，升级到新的引导版本和/或修改CSS、Javascripts变得容易，因为它们可以从一个地方改变。</p><p id="53bc" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">控制器类是从父类扩展行为，因此共享公共的，可重用的代码给所有的子类。</p><p id="5039" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">问题</strong></p><p id="737f" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如何用最小的努力改变整个应用的<strong class="is hu"> <em class="kg">观感</em> </strong>？</p><p id="22b2" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">解决方案</strong></p><p id="73a9" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设我们需要在整个应用程序的所有输入框中添加一个特性。如果我们试图改变所有页面上的所有输入框，这将花费相当多的时间。因此，我们需要采取的方法是从java代码(UIComponent类)生成组件HTML代码，并将其添加到从控制器类返回的<strong class="is hu"> ModelAndView </strong>对象中。通过这种方式，我们实现了易于修改的可重用和可维护的代码。</p><p id="6233" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如上所述，利用百里香模板，所有页面都扩展了母版页布局，因此很容易随着代码的变化修改HTML、JSP页面。</p><p id="51f6" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hu">如需工作演示，请访问</strong><a class="ae kc" href="https://sightready.net:8443/SpringMVC/" rel="noopener ugc nofollow" target="_blank"><strong class="is hu">https://sightready.net:8443/SpringMVC/</strong></a><strong class="is hu">。注册一个新用户并试用它！</strong></p></div><div class="ab cl mr ms gp mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="hb hc hd he hf"><div class="lo lp lq lr fd my"><a href="https://github.com/patroklos83/SpringMVC/" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hu fi z dy nd ea eb ne ed ef hs bi translated">GitHub - patroklos83/SpringMVC:样本模板SpringMVC webapp</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">localhost:8080/SpringMVC/这是一个基本的Spring MVC web应用程序模板，演示了…</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">github.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm hp my"/></div></div></a></div><p id="4ef0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">[1]<a class="ae kc" href="https://spring.io/web-applications" rel="noopener ugc nofollow" target="_blank">https://spring.io/web-applications</a></p><p id="6995" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">[2]<a class="ae kc" href="https://patroclosdev.medium.com/using-domain-driven-software-design-86de3671358c" rel="noopener">https://patroclosdev . medium . com/using-domain-driven-software-design-86de 3671358 c</a></p><p id="a97e" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">[3]<a class="ae kc" href="https://patroclosdev.medium.com/design-patterns-facade-8d768f95f2cc" rel="noopener">https://patroclosdev . medium . com/design-patterns-facade-8d 768 f 95 F2 cc</a></p><p id="8818" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">[4]<a class="ae kc" href="https://patroclosdev.medium.com/solid-the-5-principles-of-object-oriented-design-676095960598" rel="noopener">https://patroclosdev . medium . com/solid-the-5-principles-of-object-oriented-design-676095960598</a></p><p id="194b" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kc" href="https://www.thymeleaf.org/" rel="noopener ugc nofollow" target="_blank">https://www.thymeleaf.org/</a></p><p id="49b0" class="pw-post-body-paragraph iq ir ht is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kc" href="https://refactoring.guru/design-patterns/strategy" rel="noopener ugc nofollow" target="_blank">https://refactoring.guru/design-patterns/strategy</a></p></div></div>    
</body>
</html>