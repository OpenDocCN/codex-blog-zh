<html>
<head>
<title>Coding as Sorcery: OOP and the Magic of the True Name</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为巫术的编码:OOP和真名的魔力</h1>
<blockquote>原文：<a href="https://medium.com/codex/oop-magic-systems-and-the-allegory-of-the-cave-bf891c4cdf0e?source=collection_archive---------19-----------------------#2021-08-24">https://medium.com/codex/oop-magic-systems-and-the-allegory-of-the-cave-bf891c4cdf0e?source=collection_archive---------19-----------------------#2021-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="e9fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">软件编码很像巫术。你把神秘而强大的单词和符号串在一起，然后世界——或者至少是你的网络应用——就改变了。新元素在页面上出现或消失。表单和输入会改变显示的内容和数据库中的内容。</p><p id="aa32" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当你第一次开始学习时，你的代码感觉很像<em class="jd">哈利波特</em>魔法——只是一些听起来像胡言乱语的官样文章，让事情出于不明原因发生(可能因为它看起来像拉丁文)。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jj jk l"/></div></figure><p id="bf56" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，随着你对编码越来越深入，你开始理解——一点一点地——更多地了解魔术是如何以及为什么会这样。</p><p id="24a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总有一天，我会更深入地研究各种编程语言如何与不同幻想属性的魔法系统相比较。不过，我刚刚在训练营中学习了Ruby，所以今天我将专注于一个特别的比较——<a class="ae jl" href="https://en.wikipedia.org/wiki/Object-oriented_programming" rel="noopener ugc nofollow" target="_blank">面向对象编程</a>和<a class="ae jl" href="https://en.wikipedia.org/wiki/True_name" rel="noopener ugc nofollow" target="_blank">真名</a>的概念。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="jm jk l"/></div></figure><h1 id="6873" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">什么是OOP？</strong></h1><p id="8b0c" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">面向对象是一种抽象数据的方式，因此每个示例不仅将数据内容分组，还将您可以做的事情列表分组—您可以用它执行的操作、它关联的其他数据等等。</p><p id="51b0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Ruby中，每个对象都是一个<strong class="ih hj">类</strong>的实例，每个类都定义了一组可以在每个实例上调用的方法，以及每个方法可能具有的一组关系。</p><p id="d3f7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，您可以定义一个Broom类并创建一个名为fly的方法:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="00ae" class="kv jo hi kr b fi kw kx l ky kz">class Broom <br/>  def fly<br/>     puts "Up! This broom is flying!"<br/>  end<br/>end</span><span id="3927" class="kv jo hi kr b fi la kx l ky kz">$ nimbus_2000 = Broom.new<br/>$ nimbus_2000<br/><em class="jd">#=&gt; #&lt;Broom:0x007fc52c2cc588&gt;</em></span><span id="217f" class="kv jo hi kr b fi la kx l ky kz">$ nimbus_2000.fly<br/><em class="jd">#=&gt; "Up! This broom is flying!"</em></span></pre><p id="1624" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">调用<strong class="ih hj">。类<strong class="ih hj"> Broom </strong>上的new </strong>实例化一个新对象<strong class="ih hj"> nimbus_2000 </strong>，Broom类的一个新实例。这个新实例有关于它的数据——我们至少知道它在内存中的存储位置(这是我们的终端返回的字母和数字串告诉我们的)。我们还可以用扫帚做些事情——在扫帚上叫苍蝇。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lb jk l"/></div></figure><h1 id="a8c0" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">每样东西的名字</h1><p id="b3dc" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">这样,《面向对象》与其说像《哈利·波特》中的魔法，还不如说更像厄休拉·K·勒·古恩的《地海循环》或帕特里克·罗斯富斯的《弑君者编年史》中的至少一种魔法。在这些故事中，如果一个角色知道风的真实名称，他们可以召唤、转化并控制它，就像知道<strong class="ih hj">光轮_2000 </strong>是<strong class="ih hj">扫帚</strong>的实例让我们知道我们可以调用<strong class="ih hj">。在上面飞</strong>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lc"><img src="../Images/81dd5008ecc2132325038160ec577049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*2Sk4auZ-NlwkdcEOxDCLZw.jpeg"/></div><figcaption class="lf lg et er es lh li bd b be z dx translated">来自<em class="lj">地海</em>的Ged和Tenar由Charles Vess 绘制<a class="ae jl" href="https://www.muddycolors.com/2017/10/earthsea-cover-process/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="57d7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实名魔法不仅在小说中，在神话和宗教中也有着悠久的历史<a class="ae jl" href="https://en.wikipedia.org/wiki/True_name" rel="noopener ugc nofollow" target="_blank">。例如，想想在格林童话<em class="jd">中通过知道侏儒怪的名字而赋予他的力量。想想犹太人禁止擦除或污损上帝的名字。</em></a></p><p id="ee0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事实上，它可以追溯到更远。有一个来自中王国时期的古埃及故事，讲述了伊希斯诱骗Ra向她透露了他的秘密名字——没有什么比这更强大的力量来中和她毒害他的毒液。Ra非常担心一旦她知道了他的真实姓名，Isis将会对他产生什么样的影响，所以他只有在她答应除了她的儿子荷鲁斯之外不告诉任何人的情况下才会同意以这种方式得救——而且只有荷鲁斯自己发誓保守秘密。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lk"><img src="../Images/03104e0898186f83d7e0596a35475ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LoUawixx6i4jU4DBNlub8Q.jpeg"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">普塔接受了来自第19王朝<a class="ae jl" href="https://egypte-eternelle.org/index.php?option=com_content&amp;view=article&amp;id=184&amp;Itemid=685&amp;lang=en" rel="noopener ugc nofollow" target="_blank">伊勒尼费尔墓</a>的敬意</figcaption></figure><p id="46b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">事实上，在埃及创世故事的<a class="ae jl" href="https://en.wikipedia.org/wiki/Ancient_Egyptian_creation_myths#Memphis" rel="noopener ugc nofollow" target="_blank"> Memphite版本</a>中，根据<a class="ae jl" href="https://web.archive.org/web/20110211013949/http://www.reshafim.org.il/ad/egypt/texts/shabaka_stone.htm" rel="noopener ugc nofollow" target="_blank">沙巴卡石碑</a>记载，当神普塔“宣布万物的名称”时，创造了世界——包括其他神、他们的神殿、埃及的城市、食物和“所有美好的事物”</p><h1 id="e9c3" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">一个类是一个类的实例</h1><p id="2912" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">当我说这个故事提供了一个很好的类比来帮助理解OOP中的类继承概念时，我希望没有人会认为我对一个古代文化的神话油嘴滑舌。</p><p id="ad4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们想象Ptah创造了一种新的美味食物——比如这块水果或面包:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lp"><img src="../Images/9094aead7b2f11f89159b33f59202efd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jnk8iOx30XkRUCXJZwJ8-Q.jpeg"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">谢赫·阿卜德·古尔奈墓地纳赫特墓(公元前16-14年)壁画的细节</figcaption></figure><p id="a1b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设它是一种水果。(更新:是<a class="ae jl" href="https://www.history.com/news/eat-like-an-egyptian" rel="noopener ugc nofollow" target="_blank">面包</a>。)在Ruby中，这种创建类似于<a class="ae jl" rel="noopener" href="/@lainakarosic/instantiating-and-initializing-an-object-in-ruby-8b22f55f67d2">实例化</a>。在面向对象的术语中，这个特殊的水果可以被认为是任何类型水果的一个实例(一个褪色的石榴？无花果？？):</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="fccf" class="kv jo hi kr b fi kw kx l ky kz">$ this_particular_fruit = Pomegranate.new<br/>$ this_particular_fruit<br/><em class="jd">#=&gt; #&lt;</em><em class="jd">Pomegranate</em><em class="jd">:0x007fc52c2d7d20&gt;</em></span></pre><p id="6683" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">石榴</strong>是类，而<strong class="ih hj">this _ special _ fruit</strong>是对象——这个类的一个实例。然而，<strong class="ih hj">石榴</strong>本身是一个更大类的实例，<strong class="ih hj">水果</strong>一般来说，它<em class="jd">继承了</em>其父类的一些属性。它是有机的，有种子，是它赖以生长的树木或植物的生殖周期的一部分。</p><p id="3707" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在Ruby中，我们可以如下表示这种关系:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="7975" class="kv jo hi kr b fi kw kx l ky kz">class Fruit<br/>  def seeds<br/>    "I have seeds!"<br/>  end<br/>end</span><span id="ed5f" class="kv jo hi kr b fi la kx l ky kz">class Pomegranate &lt; Fruit<br/>  def seeds<br/>    super<br/>    "My seeds are edible and delicious!"<br/>  end<br/>end</span><span id="eda5" class="kv jo hi kr b fi la kx l ky kz">$ that_fruit_in_the_picture = Pomegranate.new<br/>$ that_fruit_in_the_picture.seeds<br/><em class="jd">#=&gt; "I have seeds!"<br/>"My seeds are edible and delicious!"</em></span></pre><p id="73d5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> &lt; </strong>语法确定<strong class="ih hj">石榴</strong>是<strong class="ih hj">水果</strong>的一种类型，因此继承了它的方法。关键字<strong class="ih hj"> super </strong>允许我们通过在超类中包含方法所做的一切来构建方法，然后在子类中添加新功能——这就是为什么<strong class="ih hj">that _ fruit _ in _ the _ picture . seeds</strong>返回“我有种子！”还有“我的种子可以吃，很好吃！”</p><div class="je jf jg jh fd ab cb"><figure class="lq ji lr ls lt lu lv paragraph-image"><img src="../Images/2bb2bc0015c91361884dda8e180480c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*4_kFGuVN0swSBCo10Uw8Tw.jpeg"/></figure><figure class="lq ji lw ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><img src="../Images/4e8f4a898ca03e4992a950849ebf73d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*EZzpGp2P7-AFXZY1nupGcA.png"/></div><figcaption class="lf lg et er es lh li bd b be z dx lx di ly lz translated">来自维基媒体的柠檬。面包来自X-Box的共同创造者谢默斯·布莱克利，他用传统工具和从古埃及烘焙器皿中取样的发酵剂来烘焙它。</figcaption></figure></div><p id="49b6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">更新:</strong>不知道为什么看到了一颗石榴。如果是水果，那显然是柠檬。但事实并非如此。是<a class="ae jl" href="https://www.theverge.com/tldr/2020/3/30/21199544/seamus-blackley-xbox-creator-ancient-egyptian-bread-4000-year-old-yeast-culture" rel="noopener ugc nofollow" target="_blank">面包</a>。但是，如果它是一个柠檬，如果你调用<strong class="ih hj">，你会期望看到不同的回报。种子</strong>在上面:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="61f9" class="kv jo hi kr b fi kw kx l ky kz">class Lemon &lt; Fruit<br/>  def seeds<br/>    super<br/>    "My seeds are not the part of me that's good to eat!"<br/>  end<br/>end</span><span id="211a" class="kv jo hi kr b fi la kx l ky kz">$ actually_a_lemon = Lemon.new<br/>$ actually_a_lemon.seeds<br/><em class="jd">#=&gt; "I have seeds!"<br/>"My seeds are not the part of me that's good to eat!"</em></span></pre><p id="8708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">水果</strong>本身可能是<strong class="ih hj">食物</strong>或<strong class="ih hj">植物</strong>的实例，而后者又可能是<strong class="ih hj">生物</strong>的实例，以此类推，直到<strong class="ih hj">万物</strong>。</p><p id="6c64" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Ruby也是如此。正如在另一个宗教传统中，从<a class="ae jl" href="https://en.wikipedia.org/wiki/Turtles_all_the_way_down" rel="noopener ugc nofollow" target="_blank">龟一直到</a>，在Ruby中，从对象一直到<a class="ae jl" href="https://codequizzes.wordpress.com/2014/04/23/rubys-main-object-top-level-context/" rel="noopener ugc nofollow" target="_blank">主对象</a>。这是Ruby程序的顶级作用域。在另一个类或模块之外定义的方法属于这个对象，Ruby称之为“main”</p><div class="je jf jg jh fd ab cb"><figure class="lq ji ma ls lt lu lv paragraph-image"><img src="../Images/56693663dfea853d7aa4f0c9779a38e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*hDDKKDBQr6PFoc_kCDLE6g.jpeg"/></figure><figure class="lq ji mb ls lt lu lv paragraph-image"><img src="../Images/ca933131901d2f7e1c2b247e79e372df.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*mUxI31q-huo9ypBGRnfb3w.jpeg"/></figure></div><h1 id="3d35" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">扰乱现实的结构</h1><p id="a520" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">因为在Ruby中，对象一直是向上的，你可以在你的Ruby应用中扰乱现实的结构。您可以定义新方法——甚至劫持现有方法——这些方法属于Ruby本身内置的核心类。这种形式的傲慢被称为<em class="jd">猴子补丁</em>，它可以完全破坏你的代码——或者，显然，非常方便。</p><p id="9393" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要劫持一个属于核心类的方法，只需在该类中重新定义该方法:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="c5a9" class="kv jo hi kr b fi kw kx l ky kz">class String<br/>  def upcase<br/>    self.reverse<br/>  end<br/>end</span></pre><p id="8c57" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，当您在string的实例上调用#upcase时，您的程序不会将所有字母都大写，而是以相反的顺序返回它们:</p><pre class="je jf jg jh fd kq kr ks kt aw ku bi"><span id="9529" class="kv jo hi kr b fi kw kx l ky kz">$ 'hello world'<!-- -->.upcase<br/><em class="jd"># =&gt; "dlrow olleh"</em></span></pre><p id="136b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样看来，Ruby可能比Rothfuss的<em class="jd"> Kingkiller更接近Le Guin的<em class="jd">地海</em>书中真实姓名的魔力。(很难确定，因为罗斯富斯似乎在模仿乔治·r·r·马丁，谁知道我们是否会看到他三部曲的最后一部。)但罗斯富斯的克沃斯似乎只能用它的真名来召唤风。相比之下，勒奎恩笔下的人物在使用真实的词语来操纵他们的世界时，必须深思熟虑，谨慎小心，因为每次使用魔法都会从根本上改变和重新排列事物。就像猴子修补可以打破一切一样，地海的巫师也可以。</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mc"><img src="../Images/c186b4f5466845b3295ea220b24872da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4xlzvraAD9SGStew4UxHDA.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">来自海岸的<a class="ae jl" href="https://company.wizards.com/en/news/wizards-celebrates-pride-2021" rel="noopener ugc nofollow" target="_blank">巫师</a>的艺术</figcaption></figure><h1 id="3198" class="jn jo hi bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">法师会议</strong></h1><p id="46d8" class="pw-post-body-paragraph if ig hi ih b ii kl ik il im km io ip iq kn is it iu ko iw ix iy kp ja jb jc hb bi translated">请告诉我你的想法！我很乐意听到更多关于编程和各种魔法系统或神话信仰之间的重叠和类比的想法。在Medium上给我写个回复，或者通过LinkedIn 联系我，让对话继续下去。</p></div></div>    
</body>
</html>