<html>
<head>
<title>Clean commits without rebasing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清除提交而不重设基础</h1>
<blockquote>原文：<a href="https://medium.com/codex/clean-commits-without-rebasing-d409ec18953b?source=collection_archive---------12-----------------------#2022-04-01">https://medium.com/codex/clean-commits-without-rebasing-d409ec18953b?source=collection_archive---------12-----------------------#2022-04-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="8d22" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">如何避免重置基址并保持干净的提交历史。</h1><p id="c2c7" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">避免在一个拉请求上有太多的提交是一个好习惯。然而，为了避免丢失您的更改，以防您的计算机崩溃，另一个好的做法是经常提交并将您的提交推送到云。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es kb"><img src="../Images/63714040d3d253fb79844c54db9c503b.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/0*pcQ8IfjA6qYm6kgR.jpg"/></div><figcaption class="kj kk et er es kl km bd b be z dx translated"><a class="ae kn" href="https://br.pinterest.com/pin/664562488755915683/" rel="noopener ugc nofollow" target="_blank">https://pinterest.com/pin/664562488755915683/</a></figcaption></figure><p id="6729" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">此外，在处理票据的过程中，您可能必须每隔一段时间与基础分支合并，以获得最新的更改并避免冲突。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div class="er es kt"><img src="../Images/50084d110cf732e66cd824d665119cc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*0nfcDEQeeGQycwLyaKMMlg.jpeg"/></div></figure><p id="fa59" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">假设您已经完成了您的工作，并且您想要与主分支合并，并且在这个过程中，您还想要清除您在处理特性时推送到远程的任何提交。最后，您只希望对您的拉请求进行一次提交(也许是几次提交)。经典的做法是将<strong class="jf hj"> git merge </strong>和<strong class="jf hj"> git rebase结合起来。</strong></p><p id="5e24" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">我想给你一个替代方案，希望能让这个过程不那么痛苦。</p><p id="912e" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">假设您已经检查了您的分支:</p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="e682" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git pull origin main</strong></span></pre><p id="7c52" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">用<em class="le">main</em>T9】更新你的分支。Main是你刚开始工作时的基础分支(如果是这样的话就改成<strong class="jf hj"> master </strong>或者<strong class="jf hj"> develop </strong>)。在这一点上，您有了所有以前的提交+一个合并提交，以及来自基础分支的最新更改(在这之后修复任何可能的冲突)。</strong></p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="8399" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git reset origin/main --soft</strong></span></pre><p id="754a" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">将您的更改放在基础分支之上。</strong>这将重置所有提交，并保存您所做的更改，为最终提交做好准备。在这之后，您可能需要添加任何未分级的更改(git add -A)。</p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="9f2c" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git commit -m "my beautiful commit message"</strong></span></pre><p id="7f1d" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">承诺一切。</strong>这就像你所有的修改都是在一次提交中完成的。</p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="53f0" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git push origin [my-branch] --force-with-lease</strong></span></pre><p id="aa67" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">将您的更改推送到远程分支。</strong>需要<em class="le"> — force-with-lease </em>标志，因为您正在重写分支上的提交历史，用新的提交替换任何提交。</p><p id="936d" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">谁说不能改写历史了？</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lf"><img src="../Images/7c25a937b0c09b2a3cde01678af3859d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YyOGcAbLbp-USTcQEgKHKw.jpeg"/></div></div></figure><h1 id="ad80" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">一个命令来统治他们所有人</h1><p id="e46d" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">这基本上是上面一行中的所有命令</p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="c026" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git pull origin [base-branch] &amp;&amp; git reset origin/[base-branch] &amp;&amp; git commit -m "my message" git push origin my-branch</strong></span></pre></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="458c" class="if ig hi bd ih ii lr ik il im ls io ip iq lt is it iu lu iw ix iy lv ja jb jc bi translated">奖金(1)</h1><p id="0eed" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">让我们假设，在你完成了上述所有步骤后，你在你的公关上得到一条评论，要求改变某些东西，而你不想再重新设置它。</p><p id="3007" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">更改您需要的内容，并将它们全部添加到<strong class="jf hj"> git add -A. </strong>中提交</p><p id="806a" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">现在你有两个选择，<strong class="jf hj">第一个选择:</strong></p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="36f3" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git commit --amend --no-edit</strong></span></pre><ul class=""><li id="fd1b" class="lw lx hi jf b jg ko jk kp jo ly js lz jw ma ka mb mc md me bi translated"><em class="le"> - amend </em>标志用于更新最后一次提交的更多更改。</li><li id="5514" class="lw lx hi jf b jg mf jk mg jo mh js mi jw mj ka mb mc md me bi translated"><em class="le"> - no-edit </em>标志表示您不想更改提交消息。</li></ul><p id="28a5" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated"><strong class="jf hj">第二选项:</strong></p><pre class="kc kd ke kf fd ku kv kw kx aw ky bi"><span id="1847" class="kz ig hi kv b fi la lb l lc ld">$ <strong class="kv hj">git commit --amend -m "new commit message"</strong></span></pre><ul class=""><li id="b2e7" class="lw lx hi jf b jg ko jk kp jo ly js lz jw ma ka mb mc md me bi translated">这用更多的变化修正了最后一次提交，并更新了先前的提交消息。</li></ul><p id="7327" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">在上面的一个选项之后，您只需要用force标志再次推送所有内容来覆盖远程提交(<strong class="jf hj">git push origin[my-branch]-f</strong>)。</p></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><h1 id="a743" class="if ig hi bd ih ii lr ik il im ls io ip iq lt is it iu lu iw ix iy lv ja jb jc bi translated">奖金(2)</h1><p id="1929" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">强制力与租赁强制力的区别</p><blockquote class="mk ml mm"><p id="1838" class="jd je le jf b jg ko ji jj jk kp jm jn mn kq jq jr mo kr ju jv mp ks jy jz ka hb bi translated">用本地分支覆盖远程分支。</p><p id="b58e" class="jd je le jf b jg ko ji jj jk kp jm jn mn kq jq jr mo kr ju jv mp ks jy jz ka hb bi translated"><code class="du mq mr ms kv b"><em class="hi">--force-with-lease</em></code>是一个更安全的选项，如果更多的提交被添加到远程分支，它不会覆盖远程分支上的任何工作。它确保你不会通过强行推动来覆盖别人的工作。</p></blockquote><p id="a2a5" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">更多详情请点击此处:</p><div class="mt mu ez fb mv mw"><a href="https://stackoverflow.com/a/52823955/3765819" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hj fi z dy nb ea eb nc ed ef hh bi translated">git push-force-with-lease与-force</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">从可信和/或官方来源寻找答案。托雷克在《》中提到的“比较和交换”</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">stackoverflow.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk kh mw"/></div></div></a></div></div><div class="ab cl lk ll gp lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hb hc hd he hf"><p id="02b1" class="pw-post-body-paragraph jd je hi jf b jg ko ji jj jk kp jm jn jo kq jq jr js kr ju jv jw ks jy jz ka hb bi translated">如果你想有干净的提交，希望这能让你的生活更容易。感谢阅读！</p></div></div>    
</body>
</html>