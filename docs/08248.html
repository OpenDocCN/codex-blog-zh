<html>
<head>
<title>How to build an Angular chat app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何搭建一个有角度的聊天app</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-build-an-angular-chat-app-af7a403cba89?source=collection_archive---------8-----------------------#2022-07-26">https://medium.com/codex/how-to-build-an-angular-chat-app-af7a403cba89?source=collection_archive---------8-----------------------#2022-07-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/f284fd59513c5cd62f423de92024aab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0q4jNjWIYhc6uRWx.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">仙鸟2022</figcaption></figure><div class=""/><p id="9cb8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">使用Sendbird SDK构建您自己的聊天应用程序，能够发送和接收消息</p><p id="cadc" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">解决方案工程师| <a class="ae js" href="https://www.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> Sendbird </a></p><p id="4908" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="jt">看看</em> <a class="ae js" href="https://stackblitz.com/edit/angular-ivy-mzphea?file=src%2Fapp%2Fapp.component.ts" rel="noopener ugc nofollow" target="_blank"> <em class="jt">角样app </em> </a> <em class="jt">你可能会觉得很有用。有关本教程中材料的其他指导，请参见</em> <a class="ae js" href="https://sendbird.com/docs/chat/v4/javascript/overview" rel="noopener ugc nofollow" target="_blank"> <em class="jt">文档</em> </a> <em class="jt">。查看Sendbird Chat的</em> <a class="ae js" href="https://sendbird.com/demos/in-app-chat" rel="noopener ugc nofollow" target="_blank"> <em class="jt">演示</em> </a> <em class="jt">并访问我们的</em> <a class="ae js" href="https://sendbird.com/features/chat-messaging" rel="noopener ugc nofollow" target="_blank"> <em class="jt">网站</em> </a> <em class="jt">以了解更多有关Sendbird Chat的信息。</em></p><blockquote class="ju jv jw"><p id="efb2" class="iu iv jt iw b ix iy iz ja jb jc jd je jx jg jh ji jy jk jl jm jz jo jp jq jr hb bi translated"><em class="hx">为了第一个了解新教程、开发者相关聊天/电话发布以及其他重要更新，</em> <a class="ae js" href="https://get.sendbird.com/dev-newsletter-subscription.html" rel="noopener ugc nofollow" target="_blank"> <em class="hx">注册</em> </a> <em class="hx">获取我们的开发者简讯。</em></p></blockquote><h1 id="aea7" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="4b9d" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">本教程将讨论如何使用Angular构建一个聊天应用程序。本教程结束时，您将已经构建了自己的聊天应用程序，能够发送和接收消息。</p><p id="b103" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将从一些先决条件开始，在<a class="ae js" href="http://stackblitz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy"> Stackblitz </strong> </a>中创建一个项目。然后我们将讨论如何创建角度服务。之后，我们将构建一个HTML模板，然后对组件进行编码。</p><p id="bc84" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于本教程，我们将使用<a class="ae js" href="http://stackblitz.com/" rel="noopener ugc nofollow" target="_blank"><strong class="iw hy">stack blitz</strong></a>IDE。我们强烈建议您查看最终工作的<a class="ae js" href="https://stackblitz.com/edit/angular-ivy-mzphea?file=src%2Fapp%2Fapp.component.ts" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">代码</strong> </a>。当然，您可以使用<strong class="iw hy"> angular-cli </strong>创建一个常规的Angular项目，并使用您喜欢的任何IDE对其进行编码。为了速度和简单，我们将保持在线。</p><p id="1347" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们开始吧！💻</p><h2 id="5892" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">先决条件</h2><p id="224f" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">为了充分利用本教程，您应该对以下内容有一个基本的了解:</p><ul class=""><li id="eca7" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><a class="ae js" href="https://developer.mozilla.org/docs/Learn/HTML" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy"> HTML </strong> </a></li><li id="377d" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><a class="ae js" href="https://developer.mozilla.org/docs/Web/JavaScript" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy"> JavaScript </strong> </a></li><li id="abb1" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><a class="ae js" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">打字稿</strong> </a></li></ul><h1 id="bfdc" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤1:创建一个空白项目</h1><p id="2cea" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">首先创建一个新项目。Stackblitz提供了广泛的框架和库。我们将选择Angular with TypeScript support作为新的项目类型。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mf"><img src="../Images/758c202492773cd3989d2ae877b31c7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LV9e9Xo2-_R3k-Zn.png"/></div></div></figure><p id="eedf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦创建了项目，您需要将<strong class="iw hy"> Sendbird </strong>作为一个依赖项包含进来。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mk"><img src="../Images/2f8618a9f5eb7d29a2b9a69d61b6edeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/0*t4Ge5lj85xRJJ7Dv.png"/></div></figure><p id="9388" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">本教程适用于Sendbird SDK版本3。</p><h1 id="8f62" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤2:创建角度服务</h1><p id="534a" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">为了保持代码有条理，我们将在Angular服务中编写所有Sendbird函数。</p><p id="4c48" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们首先为此创建一个新文件夹。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ml"><img src="../Images/25791160d608a94a37f845a1d4feee0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RDeciya09jICPNKo.png"/></div></div></figure><h2 id="ee90" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.1:创建新的TypeScript文件</h2><p id="3cd8" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">Angular用打字稿工作。我们将创建一个新的空白文件，并将其命名为<strong class="iw hy"> chat.service.ts. </strong></p><p id="72e0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">你可以使用任何你喜欢的名字。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/2b9a98f0be11e2a49ff11d96852ee22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rBJsDRkFt2jHcDZn.png"/></div></div></figure><h2 id="5aee" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.2:导入Sendbird</h2><p id="0588" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">打开您刚刚创建的文件，并添加以下代码。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="62f4" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第一行由服务使用。</p><p id="d582" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第二行将整个Sendbird SDK代码导入到我们的服务中。</p><h2 id="cf4d" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.3:使用您的应用程序ID初始化Sendbird</h2><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="09af" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为了初始化SDK，您需要定义一个应用程序ID ( <strong class="iw hy"> APP_ID </strong>)。您可以从<a class="ae js" href="https://dashboard.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy"> Sendbird仪表板</strong> </a>中获得该值。我们为低规模项目和测试目的提供免费试用和免费永久开发者账户。要访问您的仪表板，请创建您的<a class="ae js" href="http://sendbird.com/signup" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">账户</strong> </a>。</p><h2 id="d109" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.4:添加将您的用户连接到聊天的功能</h2><p id="2ad7" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">初始化之后，您需要将一个用户连接到Sendbird的WebSocket服务器，以便发送和接收消息。Sendbird WebSocket执行其他功能，如创建通道和接收各种事件。</p><p id="a381" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">请注意，Sendbird SDK也适用于离线模式。这意味着您可以在没有连接的情况下启动应用程序，并显示设备上自动缓存的所有信息。请查看我们的<a class="ae js" href="https://sendbird.com/docs/chat/v3/javascript/guides/local-caching#1-local-caching" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">文档</strong> </a>以了解更多关于本地缓存的信息。</p><p id="ca03" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们添加<strong class="iw hy">连接</strong>功能:</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="ad8c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">连接</strong>功能接受以下参数:</p><ul class=""><li id="c8ca" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><strong class="iw hy"> userId </strong>:这是一个不带空格的字母数字值。创建后，用户将出现在<a class="ae js" href="https://dashboard.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy"> Sendbird仪表板</strong> </a>的列表中。</li><li id="2178" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><strong class="iw hy">访问令牌</strong>:一旦为您的登录启用了安全性，您将需要为这个用户生成一个会话令牌。在这里阅读<a class="ae js" href="https://sendbird.com/docs/chat/v3/platform-api/user/managing-session-tokens/issue-a-session-token#1-issue-a-session-token" rel="noopener ugc nofollow" target="_blank"><strong class="iw hy"/></a>。</li></ul><p id="613d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果连接成功，<strong class="iw hy">错误</strong>值将为<em class="jt">空值</em>，并且<strong class="iw hy">用户</strong>对象将包含您的登录用户的所有信息。</p><h2 id="f375" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.5:有用的功能</h2><p id="5adb" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">Sendbird SDK提供了您的应用程序所需的所有有用的功能。这里我们再补充两个:<strong class="iw hy"> isConnected() </strong>和<strong class="iw hy"> getConnectedUser() </strong>。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="bc68" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这两个函数将验证是否有连接的用户，并随时返回连接用户的信息。</p><h2 id="eccc" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.6:事件处理器</h2><p id="d064" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">在聊天对话中，会发生多个事件。其中一些是:</p><ul class=""><li id="2722" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated">我们被邀请参加对话(群组频道)</li><li id="d483" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">其他用户被邀请到我们所在的频道</li><li id="2bda" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">我们通过频道接收信息</li><li id="fcd8" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">一个或多个频道成员正在键入消息</li><li id="8100" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">用户离开一个频道</li></ul><p id="6990" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于这些聊天事件中的任何一个，Sendbird SDK都会通知我们，以便我们做出相应的响应。以下是可用功能的列表:</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="06e4" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您可以将自己的逻辑应用于这些功能中的一部分或全部。</p><p id="9052" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在本教程中，我们将只实现其中的一个:<strong class="iw hy"> onMessageReceived </strong>。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="965f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当我们的任何群组频道的成员发送消息时，该功能被自动调用。我们收到的参数是:</p><ul class=""><li id="1d4b" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><strong class="iw hy">通道</strong>:消息发送到的通道</li><li id="5ce8" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><strong class="iw hy">消息</strong>:发送到频道的消息的详细内容</li></ul><p id="29a0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们要做的是用我们想要发送给应用程序的信息调用<strong class="iw hy">回调</strong>函数。</p><h2 id="197c" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.7:创建群组频道</h2><p id="1c38" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">函数<strong class="iw hy"> createGroupChannel </strong>将使用Sendbird SDK创建群组通道。频道是进行对话的地方。Sendbird支持许多不同的通道类型；在<a class="ae js" href="https://sendbird.com/docs/chat/v3/platform-api/channel/channel-overview#2-channel-types" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">文档</strong> </a>中阅读所有关于它们的内容。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="75ae" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这里的 解释了所有可用的参数<a class="ae js" href="https://sendbird.com/docs/chat/v3/javascript/guides/group-channel#2-create-a-channel" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">。查看我们的<a class="ae js" href="https://sendbird.com/docs/chat/v4/javascript/quickstart/send-first-message" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">文档</strong> </a>了解更多关于Javascript的Sendbird Chat SDK的细节。</strong></a></p><h2 id="6389" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.8:获取我的群组频道</h2><p id="8208" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">在我们的服务中，我们还需要一个函数来检索我们创建的群组频道和我们被邀请的频道。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="e84e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在此 阅读更多关于使用Sendbird Chat SDK获取群组频道的<a class="ae js" href="https://sendbird.com/docs/chat/v3/javascript/guides/group-channel#2-retrieve-a-list-of-channels" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">。</strong></a></p><h2 id="4043" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.9:从通道获取消息</h2><p id="0190" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">对话发生在一个渠道内；当选择一个频道时，获取这些信息并显示给用户是很重要的。</p><p id="473a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Sendbird提供了几个过滤器和排序选项来列出您的邮件。在这里阅读<a class="ae js" href="https://sendbird.com/docs/chat/v3/javascript/guides/group-channel#2-load-previous-messages" rel="noopener ugc nofollow" target="_blank"><strong class="iw hy"/></a>。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><h2 id="7966" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">2.10:发送消息</h2><p id="8e2a" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">我们服务中的最后一个函数用于向通道发送消息。一旦我们向频道发送消息，所有成员都可以阅读它。</p><p id="09d5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Sendbird有三种类型的消息:</p><ul class=""><li id="c47d" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated">用户消息</li><li id="6dbd" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">文件消息</li><li id="26cb" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">管理消息</li></ul><p id="5f9b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在<a class="ae js" href="https://sendbird.com/docs/chat/v3/javascript/guides/group-channel#2-send-a-message" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">文档</strong> </a>中阅读更多关于消息类型的信息。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="c3a3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">消息不仅仅是文本；Sendbird为消息对象提供了几个属性，您可以在其中添加额外的信息(其中一些是:数据、元数组和自定义类型)</p><p id="b6c7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">借助这些元数据，您可以在两个或更多用户之间实现复杂的通信系统。您可以超越基于文本的聊天来思考问题！</p><p id="9a8c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">点击 阅读所有关于发送信息<a class="ae js" href="https://sendbird.com/docs/chat/v3/javascript/guides/group-channel#2-send-a-message" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">的内容。</strong></a></p><h1 id="87c9" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">我们的服务准备好了！</h1><p id="7e35" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">现在，我们已经构建了管理频道和消息的基本功能。下一步是移动到我们的组件，并构建一个向用户显示信息的屏幕。</p><h1 id="69eb" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">第三步:模板</h1><p id="023f" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">Angular使用组件在屏幕上显示所有信息。组件由一个模板(用HTML文件编写)和一个类(用TypeScript编写)组成。先说模板。</p><h2 id="e3bb" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">3.1:连接聊天</h2><p id="7192" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">添加一个按钮，它将从我们的类组件内部调用<strong class="iw hy"> connect() </strong>函数。点击或点击此按钮连接聊天。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="7f2d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">注意，这个<strong class="iw hy"> connect() </strong>函数还没有创建。我们将在第4.2步解释如何编写<strong class="iw hy"> connect() </strong>函数；现在，让我们专注于构建模板。</p><p id="3290" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您的模板现在应该如下所示:</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mp"><img src="../Images/40ca8e78667b81ff84033b432160f1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/0*pEVN-gLJKDkKIvOM.png"/></div></figure><p id="68a1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">运行应用程序以实时查看按钮。</p><h2 id="3293" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">3.2:开始对话</h2><p id="e482" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">一旦建立了连接，您就可以创建对话(或频道)。让我们再添加一个按钮来创建我们的第一个群组通道，名为“<strong class="iw hy"> angular-tutorial </strong>”。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="73d6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦你运行它，它应该是这样的。</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mq"><img src="../Images/017dd728bf7952c29b02435314e6bfcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/0*XbCBH0sG4x7nUFci.png"/></div></figure><p id="09f9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将很快对这些新按钮的功能进行编码。让我们首先添加更多的HTML代码，允许您显示您的频道(或对话)。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><ul class=""><li id="c0a6" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><strong class="iw hy"> ngFor </strong>是一个角度指令，用于遍历<strong class="iw hy">对话</strong>数组并显示每个频道的名称。</li></ul><figure class="mg mh mi mj fd hk er es paragraph-image"><div class="er es mr"><img src="../Images/570e9dd4dc8b2de875a36aa8fddb25f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/0*KmkvhQGjosDJzft5.png"/></div></figure><p id="75a1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">创建频道后，它们将在模板中显示如下。<strong class="iw hy">获取消息</strong>按钮将显示该频道的消息。</p><p id="11e1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在让我们了解如何创建群组频道，并在此列表中显示它们。</p><h2 id="fadd" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">3.3:列出发送到频道的消息</h2><p id="34d2" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">消息存在于群组频道中(本例中为<strong class="iw hy"> android-tutorial </strong>)。我们将再次使用<strong class="iw hy"> *ngFor </strong>指令，但这一次我们将遍历<strong class="iw hy"> messages </strong>对象。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><h2 id="cea8" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">3.4:发送新消息</h2><p id="502b" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">以下代码显示了一个用于输入文本的输入框。我们还在边上添加了一个按钮来执行发送消息的功能。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="d444" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这是所有组件最终在屏幕上显示的方式:</p><figure class="mg mh mi mj fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ms"><img src="../Images/29f4b74af5fcb90ecda2096c266e5754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*azji7264clG50sFb.png"/></div></div></figure><h1 id="2b62" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤4:编码组件类变量</h1><p id="4387" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">模板完成后，我们需要使用TypeScript对组件类进行编码。</p><p id="a150" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">让我们从类变量开始。这是你需要的所有变量的要点。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="9f99" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">下面是对每个变量的解释。如果你不想看这些解释，请随意跳到下一部分。</p><pre class="mg mh mi mj fd mt mu mv mw aw mx bi"><span id="e620" class="ld kb hx mu b fi my mz l na nb">connected = false;</span></pre><p id="feca" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">连接</strong>是一个布尔对象，允许整个组件定义SDK是否连接。</p><pre class="mg mh mi mj fd mt mu mv mw aw mx bi"><span id="23e4" class="ld kb hx mu b fi my mz l na nb">startConversationResult: string;</span></pre><p id="cdd9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">当尝试创建组通道时，此字符串将显示任何错误。</p><pre class="mg mh mi mj fd mt mu mv mw aw mx bi"><span id="6bf4" class="ld kb hx mu b fi my mz l na nb">conversations: Array&lt;SendBird.GroupChannel&gt; | null;</span><span id="026f" class="ld kb hx mu b fi nc mz l na nb">listConversationsResult: string | null;</span></pre><p id="1a36" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">对话</strong>包含我们的群组频道列表。</p><p id="3bf0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">listConversationsResult</strong>在尝试获取群组频道列表时会显示任何错误消息。</p><pre class="mg mh mi mj fd mt mu mv mw aw mx bi"><span id="931c" class="ld kb hx mu b fi my mz l na nb">selectedChannel: SendBird.GroupChannel | null;</span></pre><p id="597a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy"> selectedChannel </strong>在用户点击某个频道查看其消息时被填充。</p><pre class="mg mh mi mj fd mt mu mv mw aw mx bi"><span id="ebd6" class="ld kb hx mu b fi my mz l na nb">messages: Array&lt;</span><span id="93cd" class="ld kb hx mu b fi nc mz l na nb">   SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage</span><span id="473e" class="ld kb hx mu b fi nc mz l na nb">&gt; | null;</span></pre><p id="86aa" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><strong class="iw hy">消息</strong>是所选频道内的消息数组。</p><pre class="mg mh mi mj fd mt mu mv mw aw mx bi"><span id="f9c1" class="ld kb hx mu b fi my mz l na nb">textMessage: any;</span></pre><p id="8db5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们使用<strong class="iw hy"> textMessage </strong>来存储要发送给通道的文本。</p><h2 id="f430" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.1:实现OnInit</h2><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="345d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在Init 上添加Angular接口<strong class="iw hy">允许我们在组件初始化时执行代码。</strong></p><p id="c820" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将使用它来调用我们的服务并初始化Sendbird SDK。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><h2 id="89dd" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.2:连接到Sendbird</h2><p id="a8bf" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">一旦SDK被初始化，我们就可以连接一个用户。发送<strong class="iw hy"> userId </strong>中的值(以及可选的会话或访问令牌)。如果你想了解更多关于用户和连接的信息，请查看我们的<a class="ae js" href="https://sendbird.com/docs/chat/v3/unreal/application/authenticating-a-user/authentication#2-connect-to-the-sendbird-server-with-a-user-id-and-an-access-token" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">文档。</strong> </a></p><p id="16a3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">为该演示选择的用户Id是<strong class="iw hy"> sendbird </strong>。您可以使用任何您喜欢的ID。</p><p id="55ab" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将发送一个<strong class="iw hy"> null </strong>值作为会话/访问令牌，因为这个演示没有应用安全性。</p><p id="5d89" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">第三个参数是我们的回调，它通知我们错误或成功登录。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="787c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">连接后，我们调用两个函数:<strong class="iw hy"> registerEventHandlers() </strong>和<strong class="iw hy"> getMyConversations() </strong>。请继续阅读，了解更多相关信息。</p><p id="539a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最后，我们将连接的布尔变量<strong class="iw hy">设置为<strong class="iw hy">真</strong>，这样整个组件都知道最新的状态。</strong></p><h2 id="dd67" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.3:注册事件处理程序</h2><p id="3e33" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">当我们连接到websocket时，Sendbird SDK会通知我们的应用程序发生了不同的事件。</p><p id="d464" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果来自<a class="ae js" href="https://sendbird.com/docs/chat/v3/platform-api/overview" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">平台API </strong> </a>的任何活动被执行，事件处理器也会收到通知。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="f566" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">SDK每次收到事件都会传给我们。我们在本演示中分析的唯一事件是<strong class="iw hy"> onMessageReceived </strong>，因为我们将该消息添加到屏幕上已有的消息列表中。</p><p id="e205" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们向列表中添加一条新消息，该消息仅在满足以下所有条件时到达:</p><ul class=""><li id="af60" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated">如果有选定的频道</li><li id="83ea" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">如果事件是正确的(我们检查字符串<strong class="iw hy">‘on message received’</strong>)</li><li id="315b" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">如果所选择的频道URL(频道的唯一ID)与来自所接收事件的频道URL相同</li></ul><h2 id="2a5b" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.4:开始对话</h2><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="63ac" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">此功能将创建一个新的群组通道，用于在两个或多个用户之间发送和接收消息。</p><p id="2146" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于这个例子，我们将频道命名为<strong class="iw hy"> android-tutorial </strong>。</p><p id="1767" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">Sendbird SDK将自动定义一个频道URL(这是每个频道的唯一ID)。</p><p id="34e2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">可以用相同的名称创建多个频道，因为这不是唯一的ID。</p><p id="cefd" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">对于这个例子，我们邀请一个名为<strong class="iw hy"> myTestUserId </strong>的用户ID。我们可以在创建频道时邀请多个用户加入。我们也可以稍后添加成员。</p><p id="4953" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果创建频道时出现错误，变量<strong class="iw hy">startConversationResult</strong>将在屏幕上显示错误。</p><h2 id="eb0c" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.5:获取频道列表</h2><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="ad82" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">一旦我们创建了群组频道，我们需要获得群组频道的列表。</p><p id="22ba" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">组通道包含几个属性。你可以在这里看到它们的全部细节<a class="ae js" href="https://sendbird.com/docs/chat/v3/platform-api/channel/channel-overview#4-list-of-properties-for-group-channels" rel="noopener ugc nofollow" target="_blank"><strong class="iw hy"/></a>。</p><p id="74fe" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">如果出现任何错误，我们将使用<strong class="iw hy"> listConversationsResult </strong>对象在屏幕上显示出来。如果请求是正确的，我们将信息存储在<strong class="iw hy">对话</strong>对象中。</p><h2 id="811c" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.6:列出频道中的消息</h2><p id="4979" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">一旦选择了一个频道，您就可以获得其所有消息的列表。</p><p id="cfaa" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">要查看消息的属性，请查看我们的<a class="ae js" href="https://sendbird.com/docs/chat/v3/platform-api/message/message-overview#2-resource-representation" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">文档</strong> </a>。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="b5c7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">数组<strong class="iw hy">消息</strong>将包含所选频道的消息列表。</p><p id="a378" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在屏幕上，我们显示了<em class="jt">消息</em>属性，但是您还可以使用其他属性:</p><ul class=""><li id="26fe" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated">创建消息的时间</li><li id="fb44" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">消息发送者</li><li id="e301" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">元数据(数据、排序元数组和自定义类型)</li><li id="e724" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">提到的用户</li><li id="f626" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">如果文本中包含任何URL，则打开图形元数据</li><li id="e0fd" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">父消息ID</li><li id="1485" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated">还有更多！</li></ul><h2 id="9441" class="ld kb hx bd kc le lf lg kg lh li lj kk jf lk ll ko jj lm ln ks jn lo lp kw lq bi translated">4.7:发送消息</h2><p id="9bd1" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">现在我们知道如何接收信息。我们需要学习如何向频道发送新消息，让其他成员看到。</p><figure class="mg mh mi mj fd hk"><div class="bz dy l di"><div class="mn mo l"/></div></figure><p id="5591" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这个被发送的消息将为信道的其他连接成员触发一个事件。</p><p id="2bb1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">由于事件处理程序，他们将能够看到新消息被添加到列表中。</p><h1 id="f8fb" class="ka kb hx bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="e9f4" class="pw-post-body-paragraph iu iv hx iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr hb bi translated">就是这样！你现在知道如何构建一个Angular聊天应用程序来发送和接收消息。我们讨论了如何创建Angular服务、构建模板以及对组件进行编码。本教程的完整代码可以在<a class="ae js" href="https://stackblitz.com/edit/angular-ivy-mzphea?file=src%2Fapp%2Fapp.component.ts" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy"> Stackblitz </strong> </a>上找到。一如既往，如果您需要帮助，请在<a class="ae js" href="https://community.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">仙鸟社区</strong> </a>或<a class="ae js" href="https://sendbird.com/contact-us" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">发帖直接联系我们</strong> </a>。我们总是乐意帮忙！</p><p id="a838" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">现在只需添加您的Sendbird应用程序ID并开始构建！</p><p id="2636" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">开心聊楼！✌️</p></div></div>    
</body>
</html>