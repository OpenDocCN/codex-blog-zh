<html>
<head>
<title>What is better? Modular Monolith vs Microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么比较好？模块化整体服务与微服务</h1>
<blockquote>原文：<a href="https://medium.com/codex/what-is-better-modular-monolith-vs-microservices-994e1ec70994?source=collection_archive---------1-----------------------#2021-09-07">https://medium.com/codex/what-is-better-modular-monolith-vs-microservices-994e1ec70994?source=collection_archive---------1-----------------------#2021-09-07</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="6c2d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">什么比较好？这个问题很难回答，因为我可以对大多数开发者说:“看情况”。我会试着根据自己的经历来回答。</p><h1 id="7a5d" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">介绍</h1><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es kb"><img src="../Images/aa103589260b3bdb037239b1db049da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PIgFA5oIP8TZHyv37EzwFg.jpeg"/></div></div></figure><p id="e5da" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在IT行业内部的谈话中，大家至少听说过微服务。微服务长期以来一直是一个时髦词，即使是现在。每个人都谈论它们，每个人都热爱它们，每个人都试图实施它们。</strong></p><p id="e9e0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">甚至有一种观点认为，如果你没有微服务，通常意味着这个项目没有意思，已经过时了……</strong></p><p id="3066" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">看来IT行业已经被微服务的想法迷住了，对吗？</strong></p><p id="1618" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你有没有想过为什么？这种突然对微服务的兴趣和实现微服务的执念是从哪里来的？</p><p id="b54b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">几件事在很大程度上促成了微服务的流行:云解决方案，容器化主要归功于Docker / Kubernetes。大量赞扬微服务架构的讲座。</p><p id="7d0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要记住，与任何解决方案一样，一方的微服务解决了一些问题，但也带来了其他一些问题。通常比我们对付的更难驯服。</p><p id="218d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">微服务带来的一些最大挑战包括:</p><ul class=""><li id="d521" class="kn ko hi ih b ii ij im in iq kp iu kq iy kr jc ks kt ku kv bi translated">服务之间的通信复杂且难以维护(服务的暂时不可用、API契约维护、最终的一致性如果处理不当也会很棘手)</li><li id="fb32" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">更多的服务等于更多的资源</li><li id="0951" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">调试可能非常棘手(由于整个体系结构的复杂性，有时您需要通过一些独立的服务进行调试，以获得关于什么工作不正常的信息)</li><li id="9c50" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">微服务可能非常昂贵</li><li id="3ddc" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">如果你不知道微服务应该如何构建，你可以创建分布式的monolith，这是最糟糕的事情</li></ul><p id="5285" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们考虑一下，我们是否真的都需要微服务？来自IT行业的绝大多数公司并不需要微服务，他们只是没有达到微服务可以展示其全部荣耀的规模。如果我们不是像网飞、Shopify等那样的公司，这主要是关于我们拥有的系统的规模。我们可能看不到使用微服务的任何好处，我认为我们只会伤害自己，在许多方面，包括经济上，因为正如我前面提到的，微服务会消耗大量资源，这会导致大量资金。</p><h1 id="8556" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">有哪些替代方案？</h1><p id="915b" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">自然，第一种选择变成了我们都已经知道的<strong class="ih hj">巨石</strong>。使用了很久，被大多数人讨厌，但传统的独石并没有人们想象的那么糟糕。这又是一个规模问题。对于小型开发团队开发的小项目，它几乎是完美的架构。</p><figure class="kc kd ke kf fd kg er es paragraph-image"><div role="button" tabindex="0" class="kh ki di kj bf kk"><div class="er es lg"><img src="../Images/9a75e93f78687fb6e09b49ae3861a106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zLEDlwjrA-oW2SiG.jpeg"/></div></div></figure><p id="d43a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">独石</strong>建筑</p><p id="21d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于简单的CRUD系统，MVP等。，不需要花哨的架构。但是，如果我们知道我们的应用程序将会增长，我们知道我们正在处理的领域要求很高，那该怎么办呢？</p><p id="7910" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">模块化的整体建筑来帮助手。它与传统的独石有何不同？为什么会更好？首先，模块化整体结构是由模块组成的。每个模块必须完成一些要求。：</p><ul class=""><li id="dddf" class="kn ko hi ih b ii ij im in iq kp iu kq iy kr jc ks kt ku kv bi translated">独立且可互换</li><li id="fd9a" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">拥有提供所需功能所需的一切</li><li id="2a30" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">已定义api</li></ul><p id="285d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，每个模块不可能完全独立于系统的其他部分，但是我们必须尽可能地保持它的独立性。每个模块只链接到它特别需要的代码。</p><p id="04ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">模块化是一个根本性的变化，因为它允许我们将每个模块提取为一个微服务。当我们的规模足够大时，没有理由不将每个模块提取为微服务，以获得其所有的扩展优势。</p><p id="f479" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与传统整体式相比，模块化整体式给我们带来了:</p><ul class=""><li id="5313" class="kn ko hi ih b ii ij im in iq kp iu kq iy kr jc ks kt ku kv bi translated">降低复杂性</li><li id="b4af" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">重构更容易</li><li id="4a91" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">这对团队来说更好</li></ul><p id="f74d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在一个模块化的整体中，我们对待每个模块更多的是一个业务模块而不是一个技术模块，这就是为什么它与领域驱动设计的思想很好地结合在一起。</p><h1 id="1c58" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">模块化整体结构中的领域驱动设计</h1><p id="5160" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">马丁·福勒在下面的引用中对此做了很好的描述:</p><blockquote class="lh li lj"><p id="5bf7" class="if ig lk ih b ii ij ik il im in io ip ll ir is it lm iv iw ix ln iz ja jb jc hb bi translated">领域驱动设计是一种软件开发方法，它将开发集中在对领域模型编程上，该模型对领域的过程和规则有丰富的理解。</p></blockquote><p id="b050" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个名字来自Eric Evans 2003年的一本书，该书通过模式目录描述了这种方法。我不会深入DDD，因为这是一个很大的话题。我想再谈一件事。</p><p id="72c2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在DDD，我们有一个术语叫做有界环境。这一切都是为了将应用程序与彼此相关的业务部分分离开来。按照这种方式，模块化整体中的每个模块都可以根据DDD被视为一个有界上下文。由于这种方法，我们获得了良好的业务结构模块，我们将在未来提取这些模块。</p><p id="1b2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DDD向我们描述了业务应该如何划分到有限的上下文中，模块化的整体和它的模块化告诉我们如何将它构造成一个代码。</p><p id="3c5d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在Kamil Grzybek撰写的精彩系列文章中找到更多关于模块化独石的详细信息:【http://www.kamilgrzybek.com/design/modular-monolith-primer/<a class="ae lo" href="http://www.kamilgrzybek.com/design/modular-monolith-primer/" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="d6ad" class="jd je hi bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">与微服务相比，模块化整体式服务器何时是更好的选择，为什么？</h1><p id="0f1e" class="pw-post-body-paragraph if ig hi ih b ii lb ik il im lc io ip iq ld is it iu le iw ix iy lf ja jb jc hb bi translated">根据我的经验，对于大多数中小型项目来说，模块化整体结构是一种优秀的架构。以我的理解来说，大型项目包括网飞、Shopify等。</p><ul class=""><li id="1a53" class="kn ko hi ih b ii ij im in iq kp iu kq iy kr jc ks kt ku kv bi translated">我们保持模块化，类似于微服务所代表的水平。</li><li id="7a44" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">通信通常发生在整体内部，因此比微服务中的通信简单得多</li><li id="7f6a" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">节省资源。我们仍然有一个整体，但模块化，所以成本将大大低于微服务。在大多数情况下，添加一个新模块不会花费你很多。</li><li id="2fb3" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">调试要容易得多，主要是因为模块之间的通信更容易。</li><li id="7cb4" class="kn ko hi ih b ii kw im kx iq ky iu kz iy la jc ks kt ku kv bi translated">部署过程要简单得多</li></ul><p id="7b1d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总而言之，对于大多数公司来说，一个更好的选择将是实施模块化整体，直到规模更大，微服务有意义。</p><p id="32ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">以上帖子当然只是我对这个话题的看法。由我在这里讨论的所有架构的经验支持。</p><p id="4fe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这只是更大系列的开始。接下来的帖子将描述我自己关于用PHP构建这种模块化整体的想法，以及我是如何做的。</p><p id="6cef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在评论中讨论。我很乐意了解别人的观点。</p><p id="6647" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">继续看我的<a class="ae lo" href="https://mlenczewski.com/newsletter/" rel="noopener ugc nofollow" target="_blank">简讯</a>！</p></div></div>    
</body>
</html>