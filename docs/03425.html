<html>
<head>
<title>Power on Other Devices with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python启动其他设备</h1>
<blockquote>原文：<a href="https://medium.com/codex/power-on-other-devices-with-python-35aff54ccd4?source=collection_archive---------5-----------------------#2021-09-02">https://medium.com/codex/power-on-other-devices-with-python-35aff54ccd4?source=collection_archive---------5-----------------------#2021-09-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/d1bcab78ddf46386ffb51f59ea1cd594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9kNczx12i8H5wJ5_fOxWuA.jpeg"/></div></div></figure><p id="b831" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这是一个非常简洁的小功能，没有多少人知道，叫做Wake-On-Lan (WoL)。它内置于许多台式机和笔记本电脑中，据我所知，还有一些更现代的智能电视。但它究竟是什么呢？</p><p id="ff7d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">WoL是一种保持设备网卡开启的功能，具有一些备用电源，允许我们向它发送消息。这种特定的消息被称为“魔术包”，当设备收到魔术包时，它将通电。</p><p id="7408" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在开始为此编写非常(我是说非常)短的python代码之前，有几件事情需要检查。首先，确保你想玩的设备有WoL功能，我建议先用PC/笔记本电脑试试。为此，您需要在启动时进入设备BIOS。在BIOS中，您需要导航到电源管理部分，查找Lan唤醒设置并启用它。它也可以被称为PCIe/PCI，所以也要注意，有时会出现在网络或CPU电源管理设置下，这完全取决于您使用的主板品牌。如果你很难找到它，在网上搜索你的主板，可能会更容易找到去哪里。</p><p id="647d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，有几件事要在设备上检查。</p><p id="3257" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">→需要禁用快速引导/启动</p><p id="6eed" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">→在设备管理器中，导航到您的网卡，双击它并进入电源管理，确保启用“允许此设备唤醒计算机”和“仅允许魔术包唤醒计算机”</p><p id="d680" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">→然后在高级下启用“魔术包唤醒”和“模式匹配唤醒”</p><p id="7bf8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您的另一个设备打开时，您可能还想记下mac地址和本地IP地址。最简单的方法是打开一个命令提示符终端，键入' ipconfig/all' + enter。您将查找与您刚才查看的网卡名称相匹配的部分。从这里记下物理地址和IPv4地址，接下来会用到它们。物理地址将由几个“-”符号分隔，当您写下它时，您应该用“:”替换它们。</p><p id="e52a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦这些都完成了，你就可以关闭设备，回到你想要运行python脚本的机器上。</p><p id="b99d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">好了，现在是代码的时间了！您将需要pip安装一个名为“wakeonlan”的库。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="01f9" class="jx jy hi jt b fi jz ka l kb kc">pip install wakeonlan</span></pre><p id="186a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由此我们只对一种叫做“发送魔术包”的方法感兴趣:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="5a11" class="jx jy hi jt b fi jz ka l kb kc">from wakeonlan import send_magic_packet</span></pre><p id="7590" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们想要为我们想要控制的设备创建一个字典。这实际上还将包含另一个字典来存储之前记下的mac地址和IP地址。</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="f877" class="jx jy hi jt b fi jz ka l kb kc">devices = {<br/>   'my_pc':{'mac':'YOUR MAC ADDRESS','ip_address':'YOUR IP'}<br/>}</span></pre><p id="3ede" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在这个字典中添加任意多的设备，只要遵循相同的格式。</p><p id="40b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们将编写一个小函数来发送我们的魔法包！</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="2f1b" class="jx jy hi jt b fi jz ka l kb kc">def wake_device(device_name):<br/>   if device_name in devices:<br/>      mac,ip = devices[device_name].values()<br/>      send_magic_packet(mac,ip_address=ip)<br/>      print('Magic Packet Sent')<br/>   else:<br/>      print('Device Not Found')</span></pre><p id="c508" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">就这么简单！就像这样调用你的函数:</p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="d9da" class="jx jy hi jt b fi jz ka l kb kc">wake_device('my_pc')</span></pre><p id="97f7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您的设备应该会打开！</p></div><div class="ab cl kd ke gp kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="hb hc hd he hf"><p id="bebe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这就是唤醒设备的背景。有趣的部分是真正把它投入使用，并使它成为你一天中有用或方便的一部分。例如，您可能想要添加一个很酷的方式来激活该功能，也许可以查看我关于fire tv手势控制的文章，您可以调整输出来打开不同的设备！也许你在家里有服务器，当你离开家的时候你想打开它，或者当你回家的时候你想打开它。要做到这一点，请查看我的文章，当你离开房间时自动锁定电脑，这可以很容易地改变为在你离开或返回时打开一个设备！</p><p id="31e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望你觉得这是有帮助的和有趣的！我认为这是一个非常酷的功能！</p></div></div>    
</body>
</html>