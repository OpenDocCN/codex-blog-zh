<html>
<head>
<title>Test your VueJS + TypeScript application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测试您的VueJS + TypeScript应用程序</h1>
<blockquote>原文：<a href="https://medium.com/codex/test-your-vuejs-typescript-application-b7dc9133e6f?source=collection_archive---------0-----------------------#2020-12-31">https://medium.com/codex/test-your-vuejs-typescript-application-b7dc9133e6f?source=collection_archive---------0-----------------------#2020-12-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="2657" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><figure class="ev ex ip iq ir is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es io"><img src="../Images/48199864a089445960b132cc274b5b39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8pmMUlcjsU-hcdqz"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">由<a class="ae jd" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="cd96" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">本教程的重点是使用TypeScript测试VueJS应用程序。我们将使用Jest(打字稿版本“ts-jest”)。</p><p id="b597" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">我将使用我开发的名为<a class="ae jd" href="https://github.com/Vince-F/lemu" rel="noopener ugc nofollow" target="_blank"> LEMU </a>的开源应用程序。关于它的一个简短的词；这是一个管理可视化回归测试的图形化应用程序。这个应用程序是用Vue CLI创建的，带有TypeScript配置和Jest作为单元测试框架。</p><p id="292a" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">但是让我们开始吧。我们将讨论应用程序的单元测试。单元测试覆盖了软件的最小单元:功能。单元测试应该覆盖所有可能的情况。此外，建议从对另一部分代码依赖较少的代码部分开始。在单元测试中，您应该模拟您的依赖项，或者确保它们已经被测试覆盖。否则，如果您的一个测试失败了，跟踪错误在哪里可能会更复杂。</p><p id="51a0" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">任何中型到大型的应用程序都依赖Vuex来处理状态管理。状态管理是应用程序的基础。因此，让我们从测试Vuex商店开始，以确保您的任何Vue组件都使用可靠的代码。</p></div><div class="ab cl kc kd gp ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hb hc hd he hf"><h1 id="340c" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">第1部分:测试您的存储、变异和获取器</h1><p id="8dd2" class="pw-post-body-paragraph je jf hi jg b jh lh jj jk jl li jn jo jp lj jr js jt lk jv jw jx ll jz ka kb hb bi translated">正如我们之前所说的，Vuex商店是您的应用程序的基础。测试它们将确保应用程序的基础工作良好。</p><p id="38e5" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在你的存储库的基础是状态和改变它的突变，所以我们将从突变开始。突变可能非常简单，但测试它们可能是有用的。一开始，如果你没有单元测试或者你测试的不够多，多测试总比少测试好；它会给你信心，你的突变正在起作用，即使是简单的，它会给你写测试的习惯。</p><p id="4c79" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">所以让我们从创建第一个测试文件开始。这是商店部分的项目结构。</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es lm"><img src="../Images/0245349564ac9186fa01f026941cae61.png" data-original-src="https://miro.medium.com/v2/resize:fit:362/format:webp/1*hSHvHBNghDyxbED2sEB6jQ.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">项目的结构</figcaption></figure><p id="2c95" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">对于单元测试，它遵循“测试/单元”目录下的相同结构。</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es lr"><img src="../Images/a16aef38db4b93c84be72c45babd22de.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/1*2m49bwwqpDtTLOQKVzvZuw.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">测试目录的结构</figcaption></figure><p id="5da3" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">现在让我们把重点放在文件结构上。这个文件包含一个“describe”部分，用于被测试实体的名称(这里是我们的store模块)，在这个部分中有一个“describe ”,用于每个被测试的函数。然后放在一个“if”块中，用于给定函数的每个用例。</p><p id="b362" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如果你采用下面的代码:</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es ls"><img src="../Images/9321b34d9f557006ed32bda74e72da08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*dqKB4H2z6bhyTgNIq9xd-w.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">商店代码摘录</figcaption></figure><p id="b2e7" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">在测试文件中，它给出了:</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es lt"><img src="../Images/19fcb91edb4f6ca65935837e2ead9b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:964/format:webp/1*lga-CNfmexsd436MI0yevg.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">测试代码摘录</figcaption></figure><h2 id="7afa" class="lu kk hi bd kl lv lw lx kp ly lz ma kt jp mb mc kx jt md me lb jx mf mg lf ho bi translated">测试突变</h2><p id="254a" class="pw-post-body-paragraph je jf hi jg b jh lh jj jk jl li jn jo jp lj jr js jt lk jv jw jx ll jz ka kb hb bi translated">现在我们有了测试文件结构，让我们深入测试；从上面看到的突变开始:“setSnackbarDisplayed”。它是一个变种，将有效负载作为一个参数来设置在UI上显示小吃店的状态。</p><p id="ae18" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">变异很容易测试。它是一个将状态作为第一个参数，将有效载荷作为第二个参数的函数。</p><p id="fd31" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">首先，导入你的店铺。在这个例子中，我使用了一个名为“applicationStore”的商店。注意，这不是主存储，而是主存储中注入的模块。</p><p id="a07b" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">“突变”是商店的财产。然后在它的属性上是你要测试的突变。“突变”属性可以不定义，所以我使用可选的链接操作符。在未定义的情况下，测试会失败，这正是我们想要的。我们将测试上面提到的突变:“setSnackbarDisplayed”。</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es mh"><img src="../Images/50c1b7af8629b4cc50c6a62ed37c65e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*SOVCoTDg-4TPiWUizG0XGQ.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">召唤变异来测试</figcaption></figure><p id="180d" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">如前所述，突变是一个带有两个参数的函数，第一个参数是状态。创建表示状态的对象。</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es mi"><img src="../Images/54a3d6ebd944f5d87e307fff45e99e0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*9fZwg9kXGzVXRHGgooXozQ.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">用于测试的状态对象</figcaption></figure><p id="34df" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">第二个参数是有效载荷，但是只要符合您的测试就行。最后，在状态对象上写下你的期望，因为你的突变改变了状态。</p><p id="3233" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">以下是最终结果:</p><figure class="ln lo lp lq fd is er es paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="er es mj"><img src="../Images/1f4e01387b97b9a3063b0b29a4c20958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*41bi1CsUnnv8s9Uuu7GeTA.png"/></div></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">对突变的测试</figcaption></figure><h2 id="7e59" class="lu kk hi bd kl lv lw lx kp ly lz ma kt jp mb mc kx jt md me lb jx mf mg lf ho bi translated">测试吸气剂</h2><p id="2c77" class="pw-post-body-paragraph je jf hi jg b jh lh jj jk jl li jn jo jp lj jr js jt lk jv jw jx ll jz ka kb hb bi translated">测试一个getter与突变非常相似。它包含在store对象的“getters”属性中。与“突变”属性相同，它可以是未定义的，所以让我们使用可选的链接操作符。如果它是未定义的，那么测试将会失败，这正是我们想要的。</p><p id="384a" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">getter函数有四个参数:<br/> -第一个是“状态”(模块的本地状态)<br/> -第二个是“Getters”(模块的本地状态)<br/> -第三个是“根状态”<br/> -第四个也是最后一个是“根getters”</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es mk"><img src="../Images/58856076558e0a35aeebb4fbbd51129e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*RHmrynHEe_9PcDxBFHOnEw.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">在测试中调用getter</figcaption></figure><p id="7719" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">然后getter返回值，这样您就可以在结果上写下您的期望。下面是一个测试吸气剂的例子。</p><figure class="ln lo lp lq fd is er es paragraph-image"><div class="er es ml"><img src="../Images/ea457ace609c0c434ea8e49adb1fcf43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*Wtcz69kTiNpnH1eDQEqMww.png"/></div><figcaption class="iz ja et er es jb jc bd b be z dx translated">测试吸气剂</figcaption></figure><p id="5f52" class="pw-post-body-paragraph je jf hi jg b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb hb bi translated">因此，下面是开始测试应用程序的基础。你可以查看<a class="ae jd" href="https://vince-f.medium.com/test-your-vuejs-typescript-application-part-2-acaa5d8ba327?source=your_stories_page-------------------------------------" rel="noopener">下一部分关于如何测试Vuex商店</a>的“行动”。</p></div></div>    
</body>
</html>