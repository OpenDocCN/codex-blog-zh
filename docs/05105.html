<html>
<head>
<title>A Couple of Words about Coverage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å…³äºè¦†ç›–ç‡çš„å‡ å¥è¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/a-couple-words-about-coverage-bb1eee6af9f8?source=collection_archive---------23-----------------------#2022-01-31">https://medium.com/codex/a-couple-words-about-coverage-bb1eee6af9f8?source=collection_archive---------23-----------------------#2022-01-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="bab5" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">ä»Šå¤©æˆ‘ä»¬è°ˆè®ºä¸€ç§æ–°çš„è¦†ç›–å·¥å…·ğŸ©ESCoverå’Œæ›´å¤šï¼</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es ix"><img src="../Images/6ff5be5659388a191f4d21a8d9808916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*4dWmVlKsZ4I_LryD.png"/></div><figcaption class="jf jg et er es jh ji bd b be z dx translated">éª‘ç€ç‰›ï¼Œæˆ‘åˆ°å®¶äº†ã€‚æˆ‘å¾ˆå¹³é™ã€‚ç‰›ä¹Ÿå¯ä»¥ä¼‘æ¯ã€‚é»æ˜å·²ç»æ¥ä¸´ã€‚åœ¨æˆ‘çš„èŒ…è‰å±‹é‡Œï¼Œæˆ‘å·²ç»æ”¾ä¸‹äº†é­å­å’Œç»³ç´¢ã€‚<br/>ç¦…å®—åç‰›</figcaption></figure><p id="53ec" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å—¨ä¼™è®¡ä»¬ï¼</p><p id="5461" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æˆ‘æƒ³ä½ çŸ¥é“ä»£ç è½¬æ¢å™¨ğŸŠ<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/putout" rel="noopener ugc nofollow" target="_blank">Putout</a></code>æœ‰<code class="du kf kg kh ki b">100%</code>ä¸ªæµ‹è¯•è¦†ç›–ã€‚ä¸ºä»€ä¹ˆè¿™æ ·é—®é¢˜æ˜¯ç¼–å†™è§£æå™¨æ˜¯ä¸€é¡¹éå¸¸å›°éš¾çš„ä»»åŠ¡ï¼Œä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼æœ‰ä¸€ä¸ªå¸®æ‰‹ğŸ˜ï¼</p><h1 id="5172" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">å˜²ç¬‘è¿›å£ï¼</h1><p id="a2e5" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated"><code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/mock-import" rel="noopener ugc nofollow" target="_blank">Mock-import</a></code>å­˜åœ¨äº†å¤§çº¦ä¸€å¹´ï¼Œå½“ä½ ä½¿ç”¨<code class="du kf kg kh ki b"><a class="ae kj" href="https://nodejs.org/api/esm.html" rel="noopener ugc nofollow" target="_blank">EcmaScript Modules</a></code>çš„æ—¶å€™ï¼Œå®ƒä¼šç”¨æ¥å˜²ç¬‘äº‹ç‰©ã€‚å®ƒä½¿ç”¨ğŸŠ<code class="du kf kg kh ki b">Putout</code>å¹¶åœ¨æ‚¨æœ€éœ€è¦çš„æ—¶å€™å°†<code class="du kf kg kh ki b">ImportDeclarations</code>å˜ä¸º<code class="du kf kg kh ki b">VariableDeclaration</code>ã€‚æ‰€ä»¥è¿™æ ·çš„ä»£ç :</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="4e46" class="ll kl hi ki b fi lm ln l lo lp">import {readFile} from 'fs/promises';</span></pre><p id="70a0" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å˜æˆäº†:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="d760" class="ll kl hi ki b fi lm ln l lo lp">const {readFile} = global.__mockImportCache.get('fs/promises');</span></pre><p id="2d98" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æ•ˆæœæƒŠäººï¼ä½†æ˜¯<code class="du kf kg kh ki b">coverage</code>æœ‰ä¸€ä¸ªé—®é¢˜:</p><ul class=""><li id="61a9" class="lq lr hi jl b jm jn jp jq js ls jw lt ka lu ke lv lw lx ly bi translated"><code class="du kf kg kh ki b">nyc</code>ä¸æ”¯æŒ<code class="du kf kg kh ki b">ESM</code>ï¼›</li><li id="01e6" class="lq lr hi jl b jm lz jp ma js mb jw mc ka md ke lv lw lx ly bi translated">ä½¿ç”¨è£…è½½æœºæ—¶<code class="du kf kg kh ki b">c8</code>æ˜¾ç¤º<a class="ae kj" href="https://github.com/coderaiser/c8-reproduce" rel="noopener ugc nofollow" target="_blank">é”™è¯¯è¦†ç›–ä¿¡æ¯</a>ï¼›</li></ul><p id="92b3" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è€ƒè™‘åˆ°è¿™ä¸¤ä¸ªå› ç´ ã€‚</p><h1 id="5cc1" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">æ¸¸æˆä¸­çš„ğŸ§¨æ–°ç©å®¶è®©ä½ æ— æ‰€éå½¢ï¼</h1><p id="eb1b" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated">åˆä¸€ä¸ªè¦†ç›–å·¥å…·å‡ºç°äº†:ğŸ©<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/escar" rel="noopener ugc nofollow" target="_blank">ESCover</a></code>ã€‚å®ƒä¹Ÿæ˜¯åŸºäºğŸŠ<code class="du kf kg kh ki b">Putout</code>ã€‚å®ƒè®¾ç½®ç¨åå°†è°ƒç”¨çš„æ ‡è®°ï¼Œæ›´æ”¹ä»£ç :</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="8db3" class="ll kl hi ki b fi lm ln l lo lp">export const sum = (a, b) =&gt; {<br/>    return a + b;<br/>};</span></pre><p id="b3b7" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å˜æˆè¿™æ ·:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="551c" class="ll kl hi ki b fi lm ln l lo lp">export const sum = (a, b) =&gt; {<br/>    return __c4['ğŸ§¨'](5, 4), a + b;<br/>};</span></pre><p id="e20c" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">__c4</code>æ˜¯ä¸€ä¸ªæœ‰ç‰¹æ®Šå«ä¹‰çš„å˜é‡:å®ƒæä¾›äº†ä¸€ä¸ªç»™å‡ºå½“å‰æŒ‡ä»¤çš„è¡Œå·ä¿¡æ¯çš„å‡½æ•°ã€‚<br/>ä»¥ä¸‹æ˜¯ä¸€åˆ‡æ­£å¸¸æ—¶æŠ¥å‘Šçš„æ ·å­:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="e55f" class="ll kl hi ki b fi lm ln l lo lp"># CAP version 13</span><span id="5bae" class="ll kl hi ki b fi me ln l lo lp">1..3<br/># files: 3<br/># covered: 3</span><span id="b1fa" class="ll kl hi ki b fi me ln l lo lp"># ğŸŒ´ ok</span></pre><p id="0168" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å½“äº‹æƒ…ä¸å¯¹åŠ²æ—¶:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="647f" class="ll kl hi ki b fi lm ln l lo lp"># CAP version 13</span><span id="7e70" class="ll kl hi ki b fi me ln l lo lp"># /Users/coderaiser/escover/example/example.js<br/>ğŸ§¨ should be covered<br/>---<br/>lines:<br/> ï¸- 1 at file:///Users/coderaiser/escover/example/example.js:1</span><span id="9995" class="ll kl hi ki b fi me ln l lo lp">1..3<br/># files: 3<br/># covered: 2</span><span id="a02d" class="ll kl hi ki b fi me ln l lo lp"># ğŸ§¨ fail: 1</span></pre><p id="f277" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æˆ–è€…åƒè¿™æ ·:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="er es mf"><img src="../Images/76c9b0dc6b41b9b412eb8c4585e2784e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YL6x5YR63_EgfjVu79j9SQ.png"/></div></div></figure><p id="1a66" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ä½ å¯ä»¥é€‰æ‹©ä½ å–œæ¬¢çš„ğŸ˜ã€‚</p><p id="000e" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ğŸ©<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/escover#escover----" rel="noopener ugc nofollow" target="_blank">ESCover</a></code>å¯ä»¥å®šæœŸä½¿ç”¨ğŸ‰ï¼<br/>å”¯ä¸€çš„é—®é¢˜æ˜¯:å®ƒåªå¯¹<code class="du kf kg kh ki b">EcmaScript Modules</code>æœ‰æ•ˆã€‚è¿™æ˜¯æœ‰åŸå› çš„:å¯¹äº<code class="du kf kg kh ki b">CommonJS</code>ä½ å¯ä»¥ä½¿ç”¨<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/bcoe/c8" rel="noopener ugc nofollow" target="_blank">c8</a></code>å’Œ<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/istanbuljs/nyc" rel="noopener ugc nofollow" target="_blank">nyc</a></code>ã€‚ä½†æ˜¯æ²¡æœ‰å·¥å…·æ˜¾ç¤ºç”¨<code class="du kf kg kh ki b"><a class="ae kj" href="https://nodejs.org/dist/latest-v16.x/docs/api/esm.html#loaders" rel="noopener ugc nofollow" target="_blank">node loaders</a></code>æ”¹å˜çš„æ–‡ä»¶çš„è¦†ç›–ç‡ã€‚</p><p id="5371" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">çš„ç»“æœğŸ©<code class="du kf kg kh ki b">ESCover</code>è¢«ä¿å­˜åˆ°<code class="du kf kg kh ki b">coverage/lcov.info</code>ï¼Œå¹¶åœ¨å®Œæˆåè¯»å–ã€‚å…³äºä¿é™©çš„å‡ ä»¶äº‹:</p><p id="1647" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">-â˜ï¸ <code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/linux-test-project/lcov" rel="noopener ugc nofollow" target="_blank"><em class="mk">lcov</em></a></code> <em class="mk">åˆ›ä½œäº</em> <code class="du kf kg kh ki b"><em class="mk">2002</em></code> <em class="mk">ï¼Œå·®ä¸å¤šäºŒåå¹´å‰ã€‚-â˜ï¸çš„Linuxå†…æ ¸å¼€å‘è€…åˆ›å»ºäº†å®ƒæ¥äº†è§£è¦†ç›–ç‡çš„æƒ…å†µã€‚</em> <br/> -â˜ï¸ <em class="mk"> lcovæœ€åˆæ˜¯ç”¨</em> <code class="du kf kg kh ki b"><em class="mk">PERL</em></code> <em class="mk">ç¼–å†™çš„ï¼Œå…·æœ‰åŸºäºæ–‡æœ¬çš„æ ¼å¼ã€‚</em><br/>ã€-â˜ï¸ã€‘<em class="mk">è¿™æ˜¯æœ‰å²ä»¥æ¥æœ€æµè¡Œçš„è¦†ç›–æ ¼å¼ï¼Œå—åˆ°å¾ˆå¤šå·¥å…·çš„æ”¯æŒ(æ¯”å¦‚</em> <a class="ae kj" href="https://coveralls.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mk">å¥—è£…</em> </a>ã€c8å’Œnyc <em class="mk">)ã€‚</em></p><p id="4950" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ä»¥ä¸‹ä»£ç è¿è¡Œæˆ‘ä»¬çš„<code class="du kf kg kh ki b">ESM</code>åº”ç”¨ç¨‹åº:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="2828" class="ll kl hi ki b fi lm ln l lo lp">escover npm test</span></pre><p id="604b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æˆ‘ä»¬å°†æ”¶åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„<code class="du kf kg kh ki b">coverage/lconf.info</code>:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="a713" class="ll kl hi ki b fi lm ln l lo lp">SF:/Users/coderaiser/escover/lib/transform.js<br/>DA:1,1<br/>DA:3,1<br/>DA:7,1<br/>DA:9,1<br/>DA:10,1<br/>DA:12,1<br/>DA:24,1<br/>DA:25,1<br/>DA:27,1<br/>DA:28,1<br/>DA:29,1<br/>DA:32,1<br/>end_of_record</span></pre><p id="3c88" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å…¶ä¸­:</p><ul class=""><li id="4c1a" class="lq lr hi jl b jm jn jp jq js ls jw lt ka lu ke lv lw lx ly bi translated"><code class="du kf kg kh ki b">SF</code> -æ˜¯é€šå¾€æºå¤´çš„è·¯å¾„ï¼›</li><li id="6b5c" class="lq lr hi jl b jm lz jp ma js mb jw mc ka md ke lv lw lx ly bi translated"><code class="du kf kg kh ki b">DA</code> -æ­£åœ¨è¿è¡Œçš„è¡Œæ•°å’Œè®¡æ•°ï¼›</li><li id="5662" class="lq lr hi jl b jm lz jp ma js mb jw mc ka md ke lv lw lx ly bi translated"><code class="du kf kg kh ki b">end_of_record</code>å½“å‰æ–‡ä»¶æ¡ç›®çš„æœ€æ–°è®°å½•ï¼›</li></ul><p id="0123" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¯¹æˆ‘æ¥è¯´ï¼Œè¿™çœŸçš„æ˜¯äººç±»å¯è¯»çš„ï¼Œéå¸¸ç´§å‡‘çš„å½¢å¼ã€‚æˆ‘ç°åœ¨å”¯ä¸€ä¸æ˜ç™½çš„æ˜¯:è®¡æ•°å™¨ï¼Œæˆ‘çœ‹ä¸å‡ºæˆ‘ä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ğŸ¤·â€â™‚ï¸ï¼Œå¦‚æœä½ æœ‰ç†ç”±<a class="ae kj" href="https://github.com/coderaiser/escover/issues" rel="noopener ugc nofollow" target="_blank">å°±åˆ¶é€ ä¸€ä¸ªé—®é¢˜</a>ã€‚å®ƒå¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸­æ·»åŠ ã€‚</p><p id="5f82" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ğŸ©<code class="du kf kg kh ki b">ESCover</code>åœ¨å¼€å‘çš„æ—©æœŸé˜¶æ®µï¼Œå¾ˆå¤šä¸œè¥¿ä¼šæ”¹å˜ï¼Œä½†æ˜¯å®ƒå·²ç»åœ¨å‡ ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ğŸˆã€‚</p><h1 id="afcc" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">ğŸ¤·â€â™‚ï¸:æˆ‘è¿˜èƒ½åšä»€ä¹ˆğŸŠ<code class="du kf kg kh ki b">Putout</code>ï¼Ÿ</h1><p id="396b" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated">æ‚¨å¯ä»¥å€ŸåŠ©<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/estrace#estrace----" rel="noopener ugc nofollow" target="_blank">ESTrace</a></code>è·Ÿè¸ªå‡½æ•°çš„æ‰§è¡Œã€‚å®ƒæä¾›è¿™æ ·çš„ä¿¡æ¯:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="216b" class="ll kl hi ki b fi lm ln l lo lp">coderaiser@cloudcmd:~/estrace$ node --loader estrace example/lint.js<br/>..ğŸ’£ lint([]) 16.05mb file:///Users/coderaiser/estrace/example/lint.js:5<br/>....ğŸ’£ getFiles([]) 16.05mb file:///Users/coderaiser/estrace/example/lint.js:12<br/>....ğŸ’¥ getFiles 16.06mb file:///Users/coderaiser/estrace/example/lint.js:12<br/>....ğŸ’£ lintFiles([]) 16.06mb file:///Users/coderaiser/estrace/example/lint.js:22<br/>....ğŸ’¥ lintFiles 16.06mb file:///Users/coderaiser/estrace/example/lint.js:22<br/>..ğŸ’¥ lint 16.06mb file:///Users/coderaiser/estrace/example/lint.js:5</span></pre><p id="4580" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å¹¶è¿›è¡Œä¸‹ä¸€æ­¥çš„è½¬æ¢ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡½æ•°:</p><p id="5c5d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">const fn = (a) =&gt; a</code></p><p id="823d" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">EStrace</code>å°†æ›¿æ¢ä¸º:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="42c2" class="ll kl hi ki b fi lm ln l lo lp">const fn = (a) =&gt; {<br/>    try {<br/>        var __estrace_context = __estrace.enter('&lt;anonymous:2&gt;', 'file://hello.js:2', arguments);<br/>        return a;<br/>    } finally {<br/>        __estrace.exit('&lt;anonymous:2&gt;', 'file://hello.js:2', __estrace_context);<br/>    }<br/>};</span></pre><h1 id="853e" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">ğŸ¤·â€â™‚ï¸æœ‰ä»€ä¹ˆæ–°è§„å®šï¼Ÿ</h1><p id="12c3" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated"><code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-convert-commonjs-to-esm#commons" rel="noopener ugc nofollow" target="_blank">@putout/plugin-convert-commonjs-to-esm</a></code>ä¸å†è¦æ±‚ä½ ä½¿ç”¨<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/simport" rel="noopener ugc nofollow" target="_blank">simport</a></code>ã€‚ä»…å†…ç½®æ¨¡å—ğŸ’ª(<em class="mk">æ„Ÿè°¢</em> <code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-declare-undefined-variables#readme" rel="noopener ugc nofollow" target="_blank"><em class="mk">@putout/plugin-declare-undefined-variables</em></a></code> <em class="mk">æ”¯æŒåŸç”Ÿ</em> <code class="du kf kg kh ki b"><em class="mk">node.js</em></code> <em class="mk">æ¨¡å—ï¼Œå¹¶ä¼šåœ¨ä½¿ç”¨æ—¶å£°æ˜ğŸ˜‰</em>)ã€‚</p><p id="2579" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><code class="du kf kg kh ki b">@putout/plugin-nodejs</code>å¾—åˆ°äº†ä¸€ä¸ªæ–°è§„åˆ™:<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/putout/tree/master/packages/plugin-nodejs#convert-dirname-to-url" rel="noopener ugc nofollow" target="_blank">convert-dirname-to-url</a></code>ã€‚å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</p><p id="ba34" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">å˜åŒ–:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="97dc" class="ll kl hi ki b fi lm ln l lo lp">import {readFile} from 'fs/promises';<br/>const file1 = join(__dirname, '../../package.json');</span></pre><p id="a813" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">æ”¶ä»¶äºº:</p><pre class="iy iz ja jb fd lh ki li lj aw lk bi"><span id="cd65" class="ll kl hi ki b fi lm ln l lo lp">import {readFile} from 'fs/promises';<br/>const file1 = new URL('../../package.json', import.meta.url).pathname;</span></pre><p id="5a5a" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è¿™æ ·æœ‰åŠ©äºå»æ‰<code class="du kf kg kh ki b">EcmaScript Modules</code>ä¸­çš„<code class="du kf kg kh ki b">__dirname</code>ã€‚ä¸‹é¢æ˜¯<a class="ae kj" href="https://putout.cloudcmd.io/#/gist/e5169838606cd0cd7b4560000936d084/c9ee791e97c280fd2ebca7c66ec8658d53922846" rel="noopener ugc nofollow" target="_blank">å¿«ç¨¿</a>å’Œ<a class="ae kj" href="https://github.com/coderaiser/putout/commit/810fb2c05a5f06ae425b5c68ce6850dcb2f53b24" rel="noopener ugc nofollow" target="_blank">ç»“æœ</a>ã€‚</p><h1 id="85ce" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">ğŸ¦”çœŸå®ä¸–ç•Œä½¿ç”¨</h1><p id="fb0b" class="pw-post-body-paragraph jj jk hi jl b jm lc ij jo jp ld im jr js le ju jv jw lf jy jz ka lg kc kd ke hb bi translated">æˆ‘åˆšåˆšå‘ç°(<em class="mk">æˆ‘çŸ¥é“ä»–ä»¬ä¼šçš„ï¼Œä½†æ˜¯è°çŸ¥é“å‘¢</em>ğŸ˜…<em class="mk"> â€¦ </em>)å³ä»<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/stylelint/stylelint/issues/5291#issuecomment-920778090" rel="noopener ugc nofollow" target="_blank"><strong class="jl hj">Stylelint</strong></a></code> <a class="ae kj" href="https://github.com/stylelint/stylelint/issues/5291#issuecomment-920778090" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj">åˆ°<em class="mk">æ°‘é—´æ‰€ç”¨çš„</em>ğŸŠ</strong> </a> <code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/stylelint/stylelint/issues/5291#issuecomment-920778090" rel="noopener ugc nofollow" target="_blank"><strong class="jl hj">Putout</strong></a></code> <a class="ae kj" href="https://github.com/stylelint/stylelint/issues/5291#issuecomment-920778090" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj">å°†è‡ªå·±çš„ä»£ç åº“è½¬æ¢ä¸º</strong> </a> <code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/stylelint/stylelint/issues/5291#issuecomment-920778090" rel="noopener ugc nofollow" target="_blank"><strong class="jl hj">ESM</strong></a></code> <a class="ae kj" href="https://github.com/stylelint/stylelint/issues/5291#issuecomment-920778090" rel="noopener ugc nofollow" target="_blank">ğŸ‰</a>ã€‚</p><p id="5fbc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è€Œä¸”<code class="du kf kg kh ki b">jest</code>æœ‰ç‚¹é—®é¢˜:<strong class="jl hj">å®ƒä¸è®¤</strong> <code class="du kf kg kh ki b"><strong class="jl hj">import.meta.url</strong></code> <strong class="jl hj">ğŸ¤·â€â™‚ï¸ </strong>å¥½å§ï¼Œé‚£æ˜¯æ‚²ä¼¤çš„ğŸ˜•ï¼Œä½†æ˜¯å˜¿ï¼</p><p id="c1cc" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">è¿™æ˜¯ä¸ºä»€ä¹ˆğŸ“¼<code class="du kf kg kh ki b"><a class="ae kj" href="https://github.com/coderaiser/supertape" rel="noopener ugc nofollow" target="_blank">Supertape</a></code>å­˜åœ¨:<strong class="jl hj">æœ€ç®€å•çš„é«˜é€Ÿæµ‹è¯•ã€‚</strong> <br/>éå¸¸æ„Ÿè°¢<strong class="jl hj"> Stylelint </strong>å›¢é˜Ÿï¼ä½ æ‰€åšçš„å¤ªæ£’äº†ï¼Œéå¸¸é¼“èˆäººå¿ƒï¼</p><p id="ce2b" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated">ä»Šå¤©å°±åˆ°è¿™é‡Œå§ï¼æœ‰ä¸€ä¸ªå¥½çš„ç¼–ç ğŸ®ï¼</p><p id="c7d6" class="pw-post-body-paragraph jj jk hi jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke hb bi translated"><em class="mk">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae kj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jl hj"><em class="mk">plain English . io</em></strong></a><em class="mk">ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae kj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj"> <em class="mk">å…è´¹æ¯å‘¨ç®€è®¯</em> </strong> </a> <em class="mk">ã€‚åœ¨æˆ‘ä»¬çš„</em> <a class="ae kj" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hj"> <em class="mk">ç¤¾åŒºè·å¾—ç‹¬å®¶å†™ä½œæœºä¼šå’Œå»ºè®®</em> </strong> </a> <em class="mk">ã€‚</em></p></div></div>    
</body>
</html>