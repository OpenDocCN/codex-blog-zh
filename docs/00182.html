<html>
<head>
<title>Making Your Own AI Virtual Assistant With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python制作自己的人工智能虚拟助手</h1>
<blockquote>原文：<a href="https://medium.com/codex/making-your-own-ai-virtual-assistant-with-python-5c2046dadfa7?source=collection_archive---------0-----------------------#2021-01-02">https://medium.com/codex/making-your-own-ai-virtual-assistant-with-python-5c2046dadfa7?source=collection_archive---------0-----------------------#2021-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/3e78913ef778044367144922f33a679e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3zCoJJyVXCCP72rC"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">Akhil Yerabati 在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><div class=""/><p id="e563" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们都听说过人工智能助手，如钢铁侠中的贾维斯，以及现实生活中的亚马逊Alexa和谷歌Home。但是如果你能自己做呢？嗯，有了python和一些语音识别的魔法，你就可以了！</p><p id="de4b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">制作您自己的个人助理允许您添加针对您需求的定制功能，让您过上更高效的生活！</p><h1 id="29ef" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">什么是虚拟助理？</h1><p id="54f7" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">虚拟助手已经编写了能够识别人类语言和命令的应用程序，这些语言和命令会导致程序执行任务。虚拟助理通常为用户执行简单的工作，例如向日历添加任务；提供通常在网络浏览器中搜索的信息；或者控制和检查<a class="ae hv" href="https://internetofthingsagenda.techtarget.com/definition/smart-home-or-building" rel="noopener ugc nofollow" target="_blank">智能家居</a>设备的状态，包括灯、摄像头和恒温器。</p><p id="d649" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">虚拟助手是物联网的一部分。物联网是一个“物”的网络，能够在没有人工干预的情况下通过无线网络收集和传输数据。你可以在这里了解更多信息:</p><div class="hh hi ez fb hj kw"><a rel="noopener follow" target="_blank" href="/swlh/saving-money-at-the-cost-of-privacy-19c4fd5e2115"><div class="kx ab dw"><div class="ky ab kz cl cj la"><h2 class="bd hz fi z dy lb ea eb lc ed ef hx bi translated">以牺牲隐私为代价省钱</h2><div class="ld l"><h3 class="bd b fi z dy lb ea eb lc ed ef dx translated">想象一下，仅仅十年前，我们还得起床调节恒温器。然而现在我们可以完成这项任务…</h3></div><div class="le l"><p class="bd b fp z dy lb ea eb lc ed ef dx translated">medium.com</p></div></div><div class="lf l"><div class="lg l lh li lj lf lk hp kw"/></div></div></a></div><p id="4fb4" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些助手的核心由语音识别程序和音频引擎组成。一旦你有了这个核心，可能性是无限的，你可以添加尽可能多的功能。</p><figure class="lm ln lo lp fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es ll"><img src="../Images/f4097cb14cf0bd045b41e98b26627fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CFJiYartpGtk1p-z"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">路易斯·科尔特斯在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="2772" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">构建助手</h1><p id="4293" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">对于这个项目，我们将使用Python，我将使用3.6。我也将使用Pycharm IDE(你可以在这里下载<a class="ae hv" href="https://www.jetbrains.com/pycharm/download/#section=mac" rel="noopener ugc nofollow" target="_blank"/>),尽管你可以使用任何东西。</p><p id="4764" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先，让我们确保我们在虚拟环境中工作，以确保我们安装的包不会影响全局运行的解释器。</p><p id="7d71" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦建立了虚拟环境，我们就可以开始安装软件包了。对于核心代码，我将使用以下命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="201c" class="lv ju hy lr b fi lw lx l ly lz">pip install pyttsx3 <br/>pip install speechRecognition<br/>pip install PyAudio</span></pre><p id="7f83" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些软件包将允许机器说话和理解单词，并将文本转换为语音。</p><p id="e16f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦你安装了软件包，我们可以初始化音频引擎。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="9a27" class="lv ju hy lr b fi lw lx l ly lz">import pyttsx3</span><span id="7b82" class="lv ju hy lr b fi ma lx l ly lz">engine = pyttsx3.init()</span></pre><p id="9170" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">是的，就这么简单。另外，如果你想改变声音，你可以使用下面的代码。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="75c7" class="lv ju hy lr b fi lw lx l ly lz">import pyttsx3</span><span id="22a4" class="lv ju hy lr b fi ma lx l ly lz">engine = pyttsx3.init()<br/>voices = engine.getProperty('voices')engine.setProperty('voice', voices[ENTER VOICE NUMBER].id)</span></pre><p id="4cf0" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">您可以更改“输入声音号码”来更改声音。</p><p id="b9d1" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这段代码只初始化了引擎，并允许您选择声音类型。但是为了让机器输出声音，我们需要编写以下函数:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="99b8" class="lv ju hy lr b fi lw lx l ly lz">def assistantResponse(<em class="mb">text</em>):<br/>    print(<em class="mb">text</em>)<br/><br/>    engine.say(<em class="mb">text</em>)<br/>    engine.runAndWait()</span></pre><p id="194e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">有了这个代码，我们现在可以让我们的机器说任何话。要进行测试，请运行以下代码:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="922c" class="lv ju hy lr b fi lw lx l ly lz">assistantResponse("Hello World")</span></pre><p id="c24f" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">以下是语音功能的组合代码:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="8ea5" class="lv ju hy lr b fi lw lx l ly lz">import pyttsx3</span><span id="528e" class="lv ju hy lr b fi ma lx l ly lz">engine = pyttsx3.init()</span><span id="f13c" class="lv ju hy lr b fi ma lx l ly lz">def assistantResponse(<em class="mb">text</em>):<br/>    print(<em class="mb">text</em>)<br/><br/>    engine.say(<em class="mb">text</em>)<br/>    engine.runAndWait()</span></pre><p id="687a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在语音功能完成了，我们现在需要对机器进行编程以识别单词。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="e39c" class="lv ju hy lr b fi lw lx l ly lz">import speech_recognition as sr</span><span id="b22c" class="lv ju hy lr b fi ma lx l ly lz">def recordAudio():<br/>    # Record The Audio<br/>    r = sr.Recognizer()  # Creating a recognizer object<br/><br/>    # Open the microphone and start recording<br/>    with sr.Microphone() as source:<br/>        print('Say something!')<br/>        audio = r.listen(source)<br/><br/>    # Use google's speech recognition<br/>    data = ''<br/>    try:<br/>        data = r.recognize_google(audio)<br/>        print('You said: ' + data)<br/>    except sr.UnknownValueError:  # Checking for unknown errors<br/>        print('Google Speech Recognition could not understand the audio')<br/>    except sr.RequestError as c:<br/>        print('Request results from Google Speech Recognition service error')<br/><br/>    return data</span></pre><p id="518b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种代码首先识别什么时候有人说话，然后打开麦克风。然后保存识别的文本。如果音频没有被识别，那么代码打印为:“谷歌语音识别无法理解音频”。如果它遇到一个错误，它就会打印:“来自Google语音识别服务的请求结果错误”。</p><p id="0802" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们现在有了我们助手的核心。我们现在可以开始添加功能来扩展该助手的功能。</p><h1 id="26fe" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">问候功能</h1><p id="59be" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">先说简单的。该问候功能识别用户是否说过问候。如果为真，那么它将输出一个响应的问候词</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="c3bc" class="lv ju hy lr b fi lw lx l ly lz">def greeting(<em class="mb">text</em>):<br/>    Greeting_Inputs = ['hi', 'hey', 'hola', 'bonjour', 'hello']<br/>    Greeting_Response = ['hi', 'hey', 'hola', 'greetings', 'bonjour', 'hello']<br/><br/>    for word in <em class="mb">text</em>.split():<br/>        if word.lower() in Greeting_Inputs:<br/>            return random.choice(Greeting_Response)<br/>    return ''</span></pre><h1 id="bf26" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">唤醒词功能</h1><p id="ac94" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">很多助手都有“嗨Alexa”“嗨Google”之类的唤醒词。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="8991" class="lv ju hy lr b fi lw lx l ly lz">def wakeWord(<em class="mb">text</em>):<br/>    WAKE_WORD = ['ENTER NAME HERE']<br/><br/>    text = <em class="mb">text</em>.lower()<br/><br/>    for phrase in WAKE_WORD:<br/>        if phrase in <em class="mb">text</em>:<br/>            return True<br/>    return False</span></pre><p id="7446" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在我们可以进行一个while循环，在这个循环中，系统不断地寻找唤醒词。一旦它识别出唤醒词，它将寻找任何可以触发进一步行动的关键字。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="66ff" class="lv ju hy lr b fi lw lx l ly lz">while True:<br/>    text = recordAudio()<br/>    responses = ''<br/><br/>    if wakeWord(text.lower()) == True:</span></pre><p id="50e3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦我们有了这个设置，我们可以在if语句下添加以下代码行，以允许助手识别何时说了问候语。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="f3b5" class="lv ju hy lr b fi lw lx l ly lz">`try:<br/>    responses = responses + greeting(text)<br/>except Exception as e:<br/>    responses = responses + ''</span></pre><p id="cb80" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">随着我们添加越来越多的功能，我们将继续添加代码行来激活这些功能。</p><h1 id="20bf" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">日期函数</h1><p id="7fcd" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">添加日期功能非常有用，在大多数助手中都有实现。您需要从安装日期时间包开始</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="588a" class="lv ju hy lr b fi lw lx l ly lz">pip install DateTime</span></pre><p id="47ee" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还需要日历包，但它预装了Python。安装后，进行以下功能:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="4b02" class="lv ju hy lr b fi lw lx l ly lz">import detetime<br/>import calender</span><span id="62f1" class="lv ju hy lr b fi ma lx l ly lz">def getDate():<br/>    now = datetime.datetime.now()<br/>    my_date = datetime.datetime.today()<br/>    weekday = calendar.day_name[my_date.weekday()]<br/>    monthNum = now.month<br/>    dayNum = now.day<br/><br/>    month_names = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October',<br/>                   'November', 'December']<br/><br/>    ordinalNumbers = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th', '11th', '12th', '13th','14th', '15th', '16th', '17th', '18th', '19th', '20th', '21st', '22nd', '23rd', '24th', '25th', '26th', '27th', '28th', '29th', '30th', '31st']<br/><br/>    return 'Today is ' + weekday + ', ' + month_names[monthNum - 1] + ' the ' + ordinalNumbers[dayNum - 1]</span></pre><p id="8f5e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还需要在查找关键字的if语句下进行设置</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="5514" class="lv ju hy lr b fi lw lx l ly lz">if 'date' in text:<br/>    get_date = getDate()<br/>    responses = responses + ' ' + get_date</span></pre><p id="25f8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们还可以添加一个if语句，告诉用户某个特性是否还没有添加。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="6f7b" class="lv ju hy lr b fi lw lx l ly lz">if responses == '':<br/>    responses = responses + "I'm Sorry I Can't Do That Yet"</span></pre><h1 id="ca2f" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">编译后的代码</h1><p id="b244" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我在下面包含了编译后的代码。注意:我在这里提到的特性只是基本的。您可以根据需要输入任意数量的API。我最终添加了更多。Youtube上有很棒的教程解释如何使用不同的API。</p><p id="6834" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">代码如下:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="7b10" class="lv ju hy lr b fi lw lx l ly lz">#Importing the Modules<br/>import calendar<br/>import datetime<br/>import pyttsx3<br/>import speech_recognition as sr</span><span id="4abe" class="lv ju hy lr b fi ma lx l ly lz"># Initializing the audio engine<br/>engine = pyttsx3.init()</span><span id="de3d" class="lv ju hy lr b fi ma lx l ly lz"># Record audio and return as a string<br/>def recordAudio():<br/>    # Record The Audio<br/>    r = sr.Recognizer()  # Creating a recognizer object<br/><br/>    # Open the microphone and start recording<br/>    with sr.Microphone() as source:<br/>        print('Say something!')<br/>        audio = r.listen(source)<br/><br/>    # Use google's speech recognition<br/>    data = ''<br/>    try:<br/>        data = r.recognize_google(audio)<br/>        print('You said: ' + data)<br/>    except sr.UnknownValueError:  # Checking for unknown errors<br/>        print('Google Speech Recognition could not understand the audio')<br/>    except sr.RequestError as c:<br/>        print('Request results from Google Speech Recognition service error')</span><span id="e73c" class="lv ju hy lr b fi ma lx l ly lz"># Function for response<br/>def assistantResponse(<em class="mb">text</em>):<br/>    print(<em class="mb">text</em>)<br/><br/>    engine.say(<em class="mb">text</em>)<br/>    engine.runAndWait()<br/><br/>    return data</span><span id="7bdb" class="lv ju hy lr b fi ma lx l ly lz"># Random Greeting Function<br/>def greeting(<em class="mb">text</em>):<br/>    Greeting_Inputs = ['hi', 'hey', 'hola', 'bonjour', 'hello']<br/>    Greeting_Response = ['hi', 'hey', 'hola', 'greetings', 'bonjour', 'hello']<br/><br/>    for word in <em class="mb">text</em>.split():<br/>        if word.lower() in Greeting_Inputs:<br/>            return random.choice(Greeting_Response)<br/>    return ''</span><span id="9510" class="lv ju hy lr b fi ma lx l ly lz"># Wake word function<br/>def wakeWord(<em class="mb">text</em>):<br/>    WAKE_WORD = ['ENTER NAME HERE']<br/><br/>    text = <em class="mb">text</em>.lower()<br/><br/>    for phrase in WAKE_WORD:<br/>        if phrase in <em class="mb">text</em>:<br/>            return True<br/>    return False</span><span id="ed82" class="lv ju hy lr b fi ma lx l ly lz"># Function to get date<br/>def getDate():<br/>    now = datetime.datetime.now()<br/>    my_date = datetime.datetime.today()<br/>    weekday = calendar.day_name[my_date.weekday()]<br/>    monthNum = now.month<br/>    dayNum = now.day<br/><br/>    month_names = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October',<br/>                   'November', 'December']<br/><br/>    ordinalNumbers = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th', '11th', '12th', '13th','14th', '15th', '16th', '17th', '18th', '19th', '20th', '21st', '22nd', '23rd', '24th', '25th', '26th', '27th', '28th', '29th', '30th', '31st']<br/><br/>    return 'Today is ' + weekday + ', ' + month_names[monthNum - 1] + ' the ' + ordinalNumbers[dayNum - 1]</span><span id="7a2d" class="lv ju hy lr b fi ma lx l ly lz"># The Brain<br/>while True:<br/>    text = recordAudio()<br/>    responses = ''<br/><br/>    if wakeWord(text.lower()) == True:<br/>        try:<br/>            responses = responses + greeting(text)<br/>        except Exception as e:<br/>            responses = responses + ''<br/>    <br/>    if 'date' in text:<br/>        get_date = getDate()<br/>        responses = responses + ' ' + get_date</span><span id="08d4" class="lv ju hy lr b fi ma lx l ly lz">    if responses == '':<br/>        responses = responses + "I'm Sorry I Can't Do That Yet"<br/><br/>    # Response<br/>    assistantResponse(responses)</span></pre><h1 id="95b7" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="e23f" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">虽然这个助手是非常基础的，只是一个小的演示，但它代表了大事情的开始。随着技术的不断进步，我们现在所处的非常基础的阶段将演变成一个更加复杂的助手和智能物体网络，它们共同努力，让世界变得更加高效、安全和可持续。</p><p id="60a5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如前所述，AI助手是物联网(IoT)的一部分。随着这一领域的不断进步，人类将能够在同样长的时间内完成更多的工作。物联网正被用于从住宅到商业的许多领域。虽然这项技术还有很长的路要走，但一旦准备好，它将彻底改变世界。</p></div></div>    
</body>
</html>