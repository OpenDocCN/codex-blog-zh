<html>
<head>
<title>The Dangers and Differences of JavaScript .innerHTML, .innerText, and .textContent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript的危险和差异。innerHTML，。innerText，和。文本内容</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-dangers-and-differences-of-javascript-innerhtml-innertext-and-textcontent-d82711e873c8?source=collection_archive---------24-----------------------#2022-06-17">https://medium.com/codex/the-dangers-and-differences-of-javascript-innerhtml-innertext-and-textcontent-d82711e873c8?source=collection_archive---------24-----------------------#2022-06-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="1d44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在JavaScript中，有几种方法可以编辑元素的内容，但是如何知道选择哪一种呢？让我们进一步了解一下。innerHTML，。innerText，和。让这个决定更容易。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="f063" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先快速定义一下，元素属性。innerHMTL获取或设置元素中包含的HTML或XML标记。它可以用来“检查页面的当前HTML源代码，包括自页面最初加载以来所做的任何更改”。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="2823" class="jt ju hi jp b fi jv jw l jx jy"><em class="jz">                 let content = element.innerHTML</em></span></pre><p id="41a7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种方法可以很容易地让您用新的内容替换元素的现有内容，但不会没有任何后果。这可能不是最安全的选择，因为可能会在字符串中插入恶意内容。为了解决这个问题，使用元素。当使用用户提供的数据来“净化”内容时，应该考虑SetHTML()。</p><figure class="jk jl jm jn fd kb er es paragraph-image"><div class="er es ka"><img src="../Images/7d6326def6972c6f9270b436e65e79b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*SReauNdAXb2ubMXgQTxcpQ.gif"/></div></figure><p id="f738" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于这种潜在的安全风险，请注意，如果您的项目代码经过任何类型的安全审查并使用. innerHTML，它很可能会被拒绝。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="28d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">潜在安全风险较小的替代方法是。我们可以在这里看到一个例子。</p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="8194" class="jt ju hi jp b fi jv jw l jx jy">             <em class="jz">      let text = element.innerText;</em></span></pre><p id="abe5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">。innerText和node.textContent，我们接下来会讲到，很容易混淆，但一个重要的区别是。innerText知道文本的呈现外观。当它检索内容时，它“近似于用户用光标突出显示元素的内容，然后将其复制到剪贴板时得到的文本”。然后它会‘用给定的值替换元素的子元素，将任何换行符转换成<code class="du ke kf kg jp b"><a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/br" rel="noopener ugc nofollow" target="_blank">&lt;br&gt;</a></code>元素’。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="cc8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后但同样重要的是，我们有Node.textContent。但是它不知道像. innerText这样的文本的外观。</p><p id="06ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">的一些关键元素。文本内容:</p><ul class=""><li id="dc91" class="ki kj hi ih b ii ij im in iq kk iu kl iy km jc kn ko kp kq bi translated"><code class="du ke kf kg jp b">textContent</code>获取<em class="jz">所有</em>元素的内容，包括<code class="du ke kf kg jp b"><a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" rel="noopener ugc nofollow" target="_blank">&lt;script&gt;</a></code>和<code class="du ke kf kg jp b"><a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style" rel="noopener ugc nofollow" target="_blank">&lt;style&gt;</a></code>元素。相比之下，<code class="du ke kf kg jp b">innerText</code>只显示“人类可读”的元素。</li><li id="e0a2" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated"><code class="du ke kf kg jp b">textContent</code>返回节点中的每个元素。相比之下，<code class="du ke kf kg jp b">innerText</code>知道样式，不会返回“隐藏”元素的文本。</li><li id="e04f" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated">由于<code class="du ke kf kg jp b">innerText</code>考虑了CSS样式，读取<code class="du ke kf kg jp b">innerText</code>的值触发<a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Glossary/Reflow" rel="noopener ugc nofollow" target="_blank">回流</a>以确保最新的计算样式。(回流可能计算量很大，因此应尽可能避免。)</li><li id="6bdd" class="ki kj hi ih b ii kr im ks iq kt iu ku iy kv jc kn ko kp kq bi translated"><code class="du ke kf kg jp b">textContent</code>和<code class="du ke kf kg jp b">innerText</code>在被修改时都会删除子节点，但是在Internet Explorer(版本11及以下)中修改<code class="du ke kf kg jp b">innerText</code>也会永久删除<em class="jz">所有的子文本节点。在这样做之后，不可能将节点再次插入任何其他元素或同一元素。</em></li></ul></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="03e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用时。innerHMTL，它允许跨站脚本(XSS)的漏洞，根据开放Web应用安全项目，这是2017年第七大最常见的Web应用漏洞。在决定使用什么属性时，不要忘记始终保护您的数据！</p><figure class="jk jl jm jn fd kb er es paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="er es kw"><img src="../Images/f62f31e03f1632eb4c1d1340546702cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_TF41GE3B9jE_O9qKeqzdw.jpeg"/></div></div><figcaption class="lb lc et er es ld le bd b be z dx translated">由<a class="ae kh" href="https://unsplash.com/@cgower?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯托弗·高尔</a>在<a class="ae kh" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="6cb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">来源</p><div class="lf lg ez fb lh li"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab dw"><div class="lk ab ll cl cj lm"><h2 class="bd hj fi z dy ln ea eb lo ed ef hh bi translated">element . innerhtml-Web API | MDN</h2><div class="lp l"><h3 class="bd b fi z dy ln ea eb lo ed ef dx translated">设置innerHTML的值可以让您轻松地用新内容替换元素的现有内容。注意:这个…</h3></div><div class="lq l"><p class="bd b fp z dy ln ea eb lo ed ef dx translated">developer.mozilla.org</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw kc li"/></div></div></a></div><div class="lf lg ez fb lh li"><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/innerText" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab dw"><div class="lk ab ll cl cj lm"><h2 class="bd hj fi z dy ln ea eb lo ed ef hh bi translated">html element . innertext-Web API | MDN</h2><div class="lp l"><h3 class="bd b fi z dy ln ea eb lo ed ef dx translated">HTMLElement接口的属性表示节点及其后代的呈现文本内容。作为一个…</h3></div><div class="lq l"><p class="bd b fp z dy ln ea eb lo ed ef dx translated">developer.mozilla.org</p></div></div><div class="lr l"><div class="lx l lt lu lv lr lw kc li"/></div></div></a></div><div class="lf lg ez fb lh li"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab dw"><div class="lk ab ll cl cj lm"><h2 class="bd hj fi z dy ln ea eb lo ed ef hh bi translated">node . text content-Web API | MDN</h2><div class="lp l"><h3 class="bd b fi z dy ln ea eb lo ed ef dx translated">一个字符串，或者。它的值取决于具体情况:如果节点是或doctype，则textContent返回。注意:要获得所有…</h3></div><div class="lq l"><p class="bd b fp z dy ln ea eb lo ed ef dx translated">developer.mozilla.org</p></div></div><div class="lr l"><div class="ly l lt lu lv lr lw kc li"/></div></div></a></div><div class="lf lg ez fb lh li"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab dw"><div class="lk ab ll cl cj lm"><h2 class="bd hj fi z dy ln ea eb lo ed ef hh bi translated">跨站点脚本(XSS) - MDN Web文档词汇表:Web相关术语的定义| MDN</h2><div class="lp l"><h3 class="bd b fi z dy ln ea eb lo ed ef dx translated">跨站点脚本(XSS)是一种安全漏洞，它允许攻击者向网站注入恶意…</h3></div><div class="lq l"><p class="bd b fp z dy ln ea eb lo ed ef dx translated">developer.mozilla.org</p></div></div><div class="lr l"><div class="lz l lt lu lv lr lw kc li"/></div></div></a></div></div></div>    
</body>
</html>