<html>
<head>
<title>💪Deploy a Django app with SQL Database using Infrastructure-As-Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">💪使用“基础设施即代码”部署带有SQL数据库的Django应用程序</h1>
<blockquote>原文：<a href="https://medium.com/codex/deploy-a-django-app-with-sql-database-using-infrastructure-as-code-deb567856fa0?source=collection_archive---------3-----------------------#2021-11-09">https://medium.com/codex/deploy-a-django-app-with-sql-database-using-infrastructure-as-code-deb567856fa0?source=collection_archive---------3-----------------------#2021-11-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="135c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解如何使用Azure Bicep通过SQL DB部署Django应用程序。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ac7d5b8a1b89add71bf098e56eb30bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1E7z0Ik1aMn8vMCXTl5ncw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用“基础设施即代码”部署带有SQL数据库的Django应用程序</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="9018" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文将展示如何在Ubuntu VM上部署一个简单的Django应用程序。</p><ol class=""><li id="8479" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc kf kg kh ki bi translated">解决方案概述</li><li id="37fc" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">先决条件</li><li id="2e30" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc kf kg kh ki bi translated">部署步骤</li></ol></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="13d6" class="ko kp hi bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">1.解决方案概述</h1><p id="b42b" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">我们将使用Azure Bicep利用基础设施即代码，这是一种用于声明式部署Azure资源的领域特定语言(DSL)。</p><p id="be2c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将利用Azure Linux CustomScript扩展来静默安装Python和Apache。Bicep文件还将创建一个包含一些示例数据的SQL数据库。</p><p id="d6f3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该解决方案将包括以下文件:</p><ul class=""><li id="4e27" class="ka kb hi ih b ii ij im in iq kc iu kd iy ke jc lr kg kh ki bi translated"><strong class="ih hj">📄<em class="ls"> main.bicep </em> </strong>:这是二头肌模板</li><li id="0b3d" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc lr kg kh ki bi translated"><strong class="ih hj">📄<em class="ls">azure deploy . parameters . JSON</em></strong>:这个参数文件包含用于部署Bicep模板的值。</li><li id="308e" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc lr kg kh ki bi translated">📁工件:这个文件夹将包含一个名为'<em class="ls"> install_django.sh </em>'的脚本。</li></ul><p id="4613" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该模板还提供安装所需的存储帐户、虚拟网络、公共IP地址、网络接口以及SQL Server和SQL数据库。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/1a51ee72c01c812dcb85c61ce2f2ad80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ajUUIQE6t-xKI-iEfpDSQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Django部署</figcaption></figure><h1 id="ae29" class="ko kp hi bd kq kr lu kt ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll bi translated">2.先决条件</h1><ul class=""><li id="506c" class="ka kb hi ih b ii lm im ln iq lz iu ma iy mb jc lr kg kh ki bi translated">一个活跃的Azure账户:你可以<a class="ae mc" href="https://azure.microsoft.com/free/" rel="noopener ugc nofollow" target="_blank">免费创建一个账户</a>。</li><li id="7766" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc lr kg kh ki bi translated"><a class="ae mc" href="https://github.com/azure/bicep" rel="noopener ugc nofollow" target="_blank"> Azure Bicep </a>安装在您的本地机器上。</li><li id="921b" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc lr kg kh ki bi translated">Azure PowerShell。参见:<a class="ae mc" href="https://docs.microsoft.com/en-us/powershell/azure/install-az-ps" rel="noopener ugc nofollow" target="_blank">安装Azure PowerShell </a>。</li><li id="7d95" class="ka kb hi ih b ii kj im kk iq kl iu km iy kn jc lr kg kh ki bi translated">Azure订阅中的资源组</li></ul><p id="c8a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><h1 id="3c77" class="ko kp hi bd kq kr lu kt ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll bi translated">3.部署步骤</h1><h2 id="e575" class="md kp hi bd kq me mf mg ku mh mi mj ky iq mk ml lc iu mm mn lg iy mo mp lk mq bi translated">3.1.创建SSH密钥对</h2><p id="ac4b" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">第一步是创建一个SSH密钥对；您可以查看以下关于如何在Azure中为Linux虚拟机创建SSH密钥对的文章—<a class="ae mc" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/mac-create-ssh-keys" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/Azure/virtual-machines/Linux/MAC-create-SSH-keys</a></p><p id="545d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本例中，我们将使用Azure Bash控制台创建一个SSH密钥对。在Azure门户中，请求一个新的控制台，如下图所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mr"><img src="../Images/e5ec6fc191c5c7ecb85419bd1c9f4502.png" data-original-src="https://miro.medium.com/v2/resize:fit:90/0*ieKfXhLBpPiB3hna"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ms"><img src="../Images/5de2e52fb42c507978aadf40698ddb66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/0*HOGO6g0BB85N-aM_.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">云壳— Azure门户</figcaption></figure><p id="bc82" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们将使用下面的命令生成一个SSH密钥:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="a25e" class="md kp hi mu b fi my mz l na nb">ssh-keygen \<br/>    -m PEM \<br/>    -t rsa \<br/>    -b 4096 \<br/>    -C "django" \<br/>    -f ~/.ssh/django-key \<br/>    -N yourpasshphrase</span></pre><p id="d888" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将在文件共享中的SSH目录下生成密钥。</p><p id="1a1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您不熟悉SSH公钥的格式，可以使用下面的cat命令显示您的公钥，替换'<em class="ls"> ~/。如果需要，ssh/id_rsa.pub </em>'带有您自己的公钥文件的路径和文件名:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="ef3e" class="md kp hi mu b fi my mz l na nb">cat ~/.ssh/django-key.pub</span></pre><p id="45fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的命令将在控制台中显示SSH公钥。我们将在部署期间需要它，所以请将它放在手边。</p><p id="e74a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">酷！现在我们有了SSH密钥对。我们将在参数文件中传递这个SSH密钥的值。</p><h2 id="9cea" class="md kp hi bd kq me mf mg ku mh mi mj ky iq mk ml lc iu mm mn lg iy mo mp lk mq bi translated">3.2.Azure二头肌模板-参数</h2><p id="3b13" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">在您的工作目录中创建一个新文件，并将其命名为'<em class="ls"> main.bicep </em>'。我们将定义以下参数:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="c95c" class="md kp hi mu b fi my mz l na nb">@description('Name of the Storage Account')<br/>param newStorageAccountName string</span><span id="c7c6" class="md kp hi mu b fi nc mz l na nb">@description('Username for the Administrator of the VM')<br/>param adminUsername string</span><span id="c52a" class="md kp hi mu b fi nc mz l na nb">@description('Image Publisher')<br/>param imagePublisher string = 'Canonical'</span><span id="50f3" class="md kp hi mu b fi nc mz l na nb">@description('Image Offer')<br/>param imageOffer string = 'UbuntuServer'</span><span id="c546" class="md kp hi mu b fi nc mz l na nb">@description('Image SKU')<br/>param imageSKU string = '18.04-LTS'</span><span id="c701" class="md kp hi mu b fi nc mz l na nb">@description('DNS Name for the Public IP. Must be lowercase.')<br/>param vmDnsName string</span><span id="4d0a" class="md kp hi mu b fi nc mz l na nb">@description('Admin username for SQL Database')<br/>param administratorLogin string</span><span id="1213" class="md kp hi mu b fi nc mz l na nb">@description('Admin password for SQL Database')<br/>@secure()<br/>param administratorLoginPassword string</span><span id="01ba" class="md kp hi mu b fi nc mz l na nb">@description('SQL Collation')<br/>param collation string = 'SQL_Latin1_General_CP1_CI_AS'</span><span id="6632" class="md kp hi mu b fi nc mz l na nb">@description('Name of your SQL Database')<br/>param databaseName string</span><span id="0924" class="md kp hi mu b fi nc mz l na nb">@description('Max DB size in bytes')<br/>param maxSizeBytes int = 268435456000</span><span id="2783" class="md kp hi mu b fi nc mz l na nb">@description('Requested Service Objective ID')<br/>param requestedServiceObjectiveId string = 'f1173c43-91bd-4aaa-973c-54e79e15235b'</span><span id="8d8b" class="md kp hi mu b fi nc mz l na nb">@description('Unique name of your SQL Server')<br/>param serverName string</span><span id="05a7" class="md kp hi mu b fi nc mz l na nb">@description('Start IP for your firewall rule, for example 0.0.0.0')<br/>param firewallStartIP string = '0.0.0.0'</span><span id="ede7" class="md kp hi mu b fi nc mz l na nb">@description('End IP for your firewall rule, for example 255.255.255.255')<br/>param firewallEndIP string = '0.0.0.0'</span><span id="2704" class="md kp hi mu b fi nc mz l na nb">@description('SQL Version')<br/>param version string = '12.0'</span><span id="0d3b" class="md kp hi mu b fi nc mz l na nb">@description('Location for all resources.')<br/>param location string = resourceGroup().location</span><span id="0395" class="md kp hi mu b fi nc mz l na nb">@allowed([<br/>  'sshPublicKey'<br/>  'password'<br/>])<br/>@description('Type of authentication to use on the Virtual Machine. SSH key is recommended.')<br/>param authenticationType string = 'sshPublicKey'</span><span id="4bbe" class="md kp hi mu b fi nc mz l na nb">@description('SSH Key or password for the Virtual Machine. SSH key is recommended.')<br/>@secure()<br/>param adminPasswordOrKey string</span><span id="feec" class="md kp hi mu b fi nc mz l na nb">@description('Default VM Size')<br/>param vmSize string = 'Standard_B1s'</span></pre><h1 id="0581" class="ko kp hi bd kq kr lu kt ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll bi translated">3.Azure二头肌模板-变量</h1><p id="9020" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">我们将定义以下变量:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="0d5f" class="md kp hi mu b fi my mz l na nb">var nicName_var = 'myVMNic'<br/>var addressPrefix = '10.0.0.0/16'<br/>var subnetName = 'Subnet-1'<br/>var subnetPrefix = '10.0.0.0/24'<br/>var storageAccountType = 'Standard_LRS'<br/>var publicIPAddressName_var = 'myPublicIP'<br/>var publicIPAddressType = 'Dynamic'<br/>var vmName_var = vmDnsName<br/>var virtualNetworkName_var = 'MyVNET'<br/>var subnetRef = resourceId('Microsoft.Network/virtualNetworks/subnets', virtualNetworkName_var, subnetName)<br/>var linuxConfiguration = {<br/>  disablePasswordAuthentication: true<br/>  ssh: {<br/>    publicKeys: [<br/>      {<br/>        path: '/home/${adminUsername}/.ssh/authorized_keys'<br/>        keyData: adminPasswordOrKey<br/>      }<br/>    ]<br/>  }<br/>}</span></pre><h1 id="31d2" class="ko kp hi bd kq kr lu kt ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll bi translated">4.Azure二头肌模板—资源</h1><p id="008d" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">我们将定义以下资源:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="e31f" class="md kp hi mu b fi my mz l na nb">resource serverName_resource 'Microsoft.Sql/servers@2020-11-01-preview' = {<br/>  location: location<br/>  name: serverName<br/>  properties: {<br/>    administratorLogin: administratorLogin<br/>    administratorLoginPassword: administratorLoginPassword<br/>    version: version<br/>  }<br/>}</span><span id="cf39" class="md kp hi mu b fi nc mz l na nb">resource serverName_databaseName 'Microsoft.Sql/servers/databases@2020-11-01-preview' = {<br/>  parent: serverName_resource<br/>  location: location<br/>  name: databaseName<br/>  properties: {<br/>    collation: collation<br/>    maxSizeBytes: maxSizeBytes<br/>    recoveryServicesRecoveryPointId: requestedServiceObjectiveId<br/>  }<br/>}</span><span id="2cce" class="md kp hi mu b fi nc mz l na nb">resource serverName_FirewallRule1 'Microsoft.Sql/servers/firewallrules@2020-11-01-preview' = {<br/>  parent: serverName_resource<br/>  name: 'FirewallRule1'<br/>  properties: {<br/>    endIpAddress: firewallEndIP<br/>    startIpAddress: firewallStartIP<br/>  }<br/>}</span><span id="70da" class="md kp hi mu b fi nc mz l na nb">resource newStorageAccountName_resource 'Microsoft.Storage/storageAccounts@2021-02-01' = {<br/>  name: newStorageAccountName<br/>  location: location<br/>  sku: {<br/>    name: storageAccountType<br/>  }<br/>  kind: 'StorageV2'<br/>}</span><span id="7148" class="md kp hi mu b fi nc mz l na nb">resource publicIPAddressName 'Microsoft.Network/publicIPAddresses@2020-07-01' = {<br/>  name: publicIPAddressName_var<br/>  location: location<br/>  properties: {<br/>    publicIPAllocationMethod: publicIPAddressType<br/>    dnsSettings: {<br/>      domainNameLabel: vmDnsName<br/>    }<br/>  }<br/>}</span><span id="4802" class="md kp hi mu b fi nc mz l na nb">resource virtualNetworkName 'Microsoft.Network/virtualNetworks@2020-07-01' = {<br/>  name: virtualNetworkName_var<br/>  location: location<br/>  properties: {<br/>    addressSpace: {<br/>      addressPrefixes: [<br/>        addressPrefix<br/>      ]<br/>    }<br/>    subnets: [<br/>      {<br/>        name: subnetName<br/>        properties: {<br/>          addressPrefix: subnetPrefix<br/>        }<br/>      }<br/>    ]<br/>  }<br/>}</span><span id="cc78" class="md kp hi mu b fi nc mz l na nb">resource nicName 'Microsoft.Network/networkInterfaces@2020-07-01' = {<br/>  name: nicName_var<br/>  location: location<br/>  properties: {<br/>    ipConfigurations: [<br/>      {<br/>        name: 'ipconfig1'<br/>        properties: {<br/>          privateIPAllocationMethod: 'Dynamic'<br/>          publicIPAddress: {<br/>            id: publicIPAddressName.id<br/>          }<br/>          subnet: {<br/>            id: subnetRef<br/>          }<br/>        }<br/>      }<br/>    ]<br/>  }<br/>  dependsOn: [<br/>    virtualNetworkName<br/>  ]<br/>}</span><span id="b4e5" class="md kp hi mu b fi nc mz l na nb">resource vmName 'Microsoft.Compute/virtualMachines@2020-12-01' = {<br/>  name: vmName_var<br/>  location: location<br/>  properties: {<br/>    hardwareProfile: {<br/>      vmSize: vmSize<br/>    }<br/>    osProfile: {<br/>      computerName: vmName_var<br/>      adminUsername: adminUsername<br/>      adminPassword: adminPasswordOrKey<br/>      linuxConfiguration: ((authenticationType == 'password') ? json('null') : linuxConfiguration)<br/>    }<br/>    storageProfile: {<br/>      imageReference: {<br/>        publisher: imagePublisher<br/>        offer: imageOffer<br/>        sku: imageSKU<br/>        version: 'latest'<br/>      }<br/>      osDisk: {<br/>        name: '${vmName_var}_OSDisk'<br/>        caching: 'ReadWrite'<br/>        createOption: 'FromImage'<br/>      }<br/>    }<br/>    networkProfile: {<br/>      networkInterfaces: [<br/>        {<br/>          id: nicName.id<br/>        }<br/>      ]<br/>    }<br/>  }<br/>  dependsOn: [<br/>    newStorageAccountName_resource<br/>  ]<br/>}</span><span id="936f" class="md kp hi mu b fi nc mz l na nb">resource vmName_django 'Microsoft.Compute/virtualMachines/extensions@2020-12-01' = {<br/>  parent: vmName<br/>  name: 'django'<br/>  location: location<br/>  properties: {<br/>    publisher: 'Microsoft.Azure.Extensions'<br/>    type: 'CustomScript'<br/>    typeHandlerVersion: '2.0'<br/>    autoUpgradeMinorVersion: true<br/>    settings: {<br/>      fileUris: [<br/>        '<a class="ae mc" href="https://gist.githubusercontent.com/daveRendon/bf68e2b419a5907eb639e6265be70cda/raw/818c370103e09ea61c5cd4d573ee8e9d77d6fc09/install_django.sh'" rel="noopener ugc nofollow" target="_blank">https://gist.githubusercontent.com/daveRendon/bf68e2b419a5907eb639e6265be70cda/raw/818c370103e09ea61c5cd4d573ee8e9d77d6fc09/install_django.sh'</a><br/>      ]<br/>    }<br/>    protectedSettings: {<br/>      commandToExecute: 'sh install_django.sh ${vmDnsName} ${serverName} ${administratorLogin} ${administratorLoginPassword} ${databaseName}'<br/>    }<br/>  }<br/>}</span></pre><p id="8964" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意我们使用Azure Linux CustomScript扩展来安装Django。这个脚本应该在部署时可以公开访问。因此，您可以将其存储在存储帐户上，并传递SAS令牌和文件所在的URL。</p><p id="7f9f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一种选择是将脚本托管在一个公共存储库中:<a class="ae mc" href="https://gist.githubusercontent.com/daveRendon/bf68e2b419a5907eb639e6265be70cda/raw/818c370103e09ea61c5cd4d573ee8e9d77d6fc09/install_django.sh" rel="noopener ugc nofollow" target="_blank">https://gist . githubusercontent . com/daveRendon/bf68e 2 b 419 a 5907 EB 639 e 6265 be 70 CDA/raw/818 c 370103 e 09 ea 61 C5 CD 4d 573 ee 8 e 9d 77 D6 fc 09/install _ django . sh</a></p><h1 id="ea79" class="ko kp hi bd kq kr lu kt ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll bi translated">5.参数文件</h1><p id="07c7" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">创建一个名为“<em class="ls">azure deploy . parameters . JSON</em>的新文件。下面的代码显示了参数文件的定义:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="f344" class="md kp hi mu b fi my mz l na nb">{<br/>    "$schema": "<a class="ae mc" href="https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#" rel="noopener ugc nofollow" target="_blank">https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#</a>",<br/>    "contentVersion": "1.0.0.0",<br/>    "parameters": {<br/>      "newStorageAccountName": {<br/>        "value": "YOUR-STORAGE-ACCOUNT-NAME"<br/>      },<br/>      "adminUsername": {<br/>        "value": "YOUR-ADMIN-USERNAME"<br/>      },<br/>      "vmDnsName": {<br/>        "value": "YOUR-VM-DNS-NAME"<br/>      },<br/>      "administratorLogin": {<br/>        "value": "YOUR-ADMIN-LOGIN"<br/>      },<br/>      "administratorLoginPassword": {<br/>        "value": "YOUR-ADMIN-PASS"<br/>      },<br/>      "databaseName": {<br/>        "value": "YOUR-DATABASE-NAME"<br/>      },<br/>      "serverName": {<br/>        "value": "YOUR-SERVER-NAME"<br/>      },<br/>      "firewallStartIP": {<br/>        "value": "0.0.0.0"<br/>      },<br/>      "firewallEndIP": {<br/>        "value": "255.255.255.255"<br/>      },<br/>      "adminPasswordOrKey": {<br/>        "value": "YOUR-SSH-KEY"<br/>      }<br/>    }<br/>  }</span></pre><h1 id="1011" class="ko kp hi bd kq kr lu kt ku kv lv kx ky kz lw lb lc ld lx lf lg lh ly lj lk ll bi translated">6.Azure Bicep模板-部署</h1><p id="4fe2" class="pw-post-body-paragraph if ig hi ih b ii lm ik il im ln io ip iq lo is it iu lp iw ix iy lq ja jb jc hb bi translated">我们将使用下面的命令来部署我们的二头肌模板:</p><pre class="je jf jg jh fd mt mu mv mw aw mx bi"><span id="00af" class="md kp hi mu b fi my mz l na nb">$date = Get-Date -Format "MM-dd-yyyy"<br/>$deploymentName = "AzInsiderDeployment"+"$date"</span><span id="7589" class="md kp hi mu b fi nc mz l na nb">New-AzResourceGroupDeployment -Name $deploymentName -ResourceGroupName azinsider_demo -TemplateFile .\main.bicep -TemplateParameterFile .\azuredeploy.parameters.json -c</span></pre><p id="69d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了部署输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nd"><img src="../Images/3649ead92b47f84871e73df5bdacdca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_J4YEVHIvP9iAy3aJrdHw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">部署输出</figcaption></figure><p id="08f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦部署完成(通常需要几分钟),您就可以获取公共IP地址或FQDN，并使用浏览器进行访问。您将看到应用程序如下所示运行:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ne"><img src="../Images/ea47d675226f745bba25967a29973298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yBzl4zcnrTuCJ4BQZQN8Hw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Django使用Bicep在Azure中使用SQL数据库</figcaption></figure><p id="c577" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在下面的URL中找到这个解决方案的代码，请随意投稿！</p><div class="nf ng ez fb nh ni"><a href="https://github.com/daveRendon/azinsider/tree/main/application-workloads/django-with-sql-db" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hj fi z dy nn ea eb no ed ef hh bi translated">azin sider/application-workloads/django-with-SQL-db at main daveRendon/azin sider</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">在GitHub上创建一个帐户，为daveRendon/azinsider开发做出贡献。</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw jn ni"/></div></div></a></div><p id="ae8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">👉<a class="ae mc" href="http://eepurl.com/gKmLdf" rel="noopener ugc nofollow" target="_blank"> <em class="ls">在此加入</em><strong class="ih hj"><em class="ls">azin sider</em></strong><em class="ls">邮箱列表。</em>T15】</a></p><p id="4ca6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ls">-戴夫·r</em></p></div></div>    
</body>
</html>