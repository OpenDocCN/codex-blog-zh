<html>
<head>
<title>I ❤ Ember.js — Routes &amp; Ember Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一.❤·恩伯网站-路线和恩伯数据</h1>
<blockquote>原文：<a href="https://medium.com/codex/i-ember-js-routes-ember-data-b6baf4308803?source=collection_archive---------5-----------------------#2021-01-14">https://medium.com/codex/i-ember-js-routes-ember-data-b6baf4308803?source=collection_archive---------5-----------------------#2021-01-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="2e37" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><div class=""><h2 id="f69c" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">了解为什么在Ember中处理数据是一股新鲜空气。</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/08fb43b858bd2b0e9826da4eccd2496d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yx1sZ1Ji5Hg2Pf2GNjYupg.jpeg"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">由<a class="ae jw" href="https://unsplash.com/@basico?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Gustavo espin dola</a>在<a class="ae jw" href="https://unsplash.com/s/photos/air?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c04c" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">我❤ Ember.js是一个系列，在这里我谈论如何使用Ember以及为什么你应该在你的项目中使用它。我使用Ember已经有几年了，它已经成为我最喜欢的创建强大的web应用程序的工具，而且非常简单！</p><p id="925c" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">欢迎回到I ❤烬。在这篇文章中，我们将开始仔细看看路线。在Ember中，路由是至关重要的，我们将看到路由心智模型如何使推理出如何实现特性变得超级容易。本文还介绍了Ember的内置数据管理层Ember Data。如果你曾经为React使用过Redux，我打赌你会感激Ember Data提供的便利。</p><h1 id="1472" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">上一次，在I ❤烬. js</h1><p id="a195" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">让我们回顾一下Ember中的路线是如何工作的:</p><ul class=""><li id="702b" class="lr ls hi jz b ka kb kd ke kg lt kk lu ko lv ks lw lx ly lz bi translated">一个用户访问你应用中的一个URL，比如<code class="du ma mb mc md b">/artists</code>。</li><li id="0bdf" class="lr ls hi jz b ka me kd mf kg mg kk mh ko mi ks lw lx ly lz bi translated">Ember找到相关的<code class="du ma mb mc md b">artists</code>路由文件，并调用它的函数来获取任何需要的数据。</li><li id="6f9c" class="lr ls hi jz b ka me kd mf kg mg kk mh ko mi ks lw lx ly lz bi translated">Ember用获取的数据和其他属性设置<code class="du ma mb mc md b">artists</code>控制器。</li><li id="71ef" class="lr ls hi jz b ka me kd mf kg mg kk mh ko mi ks lw lx ly lz bi translated">呈现属于<code class="du ma mb mc md b">artists</code>路线文件的模板文件，并可访问其控制器属性和功能。</li></ul><h1 id="bc84" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">语义文件</h1><p id="0d95" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">现在想象你正在做这个项目，你需要改变为<code class="du ma mb mc md b">artists</code>路线渲染的模板。很容易确定你需要编辑哪个文件，只要看看Ember为你设置的文件夹结构:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mj"><img src="../Images/8028f13249e15c7ed9e271463b48732b.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*HkbS5SNgNmeVUJA6nBe3ZQ.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">类似地，artists控制器应该在controllers文件夹中！</figcaption></figure><p id="1baf" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">后面如果想介绍一个<code class="du ma mb mc md b">artists/artist</code>路由，就用ember-cli这么简单:</p><p id="0e99" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><code class="du ma mb mc md b">ember generate route artists/artist</code></p><p id="3e38" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">并创建适当的文件:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mk"><img src="../Images/fbe05529168aaa4d8193b62e22ee007b.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*N9Ur-kpDARDbxi-sQUTcng.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">现在有子文件夹了！</figcaption></figure><p id="c5e6" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">太棒了！应用程序的结构从文件夹结构中显而易见，这意味着我们需要考虑的事情少了一件。</p><p id="1544" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">项目中还有一个名为<code class="du ma mb mc md b">router.js</code>的文件。当您使用ember-cli创建新路由时，该文件会自动更新。您也可以手动编辑它，以防需要进行更改。例如，如果<code class="du ma mb mc md b">artists</code>路由实际上应该有URL <code class="du ma mb mc md b">/app-artists</code>，这是一个简单的更改:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ml"><img src="../Images/4b4c3402babe2a681875110072ecff07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ki6HpNf3BOYI3Euc2r8yw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">这是router.js文件</figcaption></figure><p id="1549" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">现在，我们可以看到Ember对语义的重视程度。优先考虑语义意味着开发人员一眼就能理解代码是如何工作的。变量、函数和文件夹的名字都很合理。我<strong class="jz hs">喜欢</strong>这个Ember值，在编码时尽可能保持语义已经成为我自己的习惯。</p><h1 id="ba65" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">路线文件</h1><p id="dcea" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">Ember开发人员致力于使用现代技术，因此路由文件是一个ES6类:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mm"><img src="../Images/aa52dc2762aa83028db249cd178b4d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*II6fSeGtTrNiMkrQ1Gixbw.png"/></div></div></figure><p id="6137" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">路由的工作是获取数据。为此，我们只需在route的<code class="du ma mb mc md b">model()</code>函数中编写数据获取逻辑。由<code class="du ma mb mc md b">model</code>函数返回的是提供给相关控制器/模板的数据。如果你需要做一些异步获取，你甚至可以让<code class="du ma mb mc md b">model</code>函数成为一个异步函数(Ember将在继续之前等待获取完成):</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mn"><img src="../Images/b009da07a5fde46f34b797043bb2eb28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDov_EOWn-pGbhj7ys9e9w.png"/></div></div></figure><p id="9d7f" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><code class="du ma mb mc md b">model</code>函数是所谓的<strong class="jz hs">钩子</strong>，route类可以访问其他一些函数。例如，假设一旦您提取了所有艺术家的数据，您想要立即重定向到第一位艺术家的路线。您只需将<code class="du ma mb mc md b">afterModel</code>钩子添加到您的route类中，Ember将在获取数据之后、呈现模板之前运行它。</p><p id="ae37" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">如果您使用过React和React-Router，那么想象一下，与使用Ember相比，您必须在React项目中实现重定向功能。这不是很爽吗？</p><h1 id="fa81" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">装货</h1><p id="7cb4" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">另一个简单的例子是当你需要实现一个加载状态时。如果您的<code class="du ma mb mc md b">model</code>、<code class="du ma mb mc md b">afterModel</code>或任何其他数据获取挂钩很慢，您将希望显示某种加载指示器。在Ember中，只需在正确的位置添加一个加载模板文件即可。Ember将看到它，并在加载路线时显示加载文件:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mo"><img src="../Images/bfcb4dcbab952703261757bbff16db35.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*EG2PR06QuprACUXUgH_MnA.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">拜托，太酷了！</figcaption></figure><h1 id="abdc" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">余烬数据</h1><p id="85b6" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">当你创建一个新的Ember项目时，你还会得到这个叫做Ember Data的神奇工具。Ember Data提供了各种各样的功能，使管理应用程序的数据变得轻而易举。我们可以在另一篇文章中做更深入的探讨，但是作为一个例子，让我们继续处理我们的艺术家数据。</p><p id="1ed7" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">Ember Data允许我们定义和配置我们的数据模型，因此CRUD操作非常简单。例如，如果我们有一个<code class="du ma mb mc md b">models/artist.js</code>文件，那么我们可以获取路由文件中所有艺术家的列表，如下所示:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mp"><img src="../Images/bfc900dbbd3b3608aa6caa01e1287dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*cAqloWU68CRv4g_2uyZ60w.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">什么？！</figcaption></figure><p id="cbfe" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">在幕后，Ember Data从artists API获取数据，并将数据反序列化为艺术家模型！不仅如此，它还将获取的数据保存在一个名为<strong class="jz hs"> store </strong>的服务中。store就像Redux或MobX，它跟踪实体，这样我们就可以跨应用程序使用数据。</p><h1 id="f7d3" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">哇，踩刹车！</h1><p id="8f22" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">任何与Redux合作过的人在这里都可能会犹豫。不要误会，Redux很梦幻，极其强大。但是，唉，我已经厌倦了编写动作创建者、动作名称、减少者和中间件，以及设计如何组织商店…</p><p id="a462" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">抱歉，我真的很感激商店有这种理智的默认。Ember Data确实让事情变得如此简单。数据管理不会拖你的后腿，你可以开始使用它。</p><h1 id="2b5e" class="ku kv hi bd kw kx ky kz la lb lc ld le ix lf iy lg ja lh jb li jd lj je lk ll bi translated">你加入吗？</h1><p id="8d0e" class="pw-post-body-paragraph jx jy hi jz b ka lm is kc kd ln iv kf kg lo ki kj kk lp km kn ko lq kq kr ks hb bi translated">我已经使用React年多了，尽管工具已经有了很大的进步，但是为了获得您需要的功能，您还需要编写很多样板文件。希望这篇文章至少让你对和Ember一起玩有点兴奋。在为这些文章做研究时，我只是越来越想使用Ember，所以我必须尽快开始自己的新项目！</p><p id="4a4a" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated">路线和余烬数据太强大了！尝试一个小的Ember项目，如果您有任何问题，请随时联系我或社区。如果你喜欢这个系列，并且想在未来看到一篇具体的文章，一定要在评论中告诉我！</p><p id="73d6" class="pw-post-body-paragraph jx jy hi jz b ka kb is kc kd ke iv kf kg kh ki kj kk kl km kn ko kp kq kr ks hb bi translated"><em class="kt">此页面/产品/etc与Ember项目无关。Ember是蒂尔德公司的商标</em></p></div></div>    
</body>
</html>