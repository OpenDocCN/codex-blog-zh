<html>
<head>
<title>iOS Interview: Lazy Property [What and when not to use Lazy property]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS面试:懒人属性【什么以及什么时候不用懒人属性】</h1>
<blockquote>原文：<a href="https://medium.com/codex/ios-interview-lazy-property-what-and-when-not-to-use-lazy-property-5d621773fc5c?source=collection_archive---------2-----------------------#2022-12-12">https://medium.com/codex/ios-interview-lazy-property-what-and-when-not-to-use-lazy-property-5d621773fc5c?source=collection_archive---------2-----------------------#2022-12-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/f111b7672fa2c59b355320f7f2347787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2P-FN83wx6dokY0Av1rVqQ.png"/></div></div></figure><p id="05b7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Swift中，惰性变量是直到第一次被访问时才计算初始值的变量。当变量的初始值计算起来很昂贵时，或者直到在代码中实际使用时才需要它时，惰性变量很有用。</p><p id="8407" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是如何在Swift中创建惰性变量的示例:</p><pre class="jo jp jq jr fd js jt ju bn jv jw bi"><span id="f2d5" class="jx jy hi jt b be jz ka l kb kc">class HeavilyComputation {<br/>    // A heavy object that takes a long time to initialize<br/>}<br/><br/>class MyClass {<br/>    lazy var heavilyComputationObject = HeavilyComputation()<br/><br/>    func doSomething() {<br/>        // Use the heavy object<br/>        heavyObject.doSomething()<br/>    }<br/>}</span></pre><p id="f182" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这段代码中，我们定义了一个<strong class="is hj">heavy computing</strong>类，它代表一个需要很长时间来初始化的对象。然后我们定义一个具有<strong class="is hj">heavy computation</strong>属性的<code class="du kd ke kf jt b"><strong class="is hj">MyClass</strong></code>类，它的类型是<strong class="is hj">heavy computation</strong>。我们使用<code class="du kd ke kf jt b"><strong class="is hj">lazy</strong></code>关键字将<strong class="is hj">heavy computation</strong>属性标记为惰性变量。</p><p id="ae5d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当<code class="du kd ke kf jt b"><strong class="is hj">MyClass</strong></code>类的实例被创建时，<strong class="is hj">heavy calculation</strong>属性直到第一次被访问时才被初始化。这意味着在调用<code class="du kd ke kf jt b"><strong class="is hj">doSomething</strong>()</code>方法之前不会创建<code class="du kd ke kf jt b"><strong class="is hj">HeavyObject</strong></code>实例，只有在实际需要时才会创建<strong class="is hj">heavy computing</strong>实例。</p><p id="1958" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">有了这个实现，我们可以避免初始化<strong class="is hj">heavy computation</strong>属性的开销，除非它是实际需要的。这可以提高我们代码的性能和效率，并且可以使我们的代码更具可读性和可维护性。</p><h1 id="6d48" class="kg jy hi bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">什么时候我们不应该使用懒惰属性？</h1><p id="a251" class="pw-post-body-paragraph iq ir hi is b it ld iv iw ix le iz ja jb lf jd je jf lg jh ji jj lh jl jm jn hb bi translated">惰性属性在Swift中是一个有用的特性，但是应该谨慎使用。通常，当属性的初始值计算开销不大时，或者当属性被频繁访问并且预先计算其初始值会更有效时，不应使用惰性属性。</p><p id="9788" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是您可能不想使用惰性属性的一些原因:</p><blockquote class="li lj lk"><p id="88b0" class="iq ir ll is b it iu iv iw ix iy iz ja lm jc jd je ln jg jh ji lo jk jl jm jn hb bi translated">1.惰性属性为代码增加了额外的间接性，这使得理解和调试更加困难。</p><p id="2b6c" class="iq ir ll is b it iu iv iw ix iy iz ja lm jc jd je ln jg jh ji lo jk jl jm jn hb bi translated">2.如果从多个线程同时访问惰性属性，它们可能会引入意外的行为和争用情况。</p><p id="5d1c" class="iq ir ll is b it iu iv iw ix iy iz ja lm jc jd je ln jg jh ji lo jk jl jm jn hb bi translated">3.惰性属性如果被频繁访问，会影响代码的性能，因为每次访问时都会计算属性的初始值。</p><p id="7d82" class="iq ir ll is b it iu iv iw ix iy iz ja lm jc jd je ln jg jh ji lo jk jl jm jn hb bi translated">4.惰性属性会降低代码的可预测性，因为在代码中实际访问该属性之前，不会计算它的初始值。</p></blockquote><p id="f79b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通常，只有当属性的初始值计算量很大，并且在代码中实际访问它之前不需要它时，才应该使用惰性属性。否则，您应该使用常规属性并预先计算其初始值。</p><p id="51f9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="ll">如果你喜欢这个，点击💚尽你所能在下面为这篇文章鼓掌，这样其他人会在媒体上看到。如有任何疑问或建议，欢迎随时评论或打我</em></strong><a class="ae lp" href="https://twitter.com/b_banzara" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="ll">Twitter</em></strong></a><strong class="is hj"><em class="ll">，或</em></strong><a class="ae lp" href="https://www.linkedin.com/in/rranjanchchn/" rel="noopener ugc nofollow" target="_blank"><strong class="is hj"><em class="ll">Linkedin</em></strong></a><strong class="is hj"><em class="ll">。</em> </strong></p></div></div>    
</body>
</html>