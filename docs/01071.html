<html>
<head>
<title>Everything about Rest API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于Rest API的一切</h1>
<blockquote>原文：<a href="https://medium.com/codex/everything-about-rest-api-4ab4ee9ea2c8?source=collection_archive---------14-----------------------#2021-04-02">https://medium.com/codex/everything-about-rest-api-4ab4ee9ea2c8?source=collection_archive---------14-----------------------#2021-04-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/a0a64f3785e0fa22b3cfb0dc324118ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AV-_DUw2tAJSJMzh"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">克里斯里德在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><figure class="ev ex iw ix iy hk er es paragraph-image"><div class="er es iv"><img src="../Images/35a014509ae837029bf122475b1734c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*PNuFFadttQrMTAdFDX8XSg.png"/></div></figure><p id="dba5" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">在本教程中，我们将学习什么是REST API，并学习创建一个REST API用于我们的项目。</p><p id="d9e5" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">让我们从基础开始，看看API。应用程序编程接口可以被看作是客户端和服务器之间通信的桥梁。它是一个软件中介，允许两个应用程序相互对话。API就像一个酒店的服务员，通过提供必要的菜肴或食物来服务客户的请求，在这种情况下，客户提出请求，通过API提供响应。事实上，这是一个古老的场景。</p><p id="ec11" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">今天的现代应用程序使用REST API的概念，REST API只不过是通过不同的Restful Web服务访问资源的架构风格。如今，REST API使用了几乎所有类型的应用程序，即Web应用程序和本地应用程序。</p><p id="ebc8" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，我们来看看REST API的一些<strong class="jb hz">重要方法。</strong></p><h2 id="f18b" class="jx jy hy bd jz ka kb kc kd ke kf kg kh jk ki kj kk jo kl km kn js ko kp kq kr bi translated">1.HTTP GET方法</h2><p id="16be" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">GET方法，通常用于获取或提取web服务器中的所有或特定资源。这种方法通常用于向客户端显示数据。</p><h2 id="92e4" class="jx jy hy bd jz ka kb kc kd ke kf kg kh jk ki kj kk jo kl km kn js ko kp kq kr bi translated">2.HTTP POST方法</h2><p id="8367" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">POST方法主要用于将数据从客户端传递到服务器。假设一个用户在任何一个(REST API技术实现的网站)上用他/她的凭证填写了一个表单，然后这些数据将在POST方法的帮助下进一步保存在数据库中。</p><h2 id="4f9b" class="jx jy hy bd jz ka kb kc kd ke kf kg kh jk ki kj kk jo kl km kn js ko kp kq kr bi translated">3.HTTP PUT方法</h2><p id="6a44" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">PUT方法是更新数据库中数据的方法，在这里，该方法通常可用于更改保存到数据库中的值。</p><h2 id="4663" class="jx jy hy bd jz ka kb kc kd ke kf kg kh jk ki kj kk jo kl km kn js ko kp kq kr bi translated">4.HTTP删除方法</h2><p id="e4f2" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">顾名思义，我们使用HTTP DELETE方法删除数据库中的特定或所有资源。</p><p id="85ff" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，让我们深入了解如何<strong class="jb hz">使用Node JS和Express创建一个Restful API-</strong></p><p id="ec44" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">在继续之前，我们需要一些要求:</p><ol class=""><li id="91b0" class="kx ky hy jb b jc jd jg jh jk kz jo la js lb jw lc ld le lf bi translated">NPM(或纱)安装-创建一个节点应用程序。</li><li id="c6f8" class="kx ky hy jb b jc lg jg lh jk li jo lj js lk jw lc ld le lf bi translated">Postman——Postman基本上是一个HTTP客户端软件，帮助创建和测试其余的API服务。</li></ol></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="1cdb" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，在C驱动器中创建一个名为nodeAPI的目录，浏览这个目录，并键入:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="a149" class="jx jy hy lx b fi mb mc l md me">code .</span></pre><p id="27d1" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这个命令将打开VS代码，通过那个特定的文件夹-</p><p id="8bd3" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，键入如下内容:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="1f77" class="jx jy hy lx b fi mb mc l md me">npm init</span></pre><p id="5b5f" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这个命令可以创建一个Package.json文件。现在，使用下面的代码将Express JS安装到我们的应用程序中。</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="2079" class="jx jy hy lx b fi mb mc l md me">npm i --save express nodemon</span></pre><p id="c0d5" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这个命令将在我们的应用程序中打开node_modules文件夹。nodemon是一个包，用于在每次看到代码更新时重新加载服务器。</p><p id="cd77" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，是时候在我们的根目录中创建一个index.js文件了。</p><p id="9aa9" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">我们的文件夹如下所示:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="4fd5" class="jx jy hy lx b fi mb mc l md me">node_API </span><span id="5ef0" class="jx jy hy lx b fi mf mc l md me">          - node_modules<br/>          - index.js<br/>          - package.json<br/>          - package-lock.json</span></pre><p id="cfc4" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，复制更多的代码并将其粘贴到index.js文件中:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="ae81" class="jx jy hy lx b fi mb mc l md me">const express = require('expres');</span><span id="5e41" class="jx jy hy lx b fi mf mc l md me">const app = express();</span><span id="80f0" class="jx jy hy lx b fi mf mc l md me">app.use(express.json());</span><span id="1ba3" class="jx jy hy lx b fi mf mc l md me">//HTTP GET Method, to fetch the data from Server to Client.</span><span id="7edd" class="jx jy hy lx b fi mf mc l md me">app.get("/",(req,res) =&gt; {</span><span id="82f9" class="jx jy hy lx b fi mf mc l md me">res.send("Hello Developers!")</span><span id="a1c3" class="jx jy hy lx b fi mf mc l md me">})</span><span id="a84e" class="jx jy hy lx b fi mf mc l md me">app.listen(9000,() =&gt; { return "Server starts..."})</span></pre><p id="3203" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，让我们运行服务器并检查我们是否在正确的路径上。</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="8805" class="jx jy hy lx b fi mb mc l md me">nodemon</span></pre><p id="1791" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这个命令运行服务器，现在，让我们打开Postman来检查我们的API是否正常工作。</p><p id="d5b6" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">一旦我们进入Postman，我们将转到URL部分并键入以下内容:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="9895" class="jx jy hy lx b fi mb mc l md me">http://localhost:9000</span></pre><p id="a75d" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">注意—我们必须使用相同的端口号，该端口号在代码中指定。</p></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="2347" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">一旦我们输入了上面的URL并点击发送按钮，我们就会看到一条消息——“你好，开发者！”。这是因为我们已经向“/”发送了一个字符串响应，假设用户调用该API。</p><p id="332f" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这实际上是一个GET API，但是现在我们将学习如何从API获取数据。</p><h1 id="e7d9" class="mg jy hy bd jz mh mi mj kd mk ml mm kh mn mo mp kk mq mr ms kn mt mu mv kq mw bi translated"><strong class="ak">获取API </strong></h1><p id="d067" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">为了获取数据，我们需要信息，所以我们使用这个对象数组。</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="ceff" class="jx jy hy lx b fi mb mc l md me">const users = [</span><span id="37cb" class="jx jy hy lx b fi mf mc l md me">{ "username" : "Sundar Pichai", "id" : 1},</span><span id="ad0b" class="jx jy hy lx b fi mf mc l md me">{ "username" : "Elon Musk", "id" : 2},</span><span id="e0b3" class="jx jy hy lx b fi mf mc l md me">{ "username" : "Jeff Bezos", "id" : 3},</span><span id="bd04" class="jx jy hy lx b fi mf mc l md me">{ "username" : "Bill Gates", "id" : 4},</span><span id="18eb" class="jx jy hy lx b fi mf mc l md me">]</span></pre><p id="4727" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">另外，创建一个API路由-</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="7d5c" class="jx jy hy lx b fi mb mc l md me">app.get("/api/users", (req,res) =&gt; {</span><span id="f8b9" class="jx jy hy lx b fi mf mc l md me">res.send(users);</span><span id="b058" class="jx jy hy lx b fi mf mc l md me">})</span></pre></div><div class="ab cl ll lm gp ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hb hc hd he hf"><p id="4cea" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，如果我们使用Postman测试这个API，我们可能会得到数组中存在的所有对象。</p><h1 id="3887" class="mg jy hy bd jz mh mi mj kd mk ml mm kh mn mo mp kk mq mr ms kn mt mu mv kq mw bi translated"><strong class="ak">发布API </strong></h1><p id="6e06" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">在POST API调用中，我们将从客户端获取用户名。该代码可以指定如下:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="caab" class="jx jy hy lx b fi mb mc l md me">app.post("/api/users/post" , (req,res) =&gt; {</span><span id="8989" class="jx jy hy lx b fi mf mc l md me">username = req.body.username</span><span id="e6e4" class="jx jy hy lx b fi mf mc l md me">if(username)</span><span id="3c5f" class="jx jy hy lx b fi mf mc l md me">{</span><span id="72a3" class="jx jy hy lx b fi mf mc l md me">res.send({msg:"Success"})</span><span id="0f20" class="jx jy hy lx b fi mf mc l md me">}</span><span id="6f7b" class="jx jy hy lx b fi mf mc l md me">return res.send({msg:"Error"})</span><span id="39ea" class="jx jy hy lx b fi mf mc l md me">})</span></pre><p id="1143" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">在Postman内部，首先，我们需要将GET方法切换到POST方法，还需要将主体转换为JSON格式，并添加以下代码:</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="fa9a" class="jx jy hy lx b fi mb mc l md me">{"username" : "Smith"}</span></pre><p id="a747" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">如果这返回一个成功的响应，那么我们的POST API工作得很好。</p><h1 id="d590" class="mg jy hy bd jz mh mi mj kd mk ml mm kh mn mo mp kk mq mr ms kn mt mu mv kq mw bi translated"><strong class="ak">放API </strong></h1><p id="cda5" class="pw-post-body-paragraph iz ja hy jb b jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js kw ju jv jw hb bi translated">PUT API可用于更新数据库中的数据。这里，我们从客户端向服务器传递两个参数，因为我们需要更新表中的特定行，因此我们要求客户端输入(username) id和new-username来更新旧数据。</p><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="2b9f" class="jx jy hy lx b fi mb mc l md me">app.put("/api/user-update/:id" , (req,res) =&gt; {</span><span id="0adb" class="jx jy hy lx b fi mf mc l md me">const input_id = req.params.id;</span><span id="5a54" class="jx jy hy lx b fi mf mc l md me">const input_username = req.params.username;</span><span id="a26f" class="jx jy hy lx b fi mf mc l md me">const userUpdate = users.find(n =&gt; n.id === parseInt(input_id))</span><span id="9cff" class="jx jy hy lx b fi mf mc l md me">if(!userUpdate)</span><span id="0304" class="jx jy hy lx b fi mf mc l md me">{</span><span id="42a1" class="jx jy hy lx b fi mf mc l md me">res.send("ID Invalid")</span><span id="e27b" class="jx jy hy lx b fi mf mc l md me">}</span><span id="a50d" class="jx jy hy lx b fi mf mc l md me">const {Error} = {msg:"Error"};</span><span id="9ead" class="jx jy hy lx b fi mf mc l md me">if(Error)</span><span id="7725" class="jx jy hy lx b fi mf mc l md me">{</span><span id="8e90" class="jx jy hy lx b fi mf mc l md me">res.send({msg:"Error"})</span><span id="e0bd" class="jx jy hy lx b fi mf mc l md me">}</span><span id="279f" class="jx jy hy lx b fi mf mc l md me">else</span><span id="c05a" class="jx jy hy lx b fi mf mc l md me">{</span><span id="9413" class="jx jy hy lx b fi mf mc l md me">users.username = input_username;</span><span id="7b03" class="jx jy hy lx b fi mf mc l md me">res.send({msg:"Success"})</span><span id="2c26" class="jx jy hy lx b fi mf mc l md me">}</span><span id="f836" class="jx jy hy lx b fi mf mc l md me">})</span></pre><p id="86db" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">现在，当您从Postman发送请求时，您必须添加一个id参数，并传递一个新的用户名作为JSON有效负载来更新数据。</p><h1 id="e247" class="mg jy hy bd jz mh mi mj kd mk ml mm kh mn mo mp kk mq mr ms kn mt mu mv kq mw bi translated">删除API</h1><pre class="ls lt lu lv fd lw lx ly lz aw ma bi"><span id="0985" class="jx jy hy lx b fi mb mc l md me">app.delete("/api/delete-user/:id", (req,res) =&gt; {</span><span id="a8a8" class="jx jy hy lx b fi mf mc l md me">const input_id = users.find(n =&gt; n.id === parseInt(req.params.id))</span><span id="28a7" class="jx jy hy lx b fi mf mc l md me">if(!input_id)</span><span id="d438" class="jx jy hy lx b fi mf mc l md me">{</span><span id="6a3a" class="jx jy hy lx b fi mf mc l md me">res.send("ID Invalid!")</span><span id="2fc6" class="jx jy hy lx b fi mf mc l md me">}</span><span id="89a9" class="jx jy hy lx b fi mf mc l md me">const index = users.indexOf(users)</span><span id="9fb9" class="jx jy hy lx b fi mf mc l md me">users.splice(index,1)</span><span id="9fe2" class="jx jy hy lx b fi mf mc l md me">res.send(input_id)</span><span id="f62c" class="jx jy hy lx b fi mf mc l md me">})</span></pre><p id="513c" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">在这种情况下，我们必须将id作为一个参数通过Postman传递，它直接从DB中删除一个记录。</p><p id="a428" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这里的指回购<a class="ae hv" href="https://github.com/balram1402/NodeJS_API.git" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="28f6" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">这可能是Restful API变得简单易用的最大原因。这种API用于日常的现代web应用程序中，因为它们可以快速呈现内容，并且在编码方面也不那么方便。</p><p id="91b2" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">在这里，我们将以这一章结束。</p><p id="555c" class="pw-post-body-paragraph iz ja hy jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hb bi translated">谢谢大家！</p></div></div>    
</body>
</html>