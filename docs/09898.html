<html>
<head>
<title>Simple Mongo Setup with Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单的Mongo快速设置</h1>
<blockquote>原文：<a href="https://medium.com/codex/simple-mongo-setup-with-express-646583e47ebd?source=collection_archive---------4-----------------------#2022-11-18">https://medium.com/codex/simple-mongo-setup-with-express-646583e47ebd?source=collection_archive---------4-----------------------#2022-11-18</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c2e9" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">NoSQL数据库。</h2></div><blockquote class="ix"><p id="2125" class="iy iz hi bd ja jb jc jd je jf jg jh dx translated">为什么前端dev要一个人吃午饭？因为他们不能连接表——一个孤独的程序员。</p></blockquote><figure class="jj jk jl jm jn jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ji"><img src="../Images/da72de901dfdc08535b1abbcd6e51cc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EQCr7sNJUQhABIKj"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx translated"><a class="ae jz" href="https://unsplash.com/@rubaitulazad?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">鲁拜图·阿扎德</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c54a" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">MongoDB是一个非关系数据库，它使用类似JSON的结构以集合和文档的形式存储数据。它们易于查询，易于连接，并消除了复杂的SQL连接命令的麻烦。</p><h1 id="0706" class="kv kw hi bd kx ky kz la lb lc ld le lf io lg ip lh ir li is lj iu lk iv ll lm bi translated">创建您的MongoDB帐户。</h1><p id="5bd9" class="pw-post-body-paragraph ka kb hi kc b kd ln ij kf kg lo im ki kj lp kl km kn lq kp kq kr lr kt ku jh hb bi translated">去MongoDB网站创建一个账户，如果你还没有的话，点击登陆页面左上角的“登录”或“免费试用”按钮。</p><h2 id="4e6d" class="ls kw hi bd kx lt lu lv lb lw lx ly lf kj lz ma lh kn mb mc lj kr md me ll mf bi translated">创建数据库</h2><p id="538f" class="pw-post-body-paragraph ka kb hi kc b kd ln ij kf kg lo im ki kj lp kl km kn lq kp kq kr lr kt ku jh hb bi translated">完成登录手续后，您应该会看到仪表板页面</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mg"><img src="../Images/31d6d4444ff198a9ff2b35da58ec5dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*auvS3xBGL8ODpwP6Xa1zzA.png"/></div></div></figure><p id="b7b4" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">点击“建立数据库”。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ml"><img src="../Images/366340bb61c89ac039f2c8f8371ab620.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bRKkVTO4anzdZeuWj2oow.png"/></div></div></figure><p id="1ac1" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">对于初学者来说，选择免费共享访问计划是一个好主意。点击最右边卡片上的“创建”按钮。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mm"><img src="../Images/7ad20636ead959ef848524fe79fc3a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-7Np-18fWRPRc3vXL5_9uA.png"/></div></div></figure><p id="4758" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">您可以自由浏览不同的选项，并选择离您最近的位置。以我的情况，我会选择爱尔兰的AWS。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mn"><img src="../Images/7508ad1a49d901a5d911f0825bf9c7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TknaL_y_uQpHykE4HeFaFg.png"/></div></div></figure><p id="09a6" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">向下滚动以将集群名称更改为项目名称。我的项目名为<em class="mo"> Ponfi。</em></p><p id="ebd8" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">现在点击<strong class="kc hj">“创建集群”</strong>结束。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mp"><img src="../Images/72212d0815956f16fe1b267c3c1b9928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s6ZWc1X794hkJ65uCNOcdg.png"/></div></div></figure><h2 id="f4c8" class="ls kw hi bd kx lt lu lv lb lw lx ly lf kj lz ma lh kn mb mc lj kr md me ll mf bi translated">得到蒙哥多布URI</h2><p id="7290" class="pw-post-body-paragraph ka kb hi kc b kd ln ij kf kg lo im ki kj lp kl km kn lq kp kq kr lr kt ku jh hb bi translated">URI代表统一资源标识符。我们用这个来定位MongoDB中的数据库。要获取URI，在您的控制面板上的集群中，您应该能够看到一个“Connect”按钮。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mq"><img src="../Images/eb75c4bf88474b32e5ee847699604751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atExwRZpTJe39ak6icnabg.png"/></div></div></figure><p id="d219" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">添加您当前的IP地址，并设置用户名和密码。<strong class="kc hj">请记住您在此设置的密码！你以后会需要它的。</strong></p><p id="64cf" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">创建您的数据库用户，然后选择一种连接方法。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mr"><img src="../Images/de46c4d8d62f40da160ba5d47a26c646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8vhCZMB_QbPjA1aeodg6KA.png"/></div></div></figure><p id="6329" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">点击“连接您的应用程序”。</p><figure class="mh mi mj mk fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es mg"><img src="../Images/1427676fd39016d39eb5b3e652649129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2sJ2nlTPu66-8BCpf1XVAg.png"/></div></div></figure><p id="26c9" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">确保驱动程序和版本与屏幕截图上的一致。复制URI并将密码替换为您在创建用户时输入的密码(不带尖括号)</p><h2 id="e4cb" class="ls kw hi bd kx lt lu lv lb lw lx ly lf kj lz ma lh kn mb mc lj kr md me ll mf bi translated">将MongoDB连接到Express应用程序</h2><p id="cb36" class="pw-post-body-paragraph ka kb hi kc b kd ln ij kf kg lo im ki kj lp kl km kn lq kp kq kr lr kt ku jh hb bi translated"><strong class="kc hj">注意:</strong> <em class="mo">如果你是在GDSC会议上看到这篇文章的，这一部分不适合你，因为它已经完成了。</em></p><p id="8417" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">Mongoose是一个很好的框架，可以很好地集成Express和MongoDB。首先，您需要安装依赖项:</p><pre class="mh mi mj mk fd ms mt mu bn mv mw bi"><span id="8b61" class="mx kw hi mt b be my mz l na nb">npm install mongoose dotenv</span></pre><p id="ff81" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">在您的<code class="du nc nd ne mt b">server.js</code>文件中，将您的大部分代码迁移到一个函数中，并编写以下代码:</p><pre class="mh mi mj mk fd ms mt mu bn mv mw bi"><span id="4835" class="mx kw hi mt b be my mz l na nb">const mongoose = require("mongoose")<br/>require("dotenv").config()<br/><br/>function bootServer() {<br/>  const express = require("express")<br/>  // ...<br/>}<br/><br/>mongoose<br/>  .connect(process.env.MONGO_URI, {<br/>    useNewUrlParser: true,<br/>    useUnifiedTopology: true,<br/>  })<br/>  .catch(err =&gt; console.error(err))<br/>  .then(() =&gt; console.log("Connected to mongoose server"))<br/>  .then(bootServer)<br/>mongoose.Promise = global.Promise</span></pre><p id="a67b" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">我们使用<code class="du nc nd ne mt b">mongoose</code>包连接到您的MongoDB，如果成功，我们启动服务器。但是它怎么知道要连接到哪个MongoDB呢？我们使用URI。</p><p id="01f2" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">在根目录下创建一个新文件，并将其命名为<code class="du nc nd ne mt b">.env</code>。该文件用于定义服务器中的所有环境变量。我在这里将我的<code class="du nc nd ne mt b">MONGO_URI</code>指定为键值对。</p><pre class="mh mi mj mk fd ms mt mu bn mv mw bi"><span id="fcbb" class="mx kw hi mt b be my mz l na nb">MONGO_URI=mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;cluster-host-domain&gt;/?retryWrites=true&amp;w=majority</span></pre><p id="2cf1" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">使用<code class="du nc nd ne mt b">dotenv</code>包和变量<code class="du nc nd ne mt b">process.env.MONGO_URI</code>，我能够从环境中检索URI。</p></div><div class="ab cl nf ng gp nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="hb hc hd he hf"><p id="f754" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">喜欢我的文章？在我的页面查看更多信息:</p><div class="nm nn ez fb no np"><a href="https://www.medium.com/@cybercoder.naj" rel="noopener follow" target="_blank"><div class="nq ab dw"><div class="nr ab ns cl cj nt"><h2 class="bd hj fi z dy nu ea eb nv ed ef hh bi translated">Nishant Aanjaney Jalan - Medium</h2><div class="nw l"><h3 class="bd b fi z dy nu ea eb nv ed ef dx translated">阅读Nishant Aanjaney Jalan在媒体上的文章。本科生| CS和数学老师| Android开发者|…</h3></div><div class="nx l"><p class="bd b fp z dy nu ea eb nv ed ef dx translated">www.medium.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od jt np"/></div></div></a></div><pre class="mh mi mj mk fd ms mt mu bn mv mw bi"><span id="2ead" class="mx kw hi mt b be my mz l oe nb"><strong class="mt hj">Want to connect?</strong><br/><br/>My <a class="ae jz" href="https://github.com/cybercoder-naj" rel="noopener ugc nofollow" target="_blank">GitHub</a> profile.<br/>My <a class="ae jz" href="https://cybercoder-naj.github.io" rel="noopener ugc nofollow" target="_blank">Portfolio</a> website.</span></pre></div></div>    
</body>
</html>