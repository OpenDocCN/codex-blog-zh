<html>
<head>
<title>Identify your valuable customers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">识别你有价值的客户</h1>
<blockquote>原文：<a href="https://medium.com/codex/identify-your-valuable-customers-9738472dd36d?source=collection_archive---------7-----------------------#2021-09-22">https://medium.com/codex/identify-your-valuable-customers-9738472dd36d?source=collection_archive---------7-----------------------#2021-09-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1ac7" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">你是如何对现有客户开展营销活动的？</h2></div><p id="7762" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这篇文章中，我将谈论RFM，可以定制到许多不同的部门。我们将和感兴趣的人一起看看<strong class="iz hj"> Python分段</strong>。</p><h1 id="7552" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated"><strong class="ak">什么是RFM？那能吃吗？</strong></h1><p id="c893" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">我们称之为RFM来自于新近、频繁、不朽这些词。如果说这些话是什么意思，可以考察一下下图。</p><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es kq"><img src="../Images/67be07f21327a7ab0f52b32c5946d69a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MsbnvqIhiRBUBZ9-vRlciQ.png"/></div></div></figure><p id="f125" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">根据指定的RFM行为得分，可以将客户分为不同的类别，并进一步分析他们的盈利能力。</p><p id="c0ef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这三个值的综合得分对电子商务平台中的品牌最为有利，因为它需要持续监控客户行为。RFM计算的洞察力可以让品牌更清楚地了解频繁的购物路径，并了解客户对新营销活动的反应。</p><p id="4ba7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">RFM模型已被广泛应用于许多实际领域，包括非营利组织和金融机构(银行和保险行业)、在线行业、电信行业、旅游行业和营销行业。此外，RFM模型可用于细分客户，计算客户价值和客户终身价值(CLV)，观察客户行为，估计每种报价类型的响应概率，以及评估在线评论者。</p><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es lc"><img src="../Images/dca73b0541a022ac1717d9b0b91e631a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9eB6VUbrpgKPonz1LGAj0w.png"/></div></div><figcaption class="ld le et er es lf lg bd b be z dx translated">RFM细分市场描述</figcaption></figure><p id="e959" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">生成的矩阵如下所示:</p><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es lh"><img src="../Images/25c75b856f1d6939a2a693531f53fe8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/0*N24LWkHhEuSYugla.png"/></div><figcaption class="ld le et er es lf lg bd b be z dx translated">RFM分段矩阵</figcaption></figure><p id="de30" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">RFM的优点是易于实施，并可用于不同类型的业务。它有助于策划更好的营销活动，提高客户关系管理和客户忠诚度。</p><p id="b19d" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">据估计，RFM得分高的客户将会再次购买该品牌的产品。特别关注这些<strong class="iz hj">【忠诚】【冠军】客户</strong>，品牌可以通过反馈优化其广告活动。</p><p id="2143" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">RFM分数低的客户表明<strong class="iz hj">不愿意成为忠实客户</strong>。虽然他们对广告活动的反应可能无关紧要，但营销人员应该将注意力转向他们的新近参数，并找出什么让这些客户感到沮丧或没有吸引力。通过RFM分数，品牌确切地知道每个顾客应该关注哪个参数。</p><h1 id="0a5f" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">让我们开始编码吧！</h1><p id="6fab" class="pw-post-body-paragraph ix iy hi iz b ja kl ij jc jd km im jf jg kn ji jj jk ko jm jn jo kp jq jr js hb bi translated">我将使用UCI机器学习库中的在线零售数据集。</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="3f7e" class="lo ju hi lk b fi lp lq l lr ls"># Import libraries<br/>import pandas as pd<br/>import datetime as dt<br/>from pandas.core.common import SettingWithCopyWarning<br/>import warnings<br/>import matplotlib.pyplot as plt<br/><br/># Some display settings<br/>pd.set_option('display.max_columns', None)<br/>pd.set_option('display.max_rows', None)<br/>pd.set_option('display.float_format', lambda x: '%.5f' % x)<br/>warnings.simplefilter(action="ignore", category=SettingWithCopyWarning)</span><span id="263e" class="lo ju hi lk b fi lt lq l lr ls"># Read the 2010-2011 data in the Online Retail II excel.<br/>sales = pd.read_excel(r"data/online_retail_II.xlsx", sheet_name="Year 2010-2011")</span></pre><p id="b1a5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们需要用一些描述性统计数据来理解我们的数据。</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="01d8" class="lo ju hi lk b fi lp lq l lr ls">print(<strong class="lk hj">'{:,} rows; {:,} columns'</strong>.format(sales.shape[0], sales.shape[1]))<br/>sales.describe()<br/>sales.isnull().sum().sort_values(ascending=<strong class="lk hj">False</strong>)</span></pre><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es lu"><img src="../Images/efa60a79ad01982462ce24f26820444d.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*OKUoF2FtXrv5Rf9Picpt-Q.png"/></div></figure><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es lv"><img src="../Images/04ef6819c3cedfb8c63674df107e6d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*QluDS1JaYq6vbt5Jg0gHSw.png"/></div></figure><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es lw"><img src="../Images/3c0cdc4ebe5b10d2a5d256da74078777.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*JKH9scp_aIT358YVsxAXFw.png"/></div></figure><p id="3d0e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lx">从数据集中删除缺失的观测值。使用“inplace=True”参数进行减法运算。</em></p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="5119" class="lo ju hi lk b fi lp lq l lr ls">sales.dropna(axis=0, inplace=<strong class="lk hj">True</strong>)</span></pre><p id="a8e6" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">每种产品有多少？</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="5960" class="lo ju hi lk b fi lp lq l lr ls">sales[<strong class="lk hj">"Description"</strong>].value_counts().sort_values(ascending=<strong class="lk hj">False</strong>).head()</span></pre><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es ly"><img src="../Images/ac8ba0d66ad505c7eb1545122166127e.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*k_LLrYCNlq9iTHwWoUZ1Kw.png"/></div></figure><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="df33" class="lo ju hi lk b fi lp lq l lr ls"><em class="lx"># The 'C' in the invoices shows the canceled transactions. Remove the canceled transactions from the dataset.<br/></em>df = sales[~sales[<strong class="lk hj">"Invoice"</strong>].str.contains(<strong class="lk hj">"C"</strong>, na=<strong class="lk hj">False</strong>)]<br/><br/><em class="lx"># Create a variable named 'TotalPrice' that represents the total earnings per invoice.<br/></em>df[<strong class="lk hj">"TotalPrice"</strong>] = df[<strong class="lk hj">"Price"</strong>] * df[<strong class="lk hj">"Quantity"</strong>]<br/>df.dropna(axis=0, inplace=<strong class="lk hj">True</strong>)</span></pre><p id="f183" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们继续计算<strong class="iz hj"> RFM指标</strong>。我们需要将today_date定义为用于计算新近度的分析日期。</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="445e" class="lo ju hi lk b fi lp lq l lr ls">df[<strong class="lk hj">"InvoiceDate"</strong>].max()<br/><em class="lx"># Timestamp('2011-12-09 12:50:00')</em></span><span id="fbf4" class="lo ju hi lk b fi lt lq l lr ls">today_date = dt.datetime(2011, 12, 11)</span><span id="c0b9" class="lo ju hi lk b fi lt lq l lr ls">rfm = df.groupby(<strong class="lk hj">'Customer ID'</strong>).agg({<strong class="lk hj">'InvoiceDate'</strong>: <strong class="lk hj">lambda </strong>invoicedate: (today_date - invoicedate.max()).days,<br/>                                     <strong class="lk hj">'Invoice'</strong>: <strong class="lk hj">lambda </strong>invoice: invoice.nunique(),<br/>                                     <strong class="lk hj">'TotalPrice'</strong>: <strong class="lk hj">lambda </strong>totalprice: totalprice.sum()})<br/><br/>rfm.columns = [<strong class="lk hj">"recency"</strong>, <strong class="lk hj">"frequency"</strong>, <strong class="lk hj">"monetary"</strong>]<br/>rfm = rfm[(rfm[<strong class="lk hj">'monetary'</strong>] &gt; 0)]<br/>print(rfm.describe().T)</span></pre><p id="6766" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">RFM分数的计算和转化为一个变量</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="e0d5" class="lo ju hi lk b fi lp lq l lr ls">rfm[<strong class="lk hj">"recency_score"</strong>] = pd.qcut(rfm[<strong class="lk hj">"recency"</strong>], 5, labels=[5, 4, 3, 2, 1])<br/>rfm[<strong class="lk hj">"frequency_score"</strong>] = pd.qcut(rfm[<strong class="lk hj">'frequency'</strong>].rank(method=<strong class="lk hj">"first"</strong>), 5, labels=[1, 2, 3, 4, 5])<br/><em class="lx"># We did not consider manutery in this problem due to the correlation relationship with frequency.<br/></em>rfm[<strong class="lk hj">"RFM_SCORE"</strong>] = (rfm[<strong class="lk hj">'recency_score'</strong>].astype(str) + rfm[<strong class="lk hj">'frequency_score'</strong>].astype(str))</span></pre><p id="e568" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">现在是时候定义了！</strong></p><p id="6eb4" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">RFM分数给了我们53 = 125个片段。这不容易操作。我们将根据R和F分数进行10个细分。我们已经建立了正则表达式(regex)结构，使用字典根据客户群的新近性和频率分数来命名客户群。</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="88b2" class="lo ju hi lk b fi lp lq l lr ls">seg_map = {<br/>    <strong class="lk hj">r'[1-2][1-2]'</strong>: <strong class="lk hj">'hibernating'</strong>,<br/>    <strong class="lk hj">r'[1-2][3-4]'</strong>: <strong class="lk hj">'at_Risk'</strong>,<br/>    <strong class="lk hj">r'[1-2]5'</strong>: <strong class="lk hj">'cant_loose'</strong>,<br/>    <strong class="lk hj">r'3[1-2]'</strong>: <strong class="lk hj">'about_to_sleep'</strong>,<br/>    <strong class="lk hj">r'33'</strong>: <strong class="lk hj">'need_attention'</strong>,<br/>    <strong class="lk hj">r'[3-4][4-5]'</strong>: <strong class="lk hj">'loyal_customers'</strong>,<br/>    <strong class="lk hj">r'41'</strong>: <strong class="lk hj">'promising'</strong>,<br/>    <strong class="lk hj">r'51'</strong>: <strong class="lk hj">'new_customers'</strong>,<br/>    <strong class="lk hj">r'[4-5][2-3]'</strong>: <strong class="lk hj">'potential_loyalists'</strong>,<br/>    <strong class="lk hj">r'5[4-5]'</strong>: <strong class="lk hj">'champions'<br/></strong>}</span><span id="acdc" class="lo ju hi lk b fi lt lq l lr ls">rfm[<strong class="lk hj">'segment'</strong>] = rfm[<strong class="lk hj">'RFM_SCORE'</strong>].replace(seg_map, regex=<strong class="lk hj">True</strong>)<br/>rfm.reset_index(inplace=<strong class="lk hj">True</strong>)<br/>print(rfm.head())<br/>rfm.to_excel(<strong class="lk hj">"rfm_segments.xlsx"</strong></span></pre><p id="9d98" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们用Tableau可视化我们的输出数据。</p><figure class="kr ks kt ku fd kv er es paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="er es lz"><img src="../Images/778f5eac2a5f240910270f54e43849ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U892qx5ziHCpANgHYtxdaA.png"/></div></div></figure><p id="1d8a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">祝贺你！</strong>一切就绪！</p><pre class="kr ks kt ku fd lj lk ll lm aw ln bi"><span id="c77c" class="lo ju hi lk b fi lp lq l lr ls">rfm[[<strong class="lk hj">"segment"</strong>, <strong class="lk hj">"recency"</strong>, <strong class="lk hj">"frequency"</strong>]].groupby(<strong class="lk hj">"segment"</strong>).agg([<strong class="lk hj">"mean"</strong>, <strong class="lk hj">"count"</strong>])</span></pre><figure class="kr ks kt ku fd kv er es paragraph-image"><div class="er es ma"><img src="../Images/1658536fb7d2db33499920aca1ef9ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*Z5KrcGV4ESiFzuOxYsfU1Q.png"/></div></figure><p id="4ac8" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一般来说，频率值相当低。此时，组织促销和高折扣活动可能是明智的。我们需要优先考虑我们的客户，他们现在在场，但他们的忠诚度可能会日益下降。<br/> <br/> <strong class="iz hj">看到cant_loose段的客户在总平均</strong>中有一个高频值 <strong class="iz hj">，但是最近自己退出了系统。如果公司采用正确的策略，这一部分具有很高的盈利潜力。为了快速恢复，建议使用较大的折扣。可以创建一个诉诸情感的恢复活动。</strong></p><p id="e813" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">风险客户群包括我们的客户，他们熟悉系统并有丰富的购物体验。</strong>在需要重点关注的细分市场中，它应该排在第一位，它的恢复将为公司提供高回报。在这里，可以为他们为目标受众购买的产品组组织促销活动。可能会有一大批人通过购买库存产品而退出系统。可以向他们推荐基于产品的活动。</p></div><div class="ab cl mb mc gp md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="hb hc hd he hf"><p id="e66c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我错过了任何步骤，如果有些事情不太适合你，或者如果这个指南有帮助，请告诉我！感谢您的阅读！</p><p id="7470" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">Github:</strong><a class="ae li" href="https://github.com/nfzaltay/customer-segmentation-rfm" rel="noopener ugc nofollow" target="_blank">https://github.com/nfzaltay/customer-segmentation-rfm</a></p><p id="efb0" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">参考文献:</strong></p><ul class=""><li id="77d5" class="mi mj hi iz b ja jb jd je jg mk jk ml jo mm js mn mo mp mq bi translated">数据科学学校(Veri Bilimi Okulu)</li><li id="73b4" class="mi mj hi iz b ja mr jd ms jg mt jk mu jo mv js mn mo mp mq bi translated">魏若婷，林世炎，吴新红，2010，RFM模型应用综述，<em class="lx">《非洲企业管理杂志》，</em>第4卷(19)，第4199–4206页</li></ul></div></div>    
</body>
</html>