<html>
<head>
<title>The Next Generation Service Gateway</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">下一代服务网关</h1>
<blockquote>原文：<a href="https://medium.com/codex/the-next-generation-service-gateway-7cf4bd50c9bd?source=collection_archive---------7-----------------------#2021-08-13">https://medium.com/codex/the-next-generation-service-gateway-7cf4bd50c9bd?source=collection_archive---------7-----------------------#2021-08-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f56e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如今，所有的软件架构都在向云原生架构迁移。云原生架构具有以下特征:</p><ul class=""><li id="4586" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">它由采用弹性设计的微服务架构构建而成。</li><li id="f58c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">按需性能和扩展能力。</li><li id="c6f6" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">将控制逻辑和业务逻辑完全解耦。</li><li id="e975" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">以高可用性和99.9%以上的正常运行时间SLA为目标。</li></ul><p id="e40d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">四类重要的事情需要通过云本地方式来很好地构建和安排。</p><ol class=""><li id="b1e4" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc jr jj jk jl bi translated"><strong class="ih hj">基础设施运行时资源</strong>。底层计算节点、存储和网络都由container和Kubernetes管理和调度。</li><li id="d5a7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated"><strong class="ih hj">应用数据&amp;状态</strong>。应用程序数据和状态需要持久或在群集范围内同步。我们可以看到主流数据库(SQL/NoSQL)、缓存、队列等现在都支持分布式集群和HA解决方案。</li><li id="743d" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated"><strong class="ih hj">应用服务</strong>。这些服务现在由Kubernetes编排，并由微服务架构管理，包括服务发现、服务配置管理、服务网关/代理、弹性&amp;容错、活性或就绪性健康检查、可观察性(指标、日志、跟踪)等。</li><li id="1f45" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc jr jj jk jl bi translated"><strong class="ih hj">流量编排</strong>。大多数在线服务需要处理来自世界各地的用户请求。这种流量会有不同的目的并访问不同的资源。因此，管理流量并使其与云原生后端服务保持一致非常重要。</li></ol><p id="8960" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于流量协调，要成为云原生网关，它必须具备以下特性。</p><ul class=""><li id="2045" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">与微服务架构保持一致。</li><li id="48ac" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">分布式系统技术的高可用性。</li><li id="1e16" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">通过各种过滤器和API聚合的管道协调流量。</li><li id="0dfd" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">兼容云原生架构，如服务网格、FaaS等。</li><li id="96e5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">服务可观察性—跟踪、指标(吞吐量、延迟、错误等)、访问日志。</li></ul><p id="ac87" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为此，我们将引入下一代服务流量网关— <a class="ae js" href="https://github.com/megaease/easegress" rel="noopener ugc nofollow" target="_blank"> Easegress </a></p><p id="b6aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个软件是用Go编写的开源软件(Apache 2.0 license)，有了Go编程语言，对于高并发的场景，它自然有高性能。</p><p id="cec1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Easegress的主要设计如下:</p><p id="eaeb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">流量处理功能或过滤器可以通过插件机制来开发。</p><p id="1ea7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">管理API可以在运行时将函数或过滤器组织到管道中。</p><p id="132f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有两种类型的控制器有助于管理和集成到整个云原生架构。</p><ul class=""><li id="6a32" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">交通控制器</strong> —网状、FaaS等。</li><li id="e426" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">系统控制器</strong> —服务发现、监控、集群等。</li></ul><p id="7782" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">应用层协议支持— HTTP 1/2/3、WebSocket、MQTT</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/57fb39b2e0a16daaa882de63052baf29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bU-EzeW7DDX51y1Q"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx translated">来源:<a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/architecture.png" rel="noopener ugc nofollow" target="_blank">https://github . com/mega ease/ease gress/blob/main/doc/architecture . png</a></figcaption></figure><p id="4c72" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，Easegress具有以下云原生特性。</p><p id="5f48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">微服务架构合规性</p><ul class=""><li id="b696" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">Spring Cloud兼容性</li><li id="1a5f" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Restful API协议——API路由和API聚合。</li><li id="51a9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">服务发现集成— Eureka、Consul、Nacos、Etcd和Zookeeper。</li><li id="e0d9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">弹性和容错(移植自<a class="ae js" href="https://github.com/resilience4j/resilience4j" rel="noopener ugc nofollow" target="_blank"> resilience4j </a>项目)——断路器、速率限制器、重试器、时间限制器等。</li></ul><p id="0198" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云-原生架构集成</p><ul class=""><li id="be99" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">Kubernetes入口控制</li><li id="5e53" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">服务网格—边车和入口控制器</li><li id="e4e0" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">FaaS——Knative</li><li id="2caf" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">高可用性和高性能</li></ul><p id="665f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">内置的Raft共识和领导者选举提供了99.99%的可用性。</p><ul class=""><li id="e220" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">负载平衡—循环、随机、加权随机、IP/报头哈希。</li><li id="95c4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">缓存—缓存后端服务响应。</li></ul><p id="ae7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">可观察性</p><ul class=""><li id="acf0" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">服务跟踪——内置的开放Zipkin，以及对供应商中立的API的开放跟踪。</li><li id="8059" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">吞吐量— QPS/TPS m1、m5、m15和错误率</li><li id="8838" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">潜伏期— P999、P99、P98、P95、P75、P50、P25</li><li id="1270" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">带宽—请求和响应数据大小</li><li id="5f9b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">响应HTTP状态代码统计。</li></ul><p id="972c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，Easegress具有很好的可扩展性，很容易将定制的特性或功能添加到Easegress中，有三种方法可以做到这一点。</p><ul class=""><li id="135f" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated"><strong class="ih hj">过滤器或控制器。</strong>遵循开发指南，您可以用Go语言开发您的过滤器和控制器。但是它需要重新编译软件。</li><li id="a0a5" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">网络组装</strong>。Easegress支持WASM运行时引擎，因此，您可以用任何支持WASM的编程语言开发过滤器，并且Easegress可以在运行时加载它。</li><li id="ecb9" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated"><strong class="ih hj">功能即服务</strong>。Easegress支持Knative integration，因此，除了Easegress之外，您还可以部署函数服务。通过与Kubernetes合作，这种方式似乎有点沉重，但它是一个可扩展的解决方案。</li></ul><p id="2c12" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，Easegress可以成为一个开发框架，你可以专注于自己的业务流量网关。</p><p id="bea0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Easegress有能力完成以下工作(包括但不限于):</p><ul class=""><li id="732d" class="jd je hi ih b ii ij im in iq jf iu jg iy jh jc ji jj jk jl bi translated">反向代理(负载均衡)—丰富的负载均衡策略[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/load_balancer.md" rel="noopener ugc nofollow" target="_blank"> doc </a></li><li id="ed0d" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">服务发现—动物园管理员、尤里卡、领事、Nacos等。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/service_proxy.md" rel="noopener ugc nofollow" target="_blank">单据</a></li><li id="1f19" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">FaaS—Knative integration[<a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/faas.md" rel="noopener ugc nofollow" target="_blank">doc</a></li><li id="73fb" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">Kubernetes入口控制器[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/k8s_ingress_controller.md" rel="noopener ugc nofollow" target="_blank"> doc </a></li><li id="e3ec" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">管道—为请求/响应处理编排HTTP过滤器。<br/> [ <a class="ae js" href="https://github.com/megaease/easegress/blob/main//doc/cookbook/pipeline.md" rel="noopener ugc nofollow" target="_blank"> doc </a></li><li id="a4d4" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">API聚合——将许多API聚合成一个API。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/api_aggregator.md" rel="noopener ugc nofollow" target="_blank"> doc </a></li><li id="5bc7" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">弹性和容错—断路器、速率限制器、重试器、时间限制器等。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/resilience.md" rel="noopener ugc nofollow" target="_blank"> doc </a></li><li id="c16b" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">分布式跟踪—支持APM跟踪— Zipkin。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/distributed_tracing.md" rel="noopener ugc nofollow" target="_blank"> doc </a></li><li id="091a" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">压缩、缓存等性能优化。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/performance.md" rel="noopener ugc nofollow" target="_blank">单据</a></li><li id="4480" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">闪购。高并发促销销售。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/flash_sale.md" rel="noopener ugc nofollow" target="_blank">单据</a></li><li id="6caa" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">服务网格——这被[ <a class="ae js" href="https://github.com/megaease/easemesh" rel="noopener ugc nofollow" target="_blank"> Ease Mesh] </a>所利用——一个Spring Cloud兼容的网格系统。</li><li id="a96c" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">工作流(IFTTT) —将许多API作为工作流运行。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/workflow.md" rel="noopener ugc nofollow" target="_blank">单据</a></li><li id="0132" class="jd je hi ih b ii jm im jn iq jo iu jp iy jq jc ji jj jk jl bi translated">WebAssembly —使用AssemblyScript扩展Easegress。[ <a class="ae js" href="https://github.com/megaease/easegress/blob/main/doc/cookbook/wasm.md" rel="noopener ugc nofollow" target="_blank">单据</a></li></ul><p id="8f28" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">今天，我们期待着您对这个新的流量门户的建议或关注，甚至帮助我们将这个门户变得伟大。请随时在我们的Github—【https://github.com/megaease/easegress T21】中提出问题或贡献代码</p></div></div>    
</body>
</html>