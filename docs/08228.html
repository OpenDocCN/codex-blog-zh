<html>
<head>
<title>How to write an aimbot in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Unity中编写aimbot</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-write-an-aimbot-in-unity-b4aec0064889?source=collection_archive---------8-----------------------#2022-07-25">https://medium.com/codex/how-to-write-an-aimbot-in-unity-b4aec0064889?source=collection_archive---------8-----------------------#2022-07-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/a2634dbc32529a7423ea54d85e56b5fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhiWOFuNX27nBNQlB-G6NQ.png"/></div></div></figure><p id="d607" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你玩第一人称射击游戏，你很可能会遇到骗子，并想知道这样的骗子是如何制造的。在网络游戏中，作弊通过取消技能比赛来违背竞争力的本质，但在单人游戏中，精心实施的aimbots可以让玩家摆脱困境，并增强游戏的流动性。</p><p id="7a6b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这个简单的教程中，我们将探索制作超越Unity<code class="du jo jp jq jr b">transform.LookAt</code>的aimbot所需的数学和实现基础。在教程的最后，你将掌握在瞄准更具挑战性的平台上用瞄准机器人给你的玩家加电的基础知识。</p><blockquote class="js jt ju"><p id="bff5" class="iq ir jv is b it iu iv iw ix iy iz ja jw jc jd je jx jg jh ji jy jk jl jm jn hb bi translated">在我的<a class="ae jz" href="https://github.com/agostonr/Aimbot-example" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到样本项目，或者如果你需要一个更加细致入微的aim assist解决方案，为你的项目提供类似于高端游戏的各种Aim Assist，请查看我的资产<a class="ae jz" href="https://assetstore.unity.com/packages/slug/226597" rel="noopener ugc nofollow" target="_blank"> Aim Assist Pro </a>！</p></blockquote></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="50bb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们<em class="jv">的目标是</em>实现如下目标:</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div class="er es kh"><img src="../Images/0d60491bb7c5a166edb64816def9f410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Lg7Mnl170CIEuZUxnUOArA.gif"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">Aimbot在使用游戏手柄对付扫射目标时的动作</figcaption></figure><p id="bf59" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我用一个游戏手柄，只能左右扫射，我根本不调整我的样子。不过，aimbot帮助我以更自然、更少机器人化的方式跟踪目标。</p><h1 id="3cbd" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">设置</h1><p id="8447" class="pw-post-body-paragraph iq ir hi is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">为了帮助我们专注于编写与项目相关的代码，我使用了Unity的第一人称角色控制器作为基础。一个免费的资产，它为我们覆盖了移动和玩家输入，所以我们只需要编写aimbot本身。如果您想继续，将它添加到您的资产中，并导入到您的项目中。</p><p id="7b8a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的例子中，我们将旋转播放器并改变Cinemachine摄像机的俯仰角度，以使播放器转动或向上看。</p><h1 id="e769" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">这个想法</h1><p id="2fd8" class="pw-post-body-paragraph iq ir hi is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">要定义aimbot，我们需要考虑以下几点:</p><blockquote class="js jt ju"><p id="eda1" class="iq ir jv is b it iu iv iw ix iy iz ja jw jc jd je jx jg jh ji jy jk jl jm jn hb bi translated">发现目标后，在一定时间内将十字准线移动到某个点。</p></blockquote><p id="a4dd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这使我们找到了解决以下问题的方法:</p><ol class=""><li id="a088" class="lt lu hi is b it iu ix iy jb lv jf lw jj lx jn ly lz ma mb bi translated"><em class="jv">寻找目标启动aimbot，但不要穿墙</em></li><li id="cbfa" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated"><em class="jv">决定十字准线向哪个方向移动——向左或向右，向上或向下——移动到</em></li><li id="8131" class="lt lu hi is b it mc ix md jb me jf mf jj mg jn ly lz ma mb bi translated"><em class="jv">计算出每一帧要做多少调整</em></li></ol><p id="a0c8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">幸运的是，Unity已经为我们提供了<a class="ae jz" href="https://docs.unity3d.com/ScriptReference/Physics.SphereCast.html" rel="noopener ugc nofollow" target="_blank"> SphereCast </a>，我们可以用它来确定aimbot的半径。如果它击中目标，我们就开始瞄准。</p><p id="5605" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了决定转向的方向，我们需要计算我们正在看的地方(玩家向前)和我们应该看的地方(目标的方向)之间的有符号的角度。我们需要分别对转弯和俯仰调整进行计算。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mh"><img src="../Images/922e4af58efbcd2ad6a4d30063fb9566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZM7h5FkGNjNRqjtSfBw7xw.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">计算转弯角度</figcaption></figure><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mi"><img src="../Images/9efb029fb2751b57eee93e07fa1a0733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OFR3rFv5tJv-TdJsZQbdQ.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx translated">计算俯仰角</figcaption></figure><p id="af86" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在单独的轴上，一旦我们找出期望的观察方向和我们当前的观察方向之间的差异，我们就知道将玩家转向哪个方向。在此之后，根据注视目标所需的时间和玩家到目标的距离，我们可以计算出一个角速度，该角速度使玩家在当前帧的时间内旋转。</p><h1 id="ac20" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">实施</h1><p id="342c" class="pw-post-body-paragraph iq ir hi is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">我们希望有如下内容:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="36b5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们的脚本需要玩家的第一人称相机，瞄准辅助半径和以秒为单位的旋转目标时间。<br/> <code class="du jo jp jq jr b">TrackTarget</code>寻找并计算对一个目标一帧长时间的跟踪。它必须在每个玩家查看输入法调用后被控制器脚本调用。我们将返回以度为单位的俯仰增量和转弯增量的欧拉角——将这些分别添加到Cinemachine目标俯仰和玩家旋转将正确地对aimbot进行必要的外观调整。</p><p id="6c7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第一步是射击<code class="du jo jp jq jr b">SphereCast</code>为我们找到一个aimbot攻击的目标。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mj mk l"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">用SphereCast寻找目标</figcaption></figure><p id="b629" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们把一个球体从相机投射到它的前进方向。如果我们没有发现任何东西或者我们发现的碰撞器不是敌人，返回null，否则返回发现的目标的变换。</p><p id="1cb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后，我们需要计算每个轴的总角度。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mj mk l"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">计算独立轴上的旋转角度</figcaption></figure><p id="3e77" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这里需要对这些预测进行一些解释。我们投射到特定的平面(<a class="ae jz" href="https://en.wikipedia.org/wiki/Normal_(geometry)" rel="noopener ugc nofollow" target="_blank"> <em class="jv">用它们的法向量</em> </a>标记)来区分水平和垂直的观察轴。如果没有这个投影，Unity的<a class="ae jz" href="https://docs.unity3d.com/ScriptReference/Vector3.SignedAngle.html" rel="noopener ugc nofollow" target="_blank">sign angle</a>会计算出一个对角线角度，这将导致抖动和不准确的旋转，除非水平或垂直方向上我们已经完美地看到了目标。</p><figure class="ki kj kk kl fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ml"><img src="../Images/5eebed89efa88d487219436417124481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3U5kkts9S0bgk9w9m4tTLQ.png"/></div></div></figure><p id="3a37" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> PF </strong>矢量显示玩家的视线方向，<strong class="is hj"> PT </strong>矢量显示从玩家到目标的方向，也就是我们应该看的方向。类似地，<strong class="is hj">PF’</strong>表示投射到水平面的玩家的视线方向，<strong class="is hj">PT’</strong>表示投射到水平面的目标方向。<strong class="is hj"> β </strong>表示未投影方向之间的角度，而<strong class="is hj"> α </strong>表示投影方向之间的角度——在这种情况下，它是水平轴上的角度，负责玩家的回合。</p><p id="af4a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为了计算俯仰角，选择的投影平面是摄像机的右轴<a class="ae jz" href="https://docs.unity3d.com/ScriptReference/Transform-right.html" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mj mk l"/></div><figcaption class="km kn et er es ko kp bd b be z dx translated">计算投影观察方向和目标方向之间的角度</figcaption></figure><p id="d59a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">计算出总旋转数后，我们需要计算在该帧中实际旋转的次数。</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="01ca" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们调整瞄准的时间，这样一个狭窄的瞄准机器人半径不会被踩得太快，同样，一个宽的也不会太慢。我们得到到目标的距离，然后根据我们离目标的距离计算角速度。的确:我们离得越近，aimbot转弯的速度就越快，以满足时间标准；我们离得越远，它转弯的速度就越慢。我们把它转换成度数，然后除以时间，得到角速度。然后，我们选择最小的“帧下旋转”和所需的总旋转，否则当aimbot试图重新调整时，它将围绕目标的中心来回振荡。<br/>最后，我们用Unity的<code class="du jo jp jq jr b">SignedAngle</code>乘以总角度计算得出的方向。</p><h1 id="b28a" class="kq kr hi bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">将aimbot集成到Unity的示例控制器中</h1><p id="5075" class="pw-post-body-paragraph iq ir hi is b it lo iv iw ix lp iz ja jb lq jd je jf lr jh ji jj ls jl jm jn hb bi translated">aimbot集成非常简单:</p><figure class="ki kj kk kl fd ij"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="f917" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与示例代码处理播放器输入的方式类似，我们旋转播放器，然后设置并固定摄像机目标的俯仰，并将摄像机目标的局部旋转设置为该俯仰。</p><p id="a719" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最终结果产生了您在教程开始时看到的结果，如<em class="jv"> gif </em>所示。</p></div><div class="ab cl ka kb gp kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="hb hc hd he hf"><p id="e043" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果你完成了数学和代码，恭喜你！希望你学到了有用的东西。当你路过我的社交网站时，一定要打个招呼，并与你的开发伙伴分享这篇文章。编码快乐！</p></div></div>    
</body>
</html>