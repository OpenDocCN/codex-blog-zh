<html>
<head>
<title>Kotlin’s Builder DSL will change the way you code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin的构建器DSL将改变你编码的方式</h1>
<blockquote>原文：<a href="https://medium.com/codex/kotlins-builder-dsl-will-change-the-way-you-code-931ecd03012d?source=collection_archive---------6-----------------------#2022-05-17">https://medium.com/codex/kotlins-builder-dsl-will-change-the-way-you-code-931ecd03012d?source=collection_archive---------6-----------------------#2022-05-17</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7c4db1674b4284136bfc0f0ff2b166e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5IxiCcgJSLQxwmus.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://kotlinlang.org" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="57f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你没有读过Kotlin最强大的工具，你可以在这里查看:</p><div class="jt ju ez fb jv jw"><a rel="noopener follow" target="_blank" href="/codex/kotlins-most-powerful-tool-1265732544ad"><div class="jx ab dw"><div class="jy ab jz cl cj ka"><h2 class="bd hj fi z dy kb ea eb kc ed ef hh bi translated">你使用科特林最强大的工具吗？</h2><div class="kd l"><h3 class="bd b fi z dy kb ea eb kc ed ef dx translated">讨厌Java的人很多，喜欢Java的人也很多，但我几乎没见过不喜欢Kotlin的人。来自数据…</h3></div><div class="ke l"><p class="bd b fp z dy kb ea eb kc ed ef dx translated">medium.com</p></div></div><div class="kf l"><div class="kg l kh ki kj kf kk io jw"/></div></div></a></div></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="cbbf" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">卡尔·本茨于1886年发明了第一辆汽车。从那以后，新技术有了如此多的发展和整合。在2022年，汽车是如此复杂的机器，以至于制造一辆汽车需要大量的人力。</p><p id="b7e3" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们也在制造汽车，但是用我们的脑力……在电脑上……在你的房间里……与世隔绝……等等，有一个疫情？好吧——我跑题了😜</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es ks"><img src="../Images/257a3e6eacf84d9ba23d3d7434051519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*fwIIgYDQbxKJ62LIWatAQA.png"/></div></figure><p id="1ccb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">耶，我们正在制造我们的复杂汽车，但是等等，这有问题。</p><p id="17c4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.我需要确保在对象构造时我拥有所有必需的字段。嗯。</p><p id="150c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.我的构造函数参数可能会改变或增加，这会阻塞参数列表。嗯。</p><p id="310f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kx">那么，我们该怎么做才能让情况稍微好一点呢？</em></p><h1 id="8929" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">创建构建器类</h1><p id="1758" class="pw-post-body-paragraph iv iw hi ix b iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo ma jq jr js hb bi translated">让我们来看看:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/dda46d2958a7c1fa68d99dd48b395ce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*FC03Ara-dVaE_6g65NAifg.png"/></div></figure><p id="5b93" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">万岁，我们已经把复杂的对象构造器简化了很多。我不需要同时拥有所有属性，参数表也不会再阻塞。</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/97bae5f299bd0a34acec62dc302463cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*TmBK1yP5YFsIqWBCopzStw.png"/></div></div></figure><p id="c919" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">站住。尽管这是构造一个复杂类的更好的方法，但是仍然存在一些问题。</p><p id="de81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.参数列表没有堵塞，但是整个代码很庞大。嗯。</p><p id="31fb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.添加大量样板代码。嗯。</p><p id="a04d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.代码风格不灵活。嗯。</p><p id="7d0a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="kx">那么我们该怎么做才能让这种情况稍微好一点呢？</em></p><h1 id="ab3b" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">科特林DSL</h1><blockquote class="md"><p id="9f65" class="me mf hi bd mg mh mi mj mk ml mm js dx translated">Kotlin最强大的工具是高阶函数，因此能够编写类型安全的DSL代码。</p></blockquote><p id="338c" class="pw-post-body-paragraph iv iw hi ix b iy mn ja jb jc mo je jf jg mp ji jj jk mq jm jn jo mr jq jr js hb bi translated">首先，我们可以去掉Builder类中的所有函数，并将这个函数添加到顶层:</p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mb"><img src="../Images/4e415e2e81d3bb8aeecda2b1c3c1fa7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*32abluTv2UH_LvtknYlPTw.png"/></div></figure><p id="2fd4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">尤其是<code class="du ms mt mu mv b">buildCar</code>函数，它是所有神奇事情发生的地方。该函数有一个高阶函数<strong class="ix hj">，其中<code class="du ms mt mu mv b">Car.Builder</code>是<strong class="ix hj">λ接收器类别</strong>。当你编写这个lambda函数时，隐式的<code class="du ms mt mu mv b">this</code>将属于<code class="du ms mt mu mv b">Car.Builder</code>类。</strong></p><figure class="kt ku kv kw fd ij er es paragraph-image"><div class="er es mc"><img src="../Images/d8b456cbf054457333ff6ba51729cdda.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*CBsdV_rLuHsGGeYgQIhCLQ.png"/></div></figure><p id="d89d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">哇，我们终于到了一个大部分问题都解决了的阶段。</p><p id="cf33" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">1.代码非常易读和干净。</p><p id="7448" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.我们可以在<strong class="ix hj">λ参数</strong>中添加任何逻辑，如<code class="du ms mt mu mv b">if</code> s或<code class="du ms mt mu mv b">for</code> s</p><p id="029b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.如果我们从API获取数据，甚至可以灵活地使用协程。</p><h1 id="e66c" class="ky kz hi bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">结论</strong></h1><p id="1cc2" class="pw-post-body-paragraph iv iw hi ix b iy lw ja jb jc lx je jf jg ly ji jj jk lz jm jn jo ma jq jr js hb bi translated">Kotlin的构建器接口和DSL可以提高代码的可读性，并提高团队的生产率。通过一点额外的努力，这种模式可以节省重构和调试代码的时间。</p></div></div>    
</body>
</html>