<html>
<head>
<title>A Beginner’s Guide to Easily Create a Word Cloud in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python轻松创建单词云的初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/codex/a-beginners-guide-to-easily-create-a-word-cloud-in-python-7c3078c705b7?source=collection_archive---------4-----------------------#2022-03-26">https://medium.com/codex/a-beginners-guide-to-easily-create-a-word-cloud-in-python-7c3078c705b7?source=collection_archive---------4-----------------------#2022-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="be4f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里是使用Python创建单词云(或标签云)的一步一步的初学者指南(包括代码)。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="a37f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">词云是给定文本中最常用和相关的词的拼贴，或者更简单地说，是文本块的视觉表示。词云中的词越突出、越大，该词与给定文本越相关。看看下面的例子(来源:【https://github.com/amueller/word_cloud】T2)。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/3407aa6cce3da6ba7db28ca16ee7ef13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjojzcHV49vEyPxBTjEnow.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">一个基于《星球大战》原始剧本文本的单词云示例。来源:https://github.com/amueller/word_cloud<a class="ae jk" href="https://github.com/amueller/word_cloud" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="15d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个例子中，我们将从我的<a class="ae jk" href="http://purl.flvc.org/fsu/fd/FSU_migr_etd-8884" rel="noopener ugc nofollow" target="_blank">硕士论文</a>的PDF文件中创建一个单词云，题目是:</p><blockquote class="kb"><p id="fb07" class="kc kd hi bd ke kf kg kh ki kj kk jc dx translated">使用来自肯尼迪航天中心和卡纳维拉尔角空军站的场磨网络的数据预报闪电停止。</p></blockquote></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="de8b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们深入研究代码之前，先简要说明一下所需的库。虽然通常最好的做法是在脚本开始时导入所有的包/库，但这里我们将在使用它们时导入每个包/库。我觉得这是更有用的解释目的，因为我们通过每一步的过程。对于这个具体的例子，依赖关系包括<em class="kl"> PyPDF2 </em>、<em class="kl"> NLTK </em>(各种方法)、<em class="kl"> WordCloud </em>、<em class="kl"> re </em>、<em class="kl"> numpy </em>和<em class="kl"> Image </em>。</p><p id="d5a5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在让我们开始吧！第一步是加载文本数据，这些数据可能来自不同的来源，包括:</p><ul class=""><li id="61a5" class="km kn hi ih b ii ij im in iq ko iu kp iy kq jc kr ks kt ku bi translated">网络:<a class="ae jk" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">漂亮的汤库</a>是从网络上抓取文本的首选包。查看提供的文档链接！</li><li id="1883" class="km kn hi ih b ii kv im kw iq kx iu ky iy kz jc kr ks kt ku bi translated">文本文件(如TXT):要读取文本文件，首先使用内置的<strong class="ih hj">打开</strong>函数打开文件，如<code class="du la lb lc ld b">f = open('path_to_file.txt')</code>，其中<em class="kl"> f </em>是我们在其中分配file对象的变量，“path_to_file.txt”是显示感兴趣文件路径的字符串。接下来，使用<strong class="ih hj"> read </strong>方法从file对象中访问内容，例如<code class="du la lb lc ld b">file_data = f.read()</code>。这段代码将包含在。txt文件并把它放在一个字符串中。</li><li id="df44" class="km kn hi ih b ii kv im kw iq kx iu ky iy kz jc kr ks kt ku bi translated">PDF文档:在Python中，有各种第三方包可以用来读取PDF文件。这里我们将使用<a class="ae jk" href="https://pythonhosted.org/PyPDF2/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> PyPDF2 </strong>模块</a>中的<a class="ae jk" href="https://pythonhosted.org/PyPDF2/PdfFileReader.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj"> PdfFileReader </strong>类</a>，可以通过<code class="du la lb lc ld b">conda install -c conda-forge pypdf2</code>安装conda，也可以通过<code class="du la lb lc ld b">pip install PyPDF2</code>安装pip。对于我们的示例，我们的文本存储在一个PDF文档中，可以通过以下代码在Python中加载该文档:</li></ul><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">使用PyPDF2库从Python中的PDF加载文本数据</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="2af4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们需要执行一些基本的文本处理步骤，这些步骤通常在自然语言处理(NLP)任务中使用。一个令人惊叹的用于NLP的Python库是<a class="ae jk" href="https://www.nltk.org/" rel="noopener ugc nofollow" target="_blank"> NLTK </a>(自然语言工具包的简称)，它将是你在文本处理和特征提取过程中最好的朋友。</p><p id="d208" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将首先使用NLTK来标记我们的文本，这仅仅意味着将PDF中的所有文本分割成一系列独特的单词。我们可以用下面的代码创建PDF中所有单词的列表:</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">使用NLTK对PDF中的单词进行标记</figcaption></figure><p id="c367" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在上面的代码中，我们首先从nltk.tokenize导入了<em class="kl"> word_tokenize </em>方法，这是在nltk中拆分文本最常用的方法。然后，我们创建一个空列表，其中将包含标记化的单词。然后，for循环逐页进行，并将每个单词追加到<em class="kl">单词</em>列表中。请注意，在本例中，我将查询的页面限制在18–96页，以排除封面和标题页、参考列表和其他不相关的文本。相反，要包含所有页面(在自动化流程中或在多个文档间循环时，这是首选)，通过<code class="du la lb lc ld b">for pages in range(0,pdfReader.numPages):</code>开始循环。<em class="kl">单词</em>列表现在包含了我们文档中的所有单词！接下来，我们需要降低单词列表的复杂性。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="6bd1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们语言的一些特征，如大写、标点和常用词(a、of、the)可以被删除，以帮助降低复杂性，并创建一个更具信息量的词云。这里，我们通过以下方式降低复杂性:</p><ul class=""><li id="cf02" class="km kn hi ih b ii ij im in iq ko iu kp iy kq jc kr ks kt ku bi translated"><strong class="ih hj">去除大写</strong>:</li></ul><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div></figure><ul class=""><li id="3222" class="km kn hi ih b ii ij im in iq ko iu kp iy kq jc kr ks kt ku bi translated"><strong class="ih hj">删除停用词</strong>，这些停用词是不含信息的词，如“是”、“是”、“the”等。，这对一个句子没有多大意义。这可以使用NLTK提供的停用词列表和列表理解来完成:</li></ul><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div></figure><ul class=""><li id="91dc" class="km kn hi ih b ii ij im in iq ko iu kp iy kq jc kr ks kt ku bi translated"><strong class="ih hj">去掉标点符号</strong>:</li></ul><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="2be3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了进一步简化我们的单词表，我们接下来对数据进行词条化。词汇化是一种将单词简化为词干或词根形式的技术。例如，“is”、“was”和“were”都可以追溯到词根形式:“be”。我们将从NLTK的<em class="kl"> WordNetLemmatizer() </em>类中使用NLTK的<em class="kl"> lemmatize </em>方法来将我们的单词缩减到它们的词干。这种方法基于词性(POS)标签进行词汇化。因此，我们使用另一个NLTK方法，<em class="kl"> pos_tag </em>，首先导出每个单词的pos，然后将其用作<em class="kl"> lemmatize </em>方法的输入。以下代码块执行此任务:</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">使用NLTK对单词列表进行词汇化。<a class="ae jk" href="https://www.machinelearningplus.com/nlp/lemmatization-examples-python/" rel="noopener ugc nofollow" target="_blank">get _ wordnet _ pos(word)函数的代码源</a>。</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="5708" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们准备好创建我们的单词云了！这里我们将使用Python的<a class="ae jk" href="https://pypi.org/project/wordcloud/" rel="noopener ugc nofollow" target="_blank"> wordcloud库</a>，可以使用pip <code class="du la lb lc ld b">pip install wordcloud</code>或者conda <code class="du la lb lc ld b">conda install -c conda-forge wordcloud</code>下载。以下代码使用WordCloud默认值创建并保存图像:</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="2d42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是由此产生的单词云:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lg"><img src="../Images/35aa54a344504b0c55a729eaf964e18f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mizIgSgELVq-2y6kyiLoYg.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">word_cloud.png</figcaption></figure><p id="b147" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以用这张图片来结束今天的工作。然而，有一些方法可以让我们更上一层楼。首先，这里有各种缩写，需要读者阅读文档才能完全理解。为了使图像更具信息性，我们可以用整个术语替换缩写(例如，pg =电位梯度),并删除没有更多上下文的无用单词。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="a836" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，为了真正让我们的单词云流行起来，我们可以在文本填充图像的地方添加一个遮罩。我很快用微软画图创建了下面的蒙版。在我们更新的单词云中，单词将只出现在黑色区域，而白色区域将保持空白。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lh"><img src="../Images/95e03fe3a68b97479896e10640ed0d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2C8PIoBt1olSdacNi6CSZQ.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">迅雷_cloud_mask.png</figcaption></figure><p id="87a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给定我们优化的单词列表和图像掩码，我们可以通过以下方式创建更新的单词云:</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="6748" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是最终的结果！</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es lh"><img src="../Images/7c50626d8dcc51419332cd0d14b5c6ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tqgpR_hezbY0nd1o8Lubg.png"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx translated">word_cloud_masked.png</figcaption></figure></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><p id="1247" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇文章对你创建你的第一个单词云有用。如果你有任何问题和快乐编码，请随时留下评论！</p></div></div>    
</body>
</html>