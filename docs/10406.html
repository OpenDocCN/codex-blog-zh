<html>
<head>
<title>PyDolphinScheduler 4.0.0 officially released</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyDolphinScheduler 4.0.0正式发布</h1>
<blockquote>原文：<a href="https://medium.com/codex/pydolphinscheduler-4-0-0-officially-released-878ba20cf4b6?source=collection_archive---------12-----------------------#2022-12-28">https://medium.com/codex/pydolphinscheduler-4-0-0-officially-released-878ba20cf4b6?source=collection_archive---------12-----------------------#2022-12-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/8da36d77694f0aaedf187f92f5878fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JCHEQEuernX4SbllgZA3og.png"/></div></div></figure><blockquote class="iq ir is"><p id="0e54" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">最近，Apache DolphinScheduler子项目PyDolphinScheduler迎来了PyDolphinScheduler 4 . 0 . 0(DolphinScheduler-SDK-python)的第一个发布版本，它将作为一个独立的存储库进行维护。</p></blockquote><p id="0321" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated"><strong class="iw hj">新建仓库:</strong><a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python" rel="noopener ugc nofollow" target="_blank"><strong class="iw hj">https://github.com/apache/dolphinscheduler-sdk-python</strong></a></p><p id="967b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">PyDolphinScheduler 4.0.0的主要变化包括:</p><ul class=""><li id="7928" class="jw jx hi iw b ix iy jb jc js jy jt jz ju ka jr kb kc kd ke bi translated">支持工作流执行策略#9</li><li id="e614" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">添加身份验证令牌#13</li><li id="7b36" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">添加对DolphinScheduler版本检测#47的支持</li><li id="4409" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">将时间增量类型用于工作流超时#41</li><li id="ec9b" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">提交工作流只创建一次链接#16</li><li id="0866" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">工作流名称从流程定义更改为工作流#42</li></ul><h1 id="9a2d" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">特征</h1><ul class=""><li id="1dec" class="jw jx hi iw b ix li jb lj js lk jt ll ju lm jr kb kc kd ke bi translated">通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/9" rel="noopener ugc nofollow" target="_blank"> #9 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@中建杰</a>将执行类型添加到工作流中</li><li id="1984" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【壮举】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/13" rel="noopener ugc nofollow" target="_blank"> #13 </a>中通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@中建杰</a>添加令牌作为python网关的认证</li><li id="7137" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【专长】【任务】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/15" rel="noopener ugc nofollow" target="_blank"> #15 </a>中的<a class="ae jv" href="https://github.com/tuchg" rel="noopener ugc nofollow" target="_blank"> @tuchg </a>支持Kubernetes任务</li><li id="4f67" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【功绩】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/41" rel="noopener ugc nofollow" target="_blank"> #41 </a>中通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@中建杰</a>将工作流超时标记为类型时间增量</li><li id="21fd" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/44" rel="noopener ugc nofollow" target="_blank"> #44 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@中建杰</a>将变更日志添加到我们的文档中</li><li id="7262" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【功绩】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/47" rel="noopener ugc nofollow" target="_blank"> #47 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@中建杰</a>对dolphinscheduler主包进行版本检查</li></ul><h1 id="568a" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">改善</h1><ul class=""><li id="fe48" class="jw jx hi iw b ix li jb lj js lk jt ll ju lm jr kb kc kd ke bi translated">对于<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/16" rel="noopener ugc nofollow" target="_blank"> #16 </a>中<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@中建杰</a>提交的单个工作流，只创建一个连接</li><li id="34f7" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【impv】请勿在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/33" rel="noopener ugc nofollow" target="_blank"> #33 </a>中<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>开发版本中警告</li><li id="3319" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【impv】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/43" rel="noopener ugc nofollow" target="_blank"> #43 </a>中由<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>添加工作流和任务的选项参数</li><li id="8634" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【测试】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/46" rel="noopener ugc nofollow" target="_blank"> #46 </a>中的<a class="ae jv" href="https://github.com/jieguangzhou" rel="noopener ugc nofollow" target="_blank"> @jieguangzhou </a>优化任务插件中的测试用例</li></ul><h1 id="5a7f" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">错误修正</h1><ul class=""><li id="2f0a" class="jw jx hi iw b ix li jb lj js lk jt ll ju lm jr kb kc kd ke bi translated">【修复】由<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/36" rel="noopener ugc nofollow" target="_blank"> #36 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>上传资源并添加文档</li><li id="e352" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【修复】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/35" rel="noopener ugc nofollow" target="_blank"> #35 </a>中<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>上传开发分支资源</li></ul><h1 id="40e4" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">文件</h1><ul class=""><li id="0d72" class="jw jx hi iw b ix li jb lj js lk jt ll ju lm jr kb kc kd ke bi translated">【doc】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/28" rel="noopener ugc nofollow" target="_blank"> #28 </a>中通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>添加历史和版本兼容性</li></ul><h1 id="1f25" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">例行工作</h1><ul class=""><li id="fd17" class="jw jx hi iw b ix li jb lj js lk jt ll ju lm jr kb kc kd ke bi translated">【苦差事】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/1" rel="noopener ugc nofollow" target="_blank"> #1 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>从主repo apache/dolphinscheduler中迁移代码</li><li id="bbb8" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【ci】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/10" rel="noopener ugc nofollow" target="_blank"> #10 </a>中添加可合并并启用github发布<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a></li><li id="e247" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【苦差事】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/11" rel="noopener ugc nofollow" target="_blank"> #11 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>提高CI，修复死锁</li><li id="d081" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【杂务】被<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/17" rel="noopener ugc nofollow" target="_blank"> #17 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>合并后启用删除分支</li><li id="d4d4" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【家务】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/26" rel="noopener ugc nofollow" target="_blank"> #26 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>将类名从流程定义改为工作流</li><li id="abed" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">[ci]避免计划事件通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟嘉杰</a>在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/29" rel="noopener ugc nofollow" target="_blank"> #29 </a>上传太多文件到codecov</li><li id="e5ec" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【杂务】更改综合测试行为，并在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/30" rel="noopener ugc nofollow" target="_blank"> #30 </a>中通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>添加一些文档</li><li id="089d" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【苦差事】CI python版本从3.11-dev到3.11由<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/31" rel="noopener ugc nofollow" target="_blank"> #31 </a></li><li id="b13f" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【苦差事】修正徽章许可证，并在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/32" rel="noopener ugc nofollow" target="_blank"> #32 </a>中通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>将下载改为pypy.tech</li><li id="6a40" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【苦差事】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/37" rel="noopener ugc nofollow" target="_blank"> #37 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>修复ubuntu-latest无法在github动作中设置python</li><li id="5555" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【家务】通过<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/39" rel="noopener ugc nofollow" target="_blank"> #39 </a>中的<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>更改网站链接</li><li id="f075" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">【苦差事】在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/42" rel="noopener ugc nofollow" target="_blank"> #42 </a>中通过<a class="ae jv" href="https://github.com/zhongjiajie" rel="noopener ugc nofollow" target="_blank">@钟家杰</a>修改pd的工作流实例名称</li></ul><h1 id="c461" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">贡献者</h1><p id="ff6e" class="pw-post-body-paragraph it iu hi iw b ix li iz ja jb lj jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated"><strong class="iw hj">钟家街、土城街、广州街</strong></p><ul class=""><li id="bfeb" class="jw jx hi iw b ix iy jb jc js jy jt jz ju ka jr kb kc kd ke bi translated"><a class="ae jv" href="https://github.com/tuchg" rel="noopener ugc nofollow" target="_blank"> @tuchg </a>在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/15" rel="noopener ugc nofollow" target="_blank"> #15 </a>第一次投稿</li><li id="b9d0" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated"><a class="ae jv" href="https://github.com/jieguangzhou" rel="noopener ugc nofollow" target="_blank">@杰光州</a>在<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/pull/46" rel="noopener ugc nofollow" target="_blank"> #46 </a>第一次投稿</li></ul><p id="0192" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">完整变更日志:<a class="ae jv" href="https://github.com/apache/dolphinscheduler-sdk-python/compare/3.1.0...4.0.0" rel="noopener ugc nofollow" target="_blank"> 3.1.0…4.0.0 </a></p><h1 id="04bc" class="kk kl hi bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">从DolphinScheduler资源库分离的原因</h1><ul class=""><li id="4aa4" class="jw jx hi iw b ix li jb lj js lk jt ll ju lm jr kb kc kd ke bi translated"><strong class="iw hj">职责明确</strong>:pyDolphinScheduler的代码库是独立于dolphin scheduler的，它有自己的用户和开发人员、CI、测试用例，甚至语言也不一样。</li><li id="cf39" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated"><strong class="iw hj">独立发布周期</strong> : PyDolphinScheduler是一个SDK，应该独立于DolphinScheduler发布。分离之前，每次DolphinScheduler的时候都要释放PyDolphinScheduler。这就带来了问题:</li><li id="d19a" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">DolphinScheduler的发布周期对于PyDolphinScheduler来说太长了，因为PyDolphinScheduler是DolphinScheduler的一个新的子项目，它还不够稳定，我们有许多功能和增强功能想要添加，所以我们必须更频繁地发布DolphinScheduler。</li><li id="3c2f" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">每次DolphinScheduler的时候我们都要释放PyDolphinScheduler，即使PyDolphinScheduler没有变化。在过去，我们同时发布了这两个版本，一些DolphinScheduler错误修复版本，如2.0.5，2.0.6，2.0.7，只修复了DolphinScheduler中的一些错误，而不是PyDolphinScheduler，没有必要发布PyDolphinScheduler但我们必须发布。</li><li id="e0cd" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated">应该使用与DolphinScheduler相同的版本，由于相同的发布周期，我们必须拥有与DolphinScheduler相同的版本，所以您可能会看到DolphinScheduler bug修复版本中有一些功能性的加法器，对于PyDolphinScheduler用户来说可能会有点陌生。</li><li id="805c" class="jw jx hi iw b ix kf jb kg js kh jt ki ju kj jr kb kc kd ke bi translated"><strong class="iw hj">更快的CI运行</strong> : PyDolphinScheduler有自己的CI，当我们只更改PyDolphinScheduler代码时，没有必要运行DolphinScheduler CI。而且DolphinScheduler CI更完整，合并pull请求需要用到一部分CI，把PyDolphinScheduler和DolphinScheduler分开可以让CI在两个仓库都运行得更快。</li></ul><p id="bdbc" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">更多详情请参考<a class="ae jv" href="https://lists.apache.org/thread/4z7l5l54c4d81smjlk1n8nq380p9f0oo" rel="noopener ugc nofollow" target="_blank">分离邮件线程讨论</a>。</p><p id="093f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">需要注意的是，从DolphinScheduler库分离出来后，PyDolphinScheduler会独立发布，PyDolphinScheduler的版本不会对应DolphinScheduler的版本，这意味着在PythonGateway代码没有变化的情况下，PyDolphinScheduler的部分版本会对应多个DolphinScheduler版本。而PyDolphinScheduler的部分代码只会对应一个版本的DolphinScheduler，如果PythonGateway下一个版本的代码发生了变化。</p><p id="315f" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">为了提醒用户，这是一个特殊的版本，我们故意放弃遵循之前的3.1.x版本号，而是使用了4.0.0，这不仅表明这是一个全新的版本，也让用户意识到异常，并关注我们的变化。</p><p id="d373" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">更多信息，请参考<a class="ae jv" href="https://dolphinscheduler.apache.org/python/4.0.0/#history" rel="noopener ugc nofollow" target="_blank">https://dolphinscheduler.apache.org/python/4.0.0/#history</a></p><p id="c6c8" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">📌📌欢迎填写<a class="ae jv" href="https://www.surveymonkey.com/r/7CHHWGW" rel="noopener ugc nofollow" target="_blank">这份调查</a>来反馈您的用户体验或您对Apache DolphinScheduler的想法:)</p><p id="f015" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">【https://www.surveymonkey.com/r/7CHHWGW T4】</p></div></div>    
</body>
</html>