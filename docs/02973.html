<html>
<head>
<title>How to Install Intercom into a ReactJS App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在ReactJS应用程序中安装Intercom</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-install-intercom-into-a-reactjs-app-98aaf4a83d31?source=collection_archive---------4-----------------------#2021-08-13">https://medium.com/codex/how-to-install-intercom-into-a-reactjs-app-98aaf4a83d31?source=collection_archive---------4-----------------------#2021-08-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/40148dad8d6fb52ac790ad161586a4df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yF6X3Y3URli6opPku_rN9g.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">在我的应用游戏手柄上运行的对讲机</figcaption></figure><p id="1b56" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><em class="js">这篇博客将介绍如何在ReactJS应用程序中安装和配置一个基本的</em> <a class="ae jt" href="http://www.intercom.com" rel="noopener ugc nofollow" target="_blank"> <em class="js">对讲机</em> </a> <em class="js"> messenger。我将解释如何实现两个消息传递配置，一个用于登录的用户，另一个用于未登录的访问者。我将使用对讲机的“初级”版本，每月79美元。你可以在这里</em>  <em class="js">注册该服务</em> <a class="ae jt" href="https://www.intercom.com/pricing?utm_source=google&amp;utm_medium=sem&amp;utm_campaign=9870670686&amp;utm_term=%2Bintercom&amp;utm_ad_collection=99717746865&amp;_bt=434730769584&amp;_bg=99717746865&amp;utm_ad=434730769584&amp;offer=pricingpage&amp;utm_campaign_name=go_evg_acq_trial_b_generic_bld_namer_en&amp;utm_ad_collection_name=gen-p_intercom&amp;utm_ad_name=pricingpage_slink_21q1&amp;gclid=CjwKCAjwjdOIBhA_EiwAHz8xm3rvM8bzTtzTY4D7juNf9wPuH0UkRqFZsMzxEjdmlQEcx0RMej-IBBoCL40QAvD_BwE&amp;tab=1" rel="noopener ugc nofollow" target="_blank"> <em class="js">的14天免费试用。</em></a></p><h2 id="4dec" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">什么是对讲机？</h2><p id="b9db" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated"><a class="ae jt" href="http://www.intercom.com" rel="noopener ugc nofollow" target="_blank"> Intercom </a>是一个“对话关系平台”,允许企业通过消息与其客户/潜在客户进行实时互动。它提供了一个可以多种方式使用的消息窗口界面。你可能想和第一次来访的人聊天，让他们问问题，了解更多关于服务或产品的信息。还可以通过允许现有客户向企业的员工或代表发送消息来改善客户服务。对讲机也可以配置聊天机器人，可以很容易地设置来回答常见的问题和关注。所有通信都通过位于应用程序之上的独立消息传递接口进行。</p><h2 id="b59a" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">入门指南</h2><p id="cea8" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated">我将解释我是如何在我自己的ReactJS应用程序中安装Intercom的——你可以在这里查看官方文档<a class="ae jt" href="https://developers.intercom.com/installing-intercom/docs/basic-javascript" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="226b" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">将以下代码放入ReactJS应用程序的<code class="du ku kv kw kx b">index.html</code>文件的<code class="du ku kv kw kx b">&lt;head&gt;&lt;/head&gt;</code>元素中。确保将<code class="du ku kv kw kx b">YOUR_INTERCOM_APP_ID</code>替换为您唯一的内部通信应用ID字符串。</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="fdb7" class="ju jv hi kx b fi lg lh l li lj">&lt;script&gt;</span><span id="990e" class="ju jv hi kx b fi lk lh l li lj">var APP_ID = "<!-- -->YOUR_INTERCOM_APP_ID<!-- -->";<br/><br/>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/' + APP_ID;var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s, x);};if(document.readyState==='complete'){l();}else if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();</span><span id="9054" class="ju jv hi kx b fi lk lh l li lj">&lt;/script&gt;</span></pre><p id="753e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在下一步之前，您将不会在您的应用程序上看到对讲机信使！</p><h2 id="fc3e" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">登录用户的内部通信</h2><p id="107e" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated">我认为，如果我们首先为登录用户实现消息传递系统，这个过程就更容易理解了。当用户登录到您的应用程序时，我们需要向Intercom messenger发送一些信息，告诉他们哪个用户已经登录。在我的应用程序中，在从数据库中成功检索到用户数据后，我将这些信息发送给Intercom。我用从用户信息数据库中收到的对象值填充要发送给Intercom的对象:</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="9dbe" class="ju jv hi kx b fi lg lh l li lj">window.Intercom('boot', {<br/>  app_id: 'YOUR_INTERCOM_APP_ID',<br/>  name: data.user.username,<br/>  email: data.user.email,<br/>  user_id: data.user.id,<br/>});</span></pre><p id="ca7e" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">这也将通过<code class="du ku kv kw kx b">'boot'</code>启动对讲机通讯器。你现在应该可以在你网站的右下角看到messenger了！<strong class="iw hj">当登录用户通过Intercom向您发送消息时，您将在您的Intercom hub收件箱中看到是哪个用户向您发送消息，以及与他们过去的任何对话。</strong></p><p id="9943" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">您可能已经注意到，即使用户注销了您的应用程序，他们仍然会登录到Intercom messenger。让我们解决这个问题！</p><h2 id="3528" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">关闭内部通信信使</h2><p id="9305" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated">当用户从网站注销时，我们希望Intercom关闭。这可以通过对<code class="du ku kv kw kx b">window</code>对象使用一个简单的函数来实现，类似于<code class="du ku kv kw kx b">'boot'</code>的工作方式:</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="22db" class="ju jv hi kx b fi lg lh l li lj">window.Intercom('shutdown');</span></pre><p id="14ac" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">在我的应用程序中，当用户从导航栏中选择“注销”时，我运行这个程序。如果我检测到(通过我的应用程序中的<a class="ae jt" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> JWT </a>)当前访问者没有在页面刷新或新访问时登录，我也会在<code class="du ku kv kw kx b">useEffect</code>内的<code class="du ku kv kw kx b">App.js</code>中运行它。</p><h2 id="f01d" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">未登录用户的内部通信</h2><p id="2785" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated">在我的应用程序中，我为登录的用户以及那些没有登录到我的网站的用户运行Intercom。我们已经为用户登录实现了它，现在让我们看看访问站点的任何人如何使用Intercom。</p><p id="84c6" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我们将以与之前相同的方式启动对讲机信使，只是这次我们仅使用我们的对讲机应用程序ID:</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="b161" class="ju jv hi kx b fi lg lh l li lj">window.Intercom('boot', { <br/>  app_id: 'YOUR_INTERCOM_APP_ID' <br/>});</span></pre><p id="9a9d" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">我在关闭对讲机后的任何时候都会立即运行它。这将使我们在messenger中有一个新的开始，并注销任何以前的用户及其消息。messenger不知道谁在使用它，因此我们创建了一个短暂的messenger会话，它不会像登录用户的对话一样被保存！<strong class="iw hj">当对讲机如此运行时，您将不知道是谁在通过对讲机向您发送消息。</strong></p><p id="d4e1" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">因此，当用户注销时，或者如果当前访问者不是授权用户(即，他们没有JWT)，我运行这个:</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="e251" class="ju jv hi kx b fi lg lh l li lj">window.Intercom('shutdown');<br/>window.Intercom('boot', {<br/>  app_id: 'YOUR_INTERCOM_APP_ID'<br/>});</span></pre><h2 id="f320" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">自定义内部通信设置</h2><p id="143a" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated">您可以向<code class="du ku kv kw kx b">index.html</code>中的<code class="du ku kv kw kx b">&lt;head&gt;&lt;/head&gt;</code>元素添加一个对讲机设置对象来定制messenger。您可以更改messenger的显示位置，也可以设置一个元素来打开(或启动)messenger。</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="3556" class="ju jv hi kx b fi lg lh l li lj">window.intercomSettings = {<br/>  app_id: 'YOUR_INTERCOM_APP_ID',<br/>  alignment: 'left',<br/>  horizontal_padding: 20,<br/>  vertical_padding: 20,<br/>  custom_launcher_selector: '#launcher'<br/>};</span></pre><p id="16a4" class="pw-post-body-paragraph iu iv hi iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated"><code class="du ku kv kw kx b">custom_launcher_selector</code>可以是您选择的任何id或类名。此设置将在任何时候单击id为“launcher”的元素时打开messenger。如果我们想使用一个类名，并将其更改为“launch-intercom ”,它在对象中看起来应该是这样的:</p><pre class="ky kz la lb fd lc kx ld le aw lf bi"><span id="eb8f" class="ju jv hi kx b fi lg lh l li lj">custom_launcher_selector: '.launch-intercom'</span></pre><h2 id="afd3" class="ju jv hi bd jw jx jy jz ka kb kc kd ke jf kf kg kh jj ki kj kk jn kl km kn ko bi translated">结论</h2><p id="1401" class="pw-post-body-paragraph iu iv hi iw b ix kp iz ja jb kq jd je jf kr jh ji jj ks jl jm jn kt jp jq jr hb bi translated">我们只是触及了对讲机功能的皮毛。这是一个快速的教程，帮助您使用Intercom。我鼓励您接下来探索Intercom hub的收件箱和操作员，它们为您提供了各种选项，并让您可以控制如何处理与用户和访客的各种交互。对讲是一个伟大的工具，以促进用户的互动，满意度，并为您的客户提供支持的水平！</p><div class="ll lm ez fb ln lo"><a href="https://www.intercom.com/" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hj fi z dy lt ea eb lu ed ef hh bi translated">对话关系平台|对讲机</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">借助对讲机，通过基于messenger的对话体验建立更好的客户关系。</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">www.intercom.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc io lo"/></div></div></a></div><div class="ll lm ez fb ln lo"><a href="https://developers.intercom.com/installing-intercom/docs/welcome" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hj fi z dy lt ea eb lu ed ef hh bi translated">客户信息平台|内部通信</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">在这里，您可以找到在以下位置安装对讲机所需的一切:否则，您可以使用我们的…</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">developers.intercom.com</p></div></div><div class="lx l"><div class="md l lz ma mb lx mc io lo"/></div></div></a></div></div></div>    
</body>
</html>