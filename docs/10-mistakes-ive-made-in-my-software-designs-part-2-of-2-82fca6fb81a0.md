# 我在软件设计中犯的 10 个错误(第 2 部分，共 2 部分)

> 原文：<https://medium.com/codex/10-mistakes-ive-made-in-my-software-designs-part-2-of-2-82fca6fb81a0?source=collection_archive---------5----------------------->

![](img/6d0064da5c899c3365e5cdb1c2c5832c.png)

[杰瑞米·托马斯](https://unsplash.com/@jeremythomasphoto?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/rock-stack?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍照

这篇文章是我在软件设计中所犯的最大错误的第二部分。你可以[在这里](/codex/10-mistakes-ive-made-in-my-software-designs-part-1-of-2-9664ccc9aa00)阅读“第一部分”。阅读顺序不重要。通过分享我的失败，也许其他人可以建立他们的系统来避免我的错误。

# 6.需求失败

必须满足您系统的要求，不能多，也不能少。我犯了一个错误，完成了一个“伟大”的设计，但是它没有覆盖多个需求，因为我没有在我的系统中运行它们。我也犯了相反的错误，设计我的系统来支持不必要的需求。

用你的需求审核你的设计 —现在，我喜欢通过提取每个需求并构建支持它的序列图来进行设计。这种方法帮助我理解了数据和操作调用的动态流程。我还知道，当我完成需求列表并创建它们的序列图时，我将确信我已经设计了一个满足已知需求的系统。

**测试你的假设**——你可以很容易地把你的设计草图写下来，然后开始实施。我尝试先测试几个假设，以免以后重复工作。您可以通过几种方式来检验假设。原型是一种常用的方法，用来测试一个复杂的需求是可行的，你选择的技术是合适的，或者一个依赖关系可以随着特定的负载而伸缩。测试假设的另一种方法是咨询主题专家。也许你对一个特定的自然语言情感分析器的功效有一个假设。您可以通过询问以前使用过该组件的人来测试这一点，方法是将您的问题在内部发布到您的工程团队或在外部发布到一个对等组。

# 7.依赖阿喀琉斯

在我设计或负责的每一个大规模系统中，一个或多个依赖关系都会使系统瘫痪。在一个案例中，支付处理器在中断期间扼杀了所有的业务销售。还有一次，是聊天提供商破坏了应用程序的一个主要功能。我的依赖也是实用服务，比如通用列表服务，它为我的应用程序提供了收集功能。当服务中断时，多个团队，不仅仅是我的团队，都感受到了痛苦。

审查你的依赖关系——我现在彻底审查我的依赖关系。我检查他们的 SLA，看看他们的第 50 和第 90 个百分点的响应时间。我尝试确定他们之前的停机时间有多近以及持续了多长时间。如果您的一个依赖项失败了，您的审查对于决定如何设计具有足够弹性的系统是有影响的。

**设计故障转移**——“两个总比零个好。”这个短语指的是不止一次地构建同一个特性。但它也适用于单点故障的依赖关系。在支付处理器停机后，我们最终建立了一个备用端点支持，以便在主端点出现故障时可以使用。我们还创建了一个到完全不同的支付提供商的故障转移系统来覆盖我们的基础。冗余并不是一件坏事，尤其是对于关键的依赖关系。您应该为您的依赖关系考虑替代端点、替代服务提供者和优雅的故障处理。

# 8.部署复杂性

我的一个系统曾经花了我几分钟来部署客户端和服务。我承认它是一个整体，这使得它的部署更简单。然而，当我将 monolith 分解成更小的服务时，它的部署变得更加复杂。分钟变成了小时。与其说是自动化，不如说是人工操作，这非常令人沮丧。

**从持续部署开始**——不要等到系统快完成时才自动化构建和部署。从持续部署开始，就像从设置开发环境开始一样。

# 9.不是在这里发明的

“不是这里发明的”综合症是我早期职业生涯中遭受的一种疾病。我将这句格言铭记于心，是因为我在前两家公司的经历，在那里，我们为客户开发定制软件。

如果你不熟悉这种综合症，这是一种你可以从零开始构建你的系统的态度。你让一切都定制化，因为你不信任另一家公司在你的系统中使用的代码，你需要更多的计费时间，或者你太自负了。所有这些原因都适用于我。

超越自我的解决方案——在我目前的公司里，我们有这种价值观，因为它有助于提醒我们，我们可以在任何地方找到想法和答案。我们问题的解决方案可以来自内部，从我们最新的实习生到我们任期最长的高级工程师。或者可以从外部寻找解决方案，与我们已经仔细审查过的合作伙伴或供应商合作。

对其他解决方案的好奇心 —即使你认为你比别人更擅长做某件事，你仍然会从评估不同的解决方案中受益。例如，通过查看它们公开的面向公众的 API，您可以了解一些关于功能和系统设计的信息。然后，您可以使用这些知识来指导您的设计。也许，通过你的研究，你会得出结论，其他解决方案优于你的。

**最小化提交** —你可以在自己构建和使用另一个系统之间达成健康的妥协。您对第三方的研究可能会确定您只需要他们服务的一部分。您可以询问供应商是否可以只使用这一部分。一些公司提供免费层或有限使用层，这是另一种最小化承诺的方式。您可以尝试一下，看看它是否适合您的设计。如果没有，那么就没有重要的时间或承诺，希望如此。

# 10.设计反馈

我把这一点放在最后，因为这是我最后悔的一个错误。在我早期的职业生涯中，我专注于开发一个完美的设计，不管这意味着什么。我的态度是我的系统按照我设计的方式很好。为什么我应该得到关于它的反馈？我错了。

利用反馈来开发你的设计就像用压力来制作一杯浓缩咖啡。你需要恰到好处的量，不要太少，不要太多，当然也不要为零。我应该征求并采纳反馈来加强我的设计，向他人学习，并把我在设计解决方案中所学到的东西教给他们。反馈会让我的设计变得“完美”

**扔掉第一个设计**——你的第一个设计通常不会是最终的设计。所以把你开发的第一个设计扔掉。不是字面意思。我是说，你应该成为你第一个设计的最严厉的批评家。你可以写下所有的错误，然后在第二次迭代中解决它们。第二个是你向你的同事征求反馈的设计。

**寻求反馈** —寻求反馈的关键是多听少说。你会听到批评，本能地变得有所防备。不要这样做。听并记下所提出的观点以及提出这些观点的人。将反馈时间作为学习的机会。你可以质疑你的批评者，以更好地理解他们的立场，这样你的设计的未来版本就能解决他们的问题。

**交出您的设计** —我们每三个月指派一名新工程师负责系统设计。工程师可以自由地考虑系统的改进。然后，我们将工程师的建议按优先顺序放入路线图中进行处理，使之逐渐成为一个更好的系统。

每隔几个月，每个工程师都会将设计交给一个新人，这样设计就属于团队所有了。它不属于某一个人，即最初的设计者。通过这种方法，每个人都有机会参与反馈环的两端，给予和接受反馈。

最近，我和另一位工程师进行了一次配对设计。我们从我们的一个需求开始，创建了一个序列图，批评了它，并开发了一个新的迭代，我们很乐意向团队的其他成员展示反馈。结对设计是一项自然要求你放弃设计的活动。

我鼓励你尝试这两种选择。将您系统的密钥交给其他人。投降可以是一个很好的方式来降低你的自尊。

我还犯了很多其他的错误，这些错误没有列在上面。也许我会把这些留到“第 3 部分”但我希望这 10 个列表可以帮助你未来的技术设计。如果你有一些想分享的错误，请留下评论。我很确定我们都想向他们学习。