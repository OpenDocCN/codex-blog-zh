<html>
<head>
<title>Run a Python code on AWS Batch Part — 1: Creation of Python Script and Docker Container.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS批处理上运行Python代码第1部分:创建Python脚本和Docker容器。</h1>
<blockquote>原文：<a href="https://medium.com/codex/run-a-python-code-on-aws-batch-part-1-creation-of-python-script-and-docker-container-1b01dc89eaed?source=collection_archive---------3-----------------------#2022-07-08">https://medium.com/codex/run-a-python-code-on-aws-batch-part-1-creation-of-python-script-and-docker-container-1b01dc89eaed?source=collection_archive---------3-----------------------#2022-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/c78ef13f51df0fad749bab66b1af930a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*ww8k8sMq4_FexQaFg34H5Q.png"/></div></figure><p id="9a74" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在AWS Batch上运行python代码的先决条件是您的系统上已经安装了Python和Docker。不管你是否了解Docker，我们的目标是在AWS批处理中运行python代码。</p><p id="059e" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将从运行基本的python代码开始，它将打印消息。</p><p id="a042" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">步骤如下所示:</p><ol class=""><li id="0d41" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">创建一个python脚本。</li><li id="a378" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">创建一个Docker文件。</li><li id="b9a4" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">创建Docker容器。</li><li id="c9a2" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">运行Docker容器。</li></ol><p id="c867" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated"><strong class="io hj">首先，开始编写python脚本。</strong></p><figure class="jy jz ka kb fd ij"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="9bb1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">上面代码的输出如下所示。</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es ke"><img src="../Images/1979b1b1a8b2a2060f6ad96230490c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*cI6Og_8f_ja2TProZ8m4JQ.png"/></div></figure><p id="e34d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">下一步是创建Docker文件。在docker文件中，我们需要插入一个我在下面给出的特定命令。确保我们正在创建的文件的名称应该是<strong class="io hj">“docker file”。</strong>我做的python脚本，我取的文件名是<strong class="io hj">“my function . py”。</strong></p><p id="77c9" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">Docker的命令如下所示:</p><figure class="jy jz ka kb fd ij"><div class="bz dy l di"><div class="kc kd l"/></div></figure><p id="61c5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果你有外部包，就像我拿熊猫一样，同样的方法你也可以添加命令行，在上面代码的第5行提到了。</p><blockquote class="kf kg kh"><p id="f859" class="im in ki io b ip iq ir is it iu iv iw kj iy iz ja kk jc jd je kl jg jh ji jj hb bi translated">运行pip install pandas numpy more-packages-you-can-add-with-white-separated</p></blockquote><p id="dfd5" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">到目前为止，我们已经创建了一个Docker文件和Python脚本，我们的下一个目标是创建一个Docker容器。</p><p id="5c8c" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在创建之前，我们需要设置我们的AWS CLI，因为我们需要在AWS平台上上传Docker文件和Python脚本。</p><p id="623a" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">确保您已经从这些链接安装了AWS CLI，然后单击这些链接:<a class="ae km" href="https://awscli.amazonaws.com/AWSCLIV2.msi" rel="noopener ugc nofollow" target="_blank">https://awscli.amazonaws.com/AWSCLIV2.msi</a></p><p id="a1ad" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在，我们将通过运行某个命令来配置AWS CLI。</p><p id="2b2f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请访问“安全凭据”页面，确保您拥有AWS访问密钥ID和AWS密钥。</p><p id="a596" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">如果您想生成该密钥，请访问我的旧文章:<a class="ae km" rel="noopener" href="/codex/aws-s3-with-python-by-shoeb-ahmed-923c1cf47110">https://medium . com/codex/AWS-S3-with-python-by-shoe b-Ahmed-923 C1 cf 47110</a></p><p id="7b07" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">获得密钥后，让我们跳到AWS CLI并打开命令提示符。</p><ol class=""><li id="49e0" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj jp jq jr js bi translated">打开CMD</li><li id="11df" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj jp jq jr js bi translated">键入“aws ”,它将显示如下所示的一些消息，这意味着您的系统上安装了AWS CLI:</li></ol><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/dd054895ea9458dfc061371695e54543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*LNr9hIfMXE3j0Mj7JmxbGA.png"/></div></figure><p id="b780" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">3.现在在命令提示符下键入“aws configure ”:</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/e1cdf44fb059355c5922eace805e81ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*2ylbn1wpvaWyiYHnfPNEnw.png"/></div></figure><ul class=""><li id="a4a5" class="jk jl hi io b ip iq it iu ix jm jb jn jf jo jj kp jq jr js bi translated">输入您的访问密钥，然后按Enter按钮。</li><li id="07c7" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kp jq jr js bi translated">输入您的密钥，然后按Enter按钮。</li><li id="e4f2" class="jk jl hi io b ip jt it ju ix jv jb jw jf jx jj kp jq jr js bi translated">之后，它会询问我们需要保留的区域和默认输出格式，因为它是空白的，然后按Enter键。</li></ul><p id="5db1" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">一旦AWS CLI完成。现在我们来创建一个容器。</p><p id="a671" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">确保docker文件和python文件位于相同的位置。</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es kq"><img src="../Images/1047a8d19f188fcd99874e7e36c20626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*WrLdJ10cS7xV2DApyguOFQ.png"/></div></figure><p id="3f35" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我在该位置打开cmd并键入:</p><blockquote class="kf kg kh"><p id="b6a2" class="im in ki io b ip iq ir is it iu iv iw kj iy iz ja kk jc jd je kl jg jh ji jj hb bi translated"><strong class="io hj"> docker构建-t样本-AWS-代码。</strong></p></blockquote><p id="3600" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">请在“<strong class="io hj"> sample-aws-code </strong>”后加上空格和点号。</p><figure class="jy jz ka kb fd ij er es paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="er es kr"><img src="../Images/442a2342c81ce357032d977e410f783e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFxciCKAgMwGkUnwC5zffQ.png"/></div></div></figure><p id="a475" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">在上面的截图中，我们看到我们的图像文件已经建立。</p><p id="548d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们将通过运行以下命令在本地系统中测试该映像文件:</p><blockquote class="kf kg kh"><p id="eaea" class="im in ki io b ip iq ir is it iu iv iw kj iy iz ja kk jc jd je kl jg jh ji jj hb bi translated"><strong class="io hj"> docker运行样本-AWS-代码</strong></p></blockquote><figure class="jy jz ka kb fd ij er es paragraph-image"><div class="er es kw"><img src="../Images/8e1d16ad860f09e400fd81f3288ba123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*P96VZ0fOjMgakUsA93qBAQ.png"/></div></figure><p id="dc2d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是示例代码的输出。</p><p id="a29f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我将发布第2部分，其中包括AWS批处理设置和运行。</p></div></div>    
</body>
</html>