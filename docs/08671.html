<html>
<head>
<title>Building a Solana Wallet Generator with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React构建一个Solana钱包生成器</h1>
<blockquote>原文：<a href="https://medium.com/codex/building-a-solana-wallet-generator-with-react-d992b0b1932f?source=collection_archive---------7-----------------------#2022-08-25">https://medium.com/codex/building-a-solana-wallet-generator-with-react-d992b0b1932f?source=collection_archive---------7-----------------------#2022-08-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3661041adc8c9f3dafc56cb216afc781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YunUDdxZx2FAJDQwdhBAEg.png"/></div></div></figure><p id="b499" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">钱包对于进入加密或开发任何dAPP(去中心化应用程序)至关重要，因为它们在Web3生态系统中提供了各种重要的功能。因此，在本文中，我们将深入探讨Solana生态系统，它是世界上第一个网络规模的开源区块链协议，允许全球各地的开发人员在其平台上构建分散式应用程序(dApps)。Solana现在能够处理50，000 TPS(每秒事务)，成为世界上最快的区块链。</p><h1 id="4929" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">先决条件</h1><p id="0f12" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">JavaScript基础知识React JS的一些使用经验<a class="ae kr" href="https://docs.expo.dev/get-started/installation/?ref=hackernoon.com#1-expo-cli" rel="noopener ugc nofollow" target="_blank">Expo CLI</a>T3】Watchman(仅macOS或Linux用户需要)<a class="ae kr" href="https://git-scm.com/?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank"> Git </a></p><h1 id="8232" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">介绍</h1><p id="da29" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">在本实用指南中，您将使用React和Web3构建一个与Solana Network交互的基本钱包应用程序。</p><h1 id="c447" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置环境:</h1><p id="f394" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">让我们先设置并安装Node.js和Npm。</p><p id="b41a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这里下载节点<a class="ae kr" href="https://nodejs.org/en/download/?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank">，如果你已经安装了，跳过这一步。</a></p><ul class=""><li id="c393" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">确认是否安装了节点</li></ul><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="41f2" class="lk jp hi lg b fi ll lm l ln lo">node -v</span></pre><p id="f0a3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Node.js附带了Npm，所以您可以使用下面的代码来确认它已经安装。</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="ed53" class="lk jp hi lg b fi ll lm l ln lo">npm -v</span></pre><p id="be1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经设置好了环境，让我们初始化项目并开始构建。</p><h1 id="7e0e" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置样板文件</h1><p id="ef24" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我创建了一个样板存储库，以便更容易地构建这个钱包应用程序。</p><p id="72d7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它包含:</p><p id="db51" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将在教程中用空方法实现一个基本框架。展示我们将从索拉纳网络获得的数据的布局。@solana/web3.js包与solana网络通信。</p><p id="f0bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，我们将安装Watchman，使我们能够安装Expo(只有macOS或Linux用户需要):</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="23ca" class="lk jp hi lg b fi ll lm l ln lo">$ brew update<br/>$ brew install watchman</span></pre><p id="1678" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，我们安装Expo或检查是否已经安装</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="2915" class="lk jp hi lg b fi ll lm l ln lo">npm install -g expo-cli</span></pre><p id="24f4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在我们已经准备好设置样板文件，要继续，您需要克隆存储库:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="abc2" class="lk jp hi lg b fi ll lm l ln lo">git clone <a class="ae kr" href="https://github.com/LucidSamuel/solana-wallet.git" rel="noopener ugc nofollow" target="_blank">https://github.com/LucidSamuel/solana-wallet.git</a></span></pre><p id="a187" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">克隆存储库后，在目录上安装必要的依赖项:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="f1e2" class="lk jp hi lg b fi ll lm l ln lo">cd solana-wallet    // the folder directory<br/>yarn install</span></pre><p id="4327" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，办世博会</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="8ec9" class="lk jp hi lg b fi ll lm l ln lo">expo web</span></pre><p id="a7c4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您应该在终端上看到类似这样的内容:</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lp"><img src="../Images/d2ab88032eb2940185916169eccf040c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ohbs8IouseOX-S3h"/></div></div></figure><p id="791f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要完成该过程，请按照终端中的指示按<code class="du lq lr ls lg b">w</code>,在网络浏览器上打开服务器，您应该会在浏览器上看到如下屏幕:</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/c95777cdf8a5e97796ecdb8eff0fbbe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hKHlahiePjTYIp3-"/></div></div></figure><p id="e54f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在一切都已设置好，服务器也已启动并运行，是时候开始钱包应用程序的工作了。</p><p id="6b0c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在遵循本教程时，请确保不要关闭终端并始终保持Expo运行。</p><h1 id="0195" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">连接到索拉纳网络</h1><p id="c9b8" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">与您可能需要连接到RPC或从第三方服务请求API密钥的其他区块链相反，连接到Solana网络非常简单，只需几个步骤就可以完成。</p><p id="dc45" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您从克隆的存储库中打开<a class="ae kr" href="https://github.com/LucidSamuel/solana-wallet/blob/master/App.js?ref=hackernoon.com" rel="noopener ugc nofollow" target="_blank"> App.js </a>，您会注意到您需要实现的导入和空函数已经包含在内:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="cfda" class="lk jp hi lg b fi ll lm l ln lo">import {<br/>  Connection, // connection receives an endpoint argument containing the full node's URL.<br/>  clusterApiUrl,<br/>  Keypair,<br/>  LAMPORTS_PER_SOL,<br/>} from "@solana/web3.js";</span></pre><p id="ac67" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们将使用<code class="du lq lr ls lg b">devnet</code>，它被设计成一个沙箱，供所有对构建Solana网络测试环境感兴趣的人使用，在这个测试环境中，令牌是不真实的。</p><p id="e6e7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我已经定义了必要的函数；所以剩下的就是你去实现它们了。</p><p id="0fbe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为此，您需要在代码中找到<strong class="is hj"> createConnection </strong>函数，并使用以下代码编辑注释代码:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="7e0d" class="lk jp hi lg b fi ll lm l ln lo">const createConnection = () =&gt; {<br/>  return new Connection(clusterApiUrl("devnet"));<br/>};</span></pre><p id="53c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最后，我们将调用这个函数并在控制台中打印以下内容，以测试它是否连接到网络:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="705d" class="lk jp hi lg b fi ll lm l ln lo">console.log(createConnection());</span></pre><p id="e5b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果一切顺利，您应该会在浏览器的控制台中看到类似这样的内容:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="3b81" class="lk jp hi lg b fi ll lm l ln lo">Object{<br/>   "_commitment":"undefined",<br/>   "_confirmTransactionInitialTimeout":"undefined",<br/>   "_rpcEndpoint":"https://api.devnet.solana.com",<br/>   "_rpcWsEndpoint":"wss://api.devnet.solana.com/",<br/>   "_rpcClient":{<br/>      "…"<br/>   },<br/>   "_rpcRequest":"createRpcRequest(method",<br/>   "args)",<br/>   "_rpcBatchRequest":"createRpcBatchRequest(requests)",<br/>   "_rpcWebSocket":{<br/>      "…"<br/>   },<br/>   "_rpcWebSocketConnected":false,<br/>   "_rpcWebSocketHeartbeat":null,<br/>   "…"<br/>}</span></pre><h1 id="1a50" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创建帐户</h1><p id="422f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">地址对于区块链上的通信至关重要，因为它充当唯一的标识符以及加密货币可以发送和接收的数字点。要创建一个帐户，我们必须首先生成一个包含秘密密钥和公开密钥的密钥对。</p><p id="527a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您可以在代码中找到必要的导入:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="c1bc" class="lk jp hi lg b fi ll lm l ln lo">import {<br/>  Connection,<br/>  clusterApiUrl,<br/>  Keypair,      // the keypair import<br/>  LAMPORTS_PER_SOL,<br/>} from "@solana/web3.js";</span></pre><p id="b32d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">接下来，第1行:定义函数。</p><p id="581b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第2行:定义一个keypair变量，调用函数的结果是生成一个随机的Keypair。</p><p id="e20b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第3行:定义一个initialBalance变量并设置为0。</p><p id="3145" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">第4行:用两个键设置状态变量:keypair和balance。</p><p id="3f30" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们的代码中查找<code class="du lq lr ls lg b">createAccount</code>函数，并实现以下代码:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="64f3" class="lk jp hi lg b fi ll lm l ln lo">const createAccount = () =&gt; {<br/>   const keypair = Keypair.generate();<br/>   const initialBalance = 0;<br/>   setAccount({ keypair: keypair, balance: 0 });<br/> };</span></pre><p id="bdb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应用程序应该重新加载，你将能够创建新的随机帐户，每次你点击按钮“创建新帐户”。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/9331ef713865183196bf6ddf1533d2e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8p1QrxkFmCnB5_1S"/></div></div></figure><h1 id="f362" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">获取帐户余额</h1><p id="42ee" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">要获得帐户余额，您需要在代码中查找<code class="du lq lr ls lg b">getBalance</code>函数，并像这样实现它:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="95c7" class="lk jp hi lg b fi ll lm l ln lo">const getBalance = async (publicKey) =&gt; {<br/> const connection = createConnection();</span><span id="4560" class="lk jp hi lg b fi lu lm l ln lo"> const lamports = await connection.getBalance(publicKey).catch((err) =&gt; {<br/>   console.error(`Error: ${err}`);<br/> });</span><span id="36fc" class="lk jp hi lg b fi lu lm l ln lo">   return lamports / LAMPORTS_PER_SOL; // In the Solana Network, a lamport is the smallest unit: 1 SOL = 1 billion lamports.<br/> };</span></pre><h1 id="7579" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">请求空投</h1><p id="3a26" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Devnet令牌并不是真正的令牌。Solana Network允许我们请求令牌，以便在开发应用程序时进行测试。</p><p id="e7b1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Solana Web3 <code class="du lq lr ls lg b">requestAirdrop</code>函数接受两个参数:</p><p id="63ef" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">至</strong>:账户公钥<br/> <strong class="is hj">端口</strong>:端口数量</p><p id="ffd9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为此，我们需要在代码中实现空的<code class="du lq lr ls lg b">requestAirdrop</code>函数，如下所示:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="4d25" class="lk jp hi lg b fi ll lm l ln lo">const requestAirdrop = async (publicKey) =&gt; {<br/>    setRequestAirdropButton({ text: BUTTON_TEXT_LOADING, loading: true });<br/>    const connection = createConnection();</span><span id="0739" class="lk jp hi lg b fi lu lm l ln lo">    const airdropSignature = await connection.requestAirdrop(<br/>      publicKey,<br/>      LAMPORTS_PER_SOL<br/>    );</span><span id="b2c7" class="lk jp hi lg b fi lu lm l ln lo">    const signature = await connection.confirmTransaction(airdropSignature);</span><span id="9664" class="lk jp hi lg b fi lu lm l ln lo">    const newBalance = await getBalance(publicKey);</span><span id="222c" class="lk jp hi lg b fi lu lm l ln lo">    setAccount({ ...account, balance: newBalance });<br/>    setRequestAirdropButton({ text: BUTTON_TEXT, loading: false });<br/>  };</span></pre><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/fa9cf6af32d8beb621875462cd3a35b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7BJL2kQyJZjNkzFr"/></div></div></figure><h1 id="a411" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">最终代码</h1><p id="a61f" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们最终的<code class="du lq lr ls lg b">App.js</code>代码应该是这样的:</p><p id="de72" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae kr" href="https://gist.github.com/LucidSamuel/ce8e391a841b2c2c22d318c85a9e1fdd.js" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/LucidSamuel/ce 8 e 391 a 841 B2 C2 c22 d 318 c 85 a 9 E1 FDD</a></p><h1 id="b7d4" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="53d3" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们成功地开发了一个具有基本功能的Solana钱包生成web应用程序。从这里开始，您可以继续构建具有更动态用户界面的独特应用程序。</p><p id="0c2b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lv">也在这里发表</em><a class="ae kr" href="https://hackernoon.com/building-a-solana-wallet-generator-with-react" rel="noopener ugc nofollow" target="_blank"><em class="lv"/></a></p></div></div>    
</body>
</html>