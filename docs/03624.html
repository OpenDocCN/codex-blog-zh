<html>
<head>
<title>Genetic Algorithm &amp; Spatio-Temporal Networks: Optimization of Campus Shuttle Bus Schedule Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">遗传算法与时空网络:校园班车时刻表优化(一)</h1>
<blockquote>原文：<a href="https://medium.com/codex/genetic-algorithm-spatio-temporal-networks-optimization-of-campus-shuttle-bus-schedule-part-1-e0dc3bcdb30c?source=collection_archive---------12-----------------------#2021-09-11">https://medium.com/codex/genetic-algorithm-spatio-temporal-networks-optimization-of-campus-shuttle-bus-schedule-part-1-e0dc3bcdb30c?source=collection_archive---------12-----------------------#2021-09-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="3d86" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">第1部分:问题表述的时空网络</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/26c6d9be8d16ce1a62c4576b5d8a11e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xM1Vs6o6MFW2Smb7DnNf1A.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><h1 id="bfb2" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">问题介绍</h1><p id="d5d0" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">我们大学的教学楼和宿舍是分开的(相距数英里)。大多数学生利用指定的学校班车往返于教学楼和宿舍之间。我们有三个宿舍，两个相距只有一个街区，第三个相距很远。班车往返于教学楼和不同宿舍之间。我在宿舍住了三年，像大多数学生一样，我对我们的公交时刻表不满意。我可能醒得很早，但最终却没有赶上公共汽车，错过了我的课；因为害怕错过公交车，我浪费了很多时间去停车场。为什么我每次上车，巴士就不能开往我的目的地呢？</p><blockquote class="lb lc ld"><p id="cebb" class="kf kg le kh b ki lf ij kk kl lg im kn lh li kq kr lj lk ku kv ll lm ky kz la hb bi translated">是时候把这个问题掌握在我自己手中，用我在课堂上学到的知识为我们的学生社区做些有用的事情了。听起来很棒，对吧？</p></blockquote><p id="435d" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">所以我就这么做了。我将这个车辆调度问题公式化为4种时空网络，并用Python实现了遗传算法，以在确保满足学生需求的同时，为学校降低高达20%的成本。</p><p id="7b95" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">让我在这一系列的博客中告诉你是如何做到的。如果你想看演示或者看代码，请直接去我的<a class="ae ln" href="https://github.com/AlisonYao/DURF-Bus-Schedule-Optimization" rel="noopener ugc nofollow" target="_blank">项目GitHub </a>。</p><h1 id="6c98" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">问题描述</h1><p id="4964" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">通常，现实生活中的问题不适合任何模型。我们需要通过做出假设并将其分解成更小的部分来简化问题。在我们的例子中，虽然有三个宿舍，但我首先只从一个开始，这个宿舍有最多的学生，也是我住了2年的宿舍。也就是说，我的模型只涉及两个位置，学术大楼(AB)和金桥宿舍(JQ)，现在忽略另外两个宿舍。我把这个版本称为“基线问题”。我做了如下假设:</p><ol class=""><li id="60c7" class="lo lp hi kh b ki lf kl lg ko lq ks lr kw ls la lt lu lv lw bi translated">所有班车只往返于JQ和AB之间，不往返于其他宿舍。</li><li id="5f10" class="lo lp hi kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">所有班车从JQ出发或在JQ等待第一班车，这意味着在早上第一班车期间没有班车从AB出发。它与真实世界的操作是一致的。</li><li id="2d84" class="lo lp hi kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">班车服务在工作日从早上7:00开始，到晚上24:00结束(每天17个小时)，特殊情况下没有时间变化。</li><li id="b016" class="lo lp hi kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">所有班车只能从AB开往JQ或从JQ开往AB，间隔时间为30分钟(30分钟通常保证及时到达)。上述假设的唯一例外是，在高峰时间，所有班车需要2个间隔(1小时)才能到达目的地。</li><li id="c186" class="lo lp hi kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">每辆班车都有一名司机操作。他或她不能连续工作超过4小时的最长工作时间。</li></ol><p id="1645" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">在定义了“基线问题”之后，我继续阐述更复杂的“扩展问题”，其中考虑了所有三个宿舍(金桥-JQ、金阳-JY和釜山-PS)。请注意，JQ和JY只有一个街区的距离，所以他们基本上可以被视为同一个地方。同样，我们做了一些假设，但这里我只列出与上面不同的假设:</p><ol class=""><li id="974d" class="lo lp hi kh b ki lf kl lg ko lq ks lr kw ls la lt lu lv lw bi translated">如果学生需要，所有班车可以在任何一天往返于JQ/JY和AB或PS和AB之间。</li><li id="50f0" class="lo lp hi kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">所有班车从JQ或PS出发，或者在JQ或PS等待第一次调度，这意味着在早上第一次调度期间没有班车从AB出发。</li><li id="5810" class="lo lp hi kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">所有班车只能从AB开往JQ/JY或PS，或从JQ/JY或PS开往AB，间隔T为30分钟(同样，30分钟通常保证及时到达)。上述假设的唯一例外是，在高峰时间，所有班车需要2个间隔(1小时)才能到达目的地。</li></ol><p id="ed44" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">好了，我已经用文字描述了这个问题，但是我们仍然需要一个数学表达式。这就是时空网络的用武之地。</p><h1 id="b7dc" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">什么是时空网络？</h1><p id="22e0" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">时空网络模型是一种捕捉时间和空间变化的图形模型。在我们的车辆调度问题中，时间更重要，所以一个<strong class="kh hj">时间扩展图</strong>就是我们要找的。</p><p id="8aba" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">把一个<strong class="kh hj">时间扩展图</strong>想象成一台Mac时间机器。随着时间的推移，您会看到同一目录的不同版本。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mc"><img src="../Images/3525705082e1a717e5036af910ed3f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S1dFLttVaudyxY2-quy0YQ.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="f924" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">因此，时间消耗图具有代表整个时间内相同位置的多个节点。例如，所有节点1代表同一个节点，但它在不同的时间与节点2和节点3交互。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/2d42e6c05d8778ad933d95556f8091b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQravVva2M3Q7LOFpaYxng.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="32cc" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">在我们问题的上下文中，所有节点1可以表示JQ，所有节点2可以表示AB。从1指向1的箭头表示班车在某一时段停在JQ；从1指向2的箭头表示班车在某一时段从JQ开往AB。</p><h1 id="a69f" class="jn jo hi bd jp jq jr js jt ju jv jw jx io jy ip jz ir ka is kb iu kc iv kd ke bi translated">如何将我们的问题公式化为一个时空网络？</h1><h2 id="79de" class="me jo hi bd jp mf mg mh jt mi mj mk jx ko ml mm jz ks mn mo kb kw mp mq kd mr bi translated">3.1基线问题</h2><p id="8468" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">让我们首先考虑最简单的场景。除了第一次调度，时空网络是同一网络结构的重复。每辆班车可以在一个间隔T = 30分钟内从节点n行驶到节点n+1或节点(n+1)’。我们称之为1.0版本。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ms"><img src="../Images/b1549b54745a6fcbdbc856e828cd0c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XeHyTt8_7s-90lnSRw-v6A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="5ee3" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">实际上，高峰时间会延迟到达时间，所以我们给公交车2个间隔(1小时)来通勤。2.0版本增加了高峰时间限制，并将网络结构从7:30改为8:30，从17:30改为18:30。其中一个变化的例子是不再有从节点2指向节点3’的箭头。相反，节点2指向节点4’，因为在高峰时间从JQ到AB需要30多分钟。其他地方与1.0版保持一致。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/14dd058da60f687045b4f26720b2d73e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qJtTO3j08-9_jPvALIeE4A.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><h2 id="b361" class="me jo hi bd jp mf mg mh jt mi mj mk jx ko ml mm jz ks mn mo kb kw mp mq kd mr bi translated">3.2扩展问题</h2><p id="fa91" class="pw-post-body-paragraph kf kg hi kh b ki kj ij kk kl km im kn ko kp kq kr ks kt ku kv kw kx ky kz la hb bi translated">在扩展问题中，我们将在基线问题模型公式中添加JY和PS节点。JY节点都略微向右移动，因为从JQ到JY需要3到5分钟，但JQ-JY-AB通勤仍在30分钟的间隔T内。PS节点与JQ非常相似，只是PS远离JQ和JY，因此PS被视为独立的节点。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mu"><img src="../Images/b2cfd782c5c319cfa728b7a950d606b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oqP5mRTw0Mxdc8hFWObo8w.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="2a80" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">事实上，从班车时刻表来看，不去JY并没有什么不同。最先到达JY的巴士司机会通知其他司机他们是否需要开车去JY接更多的学生。由于JY对公共汽车时刻表没有影响，我们可以合并JQ节点和JY节点，以更简单的方式表述问题。1.0版本没有高峰时间的限制。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mt"><img src="../Images/fe79b33e0650900adea267ddfdbe49bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nyGTQWXr9K8J2BNk7Y1vkA.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="6892" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">同样，2.0版本增加了高峰时间限制，并将网络结构从7:30更改为8:30，从17:30更改为18:30。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mv"><img src="../Images/e9871986b9e37722da52d56daebc434c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0fvuvWmRIWjUbY_eN5kfFg.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="5c4b" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">好了，我们已经把问题公式化了。在下一篇博客中，我将解释为什么以及如何使用遗传算法解决这个问题。</p></div><div class="ab cl mw mx gp my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="hb hc hd he hf"><p id="9ed9" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">谢谢你阅读我的博客！希望对你有帮助。</p><p id="53a1" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">我的Github:<a class="ae ln" href="https://github.com/AlisonYao" rel="noopener ugc nofollow" target="_blank">https://github.com/AlisonYao</a></p><p id="1bf7" class="pw-post-body-paragraph kf kg hi kh b ki lf ij kk kl lg im kn ko li kq kr ks lk ku kv kw lm ky kz la hb bi translated">我的卡格尔:【https://www.kaggle.com/alisonyao】T2</p></div></div>    
</body>
</html>