# 置信区间的本质与可视化

> 原文：<https://medium.com/codex/essence-visualization-of-confidence-interval-e5f808e431d7?source=collection_archive---------11----------------------->

![](img/a18620e532238ac740dc552e31ca3d66.png)

纳赛尔·塔米米在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

作为数据科学领域的新人，我面临的第一个挑战是理解置信区间。它不是一串插入公式的数字，而是对这些数字和公式背后的故事的理解。要理直气壮地理解置信区间，首先需要理解中心极限定理和钟形曲线。让我们从头开始我们的故事:

统计学中最基本的概念是总体与样本。样本是整个总体的一小部分，用于获得总体的特征。假设你正在烤 10 块鸡胸肉，你想知道鸡肉是否煮熟。你知道烤鸡的理想温度是 165 度。你戴上烤箱手套，拿起厨房温度计，测量其中一块鸡胸肉的温度，以判断整批鸡胸肉是否煮熟。在这种情况下，您的样本大小为 1，并且您正在根据这一个样本估计整个群体(10 块鸡胸肉)。

CLT 是任何统计数据的基础，在世界各地的各种教科书和文章中有成千上万关于 CLT 的解释，但很难相信我们中很少有人理解它到底是什么。我将保持它的简单，远离所有复杂的音程公式，把注意力集中在连接起来的点上，这些点给出了整个画面。要理解 CLT，我们首先需要理解抽样。

抽样:从较大的总体中选择预定数量的随机独立观察值的过程。为了形象化，让我们以一家制造厂的网球直径为例。该工厂每天生产 50000 个网球，质量团队需要估计平均直径。它将从整个群体中随机挑选几个网球，并计算平均直径。基于对一组样本的观察来估计人口的物理特征的过程被用作统计分析的基础。我们可以推断，观测值越多，估计值就越好，而估计值永远无法给出参数的真实值。

现在，回到强大的**中心极限定理**。如果在样本大小 n≥30 的情况下对总体进行多次采样，并绘制每个平均值的频率，则图表将假设总体平均值呈正态分布，标准差为σ/√n，其中σ为总体标准差。推论:样本量越大，标准差越低的分布越窄。

![](img/436da1bc0a00c576014a9a65ffb3053c.png)

wikipedia.org

左边的分布是每个样本在整个总体中的频率，右边的分布是样本大小为 n 的样本均值的频率。为了更清楚地理解它，左边的分布有 n=1，而右边的分布有 n≥ 30。一旦总体的抽样均值分布清楚了，我们就可以进入置信区间。

置信区间是一个概念，使用它可以根据具有一定置信度的区间来估计分布的参数/特征。让我们想象这样一句话:“如果我成功完成数据科学训练营，我有 95%的信心找到一份年薪 10 万美元到 12 万美元的工作”。这里有很多主张。我得出的范围是 100000–120000，这应该有一些数据支持。大概，我已经观察到人们在完成这个训练营后平均得分在这个范围内。接下来，我有 95%的信心，大概我见过 5/100 的病例是在这个范围之外的。有些人非常聪明，能拿到 20 万美元或更多，而有些人需要更多时间才能拿到。统计学的美妙之处在于，这种说法总能得到一些数据的支持。

现在，让我们使用到目前为止我们思考过的一切，抽样、CLT 和均值估计的概念来计算置信区间。我们将首先绘制样本量超过 30 的平均工资的频率，针对从训练营毕业的校友。我们知道，所有校友的平均年薪是 11 万美元，SD 是 10000 美元 10K。样本均值分布如下所示:

![](img/af123c5097d5c72afe601137763d0909.png)

接下来，让我们看看另一个重要的概念，z 变换。本质上，z 变换(也称为标准化)是使用给定分布来拟合高斯分布曲线的过程。均值为 0、标准差为 1 的钟形曲线。如此怪异拟合的原因是，一些智者以 0.01 的步长计算了从-4 到 4 的每个点左侧曲线下的面积，并将其放入一个名为 z-table 的表中。这个面积和概率有某种关系，我们一会儿会回来。让我们首先用下图来形象化。左侧高斯图中的平均值 110K 对应于右侧图中的平均值 0。我们知道平均值需要转换为 0，所以无需进一步调整，平均值处的 z 值将被自身减去，x̄-μ.现在，由于 SD 转换为 1，我们将每个样本均值除以标准偏差，以 1/σ调整 SD。所以，最后的变换公式是 z= (x̄-μ)/σ.

在 CLT 中，高斯曲线的标准差为σ/√n。在这种情况下，z 变换为(x̄-μ)/σ/√n，我们将使用该属性来理解置信区间。

![](img/4ed60b05e98480fb935e268b06f8942b.png)

理解 z 表是进一步计算置信区间的关键。以下代码片段显示了正 z 表的上半部分。对应于 1.23 的值是 0.8907，这意味着曲线下 89.07%的区域在 1.23 的左侧。就概率而言，我们可以说在标准化正态分布中，平均值小于或等于 1.23 的概率为 89.07%。一旦我们对 z 表中的每一个要素都有了充分的了解，我们就可以很容易地计算出负对应的值。因为这是一个对称的图，-z 只是 z 左边的总面积，所以-1.23 的标准正态概率是 1–0.8907 = 0.10930 r，10.93%。

![](img/8516ef1f06afbbf27c70201ed3fd9ae2.png)

zoebeesley.com

瞧啊。！我们已经做了基础工作，是时候解决房间里的大象了。让我们理直气壮地找出一些置信区间。为了理解 CI 计算的过程，我们需要理解两种情况:一种是总体均值和标准差已知的情况(使用 z 表，这在现实世界中并不常见)，常见的情况是总体均值或标准差未知的情况(使用 t 表)。

我确信我们对 z 分布非常清楚，那么 t 分布是什么呢？尽管这一理论是在爱尔兰都柏林的一家酿酒厂发展出来的，但我可以自信地假设(尽管没有数据支持！！)威廉·希利·戈塞没有喝醉。威廉非常谦虚，他甚至不希望自己的名字出现在他的作品中，他获得了笔名“学生”。聪明的威廉知道我们都是学生，我们的学习永远不会停止。因此，这种救命的天才分布被称为学生的 t 分布，即使在样本量较低、总体均值和标准差未知的情况下也能工作。与 z-table 一样，t-table 也考虑了估计参数的样本大小和置信水平。

回到一些统计数据:我们听说过计算 CI 的 z 统计量和 t 统计量。查看 z 表和 t 表并找出数字并代入公式很容易，但这一次我们将以不同的方式行事！！我们会质疑一切。数字是什么意思，为什么我们插哪儿插哪儿？？让我们挖一点点，我的朋友！！

我是否提到过 z-table 为我们提供了标准化高斯图(-4，4)中每个变换值左侧的面积，CI 为我们提供了一个范围，在此范围内我们可以有一定程度的把握(称为置信水平)？让我们再来看看 z 曲线。

![](img/ab68492aa13ddef1ad50171910ca2619.png)

如果我说，我想要 95%置信度的范围，让我们看看高斯图中我们的第一个想法是什么。它包括覆盖平均值周围曲线下 95%区域的所有值。既要有上限，也要有下限。禁止 5%或 0.05 的区域。因为这是一个对称图，所以让我们将 5%平均分布在两边，这样边界就在曲线下的左面积为 0.025 的值(根据 z 表)及其正对应值处结束。现在，我们必须反过来读这个表，找到 0.025 的值，也称为 z 值，用α/2 表示。哎呀！又有一个问题，正表没有这个值，我们知道为什么吗？因为所有正值左边的面积都大于 0.5。让我们使用我们的对应计算技巧。我们发现 z 值对应于 1–0.025，这是我们的极限。z(0.975)是 1.96。耶！！快到了。我们有来自标准化表格(-1.96，1.96)的限制，所以我们需要做的就是将它转换回我们真实的样本均值。我们知道这个公式，z = (x̄-μ)/σ/√n，它给出了 x̄=μ + z*σ/√n 的上限值和 x̄=μ -z*σ/√n 的下限值。如果我们代入μ = 110000，σ = 10000，n =30，我们的 95% CI 为(106，421，113578)。所以，我对(100000，120000)之间的工资的胡乱猜测与数据不符，这是一种更可靠的估计区间的方法。还要记住，我们的信心越高，CI 的范围就越高，反之亦然。现在，复杂的部分已经完成了，让我们也了解一下 t 分布。这是相同的概念，但不是使用总体平均值和标准差，而是使用样本平均值和标准差以及为自由度 1-30 设计的 t 表。嗯，这就是置信区间的本质，一点点的爱和实践打开了统计的美丽世界！

我想用有史以来最伟大的统计学家皮埃尔·西蒙·拉普拉斯侯爵的一句话来结束这篇文章:“**生活中最重要的问题在很大程度上实际上只是概率问题。**