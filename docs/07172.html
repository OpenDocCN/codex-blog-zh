<html>
<head>
<title>Timer in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">定时器抖动</h1>
<blockquote>原文：<a href="https://medium.com/codex/resend-otp-timer-dd0d899a424f?source=collection_archive---------2-----------------------#2022-06-03">https://medium.com/codex/resend-otp-timer-dd0d899a424f?source=collection_archive---------2-----------------------#2022-06-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="fb6e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">移动或电子邮件验证在让真正的用户进入系统方面发挥了重要作用。没有验证，我们可能无法获得关于用户的正确信息，这将影响我们项目中真正用户的质量。因此，这里我们要设计一个漂亮的UI或者验证Otp屏幕。</p><p id="defa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">包括获得经过验证的真实信息，控制我们的移动应用程序向我们的服务器请求响应的次数也很重要。当系统越来越大，用户数量越来越多，移动应用程序和服务器之间的通信也越来越多。</p><p id="b083" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，为了控制用户的移动应用程序访问服务器的数量，我们在应用程序中迈出了重要的一小步，即限制用户在一定时间内请求OTP响应。</p><p id="f670" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在产品的开始阶段，它可能看起来不那么重要，但它在限制服务器请求方面也起着重要作用。</p><p id="f606" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们的应用程序的输出如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/667eb46cc0b257b0391c2c9f73188277.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*wCdlKSeu8F6K1idr_Vuxaw.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">工作应用程序演示</figcaption></figure><p id="054e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在编码之前，首先，让我们讨论一下我们将用于OTP字段的漂亮UI和动画的包。</p><p id="65c0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个项目中，我们将使用<a class="ae jp" href="https://pub.dev/packages/pin_code_fields" rel="noopener ugc nofollow" target="_blank"> pin_code_fields </a>。你也可以根据自己的需要定制这个包。</p><h1 id="7034" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">好吧，让我们深入进去。</h1><p id="55fd" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">首先，让我们将这个包添加到<strong class="ih hj">publibsec . YAML</strong>文件中。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="c159" class="ky jr hi ku b fi kz la l lb lc">pin_code_fields: ^7.4.0</span></pre><p id="8281" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">之后，让我们定义我们的主题颜色，以及我们将在应用程序中使用的错误颜色。不一定要创建一个单独的文件来保存我们的颜色或其他常量值，比如文本、字符串、样式和装饰。但是当我们的项目变得更大时，我们在一类文件中的代码长度也变得更大，这使得我们的工作变得更慢和不整洁。</p><p id="c8a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，最好为相似的东西创建单独的文件或类，以保持代码整洁、干净和可理解。</p><p id="fcf4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建一个名为<strong class="ih hj"> my_theme.dart. </strong>的文件，如上所述，我们将在这个项目中使用颜色和主题。</p><p id="51fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们首先创建一个类，将我们的十六进制颜色转换成材质颜色。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="709a" class="ky jr hi ku b fi kz la l lb lc">class HexColor extends Color {  <br/>static int _getColorFromHex(String hexColor) {<br/>    hexColor = hexColor.toUpperCase().replaceAll("#", "");<br/>    if (hexColor.length == 6) {<br/>      hexColor = "FF$hexColor";<br/>    }<br/>    return int.parse(hexColor, radix: 16);  <br/>}   <br/>HexColor(final String hexColor) : super(_getColorFromHex(hexColor));<br/>}</span></pre><p id="b102" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们宣布我们的颜色为</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="905e" class="ky jr hi ku b fi kz la l lb lc">static Color themeColor = HexColor('#2F3131');</span></pre><p id="7638" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> my_theme.dart </strong>如下:</p><p id="7911" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"><em class="ld">my _ theme . dart</em></strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="3cbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们创建一个按钮，作为一个可重用的小部件。</p><p id="71d9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> lib </strong>文件夹中创建一个<strong class="ih hj"> custom_button.dart </strong>文件。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="4e33" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在创建了我们的实用程序和小部件之后。我们现在创建我们的<strong class="ih hj"> Otp屏幕。</strong></p><p id="dbbf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在lib文件夹中创建otp_screen.dart。</p><p id="b2b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这个屏幕中，我们创建了一个方法，当我们单击<strong class="ih hj">重新发送按钮</strong>时，该方法将被执行。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="d68d" class="ky jr hi ku b fi kz la l lb lc">void startTimer() {<br/>    const oneSec = Duration(seconds: 1);<br/>    _timer = Timer.periodic(<br/>      oneSec,<br/>      (Timer timer) <br/>{        if (_start == 0) {<br/>          setState(() {<br/>            timer.cancel();<br/>            isLoading = false;<br/>          });<br/>        } else {<br/>          setState(() {<br/>            _start--; <br/>         });<br/>        } <br/>     },<br/>    );<br/>  }</span></pre><p id="c72e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们的屏幕加载时，我们首先调用函数。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="492a" class="ky jr hi ku b fi kz la l lb lc">@override<br/>  void initState() {<br/>    super.initState();<br/>    errorController = StreamController&lt;ErrorAnimationType&gt;();          startTimer();<br/>  }</span></pre><p id="ddef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们如下处置我们的定时器:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="67cd" class="ky jr hi ku b fi kz la l lb lc">@override<br/>  void dispose() {<br/>    super.dispose();<br/>    _timer.cancel();<br/>    errorController!.close();<br/>  }</span></pre><p id="fded" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终<strong class="ih hj"> otp_screen.dart </strong>看起来如下:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="3ac7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后我们的主镖</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><h1 id="797f" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">让我们连接起来</h1><p id="6b3b" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">我们可以成为朋友。在<a class="ae jp" href="https://www.facebook.com/nabin.dhakal.714/" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae jp" href="https://www.linkedin.com/in/nabindhakal/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>、<a class="ae jp" href="https://github.com/nbnD" rel="noopener ugc nofollow" target="_blank"> Github </a>、<a class="ae jp" href="https://www.youtube.com/channel/UCW6oYt_3QSl7J2HSHNqwXWw" rel="noopener ugc nofollow" target="_blank"> Youtube </a>、<a class="ae jp" href="https://www.buymeacoffee.com/nabindhakal" rel="noopener ugc nofollow" target="_blank"> BuyMeACoffee </a>和<a class="ae jp" href="https://www.instagram.com/nbn_d_/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上查找。</p><p id="64cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">访问:<a class="ae jp" href="https://flutterjunction.com/" rel="noopener ugc nofollow" target="_blank">颤振连接</a></p><p id="01b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">投稿:</strong> <a class="ae jp" href="https://www.buymeacoffee.com/nabindhakal" rel="noopener ugc nofollow" target="_blank"> BuyMeACoffee </a></p><h1 id="cd91" class="jq jr hi bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="483f" class="pw-post-body-paragraph if ig hi ih b ii ko ik il im kp io ip iq kq is it iu kr iw ix iy ks ja jb jc hb bi translated">希望这篇文章对你有所帮助，让你学到新的东西。我在这篇文章中使用了一些对你们中的一些人来说可能是新的东西。</p><p id="f930" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你学到了新的东西或者想提出一些建议，请在评论中告诉我。</p><p id="7c0a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，请点击👏图标，为您提供传递所有新事物的动力。</p><p id="7018" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，关注令人兴奋的文章和项目的更新。</p><p id="adef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过分享来学习对学习过程有很大的影响，并使社区越来越大。</p><p id="61a8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分享是吸引其他爱好者的磁石。</p><p id="dfa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，让我们朝着扩大我们的学习社区迈出一小步。</p><p id="0538" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与你的朋友分享这篇文章，或者如果你喜欢这篇文章，就在推特上发表。</p><p id="ad08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">在</strong>获得满</p><div class="lg lh ez fb li lj"><a href="https://github.com/nbnD/resend_otp_timer" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hj fi z dy lo ea eb lp ed ef hh bi translated">GitHub - nbnD/resend_otp_timer</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">github.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx jj lj"/></div></div></a></div></div></div>    
</body>
</html>