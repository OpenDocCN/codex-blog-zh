<html>
<head>
<title>Part 2: The Evolution of Data Pipeline Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第2部分:数据管道架构的发展</h1>
<blockquote>原文：<a href="https://medium.com/codex/part-2-the-evolution-of-data-pipeline-architecture-1ee1cef91c40?source=collection_archive---------2-----------------------#2021-07-05">https://medium.com/codex/part-2-the-evolution-of-data-pipeline-architecture-1ee1cef91c40?source=collection_archive---------2-----------------------#2021-07-05</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/7c75a035d444f7999bb9e808422a4eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fx4Nl2izNgl4FXBF7kBEUg.png"/></div></div></figure><p id="ad8c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在本系列的第1部分中，我们描述了一个构建当今业界常用的数据管道的高级架构。在本帖中，我们将回顾市场和可用技术方面发生的一些变化。考虑到这些变化，我们将提出一个新的架构来解决我们在第1部分中提到的问题。</p><h1 id="b48d" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">新范式</h1><p id="17f2" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">过去五年发生的某些事情创造了一个可以重新发明数据管道的环境。</p><p id="d350" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们感兴趣的主要变化有三个。</p><h1 id="464f" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">计算和存储的分离</h1><p id="6d33" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我不确定<a class="ae jo" href="https://www.snowflake.com/" rel="noopener ugc nofollow" target="_blank">雪花</a>是否是第一个提出这种模式的公司，但他们肯定是成功使其成为主流并让市场相信其价值的公司。</p><p id="927e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过将计算与存储分离，一些令人惊讶的事情发生了。</p><ul class=""><li id="b836" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">我们几乎可以无限扩展存储。我们不再担心集群的大小和调整的停机时间。此外，存储数据的成本仅与存储相关，因此要低得多。</li><li id="b638" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">当我们只访问我们需要的数据时，我们也可以扩展我们的处理。通过这种方式，在保持低成本的同时，加工也可以扩大规模。</li></ul><p id="2cd2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">上述内容对我们处理数据的方式有着巨大的影响。我们不必再担心我们存储的数据，我们可以灵活地在需要时对大量历史数据执行复杂的转换。</p><h1 id="7c19" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">ETL到EL(T)的转换</h1><p id="4914" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">结果，数据仓库中计算和存储的分离改变了人们对ETL(提取、转换、加载)的看法。</p><p id="9fff" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">聪明的人很快意识到，现在我们不必实现复杂的ETL管道，其中大量的转换应用于数据。相反，我们可以通过移除转换并将其卸载到数据仓库来简化复杂的工程机制。</p><p id="6a2f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">为什么这很重要？</p><ul class=""><li id="4b7e" class="ks kt hi is b it iu ix iy jb ku jf kv jj kw jn kx ky kz la bi translated">尽管ETL听起来像是复制数据，但它并不像听起来那样是一个简单的工程问题。尤其是如果你想在分布式环境中大规模地做这件事。通过从ETL中移除处理，我们可以专注于构建超级弹性和一致的数据管道，并一劳永逸地解决这个问题。</li><li id="c413" class="ks kt hi is b it lb ix lc jb ld jf le jj lf jn kx ky kz la bi translated">现在，我们可以创建一个单一的数据来源，并在不丢失原始数据的情况下，根据我们的需要进行尽可能多的破坏性转换。我们随时可以回到过去，重新改变一切。</li></ul><p id="7c94" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们有原始的数据和资源来进行低成本和大规模的研究。</p><h1 id="43ce" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">数据平台比以往任何时候都更具表现力</h1><p id="f7f7" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我相信你已经听说过<a class="ae jo" href="https://www.getdbt.com/" rel="noopener ugc nofollow" target="_blank"> DBT </a>(数据构建工具)以及数据工程师和分析师对它的喜爱。那么<a class="ae jo" href="https://materialize.com/" rel="noopener ugc nofollow" target="_blank">物化</a>呢？</p><p id="e40a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些工具只是数据工程师、分析师和数据科学家今天可以使用的一组新工具中的一小部分。</p><p id="7f73" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些工具也证明了数据平台的发展趋势。数据平台从简单的SQL查询引擎开始。现在不是这样的了。它们已经成熟，并成为复杂的处理引擎，能够通过遵循工程为交付产品开发的所有最佳实践以及版本控制和测试等实践来部署和执行极其复杂的处理逻辑。</p><h1 id="dbd7" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">把所有的拼图拼在一起</h1><p id="aa59" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">上述所有要点都表明，是时候重新思考我们如何开发和实现数据管道了，最重要的是，我们希望如何管理数据管道负责复制的状态。</p><p id="18b3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">应该放弃只保留最新数据状态的范例，我们应该遵循更接近软件工程中称为“事件源”的模式</p><p id="7b89" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过这样做，管道存储状态改变事件的序列或流，而不是复制源系统和数据仓库或数据湖之间的状态。</p><p id="f9e1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这不是数据仓库中的新概念。在数据仓库体系结构中，人们总是认为跟踪数据的变化非常重要。有数据仓库经验的人都会知道<a class="ae jo" href="https://www.oracle.com/webfolder/technetwork/tutorials/obe/db/10g/r2/owb/owb10gr2_gs/owb/lesson3/slowlychangingdimensions.htm" rel="noopener ugc nofollow" target="_blank"> <strong class="is hj">缓变维度</strong> </a> <strong class="is hj"> (SCD) </strong> <em class="lg">这个术语。</em></p><p id="5d4c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">已经发明了不同的SCD策略。我们之前描述的数据管道的第一个架构实际上是类型1 SCD策略的一个例子。这种特殊的策略规定旧数据被新数据覆盖。</p><p id="98b0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果您曾经使用过Salesforce，您可能知道每个Salesforce对象都附带了一个名为“History”的伴随对象。这是SCD运行的另一个例子。这次我们在实践中看到的是4型SCD。我们保留主对象，用新数据覆盖旧数据，同时，我们保留一个历史表，记录所有的更改。与大多数情况一样，在Salesforce中，历史数据也有一个保留期，在此之后，我们会删除旧数据，仅保留新数据。</p><h1 id="9590" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">影响巨大的小变化</h1><p id="2967" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">数据管道的架构不需要做很大的改变，但是这些小的改变简化了它们的逻辑，并且对我们处理数据的方式有很大的影响。</p><p id="6739" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们所要做的就是删除数据管道必须跟踪的逻辑——系统B上已经存在的逻辑——并用系统a上观察到的任何更新来更新它。</p><p id="6b2a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这样，管道变得更加简单，正如我们看到的ETL到ELT，我们可以更加关注它们的弹性和一致性。这种方法还可以大大减少延迟，因为消除重复数据的复杂逻辑不再存在。</p><p id="049c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">与此同时，目标存储系统上计算和处理的分离使我们能够保持数据所经历的变化的无限序列。如果我们聪明地处理数据，我们可能永远不会删除旧数据。</p><p id="9a0b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在这一系列的状态改变事件之上，我们可以使用像DBT和物化这样的工具来重建我们数据的当前最终状态，或者完全转换我们的数据并在其上构建数据应用程序。</p><p id="5476" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">如果我们想实施不同的SDC战略，现在我们可以做到这一点。如果我们希望在未来不丢失任何数据的情况下，我们甚至可以改变我们实施的策略。</p><p id="65aa" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们不再需要处理两种不同的数据模型。相反，现在一切都可以作为事件流来处理。我们可以使用处理系统始终重建最终状态并使其始终可用，但同时，我们可以使用流处理框架来添加更多由我们的数据基础架构支持的用例。</p><p id="dea2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最重要的是，现在我们可以在任何时间点访问我们需要的所有数据，并且我们可以支持我们所有可能的用例。我们的数据分析师和数据科学家会一直很高兴，我们可以以可预测的成本为他们提供大规模支持。</p><h1 id="f714" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">最后的想法</h1><p id="285a" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">我们可以对我们的软件架构进行一些小的改动，这些改动会对我们能做什么和如何做产生巨大的影响。</p><p id="ea3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">作为现代数据基础设施支柱之一的数据管道也是如此。仅仅改变我们将状态从一个系统复制到另一个系统的方式，就可以对我们设计的系统的性能和功能产生惊人的影响。</p><p id="d0be" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当然，要做到这一点，行业必须发生巨大的变化。正如我们所看到的，如果我们存储和处理数据的方式没有一些重大的改变，我们就不可能如此容易地重新思考我们的架构。</p><p id="fc00" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然而，并不是所有的问题都解决了。我们必须处理的数据来源的复杂性正在增加，尽管我们已经为其中一些提供了解决方案(例如，CDC的数据库)，但我们如何与其他系统(包括云应用程序)有效交互仍是一项正在进行的工作。</p><h1 id="8255" class="jp jq hi bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">免费注册并开始发送数据</h1><p id="ea7b" class="pw-post-body-paragraph iq ir hi is b it kn iv iw ix ko iz ja jb kp jd je jf kq jh ji jj kr jl jm jn hb bi translated">测试我们的事件流、ELT和反向ETL管道。使用我们的HTTP源在不到5分钟的时间内发送数据，或者在您的网站或应用程序中安装我们12个SDK中的一个。<a class="ae jo" href="https://app.rudderlabs.com/signup?type=freetrial" rel="noopener ugc nofollow" target="_blank">入门</a>。</p><p id="a88a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">本博客最初发表于:<br/><a class="ae jo" href="https://rudderstack.com/blog/part-2-the-evolution-of-data-pipeline-architecture" rel="noopener ugc nofollow" target="_blank">https://rudder stack . com/blog/part-2-the-evolution-of-data-pipeline-architecture</a></p></div></div>    
</body>
</html>