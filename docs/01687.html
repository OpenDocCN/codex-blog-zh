<html>
<head>
<title>Visualizing Covid-19 PostgreSQL Data With Arctype</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Arctype可视化新冠肺炎PostgreSQL数据</h1>
<blockquote>原文：<a href="https://medium.com/codex/visualizing-covid-19-postgresql-data-with-arctype-9630c59d5691?source=collection_archive---------16-----------------------#2021-05-20">https://medium.com/codex/visualizing-covid-19-postgresql-data-with-arctype-9630c59d5691?source=collection_archive---------16-----------------------#2021-05-20</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/3cf2bf904d231dddc0314273a6a45b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_uSGIVFJy3Fac0rPHsFlig.png"/></div></div></figure><h1 id="2f73" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">介绍</h1><p id="aa00" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">作为技术领域中增长最快的行业之一的竞争对手，数据分析公司一直在努力寻找更快、更可靠地将原始SQL查询转换为有效可视化的方法。可以说，在当今日益复杂的数据世界中，可视化是一项非常受欢迎的技能。虽然在外人看来这可能听起来微不足道，但分析师知道这通常绝非易事。</p><p id="0cda" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">数据分析师和软件工程师花时间搜索和过滤多个数据源，然后为关键时刻准备好数据——可视化数据。数据可视化是所有数据处理工作的顶点——它们应该采用长数字列表和复杂的KPI，并以直观、易于理解的方式呈现它们。也就是说，如果您为数据选择了正确的可视化工具。</p><p id="d30a" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">这带来了一个潜在的问题。由于数据可视化的质量通常取决于用来创建它们的工具，我们如何确保为我们的数据选择正确的可视化工具呢？我们的目标是比较价值观还是分析趋势？可视化您的数据的最佳方式是什么，以便于提取见解？</p><p id="c036" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在本文中，我们将演示任何以数据为中心的团队或个人如何使用Arctype作为SQL工具来过滤、获取和直观地可视化数据，从而提供对建议数据的更深入的了解。最精彩的部分？我们将使用真实的新冠肺炎数据集来做这件事。</p><p id="45fc" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">注意:本文不是介绍性的，因此假设您已经熟悉任何数据库，如Postgres或MySQL。</p><h1 id="23cf" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">数据可视化的重要性</h1><p id="a4f9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">数据可视化通过数据的交互式可视化表示对组织的决策过程产生积极影响。企业现在可以更快地识别模式，因为他们可以用图形或图像的形式解释数据。以下是数据可视化对组织有益的一些更具体的方式:</p><ul class=""><li id="3fbb" class="kr ks hi jq b jr km jv kn jz kt kd ku kh kv kl kw kx ky kz bi translated">关系中的相关性:没有数据可视化，很难识别独立变量之间可能存在的相关性。通过理解这些独立变量，我们可以做出更好的商业决策。</li><li id="5695" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">审视市场:数据可视化从不同的市场获取信息，让我们更好地了解受众——不仅关注哪些受众，还关注哪些受众应该回避。通过在图表上显示相关数据，我们可以更清楚地了解这些市场中的机会。</li><li id="2fc2" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">风险和回报:在没有可视化的情况下查看价值和风险度量需要更多的专业知识，因为充满数字的电子表格本来就更难理解。一旦信息可视化，我们就可以很容易地确定需要或不需要采取行动的领域。</li><li id="4e93" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">对市场做出反应:通过在功能仪表板上清晰显示数据，快速、轻松地获取信息的能力使企业能够迅速采取行动并对调查结果做出反应，从而帮助他们避免犯错。</li><li id="f98f" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">一段时间内的趋势:虽然这似乎是数据可视化的一个明显的用途，但它也是最实际的应用之一。没有过去和现在的必要信息，就不可能做出预测。随着时间的推移，趋势会告诉我们已经达到了什么程度，以及我们可能会达到什么程度。</li><li id="f348" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated">频率:与趋势密切相关的是频率。考察顾客购买的频率和时间，可以让我们更好地了解潜在新顾客对不同营销和顾客获取策略的反应。</li></ul><p id="fe9e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">面向开发人员和teamsTry Arctype的快速易用的SQL客户端</p><h1 id="ef0e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">将SQL查询结果转换成图表</h1><p id="0033" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">在本文中，我们将利用<a class="ae lf" href="https://arctype.com/" rel="noopener ugc nofollow" target="_blank"> Arctype </a>的魅力。Arctype支持所有类型的图表-从条形图和折线图到更专业的类型，如热图甚至饼图。它还有一个功能，可以让您轻松地将图表转换成表格，反之亦然。为了减少这个过程的难度，我们将把它分成不同的步骤。现在，让我们开始有趣的事情吧！💪🏻</p><h1 id="a1f1" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">步骤Arctype入门</h1><p id="6bcc" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">出于本指南的目的，我们将对Arctype上公开提供的冠状病毒相关数据集进行分析和可视化。首先，我们需要下载并注册Arctype。登录后，我们将选择演示工作区，并选择<code class="du lg lh li lj b">Covid DB</code>作为我们的数据源。最初，视图面板应该如下所示:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/06257e9c22e1f9870bcf84b8b95eefc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e-f8mT9MWSzMwX7Y.png"/></div></div></figure><h1 id="5bc9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">步骤2:使用SQL查询获取图表数据</h1><p id="dea6" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">首先，点击<code class="du lg lh li lj b">create a new query</code>按钮。Arctype将为我们新创建的查询自动打开一个SQL编辑器选项卡。首先，让我们看看数据集中人口最多的前10个城市。为此，我们可以运行如下查询:<br/> <code class="du lg lh li lj b">SELECT * FROM us_cities order by us_cities.population DESC LIMIT 10</code></p><p id="e5a9" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">我们的结果应该是这样的:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/960624076c7f61e2fa5205d81845df44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7c1j2iQdIqNB4p4f.png"/></div></div></figure><h1 id="2760" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">步骤3:为SQL查询结果创建可视化图表</h1><p id="9037" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">现在我们已经能够查询我们的首选表(<code class="du lg lh li lj b">us_cities</code>)，让我们开始显示不同查询结果的图表。</p><p id="0aad" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">为此，首先从查询视图顶部的工具栏中选择<code class="du lg lh li lj b">chart</code>。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/92bcc4706594c78d140a836b94b84fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wfU5gFlm90dLSElc.png"/></div></div></figure><p id="2964" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在右侧边栏中，从列表中选择所需的图表类型，然后拖动列来表示图表的x轴和y轴。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/5cbb29de6117b63d0cebc2190a3171cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/0*iMNuxe6I4B7DOmXe.png"/></div></figure><p id="aa36" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">注意:x轴和y轴都表示查询结果中的列。</p><h1 id="1283" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用条形图显示各州的新冠肺炎案例</h1><p id="68ef" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">让我们看看在特定日期美国新冠肺炎病例最多的10个州，并制作一个条形图。</p><pre class="ll lm ln lo fd lq lj lr ls aw lt bi"><span id="1035" class="lu ir hi lj b fi lv lw l lx ly">SELECT<br/>  us_cities.state,<br/>  SUM(us_confirmed_cases.num_cases) as "Cases"<br/>FROM<br/>  us_confirmed_cases<br/>  RIGHT JOIN us_cities ON us_cities.id = us_confirmed_cases.city_id<br/>WHERE {{input_date}} = to_char(us_confirmed_cases.date, 'yyyy-mm-dd')<br/>GROUP BY us_cities.state<br/>ORDER BY<br/>  SUM(us_confirmed_cases.num_cases) DESC LIMIT 30;</span></pre><p id="b89d" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">如您所见，我们正在创建一个名为“input_date”的查询变量，这将在右侧栏中引入一个输入框。这里，您需要以“yyyy-mm-dd”格式输入一个日期，以便查询可以返回结果。对于这个例子，我选择了2020年12月15日——美国记录在案的感染人数最多的月份的中间。</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div class="er es lz"><img src="../Images/68e7cfef513541bd5dd25a3755b4f7c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/0*6bVzt7wU5wEhfrpl.png"/></div></figure><p id="20c9" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">输入一个日期，然后按照上面的步骤创建一个条形图，这就是我们的数据的样子:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/3c13f405272935984c3aba7490d8a9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J59o1h9sKdHf9m3n.png"/></div></div></figure><p id="f2e1" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">注意:为了显示较长的州名(如宾夕法尼亚州)，x轴标签需要是垂直的</p><h1 id="e740" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用饼图和圆环图按州分解新冠肺炎病例</h1><p id="09d9" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">使用上面的条形图示例查询的结果，如果我们将图表类型更改为饼图，它看起来会是这样:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/192ab1a4d8ebf22bf498e91cc8fe09d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J4CbObi_EFa7nSN4.png"/></div></div></figure><p id="2c03" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">同样，我们可以为这些结果创建一个圆环图:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ma"><img src="../Images/1a1a58d1528840b3c2f56e4c344e8c3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zhLviqLJxcm-r4vs.png"/></div></div></figure><h1 id="1cb2" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">使用折线图追踪一段时间内的新冠肺炎死亡人数</h1><p id="65fc" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">让我们看看2020年9月1日至12月15日期间，美国因新冠肺炎病毒导致的总死亡人数是如何增加的。这个查询应该给我们提供数据:</p><pre class="ll lm ln lo fd lq lj lr ls aw lt bi"><span id="3916" class="lu ir hi lj b fi lv lw l lx ly">SELECT<br/>  to_char(date, 'yyyy-mm-dd'),<br/>  SUM(num_deaths)<br/>FROM<br/>  us_deaths<br/>WHERE<br/>  us_deaths.date BETWEEN '2020-09-01T23:00:00.000Z'<br/>  AND '2020-12-15T23:00:00.000Z'<br/>GROUP BY<br/>  date;</span></pre><p id="4f13" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">现在，只需从图表类型中选择“折线图”，将日期列拖到x轴，将SUM()列拖到y轴:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/73289be715718d63668fd41d3e691e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EGtCfVKmZFoYKG3s.png"/></div></div></figure><h1 id="f4c9" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">构建一个热图来可视化G20国家每天的新冠肺炎死亡人数</h1><p id="e88d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">热点图可能是目前Arctype客户端中提供的最强大、最动态的可视化工具。因为这些图表往往在大型3D数据集中非常出色，所以让我们建立一个记录每个G20国家按日期计算的新增新冠肺炎死亡人数的图表。为此，我们需要一个类似如下的查询:</p><pre class="ll lm ln lo fd lq lj lr ls aw lt bi"><span id="fa0b" class="lu ir hi lj b fi lv lw l lx ly">SELECT<br/>  global_states.country,<br/>  to_char(global_deaths.date, 'mm-dd-yyyy') AS date,<br/>  SUM(global_deaths.num_deaths) - COALESCE(<br/>    LAG(SUM(global_deaths.num_deaths)) OVER (<br/>      PARTITION BY global_states.country<br/>      ORDER BY<br/>        to_char(global_deaths.date, 'mm-dd-yyyy')<br/>    ),<br/>    0<br/>  ) AS new_deaths<br/>FROM<br/>  global_deaths<br/>  RIGHT JOIN global_states ON global_states.id = global_deaths.state_id<br/>WHERE<br/>  global_states.country IN(<br/>      'Argentina','Australia','Brazil','Canada',<br/>      'China','France','Germany','India',<br/>      'Indonesia','Italy','Japan','Korea, South',<br/>      'Mexico','Russia','Saudi Arabia','South Africa',<br/>      'Turkey','United Kingdom','US'<br/>      ) AND<br/>  global_deaths.date BETWEEN '2020-03-15T23:00:00.000Z'<br/>  AND '2020-05-01T23:00:00.000Z'<br/>GROUP BY<br/>  to_char(global_deaths.date, 'mm-dd-yyyy'),<br/>  global_states.country<br/>ORDER BY<br/>  to_char(global_deaths.date, 'mm-dd-yyyy'),<br/>  global_states.country OFFSET 19;</span></pre><p id="ef3e" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">在我们查看这些结果的热图之前，让我们解释一下这个(相当复杂的)查询。您可能已经注意到了，<code class="du lg lh li lj b">global_deaths</code>中的<code class="du lg lh li lj b">num_deaths</code>列是累积的。这意味着为了找到某一天的新死亡人数，我们需要减去前一天的总数。我们仍然需要使用<code class="du lg lh li lj b">SUM()</code>,因为有些国家是按地区或省份划分的，因此会占用多行。此外，由于有限的屏幕空间，我们将选择范围缩小到46天(3月15日至5月1日)。最后，因为我们的<code class="du lg lh li lj b">LAG()</code>函数假设在开始日期之前累积的所有死亡都是当天的新死亡，所以我们需要用19(G20中的国家数，sans-EU)来抵消我们的结果。</p><p id="0e67" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">唷！解决了这个问题，让我们来看看热图！我们把日期放在x轴上，国家放在y轴上，死亡人数放在z轴上。它看起来是这样的:</p><figure class="ll lm ln lo fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lk"><img src="../Images/9e996f4ab587282ce86eab6c4db36d49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DAkBtyLUqkxUXURp.png"/></div></div></figure><p id="7998" class="pw-post-body-paragraph jo jp hi jq b jr km jt ju jv kn jx jy jz ko kb kc kd kp kf kg kh kq kj kk kl hb bi translated">正如您可能知道的那样，这种热图可视化中的数据几乎不可能以原始形式进行解释，但像这样显示，发现趋势和异常变得非常容易。</p><h1 id="783e" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">结论</h1><p id="3135" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">数据库可视化对于确保所有数据集的直观显示至关重要。这篇简明的文章介绍了如何轻松地可视化数据集，最大限度地利用Arctype的图表功能来探索新冠肺炎的深远影响。</p><h1 id="0c8c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">资源</h1><ul class=""><li id="b405" class="kr ks hi jq b jr js jv jw jz mb kd mc kh md kl kw kx ky kz bi translated"><a class="ae lf" href="https://docs.arctype.com/getting-started/connecting-to-a-database" rel="noopener ugc nofollow" target="_blank">连接到数据库</a> — Arctype</li><li id="e002" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><a class="ae lf" href="https://docs.arctype.com/qeries/importing-a-csv" rel="noopener ugc nofollow" target="_blank">导入CSV </a> — Arctype</li><li id="43e5" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><a class="ae lf" href="https://docs.arctype.com/dashboards/working-with-charts" rel="noopener ugc nofollow" target="_blank">使用图表</a> — Arctype</li><li id="5a8e" class="kr ks hi jq b jr la jv lb jz lc kd ld kh le kl kw kx ky kz bi translated"><a class="ae lf" href="https://splashbi.com/importance-purpose-benefit-of-data-visualization-tools/" rel="noopener ugc nofollow" target="_blank">数据可视化工具的重要性、用途和优势</a> — SlashBI</li></ul></div></div>    
</body>
</html>