<html>
<head>
<title>Dark Mode Rises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑暗模式上升</h1>
<blockquote>原文：<a href="https://medium.com/codex/dark-mode-rises-8068d8892efa?source=collection_archive---------13-----------------------#2021-09-21">https://medium.com/codex/dark-mode-rises-8068d8892efa?source=collection_archive---------13-----------------------#2021-09-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="e93c" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">这是一个初学者分步指南，介绍如何使用Rob Morieson的CSS变量技术，在Next.js应用程序中使用Styled-components实现黑暗模式，而不使用“刷新闪烁”。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/e1e24a57d2941dd1536f694a2948b514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UY5mEHkSDMwqEIHm"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@serge_k?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">谢尔盖·库图佐夫</a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="0900" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">关于如何在网站上实现黑暗模式，有大量的博客文章。(不只是在Next.js one上)。当我在我的站点上添加这个特性之前研究这个主题的时候。我偶然发现了Rob Morieson的文章<a class="ae jn" href="https://electricanimals.com/articles/next-js-dark-mode-toggle" rel="noopener ugc nofollow" target="_blank">并喜欢他的方法。我决定在我的博客上写下他的技术的实现和我的小调整。</a></p><p id="6fa2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我不打算解释什么是<code class="du kk kl km kn b">a dark mode</code>或者为什么你想把它添加到你的网站上。无论是设计选择、节能考虑，还是尊重用户的偏好。我们假设你想要它。</p><p id="4784" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">虽然黑暗模式的切换表面上看起来很简单，但只用纯CSS就可以完成。然而，如果你考虑到可访问性，然后进一步如果设备或浏览器支持，我们应该致力于在初始加载时显示用户的首选主题，并保存他们的偏好，如果他们决定切换主题。</p><p id="51d4" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">由于这篇博客的副标题是关于<a class="ae jn" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>的实现，我们首先需要谈谈如何绕过<code class="du kk kl km kn b">server side rendering(SSR)</code>的约束，以及Next.js应用程序是如何被水合的。</p><p id="9817" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这只是一个简单的教程，绝不是一个全面的帖子(参见最后的链接，深入了解黑暗模式)。</p><p id="00fa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果你只是想看完整的代码，请点击这里查看我在GitHub上的回购</p><h1 id="f393" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">让我们开始吧</h1><h1 id="e217" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">初始设置</h1><p id="5d5b" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">我将为由<code class="du kk kl km kn b">create-next-app</code>用StyledComponents创建的Next.js项目使用一个样板文件。</p><pre class="iy iz ja jb fd ll kn lm ln aw lo bi"><span id="cc3a" class="lp kp hi kn b fi lq lr l ls lt">npx create-next-app --example with-styled-components with-styled-components-app</span></pre><p id="fdef" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">基本的create-next-app提供了一个全局CSS文件，这是为暗模式和亮模式定义CSS变量的最佳位置。然而，带有样式化组件的引导示例并没有为我们提供一个全局CSS文件，我们可以利用样式化组件<code class="du kk kl km kn b">createGlobalStyle function</code>。</p><p id="4c67" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">尽管我们将使用StyledComponents进行一些样式设计，但对于我们的黑暗主题挑战，我们将冒险使用CSS变量。这种方法背后的原因将在后面解释。</p><h2 id="141d" class="lp kp hi bd kq lu lv lw ku lx ly lz ky jx ma mb la kb mc md lc kf me mf le mg bi translated">createGlobalStyle</h2><p id="3521" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">createGlobalStyle是一个助手函数，它将生成一个处理全局样式的特殊StyledComponent。通常情况下，样式化组件的作用域自动限定在一个本地CSS类中，因此与其他组件隔离开来。在createGlobalStyle的情况下，这种限制被消除，可以应用CSS重置或基本样式表之类的东西。</p><p id="7c08" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><code class="du kk kl km kn b">createGlobalStyle</code>返回不接受子级的StyledComponent。将它放在React树的顶部，当组件被“渲染”时，全局样式将被注入。</p><p id="976c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在根目录下创建一个<code class="du kk kl km kn b">styles folder</code>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="c789" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后导入到<code class="du kk kl km kn b">_app.js</code></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="0779" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们为我们的黑暗模式主题添加一些样式。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="09f9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">你可能已经从上面的CSS中猜到了，我们将通过对<code class="du kk kl km kn b">&lt;body&gt;</code>标签应用<code class="du kk kl km kn b">data-theme attribute</code>来切换主题，而不是传统的<code class="du kk kl km kn b">ThemeProvider</code>方法。</p><p id="5c93" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我应该指出，我见过将它应用于<code class="du kk kl km kn b">&lt;html&gt;</code>标签而不是主体的方法。感谢<a class="ae jn" href="https://electricanimals.com/" rel="noopener ugc nofollow" target="_blank"> Rob Morieson </a>(这篇文章深受其启发)和<a class="ae jn" href="https://epicreact.dev/css-variables/" rel="noopener ugc nofollow" target="_blank"> Kent C. Dodds </a>向ThemeProvider解释了使用CSS变量的区别。</p><p id="d6ff" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">CSS方法的要点是，如果我们要使用StyledComponents提供的<code class="du kk kl km kn b">ThemeProvider</code>，它在幕后使用useContext钩子，我们将不得不更新每个组件的样式，然后浏览器将不得不绘制这些更新。</p><p id="88e9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">但是使用CSS变量方法，我们将样式更新到单个组件(主体)，然后浏览器只绘制这些更新。理论上，浏览器画图应该在浏览器上花费相同的工作量，所以唯一的区别是我们让浏览器做了多少工作来让React重新渲染我们所有的组件，并让情感更新每个组件的样式。</p><p id="8ce2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们着手构建我们的切换组件。我们将创建一个名为<code class="du kk kl km kn b">themeToggle.js</code>的新文件，并将其放在<code class="du kk kl km kn b">components directory</code>中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="078f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我使用了几个自定义的SVG图标作为我们的切换主题指示器。</p><p id="a328" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">偶像孙此刻被注释掉了。稍后将通过单击事件来显示它。</p><p id="552d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在从示例模板中移除引导内容并在<code class="du kk kl km kn b">index.js</code>中导入主题切换按钮之后。这就是我们的index.js文件的样子。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="29da" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">该任务的基本静态部分应该呈现如下内容:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/2ecb9fab5a27440b470ced21ddcb5e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVcC4HAD_Gpb9kxaDSPf1Q.jpeg"/></div></div></figure><h1 id="73f9" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">交互性</h1><p id="8cb1" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">初始的和静态的东西都不存在了，是时候添加逻辑了。我们将从React的<code class="du kk kl km kn b">useState hook</code>开始，这样我们就可以存储和更新活动主题。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="c1cd" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们的默认主题设置为“light”——我们将在后面更多地关注这一点，这将包括考虑用户的首选配色方案设置，以及使用localStorage在刷新时保持首选项的一些调整。</p><p id="9c97" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们也用onClick事件向切换按钮添加相应更新状态的功能。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="ae52" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">接下来，我们将利用React的<code class="du kk kl km kn b">useEffect hook</code>在<code class="du kk kl km kn b">&lt;body&gt; </code>标签上设置数据主题属性。将<code class="du kk kl km kn b">[activeTheme]</code>作为依赖项添加到依赖项数组中意味着它将在活动主题改变时运行。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="5214" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">最后，我们需要使用<code class="du kk kl km kn b">activeTheme</code>来有条件地呈现我们的SVG图标主题指示器</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="32c8" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们应该会得到这样的结果。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div class="er es mk"><img src="../Images/d6375e75fce5b9e1d3f53ad01bafa8b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*MRt-8ks4RiHqyv2n6BdIfw.gif"/></div></figure><h1 id="5347" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">易接近</h1><p id="29e6" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">可访问性是一个非常广泛的话题。对于像我这样的编码新手来说，这仍然是我需要学习的东西。</p><p id="1e41" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">有很多关于这个问题的深入的博客文章和教程。为了博客的简单起见…</p><ul class=""><li id="94c7" class="ml mm hi jq b jr js ju jv jx mn kb mo kf mp kj mq mr ms mt bi translated">对于屏幕阅读器，不要忽略焦点事件及其相关的可访问性。</li><li id="b320" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated">使用aria标签</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h1 id="7015" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">持续主题偏好</h1><p id="6e86" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">如果你选择<code class="du kk kl km kn b">'dark'</code>模式，然后点击刷新，你会注意到网站恢复到<code class="du kk kl km kn b">'light'</code>模式。由于localStorage属性，这是一个简单的修复方法。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="fc5c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">上面我们添加了一个新的<code class="du kk kl km kn b">useEffect</code>钩子，它只在挂载/卸载时运行，以检查一个名为“theme”的本地存储项目是否存在。如果是，那么我们相应地设置活动主题。我们还会在用户切换主题时更新本地存储。</p><p id="8cc2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这很好，但是如果你切换到“黑暗”模式并点击刷新，你可能会注意到在<code class="du kk kl km kn b">useEffect</code>开始之前，我们会看到一个“光”主题的闪烁。这是我们想要消除的可怕的闪烁。这是由于Next的“水合”过程，你可以在nextjs.org了解更多。</p><p id="68b7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><a class="ae jn" href="https://www.joshwcomeau.com/" rel="noopener ugc nofollow" target="_blank">乔希·w·科莫</a>在他的博客上写了一篇关于处理这种“闪烁时刻”的精彩博文<a class="ae jn" href="https://www.joshwcomeau.com/react/dark-mode/" rel="noopener ugc nofollow" target="_blank">。我见过它叫各种(屁👉不准确颜色主题的闪光)。Rob Morieson提出的从StyledComponents转移到CSS变量land的解决方案将更加简单，因为我们将利用CSS变量(与他的方法相反，我们在createGlobalStyle函数的帮助下留在styled-components中)和<code class="du kk kl km kn b">&lt;body&gt;</code>标签上的数据属性来提供主题值，但仍然有几个步骤，因此如果您想在这一点上称之为工作完成，则无需判断。好吧，也许是一些判断...刷新的那个小图标看起来不太好。</a></p><h1 id="0a9a" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">色彩方案偏好和可怕的闪光/闪烁</h1><p id="ef8d" class="pw-post-body-paragraph jo jp hi jq b jr lg ij jt ju lh im jw jx li jz ka kb lj kd ke kf lk kh ki kj hb bi translated">我们需要修改自定义的<code class="du kk kl km kn b">_document.js</code>文件，这样我们就可以在<code class="du kk kl km kn b">&lt;body&gt;</code>中注入一个<code class="du kk kl km kn b">&lt;script&gt; </code>标签。这将允许我们在Next有机会“水合”标记之前设置主题。</p><p id="0f6d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在Next识别自定义“文档”之前，您的本地服务器需要重新启动。查看Next.js <a class="ae jn" href="https://nextjs.org/docs/advanced-features/custom-document" rel="noopener ugc nofollow" target="_blank">文档</a>以了解更多关于定制“文档”页面的信息。</p><p id="862c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们将下一个方法分成几个步骤:</p><ul class=""><li id="d62e" class="ml mm hi jq b jr js ju jv jx mn kb mo kf mp kj mq mr ms mt bi translated">检查用户是否已经通过与开关交互选择了主题。</li><li id="4825" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated">如果没有，那么我们将检查他们的浏览器/设备是否有首选的配色方案集。</li><li id="9aac" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated">如果这些检查中的任何一项失败，我们将默认为默认的“轻”模式。</li><li id="caad" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated">最后，我们将上面的结果保存到<code class="du kk kl km kn b">&lt;body&gt; </code>标签的数据主题属性中</li></ul><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="c48c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">为了防止XSS攻击，React DOM在渲染之前会对任何原始JavaScript进行转义。因此，我们需要使用dangerouslySetInnerHTML属性嵌入JavaScript。在这种情况下，它是安全的，因为我们可以完全控制被注入的JavaScript。</p><p id="64e9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">既然我们将<code class="du kk kl km kn b">data-theme</code>属性设置为调用的第一顺序，我们可以返回到我们的<code class="du kk kl km kn b">ToggleTheme</code>组件并重构它是如何检索其默认值的。</p><p id="6c61" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们不再需要初始的<code class="du kk kl km kn b">useEffect</code>，相反，我们现在可以简单地用<code class="du kk kl km kn b">data-theme</code>属性的值初始化我们的<code class="du kk kl km kn b">activeTheme</code>状态。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="ad37" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">当你现在看你的页面时，你会得到一个“错误”提示<code class="du kk kl km kn b">document is not defined.</code></p><p id="cf8c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这是因为Next试图在服务器上呈现<code class="du kk kl km kn b">ToggleTheme</code>组件，它没有对<code class="du kk kl km kn b">document</code>的引用——它只对浏览器可用。</p><p id="a429" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">令人欣慰的是Next.js已经考虑到了这一点，并允许在浏览器级别动态导入某些组件，而无需SSR。</p><p id="65f3" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">让我们将我们将<code class="du kk kl km kn b">ThemeToggle</code>组件导入到<code class="du kk kl km kn b">index.js</code>页面的方式更新为“动态”方法，将<code class="du kk kl km kn b">ssr</code>设置为<code class="du kk kl km kn b">false</code>。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="9e6f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">就是这样！我们现在有了一个黑暗模式切换，它遵循一些可访问性最佳实践，在重新加载时保持不变，并考虑用户偏好的配色方案。它也不会在初次加载时出现可怕的不正确颜色的“闪光”。</p><p id="f22d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我首先要感谢罗布·莫里森和他在这个问题上的文章。我只是添加了一些调整。点击查看<a class="ae jn" href="https://electricanimals.com/articles/next-js-dark-mode-toggle" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2b24" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">只是一些旁注:</p><p id="4470" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">设计一个配色方案本身就是一个挑战。正确的对比，正确的调色板…我还在学习📚我对技术写作还是新手。🙇‍♂️</p><h1 id="102a" class="ko kp hi bd kq kr ks kt ku kv kw kx ky io kz ip la ir lb is lc iu ld iv le lf bi translated">资源</h1><ul class=""><li id="6a0d" class="ml mm hi jq b jr lg ju lh jx mz kb na kf nb kj mq mr ms mt bi translated"><a class="ae jn" href="https://css-tricks.com/a-complete-guide-to-dark-mode-on-the-web/" rel="noopener ugc nofollow" target="_blank">https://CSS-tricks . com/a-complete-guide-to-dark-mode-on-the-web/</a></li><li id="f7d4" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated"><a class="ae jn" href="https://css-tricks.com/flash-of-inaccurate-color-theme-fart/" rel="noopener ugc nofollow" target="_blank">https://CSS-tricks . com/flash-of-incorrect-color-theme-fart/</a></li><li id="c69e" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated"><a class="ae jn" href="https://mxb.dev/blog/color-theme-switcher/" rel="noopener ugc nofollow" target="_blank">https://mxb.dev/blog/color-theme-switcher/</a></li><li id="3fea" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated"><a class="ae jn" href="https://www.joshwcomeau.com/react/dark-mode/" rel="noopener ugc nofollow" target="_blank">https://www.joshwcomeau.com/react/dark-mode/</a></li><li id="f484" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated"><a class="ae jn" href="https://web.dev/prefers-color-scheme/" rel="noopener ugc nofollow" target="_blank">https://web.dev/prefers-color-scheme/</a></li><li id="d6d9" class="ml mm hi jq b jr mu ju mv jx mw kb mx kf my kj mq mr ms mt bi translated"><a class="ae jn" href="https://electricanimals.com/articles/next-js-dark-mode-toggle" rel="noopener ugc nofollow" target="_blank">https://electric animals . com/articles/next-js-dark-mode-toggle</a>/</li></ul></div><div class="ab cl nc nd gp ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="hb hc hd he hf"><p id="1074" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated"><em class="nj">原载于【https://www.justasemicolon.com】<a class="ae jn" href="https://www.justasemicolon.com/blog/dark-mode-rises" rel="noopener ugc nofollow" target="_blank"><em class="nj"/></a><em class="nj">。</em></em></p></div></div>    
</body>
</html>