<html>
<head>
<title>Hack the Boo: Evaluation Deck</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">破解Boo:评估版</h1>
<blockquote>原文：<a href="https://medium.com/codex/hack-the-boo-evaluation-deck-2cb8fab1d3f7?source=collection_archive---------30-----------------------#2022-10-29">https://medium.com/codex/hack-the-boo-evaluation-deck-2cb8fab1d3f7?source=collection_archive---------30-----------------------#2022-10-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div class="er es if"><img src="../Images/6b20a7a2eb419d7f31a93c91225c7d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*GoapBYVql7Nyi2w1sIf_jA.png"/></div></figure><p id="e90f" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">这是我写的黑客布CTF的评估甲板网络开发挑战。在这个挑战中，我们需要利用纸牌游戏中的一个漏洞。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div class="er es jk"><img src="../Images/5a794f8fc24e07925353968f7826aa59.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*AwBU5-taY0FIenBeexGNkw.png"/></div></figure><p id="f817" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">首先，我们下载文件并查看内容，我们可以看到python代码和一个docker文件来启动本地应用程序。首先，我们观察应用程序定义的路线。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jp"><img src="../Images/37932fc1d10cd62c235a8d3bfb3f2b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5AHJL7K5voVsYtCXnPXWyQ.png"/></div></div></figure><p id="d10d" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我们可以看到有两条路径，一条是针对健康的POST，另一条是针对主页面的get。后一个更有趣，我们可以看到它如何从请求中提取一系列值，并通过exec参数将它们传递给编译函数。这看起来是个坏主意，因为他们在exec调用中直接使用用户输入，这可能会导致RCE。</p><p id="3c52" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在是时候尝试操纵请求来实现RCE了。要做到这一点，我们必须操作operator参数，因为其他两个参数在执行之前被转换为整数。</p><p id="1ab4" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">最终有效载荷如下:</p><pre class="jl jm jn jo fd ju jv jw jx aw jy bi"><span id="4b22" class="jz ka hi jv b fi kb kc l kd ke">;result=str(__import__('subprocess').check_output('whoami', shell=True));+</span></pre><p id="2251" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">第一个分号是保存结果中的前一个值，以便在进行类型之间的转换时不会打扰我们，现在我们覆盖结果的值，并在其中保存对函数check输出调用的转换字符串，在本例中，我们传递的是whoami命令。最后，我们添加另一个分号来避免第二个整数的问题。我们可以看到应用程序告诉我们我们是root用户。</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kf"><img src="../Images/508e2bfd8cc5bfe258d75c614a27b48d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pme-OtKMB3RTjOZsOt_OOQ.png"/></div></div></figure><p id="dfbb" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">现在剩下的就是读旗子了:</p><figure class="jl jm jn jo fd ij er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es kg"><img src="../Images/cc127b9f5186c9a00854016f39f898db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HXI9UXFYi2GvO0ZSRJZV8Q.png"/></div></div></figure><p id="d3fd" class="pw-post-body-paragraph im in hi io b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj hb bi translated">我希望你喜欢这篇文章，并了解一些新的:D</p></div></div>    
</body>
</html>