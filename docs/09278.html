<html>
<head>
<title>React pro tip: How to manage forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React pro提示:如何管理表单</h1>
<blockquote>原文：<a href="https://medium.com/codex/react-pro-tip-how-to-manage-forms-ca99197a9800?source=collection_archive---------5-----------------------#2022-10-09">https://medium.com/codex/react-pro-tip-how-to-manage-forms-ca99197a9800?source=collection_archive---------5-----------------------#2022-10-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="f4e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您使用的是具有可变数据的web应用程序，您必须学会处理表单。在我看来，理想的用户体验是当用户看到输入字段中的实际数据时，可以通过提交按钮轻松地更新它；我将在本文中解释React应用程序中的表单更新流程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/84f7c8a865dbc8f31d9a8707d091d788.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUXJk9qydma8rgccUIrS-A.png"/></div></div></figure><p id="03ff" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">必须更新的数据必须首先从数据库中取出，我们需要一个<code class="du jp jq jr js b">state</code>来存储并显示在UI表单上。</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="a4a5" class="jx jy hi js b fi jz ka l kb kc">⬇️ <strong class="js hj">THE FIRST STEP IS DATA FETCHING</strong></span><span id="8294" class="jx jy hi js b fi kd ka l kb kc">const App = () =&gt; {</span><span id="ee1a" class="jx jy hi js b fi kd ka l kb kc">  const [<strong class="js hj">name, setName</strong>] = useState&lt;string&gt;('')<br/>  const [<strong class="js hj">email, setEmail</strong>] = useState&lt;string&gt;('')</span><span id="3eec" class="jx jy hi js b fi kd ka l kb kc">  const <strong class="js hj">getData</strong> = async () =&gt; {<br/>    const response = await fetch('url...').then((response) =&gt; response.json())<br/>    <strong class="js hj">setName</strong>(response.name)<br/>    <strong class="js hj">setEmail</strong>(response.email)<br/>  }</span><span id="fb72" class="jx jy hi js b fi kd ka l kb kc">  useEffect(() =&gt; {<br/>    <strong class="js hj">getData()</strong><br/>  }, [])</span><span id="2e2f" class="jx jy hi js b fi kd ka l kb kc">  return (<br/>    &lt;form&gt;<br/>      &lt;input type="text" <strong class="js hj">value={name}</strong> /&gt;<br/>      &lt;input type="text" <strong class="js hj">value={email}</strong> /&gt;<br/>    &lt;/form&gt;<br/>  )<br/>}</span></pre><p id="1eb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面我们定义了状态(<code class="du jp jq jr js b">name</code>，<code class="du jp jq jr js b">email</code>)，定义了一个获取数据并将数据值设置为状态的函数(<code class="du jp jq jr js b">getData</code>)，在组件(页面)呈现上运行该函数(在<code class="du jp jq jr js b">useEffect</code>)，并为呈现的输入字段传递状态值。</p><p id="6fb9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了。现在，当状态的值在输入字段中改变时，必须以某种方式修改状态。我们可以通过将状态设置函数(<code class="du jp jq jr js b">setName</code>和<code class="du jp jq jr js b">setEmail</code>)传递给带有<code class="du jp jq jr js b">event</code>参数的输入<code class="du jp jq jr js b">onChange</code> prop来实现这一点</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="06c6" class="jx jy hi js b fi jz ka l kb kc">💡 <em class="ke">event = An object always available in React components carries information on its target, in this case, the input field and it's value</em></span></pre><p id="ff67" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，我们必须更新我们的输入字段</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="7616" class="jx jy hi js b fi jz ka l kb kc">🤖 <strong class="js hj">UPDATE THE INPUT FIELDS</strong><br/>  <br/>...</span><span id="8c0d" class="jx jy hi js b fi kd ka l kb kc">return (<br/>    &lt;form&gt;<br/>      &lt;input<br/>        type="text"<br/>        value={name}<br/>        <strong class="js hj">onChange={event =&gt; setName(event.target.value)}</strong><br/>      /&gt;<br/>      &lt;input<br/>        type="text"<br/>        value={email}<br/>        <strong class="js hj">onChange={event =&gt; setEmail(event.target.value)}</strong><br/>      /&gt;<br/>    &lt;/form&gt;<br/>  )<br/>}</span></pre><p id="6a6f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们只剩下一件事要做了。创建一个提交按钮和一个更新数据库中数据的函数</p><pre class="je jf jg jh fd jt js ju jv aw jw bi"><span id="6d9f" class="jx jy hi js b fi jz ka l kb kc">💾 <strong class="js hj">CREATE A SUBMIT BUTTON AND A FUNCTION THAT RUNS ON CLICKING IT</strong></span><span id="01fa" class="jx jy hi js b fi kd ka l kb kc">...</span><span id="de34" class="jx jy hi js b fi kd ka l kb kc">const getData = async () =&gt; {<br/>   const response = await fetch('url...').then((response) =&gt; response.json())<br/>  setName(response.name)<br/>  setEmail(response.email)<br/>}</span><span id="93dc" class="jx jy hi js b fi kd ka l kb kc">useEffect(() =&gt; {<br/>  getData()<br/>}, [])</span><span id="1a73" class="jx jy hi js b fi kd ka l kb kc"><strong class="js hj">const submit = (name: string, email: string) =&gt; {<br/>  ...API or service call with name and email arguments<br/>}</strong></span><span id="2a9d" class="jx jy hi js b fi kd ka l kb kc">return(<br/>    &lt;form&gt;<br/>      &lt;input<br/>        type="text"<br/>        value={name}<br/>        onChange={event =&gt; setName(event.target.value)}<br/>      /&gt;<br/>      &lt;input<br/>        type="text"<br/>        value={email}<br/>        onChange={event =&gt; setEmail(event.target.value)}<br/>      /&gt;<br/>      <strong class="js hj">&lt;button onClick={() =&gt; submit(name, email)}&gt;<br/>        Submit<br/>      &lt;/button&gt;</strong><br/>    &lt;/form&gt;<br/>  )</span></pre><p id="0c84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以将状态作为参数传递给submit函数，因为我们总是用新的输入值来更新它们。</p><p id="c848" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">流程基本上是这样的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/6efa4c9feb15255845bdfe5db5901db9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnHKnK1tzwForaL0wtzNPw.png"/></div></div></figure><p id="0948" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在组件呈现时，我们用获取的值更新状态，不断地更新它们，在提交时，我们将它们作为提交函数的参数传递。</p></div><div class="ab cl kg kh gp ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hb hc hd he hf"><p id="a891" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">👋我希望这在你寻找新的学习材料时对你有用。感谢您花时间阅读这篇文章！如果你想在未来读到更多这样的故事，请订阅我的电子邮件列表！</p></div></div>    
</body>
</html>