<html>
<head>
<title>Capital Budgeting with Monte Carlo Simulations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中蒙特卡洛模拟的资本预算</h1>
<blockquote>原文：<a href="https://medium.com/codex/capital-budgeting-in-python-c51a19404a05?source=collection_archive---------9-----------------------#2022-03-11">https://medium.com/codex/capital-budgeting-in-python-c51a19404a05?source=collection_archive---------9-----------------------#2022-03-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><h1 id="bf8d" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="2104" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">通过资本预算，我们可以使用财务技术来评估与云迁移相关的项目和投资。</p><h1 id="4df8" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">介绍</h1><p id="fcbb" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">什么是资本预算？</p><blockquote class="kb kc kd"><p id="cb9d" class="jd je ke jf b jg kf ji jj jk kg jm jn kh ki jq jr kj kk ju jv kl km jy jz ka hb bi translated"><em class="hi">资本预算是企业对潜在的重大项目或投资进行评估的过程[ </em> <a class="ae kn" href="https://www.investopedia.com/terms/c/capitalbudgeting.asp" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> 1 </em> </a> <em class="hi"> ]。</em></p></blockquote><p id="9a95" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">资本预算是一种必要的罪恶；不幸的是，在分析领域，我们往往会忽略这种类型的分析。更糟糕的是，在Google Sheets或MacOS Numbers上运行蒙特卡洛模拟似乎完全不可能。虽然有一个方便的Excel执行蒙特卡洛模拟的插件，在这里找到了<a class="ae kn" href="https://www.crystalballservices.com/Store/Oracle-Crystal-Ball/Crystal-Ball-Standard" rel="noopener ugc nofollow" target="_blank"/>，但我似乎找不到类似的谷歌工作表或数字。</p><h1 id="89cd" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">什么是资本预算？</h1><p id="cc76" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">既然我们有了上面的定义，让我们来分解一下什么是资本预算以及为什么我们需要这样做。我们将考虑许多老牌科技公司目前面临的一个共同难题——我们是否应该将内部工作负载迁移到云中？我们如何使用资本预算来帮助我们回答这个问题？通过资本预算，我们需要了解我们当前用于运行、维护和扩展本地集群的现金流，并根据我们迁移到云并在那里运行工作负载所产生的现金流来评估这些现金流。我之前展示的案例将着眼于与谷歌云和数据块相关的云成本。Databricks团队非常友好地与我一起创建了这个示例，并验证了用于分析的过程。非常感谢<a class="ae kn" href="https://www.linkedin.com/in/mishaal-ismeer-86140949/" rel="noopener ugc nofollow" target="_blank">米沙尔·伊斯梅尔</a>、<a class="ae kn" href="https://www.linkedin.com/in/vihag/" rel="noopener ugc nofollow" target="_blank">维哈格·古普塔</a>和<a class="ae kn" href="https://www.linkedin.com/in/pratyush-gosain-04685646/" rel="noopener ugc nofollow" target="_blank">普拉托什·戈赛因</a>。</p><p id="af2f" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">首先，让我们确定我们需要为本地集群考虑哪些现金流。根据您的设置，您将面临数据中心成本或托管成本。这里我们将简单地使用数据中心。此外，我们还有硬件成本、硬件/软件支持、人力资本和折旧。为了简化我们的案例，我们将假设数据中心已经完全折旧，并忽略硬件折旧，因为世界上并不是每个人都会遵循MARCS计划，但不要忘记在这里使用您的适当信息。对于所展示的云成本，我们要感谢数据块提供了这些内部迁移数据。对于此次迁移，我们需要考虑数据块单元(DBUs)、虚拟机(VM)、存储和迁移的专业服务成本。在运行和确定这些数字时，请咨询您的云供应商，以应用任何批量折扣或保证使用折扣。就硬件而言，我们将成本分摊到升级周期的时间范围内，在本例中为<code class="du ko kp kq kr b">5</code>年。至于人力资本成本，我们将使用<code class="du ko kp kq kr b">7</code>全职工程师专门从事迁移可替换任务。由于迁移不是瞬时的，我们将有共同的成本损失。假设它是<code class="du ko kp kq kr b">50%</code>。因此，作为我们的初步计算，我们将不得不面对云服务的<code class="du ko kp kq kr b">1/2</code>成本加上本地服务的<code class="du ko kp kq kr b">1/2</code>成本。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/e0a2f0076365323f53e8bfeea52d816a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wscLhYLx9h21Ra-Ja7HS3g.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">Gist不渲染:<a class="ae kn" href="https://gist.github.com/dwsmith1983/ea04525f17086436cf9f0783e529ea4c" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/dws mith 1983/ea 04525 f 17086436 cf9 f 0783 e 529 ea 4c</a></figcaption></figure><p id="0512" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">由于过渡，我们第一年的现金流只有<code class="du ko kp kq kr b">50%</code>来自内部部署和云，因此用星号标出。在这里，我们对任何正现金流收取<code class="du ko kp kq kr b">350,000</code>千美元的专业服务费和<code class="du ko kp kq kr b">20%</code>的公司税率。如果我们在Excel、Numbers或sheets上这样做，我们会想要确定<code class="du ko kp kq kr b">N</code>年的年增长百分比。这将是一个静态资本预算分析(不包括Excel插件)。每个公司和其中的业务单位都应该有一个最低回报率，这是投资可行的最低回报率。有了我们的最低预期回报率和我们预测的现金流，我们现在可以确定未来现金流的净现值(NPV)以及内部收益率(IRR)。IRR是高于盈亏平衡点的回报率。当净现值为<code class="du ko kp kq kr b">0</code>时，内部收益率将等于我们的最低预期收益率。也就是说，只要NPV大于等于<code class="du ko kp kq kr b">0</code>，项目就是可行的。</p><p id="7611" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">用预期回报率估算公司未来现金流的过程，允许我们使用资本预算作为工具来确定一个项目或投资对我们公司是否可行。不幸的是，估算资本流动随时间的增长并不是一个简单的过程。每年都可能有不同的通货膨胀率和原材料工艺的变化，这将影响我们的供应商以及他们下一年可能向我们收取的费用。我们如何解释这一点？</p><h1 id="719e" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">蒙特卡洛模拟</h1><p id="845b" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">现在我们已经了解了什么是资本预算以及为什么我们应该使用它，让我们看看如何通过使用蒙特卡洛模拟来建立一个更好的分析。</p><blockquote class="kb kc kd"><p id="ca8d" class="jd je ke jf b jg kf ji jj jk kg jm jn kh ki jq jr kj kk ju jv kl km jy jz ka hb bi translated"><em class="hi">蒙特卡洛模拟(Monte Carlo simulation)是一种模型，用于预测存在随机变量干预时不同结果的概率[ </em> <a class="ae kn" href="https://www.investopedia.com/terms/m/montecarlosimulation.asp" rel="noopener ugc nofollow" target="_blank"> <em class="hi"> 2 </em> </a> <em class="hi"> ]。</em></p></blockquote><p id="7fd1" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">看看我们当前的例子，我们的随机变量是什么？</p><ol class=""><li id="62fd" class="li lj hi jf b jg kf jk kg jo lk js ll jw lm ka ln lo lp lq bi translated">硬件成本，</li><li id="7738" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">软件成本，</li><li id="cc8b" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">数据中心(托管)成本，</li><li id="7d02" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">工程师基于云的任务，</li><li id="7ce7" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">汇率，</li><li id="37f7" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">如果这项投资的风险溢价不稳定，</li><li id="e2e5" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">数据增加(云存储成本)，以及</li><li id="a2a2" class="li lj hi jf b jg lr jk ls jo lt js lu jw lv ka ln lo lp lq bi translated">由于更多的数据、更多的用户、更多的管道和/或更多的模型，DBUs增加了。</li></ol><p id="b19b" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">对许多人来说，改变最低预期回报率似乎并不直观；然而，确定合适的最低预期回报率可能会很棘手。有几种方法可以计算这个比率，每种方法都会返回不同的结果。我们如何处理所有这些变化？我们应该选择好的、坏的和一般的极端情况吗？如果我们这样做，我们只能说明3种极端情况，而不能真正理解这些变量的进一步相互作用。</p><p id="5b57" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">通过使用蒙特卡罗模拟，我们可以为这些变量中的每一个设置分布，并对分布进行采样以确定要使用的值。如果我们这样做，数万次或十万次，我们可以看到我们项目的净现值结果的分布。这将使我们对我们的投资表现有一个更强有力的看法，并允许我们对这个项目在任何潜在情况下的可行性做出明智的决定。在提供的Github链接中，您会发现一个演示该模拟的样本笔记本，您可以使用它进行自己的分析，或者运行一些结果来看看它是如何工作的。</p><h1 id="f0a2" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">模拟结果</h1><p id="9b22" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">从<a class="ae kn" href="https://github.com/tdg-analytics-platform/capital-budgeting-python" rel="noopener ugc nofollow" target="_blank">资本预算笔记本</a>中，我们可以通过多次调用<code class="du ko kp kq kr b">create_data()</code>来查看迭代，以了解单个样本是如何完成的。下面可以看到一个这样的例子。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lw"><img src="../Images/8fdd0ab4e8c397302683057b5db94470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JoxinqhUO3cM3jQH.jpg"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">图片取自<a class="ae kn" href="https://tech.trueanalytics.ai/posts/capital-budgeting/" rel="noopener ugc nofollow" target="_blank">https://tech.trueanalytics.ai/posts/capital-budgeting/</a></figcaption></figure><p id="f2b1" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">我选择这个迭代来证明即使NPV总是正的，我们也可以看到从第<code class="du ko kp kq kr b">2</code>年开始我们的<code class="du ko kp kq kr b">after_tax</code>现金流开始下降。也就是说，随着我们使用云的时间越长，有一组参数会开始对我们不利。这绝不意味着不应该考虑这种迁移。但是，企业可能希望研究更长的时间范围，并与供应商合作，以获得有保证的使用折扣以及其他好处。此外，我们在此分析中错过了一些增值收益，因此这不是全部，而是一个检查您的数据和结果的警告。</p><p id="e2c1" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">接下来，让我们考虑我们生成的两个图，<code class="du ko kp kq kr b">3</code>年和<code class="du ko kp kq kr b">10</code>年的税后净现值。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lx"><img src="../Images/df92db0014440c6c42589ad6759e490a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eJiQZ1LgzOwflDf3.jpg"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">图片取自<a class="ae kn" href="https://tech.trueanalytics.ai/posts/capital-budgeting/" rel="noopener ugc nofollow" target="_blank">https://tech.trueanalytics.ai/posts/capital-budgeting/</a></figcaption></figure><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ly"><img src="../Images/5aa2c5c87a82c6270c2846368bd4d666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dvLV1lLGkRt25o6H.jpg"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx translated">图片取自<a class="ae kn" href="https://tech.trueanalytics.ai/posts/capital-budgeting/" rel="noopener ugc nofollow" target="_blank">https://tech.trueanalytics.ai/posts/capital-budgeting/</a></figcaption></figure><p id="f278" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated">我们可以从以下现金流看出，我们从内部迁移到云的决定是明智的，并为我们的组织提供了价值。</p><h1 id="e40c" class="if ig hi bd ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">参考</h1><p id="09fc" class="pw-post-body-paragraph jd je hi jf b jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka hb bi translated">[1]肯顿，威尔2022，<em class="ke">资本预算</em>，investopedia.com，2022年3月11日访问，<a class="ae kn" href="https://www.investopedia.com/terms/c/capitalbudgeting.asp" rel="noopener ugc nofollow" target="_blank">https://www.investopedia.com/terms/c/capitalbudgeting.asp</a><br/>【2】肯顿，威尔2021，<em class="ke">蒙特卡洛模拟</em>，Investopedia.com，2022年3月11日访问，<a class="ae kn" href="https://www.investopedia.com/terms/m/montecarlosimulation.asp" rel="noopener ugc nofollow" target="_blank">https://www . investopedia . com/terms/m/montecalosimulation . ASP</a><br/>【资本预算笔记本】史密斯，达斯汀2022，<em class="ke">资本</em></p></div><div class="ab cl lz ma gp mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hb hc hd he hf"><p id="10c8" class="pw-post-body-paragraph jd je hi jf b jg kf ji jj jk kg jm jn jo ki jq jr js kk ju jv jw km jy jz ka hb bi translated"><em class="ke">原载于2022年3月24日</em><a class="ae kn" href="https://tech.trueanalytics.ai/posts/capital-budgeting/" rel="noopener ugc nofollow" target="_blank"><em class="ke">https://tech . true analytics . ai</em></a><em class="ke">。</em></p></div></div>    
</body>
</html>