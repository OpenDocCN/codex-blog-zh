<html>
<head>
<title>Best Architecture for Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jetpack撰写的最佳架构</h1>
<blockquote>原文：<a href="https://medium.com/codex/best-architecture-for-jetpack-compose-45d2fc82aa92?source=collection_archive---------1-----------------------#2022-06-15">https://medium.com/codex/best-architecture-for-jetpack-compose-45d2fc82aa92?source=collection_archive---------1-----------------------#2022-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c1b3" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">撰写UI和视图模型交互</h2></div><p id="1577" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">11个月前，JetBrains宣布稳定发布Jetpack Compose，它像风暴一样占领了Android社区。新的UI工具套件正成为每个人的最爱。然而，理解如何将它与现代建筑相结合可能是一个挑战。让我们来看看如何做到这一点。</p><h1 id="7057" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">工作流程</h1><figure class="km kn ko kp fd kq er es paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="er es kl"><img src="../Images/f064b8a2f5b0f3630319329e627fb8c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ol7iY_f4OiFSxO7qhfGqiw.png"/></div></div><figcaption class="kx ky et er es kz la bd b be z dx translated">使用Adobe XD创建</figcaption></figure><p id="6a44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在特色图片中，您可以了解我们在这里会做什么。我们所有的屏幕状态都将存在于视图模型中。我们还将使用一个特定的功能，该功能将侦听用户的触摸交互，并相应地改变我们的状态。这些更改将使UI用更新的数据重新组合。</p><h1 id="01f8" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">设置</h1><p id="9f55" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">在继续我们的应用程序之前，我们需要这两个依赖项。将它们添加到您的应用程序级<code class="du lg lh li lj b">build.gradle</code>文件中。</p><pre class="km kn ko kp fd lk lj ll lm aw ln bi"><span id="3082" class="lo ju hi lj b fi lp lq l lr ls">implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.4.0'<br/>implementation 'androidx.lifecycle:lifecycle-viewmodel-compose:2.4.0'</span></pre><h1 id="a3ca" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">构建用户界面</h1><p id="efba" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">让我们有一个简单的UI，有几个按钮<em class="lt">和几个文本<em class="lt">和</em></em></p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="bb7f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们开始有了屏幕的示意图。我们有两个<em class="lt">文本</em>在顶部，三个<em class="lt">按钮</em>在底部。</p><h1 id="45b7" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">创建视图模型</h1><p id="a1b2" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">除了ViewModel，我们还需要两个额外的类。</p><ol class=""><li id="293c" class="lw lx hi iz b ja jb jd je jg ly jk lz jo ma js mb mc md me bi translated"><strong class="iz hj"> UIState — </strong>这是一个<code class="du lg lh li lj b">data class</code>，它将包含屏幕状态所需的所有信息。</li><li id="f796" class="lw lx hi iz b ja mf jd mg jg mh jk mi jo mj js mb mc md me bi translated"><strong class="iz hj"> UIEvent — </strong>这是一个<code class="du lg lh li lj b">sealed class</code>，它将包含所有可能的用户与屏幕的交互。</li></ol><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="5910" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">集成屏幕和视图模型</h1><p id="a862" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">现在回到可组合屏幕，我们需要将ViewModel的实例作为参数传递，并使用它来定义我们的屏幕。</p><figure class="km kn ko kp fd kq"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="8efd" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当UIEvent更改ViewModel内部的状态时，屏幕将使用更新后的数据进行重组。ViewModel和您的屏幕紧密地耦合在一起，并一起工作。</p><h1 id="eed3" class="jt ju hi bd jv jw jx jy jz ka kb kc kd io ke ip kf ir kg is kh iu ki iv kj kk bi translated">结论</h1><p id="df54" class="pw-post-body-paragraph ix iy hi iz b ja lb ij jc jd lc im jf jg ld ji jj jk le jm jn jo lf jq jr js hb bi translated">这是一个非常基本的例子，说明如何使用带有Jetpack Compose的ViewModel。我已经尝试了各种架构，在我看来，这是迄今为止最好的。从长远来看，在应用程序中分离关注点总是一个好主意。事件也可以描述为发起网络请求或从本地数据库检索数据。</p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="79c9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我希望你喜欢读我的文章，并学到了一些东西。谢谢大家！✌️</p><pre class="km kn ko kp fd lk lj ll lm aw ln bi"><span id="1032" class="lo ju hi lj b fi lp lq l lr ls"><strong class="lj hj">Want to connect?</strong></span><span id="fe4f" class="lo ju hi lj b fi mr lq l lr ls">My <a class="ae ms" href="https://github.com/cybercoder-naj" rel="noopener ugc nofollow" target="_blank">GitHub</a> Profile.<br/>My <a class="ae ms" href="https://cybercoder-naj.github.io" rel="noopener ugc nofollow" target="_blank">Portfolio</a> Website.</span></pre></div></div>    
</body>
</html>