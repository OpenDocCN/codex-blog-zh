<html>
<head>
<title>How to: Pimp my Powerline in PowerShell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何:在PowerShell中为我的电力线拉皮条</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-pimp-my-powerline-in-powershell-156f4e4936e?source=collection_archive---------8-----------------------#2021-03-25">https://medium.com/codex/how-to-pimp-my-powerline-in-powershell-156f4e4936e?source=collection_archive---------8-----------------------#2021-03-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="ceb5" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph"><a class="ae ge" href="http://medium.com/codex" rel="noopener">法典</a></h2><div class=""/><div class=""><h2 id="6afd" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">想让基本的PowerShell窗口具有视觉吸引力吗？那么这本指南是给你的。</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/59e18ddaf3f47199b123c017f6c1a35c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VTasdOoT8O65NGyzflQktg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">PowerShell电源线在应用oh-my-posh主题“slim”后</figcaption></figure><p id="4e94" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><em class="ks">注:我假设你使用的是</em><strong class="jy hs"><em class="ks">Windows 10</em></strong><em class="ks">，我建议你继续安装最新版本的</em> <a class="ae kt" href="https://docs.microsoft.com/en-us/windows/terminal/get-started" rel="noopener ugc nofollow" target="_blank"> <strong class="jy hs"> <em class="ks"> Windows终端</em></strong></a><strong class="jy hs"><em class="ks"/></strong><em class="ks">(最好从微软商店购买)</em><a class="ae kt" href="https://github.com/PowerShell/PowerShell" rel="noopener ugc nofollow" target="_blank"><strong class="jy hs"><em class="ks">PowerShell 7</em></strong></a><em class="ks">(向下滚动GitHub网页至他们只是让生活变得更容易。我们将使用Oh-my-Posh，一个“</em> <a class="ae kt" href="https://ohmyposh.dev/" rel="noopener ugc nofollow" target="_blank">提示主题引擎用于任何shell </a>”。<em class="ks">如果你遇到问题，在本文的最后有一个</em> <strong class="jy hs"> <em class="ks">故障排除章节</em> </strong> <em class="ks">。</em></p><p id="e068" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">首先，让我们通过单击任务栏上的Windows终端按钮打开Windows终端。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ku"><img src="../Images/9b216816b35d98d0c1d4517e70ef8605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NtzUks0PXauJTx3Zje2CRg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">单击红色箭头旁边的Windows终端按钮</figcaption></figure><p id="87b8" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">您应该会看到类似下面的内容。如果您的当前Shell不是PowerShell，请点击上方窗口栏上的向下箭头并选择PowerShell。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es kv"><img src="../Images/2a544c00f48a2f9af336efbfc4fd61fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2e7PUzRlcIIbrpRhNkO-w.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">无聊的PowerShell界面</figcaption></figure><h2 id="62da" class="kw kx hi bd ky kz la lb lc ld le lf lg kf lh li lj kj lk ll lm kn ln lo lp ho bi translated"><strong class="ak">安装书呆子字体</strong></h2><p id="6b53" class="pw-post-body-paragraph jw jx hi jy b jz lq is kb kc lr iv ke kf ls kh ki kj lt kl km kn lu kp kq kr hb bi translated">如你所见，视觉上的吸引力并不存在。有点凄凉。我们要改变这种状况。让我们从安装一种更有趣的字体开始，这种字体允许显示整洁的符号，并且与电力线字形兼容。虽然<a class="ae kt" href="https://docs.microsoft.com/en-us/windows/terminal/tutorials/powerline-setup" rel="noopener ugc nofollow" target="_blank">本教程</a>推荐使用卡斯卡迪亚代码PL或卡斯卡迪亚单色PL字体，他们没有为我渲染字形。我发现那些自命不凡的开发人员设计他们的软件时使用的是T2书呆子字体T3。你可以免费下载和安装任何书呆子字体，但我会坚持使用提升卡斯卡迪亚代码字体。如果你想关注我，请下载“卡斯卡迪亚代码”获取<strong class="jy hs">卡斯卡迪亚代码书呆子字体</strong>提供<a class="ae kt" href="https://github.com/AaronFriel/nerd-fonts/releases/tag/v1.2.0" rel="noopener ugc nofollow" target="_blank">这里</a>。Nerd.Font.Complete.ttf "。打开文件，您应该会看到一个新的窗口弹出:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lv"><img src="../Images/4d09b7d93ee8b2ee43b4c5d315a96c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJH0aCTZQHyMN2vgeUcq_g.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">安装“卡斯卡迪亚代码书呆子字体完成”</figcaption></figure><p id="e772" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">单击安装。或者，转到下载。ttf文件，右击它并选择“安装”或“为所有用户安装”。</p><h2 id="bfb2" class="kw kx hi bd ky kz la lb lc ld le lf lg kf lh li lj kj lk ll lm kn ln lo lp ho bi translated">更改Windows终端设置</h2><p id="0f62" class="pw-post-body-paragraph jw jx hi jy b jz lq is kb kc lr iv ke kf ls kh ki kj lt kl km kn lu kp kq kr hb bi translated">现在您已经安装了nerd字体，我们希望PowerShell使用Cascadia Code Nerd字体显示文本。最好的方法是通过点击上方窗口栏上的向下箭头或在Windows终端中按[Ctrl+，]进入设置。这将在默认代码编辑器中打开一个“<strong class="jy hs"> settings.json </strong>”文件。我的情况是<a class="ae kt" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es lw"><img src="../Images/7614fc06e48a53ae99589b653cc080e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LtfdN7DFgZl0Plz8jidVfw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">更改默认字体</figcaption></figure><p id="ba9e" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">如您所见，我已经取消了默认字体“Consolas”的注释。我们将把默认字体替换为“<strong class="jy hs"> CascadiaCode Nerd字体</strong>”。重要的是你省略了“Cascadia”和“Code”之间的空格——这不是打字错误。当您保存文件[Ctrl+S]时，您应该看到您的PowerShell字体发生了变化。</p><h2 id="859d" class="kw kx hi bd ky kz la lb lc ld le lf lg kf lh li lj kj lk ll lm kn ln lo lp ho bi translated">安装并导入Posh-Git和Oh-My-Posh</h2><p id="fa33" class="pw-post-body-paragraph jw jx hi jy b jz lq is kb kc lr iv ke kf ls kh ki kj lt kl km kn lu kp kq kr hb bi translated">在PowerShell中，执行下面两条命令，这两条命令将<strong class="jy hs">安装posh-git和oh-my-posh模块</strong>。如果您想知道posh-git是做什么的:"<a class="ae kt" href="https://docs.microsoft.com/en-us/windows/terminal/tutorials/powerline-setup" rel="noopener ugc nofollow" target="_blank"> Posh-git为您的提示添加Git状态信息，以及Git命令、参数、远程和分支名称的制表符补全</a> " —当您使用Git版本控制时，这是一个不错的选择。</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="c55e" class="kw kx hi ly b fi mc md l me mf">Install-Module posh-git -Scope CurrentUser<br/>Install-Module oh-my-posh -Scope CurrentUser</span></pre><p id="3e2e" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">可能会在您按下enter键后要求您批准安装。在这种情况下，选择“是”或“全是”。</p><p id="f8fe" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">接下来，您需要<strong class="jy hs">导入</strong>这些模块来实际使用它们。在PowerShell中，输入:</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="207a" class="kw kx hi ly b fi mc md l me mf">notepad $profile</span></pre><p id="1dfa" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">其中竟然打开了一个名为<strong class="jy hs">的微软文件。PowerShell_profile.ps1 </strong>”。如果该文件尚不存在，请创建它。然后，将以下三行复制粘贴到记事本文件中，如下所示:</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="6a9d" class="kw kx hi ly b fi mc md l me mf">Import-Module posh-git<br/>Import-Module oh-my-posh<br/>Set-PoshPrompt -Theme slim</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mg"><img src="../Images/05d4dab78f799ffdf1537c984ebe6f67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zzq44vVllzH9UhsMwluJ2w.png"/></div></div></figure><p id="965b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">做出更改后，不要忘记保存。</p><h2 id="4d7f" class="kw kx hi bd ky kz la lb lc ld le lf lg kf lh li lj kj lk ll lm kn ln lo lp ho bi translated">完美的主题</h2><p id="344f" class="pw-post-body-paragraph jw jx hi jy b jz lq is kb kc lr iv ke kf ls kh ki kj lt kl km kn lu kp kq kr hb bi translated">太好了！您已经成功设置了“我的天哪”。然而，很有可能我个人最喜欢的“苗条”主题并不是你真正喜欢的。幸运的是，还有许多其他主题可供选择。只需输入</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="6958" class="kw kx hi ly b fi mc md l me mf">Get-PoshThemes</span></pre><p id="ada5" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">到PowerShell中，以便更好地了解可用的主题。以下是输出:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mh"><img src="../Images/5682b25d0c8a5d42f8427a8effb7309a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uHOyBLYUr6CYSPcrFoOaFw.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">“我的天哪”主题概述</figcaption></figure><p id="92ef" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><em class="ks">注意:我已经初始化了一个Git存储库，也显示了电力线Git符号。</em></p><p id="8621" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">要永久设置一个主题，您需要像以前一样使用</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="1f72" class="kw kx hi ly b fi mc md l me mf">notepad $profile</span></pre><p id="390b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">并替换当前主题，例如:</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="23aa" class="kw kx hi ly b fi mc md l me mf">Set-PoshPrompt -Theme jandedobbeleer</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mi"><img src="../Images/baf1aaa8a1c91f03df40a7a9d8762900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sm0rS-1QO1xKTYDJv5BeCg.png"/></div></div></figure><h2 id="f851" class="kw kx hi bd ky kz la lb lc ld le lf lg kf lh li lj kj lk ll lm kn ln lo lp ho bi translated">最后一击(可选)</h2><p id="8678" class="pw-post-body-paragraph jw jx hi jy b jz lq is kb kc lr iv ke kf ls kh ki kj lt kl km kn lu kp kq kr hb bi translated">您可能想知道我是如何将我的<strong class="jy hs">本地用户帐户名</strong>从“jcchu”更改为<a class="ae kt" href="https://dragonball.fandom.com/wiki/Goku" rel="noopener ugc nofollow" target="_blank"> SonGoku </a>，将我的<strong class="jy hs">计算机名</strong>更改为<strong class="jy hs"/><a class="ae kt" href="https://dragonball.fandom.com/wiki/Kamehameha" rel="noopener ugc nofollow" target="_blank">Kamehameha</a>。</p><p id="b02b" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">更改用户名:</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mj"><img src="../Images/a55d8d446039a1b098fd119a549ee845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WI5jXeaug_tOjojzDvgjiA.png"/></div></div></figure><ol class=""><li id="4f2a" class="mk ml hi jy b jz ka kc kd kf mm kj mn kn mo kr mp mq mr ms bi translated">[Windows键+R]</li><li id="a02e" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">输入“netplwiz”</li><li id="c748" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">在新窗口中，选择要更改的用户帐户名</li><li id="55f0" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">单击“属性”</li><li id="101e" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">在新窗口中，输入新的用户名</li><li id="0767" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">点击“应用”</li><li id="d58a" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">为了使更改生效，通常需要重新启动</li></ol><p id="938c" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">更改电脑名称:</strong></p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es my"><img src="../Images/40cdb6c8c90edeaabdf0c8b558265d12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T8Sdc3f9bA9uj7pr-n56Jw.png"/></div></div></figure><ol class=""><li id="45a1" class="mk ml hi jy b jz ka kc kd kf mm kj mn kn mo kr mp mq mr ms bi translated">[Windows键]</li><li id="b38f" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">开始键入“关于您的电脑”,然后输入</li><li id="2f49" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">在新窗口中，单击“重命名这台电脑”</li><li id="37a8" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">输入新的计算机名</li><li id="3495" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">重启电脑</li></ol><p id="8d6e" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">删除PowerShell启动文本</strong></p><p id="de1d" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">您可能还想删除PowerShell开始文本:</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mz"><img src="../Images/c145cd811a5dc14d076cc47fe7e9a117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DtPNVmIB2qp0KFOH_w396Q.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">PowerShell开始文本</figcaption></figure><ol class=""><li id="796f" class="mk ml hi jy b jz ka kc kd kf mm kj mn kn mo kr mp mq mr ms bi translated">打开Windows终端设置[Ctrl+，]</li><li id="2492" class="mk ml hi jy b jz mt kc mu kf mv kj mw kn mx kr mp mq mr ms bi translated">将“源”属性替换为以下内容:</li></ol><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="d816" class="kw kx hi ly b fi mc md l me mf">"commandline": "pwsh.exe -noLogo"</span></pre><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es na"><img src="../Images/10b4b26f2d14885ec7b2a8f18ea4d430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y2ZA9dmqNeMArcin76dL2A.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">取消源代码的注释并将“noLogo”参数添加到命令行中</figcaption></figure><p id="28e9" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">你完了！欣赏风景！😍</p></div><div class="ab cl nb nc gp nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hb hc hd he hf"><h2 id="8ba3" class="kw kx hi bd ky kz la lb lc ld le lf lg kf lh li lj kj lk ll lm kn ln lo lp ho bi translated">额外:故障排除</h2><p id="58a2" class="pw-post-body-paragraph jw jx hi jy b jz lq is kb kc lr iv ke kf ls kh ki kj lt kl km kn lu kp kq kr hb bi translated"><strong class="jy hs">启用运行脚本</strong></p><p id="952a" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">您可能会遇到一条错误消息，告诉您<strong class="jy hs">无法运行. ps1 </strong>脚本文件。一种解决方案是以<strong class="jy hs">管理员</strong>的身份将<a class="ae kt" href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7.1" rel="noopener ugc nofollow" target="_blank"> <strong class="jy hs">执行策略</strong> </a>设置为“无限制”或“远程签名”，如下所示:</p><pre class="jh ji jj jk fd lx ly lz ma aw mb bi"><span id="9000" class="kw kx hi ly b fi mc md l me mf">Set-ExecutionPolicy Unrestricted</span></pre><p id="20a8" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated"><strong class="jy hs">快捷方式问题</strong></p><p id="c4cb" class="pw-post-body-paragraph jw jx hi jy b jz ka is kb kc kd iv ke kf kg kh ki kj kk kl km kn ko kp kq kr hb bi translated">有时，您可能会看到以“<strong class="jy hs">无法修改快捷方式</strong>”开头的错误。这里，一个潜在的解决方案是走捷径<a class="ae kt" href="https://www.reddit.com/r/PowerShell/comments/g7klxr/unable_to_modify_the_powershell_shortcut_error/" rel="noopener ugc nofollow" target="_blank">给自己完全的许可</a>。</p></div><div class="ab cl nb nc gp nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hb hc hd he hf"><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es ni"><img src="../Images/c0bca0f84395fff5921d45e0c3968818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uEDCjjL4mC15zHWDosl0_A.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">太美了。🙌</figcaption></figure></div></div>    
</body>
</html>