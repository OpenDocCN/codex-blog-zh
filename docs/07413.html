<html>
<head>
<title>YouTube Video Player Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">YouTube视频播放器颤动</h1>
<blockquote>原文：<a href="https://medium.com/codex/youtube-videoplayer-flutter-476423cc1269?source=collection_archive---------2-----------------------#2022-06-14">https://medium.com/codex/youtube-videoplayer-flutter-476423cc1269?source=collection_archive---------2-----------------------#2022-06-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="a36d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在本文中，我们将在应用程序中播放YouTube视频。除此之外，当视频部分不可见时，我们也暂停它。</p><p id="3767" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有时或经常，我们需要在我们的移动应用程序中集成或播放视频。我们可以得到许多库或包，为我们提供实现需求的能力。</p><p id="952e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终输出如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/21df0c5bb0aefc46f5595926aaef203f.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/1*iH3Qhb4vIrmgYoJGocdn6g.gif"/></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">YouTube视频播放器</figcaption></figure><p id="b717" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在进入编码部分之前，首先让我们讨论一下我们将在应用程序中使用的一些主题。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es jp"><img src="../Images/593a61aef5e3f042b57b6146404e06ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W3o_GT5w28QE-i2u"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">照片由<a class="ae ju" href="https://unsplash.com/@thoughtcatalog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">思想目录</a>在<a class="ae ju" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="8a96" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">可见度检测器</h1><p id="4739" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">Visibility Detector是一个包装小部件的小部件，当小部件的可见性发生变化时，它就会被触发。更多详情请访问此<a class="ae ju" href="https://pub.dev/packages/visibility_detector" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><h1 id="c146" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak">现在让我们开始</strong></h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="er es ky"><img src="../Images/b49e9c4fa9b2c5aff94107a5f2ab0f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ot4aA-chUgRp8GGJ"/></div></div><figcaption class="jl jm et er es jn jo bd b be z dx translated">由<a class="ae ju" href="https://unsplash.com/@codestorm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">萨法尔·萨法罗夫</a>在<a class="ae ju" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0614" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<strong class="ih hj"> pubsec.yaml </strong>文件中，首先让我们添加项目的依赖项。</p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="86cc" class="le jw hi la b fi lf lg l lh li">dependencies:</span><span id="944c" class="le jw hi la b fi lj lg l lh li">youtube_player_flutter: ^8.1.0<br/>visibility_detector: ^0.3.3</span></pre><p id="3273" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">添加依赖项后，我们在<strong class="ih hj"> lib </strong>文件夹中创建<strong class="ih hj"> video_player.dart </strong>文件。</p><p id="0a9a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在其中，我们首先将<strong class="ih hj"> initState videoId </strong>与<strong class="ih hj"> url分开。</strong></p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="8e97" class="le jw hi la b fi lf lg l lh li">videoId=YoutubePlayer.convertUrlToId(widget.youtubeUrl)!;</span></pre><p id="0be5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们初始化<strong class="ih hj"> YoutubePlayerController。</strong></p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="5aab" class="le jw hi la b fi lf lg l lh li">_controller = YoutubePlayerController(</span><span id="d640" class="le jw hi la b fi lj lg l lh li">initialVideoId: videoId,<br/>flags: const YoutubePlayerFlags(<br/>mute: false,<br/>autoPlay: false,<br/>disableDragSeek: false,<br/>loop: false,<br/>isLive: false,<br/>forceHD: false,<br/>enableCaption: true,<br/>),)<br/>..addListener(listener);</span></pre><p id="e7d0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们还需要创建<strong class="ih hj">监听器，</strong>负责播放器是否准备好，小部件是否安装。</p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="ca85" class="le jw hi la b fi lf lg l lh li">void listener() {<br/>if (_isPlayerReady &amp;&amp; mounted &amp;&amp; !_controller.value.isFullScreen) {setState(() {});<br/>}}</span></pre><p id="e27f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当我们导航到下一页时，视频播放器需要暂停。因此，我们将控制器暂停在已释放和停用的页面上。</p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="a779" class="le jw hi la b fi lf lg l lh li">@override<br/>void deactivate() {<br/>// Pauses video while navigating to next page.<br/>_controller.pause();<br/>super.deactivate();<br/>}</span></pre><p id="67e2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当处置时也是如此。</p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="e834" class="le jw hi la b fi lf lg l lh li">@override</span><span id="3d63" class="le jw hi la b fi lj lg l lh li">void dispose() {<br/>_controller.dispose();<br/>_idController.dispose();<br/>_seekToController.dispose();<br/>super.dispose();<br/>}</span></pre><p id="5beb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们用VisibilityDetector为videoplayer构建布局。这里，当VideoPlayer小部件不再可见时，我们暂停我们的控制器。</p><pre class="je jf jg jh fd kz la lb lc aw ld bi"><span id="d6cc" class="le jw hi la b fi lf lg l lh li">VisibilityDetector(<br/>key: const Key("unique key"),<br/>onVisibilityChanged: (info) {<br/>if (info.visibleFraction == 0) {<br/>_controller.pause();<br/>} else {<br/>_controller.value.isPlaying<br/>? _controller.play()<br/>: _controller.pause();<br/>}<br/>},<br/>child: YoutubePlayerBuilder()<br/>),</span></pre><p id="8520" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后我们的<strong class="ih hj"> video_player.dart </strong>看起来如下:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="971c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后我们创建<strong class="ih hj"> homepage.dart. </strong>这里我们调用我们的YouTubeVideo小部件并传递url。这里我们创建了<strong class="ih hj"> ListView </strong>来演示视频播放器不可见时的暂停效果。</p><p id="6e7f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj"> <em class="lm">首页.镖</em> </strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><p id="0054" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后是我们的main.dart文件</p><p id="656c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">主镖</strong></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lk ll l"/></div></figure><h1 id="660b" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">让我们连接起来</h1><p id="6b3b" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">我们可以成为朋友。在<a class="ae ju" href="https://www.facebook.com/nabin.dhakal.714/" rel="noopener ugc nofollow" target="_blank">上找到脸书</a>、<a class="ae ju" href="https://www.linkedin.com/in/nabindhakal/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>、<a class="ae ju" href="https://github.com/nbnD" rel="noopener ugc nofollow" target="_blank"> Github </a>、<a class="ae ju" href="https://www.youtube.com/channel/UCW6oYt_3QSl7J2HSHNqwXWw" rel="noopener ugc nofollow" target="_blank"> Youtube </a>、<a class="ae ju" href="https://www.buymeacoffee.com/nabindhakal" rel="noopener ugc nofollow" target="_blank"> BuyMeACoffee </a>、<a class="ae ju" href="https://www.instagram.com/nbn_d_/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>。</p><p id="64cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">访问:<a class="ae ju" href="https://flutterjunction.com/" rel="noopener ugc nofollow" target="_blank">颤振连接</a></p><p id="5edb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">投稿:</strong> <a class="ae ju" href="https://www.buymeacoffee.com/nabindhakal" rel="noopener ugc nofollow" target="_blank"> BuyMeACoffee </a></p><h1 id="f92d" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="cdd1" class="pw-post-body-paragraph if ig hi ih b ii kt ik il im ku io ip iq kv is it iu kw iw ix iy kx ja jb jc hb bi translated">希望这篇文章对你有所帮助，让你学到新的东西。我在这篇文章中使用了一些对你们中的一些人来说可能是新的东西。</p><p id="0cca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你学到了新的东西或者想提出一些建议，请在评论中告诉我。</p><p id="f411" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你喜欢这篇文章，请点击👏图标，它为向大家提供新事物提供了动力。</p><p id="0579" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">也请关注令人兴奋的文章和项目的更新。</p><p id="1440" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">通过分享学习在学习过程中产生巨大的影响，并使社区越来越大。</p><p id="8767" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">分享是吸引其他爱好者的磁石。</p><p id="05dc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，让我们迈出一小步，让我们的学习社区变得更大。</p><p id="39e3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">与你的朋友分享这篇文章，或者如果你喜欢这篇文章，就在推特上发表。</p><h1 id="2439" class="jv jw hi bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">在以下时间吃饱:</h1><div class="ln lo ez fb lp lq"><a href="https://github.com/nbnD/youtubevideoplayer" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hj fi z dy lv ea eb lw ed ef hh bi translated">GitHub-nbnD/YouTube视频播放器</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">github.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me jj lq"/></div></div></a></div></div></div>    
</body>
</html>