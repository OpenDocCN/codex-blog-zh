<html>
<head>
<title>React-Redux for the Uninitiated (feat. Redux-Saga) — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应-为门外汉还原(专长。redux-Saga)——第1部分</h1>
<blockquote>原文：<a href="https://medium.com/codex/react-redux-for-the-uninitiated-feat-redux-saga-part-1-8cff10003e00?source=collection_archive---------2-----------------------#2021-01-02">https://medium.com/codex/react-redux-for-the-uninitiated-feat-redux-saga-part-1-8cff10003e00?source=collection_archive---------2-----------------------#2021-01-02</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/75ba1d5ec28e28e6d8290be76c17b984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xvnWDN0_rf3hDIuy"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">马库斯·斯皮斯克在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="653b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Redux对于新手来说很难，毫无疑问。如果您刚刚开始探索React，并且已经决定使用Redux作为您的goto状态管理，并且发现它非常难以理解它的实际工作原理，我希望本教程能够帮助您更好地理解它。</p><h1 id="7503" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">我什么时候用Redux？</h1><p id="4206" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">使用Redux的一个经验法则是，当您有一个包含多个模块的大规模软件时，您希望每个模块都能够访问特定的(如果不是所有的)存储状态，比如经过身份验证的用户数据、购物车等。</p><p id="f307" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">但对我个人来说，我在几乎所有的类和函数组件中都使用Redux，我将99%的状态存储在Redux中。</p><p id="ab5d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当谈到如何使用Redux时，真的没有具体的标准，在我的职业生涯中，我看到了许多公司组织Redux结构的不同方式。随着您在更多的React项目中工作，您将逐渐发展您自己的状态管理品味。</p><p id="09ae" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你只是做你自己的事情，而没有接触过其他人构建Redux的方式，你应该去读更多的Redux教程文章(比如这篇文章)，这会有所帮助。</p><h1 id="8b62" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Redux如何工作(简单来说)</h1><p id="6727" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">如果你在此之前没有研究过<a class="ae hv" href="https://reactjs.org/docs/state-and-lifecycle.html" rel="noopener ugc nofollow" target="_blank">反应状态</a>是如何工作的，我建议你在继续之前多读一些关于它们的内容。</p><p id="ff69" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我可以描述<strong class="ix hz"> Redux </strong>的最简单方式是，它是一个具有<strong class="ix hz">巨大反应状态</strong> <strong class="ix hz">的组件，将数据加载到存储在</strong>中。</p><p id="cf3e" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用像<a class="ae hv" href="https://react-redux.js.org/api/provider" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">提供者</strong> </a> <strong class="ix hz"> </strong>(将在<strong class="ix hz">第2部分</strong>中进一步讨论)这样的包装器，您可以系统地更新和管理那个庞大的状态；然后，您可以使用react-redux提供的<a class="ae hv" href="https://react-redux.js.org/api/connect" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">连接</strong> </a>函数来访问和更新这些状态。</p><figure class="kx ky kz la fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kw"><img src="../Images/636e581bcd79ab6507b41c6210686c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sMWlYjGR4L8rSAP-dsSdkw.png"/></div></div></figure><p id="e9cd" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然后是<strong class="ix hz">动作</strong>和<strong class="ix hz">减速器</strong>。</p><p id="73be" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> Action </strong>有点像<strong class="ix hz"> this.setState </strong>，允许你发出一个动作请求，一个<strong class="ix hz"> Reducer </strong>会拦截它并用一堆新值更新状态，重新计算现有的存储数据或者简单地重置它们。你也可以触发一个<strong class="ix hz">传奇</strong>事件，我们将在<strong class="ix hz">第3部分</strong>中介绍。</p><p id="d539" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个<strong class="ix hz">动作</strong>的简单结构如下:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><ol class=""><li id="180f" class="ld le hy ix b iy iz jc jd jg lf jk lg jo lh js li lj lk ll bi translated">它应该有一个<strong class="ix hz">动作类型</strong>(行业标准的带下划线的大写字母)；</li><li id="29b4" class="ld le hy ix b iy lm jc ln jg lo jk lp jo lq js li lj lk ll bi translated">它可能有一个功能，用于简化创建动作请求的过程——一个带有强制“类型”变量的对象，用于插入一个<strong class="ix hz"> ACTION_TYPE </strong>，以及用作<strong class="ix hz"> Reducer的</strong>使用的参数的其他值。</li></ol><p id="a960" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz"> Reducer </strong>是您决定应该如何管理状态的地方。当它通过<strong class="ix hz">动作</strong>拦截到响应请求时，它将根据<strong class="ix hz">动作</strong>传入的任何参数更新状态。</p><p id="1846" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hz">减速器</strong>的简单结构如下:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><ol class=""><li id="5287" class="ld le hy ix b iy iz jc jd jg lf jk lg jo lh js li lj lk ll bi translated">它应该有一个<strong class="ix hz"> initialState </strong>，它定义了你的状态的整体结构，至少对于这个用户名模块是这样的。</li><li id="8c15" class="ld le hy ix b iy lm jc ln jg lo jk lp jo lq js li lj lk ll bi translated">它应该有一个默认函数，该函数检测和拦截特定的<strong class="ix hz"> ACTION_TYPE </strong>，并决定做什么——在上述示例代码的上下文中，它将现有的“用户名”值更新为从<strong class="ix hz">操作</strong>传入的“新用户名”参数。</li></ol><h1 id="da05" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">连接(到道具)</h1><p id="12f3" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">一旦你解决了你的<strong class="ix hz">动作</strong>和<strong class="ix hz">减速器</strong>，是时候将它们传递到一个组件中使用了。你可以使用<strong class="ix hz">连接</strong>来完成:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="0c81" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一个<strong class="ix hz"> connect </strong>函数接受两个参数:<strong class="ix hz"> mapStateToProps </strong>和<strong class="ix hz">mapdispatctoprops</strong>，它总是以默认组件作为其参数被调用。</p><p id="cd15" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">顾名思义，<strong class="ix hz"> mapStateToProps </strong>和<strong class="ix hz">mapdispatctoProps</strong>用于将您需要的<strong class="ix hz">状态</strong>和<strong class="ix hz">动作</strong>映射/推送/包含到组件的props中。</p><p id="45ef" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这里对于<strong class="ix hz"> mapDispatchToProps </strong>来说一个关键的事情是，你在里面定义的函数必须被<a class="ae hv" href="https://react-redux.js.org/using-react-redux/connect-mapdispatch" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hz">分派</strong> </a>函数包装，这是你在Redux中触发<strong class="ix hz">动作</strong>的唯一方式。如果你定义一个函数而没有把它们包装在<strong class="ix hz"> dispatch </strong>中，那么什么都不会起作用。<strong class="ix hz">动作</strong>仍将被调用，但在Redux循环中不会被触发，并且<strong class="ix hz">减速器</strong>将不能在其末端接收任何东西。</p></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><h1 id="6b94" class="jt ju hy bd jv jw ly jy jz ka lz kc kd ke ma kg kh ki mb kk kl km mc ko kp kq bi translated">给定一个待办事项列表</h1><p id="349e" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">您需要检查列表中的一些内容，所以您单击一个复选框，列表就会以新的状态更新。</p><figure class="kx ky kz la fd hk er es paragraph-image"><div class="er es md"><img src="../Images/95b0fed9d8b974357a35f1b8f98f7b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/1*4SiqaRSZzcox9uwOfINgiw.gif"/></div></figure><p id="d9e9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">为了处理这些状态，首先，您将使用useState创建一个状态变量来处理todo列表(带有两个示例任务):</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="f0eb" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当用户切换复选框输入时更新任务:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="1d98" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要从列表中删除任务:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="ff4b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">要为列表创建新任务:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><h1 id="8a3e" class="jt ju hy bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Redux解决方案</h1><p id="9428" class="pw-post-body-paragraph iv iw hy ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">处理上述状态的Redux等价如下:</p><figure class="kx ky kz la fd hk"><div class="bz dy l di"><div class="lb lc l"/></div></figure><ol class=""><li id="1d93" class="ld le hy ix b iy iz jc jd jg lf jk lg jo lh js li lj lk ll bi translated">为每个状态更新功能(更新、删除和新建)创建一个<strong class="ix hz">动作</strong>以及它们各自的参数。</li><li id="5529" class="ld le hy ix b iy lm jc ln jg lo jk lp jo lq js li lj lk ll bi translated">默认情况下，<strong class="ix hz"> Reducer的</strong> initialState将有一个样本待办事项列表。</li><li id="b38a" class="ld le hy ix b iy lm jc ln jg lo jk lp jo lq js li lj lk ll bi translated">在被拦截的<strong class="ix hz"> UPDATE_TODO </strong>上，Reducer将根据提供的“index”和“isChecked”值更新TODO列表，同样适用于<strong class="ix hz"> DELETE_TODO </strong>和<strong class="ix hz"> CREATE_NEW_TODO </strong>。</li></ol></div><div class="ab cl lr ls gp lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="hb hc hd he hf"><p id="8c25" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="me">在第2部分中，我们将研究在React项目中设置Redux:</em><a class="ae hv" rel="noopener" href="/codex/react-redux-for-the-uninitiated-feat-redux-saga-part-2-2a747c74ba91"><em class="me">https://medium . com/codex/React-Redux-for-the-initiated-feat-Redux-saga-Part-2-2a 747 c 74 ba 91</em></a></p></div></div>    
</body>
</html>