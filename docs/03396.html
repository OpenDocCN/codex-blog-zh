<html>
<head>
<title>Fuzzy, lazy, functional numeric computing in Scala</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Scala中的模糊、懒惰、函数式数值计算</h1>
<blockquote>原文：<a href="https://medium.com/codex/fuzzy-lazy-functional-numeric-computing-in-scala-4b47588d310f?source=collection_archive---------12-----------------------#2021-08-31">https://medium.com/codex/fuzzy-lazy-functional-numeric-computing-in-scala-4b47588d310f?source=collection_archive---------12-----------------------#2021-08-31</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="3551" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是我第三篇也是(谢天谢地)最后一篇关于<a class="ae jd" href="https://github.com/rchillyard/Number" rel="noopener ugc nofollow" target="_blank"> <strong class="ih hj">数字</strong> </a>的文章，一个事物数值的开源库。之前的文章分别是<a class="ae jd" rel="noopener" href="/codex/number-part-1-c98313903714">第一部</a>和<a class="ae jd" href="https://scala-prof.medium.com/number-part-2-7925400624d5" rel="noopener">第二部</a>。在本文中，我将描述该库的基本数学特性。在这方面，会和Scala中的其他数值库有相似之处。然而，有一些新的方法可能是也可能不是一个好主意。欢迎你的评论。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/8fe67da52c5e69f119bec621e2f6a228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*39AgtsCvP7kgGD4hyPVlsA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">工作表</figcaption></figure><p id="f98c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先有<em class="ju">字段</em>。这是一种允许在一个域上进行各种操作的特性:加、减、乘、除。此外，还有power操作符、comparison和一两个其他查询操作符，如<em class="ju"> isZero、isInfinite </em>。字段有两个子特征:<em class="ju">号</em>和<em class="ju">综合体</em>。有一些方法可以返回一个可选的<em class="ju">数字</em>，或者一个可选的<em class="ju">复数</em>(我想我可以只提供一个方法来返回<em class="ju">[数字，复数] </em>，但是如果我添加了四元数或者任何其他类型的字段，这可能会很麻烦)。</p><p id="c841" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju">复杂</em>有两个案例类:<em class="ju">复杂笛卡尔</em>和<em class="ju">复杂极坐标</em>。这些以您所期望的方式分别采用两个<em class="ju">数字</em>(即<em class="ju">复极坐标</em>的虚部通常是一个角度度量)。<em class="ju">实数或虚数的复数</em>可以转换成适当的<em class="ju">数</em>。</p><p id="8171" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一个<em class="ju">数</em>有两个属性:它的值(a <em class="ju">值</em>)和它的“因子”(a <em class="ju">因子</em>)。这些属性在一个名为<em class="ju"> GeneralNumber </em>的抽象类中实现，该类还实现了<em class="ju">Fuzzy【Double】</em>，并定义了一个属性<em class="ju"> fuzz </em>(一个<em class="ju">选项【Fuzzy[Double]】</em>)(参见第1部分了解更多关于模糊性的内容)。<em class="ju">值</em>是<em class="ju">的类型别名【要么[Option[Double]，Rational]，Int】</em>。没错，就是嵌套的<em class="ju">或者</em>！</p><p id="9533" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果一个数字可以用<em class="ju"> Int </em> x表示，那么它被定义为<em class="ju"> Right(x) </em>。如果不是<em class="ju"> Int </em>而是理性的<em class="ju"> r </em>，则定义为<em class="ju"> Left(Right(r)) </em>。<em class="ju">有理</em>的分子和分母都是<em class="ju">大整数</em>。如果数字不能用<em class="ju"> Int </em>或<em class="ju"> Rational </em>来合理定义，那么我们用<em class="ju"> Double来表示。</em>注意，明显不精确的典型来源之一是必须使用<em class="ju"> Double </em>进行整数除法。10 / 3 * 3通常会显示为类似9.99999999999通过使用<em class="ju"> Rational </em>，我们完全避免了那种事情。你可以把<em class="ju"> Rational </em>看作是数字的又一个懒惰的表现(见第2部分)。</p><p id="433e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju"> Number </em>上定义的每一个运算，并元和一元运算符，都定义了三个函数:一个用于<em class="ju"> Int </em>、一个用于<em class="ju"> Rational </em>、一个用于<em class="ju"> Double </em>。</p><p id="a896" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju">因子</em>允许我们定义不同领域中的数字，特别是允许一些无理数和超越数的精确表示。共有3个子类型:<em class="ju"> PureNumber，对数</em>和<em class="ju"> Root </em>。<em class="ju">纯数字</em>有两个子类型:<em class="ju">标量</em>(均为普通数字)和<em class="ju">弧度</em>(以弧度为单位的角度测量)。<em class="ju">弧度</em>值范围为0-2(不含)。常数<em class="ju"> pi </em>定义为:<em class="ju"> Number(1，弧度)</em>的精确值为π。否则<em class="ju">弧度</em>因子与<em class="ju">标量</em>的区别仅在于该常数因子。</p><p id="8af6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ju">对数有三个子类型:</em> <em class="ju">自然对数</em>(对于自然对数)、<em class="ju">对数2 </em>和<em class="ju">对数10 </em>。(尽管最后两个可能没有太多实际用途)。当转换成<em class="ju">标量</em>数字时，这些数字只是将其基数提高到其值的幂。因此，它们不是<em class="ju">标量</em>的简单缩放版本。它们的值从负无穷大到正无穷大，经过某个点，例如，<em class="ju"> Number(1，NatLog) </em>的值为<em class="ju"> e </em>，Euler数(2.718…)。【本版之前】<em class="ju">弧度</em>和<em class="ju">自然对数</em>分别称为<em class="ju"> Pi </em>和<em class="ju"> E、</em>。</p><p id="f960" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">三角函数自然地对<em class="ju">标量</em>和<em class="ju">弧度</em>进行运算，与<em class="ju"> exp </em> / <em class="ju"> log </em>函数对<em class="ju">标量</em> / <em class="ju"> NatLog </em>进行运算的方式相同。因此，如果你取π/4的正切，你会得到正好1，当然，如果你取负无穷大的反正切，你会得到正好3π/2。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jv"><img src="../Images/0f026f1e0c584db8936cd7d150900a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCawf_LAJn2dFlA9YGG2Ag.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx translated">单位圆周围的余弦和正弦(来自维基媒体，公共领域)。</figcaption></figure><p id="e50a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第三类因素称为<em class="ju">根</em>。任意有两个子类型:<em class="ju">根2 </em>(平方根)和<em class="ju">根3 </em>(立方根)。这些是在1.0.11版中添加的。它们对于正弦、余弦(或正切)函数的结果非常有用。例如，sin(π/3)为√3/2。二的平方根是唯一可以用多种方式精确表示的数:<em class="ju">数(2，根2) </em>和<em class="ju">数(1/2，Log2) </em>。同样，有些武断地，我们只考虑这些值的主(正)根。</p><p id="ea09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有一个常数<em class="ju">数</em>叫做<em class="ju"> i </em>它的确切值是(√–1)。未来的增强可能允许基于欧拉恒等式(也许是最优雅的数学恒等式)将exp运算符与cos和sin运算符合并。它包括五个最基本的数学常数，以及四个主要的运算符:等于、加、乘和取幂。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jw"><img src="../Images/3b0d22dfbeb358f48001617c5690d1e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*C1cLqrXGmibdk-fbfX1ndA.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx translated">欧拉恒等式</figcaption></figure><p id="d964" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目前没有办法定义一个<em class="ju">数</em>等于<em class="ju"> i </em> π，因为一个数不能属于两个不同的域。但是，有一个名为<em class="ju"> iPi </em>的<em class="ju">复杂</em>常量具有适当的值。顺便说一下，如果你真的想在表达式中使用<em class="ju"> i </em>，最好在对它做任何事情之前调用<em class="ju"> normalize </em>。</p><p id="3980" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对<strong class="ih hj">号</strong>包装的讨论到此结束。目前的状态(V1.0.12)是它有不错的覆盖面，但绝不是完美的。有超过1，000个单元测试，但是还需要更多的测试，有几个被忽略了，等待小问题的解决。如果您有兴趣了解它是如何工作的，可以克隆存储库并运行各种工作表。暂时忽略<em class="ju"> misc </em>包中的代码。我当然希望有贡献者加入到知识库中。</p><p id="2989" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以通过以下<em class="ju"> sbt </em>指令在您的项目中使用编号包:</p><h2 id="1705" class="jx jy hi bd jz ka kb kc kd ke kf kg kh iq ki kj kk iu kl km kn iy ko kp kq kr bi translated">library dependencies+= " com . phasmidsoftware " % " number _ 2.13 " % " 1 . 0 . 12 "</h2></div></div>    
</body>
</html>