<html>
<head>
<title>Cleaning Up Laravel Controllers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ¸…ç†Laravelæ§åˆ¶å™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/cleaning-up-laravel-controllers-a2934b7bf1c?source=collection_archive---------1-----------------------#2021-06-25">https://medium.com/codex/cleaning-up-laravel-controllers-a2934b7bf1c?source=collection_archive---------1-----------------------#2021-06-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5971a346715b5a91110e07d6139517d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zZNJV6927FosfK1C.png"/></div></div></figure><h1 id="ed28" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">ä»‹ç»</h1><p id="7ff7" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">æ§åˆ¶å™¨åœ¨ä»»ä½•åŸºäº<a class="ae km" href="https://www.guru99.com/mvc-tutorial.html" rel="noopener ugc nofollow" target="_blank"> MVC </a>(æ¨¡å‹è§†å›¾æ§åˆ¶å™¨)çš„é¡¹ç›®ä¸­æ‰®æ¼”ç€å·¨å¤§çš„è§’è‰²ã€‚å®ƒä»¬å®é™…ä¸Šæ˜¯â€œç²˜åˆå‰‚â€ï¼Œæ¥å—ç”¨æˆ·çš„è¯·æ±‚ï¼Œæ‰§è¡ŒæŸç§é€»è¾‘ï¼Œç„¶åè¿”å›å“åº”ã€‚å¦‚æœä½ æ›¾ç»åšè¿‡ä»»ä½•ç›¸å½“å¤§çš„é¡¹ç›®ï¼Œä½ ä¼šæ³¨æ„åˆ°ä½ ä¼šæœ‰å¾ˆå¤šæ§åˆ¶å™¨ï¼Œå®ƒä»¬ä¼šåœ¨ä½ æ²¡æœ‰æ„è¯†åˆ°çš„æƒ…å†µä¸‹å¾ˆå¿«å˜å¾—æ··ä¹±ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•åœ¨<a class="ae km" href="https://laravel.com" rel="noopener ugc nofollow" target="_blank"> Laravel </a>ä¸­æ¸…ç†è‡ƒè‚¿çš„æ§åˆ¶å™¨ã€‚</p><h1 id="4969" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">è‡ƒè‚¿çš„æ§åˆ¶å™¨çš„é—®é¢˜</h1><p id="b24d" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">è‡ƒè‚¿çš„æ§åˆ¶å™¨ä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥å‡ ä¸ªé—®é¢˜ã€‚ä»–ä»¬å¯ä»¥:</p><ol class=""><li id="fe90" class="kn ko hi jq b jr kp jv kq jz kr kd ks kh kt kl ku kv kw kx bi translated"><strong class="jq hj">ä½¿è¿½è¸ªç‰¹å®šçš„ä»£ç æˆ–åŠŸèƒ½å˜å¾—å›°éš¾ã€‚</strong>å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªè‡ƒè‚¿çš„æ§åˆ¶å™¨ä¸­å¤„ç†ä¸€æ®µç‰¹å®šçš„ä»£ç ï¼Œä½ å¯èƒ½éœ€è¦èŠ±ä¸€äº›æ—¶é—´æ¥è¿½è¸ªè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šåœ¨å“ªä¸ªæ§åˆ¶å™¨ä¸­ã€‚å½“ä½¿ç”¨é€»è¾‘ä¸Šåˆ†ç¦»çš„å¹²å‡€æ§åˆ¶å™¨æ—¶ï¼Œè¿™è¦å®¹æ˜“å¾—å¤šã€‚</li><li id="a884" class="kn ko hi jq b jr ky jv kz jz la kd lb kh lc kl ku kv kw kx bi translated">ä½¿å‘ç°é”™è¯¯çš„å‡†ç¡®ä½ç½®å˜å¾—å›°éš¾ã€‚æ­£å¦‚æˆ‘ä»¬å°†åœ¨åé¢çš„ä»£ç ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å¤„ç†æˆæƒã€éªŒè¯ã€ä¸šåŠ¡é€»è¾‘å’Œå“åº”æ„å»ºï¼Œå¯èƒ½å¾ˆéš¾å‡†ç¡®å®šä½é”™è¯¯ã€‚</li><li id="2a3e" class="kn ko hi jq b jr ky jv kz jz la kd lb kh lc kl ku kv kw kx bi translated">ä¸ºæ›´å¤æ‚çš„è¯·æ±‚ç¼–å†™æµ‹è¯•å˜å¾—æ›´åŠ å›°éš¾ã€‚æœ‰æ—¶ä¸ºå¤æ‚çš„æ§åˆ¶å™¨æ–¹æ³•ç¼–å†™æµ‹è¯•ä¼šå¾ˆå›°éš¾ï¼Œè¿™äº›æ–¹æ³•æœ‰å¾ˆå¤šè¡Œï¼Œå¹¶ä¸”åšè®¸å¤šä¸åŒçš„äº‹æƒ…ã€‚æ¸…ç†ä»£ç ä½¿æµ‹è¯•å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£å¦‚ä½•è®©ä½ çš„Laravelåº”ç”¨ç¨‹åºæ›´å…·å¯æµ‹è¯•æ€§<a class="ae km" href="https://ashallendesign.co.uk/blog/how-to-make-your-laravel-app-more-testable" rel="noopener ugc nofollow" target="_blank">ï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚</a></li></ol><h1 id="a5e8" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">è‡ƒè‚¿çš„æ§åˆ¶å™¨</h1><p id="5810" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å¯¹äºæœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¾‹å­<code class="du ld le lf lg b">UserController</code>:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="db6b" class="lp ir hi lg b fi lq lr l ls lt">class UserController extends Controller<br/>{<br/>    public function store(Request $request): RedirectResponse<br/>    {<br/>        $this-&gt;authorize('create', User::class);</span><span id="c7a7" class="lp ir hi lg b fi lu lr l ls lt">        $request-&gt;validate([<br/>            'name'     =&gt; 'string|required|max:50',<br/>            'email'    =&gt; 'email|required|unique:users',<br/>            'password' =&gt; 'string|required|confirmed',<br/>        ]);</span><span id="25f7" class="lp ir hi lg b fi lu lr l ls lt">        $user = User::create([<br/>            'name'     =&gt; $request-&gt;name,<br/>            'email'    =&gt; $request-&gt;email,<br/>            'password' =&gt; $request-&gt;password,<br/>        ]);</span><span id="226d" class="lp ir hi lg b fi lu lr l ls lt">        $user-&gt;generateAvatar();<br/>        $this-&gt;dispatch(RegisterUserToNewsletter::class);</span><span id="c2d3" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }</span><span id="d826" class="lp ir hi lg b fi lu lr l ls lt">    public function unsubscribe(User $user): RedirectResponse<br/>    {<br/>        $user-&gt;unsubscribeFromNewsletter();</span><span id="0181" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }<br/>}</span></pre><p id="5f4c" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ä¸ºäº†è®©äº‹æƒ…çœ‹èµ·æ¥ç®€å•æ˜äº†ï¼Œæˆ‘æ²¡æœ‰åœ¨æ§åˆ¶å™¨ä¸­åŒ…å«<code class="du ld le lf lg b">index()</code>ã€<code class="du ld le lf lg b">create()</code>ã€<code class="du ld le lf lg b">edit()</code>ã€<code class="du ld le lf lg b">update()</code>å’Œ<code class="du ld le lf lg b">delete()</code>æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä»¬å°†å‡è®¾å®ƒä»¬åœ¨é‚£é‡Œï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿä½¿ç”¨ä¸‹é¢çš„æŠ€æœ¯æ¥æ¸…ç†é‚£äº›æ–¹æ³•ã€‚åœ¨æœ¬æ–‡çš„å¤§éƒ¨åˆ†æ—¶é—´é‡Œï¼Œæˆ‘ä»¬å°†ä¸“æ³¨äºä¼˜åŒ–<code class="du ld le lf lg b">store()</code>æ–¹æ³•ã€‚</p><h1 id="4f35" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">1.å°†éªŒè¯å’Œæˆæƒæå‡åˆ°è¡¨å•è¯·æ±‚</h1><p id="f63b" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">æˆ‘ä»¬å¯ä»¥å¯¹æ§åˆ¶å™¨åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å°†ä»»ä½•éªŒè¯å’Œæˆæƒä»æ§åˆ¶å™¨ä¸­å–å‡ºï¼Œæ”¾å…¥ä¸€ä¸ª<a class="ae km" href="https://laravel.com/docs/8.x/validation#form-request-validation" rel="noopener ugc nofollow" target="_blank">è¡¨å•è¯·æ±‚</a>ç±»ä¸­ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä¸ºæ§åˆ¶å™¨çš„<code class="du ld le lf lg b">store()</code>æ–¹æ³•åšè¿™ä»¶äº‹ã€‚</p><p id="73f2" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢çš„Artisanå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨å•è¯·æ±‚:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="7c86" class="lp ir hi lg b fi lq lr l ls lt">php artisan make:request StoreUserRequest</span></pre><p id="fd9f" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ä¸Šé¢çš„å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="du ld le lf lg b">app/Http/Requests/StoreUserRequest.php</code>ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="0e83" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserRequest extends FormRequest<br/>{<br/>    /**<br/>     * Determine if the user is authorized to make this request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> bool<br/>     */<br/>    public function authorize()<br/>    {<br/>        return false;<br/>    }</span><span id="66c6" class="lp ir hi lg b fi lu lr l ls lt">    /**<br/>     * Get the validation rules that apply to the request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> array<br/>     */<br/>    public function rules()<br/>    {<br/>        return [<br/>            //<br/>        ];<br/>    }<br/>}</span></pre><p id="dac7" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="du ld le lf lg b">authorize()</code>æ–¹æ³•æ¥å†³å®šæ˜¯å¦å…è®¸ç”¨æˆ·æ‰§è¡Œè¯·æ±‚ã€‚å¦‚æœå¯ä»¥ï¼Œè¯¥æ–¹æ³•åº”è¯¥è¿”å›<code class="du ld le lf lg b">true</code>ï¼Œå¦‚æœä¸èƒ½ï¼Œåº”è¯¥è¿”å›<code class="du ld le lf lg b">false</code>ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code class="du ld le lf lg b">rules()</code>æ–¹æ³•æ¥æŒ‡å®šåº”è¯¥åœ¨è¯·æ±‚ä½“ä¸Šè¿è¡Œçš„ä»»ä½•éªŒè¯è§„åˆ™ã€‚åœ¨æˆ‘ä»¬è¿è¡Œæ§åˆ¶å™¨æ–¹æ³•ä¸­çš„ä»»ä½•ä»£ç ä¹‹å‰ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šè‡ªåŠ¨è¿è¡Œï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨å®ƒä»¬ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="ef0e" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserRequest extends FormRequest<br/>{<br/>    /**<br/>     * Determine if the user is authorized to make this request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> bool<br/>     */<br/>    public function authorize(): bool<br/>    {<br/>        return Gate::allows('create', User::class);<br/>    }</span><span id="4d11" class="lp ir hi lg b fi lu lr l ls lt">    /**<br/>     * Get the validation rules that apply to the request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> array<br/>     */<br/>    public function rules(): array<br/>    {<br/>        return [<br/>            'name'     =&gt; 'string|required|max:50',<br/>            'email'    =&gt; 'email|required|unique:users',<br/>            'password' =&gt; 'string|required|confirmed',<br/>        ];<br/>    }<br/>}</span></pre><p id="e7d3" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æˆ‘ä»¬çš„æ§åˆ¶å™¨ç°åœ¨çœ‹èµ·æ¥ä¹Ÿåº”è¯¥åƒè¿™æ ·:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="a417" class="lp ir hi lg b fi lq lr l ls lt">class UserController extends Controller<br/>{<br/>    public function store(StoreUserRequest $request): RedirectResponse<br/>    {<br/>        $user = User::create([<br/>            'name'     =&gt; $request-&gt;name,<br/>            'email'    =&gt; $request-&gt;email,<br/>            'password' =&gt; $request-&gt;password,<br/>        ]);</span><span id="1837" class="lp ir hi lg b fi lu lr l ls lt">        $user-&gt;generateAvatar();<br/>        $this-&gt;dispatch(RegisterUserToNewsletter::class);</span><span id="cee1" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }</span><span id="baaa" class="lp ir hi lg b fi lu lr l ls lt">    public function unsubscribe(User $user): RedirectResponse<br/>    {<br/>        $user-&gt;unsubscribeFromNewsletter();</span><span id="98ac" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }<br/>}</span></pre><p id="2ec2" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated"><strong class="jq hj">æ³¨æ„</strong>:ä¸ºäº†è‡ªåŠ¨å·¥ä½œï¼Œä½ éœ€è¦ç¡®ä¿ä½ çš„æ§åˆ¶å™¨æ­£åœ¨ä½¿ç”¨<code class="du ld le lf lg b">\Illuminate\Foundation\Auth\Access\AuthorizesRequests</code>å’Œ<code class="du ld le lf lg b">\Illuminate\Foundation\Validation\ValidatesRequests</code>ç‰¹å¾ã€‚è¿™äº›è‡ªåŠ¨åŒ…å«åœ¨Laravelä¸ºæ‚¨æä¾›çš„å…¨æ–°å®‰è£…çš„æ§åˆ¶å™¨ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨æ­£åœ¨æ‰©å±•æ§åˆ¶å™¨ï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹äº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·ç¡®ä¿å°†è¿™äº›ç‰¹å¾åŒ…å«åˆ°æ‚¨çš„æ§åˆ¶å™¨ä¸­ã€‚</p><h1 id="50fe" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">2.å°†é€šç”¨é€»è¾‘ç§»åŠ¨åˆ°åŠ¨ä½œæˆ–æœåŠ¡ä¸­</h1><p id="f224" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">æˆ‘ä»¬å¯ä»¥é‡‡å–çš„æ¸…ç†<code class="du ld le lf lg b">store()</code>æ–¹æ³•çš„å¦ä¸€ä¸ªæ­¥éª¤æ˜¯å°†æˆ‘ä»¬çš„â€œä¸šåŠ¡é€»è¾‘â€è½¬ç§»åˆ°ä¸€ä¸ªå•ç‹¬çš„åŠ¨ä½œæˆ–æœåŠ¡ç±»ä¸­ã€‚</p><p id="d30c" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">åœ¨è¿™ä¸ªç‰¹å®šçš„ç”¨ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code class="du ld le lf lg b">store()</code>æ–¹æ³•çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œç”Ÿæˆä»–ä»¬çš„å¤´åƒï¼Œç„¶ååˆ†æ´¾ä¸€ä¸ªé˜Ÿåˆ—ä½œä¸šï¼Œå°†ç”¨æˆ·æ³¨å†Œåˆ°æ—¶äº‹é€šè®¯ä¸­ã€‚åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼Œä¸€ä¸ªåŠ¨ä½œæ¯”ä¸€ä¸ªæœåŠ¡æ›´é€‚åˆè¿™ä¸ªä¾‹å­ã€‚æˆ‘æ›´å–œæ¬¢ç”¨è¡ŒåŠ¨æ¥å®Œæˆåªåšç‰¹å®šäº‹æƒ…çš„å°ä»»åŠ¡ã€‚è€Œå¯¹äºå¯èƒ½é•¿è¾¾æ•°ç™¾è¡Œå¹¶æ‰§è¡Œå¤šé¡¹ä»»åŠ¡çš„å¤§é‡ä»£ç ï¼Œå®ƒæ›´é€‚åˆäºæœåŠ¡ã€‚</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="3502" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserAction<br/>{<br/>    public function execute(Request $request): void<br/>    {<br/>        $user = User::create([<br/>            'name'     =&gt; $request-&gt;name,<br/>            'email'    =&gt; $request-&gt;email,<br/>            'password' =&gt; $request-&gt;password,<br/>        ]);</span><span id="469b" class="lp ir hi lg b fi lu lr l ls lt">        $user-&gt;generateAvatar();<br/>        $this-&gt;dispatch(RegisterUserToNewsletter::class);<br/>    }<br/>}</span></pre><p id="8439" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥æ›´æ–°æˆ‘ä»¬çš„æ§åˆ¶å™¨æ¥ä½¿ç”¨åŠ¨ä½œ:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="ed35" class="lp ir hi lg b fi lq lr l ls lt">class UserController extends Controller<br/>{<br/>    public function store(StoreUserRequest $request, StoreUserAction $storeUserAction): RedirectResponse<br/>    {<br/>        $storeUserAction-&gt;execute($request);</span><span id="c678" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }</span><span id="72f0" class="lp ir hi lg b fi lu lr l ls lt">    public function unsubscribe(User $user): RedirectResponse<br/>    {<br/>        $user-&gt;unsubscribeFromNewsletter();</span><span id="e175" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }<br/>}</span></pre><p id="e43a" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»èƒ½å¤Ÿå°†ä¸šåŠ¡é€»è¾‘ä»æ§åˆ¶å™¨æ–¹æ³•ä¸­æå‡åˆ°æ“ä½œä¸­ã€‚è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œæ§åˆ¶å™¨æœ¬è´¨ä¸Šæ˜¯æˆ‘ä»¬è¯·æ±‚å’Œå“åº”çš„â€œç²˜åˆå‰‚â€ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¿æŒä»£ç é€»è¾‘ä¸Šçš„åˆ†ç¦»ï¼Œå‡å°‘äº†ç†è§£ä¸€ä¸ªæ–¹æ³•åšä»€ä¹ˆçš„è®¤çŸ¥è´Ÿè·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ£€æŸ¥æˆæƒæˆ–éªŒè¯ï¼Œæˆ‘ä»¬çŸ¥é“è¦æ£€æŸ¥è¡¨å•è¯·æ±‚ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ£€æŸ¥å¯¹è¯·æ±‚æ•°æ®åšäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æ“ä½œã€‚</p><p id="dde0" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">å°†ä»£ç æŠ½è±¡æˆè¿™äº›ç‹¬ç«‹çš„ç±»çš„å¦ä¸€ä¸ªå·¨å¤§å¥½å¤„æ˜¯ï¼Œå®ƒå¯ä»¥ä½¿æµ‹è¯•å˜å¾—æ›´åŠ å®¹æ˜“å’Œå¿«é€Ÿã€‚æˆ‘åœ¨æˆ‘è¿‡å»çš„æ–‡ç« <a class="ae km" href="https://ashallendesign.co.uk/blog/how-to-make-your-laravel-app-more-testable" rel="noopener ugc nofollow" target="_blank">ä¸­ç®€å•åœ°è°ˆåˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¦‚ä½•è®©ä½ çš„Laravelåº”ç”¨ç¨‹åºæ›´å…·å¯æµ‹è¯•æ€§</a>ï¼›æ‰€ä»¥ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰è¯»è¿‡ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ è¯»ä¸€è¯»ã€‚</p><h1 id="3e5a" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">å°†dtoä¸æ“ä½œä¸€èµ·ä½¿ç”¨</h1><p id="74fb" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å°†ä¸šåŠ¡é€»è¾‘æå–åˆ°æœåŠ¡å’Œç±»ä¸­çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œæ‚¨ç°åœ¨å¯ä»¥åœ¨ä¸åŒçš„åœ°æ–¹ä½¿ç”¨è¯¥é€»è¾‘ï¼Œè€Œæ— éœ€å¤åˆ¶ä»£ç ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤„ç†ä¼ ç»Ÿwebè¯·æ±‚çš„<code class="du ld le lf lg b">UserController</code>å’Œä¸€ä¸ªå¤„ç†APIè¯·æ±‚çš„<code class="du ld le lf lg b">Api\UserController</code>ã€‚ä¸ºäº†ä¾¿äºè®¨è®ºï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾è¿™äº›æ§åˆ¶å™¨çš„<code class="du ld le lf lg b">store()</code>æ–¹æ³•çš„ä¸€èˆ¬ç»“æ„æ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„APIè¦æ±‚æˆ‘ä»¬ä¸ä½¿ç”¨<code class="du ld le lf lg b">email</code>å­—æ®µï¼Œè€Œæ˜¯ä½¿ç”¨<code class="du ld le lf lg b">email_address</code>å­—æ®µï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¸èƒ½å°†æˆ‘ä»¬çš„è¯·æ±‚å¯¹è±¡ä¼ é€’ç»™<code class="du ld le lf lg b">StoreUserAction</code>ç±»ï¼Œå› ä¸ºå®ƒæœŸæœ›ä¸€ä¸ªå…·æœ‰<code class="du ld le lf lg b">email</code>å­—æ®µçš„è¯·æ±‚å¯¹è±¡ã€‚</p><p id="591c" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a class="ae km" href="https://en.wikipedia.org/wiki/Data_transfer_object" rel="noopener ugc nofollow" target="_blank">dto</a>(æ•°æ®ä¼ è¾“å¯¹è±¡)ã€‚è¿™æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„è§£è€¦æ•°æ®çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿä»£ç ä¸­ä¼ é€’æ•°æ®ï¼Œè€Œä¸ä¼šä¸ä»»ä½•ä¸œè¥¿(åœ¨æœ¬ä¾‹ä¸­æ˜¯è¯·æ±‚)ç´§å¯†è€¦åˆã€‚è¦å°†dtoæ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Spatieçš„<code class="du ld le lf lg b">spatie/data-transfer-object</code> <a class="ae km" href="https://github.com/spatie/data-transfer-object" rel="noopener ugc nofollow" target="_blank">åŒ…</a>ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹Artisanå‘½ä»¤å®‰è£…å®ƒ:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="b95e" class="lp ir hi lg b fi lq lr l ls lt">composer require spatie/data-transfer-object</span></pre><p id="a9a5" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…äº†è¿™ä¸ªåŒ…ï¼Œè®©æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„<code class="du ld le lf lg b">App</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="du ld le lf lg b">DataTransferObjects</code>æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="du ld le lf lg b">StoreUserDTO.php</code>ç±»ã€‚ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬çš„d toæ‰©å±•<code class="du ld le lf lg b">Spatie\DataTransferObject\DataTransferObject</code>ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰æˆ‘ä»¬çš„ä¸‰ä¸ªå­—æ®µ:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="ee7e" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserDTO extends DataTransferObject<br/>{<br/>    public string $name;<br/>    <br/>    public string $email;<br/> <br/>    public string $password;<br/>}</span></pre><p id="305b" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰é¢çš„<code class="du ld le lf lg b">StoreUserRequest</code>ä¸­æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•æ¥åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª<code class="du ld le lf lg b">StoreUserDTO</code>ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="b35a" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserRequest extends FormRequest<br/>{<br/>    /**<br/>     * Determine if the user is authorized to make this request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> bool<br/>     */<br/>    public function authorize(): bool<br/>    {<br/>        return Gate::allows('create', User::class);<br/>    }</span><span id="eba2" class="lp ir hi lg b fi lu lr l ls lt">    /**<br/>     * Get the validation rules that apply to the request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> array<br/>     */<br/>    public function rules(): array<br/>    {<br/>        return [<br/>            'name'     =&gt; 'string|required|max:50',<br/>            'email'    =&gt; 'email|required|unique:users',<br/>            'password' =&gt; 'string|required|confirmed',<br/>        ];<br/>    }<br/>  <br/>    /**<br/>     * Build and return a DTO.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> StoreUserDTO<br/>     */<br/>    public function toDTO(): StoreUserDTO<br/>    {<br/>        return new StoreUserDTO(<br/>            name: $this-&gt;name,<br/>            email: $this-&gt;email,<br/>            password: $this-&gt;password,<br/>        );<br/>    } <br/>}</span></pre><p id="a09e" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥æ›´æ–°æ§åˆ¶å™¨ï¼Œå°†DTOä¼ é€’ç»™åŠ¨ä½œç±»:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="0eaf" class="lp ir hi lg b fi lq lr l ls lt">class UserController extends Controller<br/>{<br/>    public function store(StoreUserRequest $request, StoreUserAction $storeUserAction): RedirectResponse<br/>    {<br/>        $storeUserAction-&gt;execute($request-&gt;toDTO());</span><span id="2d3e" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }</span><span id="afab" class="lp ir hi lg b fi lu lr l ls lt">    public function unsubscribe(User $user): RedirectResponse<br/>    {<br/>        $user-&gt;unsubscribeFromNewsletter();</span><span id="e65f" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }<br/>}</span></pre><p id="265a" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æœ€åï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°åŠ¨ä½œçš„æ–¹æ³•ï¼Œä»¥æ¥å—d toä½œä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯è¯·æ±‚å¯¹è±¡:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="8dd7" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserAction<br/>{<br/>    public function execute(StoreUserDTO $storeUserDTO): void<br/>    {<br/>        $user = User::create([<br/>            'name'     =&gt; $storeUserDTO-&gt;name,<br/>            'email'    =&gt; $storeUserDTO-&gt;email,<br/>            'password' =&gt; $storeUserDTO-&gt;password,<br/>        ]);</span><span id="9a45" class="lp ir hi lg b fi lu lr l ls lt">        $user-&gt;generateAvatar();<br/>        $this-&gt;dispatch(RegisterUserToNewsletter::class);<br/>    }<br/>}</span></pre><p id="2733" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ä½œä¸ºå®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œçš„ç»“æœï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å°†æˆ‘ä»¬çš„æ“ä½œä¸è¯·æ±‚å¯¹è±¡å®Œå…¨åˆ†ç¦»äº†ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨æ•´ä¸ªç³»ç»Ÿçš„å¤šä¸ªåœ°æ–¹é‡ç”¨è¿™ä¸ªåŠ¨ä½œï¼Œè€Œä¸å¿…ç»‘å®šåˆ°ç‰¹å®šçš„è¯·æ±‚ç»“æ„ã€‚æˆ‘ä»¬ç°åœ¨è¿˜èƒ½å¤Ÿåœ¨CLIç¯å¢ƒæˆ–ä¸ä¾èµ–äºwebè¯·æ±‚çš„é˜Ÿåˆ—ä½œä¸šä¸­ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå…·æœ‰ä»CSVæ–‡ä»¶å¯¼å…¥ç”¨æˆ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿä»CSVæ•°æ®æ„å»ºdtoå¹¶å°†å…¶ä¼ é€’ç»™æ“ä½œã€‚</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="3a81" class="lp ir hi lg b fi lq lr l ls lt">class StoreUserAPIRequest extends FormRequest<br/>{<br/>    /**<br/>     * Determine if the user is authorized to make this request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> bool<br/>     */<br/>    public function authorize(): bool<br/>    {<br/>        return Gate::allows('create', User::class);<br/>    }</span><span id="e867" class="lp ir hi lg b fi lu lr l ls lt">    /**<br/>     * Get the validation rules that apply to the request.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> array<br/>     */<br/>    public function rules(): array<br/>    {<br/>        return [<br/>            'name'          =&gt; 'string|required|max:50',<br/>            'email_address' =&gt; 'email|required|unique:users',<br/>            'password'      =&gt; 'string|required|confirmed',<br/>        ];<br/>    }<br/>  <br/>    /**<br/>     * Build and return a DTO.<br/>     *<br/>     * <a class="ae km" href="http://twitter.com/return" rel="noopener ugc nofollow" target="_blank">@return</a> StoreUserDTO<br/>     */<br/>    public function toDTO(): StoreUserDTO<br/>    {<br/>        return new StoreUserDTO(<br/>            name: $this-&gt;name,<br/>            email: $this-&gt;email_address,<br/>            password: $this-&gt;password,<br/>        );<br/>    } <br/>}</span></pre><h1 id="420d" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">3.ä½¿ç”¨èµ„æºæˆ–å•ä¸€ç”¨é€”æ§åˆ¶å™¨</h1><p id="82ac" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">ä¿æŒæ§åˆ¶å™¨å¹²å‡€çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯ç¡®ä¿å®ƒä»¬è¦ä¹ˆæ˜¯"<a class="ae km" href="https://laravel.com/docs/8.x/controllers#resource-controllers" rel="noopener ugc nofollow" target="_blank">èµ„æºæ§åˆ¶å™¨</a>è¦ä¹ˆæ˜¯"<a class="ae km" href="https://laravel.com/docs/8.x/controllers#single-action-controllers" rel="noopener ugc nofollow" target="_blank">å•ç”¨é€”æ§åˆ¶å™¨</a>"ã€‚åœ¨æˆ‘ä»¬è¿›ä¸€æ­¥å°è¯•æ›´æ–°æˆ‘ä»¬çš„ç¤ºä¾‹æ§åˆ¶å™¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸¤ä¸ªæœ¯è¯­çš„å«ä¹‰ã€‚</p><p id="fc77" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">èµ„æºæ§åˆ¶å™¨æ˜¯åŸºäºç‰¹å®šèµ„æºæä¾›åŠŸèƒ½çš„æ§åˆ¶å™¨ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„èµ„æºæ˜¯<code class="du ld le lf lg b">User</code>æ¨¡å‹ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨è¿™ä¸ªæ¨¡å‹ä¸Šæ‰§è¡Œæ‰€æœ‰çš„<a class="ae km" href="https://www.codecademy.com/articles/what-is-crud" rel="noopener ugc nofollow" target="_blank"> CRUD </a>(åˆ›å»ºã€æ›´æ–°ã€æ›´æ–°ã€åˆ é™¤)æ“ä½œã€‚ä¸€ä¸ªèµ„æºæ§åˆ¶å™¨é€šå¸¸åŒ…å«<code class="du ld le lf lg b">index()</code>ã€<code class="du ld le lf lg b">create()</code>ã€<code class="du ld le lf lg b">store()</code>ã€<code class="du ld le lf lg b">show()</code>ã€<code class="du ld le lf lg b">edit()</code>ã€<code class="du ld le lf lg b">update()</code>å’Œ<code class="du ld le lf lg b">destroy()</code>æ–¹æ³•ã€‚å®ƒä¸ä¸€å®šè¦åŒ…æ‹¬æ‰€æœ‰è¿™äº›æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä¸ä¼šæœ‰ä»»ä½•ä¸åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­çš„æ–¹æ³•ã€‚é€šè¿‡ä½¿ç”¨è¿™äº›ç±»å‹çš„æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿æˆ‘ä»¬çš„è·¯ç”±RESTfulã€‚å…³äºRESTå’ŒRESTfulè·¯ç”±çš„æ›´å¤šä¿¡æ¯ï¼Œ<a class="ae km" href="https://www.codecademy.com/articles/what-is-rest" rel="noopener ugc nofollow" target="_blank">ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹æœ¬æ–‡</a>ã€‚</p><p id="1075" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">å•ä¸€ç”¨é€”æ§åˆ¶å™¨æ˜¯åªæœ‰ä¸€ä¸ªå…¬å…±<code class="du ld le lf lg b">__invoke()</code>æ–¹æ³•çš„æ§åˆ¶å™¨ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªä¸é€‚åˆRESTfulæ–¹æ³•çš„æ§åˆ¶å™¨ï¼Œè¿™äº›çœŸçš„å¾ˆæœ‰ç”¨ã€‚</p><p id="63b4" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">å› æ­¤ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹Artisanå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="2f9e" class="lp ir hi lg b fi lq lr l ls lt">php artisan make:controller UnsubscribeUserController -i</span></pre><p id="00dd" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•å°†<code class="du ld le lf lg b">-i</code>ä¼ é€’ç»™å‘½ä»¤çš„ï¼Œè¿™æ ·æ–°çš„æ§åˆ¶å™¨å°†æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„ã€å•ä¸€ç”¨é€”çš„æ§åˆ¶å™¨ã€‚æˆ‘ä»¬ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„æ§åˆ¶å™¨:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="d7f9" class="lp ir hi lg b fi lq lr l ls lt">class UnsubscribeUserController extends Controller<br/>{<br/>    public function __invoke(Request $request)<br/>    {<br/>        //<br/>    }<br/>}</span></pre><p id="25ff" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥ç§»åŠ¨æˆ‘ä»¬æ–¹æ³•çš„ä»£ç ï¼Œå¹¶ä»æˆ‘ä»¬çš„æ—§æ§åˆ¶å™¨ä¸­åˆ é™¤<code class="du ld le lf lg b">unsubscribe</code>æ–¹æ³•:</p><pre class="lh li lj lk fd ll lg lm ln aw lo bi"><span id="c21d" class="lp ir hi lg b fi lq lr l ls lt">class UnsubscribeUserController extends Controller<br/>{<br/>    public function __invoke(Request $request): RedirectResponse<br/>    {<br/>        $user-&gt;unsubscribeFromNewsletter();</span><span id="f586" class="lp ir hi lg b fi lu lr l ls lt">        return redirect(route('users.index'));<br/>    }<br/>}</span></pre><h1 id="f20c" class="iq ir hi bd is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn bi translated">ç»“è®º</h1><p id="5e37" class="pw-post-body-paragraph jo jp hi jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl hb bi translated">å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©ä½ æ·±å…¥äº†è§£åœ¨Laravelé¡¹ç›®ä¸­æ¸…ç†æ§åˆ¶å™¨çš„ä¸åŒæ–¹æ³•ã€‚è¯·è®°ä½ï¼Œè™½ç„¶æˆ‘åœ¨è¿™é‡Œä½¿ç”¨çš„æŠ€æœ¯åªæ˜¯æˆ‘ä¸ªäººçš„æ„è§ã€‚æˆ‘ç¡®ä¿¡è¿˜æœ‰å…¶ä»–å¼€å‘è€…ä¼šä½¿ç”¨å®Œå…¨ä¸åŒçš„æ–¹æ³•æ¥æ„å»ºä»–ä»¬çš„æ§åˆ¶å™¨ã€‚æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ä¿æŒä¸€è‡´ï¼Œä½¿ç”¨é€‚åˆä½ (å’Œä½ çš„å›¢é˜Ÿ)å·¥ä½œæµç¨‹çš„æ–¹æ³•ã€‚</p><p id="1345" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">æˆ‘å¾ˆæƒ³åœ¨è¯„è®ºä¸­å¬åˆ°ä½ ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„æŠ€æœ¯æ¥ç¼–å†™å¹²å‡€çš„æ§åˆ¶å™¨ã€‚</p><p id="e732" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">å¦‚æœä½ ä¹Ÿè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·éšæ„<a class="ae km" href="https://ashallendesign.co.uk/blog" rel="noopener ugc nofollow" target="_blank">æ³¨å†Œæˆ‘çš„æ—¶äº‹é€šè®¯</a>ï¼Œè¿™æ ·æ¯å½“æˆ‘å‘å¸ƒç±»ä¼¼è¿™ç¯‡æ–‡ç« çš„æ–°å¸–å­æ—¶ï¼Œä½ éƒ½èƒ½å¾—åˆ°é€šçŸ¥ã€‚</p><p id="76f8" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated">ç»§ç»­å»ºé€ ä»¤äººæ•¬ç•çš„ä¸œè¥¿ï¼ğŸš€</p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="e501" class="pw-post-body-paragraph jo jp hi jq b jr kp jt ju jv kq jx jy jz lv kb kc kd lw kf kg kh lx kj kk kl hb bi translated"><em class="mf">åŸè½½äº</em><a class="ae km" href="https://ashallendesign.co.uk/blog/cleaning-up-laravel-controllers" rel="noopener ugc nofollow" target="_blank"><em class="mf">https://ashallendesign.co.uk</em></a><em class="mf">ã€‚</em></p></div></div>    
</body>
</html>