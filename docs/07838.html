<html>
<head>
<title>AWS Certified Solutions Architect Professional -Identity Federation - Directory Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS认证解决方案架构师专家-身份联盟-目录服务</h1>
<blockquote>原文：<a href="https://medium.com/codex/aws-certified-solutions-architect-professional-identity-federation-directory-services-895807d86497?source=collection_archive---------6-----------------------#2022-06-30">https://medium.com/codex/aws-certified-solutions-architect-professional-identity-federation-directory-services-895807d86497?source=collection_archive---------6-----------------------#2022-06-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="54d1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于AWS目录服务的简要说明。这篇文章是由夏羽·马瑞克教授的《终极AWS认证解决方案架构师》课程的一个简要说明。这个帖子的唯一目的是一个总结，如果你想要详细的学习，请购买夏羽·马雷克的课程。</p></div><div class="ab cl jd je gp jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="hb hc hd he hf"><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es jk"><img src="../Images/d60c1a8ea2f27f9fe59b0f1d233fbeec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*2o8Ntp-Bh9eCrs8w.jpg"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自<a class="ae jw" href="https://www.stratacore.com/the-advisor/diraas-user-admin-in-cloud" rel="noopener ugc nofollow" target="_blank"> Stratacore </a></figcaption></figure><h1 id="3453" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">微软活动目录</h1><p id="89b6" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">您可以在任何具有AD域服务的Windows服务器上找到Microsoft Active Directory。</p><p id="f1c1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个对象数据库:用户、帐户、计算机、打印机和安全组。</p><p id="c83c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">集中安全管理，创建帐户，分配权限。通过登录身份验证和对目录中对象的访问控制，安全性与Active Directory集成在一起。</p><p id="dd9c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在活动目录中，对象被组织在<strong class="ih hj">树</strong>中。一群树就是一片<strong class="ih hj">森林</strong>。</p><p id="dfd6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es la"><img src="../Images/4c1fdd9aa012bd89134ffc1a3ad44da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OkNIggCx2mId35qmU1o8MQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><p id="3848" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们有一个接受John身份验证的域控制器和另一台连接到该域控制器的机器。现在，我们可以使用John的登录身份验证来访问另一台机器的资源。</p><h1 id="166b" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">AWS目录服务</h1><p id="8446" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">AWS提供了三种支持目录服务的服务。</p><h2 id="d9da" class="lf jy hi bd jz lg lh li kd lj lk ll kh iq lm ln kl iu lo lp kp iy lq lr kt ls bi translated">AWS管理的Microsoft AD</h2><p id="b7ac" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">使用AWS管理的Microsoft AD，您可以在AWS中创建您的广告，在本地管理用户，并支持MFA。</p><p id="2733" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AWS目录服务可以轻松地在AWS云中设置和运行目录，或者将您的AWS资源与现有的内部Microsoft Active Directory连接起来。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es lt"><img src="../Images/133e2178563dcde6e8f2065b4d4de2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*Bi3u_ECADw1NvPDBeNPXqQ.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><p id="ffcb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户可以在内部AD中的右侧或AWS云中的左侧进行身份验证。</p><h2 id="6262" class="lf jy hi bd jz lg lh li kd lj lk ll kh iq lm ln kl iu lo lp kp iy lq lr kt ls bi translated">AWS AD连接器</h2><p id="b9c9" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">AD Connector是一个目录网关，您可以使用它将目录请求重定向到您的内部Microsoft Active Directory，而无需在云中缓存任何信息。</p><p id="c061" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">用户通过内部AD进行管理。</p><p id="dcfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">AD Connector具有以下优势:</p><ul class=""><li id="3c69" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc lz ma mb mc bi translated">最终用户可以使用他们现有的公司凭据登录AWS应用程序。</li><li id="397b" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">无论用户是在您的内部基础架构中还是在AWS云中访问资源，您都可以一致地实施现有的安全策略。</li><li id="9ce9" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc lz ma mb mc bi translated">支持MFA。</li></ul><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mi"><img src="../Images/5a1208d56d83317f822d550db1d4d204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*pQmTvnjGY0XJ5SdioTbkkw.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><h2 id="0775" class="lf jy hi bd jz lg lh li kd lj lk ll kh iq lm ln kl iu lo lp kp iy lq lr kt ls bi translated">AWS简单活动目录</h2><p id="1856" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">这不是微软的广告，这是一个广告兼容的API，叫做Samba。</p><p id="0f2b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它不能与内部AD结合。</p><p id="05cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">简单AD提供AWS管理的Microsoft AD所提供功能的子集，包括管理用户帐户和组成员资格、创建和应用组策略以及安全连接到Amazon EC2实例的能力，<strong class="ih hj">但它不支持MFA </strong>。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div class="er es mj"><img src="../Images/bd75d4bee5253c0052209ab81e5f6638.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*y1Ggpsv5haMJeIgb7M3FwA.png"/></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><h1 id="4295" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">AWS管理的Microsoft AD</h1><h2 id="fa29" class="lf jy hi bd jz lg lh li kd lj lk ll kh iq lm ln kl iu lo lp kp iy lq lr kt ls bi translated">连接AWS托管AD和内部AD</h2><p id="6ec1" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">能够将您的内部广告连接到AWS管理的Microsoft广告。为此，您需要在两者之间建立直接连接或VPN连接。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mk"><img src="../Images/c7905221971240901985662a704f5bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJg-7tVrYvdAw-ZQkFwWpg.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><p id="ddb8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">左侧是我们的本地AD，它管理本地用户；右侧是AWS Manage AD，它也将管理AWS上的用户。因此，您可以设置三种森林信任:</p><ol class=""><li id="0ce8" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc ml ma mb mc bi translated">单向信任:AWS = &gt;内部部署。</li><li id="9219" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated">单向信任:内部=&gt; AWS。</li><li id="774d" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated">双向森林信任:AWS &lt;=&gt;内部部署。</li></ol><h2 id="2eaa" class="lf jy hi bd jz lg lh li kd lj lk ll kh iq lm ln kl iu lo lp kp iy lq lr kt ls bi translated">活动目录复制</h2><p id="035d" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">您可能希望在AWS上创建一个本地AD的副本，以便在直连或VPN关闭时最大限度地减少延迟。</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mm"><img src="../Images/e56a71fc7f5256d8604997498f08f663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zlCIaa-UTza3QpytlfoZkQ.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><p id="3dee" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要设置副本，您需要在EC2 Windows实例上部署AD，并且必须在本地AD和EC2 Windows实例之间设置复制。</p><p id="33af" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最后，我们可以在EC2实例和AWS Manage AD之间建立双向森林信任。</p><h1 id="277f" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">AD连接器</h1><p id="ff7b" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">AD Connector是一个目录网关，用于将目录请求重定向到您的内部Microsoft Active Directory。</p><p id="2d66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">没有缓存功能。</p><p id="9931" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">仅在内部管理用户，不可能建立信任。</p><p id="9183" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">使用VPN或直接连接建立连接</p><figure class="jl jm jn jo fd jp er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mn"><img src="../Images/6c055073e28bf916ae0757ae034e4d09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4XofGc694K_rz9GzXnM_A.png"/></div></div><figcaption class="js jt et er es ju jv bd b be z dx translated">图片来自夏羽·马瑞克</figcaption></figure><h1 id="bdd1" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">AWS简单广告</h1><p id="1694" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">简单AD是一种廉价的Active Directory兼容服务，具有通用目录功能。</p><p id="dd3c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">支持加入EC2实例，管理用户和组。</p><p id="641d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不支持MFA、RDS SQL Server或AWS SSO。</p><p id="0e20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">小型:500个用户，大型:5000个用户。</p><p id="2c41" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由Samba 4驱动，兼容微软AD。</p><p id="7705" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">低成本、小规模、基本AD兼容或LDAP兼容。</p><p id="2842" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">没有信任关系。</p><h1 id="7f63" class="jx jy hi bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结束</h1><p id="5ae4" class="pw-post-body-paragraph if ig hi ih b ii kv ik il im kw io ip iq kx is it iu ky iw ix iy kz ja jb jc hb bi translated">关于AWS目录服务的结束说明。</p><p id="3632" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关于身份联盟的所有帖子:</p><ol class=""><li id="1ae2" class="lu lv hi ih b ii ij im in iq lw iu lx iy ly jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-iam-c67d0259ac90">身份&amp;联邦——IAM</a>。</li><li id="70da" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-sts-to-assume-a-role-1ca67105b81a">身份&amp;联邦——STS承担角色</a>。</li><li id="0553" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-cognito-ec80783c3fd1">身份联盟&amp;认知联盟</a>。</li><li id="8723" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-directory-services-895807d86497">身份联盟—目录服务</a>。</li><li id="0e9d" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-aws-organizations-dd63cd701a72">身份联盟— AWS组织</a>。</li><li id="d7bd" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-organizations-service-6192fab06d98">身份联盟—组织服务控制策略</a>。</li><li id="d24a" class="lu lv hi ih b ii md im me iq mf iu mg iy mh jc ml ma mb mc bi translated"><a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-identity-federation-single-sign-on-7731df09e9a5">身份联盟—单点登录</a>。</li></ol><p id="4010" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一个<a class="ae jw" rel="noopener" href="/codex/aws-certified-solutions-architect-professional-security-cloudtrail-850006168acb">安全——云迹</a>。</p></div></div>    
</body>
</html>