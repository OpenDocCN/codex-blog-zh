<html>
<head>
<title>Free Image Hosting for .NET 6 Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">免费图像托管。净6个项目</h1>
<blockquote>原文：<a href="https://medium.com/codex/free-image-hosting-for-net-6-projects-d166d8767150?source=collection_archive---------7-----------------------#2022-08-24">https://medium.com/codex/free-image-hosting-for-net-6-projects-d166d8767150?source=collection_archive---------7-----------------------#2022-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="f822" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为您的下一个项目提供快速、简单、免费的图像托管方式</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/d01fa24cab201e11aa1aed9d9a37ff70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0tKXGJ21BDSPaFiq"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Emile Perron 在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="aa9f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在我的上一篇文章 的<a class="ae jn" rel="noopener" href="/codex/free-hosting-for-net-6-projects-f65f76f2b973">，我展示了如何托管一个. NET 6应用程序，以及一个免费的Postgres数据库<strong class="jq hj"/>。</a></p><p id="dae2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">在本指南中，我将向您展示如何为您的next实现一个非常简单明了的图像托管解决方案。NET 6项目，免费。</p><h1 id="4e5f" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">放弃</h1><p id="8590" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">使用一个免费的第三方图像托管提供商来托管你的图像是不理想的，而且有很多限制，这取决于提供商。它不适合生产应用程序。对于任何严肃的事情，你可能会想使用像亚马逊S3或Azure Blob Storage这样的云数据存储服务。</p><p id="373f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">话虽如此，它仍然是小型个人项目或概念快速验证的绝佳选择。</p><h1 id="7860" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">要求</h1><p id="71ec" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">在研究和比较可供选择的不同选项时，这些是我寻找的主要内容:</p><ul class=""><li id="16c1" class="lh li hi jq b jr js ju jv jx lj kb lk kf ll kj lm ln lo lp bi translated">合理的费率限制</li><li id="b3a0" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">无限期寿命</li><li id="2184" class="lh li hi jq b jr lq ju lr jx ls kb lt kf lu kj lm ln lo lp bi translated">易用性</li></ul><p id="d0ad" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">可供选择的选项多得惊人。我为我的项目选择的，也将在本教程中涉及的，是<strong class="jq hj"> Cloudinary </strong>。我探索过的其他选项有Flickr和Imgur，但事实证明它们在易用性和局限性方面远远不如前者。</p><h1 id="4ea2" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">云雾缭绕</h1><p id="473b" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">Cloudinary提供了一个官方的。NET SDK、简单的设置、强大而丰富的API和<strong class="jq hj">慷慨的免费计划</strong>(每月25 GB存储/25k转换/25GB带宽)。</p><p id="cdc9" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我将只向您展示<strong class="jq hj">基本图像上传</strong>。然而，如果你想进一步探索它提供的许多特性(比如转换)，可以看看他们写得很好的<a class="ae jn" href="https://cloudinary.com/documentation/dotnet_integration" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h1 id="3a46" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">设置</h1><p id="e7e7" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">要使用Cloudinary API，我们需要创建一个免费帐户并安装SDK。</p><h2 id="2f8d" class="lv kl hi bd km lw lx ly kq lz ma mb ku jx mc md kw kb me mf ky kf mg mh la mi bi translated">创建帐户</h2><p id="3240" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">前往<a class="ae jn" href="https://cloudinary.com/users/register/free" rel="noopener ugc nofollow" target="_blank"> Cloudinary </a>报名。</p><p id="20f5" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">分配的云名称将在你的所有网址中可见，所以选择一些好的名称。一句脏话加上一个随机数总是一个很好的选择。</p><p id="93d2" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">对于<strong class="jq hj">产品</strong>，确保选择<strong class="jq hj">图像和视频API的可编程媒体。</strong></p><p id="f8ee" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">创建并验证账户后，打开<a class="ae jn" href="https://cloudinary.com/console/" rel="noopener ugc nofollow" target="_blank"> <strong class="jq hj">控制台</strong> </a>，点击<strong class="jq hj">开始配置</strong>。将出现以下窗口:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mj"><img src="../Images/6afdc440c6591d5733bf9641b2ea64ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S6Wo63VPr9b6EBf8"/></div></div></figure><p id="0e9d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">这些是你的<strong class="jq hj">授权凭证</strong>，所以继续复制它们并保存在黑暗、安全的地方。我们以后会需要它们。</p><h2 id="228b" class="lv kl hi bd km lw lx ly kq lz ma mb ku jx mc md kw kb me mf ky kf mg mh la mi bi translated">安装SDK</h2><p id="0faf" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">要安装SDK，请在您的解决方案的根目录中打开一个<strong class="jq hj">终端</strong>(在Visual Studio中为CTRL +),并运行以下命令来安装包:</p><pre class="iy iz ja jb fd mk ml mm mn aw mo bi"><span id="656a" class="lv kl hi ml b fi mp mq l mr ms"><strong class="ml hj">Install-Package CloudinaryDotNet</strong></span></pre><p id="6aa7" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">或者，你可以打开<strong class="jq hj"> NuGet包管理器</strong>并搜索<em class="mt"> CloudinaryDotNet。</em></p></div><div class="ab cl mu mv gp mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hb hc hd he hf"><h1 id="c3d6" class="kk kl hi bd km kn nb kp kq kr nc kt ku io nd ip kw ir ne is ky iu nf iv la lb bi translated">服务接口</h1><p id="2f7d" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">对您使用的任何外部服务进行抽象是一个好主意。这不仅是一个很好的实践，而且还能让你使用一个小技巧，我稍后会讲到。由于这些文件将来自一个<strong class="jq hj"> HTTP API端点</strong>并且我们想要为服务提供文件信息，所以对我来说设计一个接口来接收一个IFormFiles 集合是最有意义的。然而，如果您有不同的用例，并且您不是从HTTP API端点接收这些，那么最好的选择可能是<strong class="jq hj"> byte[] </strong>。我们还想在这些图片上传后取回它们的<strong class="jq hj">URL，这样我们就可以将它们存储在我们的数据库中，这就是返回值。</strong></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">服务接口</figcaption></figure><h1 id="100c" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">服务实现</h1><p id="99fe" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">既然我们已经概述了基本接口，让我们创建一个Cloudinary实现。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">Cloudinary图像上传服务</figcaption></figure><p id="511d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">我们在构造函数中初始化Cloudinary API，使用我们之前复制的<strong class="jq hj">授权凭证</strong>。为简单起见，我将它们包含在文件中。然而，你也许应该从某种<strong class="jq hj">秘密管理器</strong>中检索它们，但这超出了本指南的范围。</p><p id="bb65" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">注意第24行。这很容易被忽略，但是如果你忘记重置内存流的位置，你将会发送一个空文件。</p><p id="2e32" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">同样，在这个例子中，我抛出了一个错误异常，这并不理想。更明智的做法是根据响应进行更细粒度的错误处理。稍后我将简要地谈到这一点。</p><h1 id="9d75" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">使用</h1><p id="9ee5" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">现在我们已经准备好了服务，让我们用它来处理一个请求。</p><p id="ba01" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">首先，确保将它添加到应用程序的DI容器中。英寸NET 6默认项目，此设置位于<strong class="jq hj"> Program.cs. </strong></p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">注册我们的CloudinaryImageUploadService</figcaption></figure><p id="054f" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">然后，我们可以将它注入我们的控制器，并在我们的一个端点内使用它:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">使用我们实现的服务的控制器示例</figcaption></figure></div><div class="ab cl mu mv gp mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hb hc hd he hf"><h1 id="a28b" class="kk kl hi bd km kn nb kp kq kr nc kt ku io nd ip kw ir ne is ky iu nf iv la lb bi translated">裁员</h1><p id="bebe" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">现在回到我之前提到的技巧。由于我们在设计服务时非常勤奋，现在很容易创建冗余服务以防我们的请求失败——例如，如果我们达到了<strong class="jq hj">速率限制</strong>。我们需要做的就是创建<strong class="jq hj"> IImageUploadService </strong>的提供者特定的实现，并注册它们:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">注册多个图像上传服务</figcaption></figure><p id="709d" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果我们现在重构我们的服务以返回，例如，<strong class="jq hj"> null </strong> on error，并将它们全部注入到我们的控制器中，我们可以确保在单个服务失败时我们的请求不会失败:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ng nh l"/></div></figure><h1 id="6638" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">结论</h1><p id="42a2" class="pw-post-body-paragraph jo jp hi jq b jr lc ij jt ju ld im jw jx le jz ka kb lf kd ke kf lg kh ki kj hb bi translated">我已经向您展示了如何从您的上传图像。NET 6应用程序免费提供给外部提供商。尽管我向您展示的是非常基础的东西，但Cloudinary提供了更多，我强烈建议您自己去探索。</p><p id="36aa" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">请在下面的评论中留下任何针对我或我的代码的问题、想法或侮辱。</p><p id="372c" class="pw-post-body-paragraph jo jp hi jq b jr js ij jt ju jv im jw jx jy jz ka kb kc kd ke kf kg kh ki kj hb bi translated">如果我帮助了你，请留下一些掌声，并与你的朋友分享这篇文章，<strong class="jq hj">否则</strong>。</p></div></div>    
</body>
</html>