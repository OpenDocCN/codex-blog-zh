<html>
<head>
<title>Android Localization: An Advanced Guide for Transifex Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android本地化:Transifex Native的高级指南</h1>
<blockquote>原文：<a href="https://medium.com/codex/android-localization-an-advanced-guide-for-transifex-native-f1471bdadc67?source=collection_archive---------11-----------------------#2021-11-28">https://medium.com/codex/android-localization-an-advanced-guide-for-transifex-native-f1471bdadc67?source=collection_archive---------11-----------------------#2021-11-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6491f482bb46b60576599d9425e0929f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oC3ZJAzLOagiBfN0igs4nw.png"/></div></div></figure><p id="31f6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">Android是全球领先的移动操作系统。根据Statista 的数据，Android拥有超过70%的全球市场份额。这就是Android本地化变得如此重要的原因。用户倾向于选择文本、数字、日期、货币等本地化的应用。</p><p id="06a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank"> Android Studio </a>为开发者提供了很多处理Android本地化的工具，只要遵循一些简单的原则。字符串应该放在字符串资源文件中，如“strings.xml”。应该避免将硬编码的字符串放在布局文件或代码中。如果你试图这样做，Android Studio甚至会警告你。本地化字符串需要创建单独的“strings.xml”文件，并将它们放在由各自的语言环境命名的子目录中。该文件可以手动编辑，也可以通过Android Studio的翻译编辑器编辑。</p><p id="db03" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这些“strings.xml”文件可以复制、翻译并移回到项目中。尽管这看起来相当简单，但是当团队中的多个开发人员在“手动”订购和管理翻译的同时添加或删除新字符串时，复杂性会显著增加。这种方法的另一个问题是，更新现有翻译或添加对新语言环境的支持需要发布新的应用程序更新。</p><p id="686b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章将解释在你的应用中集成<a class="ae jo" href="https://www.transifex.com/native/" rel="noopener ugc nofollow" target="_blank"> Transifex Native </a>将如何改善你的Android本地化工作流程。</p><p id="e4de" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">目录:</p><ul class=""><li id="5297" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated"><a class="ae jo" href="https://www.transifex.com/blog/#Over-the-air_Translation_Delivery" rel="noopener ugc nofollow" target="_blank">空中翻译传送</a></li><li id="ea0f" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><a class="ae jo" href="https://www.transifex.com/blog/#Pushing_Source_Strings_to_and_Pulling_Translations_from_Transifex" rel="noopener ugc nofollow" target="_blank">将源字符串推送到Transifex并从transi fex中拉出翻译</a></li><li id="dc2d" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><a class="ae jo" href="https://www.transifex.com/blog/#Pushing_Source_Strings" rel="noopener ugc nofollow" target="_blank">推送源字符串</a></li><li id="0b82" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><a class="ae jo" href="https://www.transifex.com/blog/#Pulling_Translations" rel="noopener ugc nofollow" target="_blank">拉动平移</a></li><li id="1fad" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated"><a class="ae jo" href="https://www.transifex.com/blog/#Handling_Pluralization_in_the_Transifex_UI" rel="noopener ugc nofollow" target="_blank">在Transifex UI中处理复数</a></li></ul><h1 id="538c" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">空中翻译传送</h1><p id="1ffc" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">使用空中翻译交付，团队可以更新翻译后的字符串，而无需发布新的应用程序更新。</p><p id="1e02" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当使用Transifex Native SDK时，您也可以在发布更新之前将最新的翻译捆绑到应用程序中。</p><p id="74cd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">由您来控制应用程序何时使用异步<a class="ae jo" href="https://transifex.github.io/transifex-java/com/transifex/txnative/TxNative.html#fetchTranslations-java.lang.String-" rel="noopener ugc nofollow" target="_blank"> fetchTranslations </a>方法从Transifex获取最新的翻译。当SDK下载了最新的翻译后，它们将在下次应用程序启动时可用。</p><p id="1b18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们从头到尾看看这些看似合理的场景:</p><ul class=""><li id="9890" class="jp jq hi is b it iu ix iy jb jr jf js jj jt jn ju jv jw jx bi translated">“Awesome”应用程序的开发人员通过transifex.jar命令行工具将字符串从Android Studio推送到Transifex。</li><li id="3533" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">本地化团队翻译推送的字符串。</li><li id="dc6f" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">开发人员使用transifex.jar的pull命令，下载这些翻译并存储在“txstrings.json”文件中，然后这些文件被捆绑在应用程序中。SDK将尝试从这些文件中加载存储的翻译。</li><li id="f845" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">开发团队在应用程序启动时添加了对<a class="ae jo" href="https://transifex.github.io/transifex-java/com/transifex/txnative/TxNative.html#fetchTranslations-java.lang.String-" rel="noopener ugc nofollow" target="_blank"> fetchTranslations </a>方法的调用，这样应用程序就可以更新缓存的翻译。</li><li id="9bb8" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">该团队在Google Play或另一家商店发布了新版本。发布后不久，支持团队就发现了一些缺失或不正确的翻译。</li><li id="ce14" class="jp jq hi is b it jy ix jz jb ka jf kb jj kc jn ju jv jw jx bi translated">团队无需重新捆绑这些翻译并发布新的更新，只需从Transifex web界面添加缺失的翻译并修复不正确的翻译即可。该应用程序将自动下载和更新上述翻译，并在下次应用程序启动时提供服务！</li></ul><h1 id="e437" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">将源字符串推送到Transifex并从transi fex中拉出翻译</h1><p id="00c2" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">Transifex原生SDK附带了一个命令行工具，允许Android开发人员直接与<a class="ae jo" href="https://www.transifex.com/blog/2020/cds/" rel="noopener ugc nofollow" target="_blank"> Transifex CDS </a>进行交互，而无需处理多个“strings.xml”文件。</p><h1 id="3517" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">推送源字符串</h1><p id="ad46" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">使用命令行工具的push命令，可以让工具解析项目的源字符串，并将它们发送到Transifex。</p><p id="e19d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">首先，您可以按照<a class="ae jo" href="https://github.com/transifex/transifex-java#transifex-command-line-tool" rel="noopener ugc nofollow" target="_blank">资源库</a>上的说明构建或下载transifex.jar。然后，您可以从命令行输入项目的根目录，并执行与下面类似的命令:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="f39a" class="lp ke hi ll b fi lq lr l ls lt">java -jar /path/to/transifex.jar push -t &lt;transifex_token&gt; -s &lt;transifex_secret&gt; -m &lt;app_module_name&gt;</span></pre><p id="8a09" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制</p><p id="32b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">push命令行为可以通过许多不同的参数来控制。您可以在这里或通过执行以下命令来了解关于参数<a class="ae jo" href="https://github.com/transifex/transifex-java#pushing" rel="noopener ugc nofollow" target="_blank">的更多信息:</a></p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="bd21" class="lp ke hi ll b fi lq lr l ls lt">java -jar /path/to/transifex.jar help push</span></pre><p id="c5db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制</p><h1 id="b904" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">拉翻译</h1><p id="091c" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">如上所述，您还可以使用命令行工具从Transifex下载(或提取)翻译到您的Android Studio项目中。拉命令如下所示:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="9da1" class="lp ke hi ll b fi lq lr l ls lt">java -jar /path/to/transifex.jar pull -t &lt;transifex_token&gt; -m &lt;app_module_name&gt; -l &lt;locale&gt;</span></pre><p id="0dab" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制</p><p id="14a9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要获得pull命令的完整参数列表，可以执行以下命令:</p><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="ecb9" class="lp ke hi ll b fi lq lr l ls lt">java -jar /path/to/transifex.jar help pull</span></pre><p id="b9b2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复制</p><p id="f5e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">pull命令需要一个将从Transifex下载的已翻译语言环境列表和您的应用程序的模块名称。该工具将下载的翻译放入您的模块的“资产”文件夹中，其内容会自动捆绑在应用程序中，并且可以在运行时由Transifex SDK访问。</p><h1 id="5dec" class="kd ke hi bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">在Transifex UI中处理多元化</h1><p id="19dd" class="pw-post-body-paragraph iq ir hi is b it lb iv iw ix lc iz ja jb ld jd je jf le jh ji jj lf jl jm jn hb bi translated">Android的Transifex原生SDK也支持开箱即用的多元化。命令行工具将解析在源字符串中找到的任何“复数”,并将它们推送到Transifex。同时，SDK将在Android应用程序中正确呈现翻译后的复数字符串。</p><p id="af48" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">该功能最大限度地降低了由于每个地区不同的多元化规则而导致的不正确翻译的风险，因为团队将在用户友好的Transifex web界面中直接处理所有的多元化翻译。</p><p id="9222" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lu">以上Android本地化指南最初发表在</em> <a class="ae jo" href="https://www.transifex.com/blog/2021/android-localization-an-advanced-guide-for-transifex-native/" rel="noopener ugc nofollow" target="_blank"> <em class="lu"> Transifex博客上。</em> </a></p></div></div>    
</body>
</html>