<html>
<head>
<title>I FIXED the Compose Slider</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我修复了撰写滑块</h1>
<blockquote>原文：<a href="https://medium.com/codex/i-fixed-the-compose-slider-70d08e1293f?source=collection_archive---------3-----------------------#2022-05-30">https://medium.com/codex/i-fixed-the-compose-slider-70d08e1293f?source=collection_archive---------3-----------------------#2022-05-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c404" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">我的第一个开源Android库</h2></div><blockquote class="ix"><p id="b298" class="iy iz hi bd ja jb jc jd je jf jg jh dx translated">当谷歌给你错误的组件时，你可以自己组装一个。</p></blockquote><figure class="jj jk jl jm jn jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ji"><img src="../Images/901d7036e465fe24414002a277857813.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2LvB0jV1zfo0FpSitcKd1Q.png"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx translated"><a class="ae jz" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fwww.shutterstock.com%2Fsearch%2Fman%2Bthumbs%2Bup%2Bcomputer%3Fimage_type%3Dphoto&amp;psig=AOvVaw2Ipjxy8mRdkM7IqrATGj_3&amp;ust=1654006943878000&amp;source=images&amp;cd=vfe&amp;ved=0CA4Q3YkBahcKEwi4vdKWtof4AhUAAAAAHQAAAAAQMg" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="e072" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">在开发一个身体质量指数计算器应用程序来练习使用Jetpack Compose时，我注意到Compose的<code class="du kv kw kx ky b">Slider</code>并没有像预期的那样工作。我尝试创建自己的可组合组件并修复了这个问题。</p><figure class="la lb lc ld fd jo er es paragraph-image"><div class="er es kz"><img src="../Images/7ab70bc6e66a57dd8eb8b5f96146a3e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/1*_PhOSshRHrOsUzSI7ngYEg.gif"/></div><figcaption class="jv jw et er es jx jy bd b be z dx translated">Jetpack撰写的当前滑块有问题</figcaption></figure><p id="5f68" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">我希望你能看到滑块的问题。当我试图向左滑动旋钮时，它与我拇指的位置不同步。</p><p id="67a0" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">我很努力地在网上搜索，但是我不能找到一个合适的方法来解决我的问题。因此我决定创建一个Android库来解决这个问题。</p><div class="le lf ez fb lg lh"><a href="https://github.com/cybercoder-naj/sliding-bar" rel="noopener  ugc nofollow" target="_blank"><div class="li ab dw"><div class="lj ab lk cl cj ll"><h2 class="bd hj fi z dy lm ea eb ln ed ef hh bi translated">GitHub-cyber coder-naj/sliding-bar:Slider Composable for the Jetpack Compose UI-toolkit for…</h2><div class="lo l"><h3 class="bd b fi z dy lm ea eb ln ed ef dx translated">查看版本和变更日志滑块可用于Jetpack编写Android应用程序开发工具包…</h3></div><div class="lp l"><p class="bd b fp z dy lm ea eb ln ed ef dx translated">github.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv jt lh"/></div></div></a></div><h1 id="b9a2" class="lw lx hi bd ly lz ma mb mc md me mf mg io mh ip mi ir mj is mk iu ml iv mm mn bi translated">我是怎么做到的？</h1><p id="8f24" class="pw-post-body-paragraph ka kb hi kc b kd mo ij kf kg mp im ki kj mq kl km kn mr kp kq kr ms kt ku jh hb bi translated">我的逻辑是相当简单的，当谈到绘制设计。当你需要添加与视图的触摸交互时，主要的脑力就来了。我从可组合的<code class="du kv kw kx ky b">Canvas</code>开始，画了两条重叠的线和两个重叠的圆。</p><p id="4ab8" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">为了实现用户的触摸输入，我在函数传递的<code class="du kv kw kx ky b">modifier</code>上增加了<code class="du kv kw kx ky b">pointerInteropFilter</code>。基于用户何时将手指按在旋钮上(ACTION_DOWN)，用户何时拖动旋钮(ACTION_MOVE)，以及用户何时抬起手指(ACTION_UP)，我执行了一定的计算，并将<code class="du kv kw kx ky b">value</code>的新状态发射回父节点。</p><blockquote class="mt mu mv"><p id="4c05" class="ka kb mw kc b kd ke ij kf kg kh im ki mx kk kl km my ko kp kq mz ks kt ku jh hb bi translated">您可以在这个<a class="ae jz" href="https://github.com/cybercoder-naj/sliding-bar/blob/main/sliding-bar/src/main/java/me/nishant/sliding_bar/SlidingBar.kt" rel="noopener ugc nofollow" target="_blank">链接</a>上查看完整的代码。</p></blockquote><h1 id="3f75" class="lw lx hi bd ly lz ma mb mc md me mf mg io mh ip mi ir mj is mk iu ml iv mm mn bi translated">装置</h1><p id="5225" class="pw-post-body-paragraph ka kb hi kc b kd mo ij kf kg mp im ki kj mq kl km kn mr kp kq kr ms kt ku jh hb bi translated">将JitPack URL添加到您的<code class="du kv kw kx ky b">settings.gradle</code>文件中:</p><pre class="la lb lc ld fd na ky nb nc aw nd bi"><span id="4ad3" class="ne lx hi ky b fi nf ng l nh ni">repositories {<br/>  maven { url 'https://jitpack.io' }<br/>}</span></pre><p id="d0f7" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">并将以下依赖项添加到您的<code class="du kv kw kx ky b">build.gradle</code>文件中:</p><pre class="la lb lc ld fd na ky nb nc aw nd bi"><span id="3cd3" class="ne lx hi ky b fi nf ng l nh ni">dependencies {<br/>  implementation "com.github.cybercoder-naj:sliding-bar:$version"<br/>}</span></pre><h1 id="7e8a" class="lw lx hi bd ly lz ma mb mc md me mf mg io mh ip mi ir mj is mk iu ml iv mm mn bi translated">用法/示例</h1><p id="8e4c" class="pw-post-body-paragraph ka kb hi kc b kd mo ij kf kg mp im ki kj mq kl km kn mr kp kq kr ms kt ku jh hb bi translated">记得给你的类/函数添加<code class="du kv kw kx ky b">@ExperimentalComposeUiApi</code>注释。</p><pre class="la lb lc ld fd na ky nb nc aw nd bi"><span id="cb7c" class="ne lx hi ky b fi nf ng l nh ni">SlidingBar(<br/>    value = value,<br/>    onValueChanged = { value = it },<br/>    modifier = Modifier<br/>        .padding(horizontal = 64.dp)<br/>        .fillMaxWidth(),<br/>    colors = SlidingBarDefaults.colors(<br/>        colorPrimary = Color.Green,<br/>        colorTrack = Color.Blue<br/>    ),<br/>    valueRange = 0f..30f,<br/>    stepSize = 1f<br/>)</span></pre><p id="d069" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">演示可在<a class="ae jz" href="https://github.com/cybercoder-naj/sliding-bar/blob/main/images/demo.gif" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><h1 id="0215" class="lw lx hi bd ly lz ma mb mc md me mf mg io mh ip mi ir mj is mk iu ml iv mm mn bi translated">结论</h1><p id="4047" class="pw-post-body-paragraph ka kb hi kc b kd mo ij kf kg mp im ki kj mq kl km kn mr kp kq kr ms kt ku jh hb bi translated">我没有看到我的代码的有效解决方案；因此，通过一点数学计算，我创建了一个版本，它似乎可以根据我的需求完美地工作。</p><p id="0bbc" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">欢迎您为我在GitHub上的开源项目做出贡献。任何贡献都将受到感谢。贡献不分大小。</p></div><div class="ab cl nj nk gp nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="hb hc hd he hf"><p id="86c3" class="pw-post-body-paragraph ka kb hi kc b kd ke ij kf kg kh im ki kj kk kl km kn ko kp kq kr ks kt ku jh hb bi translated">我希望你喜欢读我的文章。谢谢大家！✌️</p><pre class="la lb lc ld fd na ky nb nc aw nd bi"><span id="d81a" class="ne lx hi ky b fi nf ng l nh ni"><strong class="ky hj">Want to connect?</strong></span><span id="4ca8" class="ne lx hi ky b fi nq ng l nh ni">My <a class="ae jz" href="https://github.com/cybercoder-naj" rel="noopener ugc nofollow" target="_blank">GitHub</a> profile.<br/>My <a class="ae jz" href="https://cybercoder-naj.github.io" rel="noopener ugc nofollow" target="_blank">Portfolio</a> website.</span></pre></div></div>    
</body>
</html>