<html>
<head>
<title>LeetCode 121. Best Time To Buy and Sell Stock — Python Solution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">LeetCode 121。买卖股票的最佳时机— Python解决方案</h1>
<blockquote>原文：<a href="https://medium.com/codex/leetcode-121-best-time-to-buy-and-sell-stock-python-solution-bdb5f5e7836?source=collection_archive---------15-----------------------#2022-06-15">https://medium.com/codex/leetcode-121-best-time-to-buy-and-sell-stock-python-solution-bdb5f5e7836?source=collection_archive---------15-----------------------#2022-06-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="4a47" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">盲75 —编程和技术面试问题—解释系列</h2></div><h2 id="c56a" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">问题是:</h2><p id="e00b" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">给你一个数组<strong class="jx hj"> <em class="ko">价格</em> </strong>其中<strong class="jx hj"> <em class="ko">价格【I】</em></strong>是给定股票在第<strong class="jx hj"><em class="ko">I</em></strong>日的价格。</p><p id="a45d" class="pw-post-body-paragraph jv jw hi jx b jy kp ij ka kb kq im kd ji kr kf kg jm ks ki kj jq kt kl km kn hb bi translated">你想通过选择某一天买入一只股票，并在未来的某一天卖出这只股票来实现利润最大化。</p><p id="825e" class="pw-post-body-paragraph jv jw hi jx b jy kp ij ka kb kq im kd ji kr kf kg jm ks ki kj jq kt kl km kn hb bi translated">回报你能从这笔交易中获得的最大利润。如果你不能获得任何利润，返回0。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ku"><img src="../Images/8d48665ef01a6cc1c6682db66a3f34fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TspzXA1qhbPo5d7s.png"/></div></div></figure><h2 id="4b8f" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">制约因素:</h2><ul class=""><li id="5e8b" class="lg lh hi jx b jy jz kb kc ji li jm lj jq lk kn ll lm ln lo bi translated">1&lt;= <strong class="jx hj"><em class="ko">prices . length</em></strong>&lt;= 105</li><li id="9083" class="lg lh hi jx b jy lp kb lq ji lr jm ls jq lt kn ll lm ln lo bi translated">0 &lt;= <strong class="jx hj"> <em class="ko">价格【I】</em></strong>&lt;= 104</li></ul><h2 id="d886" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">解释是:</h2><p id="3c86" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">对于这个问题，直觉很简单，买一天，卖一天。这个问题的最佳解决方案是O(n)时间复杂度。为此，<a class="ae lu" href="https://www.geeksforgeeks.org/window-sliding-technique/" rel="noopener ugc nofollow" target="_blank">滑动窗口技术</a>是最佳选择。简而言之，这种技术使用左右指针变量，对于数组中的每个价格，检查左右价格之间的差异，并相应地进行更新。</p><h2 id="2706" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">解—滑动窗口— O(n)</h2><p id="bf78" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">首先，将<strong class="jx hj"> <em class="ko"> left_ptr </em> </strong>和<strong class="jx hj"> <em class="ko"> profit </em> </strong>变量初始化为零。然后从索引1开始遍历价格数组，因为<strong class="jx hj"> <em class="ko"> left_ptr </em> </strong>已经在索引0处。在这个for循环中，检查<strong class="jx hj"><em class="ko">left _ ptr</em></strong>price是否小于<strong class="jx hj"><em class="ko">right _ ptr</em></strong>price，如果是，则将利润设置为利润和计算的差值的最大值。如果<strong class="jx hj"> <em class="ko"> left_ptr </em> </strong>大于或等于<strong class="jx hj"> <em class="ko"> right_ptr </em> </strong>则设置<strong class="jx hj"> <em class="ko"> left_ptr </em> </strong>为<strong class="jx hj"> <em class="ko"> right_ptr </em> </strong>。换句话说，如果当前价格低于先前的低价，则将<strong class="jx hj"> <em class="ko"> left_ptr </em> </strong>更新为这个新的低价。经过for循环后，保证你有最大的利润。如果价格只在给定的时间段内下降，那么将返回0，因为利润变量被初始化为0。</p><pre class="kv kw kx ky fd lv lw lx ly aw lz bi"><span id="1f9f" class="ix iy hi lw b fi ma mb l mc md">class Solution:<br/>  def maxProfit(self, prices: List[int]) -&gt; int:<br/>    left_ptr, profit = 0, 0<br/>    for right_ptr in range(1, len(prices)):<br/>      if prices[left_ptr] &lt; prices[right_ptr]:<br/>        profit = max(profit, prices[right_ptr] — prices[left_ptr])<br/>      else:<br/>        left_ptr = right_ptr<br/>    return profit</span></pre><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es me"><img src="../Images/7f81d52d2303ec4c128b383b1e299619.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-2DUIiUD-vNc29R6.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">运行时和内存使用</figcaption></figure><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es mj"><img src="../Images/9c23128119f863cd0e346e8d33cce5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/0*JitaTiNAWKiofl8K.png"/></div><figcaption class="mf mg et er es mh mi bd b be z dx translated">LeetCode上的Python解决方案</figcaption></figure><h1 id="3c6f" class="mk iy hi bd iz ml mm mn jd mo mp mq jh io mr ip jl ir ms is jp iu mt iv jt mu bi translated">信息:</h1><p id="9bbf" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">网址:<a class="ae lu" href="http://www.nkwade.dev/" rel="noopener ugc nofollow" target="_blank">nkwade . dev</a><br/>LinkedIn:<a class="ae lu" href="http://www.linkedin.com/in/nkwade/" rel="noopener ugc nofollow" target="_blank">linkedin.com/in/nkwade</a><br/>GitHub:<a class="ae lu" href="http://www.github.com/nkwade" rel="noopener ugc nofollow" target="_blank">github.com/nkwade</a><br/>邮箱:<a class="ae lu" href="mailto:nicholas@nkwade.dev" rel="noopener ugc nofollow" target="_blank"> nicholas@nkwade.dev </a></p></div></div>    
</body>
</html>