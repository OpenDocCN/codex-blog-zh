<html>
<head>
<title>C# String Interpolation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C#字符串插值</h1>
<blockquote>原文：<a href="https://medium.com/codex/c-string-interpolation-4c1b4462b1a4?source=collection_archive---------4-----------------------#2021-08-25">https://medium.com/codex/c-string-interpolation-4c1b4462b1a4?source=collection_archive---------4-----------------------#2021-08-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/634a4876133e665c78db7d651f138b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ieIdzQ24XCI_E4kXE4zu-Q.png"/></div></div></figure><p id="9555" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你是2021年的C#程序员。您需要构建比简单的ToString()调用更复杂的字符串。</p><p id="3e43" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这篇文章将向你展示很多你可以这样做的方法，并以我认为是目前最好的解决方案结尾。</p><p id="5d1a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">注意:本文一般适用于C#。它也适用于。NET时代，但是两者之间的转换取决于您。调试。你在这篇文章中看到的日志是Unity引擎的调试。日志。您可能会使用普通的dot net——在这种情况下，您的日志记录可能会使用<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/api/system.console.writeline?view=net-5.0" rel="noopener ugc nofollow" target="_blank">控制台。WriteLine </a>，<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.debug.writeline?view=net-5.0" rel="noopener ugc nofollow" target="_blank">系统。Diagnostics.Debug.WriteLine </a>或者你那毫无疑问是华而不实的ASP.NET API中更奇特的东西。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/4e0029a21abe5dd7d98dfb8b14190750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y40FYz3SvHmQJzQodAdvGQ.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">假设你有这三个值，你需要把它们打印在一行上。</figcaption></figure><p id="8fc4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当您需要将这些值放入类似“values: 3，1，2”的字符串中时…</p><h1 id="7b9c" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">串并置</h1><p id="886d" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">啊，经典。</p><p id="062b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你会因为这样的代码而遭受痛苦吗？</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/3f60e0cb8c13db3b08c90ca56c85ace6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*10BhWk1nCNE8RwSiijE-7w.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">字符串串联，简短形式</figcaption></figure><p id="1e61" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">还是这样？</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/c237bf9b38b0ad9dc8214eade36b8b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwQVcjw9GxCJ7RijIYGsaA.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">字符串串联，长格式</figcaption></figure><p id="4fb9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">看起来很快很简单，不是吗？</p><p id="c1e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">除了可读性和混乱的语法之外，还有一个重要的问题。</p><p id="5c07" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">连接两个字符串需要<a class="ae jo" href="https://referencesource.microsoft.com/#mscorlib/system/string.cs,55b2f6374a7cf7c1" rel="noopener ugc nofollow" target="_blank">一次内存分配和两次复制操作</a>。图片中的代码片段？想想需要多少分配、复制操作和后续的垃圾收集。这是新的内存分配和每个连接的复制操作，加上最终的垃圾收集，这增加得很快！扔到垃圾堆里。</p><p id="108f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种构建字符串的风格让人想起20世纪80年代的BASIC语言，那时我们在琥珀色屏幕上一行一行地输入程序，希望我们没有打错。如果你也来自那个时代，让我们一起花点时间意识到那是40年前，在我们回去对我们草坪上的孩子大喊大叫之前。</p><p id="a396" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是的，我知道<a class="ae jo" href="https://docs.oracle.com/cd/E19957-01/805-4939/6j4m0vn73/index.html" rel="noopener ugc nofollow" target="_blank"> Fortran 77在那之前有字符串连接</a>，我肯定有人能在<a class="ae jo" href="https://rosettacode.org/wiki/String_append" rel="noopener ugc nofollow" target="_blank"> Rosetta Code </a>上找到一个更老的。重点是，可能是时候更新了。从那以后有了一些创新。</p><h1 id="718f" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">StringBuilder</h1><p id="5ccb" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">让我们来看看90年代和21世纪初的一些更高效的技术。</p><p id="b381" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你已经听说过<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/api/system.text.stringbuilder?view=net-5.0" rel="noopener ugc nofollow" target="_blank"> StringBuilder </a>很好(<em class="lc">是</em>)，但是仅仅把几个值放在一起可能有点大材小用。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/b0c799209fcd320fa13c3de40f6723ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vp4aEP4DlpQTK55nhsut8w.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">StringBuilder使用得很好——VS代码提醒我还可以改进</figcaption></figure><p id="f946" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">C#用。NET Framework 1.1，2002年。</p><p id="2e55" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你们中的一些恢复Java编码的人会认出2004年Java 1.5 中的<a class="ae jo" href="https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html" rel="noopener ugc nofollow" target="_blank"> StringBuilder，或者——如果你还有几根<em class="lc">白头发的话——1998年原始Java </em></a>中的<a class="ae jo" href="http://titanium.cs.berkeley.edu/doc/java-langspec-1.0/javalang.doc12.html#14461" rel="noopener ugc nofollow" target="_blank"> StringBuffer。</a></p><p id="c727" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">从C++98 开始，C++在标准库中就有了一个名为<a class="ae jo" href="https://www.cplusplus.com/reference/sstream/stringstream/stringstream/" rel="noopener ugc nofollow" target="_blank"> std::stringstream的类。仍然值得注意的是</a><a class="ae jo" href="https://en.wikipedia.org/wiki/Sstream" rel="noopener ugc nofollow" target="_blank">有一篇最小的维基百科文章</a>。</p><p id="66dc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">StringBuilder在初始化时完成大部分内存分配，当您调用ToString()时。否则，当您调用Append时，它主要是将值<em class="lc">复制一次</em>到已经被占用的内存中，根据需要使用额外的“块”分配进行扩展。如果你对这类东西感兴趣的话，可以查看一下来源。</p><h1 id="e5cd" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">复合格式</h1><p id="fb28" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">也许你已经通过<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/api/system.string.format?view=net-5.0" rel="noopener ugc nofollow" target="_blank">字符串尝试过<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/composite-formatting" rel="noopener ugc nofollow" target="_blank">复合格式</a>。格式</a>。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/18183a2db5d5768cf96b87b31f9662e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U2IbDTudSVd-oe7mXksy4w.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">复合格式——现在我们真正看到了20世纪90年代</figcaption></figure><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/5bc8a518d23b319a9e0cb29917d2c29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zxf0Mp1hdYKQYKqqKcduqA.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">更紧凑的版本</figcaption></figure><p id="6725" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">复合格式问世时非常好。它给了我们模板风格的字符串构建作为官方语言特性。当你用它来做一些不重要的事情时，感觉很笨拙，这会导致一些非常长的代码行，但是它就在那里，你不需要写或者找到一个字符串模板库。你可以使用格式化字符串，就像你在String中使用的一样。格式！</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/b2909dfefe77c5fa4b516ffe8c245246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YNzgbdFuB039HlCbI3sSrg.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">CPU中的SHL/SHR电路是…轮班工作者吗？</figcaption></figure><p id="3548" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这很好，直到你需要改变你正在做的事情。例如，如果您需要对值重新排序，或者在字符串中间插入新值。现在，您正朝着在API中不经意地创建bug的方向前进。处理这些争论会成为一个明显的精神负担。</p><p id="95f5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对了，<a class="ae jo" href="https://referencesource.microsoft.com/#mscorlib/system/string.cs,bdf91919a8d3537e,references" rel="noopener ugc nofollow" target="_blank">串串。Format在幕后使用了StringBuilder。</a></p><h1 id="2c73" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">字符串。加入</h1><p id="126d" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">你可能听说过使用<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/api/system.string.join?view=net-5.0" rel="noopener ugc nofollow" target="_blank">弦。Join </a>也可以将对象列表转换成字符串。对于特定的用例来说，这是一个优雅的工具。它的历史和StringBuilder一样长。</p><p id="716a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">最初，你可以连接字符串数组，仅此而已。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/c9850ee28db6b3c91144d4e928802dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RW2PqIm35MU73yHC3G5c1g.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">全世界的人们，加入弦乐团</figcaption></figure><p id="204a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">人们编写了一些<a class="ae jo" href="https://stackoverflow.com/a/3610795/691749" rel="noopener ugc nofollow" target="_blank">聪明的自定义变通办法</a>来支持加入其他类型。</p><p id="6340" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">字符串。Join在2010年接受了将通用对象连接在一起的支持。NET框架4.0。(Unity直到2017年才会获得支持。)</p><figure class="jq jr js jt fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/c1f8f84802a8efec2e88d21233e02ae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*mnQwJ2LYbE0AfO6ypj2RHA.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">全世界的人们，加入进来</figcaption></figure><p id="304a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><a class="ae jo" href="https://referencesource.microsoft.com/#mscorlib/system/string.cs,06d13c9cb8b83f5d" rel="noopener ugc nofollow" target="_blank">弦。Join在幕后做自己独特的事情</a>。</p><h1 id="9565" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">字符串插值</h1><p id="0a4d" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">既然我们已经看到了所有的老方法，让我们看看在2021年写这篇文章时还不到10年的东西。</p><p id="a2c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">字符串插值已经存在一段时间了。多久了？它是由C# 6 在2014年推出的<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-version-history#c-version-60" rel="noopener ugc nofollow" target="_blank">，这是与。NET Framework 4.6 / CLR 4，对早期版本</a>的<a class="ae jo" href="https://stackoverflow.com/a/28921749/691749" rel="noopener ugc nofollow" target="_blank">有限支持和警告。NET框架。Visual Studio 2015、Visual Studio 2013(通过一个插件)和Unity 2017对其提供了本机支持。当时，</a><a class="ae jo" href="https://blog.unity.com/technology/introducing-unity-2017" rel="noopener ugc nofollow" target="_blank"> Unity称他们2017年的C# 6支持为“实验性”</a>，你必须手动选择。NET 4.6来使用它。</p><p id="c273" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">是啊是啊。无聊的历史课，我说的对吗？关键是，它已经存在了足够长的时间，应该有更普遍的用途。</p><p id="5b3c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您希望您的弦乐作品变成这样吗？</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/3daea946249029f828732a4243e0064d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FGANEQhceO3U8WlurNaMLg.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">字符串插值的两种方式:新的热点</figcaption></figure><p id="9143" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这被称为字符串插值。敏锐的读者可能会说“嘿，这看起来像其他语言的模板。”你基本上是对的！</p><p id="453c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是，它不是一个简单的特定字符串函数的包装器。有一篇关于编译器在幕后做什么的好文章，但是它的美妙之处在于你不需要关心它是如何工作的。</p><p id="1b6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我将总结并给出几个真实的例子。文档中有一个不错的<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/string-interpolation" rel="noopener ugc nofollow" target="_blank">教程。还有一个</a><a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated" rel="noopener ugc nofollow" target="_blank">参考，里面有所有血淋淋的细节</a>。</p><p id="3287" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">要告诉编译器您想要在字符串上进行插值，只需在开始的双引号字符前加上一个$字符。重要的是两个角色之间没有任何东西。好吧，除了在C# 8和更高版本中可能有一个@之外，因为这样你也可以做内插的<a class="ae jo" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/verbatim" rel="noopener ugc nofollow" target="_blank">逐字字符串</a>。</p><p id="87d8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在插值字符串中，您可以在花括号中命名变量和属性，如{myVal}，这样您的代码可读性会更好。如果你在字符串中需要一个花括号，你必须把它加倍，作为一种转义机制，因为单个花括号现在有了特殊的含义。</p><p id="9b23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你不仅仅局限于变量或属性。您可以将任何值表达式放在花括号内。函数调用，数学表达式，你能想到的——只要它有值，它就能去那里。您甚至可以像使用String.Format一样进行格式化</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es le"><img src="../Images/7c4e3f7aa9af0eedd2b4d5b3c71a462c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJauMPCZujzSPzMYbc6ZUw.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">有时候你只对一小块圆周率感兴趣</figcaption></figure><p id="85db" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它将使用默认的ToString()方法来转换对象，所以要确保这些方法是正确的。如果你需要通过代码获取一个值，比如用一个三元运算符，你也可以这样做…虽然不是很可读，但是请继续。请在您的代码中留下注释，以便下一个人/您以后维护它。</p><figure class="jq jr js jt fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jp"><img src="../Images/a6c5102066ab75161bb45c74cc4e276b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBskcKpZigbuLgkpAOzc3A.png"/></div></div><figcaption class="ju jv et er es jw jx bd b be z dx translated">你能写出好的、简洁的代码吗？你当然可以。你是专家。</figcaption></figure><h1 id="da23" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">何时避免</h1><p id="3705" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">这对调试和格式化来说是一个巨大的福音，它帮助我们克服了程序员的第一个也是最重要的美德:懒惰。</p><p id="27fb" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这可能很诱人，但是<strong class="is hj"> <em class="lc">永远不要</em> </strong>使用字符串插值来处理<strong class="is hj">未净化的用户输入</strong>用于参数化SQL查询、汇编命令行或API调用，或者其他任何真正需要净化的事情。有此意图的用户很容易造成缓冲区溢出。</p><p id="32c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个建议适用于任何字符串操作，但是值得重复一遍:<strong class="is hj">总是净化用户输入。</strong></p><h1 id="0190" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">表演</h1><p id="4d32" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">我听到你问:“性能怎么样？”</p><p id="dece" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">它足够快，如果我想让任何东西更快，我会在我的游戏开发和数据处理目的收益递减的错误一边。它和StringBuilder一样好。</p><p id="8c5f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你想要基准？客观证据？非常好。请查看:</p><ul class=""><li id="21c2" class="lf lg hi is b it iu ix iy jb lh jf li jj lj jn lk ll lm ln bi translated"><a class="ae jo" href="https://dotnetcoretutorials.com/2020/02/06/performance-of-string-concatenation-in-c/" rel="noopener ugc nofollow" target="_blank">本文针对许多不同的字符串构建方法进行了基准测试</a></li><li id="ff83" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated"><a class="ae jo" href="https://koukia.ca/string-interpolation-vs-string-format-string-concat-and-string-builder-performance-benchmarks-c1dad38032a" rel="noopener ugc nofollow" target="_blank">本文针对串联、StringBuilder和String对其进行了基准测试。格式</a></li><li id="6447" class="lf lg hi is b it lo ix lp jb lq jf lr jj ls jn lk ll lm ln bi translated"><a class="ae jo" href="https://stackoverflow.com/a/63904747/691749" rel="noopener ugc nofollow" target="_blank">此文字记录将其与字符串进行比较。格式并提出更有效的使用方法</a></li></ul><h1 id="4921" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">记录器</h1><p id="e4aa" class="pw-post-body-paragraph iq ir hi is b it kw iv iw ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn hb bi translated">如果您使用第三方日志程序，还有一些替代方法。马上想到的是Serilog。如果您正在构建一个ASP.Net应用程序，您可能应该使用它的enrichers，如果不是类似的东西。</p><h1 id="d73e" class="jy jz hi bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">感谢阅读！</h1></div></div>    
</body>
</html>