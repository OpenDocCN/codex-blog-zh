<html>
<head>
<title>How I started to write a new programming language</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何开始编写一种新的编程语言</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-i-started-to-write-a-new-programming-language-51db6382c799?source=collection_archive---------20-----------------------#2022-06-22">https://medium.com/codex/how-i-started-to-write-a-new-programming-language-51db6382c799?source=collection_archive---------20-----------------------#2022-06-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/9a1e7f7cb5888926d6637c87b3c3b9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RziC3ggDKVPMDrwR.jpg"/></div></div></figure><blockquote class="iq ir is"><p id="9ad7" class="it iu iv iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr hb bi translated">古往今来的所有统治者都试图将错误的世界观强加给他们的追随者。——《1984》，乔治·奥威尔</p></blockquote><p id="ee39" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">我从事<a class="ae jv" href="https://github.com/coderaiser/putout" rel="noopener ugc nofollow" target="_blank"> JavaScript代码转换器</a>已经有几年了，很久以前，我看到了一个关于向JavaScript添加新关键字的新问题。这是一个奇怪的想法，因为我用JavaScript写了大约十年，但我试图帮助写我的人，并开始从一个不同的角度研究我非常熟悉和感兴趣的领域。</p><p id="a584" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">我使用了各种JavaScript解析器，并为<a class="ae jv" href="https://github.com/babel/babel/pulls?q=is%3Apr+author%3Acoderaiser+is%3Aclosed" rel="noopener ugc nofollow" target="_blank"> Babel </a>和<a class="ae jv" href="https://github.com/coderaiser/recast" rel="noopener ugc nofollow" target="_blank"> Recast </a>贡献了一点(我甚至有自己的fork！).所以我想:为什么不呢，那很有意思！</p><p id="9c28" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">我开始阅读acorn代码库，阅读一些stackoverflow，突然事情变得如此简单，我无法想象。这主要是因为<a class="ae jv" href="https://github.com/acornjs/acorn" rel="noopener ugc nofollow" target="_blank"> acorn </a>支持插件，这使得事情变得容易多了。</p><p id="305b" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">所以我首先添加的是一个<a class="ae jv" href="https://github.com/coderaiser/recast" rel="noopener ugc nofollow" target="_blank">新关键字</a> <code class="du jw jx jy jz b"><a class="ae jv" href="https://github.com/coderaiser/recast" rel="noopener ugc nofollow" target="_blank">fn</a>.</code></p><p id="de15" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">并且这样的结构变得可解析到<code class="du jw jx jy jz b">FunctionDeclaration</code>:</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="fe71" class="ki kj hi jz b fi kk kl l km kn">fn hello() {<br/>    return 'world'<br/>}</span></pre><p id="7b09" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">然后从这期的谈话中，一切都开始了，我有了一个新的目标要实现:<a class="ae jv" rel="noopener" href="/@coderaiser/lets-add-swift-guards-to-javascript-42767b99a3ba">迅捷卫士</a>。我从来没有写过Swift，但我认为那是包含很多好想法的透视语言，就像Rust一样。</p><h1 id="f948" class="ko kj hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">下一步是什么？</h1><p id="b636" class="pw-post-body-paragraph it iu hi iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated">我的下一步是创建一个存放测试的仓库，让事情变得更加稳定。所以让我来介绍一下:<a class="ae jv" href="https://github.com/coderaiser/goldstein" rel="noopener ugc nofollow" target="_blank"> Goldstein </a>，没有限制的JavaScript🤫。</p><p id="59a5" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">如果你对梦想中的编程语言有任何想法，只需创建一个问题，我们将决定如何实现你的梦想！</p><h1 id="bedf" class="ko kj hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">支持什么？</h1><p id="1fa6" class="pw-post-body-paragraph it iu hi iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated">现在，正如我之前所说的，我们支持<code class="du jw jx jy jz b">fn</code>、<code class="du jw jx jy jz b">guards</code>和一些更有趣的东西…</p><h1 id="2ae5" class="ko kj hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">尝试表达式</h1><p id="745c" class="pw-post-body-paragraph it iu hi iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated">有很多关于尝试表达的讨论。我长久以来想要的是能够简化这个又大又丑的陈述:</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="2bf2" class="ki kj hi jz b fi kk kl l km kn"><strong class="jz hj">try</strong> {<br/>    hello('world');<br/>} <strong class="jz hj">catch</strong> (error) {</span><span id="db46" class="ki kj hi jz b fi lq kl l km kn">}</span></pre><p id="7d03" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">类似于:</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="5610" class="ki kj hi jz b fi kk kl l km kn"><strong class="jz hj">const</strong> [error, result] = tryCatch(hello, 'world');</span></pre><p id="a640" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">这可以通过<code class="du jw jx jy jz b"><a class="ae jv" href="https://github.com/coderaiser/try-catch" rel="noopener ugc nofollow" target="_blank">try-catch</a></code>库来实现。它很好，被很多人使用。我想要的实际上是一个语法结构。原来如此！</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="6bab" class="ki kj hi jz b fi kk kl l km kn"><strong class="jz hj">const</strong> [error, result] = <strong class="jz hj">try</strong> hello('world');</span></pre><p id="3f50" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">如果你想使用<code class="du jw jx jy jz b">await</code>，你可以！</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="e7a7" class="ki kj hi jz b fi kk kl l km kn"><strong class="jz hj">const</strong> [error, result] = <strong class="jz hj">try</strong> <strong class="jz hj">await</strong> hello(‘world’);</span></pre><p id="118e" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">这将被转换为使用<code class="du jw jx jy jz b">try-catch</code>库，该库将在<strong class="iw hj"> CLI的帮助下捆绑成一个文件。</strong></p><h1 id="1bf1" class="ko kj hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated"><strong class="ak">命令行界面</strong></h1><p id="9d79" class="pw-post-body-paragraph it iu hi iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated">没错。您可以安装<code class="du jw jx jy jz b">goldstein</code>并使用它的命令行界面，如下所示:</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="08cd" class="ki kj hi jz b fi kk kl l km kn">npm i goldstein -g</span></pre><p id="9b25" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">安装后我们有一个<code class="du jw jx jy jz b">gs</code>二进制:</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="ae8a" class="ki kj hi jz b fi kk kl l km kn">gs hello.gs</span></pre><p id="6473" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">将代码编译成<code class="du jw jx jy jz b">hello.js</code>文件，可以在任何JavaScript环境中使用。</p><h1 id="be9b" class="ko kj hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">美国石油学会怎么了？</h1><p id="e3f8" class="pw-post-body-paragraph it iu hi iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated">API也支持！</p><pre class="ka kb kc kd fd ke jz kf kg aw kh bi"><span id="1419" class="ki kj hi jz b fi kk kl l km kn"><strong class="jz hj">import</strong> {compile} <strong class="jz hj">from</strong> 'goldstein';</span><span id="a4ee" class="ki kj hi jz b fi lq kl l km kn">compile(`<br/>    const [error, result] = safe hello('world');<br/>`);<br/>// returns<br/>`<br/>    import tryCatch from 'try-catch';<br/>    const [error, result] = tryCatch(hello, 'world');<br/>`</span></pre><h1 id="5377" class="ko kj hi bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">结论</h1><p id="7d69" class="pw-post-body-paragraph it iu hi iw b ix ll iz ja jb lm jd je js ln jh ji jt lo jl jm ju lp jp jq jr hb bi translated">今天到此为止！我想欢迎任何贡献和评论与想法的语法你的梦想。</p><p id="a6e4" class="pw-post-body-paragraph it iu hi iw b ix iy iz ja jb jc jd je js jg jh ji jt jk jl jm ju jo jp jq jr hb bi translated">感谢阅读，敬请关注！请订阅，我需要更多的追随者😏。</p></div></div>    
</body>
</html>