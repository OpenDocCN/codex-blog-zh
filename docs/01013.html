<html>
<head>
<title>Win All Your Arguments with Ruby’s Splat Operator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Ruby的Splat操作符赢得所有的争论</h1>
<blockquote>原文：<a href="https://medium.com/codex/win-all-your-arguments-with-rubys-splat-operator-86ad8001bcb1?source=collection_archive---------16-----------------------#2021-03-30">https://medium.com/codex/win-all-your-arguments-with-rubys-splat-operator-86ad8001bcb1?source=collection_archive---------16-----------------------#2021-03-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/cd688a52059e6f21761bedd17d4d2f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nf5GIXzU9FtyPJaO"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">奥斯卡·伊尔迪兹在<a class="ae hv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><div class=""/><p id="9ab3" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">任何学习Ruby(和许多其他语言)的人都明白的第一件事就是参数和自变量是程序的生命线。它们允许我们的方法是动态的，能够用抽象的数据集执行任务，而不是硬编码成特定的数据。随着程序范围的扩大，您可能会发现您的方法需要越来越多的参数才能发挥作用。在下面的简单例子中，如果我们试图将下面的数组传递到我们的方法中，我们必须以某种方式访问字符串，这有很多选择。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="1110" class="kc kd hy jy b fi ke kf l kg kh">my_fav_colors = ["green", "purple", "blue"]</span><span id="b11b" class="kc kd hy jy b fi ki kf l kg kh">def three_fav_colors(color1, color2, color3)</span><span id="0d77" class="kc kd hy jy b fi ki kf l kg kh">  puts "My three favorite colors are #{color1}, #{color2}, and<br/>  #.{color3}."</span><span id="4e21" class="kc kd hy jy b fi ki kf l kg kh">end</span></pre><p id="e52d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可能会创建三个新变量，然后插入这些变量(可能效率最低):</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="526e" class="kc kd hy jy b fi ke kf l kg kh">fav_color1 = my_fav_colors[0]<br/>fav_color2 = my_fav_colors[1]<br/>fav_color3 = my_fav_colors[2]</span><span id="0ab3" class="kc kd hy jy b fi ki kf l kg kh">three_fav_colors(fav_color1, fav_color2, fav_color3)<br/>=&gt; "My three favorite colors are green, purple, and blue."</span></pre><p id="c180" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以直接插入数组索引，这是一种稍微简洁的方法:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="9c85" class="kc kd hy jy b fi ke kf l kg kh">three_fav_colors(my_fav_colors[0], my_fav_colors[1], my_fav_colors[2])<br/>=&gt; "My three favorite colors are green, purple, and blue."</span></pre><p id="f9e6" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通常在ruby中，当我们操作数组时，我们可以对它们进行枚举。然而，这里我们只想输出一个句子，因此任何枚举都需要对原始方法进行笨拙的重构。</p><p id="0de8" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">输入splat运算符:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="249c" class="kc kd hy jy b fi ke kf l kg kh">three_fav_colors(*my_fav_colors)<br/>=&gt; "My three favorite colors are green, purple, and blue."</span></pre><p id="9bae" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">通过将*放在数组前面，我们告诉该方法将每个索引元素变成一个参数。它很干净，没有添加任何额外的代码行，读起来也很好。但是最精彩的部分来了:使用*不仅仅是将数组转换成参数。</p><p id="7766" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">比如说我们的程序收集了人们最喜欢的颜色，有人输入了五种颜色。通常情况下，我们必须想办法丢弃多余的数据。但是有了*之后，我们可以让我们的方法变得更加智能，忽略任何不需要的数据:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="e170" class="kc kd hy jy b fi ke kf l kg kh">my_fav_colors = ["green", "purple", "blue", "yellow", "red"]</span><span id="53cf" class="kc kd hy jy b fi ki kf l kg kh">def three_fav_colors_test(color1, color2, color3)</span><span id="e3f0" class="kc kd hy jy b fi ki kf l kg kh">puts "My three favorite colors are #{color1}, #{color2}, and #{color3}."</span><span id="b5e7" class="kc kd hy jy b fi ki kf l kg kh">end<br/></span><span id="def0" class="kc kd hy jy b fi ki kf l kg kh">three_fav_colors(*my_fav_colors)</span><span id="3987" class="kc kd hy jy b fi ki kf l kg kh">=&gt; "My three favorite colors are green, purple, and blue."</span></pre><p id="5b23" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Ruby通常会抱怨传递了太多的参数，但是通过将*作为第四个参数，我们的方法将接受数组的前三个元素，并忽略后面的所有内容。现在，我们不需要编写任何代码来缩减数组，只需要一个字符(如果算上可信的逗号，就是两个)。</p><p id="0ca5" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">然而，兔子洞并没有就此结束；事实上，这仅仅是个开始。</p><p id="e9df" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Splat参数是可选的，因此如果使用splat参数的方法没有收到任何参数，它不会引发错误:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="c5e8" class="kc kd hy jy b fi ke kf l kg kh">def meetings(*times)<br/>    times.each do |time|<br/>        puts "I have a meeting at #{time}."<br/>    end<br/>end</span><span id="8a5c" class="kc kd hy jy b fi ki kf l kg kh">meetings<br/>=&gt;nil</span></pre><p id="5b9b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们可以创建接受任意数量参数的方法:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f1f3" class="kc kd hy jy b fi ke kf l kg kh">def meetings(*times, day)<br/>    times.each do |time|<br/>        puts "I have a meeting at #{time} on #{day}."<br/>    end<br/>end</span><span id="a1f4" class="kc kd hy jy b fi ki kf l kg kh">meetings("3:00", "4:15", "8:00", "Wednesday")<br/>=&gt;"I have a meeting at 3:00 on Wednesday.<br/>"I have a meeting at 4:15 on Wednesday.<br/>"I have a meeting at 8:00 on Wednesday.</span></pre><p id="6d7d" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面还显示了splat可以放在参数列表中的任何地方。我们可以用它一次动态设置多个变量(感谢<a class="ae hv" href="https://www.freecodecamp.org/news/rubys-splat-and-double-splat-operators-ceb753329a78/" rel="noopener ugc nofollow" target="_blank"> freeCodeCamp </a>):</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="5de7" class="kc kd hy jy b fi ke kf l kg kh">first, *middle, last = [1,2,3,4,5]</span><span id="03ee" class="kc kd hy jy b fi ki kf l kg kh">first = 1<br/>middle = [2,3,4]<br/>last = 5</span></pre><p id="a984" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">它甚至可以用来将给定的对象转换成一个数组(<a class="ae hv" href="https://www.honeybadger.io/blog/ruby-splat-array-manipulation-destructuring/" rel="noopener ugc nofollow" target="_blank"> source </a>)。它也适用于哈希:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="bfb3" class="kc kd hy jy b fi ke kf l kg kh">array = *"pizza"</span><span id="12cb" class="kc kd hy jy b fi ki kf l kg kh">array<br/>=&gt;["pizza"]</span><span id="5b0e" class="kc kd hy jy b fi ki kf l kg kh">array = *{tango: "Argentina", ballet: "France"}<br/>array<br/>=&gt;[[:tango, "Argentina"], [:ballet, "France"]]</span></pre><p id="770b" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们得到的散列数组很奇怪，但是有另一个工具使用总是好的。</p><p id="f41a" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用splat操作符是另一种ruby技术，虽然不是必需的，但它打开了一个全新的快捷方式世界。它可以让你的方法更聪明，更抽象，更不容易出错。我将在这里进入doublesplat (**)操作符(它的行为与*非常相似，只是它专门处理散列),但是<a class="ae hv" rel="noopener" href="/@sologoubalex/parameter-with-double-splat-operator-in-ruby-d944d234de34">这篇文章</a>确实公正，我已经让你在这里呆了一段时间了。</p><p id="fad9" class="pw-post-body-paragraph iv iw hy ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在前进，赢得这些争论。编码快乐！</p><figure class="jt ju jv jw fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es kj"><img src="../Images/382af0c9d757ee08667c194a55aee5cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YVcNTtST_a31VCiWeC91ow.png"/></div></div></figure></div></div>    
</body>
</html>