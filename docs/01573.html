<html>
<head>
<title>React from Newbie Perspective— useEffect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从新手的角度反应——使用效果</h1>
<blockquote>原文：<a href="https://medium.com/codex/react-from-newbie-perspective-useeffect-635ae3941617?source=collection_archive---------7-----------------------#2021-05-13">https://medium.com/codex/react-from-newbie-perspective-useeffect-635ae3941617?source=collection_archive---------7-----------------------#2021-05-13</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="186a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">作为React的新手，我如何看待useEffect？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a170011ef48082414a6212373d575e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eMEuvlxp_W0AIalp"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">克拉克·蒂布斯在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="e476" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">毫无疑问，第二重要和有用的反应钩子是useEffect。效果挂钩是在函数组件中执行副作用的一种方式。正如我在上一篇文章中提到的，作为一个新手，我最近开始学习JavaScript和React，所以为了理解Hooks如何帮助和改善程序员的生活，我必须尝试理解它以前是如何工作的。在这种情况下特别说明React类的生命周期是如何工作的，因为效果钩子结合了<em class="kr"> componentDidMount </em>，<em class="kr"> componentDidUpdate </em>和<em class="kr"> componentWillUnmount </em>。以及清理和不清理的副作用是如何起作用的。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ks"><img src="../Images/bbc0334726ad5d1fc2293083e430a02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cEWErpe-oY-_S1dOaT1NtA.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">丹·阿布拉莫夫(<a class="ae jn" href="https://twitter.com/dan_abramov/status/981712092611989509" rel="noopener ugc nofollow" target="_blank">https://twitter.com/dan_abramov/status/981712092611989509</a>)的反应生命周期图</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="a160" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">效果挂钩—一次完成更多动作</h1><p id="bdf2" class="pw-post-body-paragraph jv jw hi jx b jy ll ij ka kb lm im kd ke ln kg kh ki lo kk kl km lp ko kp kq hb bi translated">效果挂钩将3种生命周期方法合二为一。但是它是如何做到这一点的呢？</p><h1 id="ef7e" class="kt ku hi bd kv kw lq ky kz la lr lc ld io ls ip lf ir lt is lh iu lu iv lj lk bi translated">安装和卸载组件</h1><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/cd4752788bef24583cb2ce1019aa6f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FyQf_NdUX0antghe"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">卡斯帕·卡米尔·鲁宾在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="1a13" class="lw ku hi bd kv lx ly lz kz ma mb mc ld ke md me lf ki mf mg lh km mh mi lj mj bi translated">增加</h2><p id="2ad0" class="pw-post-body-paragraph jv jw hi jx b jy ll ij ka kb lm im kd ke ln kg kh ki lo kk kl km lp ko kp kq hb bi translated">渲染完成时，运行useEffect的简单版本。React在DOM更新后执行useEffect中的代码，并在每次呈现组件时执行它。如果我们需要在组件卸载后清理，我们可以添加函数来执行这个清理作为返回值。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><h2 id="dba4" class="lw ku hi bd kv lx ly lz kz ma mb mc ld ke md me lf ki mf mg lh km mh mi lj mj bi translated">卸载</h2><p id="4f5d" class="pw-post-body-paragraph jv jw hi jx b jy ll ij ka kb lm im kd ke ln kg kh ki lo kk kl km lp ko kp kq hb bi translated">与类中的componentWillUnmount相反，React Effect挂钩使用返回的函数，该函数在组件被卸载时执行。它不一定要被命名为函数，但它甚至可以是一个箭头函数。不管怎样，这个函数清理了正在运行的应用程序，使我们避免了内存泄漏错误和许多令人头疼的问题。在React Docs中，这一部分非常简单，我找到了马丁·马托关于dev . to(<a class="ae jn" href="https://dev.to/otamnitram/react-useeffect-cleanup-how-and-when-to-use-it-2hbm" rel="noopener ugc nofollow" target="_blank">https://dev . to/otamnitram/React-use effect-clean up-how-and-when-to-use-it-2hbm</a>)的一篇非常简单的文章，其中有一个例子:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="aa59" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">我们可以看到，添加的变量“mounted”提供了有关组件实际状态的信息，如果组件被卸载，它将运行清理功能，将此变量设置为“false”并停止执行提供的编码。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="55b2" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">更新组件</h1><p id="ac2f" class="pw-post-body-paragraph jv jw hi jx b jy ll ij ka kb lm im kd ke ln kg kh ki lo kk kl km lp ko kp kq hb bi translated">正如我之前写的，useEffect在每次渲染时都会执行。它会导致渲染循环，或者在更好的情况下，在不需要的时候执行useEffect，浪费计算资源。这正是第二个可选参数useEffect出现的情况。第二个参数是因变量和函数的数组。要运行useEffect just ones，您可以将此数组留空。在其他情况下，我们可以指定(或者ESLint将强制使用)变量或函数，这些变量或函数的变化将触发再次执行useEffect。但useEffect仅在这些值被更改时运行，因此它将比每次渲染运行得少。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mk ml l"/></div></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><h1 id="8c54" class="kt ku hi bd kv kw kx ky kz la lb lc ld io le ip lf ir lg is lh iu li iv lj lk bi translated">结论</h1><p id="bbfa" class="pw-post-body-paragraph jv jw hi jx b jy ll ij ka kb lm im kd ke ln kg kh ki lo kk kl km lp ko kp kq hb bi translated">当我们理解React如何与组件生命周期一起工作时，React Effect Hook就成了编码者的最大朋友之一。与React组件类生命周期方法相比，它的最大优势是统一性、简单性和不重复代码。而在课堂上，我们需要三个方法，用效果钩子，我们只有一个。而这也是Hooks的主要目标之一，让我们的生活更轻松。</p></div></div>    
</body>
</html>