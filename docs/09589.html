<html>
<head>
<title>Fetch from a Custom Route in Ruby on Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Ruby on Rails中的自定义路线获取</h1>
<blockquote>原文：<a href="https://medium.com/codex/fetch-from-a-custom-route-in-ruby-on-rails-834e7a014fed?source=collection_archive---------19-----------------------#2022-10-28">https://medium.com/codex/fetch-from-a-custom-route-in-ruby-on-rails-834e7a014fed?source=collection_archive---------19-----------------------#2022-10-28</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="065a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi jd translated">任何使用过Ruby on Rails的人都能体会到它的高效——这是开发人员的梦想！通过终端中的一个快捷行，我们可以为所需的类创建迁移、模型、控制器和序列化程序文件。</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="f7ec" class="jv jw hi jr b fi jx jy l jz ka">$ rails g resource Noodle shape base origin</span></pre><p id="e3b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给了我们这个终端输出:</p><figure class="jm jn jo jp fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es kb"><img src="../Images/edd71f557b6655da84184e0f9fe0483a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogbNrphb1lLv9H-isKU93A.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">在终端中运行rails g资源时创建的迁移、模型、控制器和序列化程序文件。</figcaption></figure><p id="07ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了上面的文件，这一行还为这个类在数据库中的对应表添加了“资源”。</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="9b4d" class="jv jw hi jr b fi jx jy l jz ka"># routes.rb</span><span id="c607" class="jv jw hi jr b fi kn jy l jz ka">Rails.application.routes.draw do<br/> resources :noodles<br/>end</span></pre><p id="5c68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从routes文件中的这一行开始，我们就自动获得了RESTful路径。换句话说，每个资源行为我们的五个主要操作设置了路径:索引、显示、创建、更新和销毁。</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="df76" class="jv jw hi jr b fi jx jy l jz ka"># routes.rb</span><span id="e41c" class="jv jw hi jr b fi kn jy l jz ka">resources :noodles</span><span id="e8d4" class="jv jw hi jr b fi kn jy l jz ka"><em class="ko"># the one line above does the same job as the five lines below combined</em></span><span id="2539" class="jv jw hi jr b fi kn jy l jz ka">get ‘/noodles’, to: ‘noodles#index’</span><span id="8566" class="jv jw hi jr b fi kn jy l jz ka">get ‘/noodles/:id’, to: ‘noodles#show’</span><span id="9658" class="jv jw hi jr b fi kn jy l jz ka">post ‘/noodles’, to: ‘noodles#create’</span><span id="f14c" class="jv jw hi jr b fi kn jy l jz ka">patch ‘/noodles/:id’, to: ‘noodles#update’</span><span id="57d7" class="jv jw hi jr b fi kn jy l jz ka">delete ‘/noodles/:id’, to: ‘noodles#destroy’</span></pre><p id="6bb2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在要做的就是在我们的控制器文件中定义这些CRUD动作。简单，搞定！</p><p id="07be" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，如果我们需要另一条<a class="ae kp" href="https://guides.rubyonrails.org/routing.html" rel="noopener ugc nofollow" target="_blank">路线从</a>获取数据，这条路线不属于我们给出的五条主要路线，那该怎么办呢？例如，也许我们的每一种面条都有评论，我们希望只获取特定面条的评论，而不是数据库中的所有评论。进入<a class="ae kp" href="https://levelup.gitconnected.com/how-to-write-custom-routes-in-rails-872df2ca4d39" rel="noopener ugc nofollow" target="_blank">自定义路线</a>！</p><h2 id="79d8" class="jv jw hi bd kq kr ks kt ku kv kw kx ky iq kz la lb iu lc ld le iy lf lg lh li bi translated">设置它</h2><p id="e694" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">定制路线的设置风格<a class="ae kp" rel="noopener" href="/@zerminaejaz/understanding-ruby-on-rails-explicit-routes-and-creating-custom-routes-ec682b64b15">与我们从资源中获得的路线风格</a>相同，如上图所示。我们从HTTP动词(get、post、put、patch、delete)开始，然后是字符串形式的URL路径、逗号、“to:”形式的URL路径，最后是由hashtag分隔的一个字符串形式的控制器和动作名称:</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="971c" class="jv jw hi jr b fi jx jy l jz ka"># routes.rb</span><span id="33b4" class="jv jw hi jr b fi kn jy l jz ka"># route template</span><span id="d6a1" class="jv jw hi jr b fi kn jy l jz ka">HTTP verb 'URL path', to: 'controller#action'</span><span id="c987" class="jv jw hi jr b fi kn jy l jz ka"># applied to an example </span><span id="5fd1" class="jv jw hi jr b fi kn jy l jz ka">get ‘/noodles/:noodle_id/reviews’, to: ‘reviews#specific_noodle’</span></pre><p id="cce3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一旦这一行被保存在我们的routes.rb文件中，下一步就是转到我们指定的控制器文件并定义我们指定的操作:</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="0f2f" class="jv jw hi jr b fi jx jy l jz ka"># reviews_controller.rb</span><span id="7b2b" class="jv jw hi jr b fi kn jy l jz ka">def specific_noodle<br/> render json: Review.where(noodle_id: params[:noodle_id])<br/>end</span></pre><h2 id="d993" class="jv jw hi bd kq kr ks kt ku kv kw kx ky iq kz la lb iu lc ld le iy lf lg lh li bi translated">使用它</h2><p id="18a5" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ll is it iu lm iw ix iy ln ja jb jc hb bi translated">现在我们有了自己独特的路线，最好的部分是能够看到我们首先想要的数据！我们可以通过运行我们的服务器来测试我们的路由是否有效，然后前往Postman或托管我们服务器的浏览器。<em class="ko">记住:只有get请求可以在浏览器中测试——对所有其他HTTP请求使用Postman。</em></p><figure class="jm jn jo jp fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es lo"><img src="../Images/5692ad8e226d642d5c2900d85177d153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfTBLLyhuDJCFSJnl3Pxwg.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">如何在Postman中测试我们新的自定义路线？</figcaption></figure><figure class="jm jn jo jp fd kc er es paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="er es lp"><img src="../Images/38f838c67ab35106d9df3ee493ad15d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HGGpHUMAfsDN-p5NcF9-cA.png"/></div></div><figcaption class="kj kk et er es kl km bd b be z dx translated">如何在浏览器中测试我们新的自定义路线？</figcaption></figure><p id="19b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们同意返回的数据，我们现在可以将这个路由应用到我们的前端获取请求。我们从中获取的URL将与我们的自定义路由中的URL路径具有相同的端点。我们获取的方法也将匹配我们自定义路由中的方法。</p><pre class="jm jn jo jp fd jq jr js jt aw ju bi"><span id="2990" class="jv jw hi jr b fi jx jy l jz ka">// Frontend.js (frontend file)</span><span id="31c0" class="jv jw hi jr b fi kn jy l jz ka">fetch(`/noodles/${<em class="ko">noodle</em>.id}/reviews`)<br/> .then(<em class="ko">res</em> =&gt; <em class="ko">res</em>.json())</span><span id="94be" class="jv jw hi jr b fi kn jy l jz ka">// Recall our custom route URL path: ‘/noodles/:noodle_id/reviews’</span></pre><p id="232e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！</p><p id="8979" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">虽然Ruby on Rails给了我们很多快捷方式，但它也被设计成易于定制的。让后端做繁重的工作，并使用自定义路线筛选出准确的所需数据！</p><h2 id="bc18" class="jv jw hi bd kq kr ks kt ku kv kw kx ky iq kz la lb iu lc ld le iy lf lg lh li bi translated">参考</h2><div class="lq lr ez fb ls lt"><a href="https://guides.rubyonrails.org/routing.html" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab dw"><div class="lv ab lw cl cj lx"><h2 class="bd hj fi z dy ly ea eb lz ed ef hh bi translated">导轨从外部布线- Ruby on Rails导轨</h2><div class="ma l"><h3 class="bd b fi z dy ly ea eb lz ed ef dx translated">从外向内进行导轨布线本指南涵盖了导轨布线面向用户的功能。阅读本指南后…</h3></div><div class="mb l"><p class="bd b fp z dy ly ea eb lz ed ef dx translated">guides.rubyonrails.org</p></div></div><div class="mc l"><div class="md l me mf mg mc mh kh lt"/></div></div></a></div><div class="lq lr ez fb ls lt"><a rel="noopener follow" target="_blank" href="/@zerminaejaz/understanding-ruby-on-rails-explicit-routes-and-creating-custom-routes-ec682b64b15"><div class="lu ab dw"><div class="lv ab lw cl cj lx"><h2 class="bd hj fi z dy ly ea eb lz ed ef hh bi translated">了解Ruby on Rails显式路由并创建自定义路由</h2><div class="ma l"><h3 class="bd b fi z dy ly ea eb lz ed ef dx translated">“Ruby on Rails，或Rails，是在MIT许可下用Ruby编写的服务器端web应用程序框架。Rails是一个…</h3></div><div class="mb l"><p class="bd b fp z dy ly ea eb lz ed ef dx translated">medium.com</p></div></div><div class="mc l"><div class="mi l me mf mg mc mh kh lt"/></div></div></a></div><div class="lq lr ez fb ls lt"><a href="https://levelup.gitconnected.com/how-to-write-custom-routes-in-rails-872df2ca4d39" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab dw"><div class="lv ab lw cl cj lx"><h2 class="bd hj fi z dy ly ea eb lz ed ef hh bi translated">如何在Rails中编写自定义路线</h2><div class="ma l"><h3 class="bd b fi z dy ly ea eb lz ed ef dx translated">我项目的大部分后端都是用Ruby on Rails构建的。在……工作期间，我学习并使用Ruby on Rails</h3></div><div class="mb l"><p class="bd b fp z dy ly ea eb lz ed ef dx translated">levelup.gitconnected.com</p></div></div><div class="mc l"><div class="mj l me mf mg mc mh kh lt"/></div></div></a></div></div></div>    
</body>
</html>