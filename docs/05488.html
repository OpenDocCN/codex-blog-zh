<html>
<head>
<title>Optimize Development Cold Start</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">优化开发冷启动</h1>
<blockquote>原文：<a href="https://medium.com/codex/development-cold-start-dad87e7836d1?source=collection_archive---------0-----------------------#2022-03-04">https://medium.com/codex/development-cold-start-dad87e7836d1?source=collection_archive---------0-----------------------#2022-03-04</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e92aca87cbb5343764a43dc19e84db04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3A6bhQMiPJHQAhoN"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">尤利娅·马特维延科拍摄的照片</figcaption></figure><p id="6b5e" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在我作为一名软件工程师在亚马逊的职业生涯中，我为6个软件产品的43个应用程序和服务贡献了200多个包，从高吞吐量AWS服务到面向客户的web应用程序，再到不经常更改的内部工具。</p><p id="d052" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作为一个流浪者，我贡献了这么多不同的应用程序，每一个都持续了相对短的时间，我比大多数人更清楚“冷启动”开发体验的问题。</p><p id="a229" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在过去几个月的另一次团队转移后，我再次意识到冷启动开发经验对软件产品的影响有多大，我也更加相信它值得跟踪和优化。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="6131" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">冷启动开发</h1><p id="0e7b" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">我将应用程序的冷启动开发体验定义为工程师第一次或在长时间中断后用来更改应用程序的过程。</p><p id="65f0" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">冷启动开发经验是“<a class="ae iu" href="https://refactoring.fm/p/onboarding-engineers?s=r" rel="noopener ugc nofollow" target="_blank">工程师入职</a>的一个组成部分，但仅限于软件开发生命周期。它包括授予源代码权限、访问加密密钥、数据库或其他资源、一次性配置、引导软件、依赖项、部署工具和硬件。</p><p id="8105" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在这种情况下，冷启动是一个典型的新团队工程师对应用程序进行最简单的更改所需要的(想想:Hello World)。</p><p id="d0ad" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我之所以使用“冷启动”这个术语，是因为这些天我一直在思考“功能即服务”产品的<a class="ae iu" href="https://en.wikipedia.org/wiki/Cold_start_(computing)" rel="noopener ugc nofollow" target="_blank">冷启动</a>问题，功能和工程师之间的类比非常好。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ld"><img src="../Images/022516929daa10504e8153bc8f3d1141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B6SDDGmNqW7okuo9.png"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://aws.amazon.com/blogs/compute/operating-lambda-performance-optimization-part-1/" rel="noopener ugc nofollow" target="_blank">“运行λ:性能优化”</a></figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="72b2" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">冷启动对软件的影响</h1><p id="cd3f" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在下文中，我认为应用程序的冷启动开发体验几乎影响了软件和软件团队的每个主要方面:生产率、可用性、质量、安全性、可替代性、士气和损耗。</p><h2 id="8492" class="li kb hi bd kc lj lk ll kg lm ln lo kk jg lp lq ko jk lr ls ks jo lt lu kw lv bi translated">工程师生产力</h2><p id="8a9e" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">冷启动影响软件的明显部分是生产率。考虑到软件工程师的低平均任期和高离职率，一个普通工程师对一个产品的总贡献受到长期冷启动的限制。</p><p id="d8f4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果一个普通的工程师只需要在一个拥有十几个不断变化的应用程序的团队中工作18个月，每个应用程序都需要每6个月左右进行一次为期一天的冷启动，那么业务的机会成本就是工程师在团队中的总时间的一个有意义的量。考虑到雇用工程师所需的努力，我认为每个团队每年花费在建立开发环境上的成本在数万美元左右。那是愚蠢的！</p><h2 id="d582" class="li kb hi bd kc lj lk ll kg lm ln lo kk jg lp lq ko jk lr ls ks jo lt lu kw lv bi translated">可用性和收入损失</h2><p id="89ed" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">对于包括软件工程师的随叫随到的产品，长时间的冷启动也是可用性风险。我见过不止一次停机时间被有意延长，因为电话技术人员花了几个小时努力设置服务来修复一个错误。</p><p id="4646" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当一项服务具有严格的可用性服务级别协议(SLA)和<a class="ae iu" href="https://www.techtarget.com/searchnetworking/feature/The-Holy-Grail-of-five-nines-reliability" rel="noopener ugc nofollow" target="_blank">许多许多“九”</a>时，一个小时的浪费可能是毁灭性的。阅读一份<a class="ae iu" href="https://wa.aws.amazon.com/wat.concept.coe.en.html" rel="noopener ugc nofollow" target="_blank">纠错</a>时间表令人尴尬，其中包括随叫随到建立数小时的服务(忽略了这显然应该事先完成)。</p><p id="3ef9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">考虑到每分钟停机损失的收入，长时间冷启动的成本可能是巨大的。</p><h2 id="8385" class="li kb hi bd kc lj lk ll kg lm ln lo kk jg lp lq ko jk lr ls ks jo lt lu kw lv bi translated">质量</h2><p id="a30d" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">当一个开发人员的任务是构建一个特性时，任何花费在让应用程序运行上的额外时间都会消耗掉分配给完成这个特性的时间。当时间紧迫时，质量往往首先受到影响。</p><p id="8ce9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，一次痛苦的冷启动设置经历导致了<a class="ae iu" href="https://blog.codinghorror.com/the-broken-window-theory/" rel="noopener ugc nofollow" target="_blank">破窗理论</a>对该应用的影响。如果应用程序已经花了3天时间来设置，那么再花5分钟又有什么意义呢？</p><p id="32b4" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">受冷启动影响的软件质量的另一个因素是架构内聚性。在面向服务的架构中，长时间冷启动的一个不幸的副作用可能是短视的动机，将逻辑放在不属于它的地方，只是为了生产速度或避免摩擦。一天的障碍会损害建筑的凝聚力，这是一种耻辱，但它确实发生了。</p><h2 id="8b5e" class="li kb hi bd kc lj lk ll kg lm ln lo kk jg lp lq ko jk lr ls ks jo lt lu kw lv bi translated">安全性</h2><p id="5546" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">回想一下最近引起互联网大火的高调<a class="ae iu" href="https://www.wsj.com/articles/what-is-the-log4j-vulnerability-11639446180" rel="noopener ugc nofollow" target="_blank"> Log4J/jndi零日</a>。当每一秒钟都在增加web应用被破坏的可能性时，冷启动就是一个生存威胁。当开发人员第一次(在凌晨3点)想出如何构建一个团队中任何人一年都没有接触过的应用程序时，公共零日补丁的应用程序被延迟了几个小时，这很容易破坏信任。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/b4f9db186066183b3ab5969a495a5ff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/0*VsBwoxDehSU_hp3K"/></div><figcaption class="iq ir et er es is it bd b be z dx translated">图片来自log4jmemes.com<a class="ae iu" href="https://log4jmemes.com/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><h2 id="04a3" class="li kb hi bd kc lj lk ll kg lm ln lo kk jg lp lq ko jk lr ls ks jo lt lu kw lv bi translated">知识孤岛和工程可替代性</h2><p id="70ab" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">冷启动还会导致不必要的专业知识孤岛，这对<a class="ae iu" href="https://www.pluralsight.com/tech-blog/knowledge-silos/" rel="noopener ugc nofollow" target="_blank">非常不利</a>。根据我的经验，自组织团队会将任务分配给已经建立了环境的工程师，而不是将工作平均分配给可用的同事。通过将任务交给已经建立了开发环境的人来避免挂钟时间是很自然的，但从长期来看这对团队健康不利。</p><p id="9725" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这种由应用程序设置引起的孤立可能是有害的。这使得一些工程师“被困”在系统的特定部分，仅仅是因为团队太懒而没有设置环境。根据我的经验，如果一个应用程序有一个很长的冷启动设置成本，它通常还伴随着其他糟糕软件的特征，比如高度耦合、复杂性和/或差的测试覆盖率，如上所述。</p><p id="8adb" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我不止一次地看到这种情况，我可以说，仅仅因为你最近设法让它运行起来，就成为那些糟糕的系统上的任务的第一选择会令人沮丧。</p><h2 id="b43d" class="li kb hi bd kc lj lk ll kg lm ln lo kk jg lp lq ko jk lr ls ks jo lt lu kw lv bi translated">团队士气和损耗</h2><p id="87b8" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">最初安装软件的痛苦经历也是人员流失的一个因素。</p><p id="1c55" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当我还是一个陌生人的时候，我曾经看到一个新来的工程师突然“180度大转弯！”在与一个特别讨厌设置的应用程序发生冲突后，离开团队，称设置困难是他们离开时的一个主要抱怨(尽管是几个抱怨之一)。</p><p id="f7ce" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在上述siloing部分中提到，冷启动设置时间长的应用程序通常还伴随着其他不好的软件模式。冒着将软件拟人化的风险，首次环境设置中的摩擦会让应用程序看起来像是在积极地抵制被改变，从而导致不满和想要避开那个组件。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><h1 id="884e" class="ka kb hi bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">如何衡量和判断冷启动</h1><p id="bd9f" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">工程领导可以简单地衡量这种冷启动:当他们对系统进行第一次更改时，观察一个新雇员或最近的调动。功能/错误修复分配和感叹“我终于让它运行了！”之间的时间是冷启动。</p><p id="7cb5" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">几分钟的冷启动是可以实现的，即使是我见过的最麻烦的遗留系统。天量级的冷启动比我想承认的更常见，也更不可接受。</p><p id="b363" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你正在考虑团队变动，问问你未来的队友，要多久才能从“新笔记本，谁是谁？”到他们最被忽视的服务或应用程序的CD管道中。那个回答能告诉你很多！</p><h1 id="4cf4" class="ka kb hi bd kc kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx bi translated">如何提高</h1><p id="d65a" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">在已经有足够长的冷启动时间的应用中，可能有几十个明显的、容易实现的改进机会。</p><p id="db5c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我鼓励任何仍在阅读的人使用这个框架来识别这些机会。</p><ol class=""><li id="f1c2" class="mc md hi ix b iy iz jc jd jg me jk mf jo mg js mh mi mj mk bi translated">问问新开发人员最痛苦的部分是什么。先改善一下。</li><li id="22e9" class="mc md hi ix b iy ml jc mm jg mn jk mo jo mp js mh mi mj mk bi translated">构建应用程序所需的引导工具可以和脚本一起安装吗？</li><li id="52ef" class="mc md hi ix b iy ml jc mm jg mn jk mo jo mp js mh mi mj mk bi translated">您的开发环境真的需要那种资源吗？考虑在本地模仿依赖项，使用不太安全的代理代替SSL证书(在开发环境中！)，使用静态而不是动态资源。</li><li id="97d2" class="mc md hi ix b iy ml jc mm jg mn jk mo jo mp js mh mi mj mk bi translated">收集并列出开发人员冷启动应用程序的步骤。花一天时间消除或自动化其中的一个。这样做一个月一次或一个季度一次，直到你不能。</li></ol><h1 id="273d" class="ka kb hi bd kc kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx bi translated">结论和参考文献</h1><p id="bf0e" class="pw-post-body-paragraph iv iw hi ix b iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo lc jq jr js hb bi translated">这不是一个特别新的话题，但最近的经历迫使我抱怨它。</p><p id="e594" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你想阅读更多关于这个主题的内容，可以看看Joel Test和这篇很棒的文章“<a class="ae iu" href="https://builtin.com/software-engineering-perspectives/increase-new-developer-productivity" rel="noopener ugc nofollow" target="_blank">想要一个高绩效的开发团队吗？提高您的工作效率。</a></p><p id="c3ea" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你觉得这篇文章有用，请留言、鼓掌、<a class="ae iu" href="https://twitter.com/zdwolfe" rel="noopener ugc nofollow" target="_blank">或@我</a>！</p></div></div>    
</body>
</html>