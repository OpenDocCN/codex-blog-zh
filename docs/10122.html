<html>
<head>
<title>Using Native Prompt with .NET MAUI Blazor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用本机提示。网毛伊岛Blazor</h1>
<blockquote>原文：<a href="https://medium.com/codex/using-native-prompt-with-net-maui-blazor-f91fdfb6aa4b?source=collection_archive---------8-----------------------#2022-12-06">https://medium.com/codex/using-native-prompt-with-net-maui-blazor-f91fdfb6aa4b?source=collection_archive---------8-----------------------#2022-12-06</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/970f5247a29b52716425cc97a2ded867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8mSZ7LSKhDXsOWPN44ILQ.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">。NET MAUI Blazor本机提示</figcaption></figure></div><div class="ab cl iu iv gp iw" role="separator"><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz ja"/><span class="ix bw bk iy iz"/></div><div class="hb hc hd he hf"><p id="3acf" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">大家好，欢迎来到这个短片，但我认为它会对你有用。我将展示在开发跨平台的应用程序时，我们如何以简单的方式使用警告和提示。</p><p id="27a1" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">这就是我们努力实现的目标:</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es jz"><img src="../Images/b10d143c8f0b8ae35fff6402aebd8262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*E7_xPLraB_iXonXOyf0z3w.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae ke" rel="noopener" href="/codex/i-published-the-application-i-developed-with-net-maui-blazor-aedc2655f410"> AFUP档案馆名称</a></figcaption></figure><p id="db23" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">首先，我们需要创建一个使用所有平台的接口，命名为:IPromptService</p><p id="ca90" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我们特别使用接口的另一个原因是，如果我们愿意，我们可以在不改变代码的情况下，使用共享ui将其转换为web应用程序。<br/>当您将共享ui集成到web应用程序中时，您所要做的就是重写服务，您的应用程序将不会出现问题，因为它将使用相同的接口。</p><pre class="ka kb kc kd fd kf kg kh bn ki kj bi"><span id="c375" class="kk kl hi kg b be km kn l ko kp">    public interface IPromptService<br/>    {<br/>        Task ShowAlertAsync(string title, string message, string cancel = "OK");<br/>        Task&lt;bool&gt; ShowConfirmationAsync(string title, string message, string accept = "Yes", string cancel = "No");<br/>        Task&lt;string&gt; ShowPromptAsync(string title, string message, string accept = "Yes", string cancel = "No");<br/><br/>        void ShowAlert(string title, string message, string cancel = "OK");<br/>        void ShowConfirmation(string title, string message, Action&lt;bool&gt; callback,<br/>                              string accept = "Yes", string cancel = "No");<br/>    }</span></pre><p id="951f" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">现在我们已经创建了我们的接口，让我们用它在<strong class="jd hj">毛伊岛</strong>项目中创建一个类。</p><p id="7898" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我特别提到毛伊岛项目，以防你像我一样有一个支离破碎的结构。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div class="er es kq"><img src="../Images/394aadc2d317f8732d230e7f0a81b969.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*Uk4EXMoc-2W_96qWA-U4yg.png"/></div></figure><p id="cd50" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">之所以在这里，是因为我们实际上将使用Xamarin，此时我们将使用<a class="ae ke" href="https://dotnet.microsoft.com/en-us/apps/xamarin" rel="noopener ugc nofollow" target="_blank"> Xamarin </a>运行警报。</p><pre class="ka kb kc kd fd kf kg kh bn ki kj bi"><span id="936c" class="kk kl hi kg b be km kn l ko kp"> public class PromptService : IPromptService<br/>    {<br/>        // ----- async calls (use with "await" - MUST BE ON DISPATCHER THREAD) -----<br/><br/>        public Task ShowAlertAsync(string title, string message, string cancel = "OK")<br/>        {<br/>            return Application.Current.MainPage.DisplayAlert(title, message, cancel);<br/>        }<br/><br/>        public Task&lt;bool&gt; ShowConfirmationAsync(string title, string message, string accept = "Yes", string cancel = "No")<br/>        {<br/>            return Application.Current.MainPage.DisplayAlert(title, message, accept, cancel);<br/>        }<br/><br/>        public Task&lt;string&gt; ShowPromptAsync(string title, string message, string accept = "Yes", string cancel = "No")<br/>        {<br/>            return Application.Current.MainPage.DisplayPromptAsync(title, message, accept, cancel,maxLength:100);<br/>        }<br/><br/>        // ----- "Fire and forget" calls -----<br/><br/>        /// &lt;summary&gt;<br/>        /// "Fire and forget". Method returns BEFORE showing alert.<br/>        /// &lt;/summary&gt;<br/>        public void ShowAlert(string title, string message, string cancel = "OK")<br/>        {<br/>            Application.Current.MainPage.Dispatcher.Dispatch(async () =&gt;<br/>                await ShowAlertAsync(title, message, cancel)<br/>            );<br/>        }<br/><br/>        /// &lt;summary&gt;<br/>        /// "Fire and forget". Method returns BEFORE showing alert.<br/>        /// &lt;/summary&gt;<br/>        /// &lt;param name="callback"&gt;Action to perform afterwards.&lt;/param&gt;<br/>        public void ShowConfirmation(string title, string message, Action&lt;bool&gt; callback,<br/>                                     string accept = "Yes", string cancel = "No")<br/>        {<br/>            Application.Current.MainPage.Dispatcher.Dispatch(async () =&gt;<br/>            {<br/>                bool answer = await ShowConfirmationAsync(title, message, accept, cancel);<br/>                callback(answer);<br/>            });<br/>        }<br/>    }</span></pre><p id="06b4" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">有了我们创建的接口提供的类，我们现在可以在我们想要的项目中使用alert和prompt，并根据返回编写逻辑。</p><p id="2e53" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">当然，在MauiProgram.cs中定义我们的服务也很重要。</p><pre class="ka kb kc kd fd kf kg kh bn ki kj bi"><span id="8f01" class="kk kl hi kg b be km kn l ko kp">        builder.Services.AddSingleton&lt;IPromptService, PromptService&gt;();</span></pre><p id="9ec6" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">现在我们可以以两种方式使用这项服务。<br/>我们可以从页面或组件的代码后面添加它。或者我们可以使用<a class="ae ke" href="http://twitter.com/code" rel="noopener ugc nofollow" target="_blank"> @code </a>和razor直接添加到razor文件中。<br/>我将通过代码后面其实都一样。</p><p id="7987" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">我去了。我想打印提示的组件的cs文件&amp;我正在注入我们的提示服务。</p><pre class="ka kb kc kd fd kf kg kh bn ki kj bi"><span id="d7dc" class="kk kl hi kg b be km kn l ko kp">    [Inject]<br/>    private IPromptService promptService { get; set; }</span></pre><p id="ca5f" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">现在，我可以通过调用ShowPromptAsync方法在屏幕上显示提示，只要我希望提示出现在任何地方。</p><figure class="ka kb kc kd fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/01f0bf745f3333c258fd2049e8b332b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WIi3oEasKECiDlzYVlJnDw.png"/></div></div></figure><figure class="ka kb kc kd fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ks"><img src="../Images/f257d06755489ce6eb05b821927e5321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4rqV5-j2gX7HcU1ieIe17A.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae ke" rel="noopener" href="/codex/i-published-the-application-i-developed-with-net-maui-blazor-aedc2655f410"> AFUP毛伊岛ISO档案馆</a></figcaption></figure><p id="3452" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">无需做任何额外的调整就可以在iOS、Android、MAC和windows上流畅运行。如果你按照我描述的顺序进行，你不会有任何问题。</p><p id="03c9" class="pw-post-body-paragraph jb jc hi jd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hb bi translated">请随意留下反馈。<br/>后会有期。</p></div></div>    
</body>
</html>