<html>
<head>
<title>How it took 2 weeks to put some IKEA packages into a car</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用两周时间将一些宜家包装放进汽车</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-it-took-2-weeks-to-put-some-ikea-packages-into-a-car-80776e307dc9?source=collection_archive---------21-----------------------#2021-07-12">https://medium.com/codex/how-it-took-2-weeks-to-put-some-ikea-packages-into-a-car-80776e307dc9?source=collection_archive---------21-----------------------#2021-07-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae jd" href="https://www.will-it-fit.xyz/" rel="noopener ugc nofollow" target="_blank"><em class="je"/></a>|<a class="ae jd" href="https://github.com/freichel/willitfit" rel="noopener ugc nofollow" target="_blank"><em class="je">GitHub</em></a></p><p id="1d27" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Le Wagon的数据科学训练营的高潮是我们分成四个小组，在各种数据相关项目上工作两周。我们的团队可能有一个最不“数据科学”的想法要解决:</p><blockquote class="jf jg jh"><p id="e892" class="if ig je ih b ii ij ik il im in io ip ji ir is it jj iv iw ix jk iz ja jb jc hb bi translated">给定一辆汽车和一些宜家包装，计算它们是否合适，如果合适，展示如何合适。</p></blockquote><p id="f42a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但这并没有阻止我们使用在数据科学问题背景下学到的大量工具，并在这里应用它们。</p></div><div class="ab cl jl jm gp jn" role="separator"><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq jr"/><span class="jo bw bk jp jq"/></div><div class="hb hc hd he hf"><h1 id="2cb7" class="js jt hi bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">1.设置</h1><p id="2e56" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我们的团队领导Flo在周一早上带着4个模块的计划来了，为了尽快交付MVP(最低可行产品),他让我们朝着正确的方向前进:</p><ul class=""><li id="1e28" class="kv kw hi ih b ii ij im in iq kx iu ky iy kz jc la lb lc ld bi translated">使用网络刮刀收集和储存宜家包装尺寸</li><li id="a79b" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">生成汽车行李箱的尺寸</li><li id="8bc8" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">找出将包裹装进行李箱的最佳方法的优化算法</li><li id="9c39" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">优化器输出的交互式3D图</li></ul><figure class="lk ll lm ln fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lj"><img src="../Images/c94dfc1e5d745871a1e1f2de6016809a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-gWENVMLCUdx_CTlckWiQ.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated"><em class="lz">一个非常基础的MVP(用</em><a class="ae jd" href="https://excalidraw.com/" rel="noopener ugc nofollow" target="_blank"><em class="lz">Excalidraw</em></a><em class="lz">)</em>绘制)</figcaption></figure><p id="86ed" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个模块都有明确定义的输入和输出，因此每个模块的输出可以简单地输入下一个模块。值得注意的是，拥有一个真正的<em class="je">、</em>产品会缺少一些东西，但足以突出未预见的障碍、低效的方向，以及我们与4个相对新手在2周内实际可以实现的目标。</p><p id="100d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在完成了MVP目标、设置了GitHub、Trello板和一个新的python环境之后，我们给自己分配了一个模块，打开了我们的Jupyter笔记本，开始了工作。</p><h1 id="2e61" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">2.3D绘图</h1><p id="7722" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我负责策划。我知道<strong class="ih hj">输入</strong>，能够直接投入是非常令人兴奋的。</p><ul class=""><li id="f648" class="kv kw hi ih b ii ij im in iq kx iu ky iy kz jc la lb lc ld bi translated">包装及其尺寸列表</li><li id="2085" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">3D numpy阵列形式的“卷空间”,填充有上述包</li></ul><p id="23ca" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我知道我的<strong class="ih hj">输出</strong>:</p><ul class=""><li id="21ad" class="kv kw hi ih b ii ij im in iq kx iu ky iy kz jc la lb lc ld bi translated">交互式3D绘图</li></ul><p id="5486" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我是如何走到这一步的，现在完全取决于我自己。在整个训练营中，我们主要使用matplotlib和seaborn来可视化数据；在交互性方面，我们接触了一些ipywidgets和plotly express。</p><p id="f88b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">鉴于我们的<em class="je">体积空间</em>被表示为1cm×1cm×1cm的立方体，使用<a class="ae jd" href="https://en.wikipedia.org/wiki/Voxel" rel="noopener ugc nofollow" target="_blank">体素</a>似乎是一个伟大的想法。更好的是，matplotlib已经有了一个用于绘制体素的<a class="ae jd" href="https://matplotlib.org/stable/gallery/mplot3d/voxels.html" rel="noopener ugc nofollow" target="_blank">内置方法，开箱即用看起来相当不错……但是matplotlib并不是真正的交互式，交互性是我们MVP的一部分，所以继续寻找更合适的东西。</a></p><p id="e4a3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我最终在plotly文档中找到了<a class="ae jd" href="https://plotly.com/python/3d-mesh/" rel="noopener ugc nofollow" target="_blank">plotly graph object 3D mesh plots</a>。已经是一个立方体的例子，这应该很容易！只需给出你的对象的每个顶点的坐标，plotly就会在它们之间画一个网格……听起来不错，但是现在我有一个问题:我没有坐标。我有一个3D numpy数组，其中我知道哪些体素是空的，是汽车的一部分还是包裹的一部分。我有包的列表，但是我不知道每个包在哪里，也不知道它们是如何定位的。我可以通过匹配包尺寸和numpy数组来解决这个问题，但是这听起来像是对一些在优化步骤中已经知道的东西进行了大量的处理。</p><p id="dd36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">那么最简单的解决方法是什么呢？<strong class="ih hj"> <em class="je">沟通！</em>T11】</strong></p><p id="14aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">我</strong>:“嘿，Florian <em class="je">【谁负责优化】</em>，你能给我每个包的位置作为输出吗？”<br/> <strong class="ih hj"> Flo </strong>:“是”<em class="je">(可以转述也可以不转述)</em></p><p id="de4a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太好了，更新我们的GitHub自述文件，问题解决了！</p><figure class="lk ll lm ln fd lo er es paragraph-image"><div class="er es mf"><img src="../Images/1e7e807361978de47bd42edd4afcbfbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*P5L_5nGPi7GTLc8lqGFEhA.png"/></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">用Plotly绘制2个三维长方体</figcaption></figure><h1 id="1bc4" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">3.给窗户建模</h1><p id="e3c2" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">3D numpy数组的一部分是我们想要切掉汽车轮廓的一部分，将其标记为不可用。我们也希望能够在剧情中展现这一点。使用同样的方法，我们可以简单地将每个体素视为一个顶点，并在它们之间绘制一个网格。我的一部分是乐观的，认为会有一些引擎盖下的优化<em class="je">(又名</em> <em class="je">魔法)</em>发生，将使这成为一个可行的解决方案，但没有这样的运气，它是<strong class="ih hj">难以置信地慢</strong>。除此之外，当处理重叠平面中的多个形状时，我们可能会得到一些奇怪的结果。由于看不到清晰的解决方案，我把它作为一个可选择的开关，作为一个稍后的<em class="je">“待办事项】</em>。</p><p id="a1c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">最终，我想到了使用<a class="ae jd" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.convolve.html" rel="noopener ugc nofollow" target="_blank"> scipy的卷积</a>，一种最初用于2D图像边缘检测的方法，来使用相同的方法找到不可用空间的角落，从而显著提高处理速度。</p><h1 id="1c3a" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">4.汇集了第一个MVP</h1><p id="0a2c" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">在最初的几天里，每个人都取得了惊人的进步，Kasia使用Selenium构建了一个用于获取宜家包装数据的web scraper，zi-Fan找到了一个包含大约1800辆汽车后备箱尺寸的网站，并使用BeautifulSoup来抓取这些数据，Florian构建了优化程序的基础，我有一个可以工作的绘图仪。我们使用Streamlit作为一个简单的前端，并使用FastAPI将这一切结合在一起。</p><p id="e669" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有点令人惊讶的是，一旦所有的模块都插在一起，它似乎都工作了。一方面，这是美丽的，让我们都松了一口气，另一方面，“作品”可能是一种延伸。很明显，有很多东西实际上没有按照预期的方式工作(例如，项目看起来像是以一种无视重力的方式堆叠起来，整个应用程序花费了<em class="je">非常</em>长的时间)，但我们有一个很好的前进方向。</p><figure class="lk ll lm ln fd lo er es paragraph-image"><div class="er es mg"><img src="../Images/37787e9153228a76cf644edd07fe8ff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*ULt8ysiA3ZXipLsnaEG8sQ.png"/></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">使用实际的汽车尺寸和实际的宜家包装，输出稍微复杂一些</figcaption></figure><h1 id="38a4" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">5.开源代码库</h1><p id="c03a" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">正是在这里，我们放弃了将Trello作为目标和跟踪的主要工具，并将重点转移到使用GitHub问题上。这对我们来说是一种有效的工作方式。如果我们完成了当天的主要任务，我们可以简单地查看问题/功能列表中的内容，然后选择要处理的内容，而不管是谁开始了本模块。</p><p id="0342" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然而，代码审查拉请求是一件棘手的事情，由于时间有限，我们没有使用TDD(测试驱动开发)方法。所以在某种程度上，这使得检查彼此的代码变得更加重要，但是由于每个人每天都在添加功能，所以大家都相信无论什么代码都是有效的。</p><h1 id="9692" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">6.Docker &amp;谷歌云平台</h1><p id="4049" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">出于简单起见，我们最初计划只使用<a class="ae jd" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>，但是我们很快选择了安全起见(考虑到突破Heroku的免费500mb限制)，并决定使用谷歌云平台。我们的目标是在第一周结束前将<strong class="ih hj"><em class="je"/></strong>的东西部署到网上，我们在周四和周五非常努力地将整个堆栈链接在一起，将项目的大部分打包到Docker中，并将其部署到Google Cloud Run上。</p><p id="c218" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们最大的担心是，一旦放入Docker容器和/或展开，我们的IKEA webscraper ( <a class="ae jd" href="https://selenium-python.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> Selenium </a>)将无法按预期运行。我们的每台计算机(一台Mac，两台WSL，一台本机运行Linux)都遇到了问题，需要不同的解决方案才能让Selenium的chrome驱动程序正常工作。令我们<a class="ae jd" href="https://media.giphy.com/media/qgkrtsDy4MhLq/giphy.gif" rel="noopener ugc nofollow" target="_blank">惊讶的是</a>这相对来说并不痛苦！</p><p id="4d53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">能够展示一个(看起来)有效的MVP是一种解脱。在这一点上仍然有一些主要的突出问题:整个应用程序非常慢，优化器输出/绘图方向仍然不太正确。</p><h1 id="a6f6" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">7.特征蠕变</h1><p id="f088" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">当我们进入第二周的时候，很明显，我们需要暂停我们的创造力，在为演示日做准备的时候，努力修复错误，清理我们所拥有的东西。不知何故，我们仍然设法在整个星期偷偷加入了一些额外的功能，但更重要的是设法修复了比我们引入的更多的bug！由于家庭责任，我们的项目负责人(意料之中的)消失了，所以我决定确保我们的团队能够在周五交付一些值得我们骄傲的东西。</p><figure class="lk ll lm ln fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es mh"><img src="../Images/dc53a55b154d5e4b573c85805ddcc094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1slHiRPBUv8gTO7F575UBA.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx translated">演示幻灯片之一:项目如何结合在一起的简化视图</figcaption></figure><h1 id="d3bb" class="js jt hi bd ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl me kn ko kp bi translated">8.结束语</h1><p id="b627" class="pw-post-body-paragraph if ig hi ih b ii kq ik il im kr io ip iq ks is it iu kt iw ix iy ku ja jb jc hb bi translated">我很荣幸能够在Le Wagon的第606批数据科学演示日结束时展示该演示。反馈非常好(包括一位首席教师宣称，他真诚地认为这是他在数据科学训练营中看到的最好的项目)。<br/> <a class="ae jd" href="https://youtu.be/mrGO8s3Bhrk?t=4470" rel="noopener ugc nofollow" target="_blank"> <em class="je">你可以在这里</em> </a> <em class="je">观看这个演示日的录像！(开始于1:14:30) </em></p><p id="e1bd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在这个项目中面临的最大挑战之一是，我们试图做的许多事情还没有用我们在公开项目中可用的工具来完成。这意味着我们必须弄清楚如何以创造性的，也许是非传统的方式应用这些工具，以便得到我们所追求的解决方案。</p><p id="6264" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个项目另一个特别有趣的地方是，虽然目前的范围集中在宜家包装和我们拥有尺寸的约1800辆汽车上，但这当然也适用于其他使用案例，如包装运输车辆或仓库存储。</p><p id="f360" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">随着我们四个人找到自己与数据相关的职业道路，我们打算继续致力于这个项目。</p><p id="c70f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请随时在LinkedIn上联系我们:</p><ul class=""><li id="4ade" class="kv kw hi ih b ii ij im in iq kx iu ky iy kz jc la lb lc ld bi translated"><a class="ae jd" href="https://www.linkedin.com/in/dominik-mall/" rel="noopener ugc nofollow" target="_blank">张秀坤·瓦格纳</a>(我)</li><li id="ea4f" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated">弗洛里安·赖歇尔</li><li id="89a3" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated"><a class="ae jd" href="https://www.linkedin.com/in/k-cieslik/" rel="noopener ugc nofollow" target="_blank"> Katarzyna Cieslik </a></li><li id="3fa5" class="kv kw hi ih b ii le im lf iq lg iu lh iy li jc la lb lc ld bi translated"><a class="ae jd" href="https://www.linkedin.com/in/tzufan-tang/" rel="noopener ugc nofollow" target="_blank">唐子凡</a></li></ul><p id="7e74" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">浏览我们的GitHub回购:【https://github.com/freichel/willitfit T4】</p><p id="a78f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">或者试试演示版:<a class="ae jd" href="http://www.will-it-fit.xyz" rel="noopener ugc nofollow" target="_blank"> www.will-it-fit.xyz </a></p></div></div>    
</body>
</html>