<html>
<head>
<title>DialogFlow Cost Optimization for CX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CX的对话流成本优化</h1>
<blockquote>原文：<a href="https://medium.com/codex/dialogflow-cost-optimization-for-cx-db5a68fbf496?source=collection_archive---------4-----------------------#2021-11-15">https://medium.com/codex/dialogflow-cost-optimization-for-cx-db5a68fbf496?source=collection_archive---------4-----------------------#2021-11-15</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="aa5a" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">如何降低谷歌对话流CX对话代理成本的指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/a562e7ac836763c9156f1c11f8d78747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WfQuPB_B2F_lGnqcwN6OSg.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">作者图片</figcaption></figure><p id="d2f1" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">聊天机器人帮助企业改善他们的客户体验，而不必雇用额外的支持人员来分散可以通过全天候聊天机器人轻松获得的信息，而是专注于有效地利用他们的支持人员来处理需要人工关注的重要客户问题或不满。</p><p id="7703" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">更重要的是，在行业领先的人工智能和NLP驱动的解决方案<a class="ae kj" href="https://www.d3vtech.com/services/bigdata/dialogflow" rel="noopener ugc nofollow" target="_blank"> DialogFlow的帮助下，能够提供自然生活般对话体验的聊天机器人今天变得更加容易获得。</a>dialog flow的初始版本Dialogflow Essentials自2017年发布以来一直是游戏的名称。有了代理、意图、上下文、事件、参数等基础构件和一系列强大的功能，人们可以设计一个智能聊天机器人来满足他们自己的领域和业务需求。2020年9月，DialogFlow的强大版本Dialogflow CX发布，提供了一种设计和开发对话聊天机器人的新方法。</p><p id="3a78" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">在本文中，我们将讨论您在通过Dialogflow CX部署聊天机器人时可能会遇到的常见开发人员陷阱，以及您可以采用来显著降低成本的解决方案。</p><h1 id="fc12" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">什么是对话流CX？和Diagflow ES有什么不同？</h1><p id="4dc8" class="pw-post-body-paragraph jn jo hi jp b jq lc ij js jt ld im jv jw le jy jz ka lf kc kd ke lg kg kh ki hb bi translated"><a class="ae kj" href="https://www.d3vtech.com/insights/ultimate-guide-to-google-dialogflow-2021" rel="noopener ugc nofollow" target="_blank"> DialogFlow CX </a>为设计对话聊天机器人带来了一股新鲜空气。新的UI仪表板和用于设计聊天机器人代理的特性(如流程和页面)不仅使开发功能丰富和复杂的聊天机器人变得更加容易，而且使聊天机器人代理可视化为一个由点连接而成的图形。Dialogflow CX还提供现成的预建代理，以迎合流行的行业领域和用例。这些可以按原样使用，也可以根据自己独特的业务需求进行修改。Dialogflow CX是设计复杂聊天解决方案的理想选择，而DialogFlow ES更适合简单的聊天机器人用例。</p><p id="55f8" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">与Dialogflow ES 相比，DialogFlow CX要贵一些——这是意料之中的，因为你还可以获得更强大的功能。然而，开发人员，尤其是从CX迁移过来的开发人员，往往从一开始就低估了成本优化的重要性，只是在云支出显著增加之后才注意到这一点。这意味着，当从ES迁移到Dialogflow CX时，特别注意资源使用和快速反应是非常重要的。否则，不仅在聊天机器人解决方案投入生产时，而且在开发和测试聊天机器人时，您都可能不得不支付昂贵的费用。</p><h1 id="f7b4" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">我们在使用CX设计聊天机器人时遇到的开发陷阱</h1><p id="3674" class="pw-post-body-paragraph jn jo hi jp b jq lc ij js jt ld im jv jw le jy jz ka lf kc kd ke lg kg kh ki hb bi translated">在D3V，我们一直在为自己的公司构建和部署聊天机器人解决方案。最近，在对我们的网站进行更改时，做出了一个决定——我们将把我们的聊天机器人解决方案从Dialogflow ES迁移到Dialogflow CX(可以在我们位于www.d3vtech.com<a class="ae kj" href="http://www.d3vtech.com" rel="noopener ugc nofollow" target="_blank">的网站上找到，网站右下角有橙色的Dialogflow聊天机器人图标)。</a></p><p id="72cc" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">当我们用Dialogflow CX集成来构建和测试我们的聊天机器人时，我们注意到我们的<a class="ae kj" href="https://www.d3vtech.com/google-cloud" rel="noopener ugc nofollow" target="_blank">谷歌云平台</a> (GCP)成本飙升。我们在开发的早期就意识到了这一变化，这要归功于我们的DevOps工程团队通过集成将警报直接发送到我们的Slack通道，实现了程序化预算通知的自动化。</p><p id="b8c2" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">从Dialogflow ES迁移到CX时，最常见的陷阱之一是没有花时间去了解这两种服务中不同的定价和计费结构。因为Dialogflow ES比Dialogflow CX便宜，并且不会占用我们在GCP的大部分开支，所以我们没有立即注意到账单的变化。由于这个原因，我们平均每天创建100个DialogFlow CX会话，总计每天至少20美元。这可能看起来是一个相对“小”的成本增加，但随着时间的推移，它会很快复合，并成为您总云支出的一大块。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lh"><img src="../Images/54c1ef1cf83b04146a77f79d37c22409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*foSztIWFYjbiSbDJ.png"/></div></div></figure><p id="6c0e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">例如，下面是两个不太理想的设计选择的例子，当开发者没有完全理解Dialogflow CX的定价结构时，他们往往会做出这些选择:</p><ul class=""><li id="efb1" class="li lj hi jp b jq jr jt ju jw lk ka ll ke lm ki ln lo lp lq bi translated">通过为从聊天机器人应用程序向Dialogflow CX发出的每个请求发送新的会话id，异常地创建新的会话</li><li id="f336" class="li lj hi jp b jq lr jt ls jw lt ka lu ke lv ki ln lo lp lq bi translated">即使用户选择不使用网站上的聊天机器人，只要网站页面被加载，就用Dialogflow CX创建新的会话。例如，平均来说，我们的网站每天有大约100个不同的用户流量，这意味着每天创建大约100个会话，这将为Dialogflow CX每天至少花费20美元。</li></ul><h1 id="0de7" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">了解文本聊天会话的Dialogflow CX定价。</h1><p id="f7f1" class="pw-post-body-paragraph jn jo hi jp b jq lc ij js jt ld im jv jw le jy jz ka lf kc kd ke lg kg kh ki hb bi translated">我们已经提到Dialogflow ES和CX之间的价格差异经常让开发者感到惊讶。然而，这并不是说谷歌不清楚这种差异，它是清楚的。但是有一些与价格相关的细微差别，大多数开发人员只有在他们已经迁移到CX并且他们的云支出开始上升时才意识到。让我们快速浏览一下这些内容。</p><p id="4848" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">首先，</strong>每个对Dialogflow CX的请求都应该有一个会话ID，因为对话的上下文是围绕这个会话ID的。在对话流CX中，发送新会话ID的任何请求都被视为新会话。根据Dialogflow CX网站上文本对话的定价指南，100次对话的费用为20美元。</p><p id="31f3" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">其次，</strong>一个会话最多可以有40个对Dialogflow CX的请求。这意味着第41个请求，即使是相同的会话ID(为前40个请求发送的)，也将被计为Dialogflow的另一个会话。</p><p id="b917" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj">第三，</strong>从最后一次请求开始，会话保持活动状态长达30分钟。例如，对于给定的会话ID，如果最初仅向Dialogflow发出了3个请求，并且在最初3个请求45分钟后发出了第4个请求，则第4个请求将计入新会话。</p><p id="053c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><strong class="jp hj"> <em class="lw">注:</em> </strong> <em class="lw">请查看</em> <a class="ae kj" href="https://cloud.google.com/dialogflow/pricing#cx-agent" rel="noopener ugc nofollow" target="_blank"> <em class="lw">定价指南</em> </a> <em class="lw">了解有关限额、文本和语音聊天会话的最新信息CX定价</em></p><h1 id="bd08" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">优化对话流CX的最佳实践</h1><p id="4aee" class="pw-post-body-paragraph jn jo hi jp b jq lc ij js jt ld im jv jw le jy jz ka lf kc kd ke lg kg kh ki hb bi translated">当从Dialogflow ES迁移到CX时，开发人员可能会发现很难根据CX的价格结构调整他们的工作流程。也就是说，这是可以做到的。我们收集了一些最有效的最佳实践，开发人员可以采用这些实践在Dialogflow中构建强大的聊天机器人代理，而不会倾家荡产:</p><ol class=""><li id="568b" class="li lj hi jp b jq jr jt ju jw lk ka ll ke lm ki lx lo lp lq bi translated">只有当用户打算通过点击聊天机器人图标来使用聊天机器人时，才允许聊天机器人创建与Dialogflow CX的会话。</li><li id="6770" class="li lj hi jp b jq lr jt ls jw lt ka lu ke lv ki lx lo lp lq bi translated">将用户与会话ID相关联。根据您的偏好，您可以选择将会话ID保存在浏览器的本地存储或会话存储中。并对该用户向Dialogflow CX发出的每个请求使用相同的会话ID。将会话ID与用户相关联还将为您提供从用户聊天数据中获取分析信息的弹药，例如，您可以确定用户中最流行的对话话题是什么。</li><li id="1466" class="li lj hi jp b jq lr jt ls jw lt ka lu ke lv ki lx lo lp lq bi translated">关联每个聊天机器人用户的会话ID还允许我们收集关于聊天机器人的指标。例如，在D3V，我们开发了一个管道，将信息传输到BigQuery，并在Data Studio上创建了一个分析仪表板，以获得关于我们聊天机器人使用情况的宝贵见解。</li><li id="cdaf" class="li lj hi jp b jq lr jt ls jw lt ka lu ke lv ki lx lo lp lq bi translated">向聊天机器人添加新功能，例如与谷歌日历或Slack通知等的集成，总是需要频繁的测试，从测试更新和重新测试这些更新。在这种情况下，最好用环境变量来控制开发或测试环境的sessionID。这样可以确保为开发环境维护单个会话ID，并最大限度地利用对话流CX的会话约束来获得最大值。</li><li id="56be" class="li lj hi jp b jq lr jt ls jw lt ka lu ke lv ki lx lo lp lq bi translated">最后，设置有关正在使用的GCP服务的成本的警报将有助于您尽早发现支出中的异常和峰值，您可以做出决策来减少过度供应的资源，并在支出失控之前采取措施来优化GCP服务的利用率。</li></ol><p id="557c" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">一般来说，通知提醒有助于密切关注GCP服务的使用成本，尤其是当您使用新服务并担心成本过高时。它已经成为我们组织中的一个重要工具，在这里我们每天都可以加快和减慢各种GCP服务。</p><p id="be97" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">为了正确看待这些最佳实践的重要性，在D3V，我们设法将Dialogflow CX的开支减少了大约90%。</p><h1 id="2ffc" class="kk kl hi bd km kn ko kp kq kr ks kt ku io kv ip kw ir kx is ky iu kz iv la lb bi translated">正在总结…</h1><p id="7ca1" class="pw-post-body-paragraph jn jo hi jp b jq lc ij js jt ld im jv jw le jy jz ka lf kc kd ke lg kg kh ki hb bi translated">对话流CX提供了强大的功能和控制聊天代理在一个可接受的价格增加。但与此同时，在开发早期缺乏对定价结构和成本的关注会导致很难发现开发陷阱。虽然开发人员可以对ES更加宽容，不会看到他们的云支出有任何重大变化，但他们不能对CX做同样的事情，因为它可能不那么宽容。</p><p id="509e" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">幸运的是，在开发Dialogflow聊天机器人的过程中，这些缺陷可以在早期得到解决。在本文中，我们探讨了Dialogflow CX文本会话的定价和最佳实践，可以采用这些最佳实践来尽早发现这些缺陷，并确保在不牺牲任何功能的情况下为您的Dialogflow CX提供成本更优化的生产设置。</p><p id="0707" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated">所有这些都可以通过聘请内部专家、承包商、顾问或通过不同方法培训你的团队来实现，比如这类技术文章或<a class="ae kj" href="https://www.d3vtech.com/workshops/smb-on-gcp" rel="noopener ugc nofollow" target="_blank">免费GCP研讨会。</a></p></div><div class="ab cl ly lz gp ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="hb hc hd he hf"><p id="510d" class="pw-post-body-paragraph jn jo hi jp b jq jr ij js jt ju im jv jw jx jy jz ka kb kc kd ke kf kg kh ki hb bi translated"><em class="lw">最初发表于</em><a class="ae kj" href="https://www.d3vtech.com/insights/dialogflow-cost-optimization-for-cx" rel="noopener ugc nofollow" target="_blank">T5【https://www.d3vtech.com】</a><em class="lw">。</em></p></div></div>    
</body>
</html>