<html>
<head>
<title>Three best practices when moving from ARM templates to Bicep files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从ARM模板迁移到Bicep文件的三个最佳实践</h1>
<blockquote>原文：<a href="https://medium.com/codex/three-best-practices-when-moving-from-arm-templates-to-bicep-files-4b58f3f99826?source=collection_archive---------9-----------------------#2021-10-14">https://medium.com/codex/three-best-practices-when-moving-from-arm-templates-to-bicep-files-4b58f3f99826?source=collection_archive---------9-----------------------#2021-10-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="89aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从ARM模板迁移到Bicep文件的技巧和经验。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/721560c51ffca0e088d0e7c16dd1b909.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I2gXU_2FT-TWS8P2ChUA6A.png"/></div></div></figure></div><div class="ab cl jp jq gp jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="hb hc hd he hf"><p id="70e6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在之前的文章中，我们一直致力于使用Bicep部署解决方案，Bicep是用于声明式部署Azure资源的领域特定语言(DSL)。</p><p id="e5a4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文将回顾从ARM模板转换到Bicep文件时可以采用的三个最佳实践。</p><h1 id="83a7" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">1.检查ARM模板语法和本机二头肌等效</h1><p id="407f" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">虽然ARM模板和Bicep中有一些熟悉的语法，但我强烈建议您在需要获取资源的资源id或声明属性值时检查语法。</p><p id="f79b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里列举了一些例子:<a class="ae kz" href="https://github.com/Azure/bicep/blob/main/docs/arm2bicep.md" rel="noopener ugc nofollow" target="_blank">https://github.com/Azure/bicep/blob/main/docs/arm2bicep.md</a></p><h1 id="3911" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">2.验证API版本和属性值。</h1><p id="b6b4" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">这里有一个例子，在以前的文章中，我们回顾了如何部署Azure机器学习工作区和数据存储。</p><p id="bf66" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在那个Bicep文件中，虽然建议使用API的最新稳定版本，但是在ARM模板中定义的一些属性在Bicep属性值中是不可用的，至少现在还不可用。</p><p id="1e19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于这些情况，我建议您验证资源中需要的属性，以及缺少的属性如何影响您在Azure中的环境。</p><p id="0b19" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">好消息是，在大多数情况下，Azure for Bicep和ARM模板的文档显示了支持的版本和模板格式:</p><div class="la lb ez fb lc ld"><a href="https://docs.microsoft.com/en-us/azure/templates/microsoft.machinelearningservices/workspaces?WT.mc_id=AZ-MVP-5000671&amp;tabs=bicep" rel="noopener  ugc nofollow" target="_blank"><div class="le ab dw"><div class="lf ab lg cl cj lh"><h2 class="bd hj fi z dy li ea eb lj ed ef hh bi translated">微软。机器学习服务/工作空间-二头肌和手臂模板参考</h2><div class="lk l"><h3 class="bd b fi z dy li ea eb lj ed ef dx translated">工作区资源类型可以部署到:资源组。要了解资源组部署，请参阅Bicep…</h3></div><div class="ll l"><p class="bd b fp z dy li ea eb lj ed ef dx translated">docs.microsoft.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr jn ld"/></div></div></a></div><h1 id="a0ed" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">3.了解Azure资源是如何大规模部署的</h1><p id="d4db" class="pw-post-body-paragraph if ig hi ih b ii ku ik il im kv io ip iq kw is it iu kx iw ix iy ky ja jb jc hb bi translated">与ARM模板类似，您可以根据环境将部署定位到不同的范围。</p><p id="ae61" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">清楚了解具有多个管理级别的分层资源结构对于更好地管理您的部署至关重要。这些包括租户、管理组、订阅和资源组。</p><p id="3141" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">想象一个场景，其中有一个Azure租户，有两个管理组，每个管理组下有两个订阅。您需要根据环境类型部署一组不同的资源，如生产或测试虚拟网络、DNS、应用服务、虚拟机等。</p><p id="0728" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您完全理解层次结构的各个级别时，您可以使用Bicep灵活地控制Azure环境的管理方式。</p><p id="34c8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，当您需要创建多个资源组并授予对订阅中所有资源的访问权限时，应该将订阅作为目标。</p><p id="d157" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当需要提供对特定订阅中所有资源的访问时，可以将管理组作为目标。</p><p id="1ead" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在需要创建多个订阅的情况下，您可以将租户作为目标。</p><p id="2f1b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，考虑模块化，例如，定义虚拟网络的Bicep文件可以作为一个模块使用，并跨多个订阅进行部署。</p><p id="b2b3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">一组Bicep文件可以用于在单个操作中跨多个作用域部署资源。</p><p id="e5ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><a class="ae kz" href="http://eepurl.com/gKmLdf" rel="noopener ugc nofollow" target="_blank"> <em class="ls">在此加入</em><strong class="ih hj"><em class="ls">azin sider</em></strong><em class="ls">邮箱列表。</em>T9】</a></p><p id="7876" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="ls">-戴夫·r·</em></p></div></div>    
</body>
</html>