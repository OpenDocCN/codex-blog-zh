<html>
<head>
<title>Developing a Money-Making Telegram Bot on Python — Pt 2.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Python上开发赚钱的电报机器人— Pt 2。</h1>
<blockquote>原文：<a href="https://medium.com/codex/developing-a-money-making-telegram-bot-on-python-pt-2-d3e7d5e89844?source=collection_archive---------2-----------------------#2022-05-09">https://medium.com/codex/developing-a-money-making-telegram-bot-on-python-pt-2-d3e7d5e89844?source=collection_archive---------2-----------------------#2022-05-09</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="d24d" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">文字表情机器人</h2></div><p id="845c" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我真的很喜欢人们在他们的bios中使用表情符号。它不仅给人一种前卫/复古的感觉，而且在每次对话中看起来都很时髦。表情符号是由文字符号组成的表情符号，这里有几个:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es jt"><img src="../Images/1101b7cd6abc32ed19d9ea264aeb03f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/0*iVVkzQ7OOmokMJ9V.jpg"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">一些非常酷的表情让你享受xD</figcaption></figure><h2 id="00b9" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">想法是:</h2><ol class=""><li id="8620" class="la lb hi iz b ja lc jd ld jg le jk lf jo lg js lh li lj lk bi translated">用户可以输入他们想要的情绪——高兴、生气、悲伤等等。</li><li id="adb3" class="la lb hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">机器人会输出一个代表这种情绪的表情符号，然后可以更好地复制到任何地方。</li><li id="f915" class="la lb hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">有一个“随机”功能，输出一个随机的表情符号</li><li id="19b5" class="la lb hi iz b ja ll jd lm jg ln jk lo jo lp js lh li lj lk bi translated">扩展思路:机器人会询问用户的情绪，并输出一个最匹配的表情符号。</li></ol><p id="ee56" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">好了，让我们开始吧！</p><h2 id="358f" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">我们将如何实现它？</h2><p id="0e47" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">为了让我们的生活变得简单，我们将从三种基本情绪开始:快乐、愤怒和wtf。接下来，我们将创建一个代表这些情绪的表情数据库。然后，每当用户将他们的情绪作为命令输入时，机器人将从数据库的适当列中检索随机值。这将显示出来，并准备好供用户复制和使用！</p><h2 id="cbb5" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">首先要做的事</h2><p id="9cec" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">当使用电报机器人时，一个非常重要的信息是API令牌。你需要保持它的安全，防止任何人篡改它。几乎在任何代码编辑器中都有一个超级简单的方法可以做到这一点——将它存储在一个只有您可以访问的JSON文件中！</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">您可以按照本系列第1部分中的讨论来检索API令牌</figcaption></figure><p id="f694" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从文件中检索API令牌:</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">您可以打开该文件并从中检索API令牌</figcaption></figure><p id="7914" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">太好了！现在我们已经有了安全的细节，让我们开始吧！</p><h2 id="d64b" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated"><strong class="ak">创建数据库</strong></h2><p id="c323" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">我想先做一个文字表情的数据库(或者找一个如果有的话)。经过一番搜索，我找不到我要找的东西，所以是时候创建我们自己的数据集了！</p><p id="031f" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我们将使用Python的内置SQL编辑器来完成这项工作。有许多不同的方法，但是在这个阶段遇到了许多关于游标的错误(基本上是允许您导航SQL数据库的内容)之后，我决定使用旧的、可信的内置版本。</p><ul class=""><li id="bec4" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">连接到<strong class="iz hj">‘表情’</strong>数据库:</li></ul><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div></figure><ul class=""><li id="e71d" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">在数据集中创建<strong class="iz hj"> main_table </strong>:</li></ul><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div></figure><ul class=""><li id="ae52" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">现在，我们将适当的值插入表中。这些是表情符号和与之相关的情感。</li></ul><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div></figure><ul class=""><li id="1746" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">现在，如果我们选择表中的所有值，我们将得到以下输出:</li></ul><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es lz"><img src="../Images/6170bd5f33409f10ab6d3ac2fabf9e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kUvcVkujmBsKG_H1YRVoyw.png"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">我们得到的三种情绪的结果表</figcaption></figure><ul class=""><li id="26f1" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">是时候创建我们bot的主要功能了。机器人会收到用户的命令，说明他们想要什么样的情感。然后，机器人将从表格中输出带有相应情绪的表情符号。让我们来看看实际情况:</li></ul><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">这里需要注意的一点是<strong class="ak"> print(angry[0]) </strong>语句。这是因为<strong class="ak">。fetchall() </strong>语句返回一个列表值，需要从中检索第一个元素</figcaption></figure><h2 id="4792" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">主程序代码</h2><p id="ab60" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">耶！我们现在有了程序代码的完整版本。其逻辑是:上面定义了从SQL表中检索适当值的命令。每当用户向机器人发送命令时，机器人就会从与该值相关联的表中输出表情符号。</p><figure class="ju jv jw jx fd jy"><div class="bz dy l di"><div class="lt lu l"/></div></figure><p id="44b5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下面是它实际运行的样子:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es me"><img src="../Images/fe5a6be6cd26322b6149caabe42b6fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AMMvzPitX-UiReLyLudwVg.gif"/></div></div><figcaption class="kb kc et er es kd ke bd b be z dx translated">表情机器人MVP尽力了…</figcaption></figure><h2 id="adf9" class="kf kg hi bd kh ki kj kk kl km kn ko kp jg kq kr ks jk kt ku kv jo kw kx ky kz bi translated">接下来的步骤</h2><p id="b9ff" class="pw-post-body-paragraph ix iy hi iz b ja lc ij jc jd ld im jf jg lq ji jj jk lr jm jn jo ls jq jr js hb bi translated">现在我们已经有了项目的主要部分，是时候计划接下来的步骤了:</p><p id="6009" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">美学改进:</strong></p><ul class=""><li id="d848" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">添加“问候”消息，解释机器人的功能和目的，以及它是如何工作的</li><li id="f8b4" class="la lb hi iz b ja ll jd lm jg ln jk lo jo lp js ly li lj lk bi translated">制作命令</li></ul><p id="8d74" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="iz hj">技术改进:</strong></p><ul class=""><li id="7b5d" class="la lb hi iz b ja jb jd je jg lv jk lw jo lx js ly li lj lk bi translated">建立一个更大的数据库和更广的情感范围。我要么尝试找到一个基于文本的表情数据库，要么尝试自己创建一个。也许通过网络抓取或从各种网站提取表情符号。</li></ul><blockquote class="mf mg mh"><p id="9d7e" class="ix iy mi iz b ja jb ij jc jd je im jf mj jh ji jj mk jl jm jn ml jp jq jr js hb bi translated">伙计们，现在就这样吧！请继续关注第3部分，在那里我将实现上述更改并在Telegram上发布我的第一个机器人。祝您愉快！</p></blockquote></div></div>    
</body>
</html>