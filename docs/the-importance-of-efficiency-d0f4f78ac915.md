# 效率的重要性

> 原文：<https://medium.com/codex/the-importance-of-efficiency-d0f4f78ac915?source=collection_archive---------13----------------------->

## 我对 2021 年生物信息学竞赛问题 2 的体验

![](img/1970025c43f84a112750bbb703d8f8cd.png)

拉格斯技术人员在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

我真的很喜欢在 Stepik 平台上主持的 [2021 生物信息学竞赛](https://bioinf.me/en/contest)资格赛的第二道题。它不仅帮助我了解了生物信息学的实际应用，还强化了高效代码的重要性。尽管对我的解决方案的运行时间没有正式的时间限制，但我最终还是优化了我的代码，因为在一些没有这样做的测试案例中，数据输入是如此之大，以至于我的代码可能需要几天甚至几周才能运行。我亲身体验了在有真实时间限制的真实应用程序中效率的重要性，而不是大多数竞争性编程竞赛看似任意的时间限制。

我最初为这个问题编写了一个强力解决方案，它由三个嵌套的 for 循环组成。对于前两个测试用例来说，这已经足够好了:对于第一个测试用例，对于在不到一秒钟内运行的最多 1000 个操作，每个循环的迭代不超过 10 次；对于第二个测试用例，对于最多 500 或 1.25 亿个操作，每个循环的迭代不超过 500 次，运行我的 Python 代码需要大约两分钟。然而，第三个测试案例是另一个故事。对于那个循环，外部循环进行了 100，000 次迭代，而其他两个循环都进行了 1000 次迭代。如果我让程序运行完，那么在最坏的情况下，总共 10 次运算，总运算次数应该是 10⁵ × 10 × 10。如果 10⁸运算需要两分钟，那么 10 次运算将需要 2000 分钟，也就是大约 33 个小时。除此之外，还有另外两个测试案例，我计算过每个案例都可以用我的强力解决方案进行 10 次操作。这两项比赛都需要两周的时间，而当我开始的时候，为期七天的比赛只剩下六天了。

等了五分钟后，看到程序还没有运行完，我决定做一些研究，看看是否能找到一个更有效的解决方案。在我处理的问题中，我们得到了一个由正浮点数组成的信号测量列表。我们还获得了代谢物(生化化合物)的质量列表和代谢物可以获得或失去以电离的带电片段(加合物)列表。代谢物质量列表由正浮点数(十进制)组成，而加合物列表是浮点数，可以是正数、负数或零。任务是为每个信号找到其总和最接近该信号测量值的代谢物和加合物对。在我研究时发现的一个类似的问题中，我们得到一个排序数组和一个目标数，目标是在数组中找到两个和最接近目标数的数。有效的解决方案包括使用两个指针，一个在数组的开头，另一个在末尾，并根据所指向的两个数的和是太大还是太小来调整一个指针或另一个指针的位置。

我意识到，我可以通过对我的强力解决方案的内部循环中使用的列表进行排序，然后在一个列表的开头和另一个列表的结尾使用指针，并以与我找到的解决方案相同的方式调整指针，来使这个解决方案适应我的原始问题。这样，我可以只使用两个嵌套循环，而不是使用三个嵌套循环，一个循环遍历每个信号，另一个循环查找代谢物和加合物的组合，其总和最接近信号的测量值。这将使第三个测试案例所涉及的操作数量减少到 10⁵ × 2 × 10，也就是 2 × 10⁸，或者在最坏的情况下是 2 亿次操作。

到那个时候，半个小时过去了，我的蛮力代码还在运行。我停止了它，并编写了更有效的解决方案。现在，我的代码运行第三个测试用例只花了不到四分钟的时间。这比蛮力方法需要的 33 个小时有了巨大的进步！我计算出测试用例#5 将是剩下的两个测试用例中运行速度较快的一个，所以我接下来运行了那个。对于那一个，有多达 10⁴信号、10⁴代谢物和 10⁴加合物，因此更新的代码所需的操作数是 10⁴ × 2 × 10⁴，或者在最坏的情况下是 2 亿，与测试情况#3 相同。的确，那一次也用了不到四分钟。对于测试案例#4，有 1000 个信号、100 万个代谢物和 1000 个加合物；更新后的代码在最坏的情况下进行了 10 × 10⁶或 10 亿次运算。这个花了大约二十分钟来运行。我花时间寻找更有效的解决方案绝对是值得的，否则我的程序不可能在比赛期间完成最后两个测试用例的运行。

我真的很高兴我发现了这个比赛。我了解了一个我现在感兴趣的全新领域，并且进一步发展了我的知识，知道如何使我的代码更有效。

*原载于*[*https://valogonor . github . io*](https://valogonor.github.io/2021-06-27-the-importance-of-efficiency/)*。*