# iOS ä¸­çš„æœ¬åœ°åŒ–å·¥ä½œæµç¨‹

> åŸæ–‡ï¼š<https://medium.com/codex/localization-workflow-in-ios-9f96b7f4388c?source=collection_archive---------3----------------------->

## ä½¿ç”¨ SwiftGen å’Œ[çŸ­è¯­]

![](img/a5abc6b0040d31a42b4f018f73f9e9ed.png)

ç…§ç‰‡ç”±[æ°å¥ç³Â·å¸ƒå…°å¾·éŸ¦æ©](https://unsplash.com/@lajaxx?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/languages?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) æ‹æ‘„

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºæˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªç”¨äº iOS åº”ç”¨ç¨‹åºçš„æœ¬åœ°åŒ–æµç¨‹ã€‚æ‚¨å¯èƒ½å·²ç»çŸ¥é“ï¼Œæœ¬åœ°åŒ–æ˜¯å‡ ä¹æ¯ä¸ª iOS åº”ç”¨ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒé€šå¸¸è¢«æ¨è¿Ÿåˆ°åæœŸé˜¶æ®µï¼Œæœ‰æ—¶ä¸ºæ—¶å·²æ™šï¼Œå› æ­¤éå¸¸æ˜‚è´µä¸”éš¾ä»¥é‡æ„ã€‚æœ‰äº†æˆ‘å°†è¦è¯¦è¿°çš„è¿™ä¸ªæµç¨‹(ä»¥åŠäº’è”ç½‘ä¸Šçš„è®¸å¤šå…¶ä»–æµç¨‹)ï¼Œå°±æœ‰å¯èƒ½å¾ˆå®¹æ˜“åœ°éš”ç¦»åœ¨æœ¬åœ°åŒ–æ–¹é¢å‘ç”Ÿçš„äº‹æƒ…(æ‹‰å­—ç¬¦ä¸²ã€ç”Ÿæˆå¸¸é‡æ–‡ä»¶ç­‰ç­‰)ï¼Œå¹¶ä¸”è¿˜ä½¿ç»´æŠ¤æ›´é¡ºåˆ©ï¼Œæ›´å®¹æ˜“å‡ºé”™ã€‚äº‹ä¸å®œè¿Ÿï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚

## è®¾ç½®é¡¹ç›®

[ *å¦‚æœæ‚¨å·²ç»çŸ¥é“å¦‚ä½•æœ¬åœ°åŒ– iOS é¡¹ç›®*ï¼Œè¯·è·³åˆ°ä¸‹ä¸€æ­¥]

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Xcode é¡¹ç›®ï¼Œå¹¶å¯ç”¨ baseï¼Œä¸ºæ­¤ï¼Œæ‰“å¼€ã€‚xcodeproj æ–‡ä»¶ï¼Œé€‰æ‹©é¡¹ç›®å¹¶åœ¨é€‰é¡¹å¡ Info ä¸‹é€‰æ‹© Use Base Internationalizationã€‚

![](img/1582c3d4f0720384bef33319b794ee18.png)

åœ¨ Xcode é¡¹ç›®ä¸­å¯ç”¨åŸºæœ¬å›½é™…åŒ–ã€‚

æˆ‘ä»¬ç°åœ¨å¯ä»¥æ·»åŠ æˆ‘ä»¬æƒ³è¦æœ¬åœ°åŒ–åº”ç”¨ç¨‹åºçš„è¯­è¨€ã€‚åœ¨åŒä¸€ä¸ªé¡¹ç›®è®¾ç½®ä¸­ï¼Œè½¬åˆ°æœ¬åœ°åŒ–ï¼Œå•å‡»åŠ å·æŒ‰é’®å¹¶ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©è¯­è¨€ã€‚

![](img/0bd5e3ae1b25c2634a8404808abc52d3.png)

å‘é¡¹ç›®æœ¬åœ°åŒ–è®¾ç½®ä¸­æ·»åŠ è¯­è¨€ã€‚

ä¸ºäº†å®Œæˆé¡¹ç›®çš„åŸºæœ¬è®¾ç½®ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²æ–‡ä»¶ï¼Œå¯¹äºæœ¬æ–‡ï¼Œæˆ‘å°†å®ƒå‘½åä¸º`Localizable.strings`ï¼Œå®ƒå°†ä½äº`Resources > Localization > Localizable.strings`

![](img/2c15f50229b5ed3eb5d50371d0973ffc.png)

Localizable.strings æ–‡ä»¶ä½ç½®ã€‚

è¦å°†æˆ‘ä»¬çš„ Localizable.strings æ–‡ä»¶å®é™…æœ¬åœ°åŒ–ä¸ºä¹‹å‰æ·»åŠ çš„æ‰€æœ‰è¯­è¨€ï¼Œè¯·å•å‡»`file > Localizeâ€¦`,å½“æç¤ºå‡ºç°æ—¶ï¼Œé€‰æ‹©æ‰€éœ€çš„è¯­è¨€ã€‚

![](img/14a7fd222cafc135207c280cf6cb814d.png)

æœ¬åœ°åŒ– Localizable.strings æ–‡ä»¶ã€‚

ç°åœ¨ï¼Œä¸ºäº†æœ¬æ•™ç¨‹ï¼Œè®©æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ä¸€äº›å­—ç¬¦ä¸²åˆ°æˆ‘ä»¬çš„ Localizable.strings æ–‡ä»¶ï¼Œåœ¨æœ¬æ–‡çš„åé¢ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨`Phrase`å’Œä¸€ä¸ªæ¼‚äº®çš„è„šæœ¬æ¥æ”¹è¿›å®ƒã€‚

![](img/aa5d85bf5a1944df31075d72341e20ba.png)

æ·»åŠ å¸¦å ä½ç¬¦å’Œä¸å¸¦å ä½ç¬¦çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²ã€‚

## èšåˆç›®æ ‡+è„šæœ¬é˜¶æ®µ

ä¸€æ—¦å¯ç”¨äº†è¯­è¨€å¹¶å°†å¯æœ¬åœ°åŒ–çš„æ–‡ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç§°ä¸ºèšåˆç›®æ ‡çš„ä¸œè¥¿ï¼Œå®ƒå°†å…è®¸æˆ‘ä»¬æ·»åŠ æ„å»ºé˜¶æ®µè„šæœ¬(å’Œè®¸å¤šå…¶ä»–ä¸œè¥¿),ä½¿å…¶ä¸ä¸»ç›®æ ‡åˆ†å¼€ï¼Œä¸»ç›®æ ‡é€šå¸¸ä¼šå¢é•¿å¾—éå¸¸å¿«ã€‚

*   è½¬åˆ°é¡¹ç›®æ–‡ä»¶ã€‚
*   å•å‡»åŠ å·æŒ‰é’®æ·»åŠ æ–°ç›®æ ‡ã€‚
*   åœ¨â€œå…¶ä»–â€é€‰é¡¹å¡ä¸‹ï¼Œé€‰æ‹©â€œèšåˆâ€ã€‚
*   å‘½åç›®æ ‡æœ¬åœ°åŒ–ã€‚

![](img/9b0b179867105c6209291b297d037d9c.png)

ä»é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ æ–°ç›®æ ‡ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‘ä¹‹å‰åˆ›å»ºçš„èšåˆç›®æ ‡æ·»åŠ ä¸€ä¸ªè¿è¡Œè„šæœ¬ã€‚

*   è½¬åˆ°é¡¹ç›®è®¾ç½®ã€‚
*   é€‰æ‹©æœ¬åœ°åŒ–èšé›†ç›®æ ‡ã€‚
*   é€‰æ‹©â€œæ„å»ºé˜¶æ®µâ€é€‰é¡¹å¡ã€‚
*   æ·»åŠ æ–°çš„è¿è¡Œè„šæœ¬é˜¶æ®µã€‚
*   æ·»åŠ ä»¥ä¸‹ bash ä»£ç ã€‚

æ ¹æ®`SwiftGen`æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å‘é¡¹ç›®æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶(swiftgen-localization.yml ),æˆ‘ä»¬å°†åœ¨å…¶ä¸­æŒ‡å®š Localizable.strings æ–‡ä»¶çš„è·¯å¾„ï¼Œä»¥åŠç”Ÿæˆçš„å¸¸é‡æ–‡ä»¶`L10n.swift`çš„è·¯å¾„

```
strings:
  inputs: ../Localization/en.lproj/Localizable.strings
  outputs:
    - templateName: structured-swift5
      output: ../Localization/L10n.swift
```

## æ˜¯æ—¶å€™å»ºç«‹ç›®æ ‡äº†

ç¼–è¯‘èšåˆç›®æ ‡æ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯å¯èƒ½æ˜¯æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®(è¿™ç§æƒ…å†µæˆ‘ç»å¸¸é‡åˆ°)æˆ–è€… SwiftGen æ²¡æœ‰æ­£ç¡®å®‰è£…åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šâ€”â€”å‡è®¾èšåˆç›®æ ‡å·²ç»æ­£ç¡®ç¼–è¯‘ï¼Œè®©æˆ‘ä»¬é€‰æ‹©ä¸»ç›®æ ‡å¹¶ç¼–è¯‘å®ƒã€‚å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å¯¹å®ƒåšä»»ä½•äº‹æƒ…ï¼Œå®ƒä¸åº”è¯¥æ˜¾ç¤ºä»»ä½•é”™è¯¯ã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å°† L10n.swift æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œè¿™æ · SwiftGen ç”Ÿæˆçš„å¸¸é‡æ–‡ä»¶å¯¹æˆ‘ä»¬çš„æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯å¯è§çš„ã€‚

è¿™æ˜¯ä¸€ä¸ªå¦‚ä½•ä½¿ç”¨`L10n`å¸¸é‡æ–‡ä»¶çš„å¿«é€Ÿç¤ºä¾‹ï¼Œå®ƒæ ¹æœ¬ä¸æ˜¯ç«ç®­ç§‘å­¦ï¼Œå­—ç¬¦ä¸²è¢«è½¬æ¢æˆé™æ€å˜é‡ï¼Œè›‡çš„å¤§å°å†™è¢«è½¬æ¢æˆéª†é©¼çš„å¤§å°å†™ï¼Œå­—ç¬¦ä¸²å ä½ç¬¦å¦‚`%s, %d`ç­‰ã€‚è¢«æ–¹ä¾¿åœ°è½¬æ¢æˆå‡½æ•°ä¸­çš„å‚æ•°ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºã€‚

ä½¿ç”¨æˆ‘ä»¬åˆ›å»ºçš„ L10n.swift å¸¸é‡æ–‡ä»¶çš„è§†å›¾æ¨¡å‹ã€‚

## ç”¨çŸ­è¯­ç®¡ç†å­—ç¬¦ä¸²

ä¸ºäº†å®Œæˆæœ¬åœ°åŒ–æµç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å®é™…çš„å­—ç¬¦ä¸²å¡«å…… Localizable.strings æ–‡ä»¶ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä½¿ç”¨çŸ­è¯­[2],å› ä¸ºå®ƒæ˜¯æˆ‘ä½œä¸º iOS å¼€å‘äººå‘˜ä½¿ç”¨æœ€å¤šçš„ä¸€ä¸ªï¼Œä½†æ˜¯å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«ä»»ä½•å…¶ä»–å·¥å…·æ‰€æ›¿ä»£ï¼Œè¿™äº›å·¥å…·æä¾› CLI(å‘½ä»¤è¡Œç•Œé¢)ã€curl è¯·æ±‚æˆ–è€…åªæ˜¯ç¼–å†™ä¸€ä¸ªè„šæœ¬æ¥å°†`.csv`è½¬æ¢ä¸º`.strings`æ–‡ä»¶ã€‚ç„¶è€Œï¼Œæ ¹æ®æˆ‘åœ¨è¿™ä¸ªé¢†åŸŸçš„ç»éªŒï¼Œå¯¹äºä¸ç¿»è¯‘è€…å’Œè®¾è®¡è€…å·¥å…·çš„åä½œï¼ŒçŸ­è¯­æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº›æ˜¯æˆ‘åœ¨ iOS é¡¹ç›®ä¸­å®ç° phrase çš„å¸¸è§„æ­¥éª¤ã€‚

*   åˆ›å»ºä¸€ä¸ªçŸ­è¯­å¸æˆ·å¹¶åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚
*   å‘é¡¹ç›®ä¸­æ·»åŠ åŒºåŸŸè®¾ç½®å’Œå­—ç¬¦ä¸²ã€‚
*   åˆ›å»ºä¸€ä¸ª API ä»¤ç‰Œä»å®¢æˆ·ç«¯è·å–çŸ­è¯­ã€‚
*   åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£…çŸ­è¯­ CLIã€‚
*   ç¡®ä¿æ‚¨ä»ç½‘ç«™ä¸Šå¤åˆ¶äº†`locale_idâ€™s, project_id, and API token`å¹¶å°†å…¶ç²˜è´´åˆ°é…ç½®`.yml`æ–‡ä»¶ä¸­ã€‚(æ›´å¤šè¯¦æƒ…è§[çŸ­è¯­æ–‡æ¡£](https://help.phrase.com/help/configuration))ã€‚
*   **ã€é‡è¦ã€‘**å‘èšåˆç›®æ ‡æ·»åŠ ä¸€ä¸ªæ–°çš„è¿è¡Œè„šæœ¬é˜¶æ®µï¼Œå°±åœ¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„é˜¶æ®µä¹‹å‰ï¼Œå¹¶æ·»åŠ è¡ŒçŸ­è¯­ pullã€‚

å†è¯´ä¸€æ¬¡ï¼ŒPhrase åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒä¸ºæˆ‘ä½œä¸ºå¼€å‘äººå‘˜æä¾›äº†è‰¯å¥½çš„ä½“éªŒï¼Œä½†å¯¹ä½ æ¥è¯´ä¸ä¸€å®šæ˜¯ä¸€æ ·çš„ã€‚å¦‚æœä½ çš„é¡¹ç›®æ¯”è¾ƒå°ï¼Œä½ åªæƒ³ä½¿ç”¨ç”µå­è¡¨æ ¼ï¼Œä½ å¯ä»¥ä¸‹è½½`.csv`æ–‡ä»¶å¹¶ä½¿ç”¨`csv2strings`è½¬æ¢å·¥å…·ï¼Œæˆ–è€…ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨å¼€æºç¿»è¯‘å·¥å…·ï¼Œè¿™åº”è¯¥ä¸ä¼šæœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚

> å®ƒæ€»æ˜¯æ ¹æ®æ‚¨æƒ³è¦ä½¿ç”¨çš„å·¥å…·å’Œæ‚¨æƒ³è¦å®ç°å®ƒçš„æ–¹å¼è€Œå˜åŒ–ï¼Œä½†æ˜¯ä¸è¦è®©å®ƒæ”¯é…æ‚¨çš„é¡¹ç›®çš„è¡Œä¸ºã€‚

## è¿›ä¸€æ­¥é˜…è¯»

*   [1] [SwiftGen](https://github.com/SwiftGen/SwiftGen)
*   ã€2ã€‘[çŸ­è¯­](https://phrase.com)
*   [iOS åŸºç¡€æœ¬åœ°åŒ–](/lean-localization/ios-localization-tutorial-938231f9f881?source=collection_home---6------0-----------------------)
*   [æœ¬åœ°åŒ–ä¸å›½é™…åŒ–](https://www.w3.org/International/questions/qa-i18n)
*   [G11Nã€I18Nã€T9N å’Œ L10N çš„åŒºåˆ«](https://www.linkedin.com/pulse/difference-between-g11n-i18n-t9n-l10n-satish-singh/)

*æ„Ÿè°¢é˜…è¯»ã€‚æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªå°æ•™ç¨‹ï¼Œå¦‚æœå®ƒå¯¹ä½ æœ‰ç”¨ï¼Œä¸è¦å®³ç¾ğŸ‘å…³äºè¿™ç¯‡æ–‡ç« ã€‚ä¸‹æ¬¡è§ã€‚*