# Java 面向对象的 6 个注意事项

> 原文：<https://medium.com/codex/6-dos-and-donts-of-oop-in-java-f9230918bd53?source=collection_archive---------9----------------------->

![](img/78dc5a62d402ae08cafac7f768478c7a.png)

## [法典](http://medium.com/codex)

面向对象编程(OOP)是一种强大的编程范式，在现代软件开发中无处不在。OOP 对于应用程序开发尤其常见和有用，因为对象有效地代表了应用程序的各种组件。和所有的编程结构一样，当它们被正确使用时，通常会闪耀出最耀眼的光芒，而当它们被误用时，则会造成严重的破坏。Java 也不例外，记住以下几条规则可以帮助开发人员避免反模式，并最大限度地发挥这种语言的潜力。

# 1.一定要约束你的类的公共 API。

*public* 访问修饰符告诉类的消费者它应该做什么。如果公共方法与该类的*状态*无关(即其属性中包含的信息)，那么它们可能不属于该类。此外，具有执行大量不相关功能的公共方法的类通常表明该类的用途没有很好地定义，需要更多的约束。

# 2.不要使用受保护的方法向子类提供功能。

这种反模式在开源世界很普遍，尤其是当一个项目只有一个维护者的时候。如果你知道每个子类都需要执行特定的功能或者使用特定的工具，那么超类应该定义该功能。这可以通过混合使用*公共最终*方法和*受保护抽象*方法来实现。如果找不到这样做的方法，很有可能该功能属于一个单独的类。

# 3.一定要使用接口来加强组合。

接口是要求实现细节未知的功能(对当前类而言)的一种很好的方式。您可以通过执行所需操作的构造函数要求一个接口，而不是使您的类成为抽象的。这将防止实现者在子类中承担过多的责任，或者根本不需要子类。这通常隐含在“宁要合成，不要继承”这句话中

# 4.不要把 getters 放在接口中。

接口的存在是为了执行*动作*。Getters 的存在是为了公开*属性*。动作是你的类可以做的事情——行为。属性是组成一个对象的各个部分——特征。通过在接口中放置一个 getter，您模糊了实施共享行为和共享特征之间的界限。Java 允许类“实现”尽可能多的接口，但只“扩展”一个父类。向接口添加 getters 看起来像是 Java 单一继承架构中的一个漏洞，但实际上这只是代码味道混淆了类的意图，使它不那么有表现力。如果您需要一种方法来强制一个公共属性，使用一个抽象类，通过构造函数获取属性，然后为它创建一个 *public final* getter。

# 5.适当的时候一定要使用内部类。

内部类应该谨慎使用，但是如果正确实现的话，它会是一个非常有表现力的工具。内部类可能是正确选择的一个用例是自定义数据结构；举个`java.util.LinkedList`的例子。`Node`类是一个*私有静态*内部类，它保存列表中每个元素的状态。`LinkedList`的消费者永远不需要担心`Nodes`的实现细节，因为`LinkedList`的方法会管理它们。当您需要紧密耦合类的实现细节而不将对象作为公共 API 的一部分公开时，请考虑内部类。如果您确实想公开一个内部类，请记住，它应该将自己表达为一个与包含它的外部类紧密耦合的概念，并且不应该存在于该上下文之外(否则它就不应该是内部类)。

# 6.不要为了让测试更容易而改变访问修饰符。

这种情况我已经见过太多次了:一个类把应该是它的*私有的*方法*保护起来*，这样它们就可以被单独嘲笑或测试。这是一面巨大的红旗。如果助手方法足够复杂，以至于它们需要许多与它们所帮助的*公共*方法无关的测试用例，那么它们几乎肯定属于一个单独的类。不要为了行覆盖而降低可读性和安全性。测试是为了防止错误，而不是制造错误！

这六个技巧可以提高代码库的可维护性，并帮助你在 Java 中充分利用 OOP 的潜力。要更深入地研究代码中的这些概念，请查看我的文章:
[【现实世界中的组合与继承(带 Java 示例)】](/codex/composition-vs-inheritance-in-the-real-world-with-java-examples-89761b64efb8)。