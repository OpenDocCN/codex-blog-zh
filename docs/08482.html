<html>
<head>
<title>C# Parameter Modifiers: ref, in, out, params</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C#参数修饰符:ref，in，out，params</h1>
<blockquote>原文：<a href="https://medium.com/codex/c-parameter-modifiers-ref-in-out-params-99742e89dca?source=collection_archive---------5-----------------------#2022-08-11">https://medium.com/codex/c-parameter-modifiers-ref-in-out-params-99742e89dca?source=collection_archive---------5-----------------------#2022-08-11</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="88b1" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">使用修饰符更改默认的参数传递行为</h2></div><p id="8330" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">默认情况下，参数通过值传递给函数。这意味着，如果我们不使用任何修饰符，数据的副本将被传递给函数。<em class="jt">到底是复制的</em>取决于参数是<a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-types" rel="noopener ugc nofollow" target="_blank"> <em class="jt">值类型</em> </a>还是<a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/reference-types" rel="noopener ugc nofollow" target="_blank"> <em class="jt">引用类型</em> </a>。</p><blockquote class="jv jw jx"><p id="0270" class="ix iy jt iz b ja jb ij jc jd je im jf jy jh ji jj jz jl jm jn ka jp jq jr js hb bi translated"><em class="hi">值类型通过值<em class="hi">传递</em>，而引用类型通过属性的引用传递</em>，但通过自身的值传递<em class="hi">。</em></p></blockquote><p id="d7ed" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">C#提供了一些参数修饰符来控制数据如何传递给函数。让我们看一个没有修饰语的非常基本的例子。</p><p id="f820" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你不熟悉C#或者不熟悉最新版本，这段代码可能会让你觉得很有趣。我使用了 <a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/tutorials/top-level-statements" rel="noopener ugc nofollow" target="_blank"> <em class="jt">顶级语句</em> </a> <em class="jt">来保持简洁明了。</em></p><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="kg kh l"/></div></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es ki"><img src="../Images/074e630707113a9991327a8bddf803d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*tiOI8eYPAQ8TJy4NPeCyMg.png"/></div></figure><p id="7781" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">假设我们想将两个数相加，并在求和后递增这两个数。因为我们通过值传递数据，所以在函数内部修改x和y不会反映到其作用域之外的任何变化。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="dd5e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，让我们使用<a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/ref" rel="noopener ugc nofollow" target="_blank"><em class="jt">ref</em></a><em class="jt"/>修饰符来传递对函数的引用。</p><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="kg kh l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">注意第5行和第8行的<strong class="ak"> ref </strong>关键字</figcaption></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es kw"><img src="../Images/501e59743efd60d29193481b673401b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*zC5dLKiFIVDoPxw7m7wi8w.png"/></div></figure><p id="0f44" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因为我们现在通过引用传递这两个值，所以我们对函数内部参数的更改将影响调用者的作用域。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="8622" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我们想通过引用传递数据，但使它成为只读的，该怎么办？我们可以利用  <em class="jt"> </em>中的<a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/in-parameter-modifier" rel="noopener ugc nofollow" target="_blank"> <em class="jt">修改器。</em></a></p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es kx"><img src="../Images/ec0f1258df3ff3ea622df1e029d31901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*dcdaxTIlqb4y76qz2NvfZw.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">注意第8行的关键字中的<strong class="bd ky">和第12行x下的红色曲线</strong></figcaption></figure><p id="9d26" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这样，如果我们试图修改函数中标记为只读的数据，编译器就会产生错误。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="fb64" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">让我们对代码做一些修改，使用<a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-parameter-modifier" rel="noopener ugc nofollow" target="_blank"> <em class="jt"> out </em> </a> <em class="jt"> </em>修饰符。这个关键字允许我们将一个参数作为引用类型传递，当一个函数返回多个值时会很有用。</p><blockquote class="jv jw jx"><p id="b171" class="ix iy jt iz b ja jb ij jc jd je im jf jy jh ji jj jz jl jm jn ka jp jq jr js hb bi translated">接受out参数的函数有义务在退出前赋予一个合适的值，否则我们会得到一个编译错误。</p></blockquote><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="kg kh l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">Add函数中声明了<strong class="ak"> out </strong>参数</figcaption></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es kw"><img src="../Images/dab3470708ae242083786a6c80d3ac92.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*5OAJWnVt-5PGb5JwEgu3-w.png"/></div></figure><p id="dc6e" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在最新的C#版本中，我们不需要在使用out参数之前声明它。我们可以在函数调用中声明它。</p></div><div class="ab cl kl km gp kn" role="separator"><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq kr"/><span class="ko bw bk kp kq"/></div><div class="hb hc hd he hf"><p id="f8e5" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最后但同样重要的是，我们还可以使用<a class="ae ju" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/params" rel="noopener ugc nofollow" target="_blank"><em class="jt">params</em></a><em class="jt"/>修饰符将一个参数数组(相同类型的)传递给一个函数。我们既可以传递数组，也可以传递由逗号分隔的单个元素。</p><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="kg kh l"/></div></figure></div></div>    
</body>
</html>