<html>
<head>
<title>Create Azure Purview using Bicep</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Bicep创建Azure权限</h1>
<blockquote>原文：<a href="https://medium.com/codex/create-azure-purview-using-bicep-47cdf2192c20?source=collection_archive---------5-----------------------#2021-12-21">https://medium.com/codex/create-azure-purview-using-bicep-47cdf2192c20?source=collection_archive---------5-----------------------#2021-12-21</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="2d53" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">了解如何通过Bicep将基础设施作为代码来部署Azure without。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/061e2141a0d13da73c52d3029f637abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2psfvcewb1MPhdmkcloSEQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用Bicep语言创建Azure权限</figcaption></figure></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="cfe8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi ka translated"><span class="l kb kc kd bm ke kf kg kh ki di">A</span><strong class="ih hj">zure view</strong>是一个统一的数据治理解决方案，可帮助您管理和治理您的内部、多云和软件即服务(SaaS)数据。</p><p id="1a09" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">本文旨在向您展示如何利用Bicep，这是一种特定于领域的语言(DSL ),它使用声明性语法来部署Azure权限。</p><h1 id="d2cf" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">先决条件。</strong></h1><ul class=""><li id="8d66" class="lh li hi ih b ii lj im lk iq ll iu lm iy ln jc lo lp lq lr bi translated">有效的Azure订阅</li><li id="f5bd" class="lh li hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">在订阅中创建资源的权限</li><li id="5225" class="lh li hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">Azure Biccep已安装—<a class="ae lx" href="https://bit.ly/bicep-install" rel="noopener ugc nofollow" target="_blank">bit.ly/bicep-install</a></li><li id="5a27" class="lh li hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated">Azure PowerShell</li></ul><h1 id="235b" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">解决方案概述</h1><p id="50bf" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">我们将创作一个Bicep模板，该模板创建了一个Azure without的实例，通过提供数据扫描和分类作为跨数据资产的服务来自动化数据发现。</p><blockquote class="mb mc md"><p id="bc02" class="if ig me ih b ii ij ik il im in io ip mf ir is it mg iv iw ix mh iz ja jb jc hb bi translated">通过连接到您的内部、云计算和软件即服务(SaaS)来源的数据，view创建了一个最新的信息地图。它对敏感数据进行识别和分类，并提供端到端的连接。数据消费者能够发现整个组织中的数据，数据管理员能够审核、保护和确保正确使用您的数据。</p></blockquote><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/9f9bc60ad8c1ebbda4f83f684f8a87c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYO95cSA-F2EnU41Ik4SSw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">蔚蓝视界</figcaption></figure><p id="af76" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">该解决方案将包括以下文件:</p><ul class=""><li id="4e27" class="lh li hi ih b ii ij im in iq mj iu mk iy ml jc lo lp lq lr bi translated"><strong class="ih hj">📄<em class="me"> main.bicep </em> </strong>:这是二头肌模板</li><li id="0b3d" class="lh li hi ih b ii ls im lt iq lu iu lv iy lw jc lo lp lq lr bi translated"><strong class="ih hj">📄<em class="me">azure deploy . parameters . JSON</em></strong>:该参数文件包含用于部署Bicep模板的值。</li></ul><p id="251b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们开始吧！</p><h1 id="308e" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">创建Azure权限的Azure Bicep文件</h1><p id="43c3" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">第一步是创建一个名为'<em class="me"> main.bicep </em>'的文件，我们将从定义Azure权限实例的几个参数开始。</p><h1 id="21ad" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">Azure Bicep文件-参数</h1><p id="3b13" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">在您的工作目录中创建一个新文件，并将其命名为'<em class="me"> main.bicep </em>'。我们将定义以下参数:</p><pre class="je jf jg jh fd mm mn mo mp aw mq bi"><span id="238d" class="mr kk hi mn b fi ms mt l mu mv">@description('Name of the resource')<br/>param purviewname string</span><span id="c6a0" class="mr kk hi mn b fi mw mt l mu mv">@description('Deployment region')<br/>param location string</span><span id="0076" class="mr kk hi mn b fi mw mt l mu mv">@description('Deployment environment')<br/>param env string</span></pre><h1 id="ae16" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">Azure二头肌模板—资源</h1><p id="9e36" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">我们将定义以下资源:</p><pre class="je jf jg jh fd mm mn mo mp aw mq bi"><span id="e31f" class="mr kk hi mn b fi ms mt l mu mv">resource purviewname_env 'Microsoft.Purview/accounts@2021-07-01' = {<br/>  name: '${purviewname}${env}'<br/>  location: location<br/>  identity: {<br/>    type: 'SystemAssigned'<br/>  }<br/>  properties: {<br/>    publicNetworkAccess: 'Enabled'<br/>  }<br/>  <br/>  tags: {}<br/>  dependsOn: []<br/>}</span></pre><p id="344e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您会注意到我们没有使用<em class="me"> SKU p </em>属性，在撰写本文时该属性是“只读”的，因此默认情况下<em class="me"> SKU </em>将是“<em class="me">标准</em>”。</p><h1 id="9f9f" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">参数文件</h1><p id="f4ce" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">创建一个名为“<em class="me">azure deploy . parameters . JSON</em>”的新文件。下面的代码显示了参数文件的定义:</p><pre class="je jf jg jh fd mm mn mo mp aw mq bi"><span id="f344" class="mr kk hi mn b fi ms mt l mu mv">{<br/>    "$schema": "<a class="ae lx" href="https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#" rel="noopener ugc nofollow" target="_blank">https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#</a>",<br/>    "contentVersion": "1.0.0.0",<br/>    "parameters": {<br/>        "purviewname": {<br/>            "value": "" <br/>        },<br/>        "location": {<br/>            "value": "" <br/>        },<br/>        "env": {<br/>            "value": "" <br/>        }<br/>    }<br/>}</span></pre><h1 id="3f60" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">Azure Bicep模板-部署</h1><p id="8111" class="pw-post-body-paragraph if ig hi ih b ii lj ik il im lk io ip iq ly is it iu lz iw ix iy ma ja jb jc hb bi translated">我们将使用下面的命令来部署我们的二头肌模板:</p><pre class="je jf jg jh fd mm mn mo mp aw mq bi"><span id="00af" class="mr kk hi mn b fi ms mt l mu mv">$date = Get-Date -Format "MM-dd-yyyy"<br/>$deploymentName = "AzInsiderDeployment"+"$date"</span><span id="7589" class="mr kk hi mn b fi mw mt l mu mv">New-AzResourceGroupDeployment -Name $deploymentName -ResourceGroupName azinsider_demo -TemplateFile .\main.bicep -TemplateParameterFile .\azuredeploy.parameters.json -c</span></pre><p id="69d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">提示:您可以创建一个script.ps1并运行该脚本来执行这个部署。</p><p id="b4ab" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">注意:在执行实际部署操作之前，我们利用假设操作来验证我们的部署。</p><p id="e633" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了部署的预览:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mx"><img src="../Images/fcc118223479944e202cf0efc8d4e06c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jeCJLsZrpkSL6tv5OWPvOw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用Bicep语言部署Azure权限</figcaption></figure><p id="bb9b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们将执行部署。下图显示了部署输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es my"><img src="../Images/b1a2b8d2e0ce2308ecee9cdd439317b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHS6PwN-ZTAmtVa8asjKUA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">部署输出— Azure范围</figcaption></figure><p id="a3ad" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以在下面的URL中找到这个解决方案的代码，请随意投稿！</p><div class="mz na ez fb nb nc"><a href="https://github.com/daveRendon/azinsider/tree/main/application-workloads/azure-purview" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hj fi z dy nh ea eb ni ed ef hh bi translated">azin sider/应用程序-工作负载/azure-在主daveRendon/azinsider的权限</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">在GitHub上创建一个帐户，为daveRendon/azinsider开发做出贡献。</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jn nc"/></div></div></a></div><p id="51db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在Azure门户中，您应该会看到Azure权限服务的实例，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nr"><img src="../Images/99c570a83ebaf04692957ed15efed5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0VBtZ4ADiW1c18So4Y745w.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">使用Bicep语言部署Azure权限</figcaption></figure><p id="3483" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">创建Azure权限帐户后，您可以使用权限工作室来访问和管理它。有两种方法可以打开权限工作室。</p><ol class=""><li id="8644" class="lh li hi ih b ii ij im in iq mj iu mk iy ml jc ns lp lq lr bi translated">在<a class="ae lx" href="https://portal.azure.com/" rel="noopener ugc nofollow" target="_blank"> Azure门户</a>中。选择概览页面上的“打开权限工作室”板块。</li><li id="8833" class="lh li hi ih b ii ls im lt iq lu iu lv iy lw jc ns lp lq lr bi translated">浏览到https://web.purview.azure.com<a class="ae lx" href="https://web.purview.azure.com" rel="noopener ugc nofollow" target="_blank">的</a></li></ol><p id="01db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下图显示了权限工作室:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nt"><img src="../Images/b0c3e35f639ce5d4273cfed0f56f2774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WfCS_u79-HaYEj1AixFn2Q.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">Azure权限工作室</figcaption></figure><p id="4b18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇文章中，我们回顾了如何使用Bicep语言将基础设施作为代码来创建Azure权限的实例，以及如何通过权限工作室访问它。</p><p id="08a6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下一步是确保您有一个用户分配的托管身份，该身份可以使用Azure Active Directory直接与资源进行身份验证，并使用“集合”，这是一个Azure权限工具，用于跨资产、源和信息管理所有权和访问控制。</p><figure class="je jf jg jh fd ji er es paragraph-image"><a href="https://www.buymeacoffee.com/drbmc"><div class="er es nu"><img src="../Images/2c5b182596bd701cac27cf5b4a1128a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*heGyKzpzJvQEmpjSYldJWQ.png"/></div></a></figure><p id="ae8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">👉<a class="ae lx" href="http://eepurl.com/gKmLdf" rel="noopener ugc nofollow" target="_blank"> <em class="me">在此加入</em><strong class="ih hj"><em class="me">azin sider</em></strong><em class="me">邮箱列表。</em>T13】</a></p><p id="4ca6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><em class="me">-戴夫·R</em></p></div></div>    
</body>
</html>