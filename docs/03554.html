<html>
<head>
<title>What Are NoSQL Databases? How Do They Work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是NoSQL数据库？它们是如何工作的？</h1>
<blockquote>原文：<a href="https://medium.com/codex/what-are-nosql-databases-how-do-they-work-a9d79b784522?source=collection_archive---------17-----------------------#2021-09-08">https://medium.com/codex/what-are-nosql-databases-how-do-they-work-a9d79b784522?source=collection_archive---------17-----------------------#2021-09-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="c344" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL数据库越来越受欢迎。大型公司使用它们来存储成千上万Pb的数据，并每秒执行数百万次查询。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c15bb241876f4a49e070f47c43a0d62e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ikGOLd_E1xZ0LwAR3wQLOA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">NoSQL数据库是如何工作的？</figcaption></figure><p id="2bdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是什么是NoSQL数据库呢？</p><p id="f441" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它的机制是什么，为什么它的伸缩性比标准的关系数据库好得多？</p><p id="531a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">让我们先简单描述一下MySQL、MariaDB、SQL Server等关系数据库的问题。</p><p id="4e63" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它们被设计成以最有效可行的方式存储关系数据。</p><p id="3267" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您可以创建一个包含客户、订单和商品的表，它们在逻辑上联系在一起:客户下订单，订单包含产品。</p><p id="1654" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这种紧密的组织有助于数据管理，但这是有代价的:关系数据库难以增长。</p><p id="9a9d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它们必须维护这些链接，这是一项耗时的操作，需要大量的内存和计算能力。</p><p id="9863" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，虽然您可以在一段时间内不断更新您的数据库服务器，但它最终将无法管理需求。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="fab0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">关系数据库只能垂直伸缩，不能水平伸缩，而NoSQL数据库可以垂直和水平伸缩。</p><p id="afa5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，垂直扩展需要在现有建筑上增加楼层，而水平扩展则需要增加新的结构。</p><p id="889f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您本能地意识到垂直扩展在范围上是有限的，但是水平扩展要强大得多。</p><p id="b620" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为什么NoSQL数据库如此具有可扩展性？</p><p id="3441" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，他们取消了这些昂贵的领带。</p><p id="d0db" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL数据库中的每一项都是独立的。</p><p id="a100" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于这一微小的变化，它们基本上是键值存储。</p><p id="0358" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个数据库条目只有两个字段:唯一键和值。</p><p id="179c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，在存储产品信息时，您可以使用产品的条形码作为键，使用产品名称作为值。</p><p id="cdc2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这似乎是一个约束，但是值可能类似于带有额外数据的JSON文档，比如价格和描述。</p><p id="4135" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">由于其简化的体系结构，NoSQL数据库可以很好地伸缩。</p><p id="f8e7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果单个数据库服务器无法保存您的所有数据或执行您的所有查询，则可以在两个或更多服务器之间分配负担。</p><p id="dc84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，每台服务器将负责数据库的一个子集。</p><p id="1c96" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">举个例子:苹果公司运营着一个由75000台服务器组成的NoSQL数据库。</p><p id="2f30" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">数据库的这些部分在NoSQL被称为分区，这引发了一个有趣的问题。</p><p id="5fa1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的数据库被划分成潜在的数千个分区，您如何知道一个项目保存在哪里？</p><p id="fe92" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是主键发挥作用的地方。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="8d18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请记住，NoSQL数据库是键值存储，键决定了项保存在哪里。</p><p id="e668" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL数据库在后台利用散列函数将每个项目的主键转换成一个在预定义范围内的数字。</p><p id="6417" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">假设值在0到100之间。</p><p id="3a36" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，这个哈希值和范围用于决定项目应该存储在哪里。</p><p id="be50" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的数据库足够小或者没有收到大量查询，您可以将所有内容放在一台服务器上。</p><p id="5915" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这位将负责整个系列。</p><p id="0c35" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果该服务器变得过于拥挤，您可以安装一个备份服务器，将范围分成两半。</p><p id="75bb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">服务器1将负责散列值在0到50之间的所有事情，而服务器2将负责散列值在50到100之间的所有事情。</p><p id="c34e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">从理论上讲，无论是在存储方面还是在可以运行的查询数量方面，您的数据库容量都增加了一倍以上。</p><p id="e6df" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个范围也称为键空间。这是一个直截了当的解决方案，解决了两个问题:在哪里存储新的东西，在哪里定位旧的东西。</p><p id="9bc8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您所需要做的就是计算一个条目的键的散列，并跟踪哪个服务器负责键空间的哪个部分。</p><p id="2159" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，在这种情况下，0到100的范围非常有限。</p><p id="91b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它只能让您将数据库分成最多100个部分。</p><p id="3651" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，真正的NoSQL数据库有相当大的键空间，允许它们几乎无限地扩展。</p><p id="bf2a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">除了可伸缩性，NoSQL是无模式的，这意味着数据库条目不必具有相同的结构。</p><p id="8e0d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每一个都是独一无二的。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="5f44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在关系数据库中，您必须首先指定您的表的结构，然后每个项目都必须遵守它。</p><p id="06f0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">更改这种结构很困难，可能会导致数据丢失。</p><p id="1dc6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的应用程序和数据结构不断发展，没有模式可能是一个巨大的好处。</p><p id="c006" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此时，很明显NoSQL数据库比关系数据库有几个优点。</p><p id="a0cc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但这并不意味着关系数据库过时了；远非如此。</p><p id="5ffa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">NoSQL对访问数据的方式有更多的限制，只能通过主键来检索。</p><p id="3797" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">按ID查找订单很简单，但是查找超过特定金额的所有订单非常耗时。</p><p id="6661" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一方面，关系数据库没有这样的问题。</p><p id="758a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个问题有解决方案，但前提是你知道如何访问你的数据。</p><p id="ba59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">情况可能并不总是如此。</p><p id="44b5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">另一个缺点是NoSQL数据库逐渐变得一致。</p><p id="5477" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您向数据库中写入一个新项并立即尝试取回它时，它可能无法被检索到。</p><p id="f8c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如前所述，NoSQL分割你的数据库。</p><p id="071a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，每个分区都在许多服务器上复制。</p><p id="2598" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，服务器可以关闭而不会造成太大的损害。</p><p id="5408" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您向数据库中添加一个新项目时，其中一个镜像会在将它复制到后台的其他镜像之前保存它。</p><p id="47e8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这个过程可能需要一些时间。</p><p id="8a40" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当您读取该项时，NoSQL数据库可能会尝试从可能尚不包含该项的镜像中读取它。</p><p id="e797" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">实际上，这并不是一件大事，因为数据复制只需几毫秒。</p><p id="667c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">而且，如果您需要一致性，大多数NoSQL数据库都可以提供。</p></div><div class="ab cl jt ju gp jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="hb hc hd he hf"><p id="d432" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">总之，在可预见的将来，NoSQL和关系数据库都将存在。</p><p id="e712" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">每个人都有自己的一套技能和缺点。</p><p id="6a4e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">既然你已经理解了NoSQL是如何工作的，让我们来看一些例子。</p><p id="50a1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">云公司积极推动NoSQL，因为它让他们增长更快。</p><p id="7dbe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">DynamoDB在AWS上可用，BigTable在Google Cloud上可用，CosmosDB在Azure上可用。</p><p id="69d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了给你提供另一个可扩展性的例子，亚马逊的NoSQL数据库在2019年亚马逊Prime Day期间达到了每秒4500万次查询的峰值。</p><p id="6f25" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">太不可思议了！</p><p id="18ba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是，您可以使用Cassandra(由脸书创建)、Scylla、CouchDB、MongoDB等工具自己操作NoSQL数据库。</p><p id="1f48" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我们结束这段视频之前，让我们先简要了解一下术语“NoSQL”</p><p id="8961" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这有点令人费解，因为它可能有两种解读方式。</p><p id="96c3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，“NoSQL”可能意味着“不仅仅是SQL”，指的是一些NoSQL数据库除了它们自己的查询能力之外，还理解SQL查询语言。</p><p id="752e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">其次，在“非关系”的意义上，它经常被称为“NoSQL ”,因为它不能容易地保存关系数据。</p><p id="714f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这篇博文到此结束。</p><p id="c615" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你从中学到了什么，请跟我来，我希望看到一些掌声！！T3】</p></div></div>    
</body>
</html>