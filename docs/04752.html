<html>
<head>
<title>Rewarding Players — Implementing Unity Ads API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">奖励玩家—实施Unity Ads API</h1>
<blockquote>原文：<a href="https://medium.com/codex/implementing-unity-ads-api-5c26339cd38d?source=collection_archive---------10-----------------------#2022-01-03">https://medium.com/codex/implementing-unity-ads-api-5c26339cd38d?source=collection_archive---------10-----------------------#2022-01-03</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="abdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这篇简短的文章中，我将介绍如何在你的游戏中实现Unity Ads API，向用户展示奖励和未奖励的广告。</p><p id="9833" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">第一步是从包管理器安装广告包。进入“窗口”&gt;“软件包管理器”，在“Unity注册表”下找到“广告”，点击<em class="jd">安装。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/0179ffda792daedd149a68b77b88da33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8bXvOQLDLHEB5xAEX9QVJw.gif"/></div></div></figure><p id="d6d6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们需要创建一个项目ID，将我们的Unity广告链接到我们的帐户。进入“编辑”&gt;“项目设置”&gt;“广告”，选择与您的Unity帐户关联的组织。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/e1072514cfa8265a6bb67a1f7611a2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YYaTom186chVurmC_6iWRA.gif"/></div></div></figure><p id="dc99" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，您可以单击创建项目ID来创建您的新ID。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jr"><img src="../Images/4520081bdb034609e11fcd868014d8ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:232/format:webp/1*Vgn5IPzlhmCxl9_iLN3few.png"/></div></figure><p id="8cf3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你必须回答一个关于项目是否会面向儿童的问题，这将为你创建链接。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es js"><img src="../Images/513916c1a7222bd7c0fbd0ce9b4908b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0Ur-dA4KFxyD04wVqoYW9g.gif"/></div></div></figure><p id="1a69" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，打开Ads服务，并确保您安装了最新的版本。出于测试目的，请确保您启用了“测试模式”。</p><p id="5c71" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">记住当你的游戏上线时，你需要关闭测试模式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jt"><img src="../Images/1c2568332f7503a94d33a295a3801462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bokMY981KgPdG1TCVBKoxg.gif"/></div></div></figure><p id="ba1e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以去我们的<a class="ae ju" href="https://dashboard.unity3d.com/" rel="noopener ugc nofollow" target="_blank"> Unity仪表盘</a>并完成我们的设置。确保选择了正确的项目，然后单击“完成激活”按钮。你会得到一些设置选项，选择“我没有使用冥想，只有统一广告”。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jv"><img src="../Images/7d569c175df29dd641045671852f9b96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OzkeGQZnaOSlhpVD7XQSLA.gif"/></div></div></figure><p id="d65c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以建立我们的广告部门了。广告单元是您希望显示的广告类型。在我们的例子中，我们将设置奖励的Android广告，并在玩家按下按钮时触发它们。请注意屏幕顶部的广告单元Id和您的游戏ID。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/0179ffda792daedd149a68b77b88da33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8bXvOQLDLHEB5xAEX9QVJw.gif"/></div></div></figure><p id="fedd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在我的游戏场景中，我为玩家创建了一个按钮，点击该按钮可以观看广告并获得游戏内货币奖励。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jw"><img src="../Images/87cef0dc48a5546213586a3213c1a5d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HpccKFytKnbTLWzmnF2Gnw.png"/></div></div></figure><p id="b398" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，创建一个空对象来存放新的adsManager脚本。将您的脚本添加到对象中。在脚本中，我们将需要名称空间“<em class="jd"> UnityEngine。广告</em>”。我使用singleton模式设置这个类，以便能够跨所有脚本访问它。</p><p id="dc78" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们要实现IUnityAdsInitializationListener、IUnityAdsLoadListener和IUnityAdsShowListener接口。这使我们能够从广告中访问上下文数据。我已经设置了每个函数来调试它的信息。文档中有更多信息。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jx"><img src="../Images/54ee85887de28d9c9363f238cfa9e7c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBkRaEbYe9BNT6UrRk2byw.png"/></div></div></figure><p id="909f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们需要确保在第一次加载游戏时初始化并加载我们的广告，这样当玩家需要时广告就准备好了。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jy"><img src="../Images/c7d29b7bf907939ab9a270d6b45f775c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*SF_enGIsTsfnk3SLk8HEUg.png"/></div></figure><p id="8739" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们可以获得对按钮的引用</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jz"><img src="../Images/1d4d8ee2762c6644d2da2bbd48473912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*u0OHMWUeZyUmEQgX4tkIlQ.png"/></div></figure><p id="5f08" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">并且如果广告没有加载，则将它的可交互状态设置为假。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ka"><img src="../Images/66360f40592b9d1543ccc6e86488fbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OmeCvX8xP9ypF52TtssreA.png"/></div></div></figure><p id="1cb0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，我们现在可以连接奖励玩家的功能。在播放器功能上，我们添加了一个功能来调整我们的钻石数量。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kb"><img src="../Images/ee2e373f9f88c169e3a559d11c5b079f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*MrkEmOuzeAU1iImSA_PJ1w.png"/></div></figure><p id="410f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以在广告管理器上找到并缓存对播放器的引用。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kc"><img src="../Images/976f1c36d75bc8f6b8cba982d13cd37f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*NPfWW_11wFVISloIhRVWkA.png"/></div></figure><p id="8b4b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在函数“OnUnityAdsShowComplete”上，我们可以检查枚举UnityAdsShowCompletionState</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kd"><img src="../Images/186943f6c5c3891fae3ca1e96a5a8b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*Eg4RXUYytWLp3ftnULUTrg.png"/></div></figure><p id="9edd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是看玩家是否看完了整个广告。如果我们有多个广告，我们可以添加一个switch语句来检查广告单元ID，适当地奖励玩家，并禁用我们的按钮。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ke"><img src="../Images/d5ce8cd5bc5615d3a6205cba928fcb62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ja3Ln8kRJAPCRkjp81vvFA.png"/></div></div></figure><p id="8b54" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们现在可以设置显示广告的功能。在我的UIManager上，我添加了以下函数。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es kf"><img src="../Images/f65ab827bec07a898fe4c97dd971ec36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*wuKEeKPOiwjXSJiMDpk2yQ.png"/></div></figure><p id="8f4c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以将它分配给Click事件上的按钮。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kg"><img src="../Images/1b33a48f52b2696dab79463464b4207f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IaL4unyj_EakX_Y2Byq5mw.gif"/></div></div></figure><p id="32b9" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们可以测试我们的功能了。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kh"><img src="../Images/c68dfd684f429709e5e0ab96d4b1ad3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1qAnBF70ddijju58hY51PA.gif"/></div></div></figure><p id="567e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">目前就这些。</p></div></div>    
</body>
</html>