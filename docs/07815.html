<html>
<head>
<title>Why you should stop using retrying in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä¸ºä»€ä¹ˆåº”è¯¥åœæ­¢åœ¨pythonä¸­ä½¿ç”¨é‡è¯•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/codex/why-you-should-stop-using-retrying-in-python-fb33d43412ab?source=collection_archive---------8-----------------------#2022-06-29">https://medium.com/codex/why-you-should-stop-using-retrying-in-python-fb33d43412ab?source=collection_archive---------8-----------------------#2022-06-29</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="78b2" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">ä¸å†ç»´æŠ¤é‡è¯•ã€‚ç”¨éŸ§æ€§ä»£æ›¿ã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/5323427dd99d457d2c9a58b90ca4d8ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3rUg6qeLSYKMFymr"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">ç…§ç‰‡ç”±<a class="ae jn" href="https://unsplash.com/@hngstrm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">äº¨åˆ©&amp;å…¬å¸</a>åœ¨<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>æ‹æ‘„</figcaption></figure><h1 id="67e1" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">ç®€ä»‹:</h1><p id="1bbb" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">å¦‚æœä½ æ˜¯ä¸€ä¸ªwebå¼€å‘äººå‘˜ï¼Œä½ åº”è¯¥çŸ¥é“æœåŠ¡å™¨é”™è¯¯æœ‰å¤šçƒ¦äººï¼Œæˆ–è€…ä»»ä½•ä¸æ­¤ç›¸å…³çš„é”™è¯¯ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæœ‰ä¸€å¤§å—ä¸‹è½½/ä¸Šä¼ æ–‡ä»¶çš„ä»£ç ï¼Œæœ€ååœ¨ç¬¬nåˆ†é’ŸæŠ›å‡ºäº†ä¸€ä¸ª<code class="du lc ld le lf b">exception</code>ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§äº‹ç»å¸¸å‘ç”Ÿã€‚ç›¸ä¿¡æˆ‘ï¼Œä¼™è®¡ï¼Œæˆ‘ä¹Ÿç»å†è¿‡ã€‚</p><p id="c0d1" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">ä½œä¸ºä¸€åå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬ä¸ä»…åº”è¯¥æä¾›æ²¡æœ‰é”™è¯¯çš„ä»£ç (è®©æˆ‘æŠŠå®ƒæ”¹å†™æˆé”™è¯¯æœ€å°‘çš„ä»£ç ğŸ˜‰)ï¼Œä½†ä¹Ÿæ˜¯ä¸€ä¸ªä¼˜é›…çš„å¤±è´¥ï¼Œä¸€ä¸ªä¿¡æ¯æ€§çš„é”™è¯¯æ¶ˆæ¯ï¼Œä¹Ÿè®¸è¿˜æœ‰ä¸€ä¸ªé‡è¯•æœºåˆ¶ã€‚</p><p id="3d85" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">pythonä¸­æœ‰å¤šä¸ªé‡è¯•åº“ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨å®ƒä»¬æ¥å®ç°æŒ‡æ•°å›é€€ã€‚æœ‰å‡ ä¸ªæ˜¯ï¼Œ</p><p id="ff6d" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">å¾ˆé—æ†¾ï¼Œä¸å†æ”¯æŒé‡è¯•ã€‚æˆ‘ä»¬ä»é‡è¯•ä¸­æ´¾ç”Ÿå‡ºå¦ä¸€ä¸ªåº“ï¼Œå«åš<a class="ae jn" href="https://pypi.org/project/tenacity/" rel="noopener ugc nofollow" target="_blank"> tenacity </a>ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹<code class="du lc ld le lf b">tenacity</code>ä¸ºæˆ‘ä»¬æä¾›äº†å“ªäº›åŠŸèƒ½ã€‚</p><h1 id="c75e" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">éŸ§æ€§:</h1><p id="99ed" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">Tenacityæ˜¯ä¸€ä¸ªApache 2.0è®¸å¯çš„é€šç”¨é‡è¯•åº“ï¼Œç”¨Pythonç¼–å†™ï¼Œç”¨äºç®€åŒ–å‘ä»»ä½•ä¸œè¥¿æ·»åŠ é‡è¯•è¡Œä¸ºçš„ä»»åŠ¡ã€‚å®ƒæºäº<a class="ae jn" href="https://github.com/rholder/retrying/issues/65" rel="noopener ugc nofollow" target="_blank">é‡è¯•</a>çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œé—æ†¾çš„æ˜¯ä¸å†è¢«<a class="ae jn" href="https://julien.danjou.info/python-tenacity/" rel="noopener ugc nofollow" target="_blank">ç»´æŠ¤</a>ã€‚Tenacityä¸é‡è¯•ä¸å…¼å®¹ï¼Œä½†å¢åŠ äº†é‡è¦çš„æ–°åŠŸèƒ½ï¼Œå¹¶ä¿®å¤äº†ä¸€äº›é•¿æœŸå­˜åœ¨çš„é”™è¯¯ã€‚</p><h2 id="79c0" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">å®‰è£…:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="baa1" class="ll jp hi lf b fi md me l mf mg">$pip install tenacity</span></pre><h1 id="43c5" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">æ— æ¡ä»¶ç®€å•é‡è¯•:</h1><p id="0a3f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">ä¸‹é¢çš„ä»£ç ï¼Œ<code class="du lc ld le lf b">retries</code>æ°¸è¿œä¸å¸¦ä»»ä½•æ¡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„é‡è¯•ä¿®é¥°å™¨ï¼Œå¯ä»¥åº”ç”¨äºä»»ä½•å¼•å‘å¼‚å¸¸çš„å‡½æ•°ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">ç®€å•é‡è¯•</figcaption></figure><h2 id="a364" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="0ccf" class="ll jp hi lf b fi md me l mf mg"> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...</span></pre><p id="4da7" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">å¦‚æœæ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œå°±ä¸ä¼šæœ‰é‡è¯•ï¼Œå¹¶ä¸”<code class="du lc ld le lf b">print</code>è¯­å¥å°†åªæ‰§è¡Œä¸€æ¬¡ï¼Œä½ åº”è¯¥æ˜ç™½äº†ã€‚</p><h1 id="41b9" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">æœ‰æ¡ä»¶é‡è¯•:</h1><h2 id="2af0" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">å°è¯•ååœæ­¢:</h2><p id="9386" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†åŸºæœ¬çš„é‡è¯•ï¼Œè®©æˆ‘ä»¬å°è¯•æ–½åŠ æ¡ä»¶ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœæ­¢å°è¯•æŸäº›æ¡ä»¶ã€‚è®©æˆ‘ä»¬å°è¯•å®ç°ä¸€ä¸ªè¿™æ ·çš„æ¡ä»¶ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">å¸¦åœæ­¢çš„ç®€å•é‡è¯•</figcaption></figure><h2 id="459e" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="e104" class="ll jp hi lf b fi md me l mf mg"> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/> Example for simple retry. Retrying forever...<br/>Traceback (most recent call last):<br/>  File "/Users/dkb/VirtualEnvs/practo-env/lib/python3.9/site-packages/tenacity/__init__.py", line 407, in __call__<br/>    result = fn(*args, **kwargs)<br/>  File "/Users/dkb/Code/practice/my_tenacity.py", line 7, in simple_retry<br/>    raise Exception('Raising exception after 5 retries...')<br/>Exception: Raising exception after 5 retries...<br/><br/>The above exception was the direct cause of the following exception:<br/><br/>Traceback (most recent call last):<br/>  File "/Users/dkb/Code/practice/my_tenacity.py", line 10, in &lt;module&gt;<br/>    simple_retry()<br/>  File "/Users/dkb/VirtualEnvs/practo-env/lib/python3.9/site-packages/tenacity/__init__.py", line 324, in wrapped_f<br/>    return self(f, *args, **kw)<br/>  File "/Users/dkb/VirtualEnvs/practo-env/lib/python3.9/site-packages/tenacity/__init__.py", line 404, in __call__<br/>    do = self.iter(retry_state=retry_state)<br/>  File "/Users/dkb/VirtualEnvs/practo-env/lib/python3.9/site-packages/tenacity/__init__.py", line 361, in iter<br/>    raise retry_exc from fut.exception()<br/>tenacity.RetryError: RetryError[&lt;Future at 0x100d64c40 state=finished raised Exception&gt;]</span></pre><h2 id="0a10" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">å»¶è¿Ÿååœæ­¢:</h2><p id="0ea7" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">è¿™å°†å°è¯•ï¼Œç›´åˆ°æˆ‘ä»¬æä¾›çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°è¯•10ç§’é’Ÿï¼Œç„¶ååœæ­¢ï¼Œè¿™æ˜¯ä½ åº”è¯¥é€‰æ‹©çš„æ–¹æ³•ã€‚</p><p id="2a94" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œ<a class="ae jn" href="http://httpbin.org/" rel="noopener ugc nofollow" target="_blank">httpbin.org</a>æ˜¯ä¸€ä¸ªæµ‹è¯•HTTPæœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä»»ä½•å…¶ä»–HTTPæœåŠ¡å™¨è¿›è¡Œæµ‹è¯•ï¼Œæˆ–è€…æ‰˜ç®¡æ‚¨è‡ªå·±çš„æœåŠ¡å™¨ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="0fa8" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="dbbe" class="ll jp hi lf b fi md me l mf mg">401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>401<br/>Traceback (most recent call last):<br/>  File "/Users/dkb/VirtualEnvs/practo-env/lib/python3.9/site-packages/tenacity/__init__.py", line 407, in __call__<br/>    result = fn(*args, **kwargs)<br/>  File "/Users/dkb/Code/practice/my_tenacity.py", line 21, in authenticate_user<br/>    response.raise_for_status()<br/>  File "/Users/dkb/VirtualEnvs/practo-env/lib/python3.9/site-packages/requests/models.py", line 953, in raise_for_status<br/>    raise HTTPError(http_error_msg, response=self)<br/>requests.exceptions.HTTPError: 401 Client Error: UNAUTHORIZED for url: http://httpbin.org/basic-auth/user/password</span></pre><p id="4e8c" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é‡è¯•authæœºåˆ¶åç§’é’Ÿï¼Œç„¶åå‡ºé”™ã€‚æ‚¨æ€»æ˜¯å¯ä»¥é€šè¿‡å°è£…åœ¨ä¸€ä¸ª<code class="du lc ld le lf b">try/except</code>å—ä¸­æ¥æ•æ‰è¿™äº›å¼‚å¸¸ï¼Œä»¥å¢åŠ æ›´å¤šçš„ä¼˜é›…ã€‚</p><h2 id="ec8b" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">ç»„åˆåœæ­¢æ¡ä»¶:</h2><p id="1f57" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">å¶å°”ï¼ŒæœåŠ¡å™¨éœ€è¦ä¸€æ®µæ—¶é—´æ¥å“åº”ï¼Œè€Œå¤§å¤šæ•°æ—¶å€™ä»–ä»¬å¯èƒ½ä¼šå¾ˆå¿«å“åº”ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½è¿˜å¿…é¡»é‡åŒ–é‡è¯•çš„æ¬¡æ•°ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œä½ å¯ä»¥ç»“åˆ<code class="du lc ld le lf b">stop_after_delay</code>å’Œ<code class="du lc ld le lf b">stop_after_attempt</code>ä¸¤ä¸ªæ¡ä»¶ã€‚</p><p id="45e4" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">è¿™é‡Œï¼Œæ— è®ºå“ªä¸ªæ¡ä»¶é¦–å…ˆæ»¡è¶³ï¼Œé‡è¯•éƒ½ä¼šåœæ­¢ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="3c45" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="11ae" class="ll jp hi lf b fi md me l mf mg">401<br/>401<br/>401<br/>401<br/>401<br/>RetryError[&lt;Future at 0x110914c40 state=finished raised HTTPError&gt;]</span></pre><h1 id="20f9" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">å®æ–½æŒ‡æ•°å›é€€:</h1><p id="a400" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">å¤§å¤šæ•°åç«¯æœåŠ¡å™¨é™åˆ¶æ¯ç§’å‘æœåŠ¡å‘å‡ºçš„è¯·æ±‚æ•°ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°é™åˆ¶å¼‚å¸¸æˆ–è¶…è¿‡æœ€å¤§è¯·æ±‚æ•°é”™è¯¯ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æŠ‘åˆ¶æˆ‘ä»¬çš„è¯·æ±‚ï¼Œä»¥é™ä½å¯¹æœåŠ¡å™¨çš„è¯·æ±‚ç‡ã€‚</p><blockquote class="mj mk ml"><p id="fc81" class="kg kh mm ki b kj lg ij kl km lh im ko mn li kr ks mo lj kv kw mp lk kz la lb hb bi translated">å¦‚æœä½ æœ‰å…´è¶£äº†è§£å¦‚ä½•è§£å†³<code class="du lc ld le lf b">aws</code>ä¸­çš„èŠ‚æµå¼‚å¸¸ï¼Œè¯·é˜…è¯»<a class="ae jn" href="https://dock2learn.com/tech/throttling-exceptions-in-aws-and-ways-to-resolve-them/" rel="noopener ugc nofollow" target="_blank">è¿™ç¯‡</a>å¸–å­ã€‚</p></blockquote><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="1daa" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="e94f" class="ll jp hi lf b fi md me l mf mg">401 2022-06-28 11:54:40.414397<br/>401 2022-06-28 11:54:43.054521<br/>401 2022-06-28 11:54:45.614282<br/>401 2022-06-28 11:54:48.176247<br/>401 2022-06-28 11:54:50.648000<br/>RetryError[&lt;Future at 0x110f7fd30 state=finished raised HTTPError&gt;]</span></pre><p id="d372" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨å°è¯•é‡è¯•ä¹‹å‰ç­‰å¾…2ç§’é’Ÿï¼Œç„¶åé‡è¯•5æ¬¡ã€‚é‡è¯•çš„æ¬¡æ•°å¯ä»¥æ”¹å˜ï¼Œå¦‚æœä½ æƒ³é‡è¯•ï¼Œç›´åˆ°ä½ æˆåŠŸã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥åœ¨<code class="du lc ld le lf b">retry</code>è£…é¥°å™¨ä¸­æ··åˆåŒ¹é…<code class="du lc ld le lf b">stop</code>å’Œ<code class="du lc ld le lf b">wait</code>å‚æ•°ã€‚</p><h1 id="b023" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">é’ˆå¯¹ç‰¹å®šå¼‚å¸¸é‡è¯•:</h1><p id="3473" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">é¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥é‡è¯•ç‰¹å®šçš„é”™è¯¯æ¶ˆæ¯ï¼Œå¦‚<code class="du lc ld le lf b">HTTP errors</code>ã€<code class="du lc ld le lf b">ValueError</code>ã€<code class="du lc ld le lf b">TypeError</code>æˆ–ä»»ä½•è‡ªå®šä¹‰å¼‚å¸¸ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="23a7" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">æ­¤ä»£ç å°†ä»…åœ¨HTTPErrorsçš„æƒ…å†µä¸‹é‡è¯•ã€‚å¦‚æ­¤ä¼˜é›…ã€‚ä¸æ˜¯å—ï¼Ÿç±»ä¼¼åœ°ï¼Œå¦‚æœå¼‚å¸¸ä¸æ˜¯ç‰¹å®šçš„ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code class="du lc ld le lf b">retry_if_not_exception_type()</code>ã€‚</p><h1 id="0d4b" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">åŸºäºè¿”å›å€¼çš„é‡è¯•å’Œæ˜¾å¼é‡è¯•:</h1><p id="a916" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">å¯ä»¥å°†å‡½æ•°ç¼–ç¨‹ä¸ºåŸºäºè¿”å›å€¼é‡è¯•ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªå‡½æ•°è¿”å›<code class="du lc ld le lf b">None</code>æ—¶ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="06e5" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="fbd7" class="ll jp hi lf b fi md me l mf mg"> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None<br/> Retrying . . .: None</span></pre><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="67c2" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">å½“æ‚¨ä½¿ç”¨<code class="du lc ld le lf b">TryAgain</code>å¼‚å¸¸å¾—åˆ°401é”™è¯¯æ—¶ï¼Œä¸Šé¢çš„ä»£ç ä¼šé‡è¯•ã€‚æˆ‘æ²¡æœ‰ä¸ºæ­¤æä¾›è¾“å‡ºï¼Œå› ä¸ºåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ‚¨å·²ç»æŒæ¡äº†å®ƒçš„çªé—¨ã€‚</p><h1 id="56c0" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">ç»Ÿè®¡æ•°æ®:</h1><p id="d413" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">ä½¿ç”¨<code class="du lc ld le lf b">statistics</code>å±æ€§å¯ä»¥è·å¾—ç”¨<code class="du lc ld le lf b">retry</code>ä¿®é¥°çš„å‡½æ•°çš„ç»Ÿè®¡æ•°æ®ã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="0e8e" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="fbb1" class="ll jp hi lf b fi md me l mf mg"> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/>{'start_time': 0.227001672, 'attempt_number': 5, 'idle_for': 0, 'delay_since_first_attempt': 2.319967352}</span></pre><p id="9af9" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">ç»Ÿè®¡æ•°æ®ä»¥å­—å…¸çš„å½¢å¼æ‰“å°å‡ºæ¥ï¼ŒåŒ…æ‹¬å¼€å§‹æ—¶é—´ã€å°è¯•æ¬¡æ•°ç­‰ã€‚</p><h1 id="f54e" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">è‡ªå®šä¹‰å›è°ƒ:</h1><p id="304f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">è¿™ä¸ªé€‰é¡¹æ˜¯æˆ‘ä¸ªäººæœ€å–œæ¬¢çš„ã€‚è¿™æ­£æ˜¯è®©<code class="du lc ld le lf b">tenacity</code>æˆä¸ºå¼€å‘è€…çš„ä¹è¶£æ‰€åœ¨ã€‚æ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªå›è°ƒæœºåˆ¶ï¼Œåœ¨æˆ‘ä»¬ç”¨å®Œé‡è¯•æ¬¡æ•°åè°ƒç”¨ï¼Œæˆ–è€…æ›´å‡†ç¡®åœ°è¯´ï¼Œåœ¨æ‰§è¡Œå®Œ<code class="du lc ld le lf b">retry</code>è£…é¥°å™¨åè°ƒç”¨ã€‚</p><p id="7544" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">è¿™å°†é¿å…å¼•å‘å¼‚å¸¸ã€‚å¦‚æœæ‚¨æƒ³è¦å¼•å‘è‡ªå®šä¹‰å¼‚å¸¸è€Œä¸æ˜¯<code class="du lc ld le lf b">RetryError</code>ï¼Œè¿™å¯èƒ½ä¼šæ´¾ä¸Šç”¨åœºã€‚</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="bc68" class="ll jp hi bd jq lm ln lo ju lp lq lr jy kp ls lt ka kt lu lv kc kx lw lx ke ly bi translated">è¾“å‡º:</h2><pre class="iy iz ja jb fd lz lf ma mb aw mc bi"><span id="35d8" class="ll jp hi lf b fi md me l mf mg"> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Retrying using explicit retry . . .<br/> Maximum number of retries exceeded. &lt;RetryCallState 4340277104: attempt #5; slept for 0.0; last result: failed (HTTPError 401 Client Error: UNAUTHORIZED for url: http://httpbin.org/basic-auth/user/password)&gt; <br/>{'start_time': 0.196902178, 'attempt_number': 5, 'idle_for': 0, 'delay_since_first_attempt': 3.0087615750000003}</span></pre><p id="44b9" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">æ•´æ´å—ï¼Ÿã€‚è¿™é‡Œçš„<code class="du lc ld le lf b">get_response()</code>æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå…·æœ‰å½“å‰<code class="du lc ld le lf b">retry</code>æ‰€æœ‰å±æ€§çš„<code class="du lc ld le lf b">retry_state</code>å‚æ•°ã€‚</p><h1 id="f6d6" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">æ€»ç»“:</h1><p id="4cb9" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">åœ¨æˆ‘çœ‹æ¥ï¼Œtenacityå°†å¾ˆå¿«æˆä¸ºé‡è¯•çš„åŒä¹‰è¯åº“ï¼Œå› ä¸ºé‡è¯•ä¸å†è¢«ç»´æŠ¤ã€‚è¯è™½å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå°†<code class="du lc ld le lf b">retry</code>ä½œä¸ºpythonæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œæˆ‘ä¸ç¡®å®šæˆ‘ä»¬æ˜¯å¦æœ‰åƒ<code class="du lc ld le lf b">tenacity</code>ä¸­é‚£æ ·å¤šçš„å‚æ•°ã€‚é™¤äº†ä¸Šé¢æåˆ°çš„åŠŸèƒ½ï¼Œ<code class="du lc ld le lf b">tenacity</code>è¿˜æä¾›</p><p id="b320" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒå‚è€ƒæ–‡çŒ®éƒ¨åˆ†æä¾›çš„æ–‡æ¡£ã€‚</p><p id="da0b" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated">ä¸‹æ¬¡å¦‚æœä½ æ­£åœ¨ä¸ºä½ çš„ä»£ç å®ç°ä¸€ä¸ª<code class="du lc ld le lf b">retry</code>,æˆ‘å»ºè®®ä½ è¯•è¯•tenacityã€‚</p><h1 id="d24c" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">å‚è€ƒèµ„æ–™:</h1><ul class=""><li id="186d" class="mq mr hi ki b kj kk km kn kp ms kt mt kx mu lb mv mw mx my bi translated"><a class="ae jn" href="https://tenacity.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">https://tenacity.readthedocs.io/en/latest/</a></li><li id="872e" class="mq mr hi ki b kj mz km na kp nb kt nc kx nd lb mv mw mx my bi translated"><a class="ae jn" href="https://pypi.org/project/tenacity/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/tenacity/</a></li></ul></div><div class="ab cl ne nf gp ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="hb hc hd he hf"><p id="4e57" class="pw-post-body-paragraph kg kh hi ki b kj lg ij kl km lh im ko kp li kr ks kt lj kv kw kx lk kz la lb hb bi translated"><em class="mm">åŸè½½äº2022å¹´6æœˆ29æ—¥https://dock2learn.com</em><a class="ae jn" href="https://dock2learn.com/tech/implement-retries-using-tenacity-in-python/" rel="noopener ugc nofollow" target="_blank"><em class="mm"/></a><em class="mm">ã€‚</em></p></div></div>    
</body>
</html>