<html>
<head>
<title>TryHackMe: Basic Pentesting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TryHackMe:基本测试</h1>
<blockquote>原文：<a href="https://medium.com/codex/tryhackme-basic-pentesting-8798f8fc096e?source=collection_archive---------9-----------------------#2022-11-24">https://medium.com/codex/tryhackme-basic-pentesting-8798f8fc096e?source=collection_archive---------9-----------------------#2022-11-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/dbe122f4b5ade1c66419dbbe4e8d2566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bHkv2Jvxnh8yN7w8VmnBVg.png"/></div></div></figure><p id="77a4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">基本测试是一个简单的测试工具。在这个房间里，我们将对SMB进行简单的列举，然后对不同的服务或密钥进行一系列暴力攻击。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="9a1b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">像往常一样，在TryHackMe中，我们必须连接到VPN或使用攻击箱。我会选择VPN。我们按下启动机器按钮，一分钟后，他们给我们显示IP地址。现在，我们继续使用Nmap进行初始识别:</p><pre class="jv jw jx jy fd jz ka kb bn kc kd bi"><span id="19ed" class="ke kf hi ka b be kg kh l ki kj">nmap -p- -sV -Pn $IP</span></pre><p id="b44e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">带连字符的-p参数表示扫描所有端口,-sV参数表示对使用的版本进行指纹识别，而-Pn参数表示扫描机器，即使它不响应ping。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kk"><img src="../Images/378fb25c763d7aebe6013a08178973df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EbrHMg0RlJZ0Y1QRER3PWg.png"/></div></div></figure><p id="bb6d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以看到该机器如何在非标准端口上公开几个服务，如SMB和web服务。我们应该使用这些协议测试枚举方法，并检查已知漏洞的版本。</p><p id="5bde" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> SMB枚举</strong></p><p id="1026" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">关于SMB服务，我们只能看到默认共享，对它们没有任何访问权限。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kl"><img src="../Images/b57738e43244307e6e124e05857c51ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HIR7Uyr0YFmBnOBSsfpxWg.png"/></div></div></figure><p id="f3c2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">但是使用enum4linux工具，我们通过使用SID循环的空会话发现了两个非标准用户。</p><pre class="jv jw jx jy fd jz ka kb bn kc kd bi"><span id="28c6" class="ke kf hi ka b be kg kh l ki kj">enum4linux -a $IP</span></pre><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es km"><img src="../Images/69d6206e327eed1c440a9591e2e0cb20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGjzReRJZ2uFMT_mDmjGHA.png"/></div></div></figure><p id="99bd" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">蛛网枚举</strong></p><p id="972f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们可以在端口80上看到维护中消息:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es kn"><img src="../Images/de60233bb89744d6e1071c62e5c6929d.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*iT3nOXsECDZ8bgiYnGRRYw.png"/></div></figure><p id="b39b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们还可以看到一个Tomcat暴露在端口8080上:</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ko"><img src="../Images/8224748c30b04d0b10346cdf1539ab1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2dG9dmDx0C1wK2qnXeZXA.png"/></div></div></figure><p id="2592" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">对模糊文件进行测试时，我们发现了一个可能包含敏感信息的未列出的端点。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kp"><img src="../Images/145e2e8814025c27ea2a6376ffa86c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_I5hr0C10xjGnEjMVIocA.png"/></div></div></figure><p id="623c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我们通过目录列表在目录中找到了几个文件。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es kq"><img src="../Images/ff6ede26ea2afdb002d13c85f14af87e.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*837dp77mu2vcT8YNkPlbWQ.png"/></div></figure><p id="7c85" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在文件中，我们可以找到以J身份签名的用户的系统密码较弱的引用。</p><p id="1bc3" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">宋承宪暴力</strong></p><p id="905a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">根据我们掌握的信息，下一步似乎是通过SSH对用户Jan进行暴力攻击。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kr"><img src="../Images/3c410c9a99c034de869c381713b8a351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QbA_pMJJhbaLMw6ymwFs8A.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">卑鄙的暴行</figcaption></figure><p id="5a69" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">权限提升</strong></p><p id="c08a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">通过使用用户Jan进行访问，我们可以读取RSA密钥，以便使用用户Kay通过SSH进行访问。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/43a8984b080f8954eff83b3a4a2828c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hESZWyI7HSVOlIU3P0m5CA.png"/></div></div></figure><p id="b5e5" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这个密钥被加密了，所以我们可以尝试通过对相应的散列进行暴力破解来获得id_rsa的密钥。</p><pre class="jv jw jx jy fd jz ka kb bn kc kd bi"><span id="7fd2" class="ke kf hi ka b be kg kh l ki kj">python3 ssh2john.py id_rsa &gt; hash</span></pre><figure class="jv jw jx jy fd ij er es paragraph-image"><div class="er es kx"><img src="../Images/2371d817a6a56fc4a9a9222c369b544c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*st6jKQyjcI4lYXg0NsAWgA.png"/></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">又是暴力</figcaption></figure><p id="be7f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">一旦我们有了密码，我们就可以使用SSH服务的RSA密钥以用户Kay的身份登录。</p><figure class="jv jw jx jy fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ky"><img src="../Images/53c0bf5004053a03f881be669376c3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hPGfSHbzqs8to5C_TadLHA.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx translated">我们现在已经完成了房间！</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="07bc" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">我希望你喜欢我的文章，并发现我的内容有用。下一篇文章再见。</p></div></div>    
</body>
</html>