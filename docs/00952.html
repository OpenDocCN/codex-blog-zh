<html>
<head>
<title>Creating a Literate Config for Spacemacs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为航天飞机创建一个有文化的配置</h1>
<blockquote>原文：<a href="https://medium.com/codex/creating-a-literate-config-for-spacemacs-b0bab798de9b?source=collection_archive---------24-----------------------#2021-03-26">https://medium.com/codex/creating-a-literate-config-for-spacemacs-b0bab798de9b?source=collection_archive---------24-----------------------#2021-03-26</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="80d3" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">创建和正确加载组织模式文件作为Spacemacs读写配置的指南</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/6c81b844ff66ceaf9b782adfd1a693fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnbE8EkGPznKuogmcVNz1g.jpeg"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@nhoizey" rel="noopener ugc nofollow" target="_blank">尼古拉斯·霍伊泽</a>在<a class="ae jn" href="https://unsplash.com/photos/sOgCGNT3xks" rel="noopener ugc nofollow" target="_blank">未喷涂</a>上拍摄</figcaption></figure><h1 id="3557" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">为什么要创建“识字配置”？</h1><p id="7e5f" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">在之前的<a class="ae jn" href="https://www.olavpedersen.com/2021/03/literate-programming-reproducible-research-and-clean-code-docstrings/" rel="noopener ugc nofollow" target="_blank">帖子</a>中，我解释了<em class="lc">识字编程</em>的概念和起源。<em class="lc">识字配置</em>只是将识字编程概念应用于配置文件。这对于配置文件非常有用，因为配置文件通常需要更多关于设置的上下文，以及为什么您选择以特定的方式做某事。有时，这可能包括指向您找到配置设置或“工作进行中”设置的位置的链接。有文化的配置有用的另一个原因是因为配置文件不需要每天修改。当跳回到您的配置来修复、添加或修改一个特性时，有一个简短的解释来快速跟上您的进度可能是有用的。</p><p id="f2a7" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这篇文章的目标是为<a class="ae jn" href="https://www.spacemacs.org" rel="noopener ugc nofollow" target="_blank">太空飞行器</a>创建一个有文化的配置。这是一个对Emacs 进行了大量修改的发行版。这主要是因为我自己也使用Spacemacs，并发现为它提供一个有文化的配置非常有用。识字配置本身是一个<code class="du li lj lk ll b">.org</code>文件，其中编织的代码在代码块中定义。使用<a class="ae jn" href="https://orgmode.org" rel="noopener ugc nofollow" target="_blank"> org-mode </a>标题也使得导航您的配置文件更加容易。从读写配置中提取文件代码，或<em class="lc">缠结</em>读写配置，将产生一个<code class="du li lj lk ll b">elisp</code>文件。</p><p id="ef9c" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">Spacemacs也非常适合一个有文化的配置，因为它默认加载一个单一的<code class="du li lj lk ll b">.spacemacs</code>文件，随着它越来越多地占据你的生活，它往往会稳步增长。在写这篇文章的时候，我当前的配置(代码)有1500行长。</p><h1 id="de0f" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">正确加载Spacemacs读写配置</h1><p id="7836" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">当我试图创建一个有文化的Spacemacs配置时，有几个有用的链接来弄清楚如何从一个<code class="du li lj lk ll b">.org</code>文件中<em class="lc">纠结</em>并生成输出文件。我努力找出加载文件本身的最佳方式。您的Spacemacs配置有两个默认位置<a class="ae jn" href="https://develop.spacemacs.org/doc/QUICK%5FSTART.html" rel="noopener ugc nofollow" target="_blank">和以下加载优先级:</a></p><ol class=""><li id="b9ae" class="lm ln hi ki b kj ld km le kp lo kt lp kx lq lb lr ls lt lu bi translated"><code class="du li lj lk ll b">~/.spacemacs</code>:主目录中的单个点文件</li><li id="09f7" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb lr ls lt lu bi translated"><code class="du li lj lk ll b">~/.spacemacs.d/init.el</code>:主目录下的一个点文件目录</li></ol><p id="0a0e" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">对于一个有文化的配置，我们需要多个文件，因此我发现使用第二个选项并创建一个<code class="du li lj lk ll b">~/.spacemacs.d</code>目录会更有序。</p><p id="78e6" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">最初，创建一个<code class="du li lj lk ll b">spacemacs.org</code>读写配置文件，而<em class="lc">将</em>直接绑定到<code class="du li lj lk ll b">.spacemacs</code>或<code class="du li lj lk ll b">init.el</code>文件似乎是有意义的。可以这样做，但是Spacemacs在下面的函数中在<code class="du li lj lk ll b">init.el</code>(或<code class="du li lj lk ll b">~/.spacemacs</code>)文件的末尾添加了自定义内容:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="ae7c" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">这是Emacs存储运行时生成的<code class="du li lj lk ll b">custom-set-variables</code>和<code class="du li lj lk ll b">custom-set-faces</code>的地方。如果我们将<em class="lc">我们的文字配置文件直接与<code class="du li lj lk ll b">init.el</code>文件纠缠在一起，它会在每次生成时覆盖这个函数和变量。因此，可将读写配置<em class="lc">纠结</em>到中间文件，例如<code class="du li lj lk ll b">spacemacs.el</code>，然后<code class="du li lj lk ll b">init.el</code>文件可加载其内容:</em></p><ul class=""><li id="77ba" class="lm ln hi ki b kj ld km le kp lo kt lp kx lq lb mc ls lt lu bi translated"><code class="du li lj lk ll b">spacemacs.org</code>:读写配置文件</li><li id="7bbe" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated"><code class="du li lj lk ll b">spacemacs.el</code>:纠结的配置文件</li><li id="ad86" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated"><code class="du li lj lk ll b">init.el</code>:space Macs加载为默认配置文件的文件。</li></ul><p id="e47b" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">图<a class="ae jn" href="https://www.olavpedersen.com/2021/03/creating-a-literate-spacemacs.org-config/#orgb857022" rel="noopener ugc nofollow" target="_blank"> 1 </a>显示了其工作原理。</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es md"><img src="../Images/b8c6b2b9db572f11bf505a717705c551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f1ND8KtlAXrAr6bO.png"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">图1:如何为spacemacs创建一个不覆盖Spacemacs自动生成的设置的文字配置的概念概述。创作于克里塔。</figcaption></figure><h2 id="d30f" class="me jp hi bd jq mf mg mh ju mi mj mk jy kp ml mm ka kt mn mo kc kx mp mq ke mr bi translated">“spacemacs.org”文件</h2><p id="f036" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这是识字配置文件本身。当创建它时，你必须确保你的配置文件的每一部分都被复制到代码片段中。下面是我的配置文件的开始。这些设置中的大部分对于生成配置文件并不是特别重要，但是到目前为止对我很有用。</p><pre class="iy iz ja jb fd ms ll mt mu aw mv bi"><span id="1233" class="me jp hi ll b fi mw mx l my mz">#+TITLE: Spacemacs Literate User Configuration <br/>#+STARTUP: headlines <br/>#+STARTUP: nohideblocks <br/>#+STARTUP: noindent <br/>#+OPTIONS: toc:4 h:4 #+PROPERTY: header-args:emacs-lisp :comments link</span></pre><p id="8159" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">下面是我的配置中的一个代码块示例。重要的部分是配置在代码块中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="b3b1" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">什么定义了代码块:</p><pre class="iy iz ja jb fd ms ll mt mu aw mv bi"><span id="dc4d" class="me jp hi ll b fi mw mx l my mz">#+BEGIN_SRC emacs-lisp :tangle spacemacs.el <br/>   // Code here //<br/>#+END_SRC</span></pre><p id="8e26" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated"><code class="du li lj lk ll b">emacs-lisp</code>选项表明代码块是用什么语言编写的。当文件纠结时，<code class="du li lj lk ll b">:tangle spacemacs.el</code>将输出目标文件设置为<code class="du li lj lk ll b">spacemacs.el</code>。我完整的<code class="du li lj lk ll b">spacemacs.org</code>，包括它所有的缺点，可以在github上我的<a class="ae jn" href="https://github.com/olavpe/dotfiles/blob/BigArch/spacemacs/.spacemacs.d/spacemacs.org" rel="noopener ugc nofollow" target="_blank">点文件</a>库中找到。</p><h2 id="d2a4" class="me jp hi bd jq mf mg mh ju mi mj mk jy kp ml mm ka kt mn mo kc kx mp mq ke mr bi translated">“spacemacs.el”文件</h2><p id="5f57" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">为了生成复杂的文件<code class="du li lj lk ll b">spacmacs.el</code>，函数<code class="du li lj lk ll b">org-bable-tangle()</code>必须在读写配置上运行。为了在每次保存文件时运行该功能，可将以下“局部变量”添加到<code class="du li lj lk ll b">spacmacs.org</code>的底部。这将为<code class="du li lj lk ll b">after-save-hook</code>添加一个功能。一个<a class="ae jn" href="https://www.gnu.org/software/emacs/manual/html%5Fnode/emacs/Hooks.html" rel="noopener ugc nofollow" target="_blank">钩子</a>是一个变量，它保存一个特定时间的函数列表。</p><pre class="iy iz ja jb fd ms ll mt mu aw mv bi"><span id="9ec4" class="me jp hi ll b fi mw mx l my mz">* Local Variables :ARCHIVE: <br/># Local Variables: <br/># eval: (add-hook 'after-save-hook (lambda ()(org-babel-tangle)) nil t) <br/># End:</span></pre><h2 id="dedf" class="me jp hi bd jq mf mg mh ju mi mj mk jy kp ml mm ka kt mn mo kc kx mp mq ke mr bi translated">“init.el”文件</h2><p id="9d84" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">这是Spacemacs作为配置加载的文件。您只需将下面一行添加到文件中。</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><p id="c700" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated">然后Spacemacs应该会加载您的配置，您应该可以启动并运行了！随着您继续使用Spacemacs，它将填充<code class="du li lj lk ll b">init.el</code>文件:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="ma mb l"/></div></figure><h1 id="7e4d" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">就是这样！</h1><p id="62cc" class="pw-post-body-paragraph kg kh hi ki b kj kk ij kl km kn im ko kp kq kr ks kt ku kv kw kx ky kz la lb hb bi translated">现在当你改变你的<code class="du li lj lk ll b">spacemacs.org</code>文件并把输出纠结到<code class="du li lj lk ll b">spacemacs.el</code>时，它不会覆盖<code class="du li lj lk ll b">init.el</code>中Spacemacs生成的变量。这并不复杂，但我希望这能帮助那些刚刚接触<code class="du li lj lk ll b">org-babel</code>或Spacemacs的人。</p><h1 id="0caf" class="jo jp hi bd jq jr js jt ju jv jw jx jy io jz ip ka ir kb is kc iu kd iv ke kf bi translated">资源</h1><ul class=""><li id="e112" class="lm ln hi ki b kj kk km kn kp na kt nb kx nc lb mc ls lt lu bi translated"><strong class="ki hj">关于识字编程的帖子</strong>:<a class="ae jn" href="https://olavpe.medium.com/literate-programming-reproducible-research-and-clean-code-docstrings-accf1a9f6661" rel="noopener"/><a class="ae jn" href="https://olavpe.medium.com/literate-programming-reproducible-research-and-clean-code-docstrings-accf1a9f6661" rel="noopener">https://olavpe . medium . com/Literate-Programming-reproducible-research-and-clean-code-doc strings-accf 1a 9 f 6661</a></li><li id="0873" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated">太空飞船:【https://www.spacemacs.org T2】</li><li id="d7bf" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated">https://www.gnu.org/software/emacs/:<strong class="ki hj"/><a class="ae jn" href="https://www.gnu.org/software/emacs/" rel="noopener ugc nofollow" target="_blank">T4</a></li><li id="acdc" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated"><strong class="ki hj">组织模式</strong>:<strong class="ki hj"/><a class="ae jn" href="https://orgmode.org" rel="noopener ugc nofollow" target="_blank">https://orgmode.org</a></li><li id="6fb1" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated"><strong class="ki hj"> Spacemacs默认装载位置</strong>:<a class="ae jn" href="https://develop.spacemacs.org/doc/QUICK_START.html" rel="noopener ugc nofollow" target="_blank">https://develop.spacemacs.org/doc/QUICK_START.html</a></li><li id="3273" class="lm ln hi ki b kj lv km lw kp lx kt ly kx lz lb mc ls lt lu bi translated"><strong class="ki hj"> Emacs钩子</strong>:<a class="ae jn" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Hooks.html" rel="noopener ugc nofollow" target="_blank">https://www . GNU . org/software/Emacs/manual/html _ node/Emacs/Hooks . html</a></li></ul></div><div class="ab cl nd ne gp nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="hb hc hd he hf"><p id="6c15" class="pw-post-body-paragraph kg kh hi ki b kj ld ij kl km le im ko kp lf kr ks kt lg kv kw kx lh kz la lb hb bi translated"><em class="lc">原载于2021年3月26日https://www.olavpedersen.com</em><a class="ae jn" href="https://www.olavpedersen.com/2021/03/creating-a-literate-spacemacs.org-config/" rel="noopener ugc nofollow" target="_blank"><em class="lc"/></a><em class="lc">。</em></p></div></div>    
</body>
</html>