<html>
<head>
<title>Data Pipeline Architecture: a variety of ways you can build your Data Pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据管道架构:构建数据管道的多种方式</h1>
<blockquote>原文：<a href="https://medium.com/codex/data-pipeline-architecture-variety-of-ways-you-can-build-your-data-pipeline-66b3dd456df1?source=collection_archive---------1-----------------------#2022-08-30">https://medium.com/codex/data-pipeline-architecture-variety-of-ways-you-can-build-your-data-pipeline-66b3dd456df1?source=collection_archive---------1-----------------------#2022-08-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><h2 id="cd23" class="hg hh hi bd b fp hj hk hl hm hn ho dx hp translated" aria-label="kicker paragraph">数据工程101:</h2><div class=""/><div class=""><h2 id="99e5" class="pw-subtitle-paragraph io hr hi bd b ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf dx translated">数据工程:超越宣传#2</h2></div><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jg"><img src="../Images/3d7ca2f818a42f7f5e4b3c1a57330b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4gWUN9-X4jzMVpgQsLi8Q.jpeg"/></div></div></figure><p id="0de3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">数据管道是数据生命周期管理的主要构件。</p><p id="96b4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><a class="ae ko" rel="noopener" href="/codex/how-to-become-a-data-engineer-905686dee7ce">数据工程师</a>将80%的时间花在数据管道、设计开发和解决问题上。</p><p id="8972" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因为这对任何数据工程工作负载都非常重要，所以让我们尝试更深入地研究所有不同的架构，以构建数据管道。</p><p id="9612" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">重述</strong></p><p id="fe0a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在上一集<a class="ae ko" rel="noopener" href="/codex/7-best-practices-for-data-ingestion-f336c6b5128c">中</a>，我们学习了什么是数据工程，以及什么是数据摄取的最佳实践。</p><p id="8728" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们讨论了用于数据处理的批处理、流和lambda架构。</p><p id="ba2f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">我们讨论了<a class="ae ko" rel="noopener" href="/codex/7-best-practices-for-data-ingestion-f336c6b5128c"> <strong class="ju hs">数据摄取</strong> </a>的7个最佳实践。</p><p id="e9a1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在这一集里，我们将整体谈论<strong class="ju hs">数据管道</strong>。</p><p id="7a6c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">为何选择数据管道:</strong></p><p id="26de" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">管道是用来把东西从一点转移到另一点的。</p><p id="e0c9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然而，数据管道做得更多。</p><p id="44f8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">数据管道是收集原始数据并将其转换为可操作的见解或业务信息的一系列步骤。</p><p id="6d70" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">但是我们为什么需要数据管道呢？</strong></p><p id="ee94" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">大型企业中的源系统非常多样。例如，一家大型企业可能从1。不同的交易系统，2。社交媒体，3。文件4。视频5。ERP系统。营销系统，例如轮毂点7。第三方分析平台，如谷歌分析。</p><p id="673e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">因此，来自这些系统的原始数据可能有不同的协议和不同的结构。试图将它们标准化以便分析是极其复杂的。</p><p id="d5bf" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">数据管道用于将不同来源的所有数据收集到一个统一的系统中。</p><p id="a65a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">一旦数据得到统一，数据管道也有助于数据标准化，删除无效数据，净化数据，并根据后续的下游需求执行聚合和转换。</p><p id="8ac6" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">数据管道的类型</strong></p><p id="2571" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">数据管道分类可以基于不同的参数来完成。然而，让我们考虑基于时间表、数据新鲜度和数据处理架构的不同类型。</p><ul class=""><li id="5904" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ku kv kw kx bi translated"><strong class="ju hs">批处理</strong>:数据流水线按特定的时间间隔进行调度。对于每日仪表板或定期报告非常有用。数据新鲜度低。</li><li id="7ac6" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ku kv kw kx bi translated"><strong class="ju hs">流处理</strong>:数据流水线在数据流动时连续执行。当事件时间和处理时间之间的差异需要最小化时使用，例如，跟踪异常、欺诈、动态定价等。数据是新的，但往往不准确。</li><li id="670f" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ku kv kw kx bi translated"><strong class="ju hs">批处理+流处理</strong>:将长时间运行的批处理模型与流分析相结合。数据仍然是新的，并且通过使用批处理的输出消除了不一致。</li></ul><p id="ec55" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">数据管道的主要组成部分是什么？</strong></p><ol class=""><li id="9278" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">来源</li><li id="969a" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">目标/接收器</li><li id="daf3" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">数据和业务逻辑的转换</li><li id="6ad3" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">数据质量验证</li></ol><p id="170f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">可以有更多的组件，例如:数据建模，数据可视化，但是，这4个是基本的构建模块。</p><p id="c074" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">那么在ETL中如何使用这些构建块来解决不同的用例呢？</p><h2 id="e41a" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">原始数据加载</h2><p id="b10a" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">顾名思义，这些管道用于传输原始格式的数据。数据不变。仅涉及提取和加载，不应用任何转换。这些通常只运行一次，或者每天按照特定的计划运行。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es md"><img src="../Images/61bf2651d6d7e374252a9152f51f0564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QFZ2DunHGe5vme28bAz_tw.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><a class="ae ko" href="https://www.linkedin.com/in/saikatdt/" rel="noopener ugc nofollow" target="_blank">图片来源:作者</a></figcaption></figure><p id="1dc4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="f430" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">从一个数据库到数据湖的数据移动，从本地数据存储到云上的对象存储。</li><li id="dff1" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">数据通常以压缩的开放文件格式加载，如Parque/ORC/Deltalke/Iceberg等。因此，Datalake中占用的存储空间较少。</li><li id="dc1e" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">有助于使数据转换管道幂等。《出埃及记》即使后续的数据转换管道在一天中运行多次或重新运行，它们也会产生相同的数据。</li><li id="4f79" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">有助于调试源数据问题，而无需多次引用源数据。</li><li id="4cba" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">适合数据湖工作负载，并且大多仅在云上。</li></ol><p id="1b46" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">缺点:</strong></p><ol class=""><li id="fb0d" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">在另一层复制数据。</li><li id="4876" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">不适合本地数据仓库工作负载。</li></ol><p id="04ac" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">提取转换负载(ETL ) : </strong></p><p id="65b5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">提取-转换-加载(ETL)是最广泛使用的数据管道模式。从20世纪90年代早期开始，将数据集成到数据仓库中就成了标准。</p><p id="8bc8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">从运营数据存储中提取数据，然后根据业务需求进行统一、清理和转换。数据也被建模以复制真实世界的实体。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mi"><img src="../Images/aca7f043143ab50948300571873ffb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDJtKp3DSntoo6F2FCtO5A.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><a class="ae ko" href="https://www.linkedin.com/in/saikatdt/" rel="noopener ugc nofollow" target="_blank">图片来源:作者</a></figcaption></figure><p id="9e63" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">《出埃及记》贷款申请数据来自贷款发放平台，贷款支付、交易来自应收贷款平台，信贷和其他第三方数据来自平面文件和数据馈送。</p><p id="3569" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">所有这些数据然后被分离以形成贷款事实、贷款交易事实、贷款支付事实、与贷款相关的不同维度表等。</p><p id="7d62" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="8ca5" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">适合数据仓库工作负载。</li><li id="42da" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">当需要复杂的数据转换时工作良好。</li><li id="8b60" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">由于不需要冗余的原始数据层，因此仅产生一个副本<strong class="ju hs"><em class="mj"/></strong>。</li><li id="2568" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">如果所有的源没有同时准备好，ETL会很有用。只有当所有数据都可用时，转换才会发生。</li></ol><p id="a5c2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">缺点:</p><ol class=""><li id="7d7f" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">非常耗时并且具有高延迟。可以进行微批处理，但延迟仍然是不可避免的。</li></ol><p id="757a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">2.复杂转换需要高计算能力。</p><p id="7b40" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">3.由于1和2，大数据不实用。</p><p id="bce5" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">4.您经常有ETL工具和数据仓库提供者的供应商锁定。</p><p id="cb3d" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">提取负载转换(ELT ): </strong></p><p id="1d3b" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">随着数据量的增加，提取-加载-转换作为ETL的替代变得流行起来。等待所有转换工作完成会延迟业务数据的可用性。因此，数据在提取后会立即加载。AI/ML处理可以在没有数据建模的情况下发生。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mi"><img src="../Images/8840113329c03338582c8dba5a02b70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vRtji3lIoFTTiXsDZ2UFsQ.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><a class="ae ko" href="https://www.linkedin.com/in/saikatdt/" rel="noopener ugc nofollow" target="_blank">图片来源:作者</a></figcaption></figure><p id="7c77" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="e511" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">合适的数据湖实现</li><li id="5f0c" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">减少延迟，因为数据可以更快地用于处理。</li><li id="c487" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">可以加载各种数据结构、指令等。</li></ol><p id="7ff2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">缺点:</strong></p><ol class=""><li id="bcb4" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">不同层中数据的重复增加。结果在<strong class="ju hs"> <em class="mj">两个+拷贝</em> </strong>(原始和变换层/可选服务层)</li></ol><p id="095f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">2.数据质量受到影响，数据未经重复数据消除和清理就暴露出来。</p><p id="028a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">3.通常会造成数据沼泽。</p><p id="b3cd" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">4.人们经常忘记或忽略T-变换。</p><p id="4a27" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">提取转换加载转换(ETLT ): </strong></p><p id="c6fe" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">提取-转换-加载-转换(ETLT)模式是ETL和ELT的混合。转换的第一阶段是光转换，独立于所有其他数据源。数据清理、格式标准化和敏感数据屏蔽是第一阶段光转换的典型类型。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es mi"><img src="../Images/d622cc983c02ba1a5bd18af951b64f5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*524rR4kUXkNXYBG0bduAIQ.png"/></div></div></figure><p id="ddbd" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="c488" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">提取数据时进行较小的转换、数据清理和过滤。</li><li id="a4b5" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">非常实用的流水线设计，通过屏蔽解决了数据隐私问题。</li><li id="8508" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">由于最初进行了一些过滤或转换，数据变成沼泽的机会就少了。</li><li id="74f8" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">启用湖边小屋架构。</li></ol><p id="3844" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">缺点:</strong></p><ol class=""><li id="b8bc" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">仍然受到处理能力和延迟的限制。</li><li id="2071" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">仍然生成<strong class="ju hs">两个副本。</strong></li></ol></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="2c8f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">ELT/ETL和数据湖或数据仓库的所有变化都受到以下因素的限制</p><ol class=""><li id="ec6c" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">集中式数据团队</li><li id="3ab9" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">增加调配新数据源的时间</li><li id="5909" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">较低的灵活性服务于不同的部门和用例(ML/AI/Marketing/Sales/HR等。)</li></ol><p id="ec52" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">数据网格和数据结构体系结构是基于集中式处理的数据湖/数据仓库/湖库的现代替代方案。数据网格/结构的关键促成因素是数据虚拟化和专用链路。</p><h2 id="5997" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">数据虚拟化:</h2><p id="974b" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">如图6所示，数据虚拟化为数据管道提供不同于其他模式的服务。大多数管道创建数据的物理副本。</p><p id="308e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">虚拟化以视图的形式提供数据，而无需物理存储单独的版本。</p><p id="b7b4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">虚拟化与数据抽象层一起工作。源层是最不抽象的。集成层组合和连接来自不同来源的数据，提供类似于ETL处理的转换结果的视图。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mr"><img src="../Images/68af7b79d3983dc0c4e64b7f1c67e782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*_jCNndiwH1YjHQrU"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated"><a class="ae ko" href="https://www.eckerson.com/articles/data-pipeline-design-patterns#:~:text=Subscribe%20to%20the%20Data%20Management,translate%20directly%20into%20executable%20code." rel="noopener ugc nofollow" target="_blank">数据虚拟化</a></figcaption></figure><p id="90a1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">业务层用语义上下文表示数据，应用层为特定用例构建语义视图。</p><ol class=""><li id="3b92" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">与ETL处理不同，虚拟化过程是由查询启动的。</li><li id="7eba" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">查询在应用程序和语义上下文中发出，并通过集成层和源层进行转换，以连接正确的数据源。</li><li id="6866" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">响应以相反的方向遍历路径，以获取源数据、转换和集成、呈现语义视图，并交付数据的应用程序视图。</li></ol><p id="0fe2" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="92bc" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">当人们想要尽可能最新的数据时，虚拟化可以很好地工作。</li><li id="4767" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">虚拟化仅集成和转换请求和使用的数据</li><li id="5e22" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">零拷贝架构，无数据复制。</li></ol><p id="938c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">缺点:</strong></p><ol class=""><li id="cf6c" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">仅适用于适度的数据量</li><li id="18fb" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">可能难以处理复杂的转换或大量数据。</li></ol><h2 id="41b1" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">数据流处理</h2><p id="0f5f" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">低延迟ETL的最佳选择是数据流处理。</p><p id="b239" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">数据流处理包括数据流源，例如。传感器和IOT设备的日志、位置和来自物流中移动车辆的行程数据等。</p><p id="97c4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">流处理包括过滤和转换连续的数据流。</p><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es ms"><img src="../Images/09f5d4bd0c3a78d3c5af692c0460e893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/0*xQqXZOkng5zbXs3l"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">数据流处理(<a class="ae ko" href="https://www.eckerson.com/articles/data-pipeline-design-patterns#:~:text=Subscribe%20to%20the%20Data%20Management,translate%20directly%20into%20executable%20code." rel="noopener ugc nofollow" target="_blank">源</a>)</figcaption></figure><p id="3032" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">处理从解析事件开始，将每个独特的事件隔离为不同的记录，并且只有与用例相关的事件被进一步处理。</p><p id="4e6c" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在数据流的目的端，出现了两种不同的模式。</p><p id="3ce1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">对于某些用例，事件被发布到消息队列、事件日志或事件档案中。一旦发布或存储，下游数据管道稍后进行数据消费。</p><p id="1689" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">对于其他用例，事件被<em class="mj">推送到</em>监控或警告应用程序。《出埃及记》货运公司实时异常、基于需求的动态定价等。</p><p id="967a" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="fffb" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">流处理管道与传感器和物联网(IoT)设备一起工作。</li><li id="f5b1" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">这种模式对于机器学习特别有用。</li><li id="2bd1" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">对日志分析有用</li><li id="dbf9" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">数据新鲜度高</li></ol><p id="5489" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">缺点:</strong></p><ol class=""><li id="cb33" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">在没有Lambda架构的情况下，数据精度不高。</li></ol><h2 id="fbb7" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">变更数据捕获</h2><p id="962a" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">CDC和OLAP用例可以解决数据延迟问题。CDC允许新数据可用于ETL管道中的处理。</p><p id="ec9e" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">CDC应用主要有两种类型:</p><ol class=""><li id="bbdb" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">基于交易日期</li><li id="ac65" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">基于数据库日志</li><li id="9a00" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">基于触发器的</li><li id="146a" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">基于差分方法(Diff)</li></ol><figure class="jh ji jj jk fd jl er es paragraph-image"><div class="er es mr"><img src="../Images/d4b9a065af47fab8294f77190502bc10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*o8LBE2pvdvli0owm"/></div><figcaption class="me mf et er es mg mh bd b be z dx translated">更改数据捕获(<a class="ae ko" href="https://www.eckerson.com/articles/data-pipeline-design-patterns#:~:text=Subscribe%20to%20the%20Data%20Management,translate%20directly%20into%20executable%20code." rel="noopener ugc nofollow" target="_blank">源</a>)</figcaption></figure><p id="43fe" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">优点:</strong></p><ol class=""><li id="e46d" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">降低数据仓库工作负载的延迟。</li><li id="57f9" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">提高数据新鲜度，接近实时或微批量ETL。</li></ol><p id="8d91" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated"><strong class="ju hs">缺点:</strong></p><ol class=""><li id="ed0d" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">复杂性增加。</li><li id="7a53" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">CDC应用程序会增加额外成本。</li></ol></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="ecc4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">既然我们已经介绍了不同类型和架构的管道，那么有几个通用的设计模式适用于几乎所有的处理技术。</p><h2 id="3388" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated"><strong class="ak">可重复且相同:</strong></h2><p id="63fe" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">重要的是ETL管道能够从固定的时间线重新运行，并产生相同的结果。</p><ol class=""><li id="1968" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">以一种不可变的方式存储数据，作为带有日期时间的事务列表。</li><li id="e366" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">这将允许计算是幂等的，并且不管是否回溯运行，都产生相同的结果。</li></ol><h2 id="005e" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated"><strong class="ak">自动化框架—模板化</strong></h2><p id="3077" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">使用编排工具/ Dags / corn jobs实现数据管道自动化极其重要。管道应该解析所有的依赖关系并独立运行。</p><p id="75d3" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">如果没有自动化，手动错误和延迟将加重工作人员的负担，并降低数据质量。</p><p id="4001" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">模板是不同数据管道的必备工具。这允许更快地提供新的资源，减少数据管道的开发和测试周期。</p><h2 id="bef7" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">可审计—(监控和记录)</h2><p id="6747" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">重要的是在任何时间点了解什么管道正在运行，什么成功完成，什么失败。如果出现任何故障，应进行清除记录。</p><p id="8fb8" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这将大大减少调试和错误处理的时间和工作量。</p><p id="1d91" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这还应该考虑到数据可观测性和数据沿袭，以允许每个人看到通过哪些管道应用了什么转换。</p><h2 id="9741" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">可靠和安全(数据验证和质量保证)</h2><p id="3955" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">数据质量是验证数据管道结果的一个关键参数。管道的设计应确保输出可靠，并实现最高的数据质量。</p><p id="5594" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">必须在源和目标中都进行DQ检查，并且必须配置警报。</p><p id="54b4" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">这将建立利益相关者使用数据进行下游报告的信心。</p><h2 id="3525" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated">结论:</h2><p id="5689" class="pw-post-body-paragraph js jt hi ju b jv ly is jx jy lz iv ka kb ma kd ke kf mb kh ki kj mc kl km kn hb bi translated">这可能是一篇博客中涵盖的数据管道架构的极其详尽的列表。我将在以后的另一篇文章中讨论其中一些的实际实现。</p><p id="c6d9" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">对于初学者来说，这似乎太多了。因此，一定要慢慢来，一次写一篇，当你需要任何参考资料的时候再回到博客上来。</p><p id="a40f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">然而，这些是数据管道的基本构建结构，是工具不可知的。如果我们对每一个都建立了坚实的基础知识，并能够区分利弊，这将有助于我们在任何ETL/ELT/DI/编排工具中建立管道。</p><h2 id="67fd" class="le lf hi bd lg lh li lj lk ll lm ln lo kb lp lq lr kf ls lt lu kj lv lw lx ho bi translated"><strong class="ak">参考文献和进一步研究:</strong></h2><ol class=""><li id="1d58" class="kp kq hi ju b jv ly jy lz kb mt kf mu kj mv kn ld kv kw kx bi translated"><a class="ae ko" href="https://www.denodo.com/en/data-virtualization/how-it-works" rel="noopener ugc nofollow" target="_blank"> <em class="mj">数据虚拟化——工作原理。</em> </a></li><li id="ff9a" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated"><a class="ae ko" href="https://www.eckerson.com/articles/data-pipeline-design-patterns#:~:text=Subscribe%20to%20the%20Data%20Management,translate%20directly%20into%20executable%20code." rel="noopener ugc nofollow" target="_blank"> <em class="mj">数据管道设计模式。</em>T9】</a></li></ol><p id="263f" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">3.<a class="ae ko" href="https://towardsdatascience.com/data-pipeline-design-principles-e7fbba070b4a" rel="noopener" target="_blank"> <em class="mj">《数据管道设计原则》</em> </a>作者:Kovid Rathee</p><p id="40d1" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">4.<em class="mj"/><a class="ae ko" href="https://blog.usebutton.com/3-design-principles-for-engineering-data" rel="noopener ugc nofollow" target="_blank"><em class="mj">3工程数据设计原则</em></a><em class="mj"/>作者<a class="ae ko" href="https://blog.usebutton.com/author/jiaqi-liu" rel="noopener ugc nofollow" target="_blank">刘嘉琦</a></p><p id="3e06" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">5.Terada的数据网格和数据虚拟化不是一回事。</p></div><div class="ab cl mk ml gp mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hb hc hd he hf"><p id="cada" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">下周再见。</p><p id="f900" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">无论何时你准备好了，我有3种方法可以帮助你的职业发展</p><ol class=""><li id="9b59" class="kp kq hi ju b jv jw jy jz kb kr kf ks kj kt kn ld kv kw kx bi translated">让我在这里 帮你辅导你的职业旅程<a class="ae ko" href="https://topmate.io/saikatdutta" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs">。</strong></a></li><li id="78ed" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">在此  <strong class="ju hs">下载详尽的数据工程路线图<a class="ae ko" href="https://withsaikatdt.gumroad.com/l/DE2022" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs">。</strong></a></strong></li><li id="6bbe" class="kp kq hi ju b jv ky jy kz kb la kf lb kj lc kn ld kv kw kx bi translated">发展你的LinkedIn品牌，在这里  <strong class="ju hs">获得多样化的<a class="ae ko" href="https://topmate.io/saikatdutta/35302" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs">。</strong></a></strong></li></ol><p id="68ce" class="pw-post-body-paragraph js jt hi ju b jv jw is jx jy jz iv ka kb kc kd ke kf kg kh ki kj kk kl km kn hb bi translated">在这里关注每周简讯<a class="ae ko" href="https://withsaikatdt.gumroad.com/l/DEBH101" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hs">。</strong>T47】</a></p></div></div>    
</body>
</html>