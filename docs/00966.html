<html>
<head>
<title>Practice Algorithms with Math Puzzles Part 3 Matrix Rotation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用数学智力题练习算法第三部分矩阵旋转</h1>
<blockquote>原文：<a href="https://medium.com/codex/practice-algorithms-with-math-puzzles-part-3-matrix-rotation-b853a8edb204?source=collection_archive---------13-----------------------#2021-03-27">https://medium.com/codex/practice-algorithms-with-math-puzzles-part-3-matrix-rotation-b853a8edb204?source=collection_archive---------13-----------------------#2021-03-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="20b1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你好，在这一部分我将解释2D矩阵的原地旋转，而不使用另一个矩阵来存储，所以我们只需改变原始矩阵。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/bce0f42cf75d5bcf0e88b2d37c2384cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-lwpt4XckPnjMC7jk_0iw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">卡拉·埃尔南德斯在<a class="ae jt" rel="noopener ugc nofollow" target="_blank" href="/s/photos/puzzle?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"> Unsplash </a>上的照片</figcaption></figure><p id="c93e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我将把旋转角度为90度的情况解释为地面情况，然后再谈其他情况，如-90度、180度、270度。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ju"><img src="../Images/1caea7e03e9babb5ddf2ee7dea3ab5c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*p5SJ--RhG6JL80AQMduapw.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片1</figcaption></figure><p id="0649" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如你所见，我们正在处理两个正方形，橙色和绿色。我们应该想办法把左边的橙色方块变成右边的。下面的算法对每个原地方块都这样做。</p><p id="5088" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果我们想就地做，那么我们的矩阵显然应该是平方的。</p><p id="ae7c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">正方形的数量是矩阵大小的一半。</p><pre class="je jf jg jh fd jv jw jx jy aw jz bi"><span id="e3d3" class="ka kb hi jw b fi kc kd l ke kf"><strong class="jw hj">def</strong><strong class="jw hj"> </strong><strong class="jw hj">rotate_matrix(M):</strong><br/><strong class="jw hj">    N=len(M)<br/>    </strong># Loop through all squares<strong class="jw hj"><br/></strong>    <strong class="jw hj">for</strong><strong class="jw hj"> i </strong><strong class="jw hj">in</strong><strong class="jw hj"> </strong><strong class="jw hj">range(0, int(N /</strong><strong class="jw hj"> </strong><strong class="jw hj">2)):</strong><br/>        # Consider elements in group of 4 in current square<br/><strong class="jw hj">        for</strong><strong class="jw hj"> j </strong><strong class="jw hj">in</strong><strong class="jw hj"> </strong><strong class="jw hj">range(x, N-i-1):<br/>            temp =</strong><strong class="jw hj"> M</strong><strong class="jw hj">[i][j]<br/>            M[i][j] =</strong><strong class="jw hj"> M</strong><strong class="jw hj">[N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">j][i]<br/>            M[N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">j][i] =</strong><strong class="jw hj"> M</strong><strong class="jw hj">[N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">i][N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">j]<br/>            M[N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">i][N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">j] =</strong><strong class="jw hj"> M</strong><strong class="jw hj">[j][N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">i]<br/>            M[j][N -</strong><strong class="jw hj"> </strong><strong class="jw hj">1</strong><strong class="jw hj"> </strong><strong class="jw hj">-</strong><strong class="jw hj"> </strong><strong class="jw hj">i] =</strong><strong class="jw hj"> </strong><strong class="jw hj">temp</strong></span></pre><p id="a7d3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了更好的理解，我在这里画了一个3x 3矩阵的算法内部发生了什么。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/e6ad78c1e0b13b687ff79bc9f2ee4aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jp3GRP59WO0M65gDdDrqhQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图片2</figcaption></figure><p id="01fe" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，由于我们索引矩阵以访问元素的方式，我们可以实现图2中的每个步骤。</p><p id="4c29" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">旋转-90度和270度的情况是相同的。对于-90度情况，我们使用类似于90度情况的算法:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/feb6a211a349e2c9cbd3ebe09eb10996.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*0XUDTgFgshqKoTksuDCZLA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图3</figcaption></figure><p id="18d2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在每个正方形的四个一组中互相替换元素的方式与我们做90度的方式相反，这反映在我们在内部循环中的索引中。</p><pre class="je jf jg jh fd jv jw jx jy aw jz bi"><span id="2533" class="ka kb hi jw b fi kc kd l ke kf"><strong class="jw hj">def</strong><strong class="jw hj"> </strong><strong class="jw hj">rotate_matrix(M):<br/>    N=len(M)<br/></strong>    # loop through all squares    <br/><strong class="jw hj">    for</strong><strong class="jw hj"> i </strong><strong class="jw hj">in</strong><strong class="jw hj"> </strong><strong class="jw hj">range(N //</strong><strong class="jw hj"> </strong><strong class="jw hj">2):<br/></strong>        # Consider elements in group of 4 in current square<br/><strong class="jw hj">        for</strong><strong class="jw hj"> j </strong><strong class="jw hj">in</strong><strong class="jw hj"> </strong><strong class="jw hj">range(i, N-i-1):<br/></strong>            # store current cell in temp variable<br/><strong class="jw hj">            temp =</strong><strong class="jw hj"> </strong><strong class="jw hj">M[i][j]<br/></strong>            # move value from right to top<br/><strong class="jw hj">            M[i][j] =</strong><strong class="jw hj"> </strong><strong class="jw hj">M[j][N-1-j]<br/>            </strong># move value from bottom to right<br/><strong class="jw hj">            M[j][N-1-i] =</strong><strong class="jw hj"> </strong><strong class="jw hj">M[N-1-i][N-1-j]<br/>            </strong># move value from left to bottom<br/><strong class="jw hj">            M[N-1-i][N-1-j] =</strong><strong class="jw hj"> </strong><strong class="jw hj">M[N-1-j][i]<br/>            </strong># assign temp to left<br/>            <strong class="jw hj">M[N-1-j][i] =</strong><strong class="jw hj"> </strong><strong class="jw hj">temp</strong></span></pre><p id="b231" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于180度旋转的情况，我们以相反的顺序交换第一行和最后一行的元素，依此类推。对于奇数大小的矩阵，当我们到达中间行时，我们只需反转它。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ki"><img src="../Images/f465c7d7af31e35c2e622171c3d41368.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*UuiphWNzsUDS2uJwu4M6ew.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx translated">图4</figcaption></figure><pre class="je jf jg jh fd jv jw jx jy aw jz bi"><span id="f7b4" class="ka kb hi jw b fi kc kd l ke kf"><strong class="jw hj">def rotate_matrix(M):</strong><br/><strong class="jw hj">    N = len(M)<br/>    for i in range(N // 2):<br/></strong>        <strong class="jw hj">for j in range(N):<br/>            temp = M[i][j]<br/>            M[i][j] = M[N - i - 1][N - j - 1]<br/>            M[N - i - 1][N - j - 1] = temp</strong></span><span id="112a" class="ka kb hi jw b fi kj kd l ke kf"><strong class="jw hj">    </strong># the case when the matrix has odd dimensions<strong class="jw hj"><br/>    if N % 2 == 1:<br/>        for j in range(N // 2):<br/>            temp = M[N // 2][j]<br/>            M[N // 2][j] = M[N // 2][N - j - 1]<br/>            M[N // 2][N - j - 1] = temp</strong></span></pre></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><p id="e2c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">感谢阅读。</p></div></div>    
</body>
</html>