<html>
<head>
<title>Multi-arity functions in Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java中的多元函数</h1>
<blockquote>原文：<a href="https://medium.com/codex/multi-arity-functions-in-java-7bd71350e6cd?source=collection_archive---------11-----------------------#2021-08-24">https://medium.com/codex/multi-arity-functions-in-java-7bd71350e6cd?source=collection_archive---------11-----------------------#2021-08-24</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/ba27849760ca03eef8ccd270635f6299.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kzHx0zw918ombJ7oINYixw.jpeg"/></div></div></figure><p id="ed71" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我提醒你:arity是一个函数的参数个数。因此，多元函数是具有几个参数的函数。在Java 8中，函数引入了一个和两个输入参数。但是如果有更多的参数呢？</p><h1 id="a086" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">当你需要大量的输入参数时</h1><p id="9de9" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">Java中有一个函数<x r="">和双函数<x y="" r="">，其中X和Y是输入参数的类型，R是输出参数的类型。但是三个及三个以上输入参数的函数必须自己决定。但是怎么做呢？</x></x></p><p id="dab0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，要进一步定义带有三个输入参数的函数，必须首先确定接口:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="2a99" class="la jp hi kw b fi lb lc l ld le">@FunctionalInterface</span><span id="71e1" class="la jp hi kw b fi lf lc l ld le">public interface Function3Arity&lt;A, B, C, R&gt; {</span><span id="7587" class="la jp hi kw b fi lf lc l ld le">R apply(A a, B b, C c);</span><span id="28b2" class="la jp hi kw b fi lf lc l ld le">}</span></pre><p id="7ab1" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">之后，您可以确定三元函数的具体变化。例如，像这样:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="40bd" class="la jp hi kw b fi lb lc l ld le">private static Function3Arity&lt;Integer, String, Integer, String&gt;</span><span id="0e08" class="la jp hi kw b fi lf lc l ld le">f3 = (a, op, b) -&gt;{return “” + a + op + b + “=” + (a+b);};</span></pre><p id="c562" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们来看看它是如何工作的:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="daeb" class="la jp hi kw b fi lb lc l ld le"> @Test</span><span id="4734" class="la jp hi kw b fi lf lc l ld le">public void testFunction3Arity() {</span><span id="178d" class="la jp hi kw b fi lf lc l ld le">String result = f3.apply(2, “+”, 3);</span><span id="f4bb" class="la jp hi kw b fi lf lc l ld le">assertEquals(“2+3=5”, result);</span><span id="3275" class="la jp hi kw b fi lf lc l ld le">}</span></pre><h1 id="b6b3" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">当你需要大量的输出参数时</h1><p id="d2bc" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">我们考虑了一个有许多输入参数的例子。如果我们有很多输出参数呢？</p><p id="3076" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">众所周知，Java只允许使用返回一个原始元素或对象。我希望能够在函数的签名级别区分输入和输出参数。那些。具有类型签名:</p><p id="37c6" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj"> <em class="lg"> (c，d) = f(a，b) </em> </strong></p><p id="1897" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">不幸的是，你不能直接这样做。输出参数必须以某种方式构造。为此，您可以创建一个临时对象或将参数写入列表(List &gt;)。第一种方式是重量级的，第二种方式是不愉快的，如果这些类型不同，会失去对输出参数类型的静态控制。</p><p id="a661" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我看来，使用<tuplen x2="" ..xn="">更优雅。</tuplen></p><p id="baf7" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">例如，Tuple2类如下所示:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="dedf" class="la jp hi kw b fi lb lc l ld le">public class Tuple2&lt;A, B&gt; {</span><span id="66a8" class="la jp hi kw b fi lf lc l ld le">public final A a1;</span><span id="8759" class="la jp hi kw b fi lf lc l ld le">public final B a2;</span><span id="881f" class="la jp hi kw b fi lf lc l ld le">public Tuple2(A t, B u) {</span><span id="15e3" class="la jp hi kw b fi lf lc l ld le">a1 = Objects.requireNonNull(t);</span><span id="a164" class="la jp hi kw b fi lf lc l ld le">a2 = Objects.requireNonNull(u);</span><span id="b8b8" class="la jp hi kw b fi lf lc l ld le">}</span><span id="4e3e" class="la jp hi kw b fi lf lc l ld le">@Override</span><span id="d98e" class="la jp hi kw b fi lf lc l ld le">public boolean equals(Object o) {…}</span><span id="94fb" class="la jp hi kw b fi lf lc l ld le">@Override</span><span id="8a2f" class="la jp hi kw b fi lf lc l ld le">public int hashCode() {…}</span><span id="db8f" class="la jp hi kw b fi lf lc l ld le">}</span></pre><p id="968b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">使用这个类，具有三个输入和两个输出参数的函数可以这样定义:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="b05f" class="la jp hi kw b fi lb lc l ld le">private static Function3Arity&lt;Integer, String, Integer, Tuple2&lt;Integer, String&gt;&gt; f3And2 =</span><span id="1870" class="la jp hi kw b fi lf lc l ld le">(a, op, b) -&gt;{</span><span id="a405" class="la jp hi kw b fi lf lc l ld le">int intValue = a + b;</span><span id="bc72" class="la jp hi kw b fi lf lc l ld le">String sValue = “” + a + op + b + “=” + (a+b);</span><span id="dd4c" class="la jp hi kw b fi lf lc l ld le">return new Tuple2&lt;&gt;(intValue, sValue);</span><span id="7abb" class="la jp hi kw b fi lf lc l ld le">};</span></pre><p id="2282" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们来看看它是如何工作的:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="35d5" class="la jp hi kw b fi lb lc l ld le">@Test</span><span id="50ba" class="la jp hi kw b fi lf lc l ld le">public void testFunction3And2Arity() {</span><span id="b7dc" class="la jp hi kw b fi lf lc l ld le">Tuple2&lt;?,?&gt; result = f2And2.apply(2, "+", 3);</span><span id="2595" class="la jp hi kw b fi lf lc l ld le">assertEquals(5, result.a1);</span><span id="72fa" class="la jp hi kw b fi lf lc l ld le">assertEquals(“2+3=5”, result.a2);</span><span id="043f" class="la jp hi kw b fi lf lc l ld le">}</span></pre><h1 id="d834" class="jo jp hi bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">最终规则</h1><p id="8ce8" class="pw-post-body-paragraph iq ir hi is b it km iv iw ix kn iz ja jb ko jd je jf kp jh ji jj kq jl jm jn hb bi translated">1.如果您的函数有3个或更多的输入参数，您需要定义一个新的N元接口，并使用它来进一步定义特定的函数。</p><p id="2e2c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">2.如果您的函数有两个或更多输出参数，请定义TupleN类，并在使用return从函数返回之前将参数打包到其中。</p><p id="3f18" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可以在我的GitHub项目中找到代码示例<a class="ae lh" href="https://github.com/vsirotin/Smartenesse-Java" rel="noopener ugc nofollow" target="_blank">这里</a></p><p id="ba64" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">插图:<a class="ae lh" href="https://pixabay.com/de/geometrie-mathematik-w%C3%BCrfel-1023844/" rel="noopener ugc nofollow" target="_blank">杰勒特</a></p><p id="557e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="lg">最初发表于:</em><a class="ae lh" href="https://smartenesse.sirotin.eu/multi-arity-functions-java" rel="noopener ugc nofollow" target="_blank"><em class="lg">https://smartenesse.sirotin.eu/multi-arity-functions-java</em></a></p></div></div>    
</body>
</html>