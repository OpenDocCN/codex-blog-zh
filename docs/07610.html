<html>
<head>
<title>Simplifying Dagster Codebases with Dagstd</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Dagstd简化Dagster代码库</h1>
<blockquote>原文：<a href="https://medium.com/codex/simplifying-dagster-codebases-with-dagstd-b1c271f0aed5?source=collection_archive---------25-----------------------#2022-06-19">https://medium.com/codex/simplifying-dagster-codebases-with-dagstd-b1c271f0aed5?source=collection_archive---------25-----------------------#2022-06-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4150" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">不再是样板文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5e73827e3bb59060b1a1eea930bea2a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tJ8bs7VgVbPckBh0"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx translated">照片由<a class="ae jt" href="https://unsplash.com/@diane_soko?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">黛安·皮凯蒂诺</a>在<a class="ae jt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="1cfc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您在数据工程领域工作过一段时间，您可能需要使用某种编排或管道来创建完全自动、可靠的工作流。绝大多数公司都是使用Apache Airflow来实现这一点的。Airflow非常强大并且得到了很好的支持，但是它有一个陡峭的学习曲线和相当大的复杂性。</p><p id="de8f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">出于这个原因，许多公司最近转向更现代的气流替代品，如Prefect和Dagster，以快速有效地构建他们的数据管道。它们提供了更简单的API和强大的web UIs来管理和监控您的自动化操作，并提供了合理数量的集成来简化常见的数据任务。</p><p id="d6aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就我个人而言，在领导我公司的数据编排项目时，在评估了几个不同的备选方案后，我们选择了Dagster，它现在管理我们内部和外部报告的所有数据自动化。Dagster是一个很棒的工具，但是有些时候你只需要传入一个简单的整数或者字符串作为op的输入，但是在Dagster中，op的输入只能是其他op的输出。这导致编写了许多样板函数，它们只返回格式化的字符串，甚至只是一个整数。这就是Dagstd被创建的原因。</p><p id="6ec4" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">Dagstd是一组与Dagster一起使用的常见操作和函数，它还包括一个Sphinx Autodoc扩展，允许自动拾取和记录操作，从长远来看，这为我节省了很多时间。</p><h1 id="84d2" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">Dagstd操作</h1><p id="3dea" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">目前(从v0.1.1开始)，Dagstd包含:</p><ul class=""><li id="7d6f" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">返回普通数字的简单操作</li><li id="2692" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">定值操作</li><li id="c9a1" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">数学和字符串运算的辅助操作</li><li id="7e53" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">检索环境变量的操作</li><li id="45e9" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">Sphinx autodoc对Dagster ops的支持</li></ul><p id="c190" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">当然，Dagstd可以通过<code class="du ll lm ln lo b">pip</code>安装:</p><pre class="je jf jg jh fd lp lo lq lr aw ls bi"><span id="f78a" class="lt jv hi lo b fi lu lv l lw lx">pip install dagstd</span></pre><p id="9dec" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">它是用<code class="du ll lm ln lo b">dagster==0.14.17</code>构建的，但应该也能与更高版本一起工作。</p><p id="d8cf" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">下面是一个纯Dagster图的例子，它下载一个每日的ZIP文件并提取一个已知的文件名。注意:为了简洁起见，省略了<code class="du ll lm ln lo b">download_large_file</code>操作。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="ad44" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是相同的图表，具有相同的功能，但具有Dagstd ops。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ly lz l"/></div></figure><p id="2c59" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个小例子，因此节省的空间可能不是很大，但是使用Dagstd可以避免多少样板文件。</p><h1 id="93eb" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">Sphinx Autodoc插件</h1><p id="2b54" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Dagstd包含一个Sphinx autodoc插件，可用于为Dagster ops生成文档。要使用autodoc插件，请将以下内容添加到您的<code class="du ll lm ln lo b">conf.py</code>文件中:</p><pre class="je jf jg jh fd lp lo lq lr aw ls bi"><span id="5276" class="lt jv hi lo b fi lu lv l lw lx">extensions = [<br/>    ...<br/>    'dagstd.sphinx.parser',<br/>]</span></pre><p id="df0e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">默认情况下，这将为所有op文档加上前缀<code class="du ll lm ln lo b">(op)</code>。要更改这一点，请将以下内容添加到您的<code class="du ll lm ln lo b">conf.py</code>文件中:</p><pre class="je jf jg jh fd lp lo lq lr aw ls bi"><span id="25c7" class="lt jv hi lo b fi lu lv l lw lx">dagstd_op_prefix = 'My Op'</span></pre><p id="a21d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">你可以在<a class="ae jt" href="https://dagstd.readthedocs.io/en/latest/readme.html" rel="noopener ugc nofollow" target="_blank"> Dagstd文档</a>中看到一个这样的例子。</p><h1 id="cd0f" class="ju jv hi bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">捐助</h1><p id="2ba7" class="pw-post-body-paragraph if ig hi ih b ii ks ik il im kt io ip iq ku is it iu kv iw ix iy kw ja jb jc hb bi translated">Dagstd是全新的，我也不是Dagster方面的专家，所以肯定有一些更常见的操作我可以包含在库中！如果你发现自己不得不在Dagster代码库中写很多东西，请告诉我，我会尽可能地添加它们。下一个增加的可能是处理日期的ops，所以请告诉我你想要什么，或者在这里评论，或者在GitHub上打开一个问题或请求。</p><ul class=""><li id="31de" class="kx ky hi ih b ii ij im in iq kz iu la iy lb jc lc ld le lf bi translated">问题追踪:【https://github.com/isaacharrisholt/dagstd/issues T4】</li><li id="1809" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">源代码:<a class="ae jt" href="https://github.com/isaacharrisholt/dagstd" rel="noopener ugc nofollow" target="_blank">https://github.com/isaacharrisholt/dagstd</a></li><li id="f98d" class="kx ky hi ih b ii lg im lh iq li iu lj iy lk jc lc ld le lf bi translated">文档:<a class="ae jt" href="https://dagstd.readthedocs.io/en/latest/readme.html" rel="noopener ugc nofollow" target="_blank">https://dagstd.readthedocs.io/en/latest/readme.html</a></li></ul><p id="8759" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望至少你们中的一些人会觉得这个包有用，我很乐意听到你们的反馈！同时，为什么不通过查看我的另一个开源Python包Quiffen来进一步简化您的财务数据工作流呢？这是一个处理Quicken Interchange Format (QIF)文件的好工具。你可以在这里了解更多信息:</p><div class="ma mb ez fb mc md"><a href="https://towardsdatascience.com/parsing-qif-files-to-retrieve-financial-data-with-python-f599cc0d8c03" rel="noopener follow" target="_blank"><div class="me ab dw"><div class="mf ab mg cl cj mh"><h2 class="bd hj fi z dy mi ea eb mj ed ef hh bi translated">使用Python解析QIF文件以检索金融数据</h2><div class="mk l"><h3 class="bd b fi z dy mi ea eb mj ed ef dx translated">Quiffen包的基本概述以及它如此有用的原因</h3></div><div class="ml l"><p class="bd b fp z dy mi ea eb mj ed ef dx translated">towardsdatascience.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr jn md"/></div></div></a></div><p id="5385" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你想联系我，你可以发电子邮件到isaac@isaacharrisholt.com或者LinkedIn或者Twitter。快乐工程！</p></div></div>    
</body>
</html>