<html>
<head>
<title>Scopes and Closures in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的作用域和闭包</h1>
<blockquote>原文：<a href="https://medium.com/codex/scopes-and-closures-in-javascript-eed5694023d0?source=collection_archive---------5-----------------------#2022-05-22">https://medium.com/codex/scopes-and-closures-in-javascript-eed5694023d0?source=collection_archive---------5-----------------------#2022-05-22</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="6d81" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为了理解闭包，我们必须熟悉JavaScript中的作用域。</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/46718f5b69475b74cd27a0371de2c008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mlNo0cDtb74HEQbU"/></div></div><figcaption class="jj jk et er es jl jm bd b be z dx translated">照片由<a class="ae jn" href="https://unsplash.com/@henning?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Henning Witzel </a>在<a class="ae jn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="e352" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">作用域是一个非常简单的话题，意思是变量在程序其他部分的可见性。范围意味着可变的访问。当代码运行时，我可以访问什么变量？在JavaScript中，默认作用域是指窗口作用域的根作用域。除了窗口范围，还有2个范围。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="4a0c" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">把范围想象成一个盒子。当我们看盒子时，有两个区域。<br/> 1。盒子内部的区域。<br/> 2。盒子外面的区域。</p><h2 id="26ec" class="kr ks hi bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">局部范围</h2><p id="ec90" class="pw-post-body-paragraph jv jw hi jx b jy lm ij ka kb ln im kd ke lo kg kh ki lp kk kl km lq ko kp kq hb bi translated">局部作用域就像盒子里的区域，我们只能访问盒子里的东西或变量。盒子里的东西外面拿不到。</p><p id="b333" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">示例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="5174" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">上面的程序会抛出一个错误</p><pre class="iy iz ja jb fd lt lu lv lw aw lx bi"><span id="fbbc" class="kr ks hi lu b fi ly lz l ma mb">ReferenceError: localVariable is not defined</span></pre><p id="0b4d" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">因为这里的<code class="du mc md me lu b">localScopeDemoFunction</code>是那个盒子，<code class="du mc md me lu b">localVariable</code>是盒子里面的一个东西。不能这样访问。</p><h2 id="b39b" class="kr ks hi bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">全球范围</h2><p id="1b7e" class="pw-post-body-paragraph jv jw hi jx b jy lm ij ka kb ln im kd ke lo kg kh ki lp kk kl km lq ko kp kq hb bi translated">可以想象盒子外面的区域和盒子里面的区域可以访问盒子外面的变量或事物。让我用一个例子来说明这一点:</p><p id="254f" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">示例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="0f14" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">这里我们将得到输出<code class="du mc md me lu b">hi</code>，因为globalVariable可以在函数内部访问，因为它是在全局范围内声明的。</p><h2 id="5abb" class="kr ks hi bd kt ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll bi translated">关闭</h2><p id="0ea5" class="pw-post-body-paragraph jv jw hi jx b jy lm ij ka kb ln im kd ke lo kg kh ki lp kk kl km lq ko kp kq hb bi translated">假设有两个函数(一个函数在另一个函数内部)。在JavaScript中，我们可以在函数内部定义函数，不需要在全局范围内声明。让我们看一个例子。</p><p id="f8ef" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">示例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="b13a" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在上面的例子中，我们声明了一个函数<code class="du mc md me lu b">outerFunction</code>，它包含了一个内部函数。当我们调用外部函数时，它返回<code class="du mc md me lu b">innerFunction</code>(是的，在javascript中，我们可以返回内部函数，因为函数像其他变量一样是第一类成员。在上面提到的演示中，我们调用内部函数，它会简单地将<code class="du mc md me lu b">hi</code>输出到控制台。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="5ce6" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">有两种方法可以使用这个内部函数，我们已经在上面展示过了。在第一种方式中，我们直接调用返回值，就好像对<code class="du mc md me lu b">outerFunction</code>的函数调用本身就是一个函数。</p><p id="a568" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在第二个方法中，我们将<code class="du mc md me lu b">outerFunction</code>的返回值存储在一个变量中，然后调用它。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="9601" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">所以在上面的例子中，我们看到了什么是内部函数，以及它们在现实世界中是什么样子的。</p><p id="3c08" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在定义闭包的概念之前，让我们再次使用我们在作用域中使用的盒子模型来简化事情。</p><p id="9426" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">闭包是javascript的属性，它允许内部函数使用外部函数变量。这也限制了外部函数访问内部函数变量。</p><p id="4eb7" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">所以根据盒子模型，盒子的内部可以访问外部属性，而外部区域不能访问内部属性。</p><p id="d03d" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">示例:</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="c47b" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">这里，当我们调用<code class="du mc md me lu b">innerFunction</code>时，我们在控制台上得到<code class="du mc md me lu b">Hello</code>,这意味着我们的内部函数能够访问外部函数的属性。这就是终结。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="e230" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated">在这篇文章中，我们学习了作用域(全局作用域和局部作用域)以及javascript中的闭包。</p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="a7b6" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated"><em class="mf">如果你明白我在这里说的任何事情，请鼓掌回应并跟随我，因为它帮助我保持动力并从我的日程中抽出时间来写这些文章。这不会花你任何钱，但会帮我很多忙</em></p></div><div class="ab cl jo jp gp jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="hb hc hd he hf"><p id="2263" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ke kf kg kh ki kj kk kl km kn ko kp kq hb bi translated"><em class="mf">高拉夫·夏尔马是一个狂热的读者和热情的旅行者。他试图通过传播他的知识和他的生活经历来过一个更有意义和目标的生活！跟随他踏上平衡数字生活和现实生活的新旅程。他住在印度的北阿坎德邦。他在Instagram上的</em><a class="ae jn" href="https://www.instagram.com/golf._.sierra/" rel="noopener ugc nofollow" target="_blank"><em class="mf">@高尔夫。_.塞拉</em> </a></p></div></div>    
</body>
</html>