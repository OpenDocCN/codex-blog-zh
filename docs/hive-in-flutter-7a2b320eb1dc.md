# èœ‚æˆ¿åœ¨é¢¤åŠ¨

> åŸæ–‡ï¼š<https://medium.com/codex/hive-in-flutter-7a2b320eb1dc?source=collection_archive---------0----------------------->

![](img/0b2e3a166f1a575a52a6d3333f441ee8.png)

ç…§ç‰‡ç”±[å®‰ç‰¹Â·å“ˆé»˜æ–¯ç‰¹](https://unsplash.com/@ante_kante?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

Hive æ˜¯è½»é‡çº§ã€NoSqlã€é”®å€¼æ•°æ®åº“ï¼Œç”¨äºåœ¨æœ¬åœ°å­˜å‚¨ **flutter** å’Œ **dart** åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®ã€‚æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ã€‚Hive å¯ç”¨äºå­˜å‚¨ç§»åŠ¨å’Œ web åº”ç”¨ç¨‹åºçš„æ•°æ®ã€‚

æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå·¥ä½œå¦‚ä¸‹:

![](img/a3cd7d50e1bde0e16d2f4e7224ad5922.png)

Hive éå¸¸æœ‰ç”¨ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ã€‚å®ƒç”±æ²¡æœ‰ä¼—å¤šå…³ç³»çš„é”®å€¼æ•°æ®åº“ç»„æˆã€‚Hive æ˜¯è„±æœºæ•°æ®åº“ã€‚

å­˜å‚¨åœ¨ Hive ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½ç»„ç»‡åœ¨ç›’å­ä¸­ã€‚

## ä»€ä¹ˆæ˜¯ç›’å­ï¼Ÿ

Hive å°†å…¶æ•°æ®å­˜å‚¨åœ¨åŒ…å«é”®å€¼é›†çš„ç›’å­ä¸­ã€‚

å¯¹äºä¸€ä¸ªå°åº”ç”¨æ¥è¯´ï¼Œä¸€ä¸ªç›’å­å¯èƒ½å°±è¶³å¤Ÿäº†ã€‚å¯¹äºæ›´é«˜çº§çš„é—®é¢˜ï¼Œç›’å­æ˜¯ç»„ç»‡æ•°æ®çš„å¥½æ–¹æ³•ã€‚ç›’å­ä¹Ÿå¯ä»¥åŠ å¯†ä»¥å­˜å‚¨æ•æ„Ÿæ•°æ®ã€‚

åœ¨ä½¿ç”¨ç®±å­ä¹‹å‰ï¼Œéœ€è¦å…ˆæ‰“å¼€èœ‚ç®±ã€‚

## å¼€ç®±

```
var box = await Hive.openBox<DataModel>('hive_box');Or
var box = await Hive.openBox('hive_box');
```

ä¸ç®¡æ€æ ·ï¼Œä½ éƒ½å¯ä»¥æ‰“å¼€ç›’å­ã€‚

å¦‚æœç›’å­å·²ç»æ‰“å¼€ï¼Œåˆ™è¿”å›å®ƒï¼Œå¹¶å¿½ç•¥æ‰€æœ‰æä¾›çš„å‚æ•°ã€‚å¦‚æœä¸æ‰“å¼€ hive boxï¼Œæ‚¨å°†æ— æ³•è¯»å–ã€å†™å…¥å’Œåˆ é™¤æ•°æ®ã€‚

## æ‰“å¼€ç›’å­

hive ä¸ºæ‰€æœ‰æ‰“å¼€çš„ç›’å­å­˜å‚¨ä¸€ä¸ªå¼•ç”¨ã€‚è¦ä»æ‰“å¼€çš„ç›’å­ä¸­è·å–æ•°æ®ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è·å–:

```
var box = Hive.box('myBox');
```

è¿™ä¸ªè¿‡ç¨‹æˆ–æ–¹æ³•å¯¹äº Flutter åº”ç”¨ç¨‹åºéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæ‚¨ä¸å¿…åœ¨å°éƒ¨ä»¶ä¹‹é—´ä¼ é€’ç›’å­ã€‚

## å…³é—­æ¡†

å¦‚æœä½ ä¸å†éœ€è¦è¿™ä¸ªç›’å­ï¼Œä½ åº”è¯¥æŠŠå®ƒå…³ä¸Šã€‚æ‰€æœ‰ç¼“å­˜çš„é”®å’Œå€¼éƒ½å°†ä»å†…å­˜ä¸­åˆ é™¤ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰è¯»å†™æ“ä½œå®Œæˆåå…³é—­ box æ–‡ä»¶ã€‚

> **å¦‚æœæ‚¨å°†æ¥éœ€è¦ç›’å­ï¼Œå¯ä»¥å°†ç›’å­æ‰“å¼€ã€‚åœ¨åº”ç”¨ç¨‹åºè¿è¡Œä¹‹å‰ï¼Œè®©ä¸€ä¸ªæ¡†ä¿æŒæ‰“å¼€çŠ¶æ€æ˜¯å¯ä»¥çš„ã€‚**

```
await box.close();
```

## å†™

å†™ä¸€ä¸ªç›’å­æ˜¯éå¸¸å®¹æ˜“çš„ï¼Œå°±åƒå†™ä¸€å¼ åœ°å›¾ä¸€æ ·ã€‚

```
var box = Hive.box('box_name');box.put('name', 'John Doe');box.put('friends', ['Hari', 'Ram', 'Sita']);box.put(123, 'testdata');box.putAll({'key1': 'value1', 23: 'process'});
```

## é˜…è¯»

ä»ç›’å­ä¸­è¯»å–æ•°æ®éå¸¸ç®€å•ã€‚

```
var box = Hive.box('myBox');
String name = box.get('name');
DateTime birthday = box.get('birthday');
```

å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›`**null**`ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸€ä¸ª`**defaultValue**` ,åœ¨é”®ä¸å­˜åœ¨çš„æƒ…å†µä¸‹è¿”å›ã€‚

```
double length=box.get('yourkey',defaultValue:12.5);
```

è¿”å›çš„åˆ—è¡¨`get()`æ€»æ˜¯ç±»å‹`List<dynamic>`(ç±»å‹`Map<dynamic, dynamic>`çš„åœ°å›¾)ã€‚ä½¿ç”¨`list.cast<SomeType>()`å°†å®ƒä»¬è½¬æ¢æˆç‰¹å®šçš„ç±»å‹ã€‚

## ç±»å‹é€‚é…å™¨

Hive ä¸ºæˆ‘ä»¬æä¾›äº†å‡ ä¹æ‰€æœ‰åŸå§‹æ•°æ®ç±»å‹çš„æƒé™ï¼Œä¾‹å¦‚`String`ã€`int`ã€`Map`ã€`List`ã€`DateTime` å’Œ`Uint8List.`ç±»å‹é€‚é…å™¨å°†å¯¹è±¡ä»äºŒè¿›åˆ¶å½¢å¼è½¬æ¢ä¸ºäºŒè¿›åˆ¶å½¢å¼ã€‚

ä½ éœ€è¦ç”Ÿæˆ`TypeAdapter`æˆ–è€…ä½ å¯ä»¥è‡ªå·±å†™ã€‚åœ¨ä½¿ç”¨é€‚é…å™¨ä¹‹å‰ï¼Œæ‚¨éœ€è¦æ³¨å†Œå®ƒã€‚

## æ³¨å†Œé€‚é…å™¨

æ³¨å†Œé€‚é…å™¨éœ€è¦ä¸¤ä»¶ä¸œè¥¿ï¼Œå³`instance of adapter`å’Œ`typeId`ã€‚`typeId`æ˜¯å”¯ä¸€çš„ï¼Œå¿…é¡»åœ¨ 0 åˆ° 223 ä¹‹é—´ã€‚æ‚¨å¯ä»¥å°†é€‚é…å™¨æ³¨å†Œä¸º

```
Hive.registerAdapter(MyAdapter());
```

## ä¸ºä»€ä¹ˆæ˜¯èœ‚å·¢æ•°æ®åº“ï¼Ÿ

*   ä¸å…¶ä»–æ•°æ®åº“å¦‚ **SQLite** å’Œ **SharedPreferences** ç›¸æ¯”ï¼Œå®ƒåœ¨é€Ÿåº¦å’Œæ€§èƒ½æ–¹é¢æ˜¯æœ€é«˜æ•ˆçš„æ•°æ®åº“ã€‚
*   å®ƒç»™å‡ºäº†æ‰§è¡Œ **CRUD** æ“ä½œçš„ç®€å•æ–¹æ³•ã€‚
*   å†…ç½®å¼ºåŠ å¯†
*   æ²¡æœ‰æœ¬æœºä¾èµ–é¡¹

## ä½•æ—¶ä½¿ç”¨ Hive

Hive çš„æ€§èƒ½éå¸¸å¥½ï¼Œå› ä¸ºä¸å…³ç³»æ•°æ®åº“ç›¸æ¯”ï¼Œå®ƒçš„å¼€é”€å¾ˆå°ã€‚

Hive å¯ä»¥ç”¨æ¥å­˜å‚¨å‡ ä¹æ‰€æœ‰ç±»å‹çš„æ•°æ®ã€‚

*   è´­ç‰©è½¦å†…å®¹
*   åšå®¢/æ–‡ç« 
*   ä¿¡æ¯
*   äº§å“ç±»åˆ«
*   ä¼šè®®
*   ç­‰ç­‰

## ä½•æ—¶ä¸ä½¿ç”¨ Hive

å½“ä»¥æ­£ç¡®çš„æ–¹å¼å»ºæ¨¡æ—¶ï¼Œæ¯ç§ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥å­˜å‚¨åœ¨ Hive ä¸­ã€‚æœ‰æ—¶ä½¿ç”¨ SQLite è¿™æ ·çš„å…³ç³»æ•°æ®åº“ä¼šæ›´æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒæ›´æ–¹ä¾¿ï¼Œä½†ä¹Ÿä¸æ˜¯æ›´å¿«ã€‚

å¦‚æœæ‚¨çš„æ•°æ®åŒ…å«å¤æ‚çš„å…³ç³»ï¼Œå¹¶ä¸”æ‚¨å¿…é¡»ä¸»è¦ä¾èµ–äºç´¢å¼•å’Œå¤æ‚çš„æŸ¥è¯¢ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥è€ƒè™‘ä½¿ç”¨ SQLiteã€‚

ç”±äº Hive æ˜¯å¦‚æ­¤çš„è½»é‡çº§ï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨ Hive å’Œå…¶ä»–æ•°æ®åº“ã€‚

## å¥½äº†ï¼Œæˆ‘ä»¬æ½œæ°´å§

![](img/0bc87eb8015f140592b6567c667dd32d.png)

Jeremy Bishop åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡

## æ­¥éª¤ 1:åˆ›å»º flutter åº”ç”¨ç¨‹åº

## æ­¥éª¤ 2:æ·»åŠ ä¾èµ–é¡¹

```
dependencies:
  flutter:
    sdk: flutter
  hive: ^2.2.3
  path_provider: ^2.0.11
  hive_flutter: ^1.1.0
  hive_generator: ^1.1.3
```

å’Œå¼€å‘ä¾èµ–æ€§

```
dev_dependencies:
  flutter_test:
    sdk: flutter

  build_runner: ^2.2.0
```

## æ­¥éª¤ 3:åˆ›å»ºæ¨¡å‹

æˆ‘ä»¬éœ€è¦åˆ›å»ºæ¨¡å‹ç±»æ¥ä¸å­˜å‚¨æ•°æ®çš„é…ç½®å•å…ƒä¸€èµ·å·¥ä½œã€‚æˆ‘ä»¬å°†åˆ¶ä½œä¸€ä¸ª **Grocesories Memo** åº”ç”¨ç¨‹åºï¼Œåœ¨å»å¸‚åœºä¹‹å‰å­˜å‚¨æ‰€éœ€çš„æ‚è´§ã€‚

`@HiveType`å°†å‘Šè¯‰æ•°æ®æ¨¡å‹è¡¨ä¸Šé¢çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå‚æ•°`*typeId.*`

`@HiveField`å‘Šè¯‰æ•°æ®ä¸ºæ¯ä¸ªå±æ€§ä¼ é€’ã€‚

> æˆ‘ä»¬å·²ç»æ‰§è¡Œäº† HiveObject ä»¥è·å¾—æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹æ•°æ®é¡¹çš„é”®ã€‚

## æ­¥éª¤ 4:ç”Ÿæˆé€‚é…å™¨

è¦ç”Ÿæˆ`DataModelApdater`ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

```
flutter packages pub run build_runner build
```

å®ƒå°†ç”Ÿæˆ data_modal.g.dart

## æ­¥éª¤ 5:åˆå§‹åŒ–é…ç½®å•å…ƒ

æ‚¨éœ€è¦åœ¨ main æ–¹æ³•ä¸Šåˆå§‹åŒ– hiveï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨å…¶ä»–åŠŸèƒ½ä¹‹å‰æ‰§è¡Œã€‚

```
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  Directory directory = await         pathProvider.getApplicationDocumentsDirectory();
  Hive.init(directory.path);
   Hive.registerAdapter(DataModelAdapter());
   await Hive.openBox('hive_box');
  runApp(const MyApp());
}
```

## ç¬¬å…­æ­¥:æ·»åŠ **åº“å­˜æ•°æ®**

æ­£å¦‚æˆ‘ä»¬ä¹‹å‰äº†è§£åˆ°çš„ï¼Œæ‚¨éœ€è¦æ‰“å¼€æˆ‘ä»¬çš„`box`æ¥æ·»åŠ æ•°æ®ã€‚

```
box = await Hive.openBox('hive_box');
DataModel dataModel = DataModel(
      item: _itemController.text,
       quantity: int.parse(_qtyController.text));
box.add(dataModel);
```

## ç¬¬ä¸ƒæ­¥:è·å–æ•°æ®

```
box = await Hive.openBox('hive_box');
var items = box.values.toList().reversed.toList();
```

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†`reversed`æ¥åè½¬æˆ‘ä»¬çš„æ•°æ®ï¼Œè¿™æ ·æ–°çš„æ•°æ®å°±ä¼šå‡ºç°åœ¨æœ€ä¸Šé¢ã€‚

## æ­¥éª¤ 8:ç¼–è¾‘/æ›´æ–°æ•°æ®

```
var box = await Hive.openBox('hive_box');
DataModel dataModel = DataModel(
                            item: _itemController.text,
                            quantity: int.parse(_qtyController.text));
box.put(itemKey, dataModel);
```

`itemKey`æ˜¯æ•°æ®çš„æ ‡è¯†ç¬¦ã€‚ä¸Šé¢æˆ‘ä»¬æ‰©å±•äº† HiveObject ä»¥è·å¾—è¿™ä¸ªé”®ã€‚

## ç¬¬ 9 æ­¥:åˆ é™¤æ•°æ®

```
var box = await Hive.openBox('hive_box');
box.delete(items[index].key);
```

# è®©æˆ‘ä»¬è¿æ¥èµ·æ¥

æˆ‘ä»¬å¯ä»¥æˆä¸ºæœ‹å‹ã€‚åœ¨[è„¸ä¹¦](https://www.facebook.com/nabin.dhakal.714/)ã€ [Linkedin](https://www.linkedin.com/in/nabindhakal/) ã€ [Github](https://github.com/nbnD) ã€ [Youtube](https://www.youtube.com/channel/UCW6oYt_3QSl7J2HSHNqwXWw) ã€ [BuyMeACoffee](https://www.buymeacoffee.com/nabindhakal) å’Œ [Instagram](https://www.instagram.com/nbn_d_/) ä¸ŠæŸ¥æ‰¾ã€‚

è®¿é—®:[é¢¤æŒ¯è¿æ¥](https://flutterjunction.com/)

**æŠ•ç¨¿:**BuyMeACoffee

# ç»“è®º

å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè®©ä½ å­¦åˆ°æ–°çš„ä¸œè¥¿ã€‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨äº†ä¸€äº›å¯¹ä½ ä»¬ä¸­çš„ä¸€äº›äººæ¥è¯´å¯èƒ½æ˜¯æ–°çš„ä¸œè¥¿ã€‚

å¦‚æœä½ å­¦åˆ°äº†æ–°çš„ä¸œè¥¿æˆ–è€…æƒ³æå‡ºä¸€äº›å»ºè®®ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹å‡»ğŸ‘å›¾æ ‡ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†ä¼ é€’æ‰€æœ‰æ–°äº‹ç‰©çš„åŠ¨åŠ›ã€‚

æ­¤å¤–ï¼Œå…³æ³¨ä»¤äººå…´å¥‹çš„æ–‡ç« å’Œé¡¹ç›®çš„æ›´æ–°ã€‚

é€šè¿‡åˆ†äº«å­¦ä¹ å¯¹å­¦ä¹ è¿‡ç¨‹äº§ç”Ÿäº†å·¨å¤§çš„å½±å“ï¼Œå¹¶ä½¿ç¤¾åŒºè¶Šæ¥è¶Šå¤§ã€‚

åˆ†äº«æ˜¯å¸å¼•å…¶ä»–çˆ±å¥½è€…çš„ç£çŸ³ã€‚

å› æ­¤ï¼Œè®©æˆ‘ä»¬æœç€æ‰©å¤§æˆ‘ä»¬çš„å­¦ä¹ ç¤¾åŒºè¿ˆå‡ºä¸€å°æ­¥ã€‚

ä¸ä½ çš„æœ‹å‹åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œæˆ–è€…å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå°±åœ¨æ¨ç‰¹ä¸Šå‘è¡¨è¯„è®ºã€‚

# åœ¨ä»¥ä¸‹æ—¶é—´åƒé¥±:

[](https://github.com/nbnD/flutter_hive) [## GitHub-nbnD/flutter _ hive:hive _ flutter ç¤ºä¾‹

### ä¸€ä¸ªæ–°çš„é¢¤æŒ¯é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯é¢¤æŒ¯åº”ç”¨çš„èµ·ç‚¹ã€‚ä¸€äº›å¸®åŠ©æ‚¨å…¥é—¨çš„èµ„æºâ€¦

github.com](https://github.com/nbnD/flutter_hive)