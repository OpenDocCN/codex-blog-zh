# 面向流处理的数据驱动开发

> 原文：<https://medium.com/codex/data-driven-development-for-stream-processing-4b90014d10ad?source=collection_archive---------12----------------------->

## 第 3 部分，共 4 部分:作为共享语言的度量

![](img/58cd36a625527c854be32a8bdb70c010.png)

*注意:这是系列文章的第三篇——请看第一部分:简介* *和* [*第二部分:“度量驱动的度量”*](/@caito/data-driven-development-for-stream-processing-36b8d5d9e8ec) *了解更多上下文。*

这篇文章是数据驱动开发最佳实践系列的继续。这些是专门为具有高度复杂集成点的软件系统设计的，但是适用于许多不同的情况。本系列使用带有 [Apache Flink](https://flink.apache.org/) 的流处理作为示例。

第一篇文章提供了介绍和相关术语，第二篇文章介绍了另一组可观察性的最佳实践。这篇文章是利用这些可观察性原则的下一步，以更好地简化这些用例中经常出现的人际组件。

![](img/b132b65ac875389624783d73d61858e1.png)

# 加大对内部沟通的投资

甚至在疫情之前，就有公司投资改善团队间沟通的上升趋势。从 2017 年到 2019 年，关于团队信任的[重要性](https://blog.newrelic.com/technology/trust-teams-software-development/)以及团队间沟通对系统弹性和[灾难恢复](https://www.ehstoday.com/emergency-management/article/21916640/communication-breakdown)的关键作用的企业内容大幅上升。

然而，与此同时，关于“沟通超载”的文章和评论也有所增加:员工参加的会议增加了 13%和[民意调查报告](https://blog.flock.com/communication-overload-hits-executives-hardest)内部消息如此之多，以至于大多数员工(尤其是担任领导职务的员工)无法在一天内回复所有新消息。

# 然后，疫情发生了

在我最近进行的一项同行调查中，大多数受访者表示，2020 年全公司远程工作的转变提高了他们和/或他们公司的沟通技能。然而，同样的受访者也指出，疫情的遗留影响继续对团队间的沟通和信任产生严重影响。虽然“变焦疲劳”现在是一个众所周知的现象，但公众越来越认识到疫情期间[在偏远的](https://thenewstack.io/this-cant-be-normal-the-tech-industry-after-a-year-of-burnout/)[工人倦怠](https://www.hcamag.com/asia/specialisation/leadership/does-remote-work-cause-communication-breakdown/248035)中真正涉及的。

# 复杂系统中的通信故障

构建具有多个(或高度复杂的)集成点的软件系统总是会有额外的通信挑战。

![](img/412dded1315d7eebfd67f3615aa85391.png)

对于流处理，强大的流引擎的优势在于它能处理多快和多少数据，这自然会增加现有集成点的复杂性。此外，复杂的流系统使用共享资源(如存储和部署工具)的方式可能与非流应用程序不同。这意味着共享这些资源的其他团队也应该算作集成点，就像上游和下游团队一样。随着这个相互联系的团队圈子的扩大，这也对监督这些团队的利益相关者和领导层产生了更大的影响。

所以——当构建具有多个和/或复杂集成点的软件系统时，跨团队的沟通是一个固有的挑战。此外，特别是因为疫情，内部沟通变得比以往更加困难，也更加重要。然而，不知何故，也有压倒性的数量。

> “内部交流变得比以往任何时候都更难**、**、**更重要，但也有太多的问题。”**

**这就是拥有良好的数据驱动的沟通的地方，更具体地说，这就是“作为共享语言的度量”可以帮助减轻和自动化这些挑战的地方。**

**![](img/3958f72ec7a5f4802925e22ff0cde380.png)**

**“作为共享语言的度量”是一组最佳实践，使用关于您的系统的度量作为基础，在受影响的团队和涉众之间进行高效、准确的交流。高级目标和实施非常简单:**

# **目标**

**使用系统指标来:**

*   **减轻(或消除)误解。**
*   **在高开销的情况下简化沟通(例如，您与其他团队有复杂的集成点)。**
*   **与受影响的团队和利益相关者建立信任。**

# **履行**

***先决条件:确保你的* [*指标是有意义的，并且是小的模块化单位*](/@caito/data-driven-development-for-stream-processing-36b8d5d9e8ec) *。***

*   **确定您的“受众”(受影响的群体)。**
*   **为这些群体确定最有效的工具。**
*   **启用自动化。**

# **识别你的“观众”**

**识别受影响的组就像检查您的架构图并列出您的系统与周围生态系统的每个集成点中涉及的团队一样简单。唯一“棘手”的部分是积极主动地了解谁将真正受到您的软件的影响，并回答诸如“这个应用程序将使用什么共享资源，我们使用它的方式是否会与其他应用程序不同？”。**

*****专业提示:*** *在这种类型的规划中，我看到最常见的被遗漏的团队是运营/开发团队，以及相邻团队的领导。***

**下一步是根据这些群体需要什么样的信息对他们进行分类。这就是第一篇[帖子](/@caito/data-driven-development-for-stream-processing-e4aeb6eaf4a3)中的一些概念的来源，特别是确定谁将从纯粹的定量数据中受益最多，哪个(些)组将需要更抽象的“数据感知”信息，以及哪个组需要混合。**

**![](img/ddbc4fdb20e6d07d8d65797e800ca2ae.png)**

**用 [Canva](https://www.canva.com/) 制造**

# **识别您的工具**

**公司和员工报告说，由于缺乏适当的沟通渠道，沟通障碍经常发生。为每个小组确定合适的工具可以消除大量不必要的时间和资源浪费。**

**在高层次上，这里的启发是找到一种方法，将您的指标集成到您的受众的首选工具或平台中，并为需要过滤数据的群体抽象这一点。**

**例如，对于您管道中的**工程和 DevOps** 团队，这可能意味着拥有一个共享的 Slack 通道*仅*用于影响该团队的 PagerDuty 警报，并启用一个集成的可观察性工具(DataDog、Prometheus 等)定期自动发布相关图表。**

*****专业提示:*** *确保您与这些团队共享的警报和指标的标注方式对团队以外的工程师来说实际上是有意义的。***

**对于你的**面向客户的团队**，这可能意味着有一篇嵌入了自动更新图表或汇总数字输出的博文。这是存放[、【虚荣指标】](/@caito/data-driven-development-for-stream-processing-e4aeb6eaf4a3)和其他对营销和销售有用的信息的好地方。**

*****专业提示:*** *我在这里看到的最常见的挑战是让这些组保持简单并充分抽象数据。这就像首先问他们 1-3 项产出对他们最重要，然后给出这些数字一样简单。***

**对于需要一个混合的群体来说，比如工程经理、其他技术领导者和利益相关者，他们可以查询的 URL 端点可以发挥很大的作用。或者，仅仅将它们包含在“粒度”频道和“抽象”帖子中也同样有效。**

*****专业提示:*** *这个混合类别中的另一个“群体”是整个公司，在你的系统推出的那一刻。当系统发布并投入使用时，为公司的其他部门提供“多语言”的演示和资源，可以在已经很忙的时候消除大量额外的通信开销。***

**![](img/28511a78ac7be0edfcdb7475bd707a3d.png)**

# **实现自动化**

**在这个世界各地的工人都表示对社会联系的需求越来越多的时代，自动化似乎是没有人情味的。然而，实现这些实践的好处实际上可以缓解这种紧张。**

**首先，员工可以更快地得到答案。员工们报告说，随着 2020 年突然转向全公司远程工作，很难足够快地获得问题的答案——对于一个基本的“是或否”问题的答案，不得不等待几个小时。第二，由于大部分的人类交流是非语言的，报告显示，员工不得不花费更多的精力与同事交流，以弥补一年多来错过这些重要线索的累积效应。精简和简化任何可能的沟通领域，为员工提供了大量的缓解和精力，他们现在可以将精力花在需要更多细微差别的沟通领域。**

**最后，这组特定的最佳实践自然为沟通风格设定了更清晰的期望。例如，一些人将 Slack 视为异步、随意交互的工具，而另一些人则希望 Slack 上的消息能够[收到即时响应](https://blog.cloudspeakers.dev/leveraging-asynchronous-communication-for-happier-developer-communities/)。以我的经验来看，遵循这些指导方针几乎消除了由不匹配的期望引起的摩擦。通过使数据真正可访问和可消化，这是可能的，这使得其他团队和利益相关者更加自主。**

# **自动化指南**

****主动出击****

*   **提前询问各组什么信息对他们最重要。**
*   **确保有涵盖这些项目的指标，并且这些指标易于获取。**

****无功****

*   **保持灵活性:仍然会有不可预测的问题。**
*   **构建这个系统的工程师被问得最多的问题是什么？(这个问题既适合问工程师，也适合问工程师的人)。**

****结合静态和动态资源****

*   **用相关的自动更新图表(或其他输出)填充静态资源(如内部博客文章)。**
*   **向静态资源添加新问题的答案，以及创建额外的警报或对其进行监控。**

# **结果**

**继续我在[上一篇文章](/@caito/data-driven-development-for-stream-processing-36b8d5d9e8ec)中的例子，我所在的工程团队构建了公司的第一个 [Apache Flink](https://flink.apache.org/) 管道:这是一个复杂的系统，需要集成到一个更大、更复杂的非流式技术生态系统中。**

**对我们来说，正确地实现“作为共享语言的度量”意味着对我们的集成点进行彻底的审查，创建我们受影响的组的列表，并将其分类到他们在最细粒度、混合、最抽象的范围内的位置。然后，我们会见了我们所有的上游和下游工程团队。通过*仅仅*查看我们的警报和可观察性仪表板，并选择和重新标记一些指标以整合到 Slack 渠道中，我们能够将几周的来回转换简化为大约 45 分钟的对话。**

**至于我们面向客户的利益相关者:经过一些尝试和错误(主要是因为我们想不断分享不必要的细节)，我们在我们的观察仪表板上创建了 3 个新面板，并将它们嵌入到一篇措辞谨慎的博客文章中。这篇文章已经尽可能的易于获取:被钉在几个频道上，并链接到内部维基页面。这篇文章还包括一个术语表和常见问题，它随着项目的发展而发展。这可能是一个很容易忘记的任务，因此我们在吉拉的版块中添加了常规的标签来更新它。此外，我们的经理开始在每周的计划会议上询问我们的工程师关于我们与其他团队的沟通:我们是否收到重复的问题，或者任何常见的误解，等等。**

**对于像技术领导和架构师这样的“混合”团队，我们提供了 Slack 和博客帖子选项，以及一个他们可以查询、过滤和嵌入到自己系统中的端点。**

**这并不是说我们做得很完美:我们甚至根本不知道要这样做，直到我们不得不这样做，在项目进行到一半的时候，我们发现自己处于跨团队沟通失败的状态。然而，即使是最后一分钟，没有经验的方法仍然是一个巨大的和立即的改进。**

**总的来说，实施这些原则(即使是部分地和最后一分钟)，为我们的团队和公司提供了净收益。在业务和开发方面，我们更快地发现了更多的技术问题。这是通过与受影响的工程团队进行 Slack 集成，自动共享适当的指标实现的。在个人层面上，为想要查询我们的数据的团队提供混合选项，但在适当的上下文中，帮助我们重新获得了几个团队的信任，这些团队一直受到数据不足和交付质量差的困扰。至于我们的沟通开销:我们注意到，在发布我们的内部嵌入指标的博客帖子后，每周回应来自利益相关者、架构师、设计师和经理的消息的会议数量和时间大幅减少。**

**![](img/ddaca0e4356ecc0436fb28d0ab8b7e0d.png)**

# **在这个系列中**

*   **[**第一部分:简介+基础概念**](/@caito/data-driven-development-for-stream-processing-e4aeb6eaf4a3)**
*   **[**第二部分:度量驱动的度量周期**](/@caito/data-driven-development-for-stream-processing-36b8d5d9e8ec)**
*   ****第 3 部分:作为共享语言的度量标准****
*   ****第四部分:流处理的实际监控**—2021 年 4 月到达**

# **相关会谈**

*   **["Sweet Streams 由这些组成:将度量驱动的开发应用于 Apache Flink "](https://www.youtube.com/watch?v=_PolaklvKtc&ab_channel=FlinkForward)| Flink Forward EU/Virtual | 10.19–22.2020**
*   **“甜蜜的溪流由这些组成:闪电版”| DDD EU | 02/05/2021[录制中]**

# **找到我**

**推特:@Caito_200_OK
网页:[http://caito-200-ok.com/](http://caito-200-ok.com/)**