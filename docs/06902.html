<html>
<head>
<title>Scraping Website Data in 5 minutes with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python在5分钟内抓取网站数据</h1>
<blockquote>原文：<a href="https://medium.com/codex/scraping-website-data-in-5-minutes-with-python-5c4a3af0ffb0?source=collection_archive---------4-----------------------#2022-05-19">https://medium.com/codex/scraping-website-data-in-5-minutes-with-python-5c4a3af0ffb0?source=collection_archive---------4-----------------------#2022-05-19</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="5df4" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">电报机器人系列的第3部分。我们将创建我们自己的数据集，并用我们的机器人测试它！</h2></div><h2 id="3b7b" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">行动计划</h2><p id="1722" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">在制作我的表情机器人时，我遇到了一个相当大的不便——没有表情符号的公共数据库！在寻找了几个小时后，我决定是时候采取主动，自己做一个了。</p><p id="ae9d" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">另外，如果你碰巧发现了一个文字表情数据库，一定要告诉我(这样我就可以嘲笑自己浪费的时间)。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es kt"><img src="../Images/7609162b0e60484d4e92bb15938ec963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I5ybip0j-bjiWt4A"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">凯文·Ku在<a class="ae lj" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="212d" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">总体战略:</p><ol class=""><li id="ca8d" class="lk ll hi jx b jy ko kb kp ji lm jm ln jq lo kn lp lq lr ls bi translated">使用<strong class="jx hj"> BeautifulSoup </strong>制作一个解析器</li><li id="b77c" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">让这个解析器避免<strong class="jx hj">验证码和HTTP错误403 </strong></li><li id="bea5" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">找到所有包含表情符号的容器</li><li id="d2b8" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">根据情绪将它们放入一维数组中(一个代表快乐，一个代表愤怒，等等)</li><li id="a716" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">将我们所有的数组组合成一个<strong class="jx hj">单个熊猫数据帧</strong></li><li id="c6c2" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated"><strong class="jx hj">没有剧透，但我对结果数据帧的不寻常感到非常惊讶:)</strong></li></ol><h2 id="91f9" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">步骤1-获取网站和库</h2><p id="d63f" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">表情符号以字符串的形式出现，所以从HTML代码中检索它们应该相对容易。这是我发现的最好的一个:</p><blockquote class="ly lz ma"><p id="7655" class="jv jw mb jx b jy ko ij ka kb kp im kd mc kq kf kg md kr ki kj me ks kl km kn hb bi translated"><a class="ae lj" href="https://www.emoticonstext.com/flip-table.html" rel="noopener ugc nofollow" target="_blank">https://www.emoticonstext.com/flip-table.html</a></p></blockquote><p id="654f" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">这个网站有一个小窍门:</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es mf"><img src="../Images/507d489ad8411ebfeb610489b115222e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3jyigIy5EP3Ykg_SgrFRQ.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">看左上角——它写着“翻转表”,表示部分名称</figcaption></figure><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es mg"><img src="../Images/337b33bc3d46ca35ba7842c09784751a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWWDeay2g8goxfkPxZ7GDQ.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">现在看这里，它说“笑”，也指部分名称</figcaption></figure><p id="631c" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">如你所见，网站每个部分的URL都是不同的。这没问题，只是需要注意一些事情，这会给我们的抓取过程增加一些工作量。</p><p id="6c3f" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">让我们导入库:</p><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="lf lg et er es lh li bd b be z dx translated">导入库</figcaption></figure><p id="6d2f" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">现在让我们创建请求。这将打开网页并检查其内容。你可以放任何你想要的浏览器，我用了Mozilla，因为它似乎引起的麻烦最少(只是澄清一下，我用Chrome作为浏览器来抓取，你不需要放你实际浏览器的名称！)</p><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="mh mi l"/></div><figcaption class="lf lg et er es lh li bd b be z dx translated">阅读网页并创建请求</figcaption></figure><p id="9950" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">好了，解析时间到了！</p><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="mh mi l"/></div></figure><h2 id="a64e" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">步骤2—检索数据</h2><p id="0190" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">以下是该流程背后的逻辑:</p><ol class=""><li id="d938" class="lk ll hi jx b jy ko kb kp ji lm jm ln jq lo kn lp lq lr ls bi translated">我们获取url并设置解析器</li><li id="f991" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">解析器将寻找一个特定的容器(在我们的例子中，是<em class="mb"> span容器</em></li><li id="8896" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">我们将收集的数据放入1D阵列</li><li id="f799" class="lk ll hi jx b jy lt kb lu ji lv jm lw jq lx kn lp lq lr ls bi translated">我们确保数组长度相同(这将有助于我们稍后创建数据帧)</li></ol><p id="03bc" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">那有点拗口，让我们进入正题吧！</p><p id="0b62" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">首先，获取url并设置解析器:</p><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="9fc0" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">很好，我们为网站的一部分返回了一个数组。我将使用这个函数创建7个不同的数组——每种情绪一个数组。虽然这看起来又长又难，但它只是对每种情绪的前两行代码的重复！</p><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="8f78" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">恭喜你，你刚刚做了很多1D数组！</p><h2 id="64a1" class="ix iy hi bd iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju bi translated">步骤3-制作数据框</h2><p id="7650" class="pw-post-body-paragraph jv jw hi jx b jy jz ij ka kb kc im kd ji ke kf kg jm kh ki kj jq kk kl km kn hb bi translated">要创建一个数据框，我们只需将数组作为列添加到数据框中。我们将使用熊猫创建我们的数据框。</p><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="mh mi l"/></div></figure><p id="b57d" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">好吧，让我们看看我们努力的成果:</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es mj"><img src="../Images/ba76731bbd3405e572e7731110af44e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3AlYQhxBH9h8tQSfM67tCQ.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx translated">最终数据帧</figcaption></figure><p id="4051" class="pw-post-body-paragraph jv jw hi jx b jy ko ij ka kb kp im kd ji kq kf kg jm kr ki kj jq ks kl km kn hb bi translated">您现在可以在这个数据框上使用熊猫，并对它做任何您喜欢的事情！</p><blockquote class="ly lz ma"><p id="b6af" class="jv jw mb jx b jy ko ij ka kb kp im kd mc kq kf kg md kr ki kj me ks kl km kn hb bi translated">就这样了，伙计们！请继续关注第4部分，也就是最后一部分，在这里，我们将汇集我们所做的一切，并将我们的机器人发布到Telegram。</p></blockquote></div></div>    
</body>
</html>