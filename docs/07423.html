<html>
<head>
<title>How to serve Jekyll blog from a subdirectory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从子目录服务Jekyll博客</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-serve-jekyll-blog-from-a-subdirectory-548a046a3f69?source=collection_archive---------12-----------------------#2022-06-14">https://medium.com/codex/how-to-serve-jekyll-blog-from-a-subdirectory-548a046a3f69?source=collection_archive---------12-----------------------#2022-06-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="022e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是一个分步指南，介绍如何设置Jekyll从不同的URL而不是根来提供博客帖子。</p><p id="5e11" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">例如，如果您正在构建一个投资组合网站，您可能希望在主页上显示一个简短的简历和一些投资组合项目，同时从“/blog”子目录中提供博客帖子。</p><p id="4049" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这是Jekyll网站的默认URL结构:</p><p id="bea0" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">首页网址:</strong><a class="ae jd" href="http://127.0.0.1:4000/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:4000/</a>(显示博文列表)</p><p id="3e6d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">帖子网址:</strong><a class="ae jd" href="http://127.0.0.1:4000/jekyll/update/2022/06/13/welcome-to-jekyll.html" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:4000/Jekyll/update/2022/06/13/welcome-to-Jekyll . html</a>(显示单篇博文)</p><p id="4f55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是我们想要的:</p><p id="ab8d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">首页网址:</strong><a class="ae jd" href="http://127.0.0.1:4000/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:4000/</a>(显示像你的简历这样的静态内容)</p><p id="ec00" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">博客页面网址:</strong><a class="ae jd" href="http://127.0.0.1:4000/blog" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:4000/Blog</a>/(显示博文列表)</p><p id="a8fb" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated"><strong class="ih hj">帖子网址:</strong><a class="ae jd" href="http://127.0.0.1:4000/blog/jekyll/update/2022/06/13/welcome-to-jekyll.html" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:4000/blog/Jekyll/update/2022/06/13/welcome-to-Jekyll . html</a>(显示单篇博文)</p><h1 id="524d" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">先决条件</h1><p id="46a7" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">您需要在本地机器上安装Jekyll。</p><p id="d49f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">此外，我将假设您使用的是Jekyll预装的默认主题Minima。</p><h1 id="437b" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">步骤1 —创建home.html文件</h1><p id="0d8c" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">首先，在项目的根目录下创建一个名为<code class="du kh ki kj kk b">_layouts</code>的文件夹。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es kl"><img src="../Images/fdcd9ba58a45d6592627c8d5369606d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*0v14xFZtEJiK_8Wbw4WpgQ.png"/></div></figure><p id="cb84" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，您必须将<code class="du kh ki kj kk b">home.html</code>文件从Minima主题文件夹复制到您的项目文件夹中。</p><p id="d434" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要找出Minima安装在你系统的什么地方，打开一个终端，<code class="du kh ki kj kk b">cd</code>进入你的项目目录，然后运行:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="899b" class="kx jf hi kk b fi ky kz l la lb">bundle show minima</span></pre><p id="622d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我在Windows上的路径如下所示:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="0ff5" class="kx jf hi kk b fi ky kz l la lb">C:\Ruby30-x64\lib\ruby\gems\3.0.0\gems\minima-2.5.1</span></pre><p id="1163" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您使用的是Linux，它可能看起来像这样:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="d2c4" class="kx jf hi kk b fi ky kz l la lb">/home/username/gems/gems/minima-2.5.1</span></pre><p id="8f79" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在<code class="du kh ki kj kk b">_layouts</code>文件夹中找到<code class="du kh ki kj kk b">home.html</code>文件:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="c55c" class="kx jf hi kk b fi ky kz l la lb">C:\Ruby30-x64\lib\ruby\gems\3.0.0\gems\minima-2.5.1\_layouts\home.html</span></pre><p id="c38a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将该文件复制到您之前在项目文件夹中创建的<code class="du kh ki kj kk b">_layouts</code>文件夹中。</p><p id="2d5f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，现在您的项目文件夹应该如下所示:</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es lc"><img src="../Images/59f30ad6bd7bc012caa6477939e42eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*YWTAznwEBuprMT4ONrZgSw.png"/></div></figure><h1 id="14d3" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">步骤2 —创建blog.html文件</h1><p id="beff" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在项目的根目录下创建一个名为<code class="du kh ki kj kk b">blog.html</code>的文件。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es ld"><img src="../Images/36b27f9f012ee73c5ddebe75d493f1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/format:webp/1*OSfG7Ne32TPSNWe5OGsuwQ.png"/></div></figure><p id="a106" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">将以下几行添加到文件中:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="2bfb" class="kx jf hi kk b fi ky kz l la lb">---<br/>layout: page<br/>title: Blog<br/>permalink: /blog/<br/>---</span></pre><p id="0fe1" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们在三重破折号之间添加的键-值对成为页面元数据的一部分(或称之为前端内容)，它应该总是出现在文件的顶部。</p><p id="901c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您此时访问<a class="ae jd" href="http://127.0.0.1:4000/" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:4000/ </a>，您将会看到博客页面的链接已经添加到站点导航中。</p><figure class="km kn ko kp fd kq er es paragraph-image"><div class="er es le"><img src="../Images/79fed92d85fe9ddc15ecbec75413c00e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*wFtxi2LydFakK3EVFA-7lQ.png"/></div></figure><p id="8832" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">接下来，打开项目文件夹中的<code class="du kh ki kj kk b">_layouts\home.html</code>文件。</p><p id="26ae" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您会发现一个标题和一个无序列表，标题中包含一个类<code class="du kh ki kj kk b">post-list-heading</code>，无序列表中包含一个类<code class="du kh ki kj kk b">post-list</code>并封装在一个<code class="du kh ki kj kk b">if </code>语句中。无序列表中的<code class="du kh ki kj kk b">for </code>循环负责遍历你所有的博客文章，并将它们显示在页面上。</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="ed21" class="kx jf hi kk b fi ky kz l la lb">{%- if site.posts.size &gt; 0 -%}<br/>    &lt;h2 class="post-list-heading"&gt;{{ page.list_title | default: "Posts" }}&lt;/h2&gt;<br/>    &lt;ul class="post-list"&gt;<br/>      {%- for post in site.posts -%}<br/>      &lt;li&gt;<br/>        {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}<br/>        &lt;span class="post-meta"&gt;{{ post.date | date: date_format }}&lt;/span&gt;<br/>        &lt;h3&gt;<br/>          &lt;a class="post-link" href="{{ post.url | relative_url }}"&gt;<br/>            {{ post.title | escape }}<br/>          &lt;/a&gt;<br/>        &lt;/h3&gt;<br/>        {%- if site.show_excerpts -%}<br/>          {{ post.excerpt }}<br/>        {%- endif -%}<br/>      &lt;/li&gt;<br/>      {%- endfor -%}<br/>    &lt;/ul&gt;</span><span id="4590" class="kx jf hi kk b fi lf kz l la lb">&lt;p class="rss-subscribe"&gt;subscribe &lt;a href="{{ "/feed.xml" | relative_url }}"&gt;via RSS&lt;/a&gt;&lt;/p&gt;<br/>  {%- endif -%}</span></pre><p id="8317" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">复制这段代码并粘贴到我们之前创建的<code class="du kh ki kj kk b">blog.html</code>文件中。</p><p id="26b2" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在您的<code class="du kh ki kj kk b">blog.html</code>文件应该是这样的:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="8b1f" class="kx jf hi kk b fi ky kz l la lb">---<br/>layout: page<br/>title: Blog<br/>permalink: /blog/<br/>---</span><span id="5aea" class="kx jf hi kk b fi lf kz l la lb">{%- if site.posts.size &gt; 0 -%}<br/>    &lt;h2 class="post-list-heading"&gt;{{ page.list_title | default: "Posts" }}&lt;/h2&gt;<br/>    &lt;ul class="post-list"&gt;<br/>      {%- for post in site.posts -%}<br/>      &lt;li&gt;<br/>        {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}<br/>        &lt;span class="post-meta"&gt;{{ post.date | date: date_format }}&lt;/span&gt;<br/>        &lt;h3&gt;<br/>          &lt;a class="post-link" href="{{ post.url | relative_url }}"&gt;<br/>            {{ post.title | escape }}<br/>          &lt;/a&gt;<br/>        &lt;/h3&gt;<br/>        {%- if site.show_excerpts -%}<br/>          {{ post.excerpt }}<br/>        {%- endif -%}<br/>      &lt;/li&gt;<br/>      {%- endfor -%}<br/>    &lt;/ul&gt;</span><span id="5bad" class="kx jf hi kk b fi lf kz l la lb">&lt;p class="rss-subscribe"&gt;subscribe &lt;a href="{{ "/feed.xml" | relative_url }}"&gt;via RSS&lt;/a&gt;&lt;/p&gt;<br/>{%- endif -%}</span></pre><h1 id="7c6f" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">步骤3 —添加您的主页内容</h1><p id="dcd8" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">在项目文件夹内的<code class="du kh ki kj kk b">_layouts\home.html</code>文件中，用您希望在主页上显示的静态内容替换我们在步骤2中复制的代码。</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="cf95" class="kx jf hi kk b fi ky kz l la lb">---<br/>layout: default<br/>---</span><span id="fb99" class="kx jf hi kk b fi lf kz l la lb">&lt;div class="home"&gt;<br/>    {%- if page.title -%}<br/>    &lt;h1 class="page-heading"&gt;{{ page.title }}&lt;/h1&gt;<br/>    {%- endif -%}</span><span id="90eb" class="kx jf hi kk b fi lf kz l la lb">{{ content }}</span><span id="5b76" class="kx jf hi kk b fi lf kz l la lb">&lt;!-- bio --&gt;<br/>    &lt;h2&gt;My name is Jekyll&lt;/h2&gt;<br/>    &lt;p&gt;I'm a frontend developer who loves working with HTML, CSS and JavaScript.&lt;/p&gt;<br/>&lt;/div&gt;</span></pre><h1 id="4f97" class="je jf hi bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">步骤4 —修改配置文件</h1><p id="d5ee" class="pw-post-body-paragraph if ig hi ih b ii kc ik il im kd io ip iq ke is it iu kf iw ix iy kg ja jb jc hb bi translated">最后，打开<code class="du kh ki kj kk b">_config.yml</code>文件并添加以下行:</p><pre class="km kn ko kp fd kt kk ku kv aw kw bi"><span id="4c2d" class="kx jf hi kk b fi ky kz l la lb">permalink: /blog/:categories/:year/:month/:day/:title:output_ext</span></pre><p id="5c55" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对<code class="du kh ki kj kk b">_config.yml</code>文件进行任何更改后，确保重启服务器。</p><p id="8069" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这样！</p></div></div>    
</body>
</html>