<html>
<head>
<title>PostSharp — Everything you need to know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PostSharp —您需要知道的一切</h1>
<blockquote>原文：<a href="https://medium.com/codex/postsharp-everything-you-need-to-know-15d3197575fd?source=collection_archive---------20-----------------------#2021-07-08">https://medium.com/codex/postsharp-everything-you-need-to-know-15d3197575fd?source=collection_archive---------20-----------------------#2021-07-08</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/6f1694777f07e9d25224819dac5fd93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w9mZPVM1XlH8-CM6uI1s0A.png"/></div></div></figure><p id="569f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在我们深入研究PostSharp之前，您必须首先理解面向方面编程(AOP)的概念。这种编程风格允许分离不同且独立的功能。</p><p id="fd23" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">随着代码模块性的增加，这种风格力求内聚的功能。这些不同的功能被归类为横切关注点，它们将整个应用程序的主要部分分类，如数据模型、用户界面或业务逻辑。</p><p id="07b9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">这种高级封装形成了AOP的核心概念。有了对AOP的基本理解，让我们进入这篇文章，理解什么是PostSharp工具。</p><p id="72a8" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><strong class="is hj">目录</strong></p><ul class=""><li id="2101" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">什么是PostSharp工具？</li><li id="20f2" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">为什么要用PostSharp？</li><li id="a4be" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">使用PostSharp的好处</li><li id="783e" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">PostSharp解决的问题</li><li id="0bd9" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">PostSharp是如何工作的？</li><li id="9630" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">PostSharp使用的关键概念</li><li id="4042" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">结论</li></ul><h1 id="444c" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是PostSharp工具？</h1><p id="a0ef" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">PostSharp工具是最常用的软件开发工具之一。NET世界，它使用了面向方面编程的概念。它提供了将重复代码封装到自定义属性类中的能力。在PostSharp中，这些类被称为各种类型的方面类。</p><p id="7a9e" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">PostSharp提供了用比普通代码更少的代码行开发干净精确的代码块所需的工具。这种简洁的代码可以成功地编写，因为PostSharp操作方法通常被归类为设计模式自动化，其中它基于模式实现应用程序，并优化开发团队的生产力。</p><h1 id="64e7" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">为什么要用PostSharp？</h1><p id="8cec" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">以下是PostSharp工具的一些其他好处-</p><ul class=""><li id="a58e" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated">代码会更干净</li><li id="ab61" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">锅炉镀层减少，即消除重复代码。</li><li id="8bf4" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">代码的抽象性和模块化增加了</li><li id="6441" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">改进了维护，使调试更容易，性能也更容易跟踪。</li><li id="c180" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">由于缺陷减少，降低了维护成本</li><li id="7b41" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">当添加新功能或删除旧功能时，代码的弹性会增加</li><li id="35dd" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated">有条理的可读性增加了团队的生产力</li></ul><h1 id="8310" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">PostSharp解决的问题</h1><p id="390a" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">在进行常规编码时，不使用模式的概念。因此，模式通常是手工编码的，这进一步导致样板代码。</p><p id="c5c0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">以下是样板代码的影响:</p><h2 id="8090" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">高开发努力</h2><ul class=""><li id="6ced" class="jo jp hi is b it la ix lb jb lt jf lu jj lv jn jt ju jv jw bi translated"><strong class="is hj">大型代码库:</strong>在使用现有的主流编译器技术实现时，很少有应用程序会有大量的样板代码或重复代码。</li><li id="81ab" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">重新发明轮子:</strong>由于在传统编程语言中没有可重用的选项，像INotifyPropertyChanged这样的问题的解决方案总是被重新发明。</li></ul><h2 id="816a" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">质量差的软件</h2><ul class=""><li id="4e45" class="jo jp hi is b it la ix lb jb lt jf lu jj lv jn jt ju jv jw bi translated">大量缺陷:每一行代码都很有可能存在缺陷。然而，作为复制-粘贴结果的代码更有可能出现错误，因为在这种情况下，细微的差异往往会被忽略。</li><li id="c141" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">多线程问题:</strong>在使用面向对象编程来开发多线程应用程序时，很多价值都没有得到体现。PostSharp在较低的抽象层次上考虑问题，包括事件、互锁访问或锁，它们最终会导致随机数据竞争或死锁。</li><li id="6ed1" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">缺乏健壮性:</strong>由于大量的源代码，异常处理或缓存经常在企业级特性中被故意省略。这在应用程序的某些部分被无意地禁止了，这些应用程序仍然没有经过测试，因此是不可靠的。</li></ul><h2 id="f519" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">难以添加或修改功能</h2><ul class=""><li id="076c" class="jo jp hi is b it la ix lb jb lt jf lu jj lv jn jt ju jv jw bi translated"><strong class="is hj">难以维护的不可读代码:</strong>当最初的开发人员离开后，阅读业务代码变得更加困难。它经常充斥着非功能性的底层需求，这使得它很难理解和维护。</li><li id="9a7f" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">强耦合:</strong>问题分解不好形成重复代码。强耦合使得更改异常处理、INotifyPropertyChange、日志记录等实现变得更加困难，因为它们分散在成吨的文件中。</li></ul><h2 id="4a1e" class="lf kd hi bd ke lg lh li ki lj lk ll km jb lm ln kq jf lo lp ku jj lq lr ky ls bi translated">新团队成员的缓慢增加</h2><ul class=""><li id="e8eb" class="jo jp hi is b it la ix lb jb lt jf lu jj lv jn jt ju jv jw bi translated"><strong class="is hj">需要大量知识:</strong>当新的团队成员加入到某个特定特性的工作中时，他们需要首先了解线程、缓存和其他技术问题，然后才能开始贡献商业价值。这是一个分工不好的例子。</li><li id="2133" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">长反馈循环:</strong>即使在小团队中，日志、线程、诊断、撤销、重做等模式。可能会被不同的开发者以不同的方式处理。因此，架构师需要看到新的团队成员遵循设计标准，并利用他们的大部分时间审查手动代码。</li></ul><p id="8753" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">下图显示了PostSareharp可以解决的不同问题:</p><figure class="lx ly lz ma fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lw"><img src="../Images/7c834bcbf0b2f2fa72f1c2a707115a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4Wnc2mv0M0CXXMsO"/></div></div></figure><h1 id="5b54" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">PostSharp是如何工作的？</h1><p id="fe05" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">从概念上讲，你可以把PostSharp看作是VB编译器或者C#的扩展。然而，实际上微软的编译器本身是不可扩展的，但是构建的过程是可以扩展的。类似的事情也发生在PostSharp中——当它将自己插入到构建过程中时，它会对编译器的输出进行后处理。</p><p id="27d9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">让我们看看它是如何发生的:</p><ul class=""><li id="150c" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj"> MSBuild集成:</strong>使用<em class="mb"> PostSharp.targets </em>，PhotoSharp将自己集成到构建过程中。<em class="mb"> PostSharp.targets </em>由名为<em class="mb"> install.ps1 </em>的NuGet安装脚本使用PostSharp导入到每个项目中。<em class="mb"> PostSharp.targets在构建过程中增加了几个步骤</em>后处理是PostSharp自己处理的编译器输出中最重要的步骤。</li><li id="4343" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj"> MSIL重写</strong>:通过读取和反汇编中间汇编，验证，执行所需的转换，并将最终汇编写入磁盘，PostSharp对编译器输出进行后处理。虽然这听起来很神奇，但请记住，自2004年以来，PostSharp的MSIL技术已经被成千上万的开发人员使用，因为它非常稳定和成熟。</li></ul><h1 id="c886" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">PostSharp使用的关键概念</h1><p id="dcbd" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">为了利用设计模式自动化，PostSharp使用了下面给出的几个概念的组合:</p><ul class=""><li id="c2cc" class="jo jp hi is b it iu ix iy jb jq jf jr jj js jn jt ju jv jw bi translated"><strong class="is hj">元编程:</strong>写一段代码，对自己或者其他程序进行分析和转换，就是元编程。一个. NET程序在内部被PostSharp表示为一个. NET对象，因此它可以被认为是一个元编程工具。</li><li id="39ac" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">面向方面编程:</strong> AOP是一种与OOP正交的编程风格，它允许模块化某些特性，否则这些特性会横切大量的方法和类。可以很有信心地说，PostSharp是一个先进的AOP框架。</li><li id="0837" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">静态程序分析:</strong>对一个不执行的程序进行分析，称为静态程序分析。静态分析工具有两个系列，即结构静态分析和行为静态分析。PostSharp只有用于结构静态分析的工具。</li><li id="4a93" class="jo jp hi is b it jx ix jy jb jz jf ka jj kb jn jt ju jv jw bi translated"><strong class="is hj">动态程序分析:</strong>程序在执行过程中的分析称为动态程序分析。它用于尽早检测问题，以防止更大的损害。为了对照线程模型检查程序，PostSharp使用了动态分析。</li></ul><h1 id="b0ee" class="kc kd hi bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="2ac0" class="pw-post-body-paragraph iq ir hi is b it la iv iw ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn hb bi translated">从这篇文章中看到的好处，你可以有把握地得出结论，PostSharp是一个惊人的工具，可以用来消除任何样板文件。它还有助于分离不同代码集之间的关注点。即使经过几年的发展，它仍然是全球各大公司使用的趋势工具。</p></div><div class="ab cl mc md gp me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="hb hc hd he hf"><p id="d627" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><em class="mb">原载于</em><a class="ae mj" href="https://www.partech.nl/nl/publicaties/2021/06/postsharp---everything-you-need-to-know" rel="noopener ugc nofollow" target="_blank"><em class="mb">https://www . partech . nl</em></a><em class="mb">。</em></p></div></div>    
</body>
</html>