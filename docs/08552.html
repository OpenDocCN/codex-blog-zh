<html>
<head>
<title>How to quickly add chat to your Swift app with the Sendbird UIKit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Sendbird UIKit快速将聊天添加到您的Swift应用程序中</h1>
<blockquote>原文：<a href="https://medium.com/codex/how-to-quickly-add-chat-to-your-swift-app-with-the-sendbird-uikit-78bcee051743?source=collection_archive---------10-----------------------#2022-08-16">https://medium.com/codex/how-to-quickly-add-chat-to-your-swift-app-with-the-sendbird-uikit-78bcee051743?source=collection_archive---------10-----------------------#2022-08-16</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><figure class="hh hi ez fb hj hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es hg"><img src="../Images/580eb5e2abc5d88680ec0e92b66f017a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2AAu10v9libgemON.png"/></div></div><figcaption class="hr hs et er es ht hu bd b be z dx translated">仙鸟2020</figcaption></figure><div class=""/><div class=""><h2 id="8253" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">使用可定制的用户界面组件，在您的iOS应用上几分钟内启动并运行应用内聊天</h2></div><p id="479d" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">由谷嘉诚<br/>开发商代言| <a class="ae ki" href="https://www.sendbird.com/" rel="noopener ugc nofollow" target="_blank">仙鸟</a></p><p id="4851" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><em class="kj">你可能会发现查看iOS UIKit </em> <a class="ae ki" href="https://github.com/SendbirdCommunity/sendbird-uikit-swift-sample" rel="noopener ugc nofollow" target="_blank"> <em class="kj">聊天示例</em> </a> <em class="kj">很有用。有关本教程中材料的其他指导，请参见</em> <a class="ae ki" href="https://sendbird.com/docs/chat/v3/ios/quickstart/send-first-message" rel="noopener ugc nofollow" target="_blank"> <em class="kj">文档</em> </a> <em class="kj">。您也可以查看Sendbird Chat的</em> <a class="ae ki" href="https://sendbird.com/demos/in-app-chat" rel="noopener ugc nofollow" target="_blank"> <em class="kj">演示</em> </a> <em class="kj">并访问我们的</em> <a class="ae ki" href="https://sendbird.com/features/chat-messaging/uikit" rel="noopener ugc nofollow" target="_blank"> <em class="kj">网站</em> </a> <em class="kj">以了解更多关于Sendbird Chat可以提供的内容。</em></p><h1 id="d0c1" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">介绍</h1><p id="95d4" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">本教程讲解如何在一个iOS项目中使用<a class="ae ki" href="https://developer.apple.com/xcode/swiftui/" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy"> SwiftUI </strong> </a>实现<a class="ae ki" href="https://sendbird.com/docs/uikit" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy"> Sendbird的UIKit </strong> </a>。</p><p id="b006" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">开始之前，请确保您已经:</p><ul class=""><li id="6c8d" class="lh li hx jo b jp jq js jt jv lj jz lk kd ll kh lm ln lo lp bi translated">Xcode版本12.4或更高版本</li><li id="7585" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh lm ln lo lp bi translated">14或更新版本的iOS部署版本</li><li id="b7ef" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh lm ln lo lp bi translated">Cocoapods 1.10.1或更新版本</li><li id="c317" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh lm ln lo lp bi translated">一个活跃的<a class="ae ki" href="https://dashboard.sendbird.com/auth/signup" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy"> Sendbird账号</strong> </a></li><li id="bde4" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh lm ln lo lp bi translated">一个现有的Sendbird项目或一个全新的Swift UI项目连同<a class="ae ki" href="https://developer.apple.com/tutorials/swiftui/creating-and-combining-views" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy">这些指令</strong> </a></li></ul><p id="468c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">请注意，本教程假设您对Swift有基本的了解。</p><p id="b36d" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">所以让我们开始吧！</p><h1 id="4580" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">第一步。将Sendbird UIKit添加到Swift UI项目</h1><p id="5efc" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">首先，将Sendbird UIKit依赖项添加到您的Cocoapod。podspec文件(关于使用Carthage的说明，参见<a class="ae ki" href="https://sendbird.com/docs/uikit/v1/ios/getting-started/install-uikit#2-install-with-carthage" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy">本页</strong> </a>):</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="2717" class="me kl hx ma b fi mf mg l mh mi">pod 'SendbirdUIKit'</span></pre><p id="364e" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">确保最低平台版本为10.3或更高版本:</p><pre class="lv lw lx ly fd lz ma mb mc aw md bi"><span id="240b" class="me kl hx ma b fi mf mg l mh mi">platform :ios, '10.3'</span></pre><p id="7d26" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">然后运行“pod安装”。</p><h1 id="f036" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">第二步。创建UIKit容器</h1><p id="1a39" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">因为Sendbird UIKit最初是用Apple UIKit创建的，所以您需要创建一个返回UIViewController类的UIViewControllerRepresentable结构。</p><ol class=""><li id="33d5" class="lh li hx jo b jp jq js jt jv lj jz lk kd ll kh mj ln lo lp bi translated">首先创建一个新的Swift文件，并将其命名为“ChannelListView.swift”。</li><li id="483c" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh mj ln lo lp bi translated">通过导入“SwiftUI”和“SendBirdUIKit”替换默认的“import Foundation”导入语句。</li><li id="20f4" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh mj ln lo lp bi translated">创建名为“ChannelListViewController”的UIViewController类。</li></ol><p id="b26b" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> 3a。</strong>添加Objective-C函数，创建UINavigationController的实例，以Sendbird的SBUCHannelListViewController作为根视图控制器。</p><p id="fc4c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> 3b。</strong>在‘viewdidappear’覆盖块中调用该函数。</p><p id="9c10" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">4.创建一个名为“ChannelListViewContainer”的UIViewControllerRepresentable结构。这将返回一个ChannelListViewController的实例。</p><p id="820c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> 4a。</strong>将UIViewControllerType typealias设置为上面的ChannelListViewController类。</p><p id="487c" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> 4b。让所需的makeUIViewController函数返回ChannelListViewController类的一个实例。</strong></p><p id="a96e" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated"><strong class="jo hy"> 4c。</strong>添加所需的updateUIViewController函数。如果需要，您可以将其留空。</p><figure class="lv lw lx ly fd hk"><div class="bz dy l di"><div class="mk ml l"/></div></figure><h1 id="e736" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">第三步。在Swift UI中初始化Sendbird</h1><p id="e90f" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">在默认的“ContentView.swift”文件中，我们将在init()块中执行以下操作:</p><ol class=""><li id="c39a" class="lh li hx jo b jp jq js jt jv lj jz lk kd ll kh mj ln lo lp bi translated">使用' SBUMain.initialize()'初始化Sendbird SDK，并传入一个应用程序ID*。</li><li id="eac7" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh mj ln lo lp bi translated">用唯一的用户ID指定当前用户。检索或设置这些id通常应该与您现有的用户管理过程一起完成。如果你想提前创建一些测试用户，请看<a class="ae ki" href="https://youtu.be/QCS0eyO2Q3U?t=35" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy">本视频</strong> </a>。</li><li id="cb66" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh mj ln lo lp bi translated">使用“SBUMain.connect”功能连接到Sendbird，该功能将使用**以上的设置。</li><li id="48cf" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh mj ln lo lp bi translated">更新body属性以利用我们之前创建的“ChannelListViewController”。</li></ol><figure class="lv lw lx ly fd hk"><div class="bz dy l di"><div class="mk ml l"/></div></figure><ul class=""><li id="1349" class="lh li hx jo b jp jq js jt jv lj jz lk kd ll kh lm ln lo lp bi translated">您的应用ID可以通过<a class="ae ki" href="https://dashboard.sendbird.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy"> Sendbird仪表盘</strong> </a>找到或创建:</li></ul><figure class="lv lw lx ly fd hk er es paragraph-image"><div role="button" tabindex="0" class="hl hm di hn bf ho"><div class="er es mm"><img src="../Images/5e1b9a0c3ffa3e9f1d63c248a83a8a3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W55LwFeBzkTjluLE.jpg"/></div></div></figure><p id="2bc0" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">* *请注意，如果应用ID无效或我们遇到连接错误，则SBDUser的实例将不会在完成处理程序中返回。</p><h1 id="c25e" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">第四步。构建并运行</h1><p id="5957" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">如果您使用有效的应用程序id，然后构建它并在模拟器或设备上运行，您将看到以下屏幕:</p><figure class="lv lw lx ly fd hk er es paragraph-image"><div class="er es mn"><img src="../Images/76869c951b9fdd39d6d9fcfb4b9ae647.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/0*TLZ7xxDentNx_R5v.png"/></div></figure><p id="9e90" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">UIKit现在已经在您的SwiftUI应用程序中启动并运行了！</p><h1 id="52a4" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">第五步。试车</h1><p id="ef43" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">使用按钮与另一个测试用户创建新的群组频道。在UIKit自动创建的SBUCreateChannelViewController(或SBUInivteUserViewController或SBUMemberListViewController)视图实例中出现任何用户之前，您的应用程序中至少需要有两个用户:</p><figure class="lv lw lx ly fd hk er es paragraph-image"><div class="er es mn"><img src="../Images/e3ff09796970e2b7c8b0ee737c7d85d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/0*nEjuxwU4Jtkw4dO_.png"/></div></figure><p id="028f" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">选择几个要创建频道的用户。然后点击“创建”按钮，自动打开一个SBUChannelViewController视图的实例。一旦您在用户中发送了一些消息，您将会看到类似这样的内容:</p><figure class="lv lw lx ly fd hk er es paragraph-image"><div class="er es mo"><img src="../Images/daec7a13fe59704b7432c1989ec22036.png" data-original-src="https://miro.medium.com/v2/resize:fit:552/format:webp/0*touY7Vv44WHd5w5t.png"/></div></figure><p id="40b0" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">这里介绍的所有代码都可以在<a class="ae ki" href="https://github.com/SendbirdCommunity/sendbird-uikit-swift-sample" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy">这个demo repo </strong> </a>中找到。</p><h1 id="ac81" class="kk kl hx bd km kn ko kp kq kr ks kt ku jd kv je kw jg kx jh ky jj kz jk la lb bi translated">结论</h1><p id="042c" class="pw-post-body-paragraph jm jn hx jo b jp lc iy jr js ld jb ju jv le jx jy jz lf kb kc kd lg kf kg kh hb bi translated">恭喜你！现在，您已经在iOS项目中实现了Sendbird UIKit。</p><p id="7742" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">在本教程中，我们讲述了如何:</p><ul class=""><li id="245d" class="lh li hx jo b jp jq js jt jv lj jz lk kd ll kh lm ln lo lp bi translated">将Sendbird依赖项添加到Swift iOS项目中</li><li id="0385" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh lm ln lo lp bi translated">创建一个UIViewControllerRepresentable容器来呈现Sendbird的UIKit</li><li id="ca75" class="lh li hx jo b jp lq js lr jv ls jz lt kd lu kh lm ln lo lp bi translated">在一个有效的Swift项目中初始化并运行Sendbird的UIKit</li></ul><p id="837a" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">如果您需要更多信息或指导，请不要忘记查看我们的<a class="ae ki" href="https://sendbird.com/docs/chat/v3/ios/quickstart/send-first-message" rel="noopener ugc nofollow" target="_blank"> <strong class="jo hy">文档</strong> </a>。</p><p id="12e5" class="pw-post-body-paragraph jm jn hx jo b jp jq iy jr js jt jb ju jv jw jx jy jz ka kb kc kd ke kf kg kh hb bi translated">开心聊楼！</p></div></div>    
</body>
</html>