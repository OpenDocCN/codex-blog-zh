<html>
<head>
<title>Creating a robust pull request</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建可靠的拉取请求</h1>
<blockquote>原文：<a href="https://medium.com/codex/creating-a-robust-pull-request-f5a9de46f85?source=collection_archive---------22-----------------------#2021-08-27">https://medium.com/codex/creating-a-robust-pull-request-f5a9de46f85?source=collection_archive---------22-----------------------#2021-08-27</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/e055d127933df22d9e958900f011bd08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFTTX8xVGkKJC8BPSLbIsg.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">安妮·斯普拉特在<a class="ae iu" href="https://unsplash.com/s/photos/programming-team?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="7a6d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">我过去不喜欢审核流程，因为它会减慢我的PRs被合并并部署到生产中的速度。我记得我当时的首席技术官<a class="jt ju ge" href="https://medium.com/u/2f2c757229ad?source=post_page-----f5a9de46f85--------------------------------" rel="noopener" target="_blank"> Arzumy MD </a>在一次谈话中谈到了这个问题，他指导我理解了为什么我们必须在我们创建的PRs中付出更多努力。我记得的一些要点是:</p><ul class=""><li id="1864" class="jv jw hi ix b iy iz jc jd jg jx jk jy jo jz js ka kb kc kd bi translated">PRs在全球范围内对每个人开放(在技术团队中)，所以你可以阅读其他高级工程师的PRs，看看他们如何以及为什么写哪一行代码。</li><li id="8495" class="jv jw hi ix b iy ke jc kf jg kg jk kh jo ki js ka kb kc kd bi translated">你的公关也将提供给每个人，尽可能的自我记录，这样它可以为你自己和你的同事提供更多的信息，以备不时之需。</li><li id="200a" class="jv jw hi ix b iy ke jc kf jg kg jk kh jo ki js ka kb kc kd bi translated">你应该能够使用你的PR来帮助你自己(现在和将来)和你的同事，他们将审查你的代码，提供尽可能多的你所做工作的背景。</li></ul><p id="f467" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这样的小进步对我的技术职业生涯产生了巨大的影响，我如何看待代码/拉取请求，因为我将我的PRs视为一个产品本身，我有责任确保它“如其所愿”地工作，并且它具有可观察性，以验证它与过去和未来的PRs一起工作(输入规格，但我们将在其他时间讨论)。</p><p id="914d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我将解释并详细说明我个人是如何处理任何人分配给我的每张票的。这都是我个人的观点，所以它可能对你有用，也可能对你没用，我把判断留给你和你的公司如何进行软件工程过程。我们主要关注公关方面，而不是代码。</p><h1 id="1c53" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">提交</strong></h1><p id="123c" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">我坚信不要为公关创造太多承诺。通常，信念是创建尽可能多的提交，但是这使得回溯代码变得非常困难，并且<code class="du lm ln lo lp b">git blame</code>/git lens对回溯没有帮助。我使用<code class="du lm ln lo lp b"><a class="ae iu" href="https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog" rel="noopener ugc nofollow" target="_blank">git reflog</a></code>来检查我的进度，并将一个主要特性限制在一次提交中。我也经常使用<code class="du lm ln lo lp b">git rebase -i</code>来管理我的提交，所以你可以提交所有你想提交的，然后再压缩它。如果需要更多的提交，我总是用票号标记提交的首字母。例如，<code class="du lm ln lo lp b">MANGO-245</code>，其中<code class="du lm ln lo lp b">MANGO</code>是你的团队/jira董事会的名称，<code class="du lm ln lo lp b">245</code>是门票号码。</p><ul class=""><li id="b18a" class="jv jw hi ix b iy iz jc jd jg jx jk jy jo jz js ka kb kc kd bi translated">帮助在提交历史记录中跟踪提交。</li><li id="ad6d" class="jv jw hi ix b iy ke jc kf jg kg jk kh jo ki js ka kb kc kd bi translated">当像datadog或sentry.io这样的服务追溯异常和错误时，您可以准确地指出问题在哪一行以及在哪一个PR中被合并和部署。</li><li id="9e16" class="jv jw hi ix b iy ke jc kf jg kg jk kh jo ki js ka kb kc kd bi translated">一旦有了包含这类信息的最小提交消息，就有助于调试哪里出错了。</li><li id="9480" class="jv jw hi ix b iy ke jc kf jg kg jk kh jo ki js ka kb kc kd bi translated">有助于修复补丁，因为如果需要的话，你可以从一个分支中挑选出一个完整的特性，或者删除它🤷‍♂.</li></ul><p id="9460" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">git中的分支</strong>是另一个谜。它可以简单复杂。困难之处在于从哪里分支以及指向哪里。在这方面需要特别小心。大多数情况下，最好是使用git的某种工具，如<a class="ae iu" href="https://www.sourcetreeapp.com/" rel="noopener ugc nofollow" target="_blank"> sourcetree </a>，但我使用命令行和基于gui的解决方案的组合方法←这只是在事情非常复杂的情况下，也就是说，您的整个公司使用一个单一的模式文件，并且您只希望您的更改显示在您的PR中。这让我想到:</p><h1 id="5d95" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak"> Git部分</strong></h1><p id="8c86" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">这是最关键的部分之一，但我们对此习以为常，以至于不去想它。我想指出我通常的流程，然后是一些边缘案例。</p><p id="5dbd" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><em class="lq">新功能请求</em></p><pre class="lr ls lt lu fd lv lp lw lx aw ly bi"><span id="a463" class="lz kk hi lp b fi ma mb l mc md">$ git checkout develop  //assuming a 'main'/'develop' approach<br/>$ git pull              // to pull all the latest changes<br/>$ git checkout -b "feature/MANGO-245-describe-the-ticket"<br/>-- do moi werk --<br/>$ git commit -m "MANGO-245 describe the commit"<br/>$ git push origin head</span></pre><p id="1bac" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果我需要做一个不太大的更改，我不会创建另一个提交…在<code class="du lm ln lo lp b">-- do moi werk again --</code>之后，我会:</p><pre class="lr ls lt lu fd lv lp lw lx aw ly bi"><span id="e584" class="lz kk hi lp b fi ma mb l mc md">$ git pull origin &lt;target-branch&gt; --rebase<br/>$ git commit --amend --no-edit</span></pre><p id="fad7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><code class="du lm ln lo lp b">--no-edit</code>标志让您拥有相同的提交消息。<br/>我恳请您查看git命令，如:</p><pre class="lr ls lt lu fd lv lp lw lx aw ly bi"><span id="4b99" class="lz kk hi lp b fi ma mb l mc md">$ git reflog<br/>$ git rebase -i<br/>$ git reset (--hard | --soft)</span></pre><p id="04b1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这些都是我从日常角度能想到的。对于任何git f*** up，git有一个惊人的博客，你可能想看看。</p><p id="852b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当你在逆境中挥舞你的git力量时，请保持检查你的PR目标分支的进展。</p><p id="5ba7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">使用<code class="du lm ln lo lp b">$ git diff feature/MANGO-245-your-ticket...develop</code>，检查不断增加的差异，众所周知，这些差异有时每秒钟都会增加。</p><p id="6944" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">评论你的心流，我会把它添加到博客上。或者我们可以用git-flows IDK创建一个存储库，我很乐意接受这个想法😃。</p><p id="711b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">现在，我们几乎完成了逻辑和git的工作，我们必须考虑如果我们的公关造成公司大规模停机，我们会因此损失数十亿美元，世界上每个人都会死亡……<strong class="ix hj">只有cz的公关</strong>。*啜饮咖啡*可能不会，但你知道，你永远不知道…无论如何</p><h1 id="14f7" class="kj kk hi bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">拉式请求模板</strong></h1><p id="2061" class="pw-post-body-paragraph iv iw hi ix b iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo ll jq jr js hb bi translated">我喜欢一个好的公关模板，让公关成为一种享受。除了<strong class="ix hj">保持PR尽可能小</strong>应该是一个高优先级的事实之外，PR模板确实可以帮助评审者了解已经完成了什么样的工作。由于上下文切换是最难完成的任务之一，我们必须用足够的上下文来帮助我们的评审者，这样就不会增加他们的认知复杂性。</p><div class="me mf ez fb mg mh"><a href="https://betterprogramming.pub/github-templates-the-smarter-way-to-formalize-pull-requests-among-development-teams-89f8d6a204f" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hj fi z dy mm ea eb mn ed ef hh bi translated">Github模板:在开发团队中形式化拉取请求的更聪明的方法</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">不再有令人困惑的拉取请求</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">better编程. pub</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv io mh"/></div></div></a></div><p id="c269" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">链接一篇发表在<a class="ae iu" href="https://betterprogramming.pub/" rel="noopener ugc nofollow" target="_blank">https://betterprogramming.pub/</a>的非常好的文章。</p><p id="e5c7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">主要的目标是总是问你自己，我们如何能通过帮助一些背景来帮助减少我们非人道努力的人性方面的一些紧张。</p><p id="437a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">旁注:这些详细的公关模板可以帮助你解释你做了什么改变以及为什么(Psst…归咎于<code class="du lm ln lo lp b">MANGO-245</code>，经典😉).</p><p id="b972" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">总而言之，这是我个人在每一次公关中做的几件事。我真诚地希望它能帮助你更有效地管理你的工作，并为你节省一些焦虑，因为我们在各自的盘子里都有足够的，因为它是…</p></div></div>    
</body>
</html>