<html>
<head>
<title>Fixing the missing assembly reference error in Unity projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复Unity项目中缺少程序集引用的错误</h1>
<blockquote>原文：<a href="https://medium.com/codex/fixing-the-missing-assembly-reference-error-in-unity-projects-a1d2cee36a3e?source=collection_archive---------0-----------------------#2022-09-12">https://medium.com/codex/fixing-the-missing-assembly-reference-error-in-unity-projects-a1d2cee36a3e?source=collection_archive---------0-----------------------#2022-09-12</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/72076c7d25765abc579cb0043e254aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iUTmpnNMUDIRzMGE9cGMug.png"/></div></div></figure><p id="df16" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">当处理使用多个程序集或使用其他第三方包的代码时，您可能会遇到如下情况:</p><blockquote class="jo jp jq"><p id="471d" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">找不到类型或命名空间名称“ClassName ”(是否缺少using指令或程序集引用？)</p></blockquote><p id="31a2" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">您尝试使用IDE的intellisense来实现using import，但是您得到的只是关于如何生成类文件的选项，即使导入的脚本就在那里。脚本已经导入了，那么是什么导致了这个问题呢？</p><blockquote class="jo jp jq"><p id="7f34" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">要在一个干净的小项目中试验汇编引用，请参见Github 上的<a class="ae jv" href="https://github.com/agostonr/Unity-Assembly-Reference-Example" rel="noopener ugc nofollow" target="_blank">示例。</a></p></blockquote><h1 id="b518" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">在Unity中使用程序集</h1><p id="e512" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">程序集是为协同工作而构建的类型和资源的集合，并形成功能的逻辑单元。默认情况下，Unity将你的脚本编译成一个预定义的汇编，<em class="jr">Assembly-CSharp.dll</em>，但是对于更大的项目，这种单一的方法可能会降低迭代代码变更的编译时间。通过定义程序集，您可以有效地建立模块化和可重用性。</p><blockquote class="jo jp jq"><p id="0f70" class="iq ir jr is b it iu iv iw ix iy iz ja js jc jd je jt jg jh ji ju jk jl jm jn hb bi translated">在<a class="ae jv" href="https://docs.unity3d.com/Manual/ScriptCompilationAssemblyDefinitionFiles.html" rel="noopener ugc nofollow" target="_blank"> Unity手册</a>或<a class="ae jv" href="https://docs.microsoft.com/en-us/dotnet/standard/assembly/" rel="noopener ugc nofollow" target="_blank">中阅读更多关于组件的信息。NET docs </a>。</p></blockquote><p id="07e4" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">因此，当导入另一个包时，您正在使用它们的程序集，并且它必须在您的代码的程序集中被引用，您才能实际使用它。</p><h1 id="74ff" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">在代码中引用另一个程序集</h1><p id="33e4" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">为了简单起见，我给你的示例项目很小，但它足以解释这个概念。</p><p id="bdb0" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">假设我们有一个<code class="du kz la lb lc b">GameplayManager</code>控制游戏的整体状态，包括启用和禁用控件。然后我们有我们的球员的移动控制<code class="du kz la lb lc b">PlayerController</code>和<code class="du kz la lb lc b">PlayerWeapons</code>。为了给出一个使用第三方Unity包的例子，我还引用了一个导入的资产存储项目，在这个例子中是我的<a class="ae jv" href="https://assetstore.unity.com/packages/tools/game-toolkits/aim-assist-pro-226597" rel="noopener ugc nofollow" target="_blank"> Aim Assist </a>包。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es ld"><img src="../Images/51bcaca943f1cd544b569c7f0674aa78.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*RC9ghQhUV4KznVYV3jfBMQ.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">项目目录树</figcaption></figure><p id="5495" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">你可能已经熟悉了<code class="du kz la lb lc b">.cs</code>文件。装配定义文件是<code class="du kz la lb lc b">.asmdef</code>文件。请注意它们在项目目录中的位置。同一个级别的代码文件，或者程序集定义文件子目录下的代码文件，都属于该程序集定义。</p><p id="348b" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kz la lb lc b">Gameplay</code>、<code class="du kz la lb lc b">Player</code>和第三方代码是独立的组件，它们不会自动相互了解。</p><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">摘自GameplayManager</figcaption></figure><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">摘自PlayerController</figcaption></figure><figure class="le lf lg lh fd ij"><div class="bz dy l di"><div class="lm ln l"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">摘自PlayerWeapons</figcaption></figure><p id="a10c" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated"><code class="du kz la lb lc b">PlayerController</code>和<code class="du kz la lb lc b">PlayerWeapons</code>都依靠<code class="du kz la lb lc b">GameplayManager</code>来告诉它控件是否被启用。<code class="du kz la lb lc b">PlayerWeapons</code>也使用第三方包。然而，当你试图编译时，即使你添加了必要的<code class="du kz la lb lc b">using</code>语句，你也会得到丢失的引用错误。同样令人担忧的是，你的IDE的智能感知并没有提示给一个类一个建议。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lo"><img src="../Images/9564b103a7ec9b86bb714a66637083e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r-Alr5kytbVd5BQcQuvncg.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">缺少引用，但没有using语句建议</figcaption></figure><h1 id="0c91" class="jw jx hi bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">问题的解决方案</h1><p id="ac3d" class="pw-post-body-paragraph iq ir hi is b it ku iv iw ix kv iz ja jb kw jd je jf kx jh ji jj ky jl jm jn hb bi translated">如果你知道什么是程序集，以及程序集如何适应一个项目，这个解决方案实际上非常简单。</p><p id="e667" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">在Unity编辑器中，为你的播放器找到<code class="du kz la lb lc b">.asmdef</code>文件:</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lp"><img src="../Images/9d4e4effeb35e5308c1ae1743426d307.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*eNUEgbWikr-zHA-PKDp-GA.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">播放器组件定义文件</figcaption></figure><p id="b740" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">打开您的检查器并查看选项:</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lq"><img src="../Images/308e0d0c2f6aae8690ebe148544d8a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*OtRRU5B_QH6rtISy6y0cLg.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">程序集定义设置</figcaption></figure><p id="91c9" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">标记字段“程序集定义引用”不包含对任何其他程序集的引用。因此，这些程序集中的所有其他代码文件对于该程序集都是不可见的。使用<code class="du kz la lb lc b">GUID</code> s来识别组件是Unity推荐的方法。</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lr"><img src="../Images/aa0f187ad60444066db3329b1224acc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*CuULT9kQ9b0uUiiBEdF1RQ.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">包括程序集定义</figcaption></figure><p id="6b7a" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">点击小<code class="du kz la lb lc b">+</code>图标两次，创建两个参考槽。然后，我们通过单击参考槽右侧的小旋钮来选择可用的装配定义文件:</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es ls"><img src="../Images/52ec0563a48240e529e1d002ff1f3318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*5KeQAIKh2QNiZW5T2FoFKA.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">选择程序集引用文件</figcaption></figure><p id="720d" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">然后在最后，点击应用。这包括对您的<code class="du kz la lb lc b">.asmdef</code>文件的引用:</p><figure class="le lf lg lh fd ij er es paragraph-image"><div class="er es lt"><img src="../Images/e8d71fb265300c8e7bcaabb6afbfcb58.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*nfiYLPkxFulosTrQdV2Exg.png"/></div><figcaption class="li lj et er es lk ll bd b be z dx translated">修改后的演示。Player.asmdef文件</figcaption></figure><p id="8657" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在回到您的ide中，调出您的导入建议，您应该会看到弹出的<code class="du kz la lb lc b">using</code>语句:</p><figure class="le lf lg lh fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/7f36846ad0f041f85e288e385763ad5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hVnKtvb9NWdeBe5Xi-MKIA.png"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx translated">工作进口建议</figcaption></figure><p id="143f" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">现在你应该有一个漂亮干净的Unity控制台窗口，显示没有装配参考错误，你可以开始了。</p></div><div class="ab cl lv lw gp lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hb hc hd he hf"><p id="d9fe" class="pw-post-body-paragraph iq ir hi is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn hb bi translated">感谢您阅读我的文章，我希望它能帮助您解决项目的汇编引用问题。如果你对我在做什么感兴趣，请查看我的社交或资产商店。编码快乐！</p></div></div>    
</body>
</html>