<html>
<head>
<title>Draw a seating chart using SVG and Angular.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SVG和Angular绘制座位图。</h1>
<blockquote>原文：<a href="https://medium.com/codex/draw-a-seating-chart-using-svg-shapes-and-angular-7092a52f4176?source=collection_archive---------0-----------------------#2022-10-14">https://medium.com/codex/draw-a-seating-chart-using-svg-shapes-and-angular-7092a52f4176?source=collection_archive---------0-----------------------#2022-10-14</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="1e8f" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">放学后不再需要数学和几何了？三思而后行！</h2></div><p id="84e9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">前一段时间，我们受一家活动组织公司的委托，帮助他们转变在活动行业的运营方式。该公司希望通过开发一种产品来扩大其在该地区的业务，这种产品将与像<a class="ae jt" href="https://www.ticketmaster.com" rel="noopener ugc nofollow" target="_blank"> TicketMaster </a>这样的大平台竞争，并使他们组织和管理各种活动的方式现代化。</p><p id="a807" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">因此，我们集思广益，设计了一系列为各种活动量身定制的功能，如活动设置、门票模板定制、活动签到、支付网关集成、电子邮件营销模块、客户支持、财务等。</p><p id="fdc7" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">作为一名前端开发人员，当你想评估这些类型的平台中最困难的部分时，在你的研究之后，我敢打赌你肯定会说是场馆设计师。活动地点可以是剧院、体育场、多层建筑，也可以是建在空地或室内的定制设施。如今，技术已经赢得了“没有什么是不可能的”的声誉，作为一个活动组织者，你会想要一个场地定制级别，理想的是一个设计工具，能够绘制不同的区域形状和座位排。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ju"><img src="../Images/592b0cad01d5d9e90820c7862494c4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cCUgQVdxgJlKAiFpNxzPiQ.gif"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">场馆设计工具</figcaption></figure><p id="e123" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">此外，其他公司已经发明了这些类型的工具。所以这不是什么新鲜事，对吧？</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="22bb" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">市场提供了什么？</h1><p id="f7b7" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">作为开发人员，我们总是有一种确定感，我们可以“Google”它，或者我们可以“StackOverflow”它，但是坏消息来了！</p><p id="eb65" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">这个话题你找不到像样的。</p><p id="1915" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">浏览网页并进行竞争研究，你可以找到一些提供这种类型服务的商业模式，但他们提供的服务与售票功能捆绑在一起，然后…</p><p id="33ef" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">是的，你猜对了，每卖出一张票就要收费，所以基本上你就“赢得”了一个捆绑了所有东西的特许合作伙伴。所以这是一个方便的婚姻，而不是一个理想的婚姻。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="a764" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">选择框架</h1><p id="800e" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">在框架决定的过程中，我们选择了Angular，因为它提供了非常好的DOM访问和操作，这是在浏览器中绘制形状和侦听DOM事件时必须的。</p><p id="8486" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">其次，这个项目已经在Angular中开发了，所以继续使用相同的技术框架是很自然的。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="b9d0" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">SVG与HTML5画布</h1><p id="9eab" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">开始使用Javascript在浏览器中绘制一个场馆模板，你很快意识到选择并不多。你可以选择SVG或者Canvas。我不打算解释选择其中一个的利弊，因为那里有一些非常好的文章，有大量的参考资料。我推荐阅读这篇<a class="ae jt" href="https://css-tricks.com/when-to-use-svg-vs-when-to-use-canvas/" rel="noopener ugc nofollow" target="_blank">文章</a>，我相信它足以帮助你决定选择哪个选项。</p><p id="89a2" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">当时，我选择了SVG，因为我并不期待繁重的浏览器交互。此外，SVG非常适合调试和分辨率独立，这对于我想要在不同类型的设备上渲染场景来说是完美的。</p></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="84b4" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">如何玩DOM</h1><p id="1758" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">现在是与DOM交互的时候了。如果你不知道它是什么，这里有一个简单的句子可以让你快速上手:</p><blockquote class="lo lp lq"><p id="0e89" class="ix iy lr iz b ja jb ij jc jd je im jf ls jh ji jj lt jl jm jn lu jp jq jr js hb bi translated">“<strong class="iz hj">D</strong>document<strong class="iz hj">O</strong>object<strong class="iz hj">M</strong>odel是一个平台和语言中立的接口，它允许程序和脚本动态地访问和更新文档的内容、结构和样式。”</p></blockquote><p id="adb9" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果您有JavaScript背景，那么您应该熟悉本机方法，比如:</p><ul class=""><li id="197d" class="lv lw hi iz b ja jb jd je jg lx jk ly jo lz js ma mb mc md bi translated"><strong class="iz hj"> <em class="lr"> getElementById() </em> </strong>方法，返回一个元素对象，允许与该对象进行交互。</li><li id="1394" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js ma mb mc md bi translated"><strong class="iz hj"><em class="lr">set attribute()</em></strong>设置指定元素的属性值。</li><li id="65fe" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js ma mb mc md bi translated"><strong class="iz hj"><em class="lr">set property</em>()</strong>为CSS样式声明对象的属性设置新值。</li></ul><p id="2f24" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">即使您熟悉上面的方法，并且它们可以在Angular中使用，我们也不要忘记这个框架提供了许多与DOM交互的好特性。这里的最佳实践是将呈现逻辑保存在指令中，这样就不会与组件中编写的表示逻辑混淆。事情是这样的:</p><pre class="jv jw jx jy fd mj mk ml mm aw mn bi"><span id="9d20" class="mo ks hi mk b fi mp mq l mr ms">@Component({<br/>  selector: 'app-root',<br/>  template: `&lt;svg <br/>               appSvg <br/>               style="border: 1px solid black;" <br/>               width="1000" <br/>               height="700" <br/>               &gt;<br/>             &lt;/svg&gt;`,<br/>})</span><span id="a229" class="mo ks hi mk b fi mt mq l mr ms">export class AppComponent {}</span><span id="2f0a" class="mo ks hi mk b fi mt mq l mr ms">@Directive({<br/>  selector: '[appSvg]'<br/>})</span><span id="f6cd" class="mo ks hi mk b fi mt mq l mr ms">export class SvgDirective implements OnInit {</span><span id="2f9d" class="mo ks hi mk b fi mt mq l mr ms">  constructor(private element: ElementRef, <br/>              private renderer: Renderer2) {}<br/> <br/>  ngOnInit(): void {<br/>    this.renderer.setAttribute(this.element.nativeElement, '');<br/>  }</span><span id="40d9" class="mo ks hi mk b fi mt mq l mr ms">  @HostListener('mousedown', ['$event'])<br/>  onMouseDown(event: MouseEvent): void {<br/>    // Interact with DOM when you click inside the SVG <br/>  }<br/>	<br/>  @HostListener('mousemove', ['$event'])<br/>  onMouseMove(event: MouseEvent): void {<br/>    // Interact with DOM when you are moving the mouse<br/>  }</span><span id="12d4" class="mo ks hi mk b fi mt mq l mr ms">  @HostListener('mouseup', ['$event'])<br/>  onMouseUp(event: MouseEvent): void {<br/>    // Interact with DOM to cleanup and reset the state<br/>  }</span><span id="36af" class="mo ks hi mk b fi mt mq l mr ms">}</span></pre><p id="0120" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">所以基本上，我们有:</p><ul class=""><li id="9f1f" class="lv lw hi iz b ja jb jd je jg lx jk ly jo lz js ma mb mc md bi translated"><a class="ae jt" href="https://angular.io/api/core/ElementRef" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj"> ElementRef </strong> </a> —帮助从组件中访问DOM元素。因为我们在&lt; svg &gt;标签中使用了指令选择器名称“[appSvg]”，所以我们正在访问Svg元素的引用。</li><li id="d515" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js ma mb mc md bi translated"><a class="ae jt" href="https://angular.io/api/core/Renderer2" rel="noopener ugc nofollow" target="_blank"> <strong class="iz hj">渲染器</strong> </a> —可以安全地修改元素，而无需直接接触DOM。它还可以用于实现自定义呈现和拦截呈现调用。</li><li id="3887" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js ma mb mc md bi translated"><a class="ae jt" href="https://angular.io/api/core/HostListener" rel="noopener ugc nofollow" target="_blank"><strong class="iz hj">host listener</strong></a>—一个角度装饰器，用于注册事件监听器，以便我们可以实时跟踪鼠标事件的发生。</li></ul></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="e1bc" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">最低设计工具要求</h1><p id="e9da" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">在我看来，能够绘制场景所必需的功能有:</p><ol class=""><li id="23f3" class="lv lw hi iz b ja jb jd je jg lx jk ly jo lz js mu mb mc md bi translated">画多边形。</li><li id="9759" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">拖放多边形。</li><li id="dda0" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">书写和放置文本。</li><li id="3d16" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">删除形状和文本。</li><li id="f81c" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">复制/粘贴形状。</li><li id="6460" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">水平和垂直反射形状。</li><li id="9879" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">放大/缩小形状。</li><li id="ea87" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">形状颜色填充。</li><li id="2695" class="lv lw hi iz b ja me jd mf jg mg jk mh jo mi js mu mb mc md bi translated">画座位排</li></ol><p id="e27b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">写了一堆代码后，用venue designer工具左边列出的工具，我可以画出下面的模板。</p><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mv"><img src="../Images/4673ba27e7adba13d00f13349946263f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zpgYcvXEihwxazq5v5RnNg.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">场景<em class="mw">设计工具</em></figcaption></figure><figure class="jv jw jx jy fd jz er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es mx"><img src="../Images/b7744ef7ea48d8d004518186abc6e336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uaLpIHNY5glrH4sn_mdY2A.png"/></div></div><figcaption class="kg kh et er es ki kj bd b be z dx translated">区域设计器工具</figcaption></figure></div><div class="ab cl kk kl gp km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hb hc hd he hf"><h1 id="cd0f" class="kr ks hi bd kt ku kv kw kx ky kz la lb io lc ip ld ir le is lf iu lg iv lh li bi translated">后续步骤</h1><p id="7cbb" class="pw-post-body-paragraph ix iy hi iz b ja lj ij jc jd lk im jf jg ll ji jj jk lm jm jn jo ln jq jr js hb bi translated">我将写一篇由多个部分组成的文章，详细介绍如何开始实现这些特性的技术细节。</p><p id="b41a" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">下一步:<a class="ae jt" href="https://orlandokaramani.medium.com/draw-svg-shapes-in-angular-polygons-897bfb4614fc" rel="noopener">绘制SVG角形(多边形)</a></p><p id="102b" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">看看完成的<a class="ae jt" href="https://seats.better.network" rel="noopener ugc nofollow" target="_blank">项目</a>。</p><p id="e5b1" class="pw-post-body-paragraph ix iy hi iz b ja jb ij jc jd je im jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">如果你喜欢这篇文章，请在<a class="ae jt" href="https://www.linkedin.com/in/orlando-karamani/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我。</p></div></div>    
</body>
</html>