# 在 Python 上开发赚钱的电报机器人— Pt 2。

> 原文：<https://medium.com/codex/developing-a-money-making-telegram-bot-on-python-pt-2-d3e7d5e89844?source=collection_archive---------2----------------------->

## 文字表情机器人

我真的很喜欢人们在他们的 bios 中使用表情符号。它不仅给人一种前卫/复古的感觉，而且在每次对话中看起来都很时髦。表情符号是由文字符号组成的表情符号，这里有几个:

![](img/1101b7cd6abc32ed19d9ea264aeb03f7.png)

一些非常酷的表情让你享受 xD

## 想法是:

1.  用户可以输入他们想要的情绪——高兴、生气、悲伤等等。
2.  机器人会输出一个代表这种情绪的表情符号，然后可以更好地复制到任何地方。
3.  有一个“随机”功能，输出一个随机的表情符号
4.  扩展思路:机器人会询问用户的情绪，并输出一个最匹配的表情符号。

好了，让我们开始吧！

## 我们将如何实现它？

为了让我们的生活变得简单，我们将从三种基本情绪开始:快乐、愤怒和 wtf。接下来，我们将创建一个代表这些情绪的表情数据库。然后，每当用户将他们的情绪作为命令输入时，机器人将从数据库的适当列中检索随机值。这将显示出来，并准备好供用户复制和使用！

## 首先要做的事

当使用电报机器人时，一个非常重要的信息是 API 令牌。你需要保持它的安全，防止任何人篡改它。几乎在任何代码编辑器中都有一个超级简单的方法可以做到这一点——将它存储在一个只有您可以访问的 JSON 文件中！

您可以按照本系列第 1 部分中的讨论来检索 API 令牌

从文件中检索 API 令牌:

您可以打开该文件并从中检索 API 令牌

太好了！现在我们已经有了安全的细节，让我们开始吧！

## **创建数据库**

我想先做一个文字表情的数据库(或者找一个如果有的话)。经过一番搜索，我找不到我要找的东西，所以是时候创建我们自己的数据集了！

我们将使用 Python 的内置 SQL 编辑器来完成这项工作。有许多不同的方法，但是在这个阶段遇到了许多关于游标的错误(基本上是允许您导航 SQL 数据库的内容)之后，我决定使用旧的、可信的内置版本。

*   连接到**‘表情’**数据库:

*   在数据集中创建 **main_table** :

*   现在，我们将适当的值插入表中。这些是表情符号和与之相关的情感。

*   现在，如果我们选择表中的所有值，我们将得到以下输出:

![](img/6170bd5f33409f10ab6d3ac2fabf9e1b.png)

我们得到的三种情绪的结果表

*   是时候创建我们 bot 的主要功能了。机器人会收到用户的命令，说明他们想要什么样的情感。然后，机器人将从表格中输出带有相应情绪的表情符号。让我们来看看实际情况:

这里需要注意的一点是 **print(angry[0])** 语句。这是因为**。fetchall()** 语句返回一个列表值，需要从中检索第一个元素

## 主程序代码

耶！我们现在有了程序代码的完整版本。其逻辑是:上面定义了从 SQL 表中检索适当值的命令。每当用户向机器人发送命令时，机器人就会从与该值相关联的表中输出表情符号。

下面是它实际运行的样子:

![](img/fe5a6be6cd26322b6149caabe42b6fc0.png)

表情机器人 MVP 尽力了…

## 接下来的步骤

现在我们已经有了项目的主要部分，是时候计划接下来的步骤了:

**美学改进:**

*   添加“问候”消息，解释机器人的功能和目的，以及它是如何工作的
*   制作命令

**技术改进:**

*   建立一个更大的数据库和更广的情感范围。我要么尝试找到一个基于文本的表情数据库，要么尝试自己创建一个。也许通过网络抓取或从各种网站提取表情符号。

> 伙计们，现在就这样吧！请继续关注第 3 部分，在那里我将实现上述更改并在 Telegram 上发布我的第一个机器人。祝您愉快！