# 如何阻止邪恶的饼干帝国

> 原文：<https://medium.com/codex/how-to-stop-the-evil-cookie-empire-c2f30c71c6bf?source=collection_archive---------10----------------------->

[为 MediaPost 撰稿的劳里·苏利文](https://www.mediapost.com/publications/author/2023/laurie-sullivan/)，就谷歌决定推迟在 Chrome 上屏蔽第三方 Cookie 一事写了一篇非常有趣的专栏文章: [*谷歌暂停 FLoC，将 Cookie 截止日期延至 2023 年末*](https://www.mediapost.com/publications/article/364508/google-pauses-floc-extends-cookie-deadline-to-lat.html) *。*

![](img/1b59c39f363f5886efb2c2ad6f4ff310.png)

这促使我对这篇文章进行评论，但是，唉，我的评论实在太罗嗦了；我别无选择，只能复制粘贴我所能做的，并把它全文贴在这里。

# 使用和不使用 Cookies 跟踪用户

虽然还有其他不使用 cookies 跟踪用户的方法，但谷歌试图强加一种完全在他们控制下的技术，这种技术将在 Chrome 中工作，Chrome 是目前最常用的网络浏览器(特别是在大约 30 亿个 Android 设备上)。

目前，使用基于文本的 HTTP 的优点是，您可以实际读取网络上发送的内容——因此任何“明显”的 cookies 替代方案都可以很容易地找到。页面是否加密无关紧要；最终，在某个时候，它们将需要被呈现给浏览器，当这种情况发生时，所有的内容标题，无论它们可能多么隐藏或模糊，都是可见的——这意味着它们可以在浏览器级别被轻松阻止(直接在浏览器代码中或通过插件或扩展)。

但是……未来是 [HTTP/3](https://developers.cloudflare.com/http3/) 。这是一个全新的协议，与 HTTP 从 0.9 (1991)到 2.0 (2015)的所有版本都没有相似之处。它甚至不使用 TCP/IP，而是使用许多非常聪明的技巧来加速浏览器与服务器之间的通信，这些技巧是根据人们浏览网页和流媒体的方式设计的。

HTTP/3 正在到处部署——大多数(如果不是全部)浏览器支持它，而许多流行的 web 服务器也支持它；对于那些不支持它的人，总是可以选择在自己的服务器前部署 [Cloudflare](https://cloudflare.com/) ，并在网络边缘获得完美的 HTTP/3 实现。

我为什么要提这个？嗯，HTTP/3 over QUIC 是一个*二进制*通信协议:浏览器和服务器之间不交换 ASCII/UTF-8 文本文件。现在，从理论上讲，这对于将 HTML 文件放在服务器上的 web 设计人员以及呈现这种页面的浏览器来说都是无关紧要的:它们作为文本文件仍然是完全可读的。类似地，因为 HTTP/3 向后兼容 HTTP 的早期版本，所以像帮助浏览器/服务器通信的头这样的公共特性也将被透明地处理:因此，您可以在 HTTP/3 上使用 cookies(以及放置在头上的任何其他东西),一切都应该和以前一样工作。因此，从那些开发基于网络的应用程序或浏览器的角度来看，HTTP/3 是一个“看不见的”层，它不会干扰既定的编程过程——它基本上“和往常一样，只是快得多”。

但是有一个问题。在协议级别，HTTP/3 可以隐藏浏览器和服务器之间以二进制格式交换的信息(并且是加密的——通过 HTTP/3 进行的所有通信都是经过加密的),这对于那些依赖 HTTP 提供基于 ASCII/UTF-8 的信息的工具来说，在端点处可能是不可用的。我没说它是。毕竟，沟通渠道双方的代码目前都是免费和开源的，并且正在接受大量独立组织的审核，如 IETF 或万维网联盟(W3C)；事实上，任何人都可以自己检查代码，而且，只要有可能这样做，它似乎是“干净的”，也就是说，没有隐藏的后门。

不过值得注意的是，QUIC 是 Google 发明的(早在 2012 年左右)。谷歌在谷歌 Chrome 上“植入”一些 QUIC 协议变体并非不可能(但在 Chromium 上不行 Chromium 是 Edge、Brave 和其他浏览器的源代码基础)，这些协议变体使用所谓的*带外通信*。这些消息在浏览器和服务器之间传递，以建立通信本身——在非常低的级别——上层对此不感兴趣，甚至不可见。

因此，从理论上讲，谷歌可以对 Chrome 代码做一个非常小的修改，任何人都“几乎”不会注意到，实现一个略有不同的 QUIC 版本，当然，这将与“正常”的 QUIC 完全兼容，并用于以完全相同的方式传输完全相同的 HTTP/3 流量。但谷歌将能够巧妙地引入一些“特殊”消息——对任何其他实现都没有意义，因此会被它们丢弃——这将基本上发送谷歌需要的所有跟踪信息(可能更多),而不会出现在标题、测试工具甚至网络路由器/防火墙上；只要 HTTP/3 over QUIC 被允许，*掺假的*“谷歌带外消息”就将是“一些未经识别但完全有效的 QUIC 包”。

通过屏蔽第三方 cookies，谷歌将有效地阻止他们继续追踪 Chrome 用户的任何竞争；他们甚至可以声称废除第三方 cookies 对最终用户来说是“好”的，因为他们不能被任何人描述，从而推动更多的用户使用 Chrome——少数人使用 Edge、Brave、Firefox 甚至 Safari 等替代产品的一个原因是所有这些浏览器都内置了跟踪拦截器。这些可能并不总是有效，但我的观点是，因为每个人都使用相同的协议(即 HTTP)，所以追踪器完成其分析任务的方式是有限的:主要是使用 cookies，或任何其他替代方式(如特殊的头，或一些聪明的 JavaScript，它可以实现一些分析魔术……)，所有这些都可以被浏览器或任何其他实现 Web 协议的工具清楚地“看到”。换句话说，很难想出一种聪明的跟踪用户的新方法，因为通信流是对世界开放的——没有地方可以“隐藏”任何东西。因此，任何浏览器(或插件，或扩展…)都可以过滤掉任何看起来像追踪器的东西，并关闭它。这正是许多开发者正在做的事情——甚至是在谷歌自己的 Chrome 上运行的第三方广告拦截器。

但这些工具都无法“过滤”出谷歌掺杂的 QUIC 包，因为它们与其他任何包都无法区分，而且，由于被加密，不可能知道它们包含什么。然而，它们不能因为“可疑”而被“扔掉”，因为在所有这些加密的数据包中，找出哪些是可疑的，哪些不是不容易的。当然，一旦这样的包被发送出去，它们就会被打开，里面的内容就会被看到。但情况永远不会是这样:这些数据包只会到达谷歌，不会到达其他任何人。

现在，很明显，这可以部署在谷歌自己的服务器上，因为这些服务器会意识到“掺假的数据包”,并存储它们进行数据处理。同样，谷歌云服务上托管的每项服务也可以包含特殊的跟踪代码，并代表谷歌收集这些代码——无论他们自己的工具有多先进，他们的云服务用户都不会注意到任何异常。

唉，谷歌很大，而且肯定拥有——直接或间接地，通过他们的云服务——大量的服务器，可以通过这种方式收集人们的数据。但是他们并不拥有*的一切*(至少，现在还没有！);这将意味着谷歌对终端用户的了解会有很大的漏洞，假设这些不能用“常规”手段追踪 Chrome 计划在不久的将来屏蔽这种手段！

但是，和往常一样，谷歌还有一些锦囊妙计。虽然他们确实没有“拥有”所有的网络服务，但他们也有很多运行在第三方服务器上的*免费插件。为什么？因为，据称，许多附加软件*提高了 SEO 和页面排名*。一个典型的例子是用于 [PageSpeed](https://developers.google.com/speed/pagespeed/module/) 的服务器扩展/模块，这是 Google 正在为一些流行的 web 服务器积极开发的(至少是为 Apache 和 nginx 开发的，这两者加在一起代表了相当多的服务器)。因此，许多 Linux 发行版甚至默认包含这些 Google 优化(其他发行版要求单独下载和/或在本地编译)，随着 Google 的服务器端技术变得比以前更成熟、更容易集成，这一趋势肯定会增长。再说一次，不要期望这样的技术会被普遍采用。但这确实意味着将会有额外的、非常大量的非谷歌服务器运行一些“必须使用”的谷歌开发的技术，如果这些技术不在服务器端实现，就有可能导致 PageRank 下降。*

很自然，这种工具已经在开发中，并考虑到了 HTTP/3 over QUIC。因此，这些扩展或模块作为“黑盒解决方案”工作——其中谷歌只是提供一个可安装的包，但*没有*源代码——通过带外通信发送跟踪和分析数据，确保谷歌继续接收他们的宝贵信息，而没有人注意到。

诚然，一些玩家——比如亚马逊和脸书帝国——可以通过拒绝在他们的服务器上安装任何与谷歌相关的东西，在一定程度上颠覆谷歌的计划。可以想象，谷歌可能会试图将 Chrome *的个人资料直接*发送给谷歌。然而，他们不能实时做到这一点，因为这将非常可疑:毕竟，那些 QUIC 包*的*目的地*可以被过滤掉——即使他们的内容可能受到加密保护——如果 Chrome 在脸书或亚马逊上导航时，在没有任何有效目的的情况下向谷歌的无数服务器中的任何一个发送数据流，这将非常可疑。*

但是，在 Chrome 浏览器上存储一段时间的档案数据，等待用户下一次进行谷歌搜索(或在任何页面上打开谷歌地图，而不仅仅是在谷歌托管的页面上……)，然后在与谷歌服务器的*合法*通信期间发送来自特定用户的短串历史信息(稍后处理)又会如何呢？

显然，这只是一个纯粹推测的情景；仅仅因为谷歌*在理论上能够*做到这一点，成为固若金汤的跟踪服务的唯一剩余来源，将所有竞争对手拒之门外，这并不意味着他们*会*做到这一点(尤其是因为曝光的风险将严重打击谷歌的声誉——只需要一名获得 Chrome 源代码的心怀不满的员工在 Twitter 上发布几行相关代码……)。

然而，这个 *Gedankenexperiment* 表明，让流程中的利益相关者成为流程发展的一部分从来都不是一个好主意——比如让当选的政治家决定谁可以投票，谁不可以。你们当中有些人还记得微软(以及之前的 IBM)是邪恶帝国的日子，仅仅是因为他们一直在做这种淘气的事情——直到他们被抓住，或者被立法机构积极阻止做这些事情。谷歌本质上是在尝试做微软在 20 世纪 80 年代中期和 90 年代大部分时间所做的事情；甚至可以说，在过去的二十年里，谷歌已经相当成功地建立了自己的邪恶帝国...

但是现在，建立一个新的邪恶帝国变得更加困难，在这个帝国中，一个单独的科技公司完全控制了整个市场——主要是因为这个市场比 1985-1999 年有了更多数量级的玩家和代理商(T21)。这当然是真的，但这并不意味着谷歌不能*尝试*——他们肯定有办法这样做，并且比他们最接近的竞争对手准备得更充分。

或许是时候让亚马逊和脸书开发自己的浏览器了，从零开始，通过进一步细分市场来加入“浏览器大战”——从而防止一家独大...