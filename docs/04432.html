<html>
<head>
<title>Windows ClipBoard History Clone Using Electron And Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Electron和Vue.js克隆Windows剪贴板历史记录</h1>
<blockquote>原文：<a href="https://medium.com/codex/windows-clipboard-history-clone-using-electron-and-vue-js-587b658dff33?source=collection_archive---------9-----------------------#2021-11-30">https://medium.com/codex/windows-clipboard-history-clone-using-electron-and-vue-js-587b658dff33?source=collection_archive---------9-----------------------#2021-11-30</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><div class=""><h2 id="c619" class="pw-subtitle-paragraph if hh hi bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">为什么不用功能更好的Electron js和Vue.js +创建自己的Windows剪贴板历史克隆呢？</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/cb6e22a8b78537a2313e044cddf5e836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVcOtGUC06pFATJdefOYSA.png"/></div></div></figure><h1 id="23af" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">注意</h1><p id="9ca1" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">第2部分将很快上传。另外，如果你想查看Github代码，在这里查看<a class="ae kx" href="https://github.com/harsh317/Windows-Clipboard-History-Clone" rel="noopener ugc nofollow" target="_blank"/>。此外，如果你想尝试这个克隆版本，请检查<a class="ae kx" href="https://github.com/harsh317/Windows-Clipboard-History-Clone/releases/tag/v1.0.0" rel="noopener ugc nofollow" target="_blank"> Github版本</a>，<a class="ae kx" href="https://github.com/harsh317/Windows-Clipboard-History-Clone/releases/download/v1.0.0/ClipBoard.Manager.Setup.0.1.0.exe" rel="noopener ugc nofollow" target="_blank">安装可执行文件</a>并尝试应用程序。<em class="ky">只在GitHub或这里发布这个克隆的问题和改进，然后我们可以改进这个克隆</em></p><p id="53a2" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">大家好，欢迎来到另一个克隆人。正如标题所言，我们今天将使用Electron.js和Vue.js构建<em class="ky"> Windows剪贴板历史克隆</em>。我们还将把应用程序打包成可执行文件，以便我们可以在任何地方使用它。但一如既往，让我们看看我们的应用程序功能和视频。</p><h1 id="a370" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">应用程序功能</h1><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="4acc" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">所以看完这个视频后，你可能已经对这个项目的所有功能有了一个概念，但这是这个应用程序的一些功能以及如何使用这个应用程序:</p><ol class=""><li id="7d91" class="lg lh hi kd b ke kz kh la kk li ko lj ks lk kw ll lm ln lo bi translated">安装应用程序→启动应用程序</li><li id="a831" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated"><em class="ky">应用程序启动时，您会听到声音</em></li><li id="f1ad" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated"><em class="ky"> Ctrl + M隐藏/显示应用</em></li><li id="5fa8" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated">复制所有需要的文本</li><li id="ab5b" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated">复制后，转到您想要使用复制历史的文档</li><li id="30b5" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated">按下<strong class="kd hj"> Ctrl+M查看您的历史记录</strong></li><li id="69b9" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated">单击历史记录进行复制，然后按Ctrl+v进行粘贴</li><li id="cd35" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated">您可以<strong class="kd hj">搜索您的历史记录</strong></li><li id="c558" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated">你会看到物品被复制的日期</li><li id="bfc0" class="lg lh hi kd b ke lp kh lq kk lr ko ls ks lt kw ll lm ln lo bi translated"><strong class="kd hj"> <em class="ky">你所有的历史记录都保存在nedb数据库</em> </strong>中，所以即使你在2天后打开你的应用，你的历史记录也会在那里。</li></ol><h1 id="9ac2" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">几个音符</h1><p id="24af" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">有趣吧？在这篇文章中，我们将安装我们将要使用的所有模块，并初始化我们的项目。<strong class="kd hj">有</strong> <strong class="kd hj">将是一个2部分的项目，这将是所有的代码及其解释</strong>。我个人更喜欢使用<a class="ae kx" href="https://code.visualstudio.com/download" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>，但是你可以使用任何你选择的IDE。这样，让我们快速安装我们需要的包，然后初始化我们的应用程序。</p><h1 id="ede5" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">初始化我们的项目</h1><p id="fd9e" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">首先，让我们快速安装并创建一个vue-cli项目，为此，我们需要安装它。</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="28cf" class="lz jk hi lv b fi ma mb l mc md">npm install -g @vue/cli</span></pre><p id="e5f1" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">现在，让我们通过以下方式初始化我们的vue项目:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="eda3" class="lz jk hi lv b fi ma mb l mc md">vue create vue-electron-clipboard-manager<br/>cd vue-electron-clipboard-manager</span></pre><p id="7189" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">一旦建立了vue项目，我们就可以使用<code class="du me mf mg lv b">Vue-electron-cli-plugin</code>来配置electron。它基本上用电子做了所有繁重的工作。所以，添加这个神奇的命令</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="8db0" class="lz jk hi lv b fi ma mb l mc md">vue add electron-build</span></pre><p id="25c6" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">在撰写这篇文章的时候，我的Electron.js版本是<code class="du me mf mg lv b">13.0.0</code>，vue版本是<code class="du me mf mg lv b">4.5.15. </code>，我们已经准备好安装我们需要的包了</p><h1 id="f91e" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">软件包安装</h1><ol class=""><li id="7613" class="lg lh hi kd b ke kf kh ki kk mh ko mi ks mj kw ll lm ln lo bi translated"><a class="ae kx" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd hj">自举</strong> </a> <strong class="kd hj"> <em class="ky">或</em> </strong> <a class="ae kx" href="https://bulma.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd hj">布尔玛</strong> </a></li></ol><p id="6870" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">我将使用布尔玛来设计我的应用程序，但你可以使用任何Ui框架，如<code class="du me mf mg lv b">bootstrap</code>来制作你的应用程序。如果你想就任何样式给出建议/错误，请在Github中写下。所以，让我们安装布尔玛:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="f9be" class="lz jk hi lv b fi ma mb l mc md">npm install --save bulma</span></pre><p id="010d" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated"><em class="ky">或</em>如果您想使用引导程序:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="aec3" class="lz jk hi lv b fi ma mb l mc md">npm install --save bootstrap</span></pre><p id="7d3a" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">2.<a class="ae kx" href="https://github.com/louischatriot/nedb" rel="noopener ugc nofollow" target="_blank"> <strong class="kd hj"> Nedb </strong> </a></p><blockquote class="mk ml mm"><p id="4c1b" class="kb kc ky kd b ke kz ij kg kh la im kj mn lb km kn mo lc kq kr mp ld ku kv kw hb bi translated">Node.js、nw.js、电子和浏览器的嵌入式持久或内存数据库，100% JavaScript，无二进制依赖。</p></blockquote><p id="2836" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">基本上，我们将使用它来存储我们的剪贴板历史。因此，即使我们在5-10天后打开应用程序，我们的历史仍然存在。我们要去nedb的持久数据库。让我们现在安装它:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="69e2" class="lz jk hi lv b fi ma mb l mc md">npm install nedb --save</span></pre><p id="10d1" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">3.<a class="ae kx" href="https://github.com/electron/remote" rel="noopener ugc nofollow" target="_blank"><strong class="kd hj">@电子/遥控</strong> </a></p><p id="68c5" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">为了处理vue (Main.js)和electronic(background . js)进程之间的通信，我们使用IPC(进程间通信)。“<code class="du me mf mg lv b">@electron/remote</code>是对electronic内置<code class="du me mf mg lv b">remote</code>模块的替代，该模块已被弃用，最终将被移除。”那么，让我们安装它:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="e1fa" class="lz jk hi lv b fi ma mb l mc md">npm install --save @electron/remote</span></pre><p id="694b" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">此外，正如<a class="ae kx" href="https://github.com/electron/remote" rel="noopener ugc nofollow" target="_blank">文档所说的</a>，我们需要在主进程(background.js)中初始化它，然后才能在渲染器进程中使用它。因此，在background.js文件中初始化它，并启用<code class="du me mf mg lv b">webPreferences</code>中的<code class="du me mf mg lv b">enableRemoteModule:true</code>,如下所示:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mq"><img src="../Images/b39ef3c164268a36be54150ac4574328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WoM-4vuRUpkwXWk3kt-Tsw.png"/></div></div><figcaption class="mr ms et er es mt mu bd b be z dx translated">看到黄线并做出改变</figcaption></figure><p id="7c84" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">我想我们正在安装。虽然包不多:)。在结束本文之前，让我们也启用默认禁用的<code class="du me mf mg lv b">nodeIntegration</code></p><h1 id="ba72" class="jj jk hi bd jl jm jn jo jp jq jr js jt io ju ip jv ir jw is jx iu jy iv jz ka bi translated">启用<code class="du me mf mg lv b">nodeIntegration</code></h1><p id="96ee" class="pw-post-body-paragraph kb kc hi kd b ke kf ij kg kh ki im kj kk kl km kn ko kp kq kr ks kt ku kv kw hb bi translated">在浏览器中，我们不能真正使用节点模块。但现在情况并非如此，因为我们使用的是electron.js。默认情况下，<code class="du me mf mg lv b">nodeIntegration</code>被禁用，这会阻止所有节点API，如<code class="du me mf mg lv b">require</code>，因为这降低了我们应用程序的<a class="ae kx" href="https://electronjs.org/docs/tutorial/security#2-do-not-enable-nodejs-integration-for-remote-content" rel="noopener ugc nofollow" target="_blank">安全风险</a>，并防止像XSS(跨站点脚本)这样的攻击。但是我们需要访问用户的剪贴板，还需要使用<code class="du me mf mg lv b">nedb</code>数据库，我们必须启用它:(</p><p id="d006" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">要启用它，请转到您的应用程序根文件夹，创建一个名为<code class="du me mf mg lv b">vue.config.js</code>的文件，并向其中添加以下代码:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="4ce0" class="lz jk hi lv b fi ma mb l mc md">module.exports = {<br/>  pluginOptions: {<br/>    electronBuilder: {<br/>      nodeIntegration: true<br/>    }<br/>  }<br/>}</span></pre><p id="ecb7" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">供您参考:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mv"><img src="../Images/afe05ef88457516c7a504531b1885db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRCTWkbfqDkXna1mU7dWZg.png"/></div></div></figure><p id="0fc3" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">我们已经完成了所有的配置工作。哦！在接下来的第2部分中，我们可以开始研究代码及其解释。</p><p id="cf0f" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">此外，如果您想运行演示应用程序，可以使用:</p><pre class="iy iz ja jb fd lu lv lw lx aw ly bi"><span id="7c22" class="lz jk hi lv b fi ma mb l mc md">npm run electron:serve</span></pre><p id="965b" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated">所以，我们将在下一部分再见，如果有任何疑问，请务必查看<a class="ae kx" href="https://github.com/harsh317/Windows-Clipboard-History-Clone" rel="noopener ugc nofollow" target="_blank"> GitHub代码</a>，并且不要忘记<a class="ae kx" href="https://github.com/harsh317/Windows-Clipboard-History-Clone/releases/tag/v1.0.0" rel="noopener ugc nofollow" target="_blank">测试app </a>。</p><p id="6ffd" class="pw-post-body-paragraph kb kc hi kd b ke kz ij kg kh la im kj kk lb km kn ko lc kq kr ks ld ku kv kw hb bi translated"><em class="ky">直到那时保持安全；保持健康</em></p><h2 id="6ba8" class="lz jk hi bd jl mw mx my jp mz na nb jt kk nc nd jv ko ne nf jx ks ng nh jz ni bi translated">谢谢你</h2></div></div>    
</body>
</html>