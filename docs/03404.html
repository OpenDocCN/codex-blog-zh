<html>
<head>
<title>Beginner Guide to Technical Analysis in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python技术分析初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/codex/beginner-guide-to-technical-analysis-in-python-1fc507476d6?source=collection_archive---------2-----------------------#2021-09-01">https://medium.com/codex/beginner-guide-to-technical-analysis-in-python-1fc507476d6?source=collection_archive---------2-----------------------#2021-09-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="4f34" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们都喜欢赚钱，没有什么可以逃避的。如果你是交易新手，那么在你开始之前，至少对一些技术指标有一个基本的了解是很重要的。如果你是新手，很容易迷失在图表中，不可避免地会赔钱，这是没有人想要的！如果你也喜欢用python编程，那么这是一个让你熟悉这些指标并自己做一些数据分析的好方法。</p><p id="2a65" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，在这篇文章中，我将介绍一些存储和显示外汇或加密货币市场数据的基础知识，以及一个充满技术指标的精彩库。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/89f96c5d7bcd401e0b0997d53fc59892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ArJ8R3g8F_Uz8Auj5wkLLQ.jpeg"/></div></div></figure><p id="c25f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我们将需要这个项目的几个包:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="f3ef" class="ju jv hi jq b fi jw jx l jy jz">import numpy as np<br/>import matplotlib.pyplot as plt<br/>import pandas as pd<br/>import mplfinance as mpf<br/>from datatime import datetime as dt<br/>import talib as ta</span></pre><p id="19aa" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">TA-Lib是一个非常棒的技术分析库，我们将用它来生成大量的分析数据。这些都将使用pandas dataframes存储，数据将使用mplfinance显示。</p><p id="3cd3" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，首先你需要下载一些特定股票、货币或任何其他资产的历史数据。在本教程中，我将以比特币为例。雅虎财经是获取价格数据的一种非常简单的方式，你可以免费下载一个csv，或者如果你对加密货币更感兴趣，你可能有一个币安账户。有了币安，你可以设置一个API，你可以安装python-币安库。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="33ce" class="ju jv hi jq b fi jw jx l jy jz">from binance.client import Client</span></pre><p id="d804" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于币安用户，您需要执行以下操作:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="ef8e" class="ju jv hi jq b fi jw jx l jy jz">api_key = 'YOUR API KEY' #found on binance site when setting up api<br/>api_secret = 'YOUR API SECRET'<br/>client = Client(api_key,api_secret)<br/>symbol = 'BTCUSDT'<br/>kline = '1d'<br/>data_since = '100 days ago'</span><span id="8643" class="ju jv hi jq b fi ka jx l jy jz">df = pd.DataFrame(<br/>            client.get_historical_klines(symbol,kline,data_since)).drop(columns={6,7,8,9,10,11}).astype('float')</span></pre><p id="6bdc" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这给你留下了一个数据框架:日期、开盘、盘高、盘低、收盘、成交量列，其中填充了浮点数据。</p><p id="086b" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您从另一个网站下载csv，您只需写下:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="ff3f" class="ju jv hi jq b fi jw jx l jy jz">df = pd.read_csv('PATH TO YOUR CSV FILE')</span></pre><p id="03fd" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你从其他地方得到数据，确保至少和从币安得到的数据一样。</p><p id="cb02" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因此，从这里开始，为了简单起见，我们将对这些列进行重命名，以便清楚地表明哪一列是哪一列:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="20df" class="ju jv hi jq b fi jw jx l jy jz">df.columns = ['Date',Open','High','Low','Close','Volume']</span></pre><p id="9a8a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了让mpl finance能够处理这些数据，我们需要将date列设置为datetime索引。它也通常以时间戳而不是日期的形式出现，所以我们也将对其进行转换</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="cd10" class="ju jv hi jq b fi jw jx l jy jz">df.index = pd.DatetimeIndex(<br/>              [dt.fromtimestamp(x/1000) for x in df['Date']<br/>                                   )</span></pre><p id="ef16" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果您的数据已经是datetime格式，那么只需将' df['Date']'传递给该方法即可。</p><p id="366d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在我们的数据可以显示了。我们可以用两行代码来实现:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="70a2" class="ju jv hi jq b fi jw jx l jy jz">mpf.plot(df,type='candle')<br/>plt.show()</span></pre><p id="8f18" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就这么简单！虽然如果它看起来更像我们习惯的在线图表会更容易使用，所以我们会给它添加一些简单的样式。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="45e4" class="ju jv hi jq b fi jw jx l jy jz">colors = mpf.marketcolors(up='lime',down='r',<br/>                          wick={'up':'lime','down':'r'},<br/>                          edge={'up':'lime','down':'r'},<br/>                          volume={'up':'lime','down':'r'})<br/>s = mpf.make_mpf_style(marketcolors=colors,facecolor='black,<br/>                       edgecolor='w',gridstyle='solid',<br/>                       gridcolor='grey')<br/>kwargs = dict(type='candle',style=s,figratio=(20,10),<br/>              width_adjuster_version='v0')</span><span id="b971" class="ju jv hi jq b fi ka jx l jy jz">mpf.plot(df,**kwargs)<br/>plt.show()</span></pre><p id="30f5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在我们有了一些看起来更像我们所了解和喜爱的东西！我们还可以快速添加一个东西，那就是底部的音量条形图。要做到这一点，我们需要做的就是将“volume=True”添加到我们的kwargs字典中，这样它就变成了:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="ead0" class="ju jv hi jq b fi jw jx l jy jz">kwargs = dict(type='candle',style=s,figratio=(20,10),<br/>              width_adjuster_version='v0', volume=True)</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kb"><img src="../Images/fdf36386f8e007144c76d6a838cfb7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rg1QDXqVuleku7qeD-Wi1g.jpeg"/></div></div></figure><p id="3f8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，我们可以轻松地显示蜡烛图数据及其体积。接下来我们开始讨论技术分析指标。有这么多可用的选项，所以我将介绍一些更受欢迎的选项:</p><ul class=""><li id="7a0f" class="kc kd hi ih b ii ij im in iq ke iu kf iy kg jc kh ki kj kk bi translated">移动平均线</li><li id="605a" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">指数移动平均线</li><li id="d077" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">相对强度指数</li><li id="b226" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">随机RSI</li><li id="3116" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">移动平均收敛发散(MACD)</li><li id="06b7" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">布林线</li><li id="bfbd" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">平均真实距离</li></ul><p id="b936" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">因为我们已经有了一个包含所有价格数据的数据框架，所以添加一些新的列来存储指标值是有意义的。前两个指标:MA和EMA使用熊猫内置方法最容易做到。对于每个指标，我会做12日均线和均线，但这取决于你，你可能会希望每个指标都增加一些。</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="92fb" class="ju jv hi jq b fi jw jx l jy jz">df['12MA'] = df['Close'].rolling(12).mean()<br/>df['12EMA'] = df['Close'].ewm(com=12,adjust=False).mean()</span></pre><p id="860a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这就是熊猫如何创造我们需要的移动平均线。注意:现在我们已经在数据框中添加了额外的列，我们需要稍微修改一下我们的绘图代码:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="d4f5" class="ju jv hi jq b fi jw jx l jy jz">mpf.plot(df[['Date','Open','High','Low','Close','Volume]],**kwargs)</span></pre><p id="2e7d" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">转到其他指标，您将看到TA-Lib使这些计算变得多么容易。从RSI开始:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="c1ee" class="ju jv hi jq b fi jw jx l jy jz">df['RSI'] = ta.RSI(df['Close'],timeperiod=14)</span></pre><p id="1e75" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">就是这么简单！TA-Lib是如此的有用和简单。其他一些指标有多个输出，因此会跨越多列。您将注意到的另一件事是，在执行这些操作之后，一些起始行将读取NaN。这是完全正常的，只是数学的结果，所以这是收集大量数据的另一个原因。其余的指标可以这样实现:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="f375" class="ju jv hi jq b fi jw jx l jy jz">df['fastk'],df['fastd'] = ta.STOCHRSI(df['Close'],timeperiod=14,<br/>                                      fastk_period=5,fastd_period=3)</span><span id="aa0b" class="ju jv hi jq b fi ka jx l jy jz">df['macd'],df['macdsignal'],df['macdhist'] = ta.MACD(df['Close'],fastperiod=12,slowperiod=26,signalperiod=9)</span><span id="bd39" class="ju jv hi jq b fi ka jx l jy jz">df['upperBB'],df['midBB'],df['lowerBB'] = ta.BBANDS(df['Close'],timeperiod=5)</span><span id="bc59" class="ju jv hi jq b fi ka jx l jy jz">df['ATR'] = ta.ATR(df['High'],df['Low'],df['Close'],timeperiod=14)</span></pre><p id="a280" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">对于所有可能的指标，我建议查看这里的文档:<a class="ae kq" href="https://mrjbq7.github.io/ta-lib/func_groups/volatility_indicators.html" rel="noopener ugc nofollow" target="_blank">https://mrjbq 7 . github . io/ta-lib/func _ groups/volatility _ indicators . html</a></p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><p id="7d68" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了绘制这些新的指标，你需要知道哪些属于蜡烛图，哪些需要支线图。你可能想在蜡烛图数据上绘制的唯一数据是任何类型的移动平均线和布林线。剩下的放在支线剧情里会更好，因为尺度很不一样。</p><p id="3b8e" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以添加这个非常容易，在我们的‘kwargs’字典上面，我们想添加一个名为apdict的列表，并且可以添加我们的新指标:</p><pre class="je jf jg jh fd jp jq jr js aw jt bi"><span id="03cd" class="ju jv hi jq b fi jw jx l jy jz">apdict = [mpf.make_addplot(df[['upperBB','lowerBB']],color='b',<br/>                           type='scatter',panel=0),<br/>          mpf.make_addplot(df['RSI'],color='cyan',<br/>                           type='scatter',panel=2)]</span></pre><p id="6b20" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这将把我们的布林线添加到蜡烛图中，同时在底部为我们的RSI创建第三个面板。面板参数是我们决定在哪里绘制数据的方式，您可以添加任意多的数据</p><p id="344c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，在“kwargs”字典中，我们添加了另一个变量“addplot=apdict”，这就是它的全部内容。您应该会得到这样的结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/dfda5035f90700740e05cc6a8514d08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qhspf9VbsUYEzoLfPtLjFw.jpeg"/></div></div></figure><p id="6714" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如何选择造型完全取决于你。这是掌握如何分析股市或加密货币数据的一个好方法。如果你想尝试创建一个价格预测模型，这也是一个为机器学习收集额外数据的好方法！</p><p id="0640" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">为了更进一步，一定要看一下我之前链接的TA-Lib的文档，以及“mplfinance”的文档，这样你就可以看到如何设计和改进这些图。</p></div><div class="ab cl kr ks gp kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hb hc hd he hf"><p id="da95" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你正在寻找一些将它付诸实践的想法，这里有一些可以让你思考的:</p><ul class=""><li id="4c0b" class="kc kd hi ih b ii ij im in iq ke iu kf iy kg jc kh ki kj kk bi translated">机器学习价格预测</li><li id="c43e" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">将实时股票价格数据传输到图表中</li><li id="6165" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">用你的数据创建一个tkinter应用</li><li id="a568" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">创建一个带有指示器的flask webapp</li><li id="a310" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">做一个交易策略测试者</li><li id="55b2" class="kc kd hi ih b ii kl im km iq kn iu ko iy kp jc kh ki kj kk bi translated">制作一个交易机器人</li></ul><p id="835a" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我希望这篇介绍对你有所帮助，并让你更好地理解价格趋势。享受这些库，创造一些很酷的东西！</p><p id="05ef" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">我必须补充一点，这绝不是任何财务建议，纯粹是为了帮助演示如何用python做自己的技术分析。</p></div></div>    
</body>
</html>