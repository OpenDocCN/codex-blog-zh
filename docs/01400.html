<html>
<head>
<title>Tip of the Day: Character Controller in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日积月累:Unity中的角色控制器</h1>
<blockquote>原文：<a href="https://medium.com/codex/tip-of-the-day-character-controller-in-unity-4516644f695?source=collection_archive---------1-----------------------#2021-04-25">https://medium.com/codex/tip-of-the-day-character-controller-in-unity-4516644f695?source=collection_archive---------1-----------------------#2021-04-25</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/996f59484ffd1ef20a13d55873c1ccd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*POCW9QW2MNdzWj1U"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">约书亚·阿拉贡在<a class="ae iu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f89b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">一旦开始一个新项目，你可能要做的第一件事就是研究你的虚拟形象的动作，问题就来了。我应该使用角色控制器还是刚体？</p><h2 id="40fc" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">两者的区别:</h2><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es ko"><img src="../Images/3c8105b7c7ad3d8428bdcbea759b2752.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*dtvQV2WLCD0M9vQjhztgGA.jpeg"/></div></figure><p id="5814" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">两者的主要区别在于控制的自由度。角色控制器给你的玩家一些速度和一个碰撞器，但是没有物理，而刚体控制器控制你的玩家的物理。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div class="er es kt"><img src="../Images/8508953e9d8b4e6790749a5b51eac0a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*VVVFMymRP2rGS96xoA-qMA.jpeg"/></div></figure><p id="cf50" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">换句话说，通过使用角色控制器，你要对发生在你的角色身上的每一个物理交互负责。你必须编码所有的东西。使用刚体移动化身允许unity控制物理交互。</p><h2 id="500c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd jg ke kf kg jk kh ki kj jo kk kl km kn bi translated">如何设置一个角色控制器？</h2><p id="7b8c" class="pw-post-body-paragraph iv iw hi ix b iy lc ja jb jc ld je jf jg le ji jj jk lf jm jn jo lg jq jr js hb bi translated">角色控制器有一个非常方便的方法叫做“移动”，它采用一个可以乘以速度的方向向量。</p><p id="1b81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">首先你必须给你的播放器添加<em class="lh">角色控制器</em>组件，然后创建一个C#脚本来控制移动。</p><ol class=""><li id="7ad5" class="li lj hi ix b iy iz jc jd jg lk jk ll jo lm js ln lo lp lq bi translated">让我们创建一些变量:<br/>A-Speed控制玩家速度<br/>B-jump height控制玩家能跳多高<br/>C-Gravity(-1)添加重力物理<br/>D-两个私有向量3s，方向和速度<br/>E-最后一个float yVelocity控制y轴的速度</li></ol><p id="4fd1" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">2.抓住角色控制器，这样我们就可以控制它</p><pre class="kp kq kr ks fd lr ls lt lu aw lv bi"><span id="0ab7" class="jt ju hi ls b fi lw lx l ly lz">CharacterController _controller;</span><span id="643a" class="jt ju hi ls b fi ma lx l ly lz">private void Awake()<br/>    {<br/>        _controller = GetComponent&lt;CharacterController&gt;();    <br/>    }</span></pre><p id="4d7f" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">3.在更新中，设置将在x-asis上返回玩家输入的float</p><pre class="kp kq kr ks fd lr ls lt lu aw lv bi"><span id="de89" class="jt ju hi ls b fi lw lx l ly lz">var xHorizontal = Input.GetAxis("Horizontal");</span></pre><p id="5d93" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">4.控制器给你一个手的方法来查看玩家是否被接地，我们将使用这个方法来允许玩家在地板上移动和跳跃。<br/>伪代码:将方向向量的x轴赋给水平输入，然后基于速度赋速度。</p><pre class="kp kq kr ks fd lr ls lt lu aw lv bi"><span id="1e86" class="jt ju hi ls b fi lw lx l ly lz">if (_controller.isGrounded)<br/>        {<br/>            _moveDirection.x = xHorizontal;<br/>            _velocity = _moveDirection * _moveSpeed;</span></pre><p id="830b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">5.为了跳跃，我们在接地时检查玩家输入，将yVelocity重置为0，然后将其设置为jumpHeight。这将使你跳得更平稳，并抵消跳跃瞬间的重力。</p><pre class="kp kq kr ks fd lr ls lt lu aw lv bi"><span id="0e1a" class="jt ju hi ls b fi lw lx l ly lz">if (_controller.isGrounded)<br/>        {<br/>            _moveDirection.x = xHorizontal;<br/>            _velocity = _moveDirection * _moveSpeed;</span><span id="b949" class="jt ju hi ls b fi ma lx l ly lz">if (Input.GetKeyDown(KeyCode.Space))<br/>            {<br/>                _yVelocity = 0;<br/>                _yVelocity = _jumpHeight;<br/>            }<br/>        }</span></pre><p id="270c" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">6.在从控制器调用Move方法之前，如果没有固定，请确保将重力应用到yVelocity，最后在所有这些操作之后，将速度向量的y轴指定给yVelocity。</p><p id="35f7" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">最终的动作代码应该是这样的。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mb"><img src="../Images/123fe78febcc466baf6ff94bcac79457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6CfCm9UMkhWprlFQ3fBDVw.png"/></div></div></figure><p id="263b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">从这里开始，您可以通过使用"<em class="lh">OnControllerColliderHit</em>"方法，在此基础上进行扩展，添加一个双跳，甚至是一个翻墙跳。</p><figure class="kp kq kr ks fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es mc"><img src="../Images/0f1dbc7aa367b64de3faad3cd7f1d6bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mvQwU7Olx7cpBM6vlySezg.gif"/></div></div></figure></div></div>    
</body>
</html>