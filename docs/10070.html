<html>
<head>
<title>The best image format for mobile app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">移动应用程序的最佳图像格式</h1>
<blockquote>原文：<a href="https://medium.com/codex/mobile-what-image-format-should-i-use-39b44e9f86fc?source=collection_archive---------5-----------------------#2022-12-01">https://medium.com/codex/mobile-what-image-format-should-i-use-39b44e9f86fc?source=collection_archive---------5-----------------------#2022-12-01</a></blockquote><div><div class="ds gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/fce7e3826f5d13d2b582455c8414a2b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNzAookNbY2H9nItth8fVA.jpeg"/></div></div><figcaption class="iq ir et er es is it bd b be z dx translated">Karolina Grabowska的照片:<a class="ae iu" href="https://www.pexels.com/photo/photo-of-a-person-hanging-an-empty-picture-frame-8947560/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/photo-of-a-person-hang-an-empty-picture-frame-8947560/</a></figcaption></figure><p id="e24a" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">在多年的应用程序开发中(在iOS和Android平台上)，我遇到了同样的问题，我应该使用什么格式，这种操作系统(Android或iOS)的最佳格式是什么，这种操作系统版本，以及设备拥有的硬件，它能运行我构建的性能吗？我决定写这个问题。在下面的文字中，我将描述各种格式，以及如何和何时使用它们。</p><h1 id="7d6c" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ios</h1><p id="cb7d" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">iOS 11+ —从iOS 11开始，苹果推出了一种新的iPhone照片格式，<code class="du kw kx ky kz b">HEIC</code>格式，适用于iOS设备。与<code class="du kw kx ky kz b">JPG</code>相比，<code class="du kw kx ky kz b">HEIC</code>在保持相同图像质量的同时，在文件大小方面更高效。</p><p id="015d" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">iOS 10 —在iOS 11之前，推荐的图像格式是<code class="du kw kx ky kz b">PNG</code>。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es la"><img src="../Images/807ca120dee24445cbfe1048de3a2f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*9PBqMbEFOlgRUwPR.jpg"/></div></figure><h2 id="ebef" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">HEIC vs巴布亚新几内亚</h2><p id="4da9" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">与常用图像文件格式(即<code class="du kw kx ky kz b">PNG</code>)相比，新文件格式<code class="du kw kx ky kz b">HEIC</code>存储的图像文件更小。</p><p id="93dc" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">尽管<code class="du kw kx ky kz b">HEIC</code>图像的大小小于<code class="du kw kx ky kz b">PNG</code>图像文件，但图像质量与<code class="du kw kx ky kz b">PNG</code>格式相似。</p><p id="9216" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">与<code class="du kw kx ky kz b">PNG</code>文件相比，<code class="du kw kx ky kz b">HEIC</code>文件更加灵活，因为它可以存储单个图像或图像序列。而另一方面，<code class="du kw kx ky kz b">PNG</code>文件只能保存一幅图像。</p><p id="7101" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">除此之外，<code class="du kw kx ky kz b">HEIC</code>文件还包含一个图像及其元数据。</p><h2 id="1f80" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">HEIC与JPEG</h2><p id="4d05" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><strong class="ix hj">压缩</strong> <br/> <code class="du kw kx ky kz b">HEIC</code>提供了比旧的<code class="du kw kx ky kz b">JPEG</code>格式更高效、更现代的压缩方法。<code class="du kw kx ky kz b">HEIC</code>在不影响质量的情况下，将图像分割成更小的文件。</p><p id="fe74" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">存储空间<br/> </strong>在电脑、平板电脑或智能手机上，大多数<code class="du kw kx ky kz b">HEIC</code>文件占用的空间都比<code class="du kw kx ky kz b">JPEG</code>小得多。他们创新的压缩流程意味着<code class="du kw kx ky kz b">HEIC</code>可以使用的空间只有<code class="du kw kx ky kz b">JPEG</code>文件的一半。</p><p id="cb81" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">画质<br/> </strong>在压缩和画质两方面，<code class="du kw kx ky kz b">HEIC</code>文件都胜过<code class="du kw kx ky kz b">JPEG</code>。<code class="du kw kx ky kz b">HEIC</code>格式可以通过透明度和更宽的动态范围功能来提高照片的质量。</p><p id="7587" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">兼容性</strong> <br/>虽然<code class="du kw kx ky kz b">JPEG</code>几乎具有普遍兼容性，<code class="du kw kx ky kz b">HEIC</code>文件则没有。<code class="du kw kx ky kz b">HEIC</code>近年来变得越来越常见，但它的主要用途是在苹果设备上。将照片从iPhone传输到PC时，你甚至可能需要将你的<code class="du kw kx ky kz b">HEIC</code>文件转换成<code class="du kw kx ky kz b">JPEG</code>。</p><p id="3917" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">透明</strong> <br/> <code class="du kw kx ky kz b">HEIC</code>支持图像透明的方式与<code class="du kw kx ky kz b">PNG</code>文件类似，另一方面，<code class="du kw kx ky kz b">JPEG</code>格式不支持透明。</p><h2 id="66bc" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">额外注释</h2><p id="2b9c" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">但这并不是结束，在仍然支持iOS 11的旧设备(例如iPhone 6)上，<code class="du kw kx ky kz b">HEIC</code>可能仍然可以工作，但由于缓慢的硬件，它可能需要很长时间来渲染一个<code class="du kw kx ky kz b">HEIC</code>格式的图像。<br/>这意味着iOS版本并不是决定图片格式的唯一参数，它也应该来自于设备本身。</p><h1 id="afb1" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">机器人</h1><p id="309d" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">Android 4.2.1- —旧Android版本的推荐图像格式为<code class="du kw kx ky kz b">PNG</code></p><p id="1676" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Android 4.2.1 (API level 17)+ —增加了对<code class="du kw kx ky kz b">webp</code>的支持。</p><p id="b594" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">Android 12+—Android 12+上增加了对<code class="du kw kx ky kz b">AVIF</code>的支持。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lt"><img src="../Images/dc971fa3137afcb2059b80cbdcc4a669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yH4vpSv604s3Wkq-.png"/></div></div></figure><h2 id="4b7d" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">WebP vs PNG</h2><p id="115b" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">这种格式为图像提供了卓越的无损和有损压缩。使用<code class="du kw kx ky kz b">webp</code>，开发者可以创建更小、更丰富的图像。<code class="du kw kx ky kz b">webp</code>无损图像文件平均比<code class="du kw kx ky kz b">PNG</code>小26%。这些图像文件还支持透明度(也称为alpha通道),成本只是多22%的字节。作为一种格式，WebP可以支持有损和无损两种模式，这使它成为PNG和JPG的理想替代品。唯一需要记住的是，它只在运行Android 4.2.1 (API level 17)及更高版本的设备上有原生支持。幸运的是，大多数设备都满足这一要求。</p><h2 id="c0ce" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">WebP与JPEG</h2><p id="169a" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">根据这项<a class="ae iu" href="https://developers.google.com/speed/webp/docs/webp_study" rel="noopener ugc nofollow" target="_blank">研究</a>，我们看到，与JPEG文件相比，WebP文件的平均大小要小25%-34%，研究结果表明，与JPEG相比，WebP可以提供显著的压缩改进。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lu"><img src="../Images/50984bc8ddaf5c8e966a061327ed571e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xNZO6VR0gpY2mKsg"/></div></div></figure><h2 id="ee8d" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">背景</h2><p id="7c3e" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><code class="du kw kx ky kz b">AVIF</code>是使用<code class="du kw kx ky kz b">AV1</code>编码的图像和图像序列的容器格式。<code class="du kw kx ky kz b">AVIF</code>利用视频压缩中的帧内编码内容。与旧的图像格式(如<code class="du kw kx ky kz b">JPEG</code>或<code class="du kw kx ky kz b">PNG</code>)相比，这极大地提高了相同文件大小的图像质量。</p><h2 id="61b2" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">AVIF对巴布亚新几内亚</h2><p id="81b7" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">作为一种无损压缩文件格式，<code class="du kw kx ky kz b">PNG</code>图像因其较大的文件大小而臭名昭著。<code class="du kw kx ky kz b">AVIF</code>支持有损和无损压缩。正是这种多功能性给了<code class="du kw kx ky kz b">AVIF</code>在文件大小方面的优势。</p><p id="193b" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">解码一个<code class="du kw kx ky kz b">PNG</code>是即时的，由于缺乏复杂性，<code class="du kw kx ky kz b">AVIF</code>往往更复杂，因此较慢的系统可能会更难解码图像。</p><p id="2a58" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">目前，<code class="du kw kx ky kz b">PNG</code>仍然是无损压缩的最佳格式，具有更小的文件大小和更好的平台支持。如果您愿意使用有损压缩来减小文件大小，那么<code class="du kw kx ky kz b">AVIF</code>是一个很好的交付替代方案，但是它的复杂性可能会让使用旧硬件的旧平台难以渲染。</p><h2 id="53c1" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">AVIF vs JPEG</h2><p id="9a64" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated"><strong class="ix hj">质量<br/> </strong> <code class="du kw kx ky kz b">JPEG</code>今天在压缩质量方面遭受损失。事实上，即使是更现代的JPEG 2000也能提供更好的整体压缩效果。<br/>另一方面,<code class="du kw kx ky kz b">AVIF</code>倾向于提供一些我们可以用有损的非摄影图像实现的最佳效果。<br/>那些处理低保真度图像的人<code class="du kw kx ky kz b">AVIF</code>会比<code class="du kw kx ky kz b">JPEG</code>表现得更好。但是也有缺点，<code class="du kw kx ky kz b">AVIF</code>图像不支持渐进式渲染，所以文件必须完全下载后才能显示。</p><p id="4f74" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">速度对比<br/> </strong> <code class="du kw kx ky kz b">JPEG</code>已经过时，写于多核CPU芯片发明之前。它不是为处理多个内核的顺序进程而设计的。<br/> <code class="du kw kx ky kz b">AVIF</code>可以与多个内核并行工作，这使其成为更适合的图像压缩形式。</p><p id="37c9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">动画<br/> </strong> <code class="du kw kx ky kz b">JPEG</code>是一种图像格式。这意味着它被设计成显示静止图像。<br/> <code class="du kw kx ky kz b">AVIF</code>是基于一个实际的视频编解码器，并提供动画能力，这意味着它可以支持动画和<code class="du kw kx ky kz b">JPEG</code>不能。</p><p id="09f9" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated"><strong class="ix hj">总的来说<br/> </strong>尽管<code class="du kw kx ky kz b">JPEG 2000</code>比最初的<code class="du kw kx ky kz b">JPEG</code>格式有了很大的改进，但它在许多方面仍然无法与AVIF竞争:<br/> <code class="du kw kx ky kz b">AVIF</code>已经成为那些需要在低带宽设置中管理编码的人的理想选择，尽管<code class="du kw kx ky kz b">JPEG</code>支持渐进式渲染，但它仍然缺乏<code class="du kw kx ky kz b">AVIF</code>提供的许多功能。</p><h2 id="540a" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">额外注释</h2><p id="5ca3" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">一些硬件较慢/较旧的设备可能能够获得基于其Android版本的<code class="du kw kx ky kz b">AVIF</code>或<code class="du kw kx ky kz b">webp</code>，但其硬件可能无法呈现这些格式(由于内存不足)或可能需要很长时间(由于处理器/图形处理器较慢)。<br/>与iOS相同，Android的最佳格式不能仅基于Android版本来确定，我们还必须考虑Android设备。</p><h1 id="cb26" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">旧版本格式</h1><h2 id="df48" class="lf ju hi bd jv lg lh li jz lj lk ll kd jg lm ln kh jk lo lp kl jo lq lr kp ls bi translated">PNG vs JPEG</h2><p id="00b3" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">我想在这里提出另一点，对于旧版本，我确实说过PNG将是最佳图像格式，但这并不总是正确的，<code class="du kw kx ky kz b">PNG</code>与<code class="du kw kx ky kz b">JPEG</code>的决定应该基于图像的复杂性，而不仅仅是基于它们运行的平台。<br/>例如:</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es lv"><img src="../Images/4785b3448819e8a83276e1d3991771ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/0*I118MVSHdaOPgpwm.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://developer.android.com/develop/ui/views/graphics/reduce-image-sizes" rel="noopener ugc nofollow" target="_blank">https://developer . Android . com/develop/ui/views/graphics/reduce-image-sizes</a></figcaption></figure><p id="8489" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">上面的图片显示了两张图片，根据开发者应用的压缩方案不同，它们会有很大的不同。左边的图像有许多小细节，因此用<code class="du kw kx ky kz b">JPG</code>压缩更有效。右边的图像具有相同的颜色，使用<code class="du kw kx ky kz b">PNG</code>可以更有效地压缩。</p><h1 id="4678" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">安卓如何选择一种格式？</h1><p id="870e" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">下图提供了一个简单的可视化效果，帮助您决定使用哪种压缩方案，这是应该考虑的一件事，如果设备支持Android 12+您应该考虑(基于我在这里描述的限制)使用<code class="du kw kx ky kz b">AVIF</code>。</p><figure class="lb lc ld le fd ij er es paragraph-image"><div class="er es lw"><img src="../Images/cc873f808a8c1d943953c14bafdb64b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/0*okWr0dvPoS5gGMR5.png"/></div><figcaption class="iq ir et er es is it bd b be z dx translated"><a class="ae iu" href="https://developer.android.com/develop/ui/views/graphics/reduce-image-sizes" rel="noopener ugc nofollow" target="_blank">https://developer . Android . com/develop/ui/views/graphics/reduce-image-sizes</a></figcaption></figure><h1 id="c9cd" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">如何为iOS选择一种格式？</h1><p id="2aa7" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">考虑到我之前提到的限制，决定应该很容易，iOS 11+应该总是使用<code class="du kw kx ky kz b">HEIC</code>较低的iOS版本应该选择<code class="du kw kx ky kz b">PNG</code>。</p><h1 id="9a89" class="jt ju hi bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="0422" class="pw-post-body-paragraph iv iw hi ix b iy kr ja jb jc ks je jf jg kt ji jj jk ku jm jn jo kv jq jr js hb bi translated">选择图像格式不是一件容易的事情，你必须考虑许多参数，如操作系统版本、设备和图像复杂性。<br/>我们总是可以选择简单的方法，将<code class="du kw kx ky kz b">JPG</code>设置为一切，但是如果我们想要更好的性能、更快的加载时间和更好的用户体验，我们需要为每个用例选择正确的格式。</p><p id="fa73" class="pw-post-body-paragraph iv iw hi ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hb bi translated">进一步阅读可以点击下面的链接:<br/><a class="ae iu" href="https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format" rel="noopener ugc nofollow" target="_blank">HEIC</a><br/><a class="ae iu" href="https://en.wikipedia.org/wiki/AVIF" rel="noopener ugc nofollow" target="_blank">Avif</a><br/><a class="ae iu" href="https://en.wikipedia.org/wiki/WebP" rel="noopener ugc nofollow" target="_blank">WebP</a></p></div></div>    
</body>
</html>